(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(i){if(i.ep)return;i.ep=!0;const c=t(i);fetch(i.href,c)}})();function A2(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Vg={exports:{}},gu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W1;function c4(){if(W1)return gu;W1=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,i,c){var d=null;if(c!==void 0&&(d=""+c),i.key!==void 0&&(d=""+i.key),"key"in i){c={};for(var f in i)f!=="key"&&(c[f]=i[f])}else c=i;return i=c.ref,{$$typeof:r,type:s,key:d,ref:i!==void 0?i:null,props:c}}return gu.Fragment=e,gu.jsx=t,gu.jsxs=t,gu}var Z1;function u4(){return Z1||(Z1=1,Vg.exports=c4()),Vg.exports}var l=u4(),Pg={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ew;function d4(){if(ew)return qe;ew=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),N=Symbol.iterator;function C(k){return k===null||typeof k!="object"?null:(k=N&&k[N]||k["@@iterator"],typeof k=="function"?k:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J=Object.assign,B={};function he(k,U,z){this.props=k,this.context=U,this.refs=B,this.updater=z||M}he.prototype.isReactComponent={},he.prototype.setState=function(k,U){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,U,"setState")},he.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function oe(){}oe.prototype=he.prototype;function le(k,U,z){this.props=k,this.context=U,this.refs=B,this.updater=z||M}var _e=le.prototype=new oe;_e.constructor=le,J(_e,he.prototype),_e.isPureReactComponent=!0;var me=Array.isArray;function G(){}var S={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function A(k,U,z){var ee=z.ref;return{$$typeof:r,type:k,key:U,ref:ee!==void 0?ee:null,props:z}}function O(k,U){return A(k.type,U,k.props)}function D(k){return typeof k=="object"&&k!==null&&k.$$typeof===r}function L(k){var U={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(z){return U[z]})}var I=/\/+/g;function de(k,U){return typeof k=="object"&&k!==null&&k.key!=null?L(""+k.key):U.toString(36)}function ge(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(G,G):(k.status="pending",k.then(function(U){k.status==="pending"&&(k.status="fulfilled",k.value=U)},function(U){k.status==="pending"&&(k.status="rejected",k.reason=U)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function F(k,U,z,ee,ve){var Oe=typeof k;(Oe==="undefined"||Oe==="boolean")&&(k=null);var Ue=!1;if(k===null)Ue=!0;else switch(Oe){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(k.$$typeof){case r:case e:Ue=!0;break;case v:return Ue=k._init,F(Ue(k._payload),U,z,ee,ve)}}if(Ue)return ve=ve(k),Ue=ee===""?"."+de(k,0):ee,me(ve)?(z="",Ue!=null&&(z=Ue.replace(I,"$&/")+"/"),F(ve,U,z,"",function(Nt){return Nt})):ve!=null&&(D(ve)&&(ve=O(ve,z+(ve.key==null||k&&k.key===ve.key?"":(""+ve.key).replace(I,"$&/")+"/")+Ue)),U.push(ve)),1;Ue=0;var at=ee===""?".":ee+":";if(me(k))for(var Re=0;Re<k.length;Re++)ee=k[Re],Oe=at+de(ee,Re),Ue+=F(ee,U,z,Oe,ve);else if(Re=C(k),typeof Re=="function")for(k=Re.call(k),Re=0;!(ee=k.next()).done;)ee=ee.value,Oe=at+de(ee,Re++),Ue+=F(ee,U,z,Oe,ve);else if(Oe==="object"){if(typeof k.then=="function")return F(ge(k),U,z,ee,ve);throw U=String(k),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function ce(k,U,z){if(k==null)return k;var ee=[],ve=0;return F(k,ee,"","",function(Oe){return U.call(z,Oe,ve++)}),ee}function Z(k){if(k._status===-1){var U=k._result;U=U(),U.then(function(z){(k._status===0||k._status===-1)&&(k._status=1,k._result=z)},function(z){(k._status===0||k._status===-1)&&(k._status=2,k._result=z)}),k._status===-1&&(k._status=0,k._result=U)}if(k._status===1)return k._result.default;throw k._result}var se=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},Se={map:ce,forEach:function(k,U,z){ce(k,function(){U.apply(this,arguments)},z)},count:function(k){var U=0;return ce(k,function(){U++}),U},toArray:function(k){return ce(k,function(U){return U})||[]},only:function(k){if(!D(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return qe.Activity=w,qe.Children=Se,qe.Component=he,qe.Fragment=t,qe.Profiler=i,qe.PureComponent=le,qe.StrictMode=s,qe.Suspense=g,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,qe.__COMPILER_RUNTIME={__proto__:null,c:function(k){return S.H.useMemoCache(k)}},qe.cache=function(k){return function(){return k.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function(k,U,z){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var ee=J({},k.props),ve=k.key;if(U!=null)for(Oe in U.key!==void 0&&(ve=""+U.key),U)!j.call(U,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&U.ref===void 0||(ee[Oe]=U[Oe]);var Oe=arguments.length-2;if(Oe===1)ee.children=z;else if(1<Oe){for(var Ue=Array(Oe),at=0;at<Oe;at++)Ue[at]=arguments[at+2];ee.children=Ue}return A(k.type,ve,ee)},qe.createContext=function(k){return k={$$typeof:d,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:c,_context:k},k},qe.createElement=function(k,U,z){var ee,ve={},Oe=null;if(U!=null)for(ee in U.key!==void 0&&(Oe=""+U.key),U)j.call(U,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(ve[ee]=U[ee]);var Ue=arguments.length-2;if(Ue===1)ve.children=z;else if(1<Ue){for(var at=Array(Ue),Re=0;Re<Ue;Re++)at[Re]=arguments[Re+2];ve.children=at}if(k&&k.defaultProps)for(ee in Ue=k.defaultProps,Ue)ve[ee]===void 0&&(ve[ee]=Ue[ee]);return A(k,Oe,ve)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(k){return{$$typeof:f,render:k}},qe.isValidElement=D,qe.lazy=function(k){return{$$typeof:v,_payload:{_status:-1,_result:k},_init:Z}},qe.memo=function(k,U){return{$$typeof:x,type:k,compare:U===void 0?null:U}},qe.startTransition=function(k){var U=S.T,z={};S.T=z;try{var ee=k(),ve=S.S;ve!==null&&ve(z,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(G,se)}catch(Oe){se(Oe)}finally{U!==null&&z.types!==null&&(U.types=z.types),S.T=U}},qe.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},qe.use=function(k){return S.H.use(k)},qe.useActionState=function(k,U,z){return S.H.useActionState(k,U,z)},qe.useCallback=function(k,U){return S.H.useCallback(k,U)},qe.useContext=function(k){return S.H.useContext(k)},qe.useDebugValue=function(){},qe.useDeferredValue=function(k,U){return S.H.useDeferredValue(k,U)},qe.useEffect=function(k,U){return S.H.useEffect(k,U)},qe.useEffectEvent=function(k){return S.H.useEffectEvent(k)},qe.useId=function(){return S.H.useId()},qe.useImperativeHandle=function(k,U,z){return S.H.useImperativeHandle(k,U,z)},qe.useInsertionEffect=function(k,U){return S.H.useInsertionEffect(k,U)},qe.useLayoutEffect=function(k,U){return S.H.useLayoutEffect(k,U)},qe.useMemo=function(k,U){return S.H.useMemo(k,U)},qe.useOptimistic=function(k,U){return S.H.useOptimistic(k,U)},qe.useReducer=function(k,U,z){return S.H.useReducer(k,U,z)},qe.useRef=function(k){return S.H.useRef(k)},qe.useState=function(k){return S.H.useState(k)},qe.useSyncExternalStore=function(k,U,z){return S.H.useSyncExternalStore(k,U,z)},qe.useTransition=function(){return S.H.useTransition()},qe.version="19.2.0",qe}var tw;function rx(){return tw||(tw=1,Pg.exports=d4()),Pg.exports}var V=rx();const ax=A2(V);var Lg={exports:{}},pu={},zg={exports:{}},Ug={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nw;function h4(){return nw||(nw=1,(function(r){function e(F,ce){var Z=F.length;F.push(ce);e:for(;0<Z;){var se=Z-1>>>1,Se=F[se];if(0<i(Se,ce))F[se]=ce,F[Z]=Se,Z=se;else break e}}function t(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var ce=F[0],Z=F.pop();if(Z!==ce){F[0]=Z;e:for(var se=0,Se=F.length,k=Se>>>1;se<k;){var U=2*(se+1)-1,z=F[U],ee=U+1,ve=F[ee];if(0>i(z,Z))ee<Se&&0>i(ve,z)?(F[se]=ve,F[ee]=Z,se=ee):(F[se]=z,F[U]=Z,se=U);else if(ee<Se&&0>i(ve,Z))F[se]=ve,F[ee]=Z,se=ee;else break e}}return ce}function i(F,ce){var Z=F.sortIndex-ce.sortIndex;return Z!==0?Z:F.id-ce.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();r.unstable_now=function(){return d.now()-f}}var g=[],x=[],v=1,w=null,N=3,C=!1,M=!1,J=!1,B=!1,he=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,le=typeof setImmediate<"u"?setImmediate:null;function _e(F){for(var ce=t(x);ce!==null;){if(ce.callback===null)s(x);else if(ce.startTime<=F)s(x),ce.sortIndex=ce.expirationTime,e(g,ce);else break;ce=t(x)}}function me(F){if(J=!1,_e(F),!M)if(t(g)!==null)M=!0,G||(G=!0,L());else{var ce=t(x);ce!==null&&ge(me,ce.startTime-F)}}var G=!1,S=-1,j=5,A=-1;function O(){return B?!0:!(r.unstable_now()-A<j)}function D(){if(B=!1,G){var F=r.unstable_now();A=F;var ce=!0;try{e:{M=!1,J&&(J=!1,oe(S),S=-1),C=!0;var Z=N;try{t:{for(_e(F),w=t(g);w!==null&&!(w.expirationTime>F&&O());){var se=w.callback;if(typeof se=="function"){w.callback=null,N=w.priorityLevel;var Se=se(w.expirationTime<=F);if(F=r.unstable_now(),typeof Se=="function"){w.callback=Se,_e(F),ce=!0;break t}w===t(g)&&s(g),_e(F)}else s(g);w=t(g)}if(w!==null)ce=!0;else{var k=t(x);k!==null&&ge(me,k.startTime-F),ce=!1}}break e}finally{w=null,N=Z,C=!1}ce=void 0}}finally{ce?L():G=!1}}}var L;if(typeof le=="function")L=function(){le(D)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,de=I.port2;I.port1.onmessage=D,L=function(){de.postMessage(null)}}else L=function(){he(D,0)};function ge(F,ce){S=he(function(){F(r.unstable_now())},ce)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(F){F.callback=null},r.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<F?Math.floor(1e3/F):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_next=function(F){switch(N){case 1:case 2:case 3:var ce=3;break;default:ce=N}var Z=N;N=ce;try{return F()}finally{N=Z}},r.unstable_requestPaint=function(){B=!0},r.unstable_runWithPriority=function(F,ce){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Z=N;N=F;try{return ce()}finally{N=Z}},r.unstable_scheduleCallback=function(F,ce,Z){var se=r.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?se+Z:se):Z=se,F){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=Z+Se,F={id:v++,callback:ce,priorityLevel:F,startTime:Z,expirationTime:Se,sortIndex:-1},Z>se?(F.sortIndex=Z,e(x,F),t(g)===null&&F===t(x)&&(J?(oe(S),S=-1):J=!0,ge(me,Z-se))):(F.sortIndex=Se,e(g,F),M||C||(M=!0,G||(G=!0,L()))),F},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(F){var ce=N;return function(){var Z=N;N=ce;try{return F.apply(this,arguments)}finally{N=Z}}}})(Ug)),Ug}var sw;function f4(){return sw||(sw=1,zg.exports=h4()),zg.exports}var Bg={exports:{}},Cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rw;function m4(){if(rw)return Cn;rw=1;var r=rx();function e(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)x+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function c(g,x,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:w==null?null:""+w,children:g,containerInfo:x,implementation:v}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Cn.createPortal=function(g,x){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return c(g,x,null,v)},Cn.flushSync=function(g){var x=d.T,v=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=x,s.p=v,s.d.f()}},Cn.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,s.d.C(g,x))},Cn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Cn.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var v=x.as,w=f(v,x.crossOrigin),N=typeof x.integrity=="string"?x.integrity:void 0,C=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;v==="style"?s.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:w,integrity:N,fetchPriority:C}):v==="script"&&s.d.X(g,{crossOrigin:w,integrity:N,fetchPriority:C,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Cn.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var v=f(x.as,x.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&s.d.M(g)},Cn.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var v=x.as,w=f(v,x.crossOrigin);s.d.L(g,v,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Cn.preloadModule=function(g,x){if(typeof g=="string")if(x){var v=f(x.as,x.crossOrigin);s.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else s.d.m(g)},Cn.requestFormReset=function(g){s.d.r(g)},Cn.unstable_batchedUpdates=function(g,x){return g(x)},Cn.useFormState=function(g,x,v){return d.H.useFormState(g,x,v)},Cn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Cn.version="19.2.0",Cn}var aw;function g4(){if(aw)return Bg.exports;aw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Bg.exports=m4(),Bg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iw;function p4(){if(iw)return pu;iw=1;var r=f4(),e=rx(),t=g4();function s(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var a=n,o=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(o=a.return),n=a.return;while(n)}return a.tag===3?o:null}function d(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function f(n){if(n.tag===31){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function g(n){if(c(n)!==n)throw Error(s(188))}function x(n){var a=n.alternate;if(!a){if(a=c(n),a===null)throw Error(s(188));return a!==n?null:n}for(var o=n,u=a;;){var m=o.return;if(m===null)break;var p=m.alternate;if(p===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===p.child){for(p=m.child;p;){if(p===o)return g(m),n;if(p===u)return g(m),a;p=p.sibling}throw Error(s(188))}if(o.return!==u.return)o=m,u=p;else{for(var b=!1,E=m.child;E;){if(E===o){b=!0,o=m,u=p;break}if(E===u){b=!0,u=m,o=p;break}E=E.sibling}if(!b){for(E=p.child;E;){if(E===o){b=!0,o=p,u=m;break}if(E===u){b=!0,u=p,o=m;break}E=E.sibling}if(!b)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?n:a}function v(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=v(n),a!==null)return a;n=n.sibling}return null}var w=Object.assign,N=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),he=Symbol.for("react.profiler"),oe=Symbol.for("react.consumer"),le=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function L(n){return n===null||typeof n!="object"?null:(n=D&&n[D]||n["@@iterator"],typeof n=="function"?n:null)}var I=Symbol.for("react.client.reference");function de(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===I?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case J:return"Fragment";case he:return"Profiler";case B:return"StrictMode";case me:return"Suspense";case G:return"SuspenseList";case A:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case M:return"Portal";case le:return n.displayName||"Context";case oe:return(n._context.displayName||"Context")+".Consumer";case _e:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case S:return a=n.displayName||null,a!==null?a:de(n.type)||"Memo";case j:a=n._payload,n=n._init;try{return de(n(a))}catch{}}return null}var ge=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},se=[],Se=-1;function k(n){return{current:n}}function U(n){0>Se||(n.current=se[Se],se[Se]=null,Se--)}function z(n,a){Se++,se[Se]=n.current,n.current=a}var ee=k(null),ve=k(null),Oe=k(null),Ue=k(null);function at(n,a){switch(z(Oe,a),z(ve,n),z(ee,null),a.nodeType){case 9:case 11:n=(n=a.documentElement)&&(n=n.namespaceURI)?w1(n):0;break;default:if(n=a.tagName,a=a.namespaceURI)a=w1(a),n=_1(a,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}U(ee),z(ee,n)}function Re(){U(ee),U(ve),U(Oe)}function Nt(n){n.memoizedState!==null&&z(Ue,n);var a=ee.current,o=_1(a,n.type);a!==o&&(z(ve,n),z(ee,o))}function gt(n){ve.current===n&&(U(ee),U(ve)),Ue.current===n&&(U(Ue),du._currentValue=Z)}var Rt,lt;function wn(n){if(Rt===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);Rt=a&&a[1]||"",lt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rt+n+lt}var ws=!1;function _s(n,a){if(!n||ws)return"";ws=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(W){var X=W}Reflect.construct(n,[],ae)}else{try{ae.call()}catch(W){X=W}n.call(ae.prototype)}}else{try{throw Error()}catch(W){X=W}(ae=n())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(W){if(W&&X&&typeof W.stack=="string")return[W.stack,X.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),b=p[0],E=p[1];if(b&&E){var R=b.split(`
`),Q=E.split(`
`);for(m=u=0;u<R.length&&!R[u].includes("DetermineComponentFrameRoot");)u++;for(;m<Q.length&&!Q[m].includes("DetermineComponentFrameRoot");)m++;if(u===R.length||m===Q.length)for(u=R.length-1,m=Q.length-1;1<=u&&0<=m&&R[u]!==Q[m];)m--;for(;1<=u&&0<=m;u--,m--)if(R[u]!==Q[m]){if(u!==1||m!==1)do if(u--,m--,0>m||R[u]!==Q[m]){var ne=`
`+R[u].replace(" at new "," at ");return n.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",n.displayName)),ne}while(1<=u&&0<=m);break}}}finally{ws=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?wn(o):""}function ar(n,a){switch(n.tag){case 26:case 27:case 5:return wn(n.type);case 16:return wn("Lazy");case 13:return n.child!==a&&a!==null?wn("Suspense Fallback"):wn("Suspense");case 19:return wn("SuspenseList");case 0:case 15:return _s(n.type,!1);case 11:return _s(n.type.render,!1);case 1:return _s(n.type,!0);case 31:return wn("Activity");default:return""}}function Vr(n){try{var a="",o=null;do a+=ar(n,o),o=n,n=n.return;while(n);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ot=Object.prototype.hasOwnProperty,Mt=r.unstable_scheduleCallback,fn=r.unstable_cancelCallback,_a=r.unstable_shouldYield,Na=r.unstable_requestPaint,Vt=r.unstable_now,Ns=r.unstable_getCurrentPriorityLevel,ir=r.unstable_ImmediatePriority,Pr=r.unstable_UserBlockingPriority,_n=r.unstable_NormalPriority,Ea=r.unstable_LowPriority,Ta=r.unstable_IdlePriority,ie=r.log,Xe=r.unstable_setDisableYieldValue,Be=null,Ye=null;function Ut(n){if(typeof ie=="function"&&Xe(n),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(Be,n)}catch{}}var nt=Math.clz32?Math.clz32:lr,Lr=Math.log,zn=Math.LN2;function lr(n){return n>>>=0,n===0?32:31-(Lr(n)/zn|0)|0}var Gn=256,ue=262144,we=4194304;function Ie(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ye(n,a,o){var u=n.pendingLanes;if(u===0)return 0;var m=0,p=n.suspendedLanes,b=n.pingedLanes;n=n.warmLanes;var E=u&134217727;return E!==0?(u=E&~p,u!==0?m=Ie(u):(b&=E,b!==0?m=Ie(b):o||(o=E&~n,o!==0&&(m=Ie(o))))):(E=u&~p,E!==0?m=Ie(E):b!==0?m=Ie(b):o||(o=u&~n,o!==0&&(m=Ie(o)))),m===0?0:a!==0&&a!==m&&(a&p)===0&&(p=m&-m,o=a&-a,p>=o||p===32&&(o&4194048)!==0)?a:m}function Pe(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function Je(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function At(){var n=we;return we<<=1,(we&62914560)===0&&(we=4194304),n}function ut(n){for(var a=[],o=0;31>o;o++)a.push(n);return a}function dt(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Bt(n,a,o,u,m,p){var b=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var E=n.entanglements,R=n.expirationTimes,Q=n.hiddenUpdates;for(o=b&~o;0<o;){var ne=31-nt(o),ae=1<<ne;E[ne]=0,R[ne]=-1;var X=Q[ne];if(X!==null)for(Q[ne]=null,ne=0;ne<X.length;ne++){var W=X[ne];W!==null&&(W.lane&=-536870913)}o&=~ae}u!==0&&mn(n,u,0),p!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=p&~(b&~a))}function mn(n,a,o){n.pendingLanes|=a,n.suspendedLanes&=~a;var u=31-nt(a);n.entangledLanes|=a,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function ki(n,a){var o=n.entangledLanes|=a;for(n=n.entanglements;o;){var u=31-nt(o),m=1<<u;m&a|n[u]&a&&(n[u]|=a),o&=~m}}function xc(n,a){var o=a&-a;return o=(o&42)!==0?1:Di(o),(o&(n.suspendedLanes|a))!==0?0:o}function Di(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function zr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Sd(){var n=ce.p;return n!==0?n:(n=window.event,n===void 0?32:G1(n.type))}function qs(n,a){var o=ce.p;try{return ce.p=n,a()}finally{ce.p=o}}var Fs=Math.random().toString(36).slice(2),en="__reactFiber$"+Fs,gn="__reactProps$"+Fs,or="__reactContainer$"+Fs,Vl="__reactEvents$"+Fs,qm="__reactListeners$"+Fs,jd="__reactHandles$"+Fs,Ad="__reactResources$"+Fs,cr="__reactMarker$"+Fs;function Pl(n){delete n[en],delete n[gn],delete n[Vl],delete n[qm],delete n[jd]}function ur(n){var a=n[en];if(a)return a;for(var o=n.parentNode;o;){if(a=o[or]||o[en]){if(o=a.alternate,a.child!==null||o!==null&&o.child!==null)for(n=I1(n);n!==null;){if(o=n[en])return o;n=I1(n)}return a}n=o,o=n.parentNode}return null}function Es(n){if(n=n[en]||n[or]){var a=n.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return n}return null}function is(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(s(33))}function dr(n){var a=n[Ad];return a||(a=n[Ad]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function tn(n){n[cr]=!0}var yc=new Set,bc={};function hr(n,a){fr(n,a),fr(n+"Capture",a)}function fr(n,a){for(bc[n]=a,n=0;n<a.length;n++)yc.add(a[n])}var vc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wc={},_c={};function Id(n){return Ot.call(_c,n)?!0:Ot.call(wc,n)?!1:vc.test(n)?_c[n]=!0:(wc[n]=!0,!1)}function Ll(n,a,o){if(Id(a))if(o===null)n.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+o)}}function ls(n,a,o){if(o===null)n.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+o)}}function nn(n,a,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(a,o,""+u)}}function pn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Sa(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Nc(n,a,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,a);if(!n.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,p=u.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return m.call(this)},set:function(b){o=""+b,p.call(this,b)}}),Object.defineProperty(n,a,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function pt(n){if(!n._valueTracker){var a=Sa(n)?"checked":"value";n._valueTracker=Nc(n,a,""+n[a])}}function Oi(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var o=a.getValue(),u="";return n&&(u=Sa(n)?n.checked?"true":"false":n.value),n=u,n!==o?(a.setValue(n),!0):!1}function mr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Mi=/[\n"\\]/g;function $n(n){return n.replace(Mi,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function zl(n,a,o,u,m,p,b,E){n.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.type=b:n.removeAttribute("type"),a!=null?b==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+pn(a)):n.value!==""+pn(a)&&(n.value=""+pn(a)):b!=="submit"&&b!=="reset"||n.removeAttribute("value"),a!=null?Ec(n,b,pn(a)):o!=null?Ec(n,b,pn(o)):u!=null&&n.removeAttribute("value"),m==null&&p!=null&&(n.defaultChecked=!!p),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+pn(E):n.removeAttribute("name")}function Cd(n,a,o,u,m,p,b,E){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),a!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||a!=null)){pt(n);return}o=o!=null?""+pn(o):"",a=a!=null?""+pn(a):o,E||a===n.value||(n.value=a),n.defaultValue=a}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=E?n.checked:!!u,n.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.name=b),pt(n)}function Ec(n,a,o){a==="number"&&mr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function ja(n,a,o,u){if(n=n.options,a){a={};for(var m=0;m<o.length;m++)a["$"+o[m]]=!0;for(o=0;o<n.length;o++)m=a.hasOwnProperty("$"+n[o].value),n[o].selected!==m&&(n[o].selected=m),m&&u&&(n[o].defaultSelected=!0)}else{for(o=""+pn(o),a=null,m=0;m<n.length;m++){if(n[m].value===o){n[m].selected=!0,u&&(n[m].defaultSelected=!0);return}a!==null||n[m].disabled||(a=n[m])}a!==null&&(a.selected=!0)}}function Rd(n,a,o){if(a!=null&&(a=""+pn(a),a!==n.value&&(n.value=a),o==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=o!=null?""+pn(o):""}function Aa(n,a,o,u){if(a==null){if(u!=null){if(o!=null)throw Error(s(92));if(ge(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),a=o}o=pn(a),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),pt(n)}function Kn(n,a){if(a){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=a;return}}n.textContent=a}var kd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tc(n,a,o){var u=a.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":u?n.setProperty(a,o):typeof o!="number"||o===0||kd.has(a)?a==="float"?n.cssFloat=o:n[a]=(""+o).trim():n[a]=o+"px"}function Sc(n,a,o){if(a!=null&&typeof a!="object")throw Error(s(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var m in a)u=a[m],a.hasOwnProperty(m)&&o[m]!==u&&Tc(n,m,u)}else for(var p in a)a.hasOwnProperty(p)&&Tc(n,p,a[p])}function Ul(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ia=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bl(n){return Ia.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Hs(){}var jc=null;function Ts(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ca=null,gr=null;function Vi(n){var a=Es(n);if(a&&(n=a.stateNode)){var o=n[gn]||null;e:switch(n=a.stateNode,a.type){case"input":if(zl(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),a=o.name,o.type==="radio"&&a!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+$n(""+a)+'"][type="radio"]'),a=0;a<o.length;a++){var u=o[a];if(u!==n&&u.form===n.form){var m=u[gn]||null;if(!m)throw Error(s(90));zl(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<o.length;a++)u=o[a],u.form===n.form&&Oi(u)}break e;case"textarea":Rd(n,o.value,o.defaultValue);break e;case"select":a=o.value,a!=null&&ja(n,!!o.multiple,a,!1)}}}var ql=!1;function Ra(n,a,o){if(ql)return n(a,o);ql=!0;try{var u=n(a);return u}finally{if(ql=!1,(Ca!==null||gr!==null)&&(Sh(),Ca&&(a=Ca,n=gr,gr=Ca=null,Vi(a),n)))for(a=0;a<n.length;a++)Vi(n[a])}}function Gs(n,a){var o=n.stateNode;if(o===null)return null;var u=o[gn]||null;if(u===null)return null;o=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(s(231,a,typeof o));return o}var Ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pi=!1;if(Ss)try{var Et={};Object.defineProperty(Et,"passive",{get:function(){Pi=!0}}),window.addEventListener("test",Et,Et),window.removeEventListener("test",Et,Et)}catch{Pi=!1}var pr=null,Ac=null,Li=null;function Ic(){if(Li)return Li;var n,a=Ac,o=a.length,u,m="value"in pr?pr.value:pr.textContent,p=m.length;for(n=0;n<o&&a[n]===m[n];n++);var b=o-n;for(u=1;u<=b&&a[o-u]===m[p-u];u++);return Li=m.slice(n,1<u?1-u:void 0)}function zi(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function Ur(){return!0}function $s(){return!1}function Nn(n){function a(o,u,m,p,b){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=p,this.target=b,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(o=n[E],this[E]=o?o(p):p[E]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ur:$s,this.isPropagationStopped=$s,this}return w(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ur)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ur)},persist:function(){},isPersistent:Ur}),a}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xr=Nn(Br),ka=w({},Br,{view:0,detail:0}),Cc=Nn(ka),Da,Fl,yr,Hl=w({},ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oa,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==yr&&(yr&&n.type==="mousemove"?(Da=n.screenX-yr.screenX,Fl=n.screenY-yr.screenY):Fl=Da=0,yr=n),Da)},movementY:function(n){return"movementY"in n?n.movementY:Fl}}),Rc=Nn(Hl),Ui=w({},Hl,{dataTransfer:0}),Od=Nn(Ui),Md=w({},ka,{relatedTarget:0}),Bi=Nn(Md),kc=w({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),Vd=Nn(kc),Gl=w({},Br,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Pd=Nn(Gl),Ld=w({},Br,{data:0}),br=Nn(Ld),zd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ud={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qd(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=Bd[n])?!!a[n]:!1}function Oa(){return qd}var Un=w({},ka,{key:function(n){if(n.key){var a=zd[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=zi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ud[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oa,charCode:function(n){return n.type==="keypress"?zi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?zi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Fd=Nn(Un),Hd=w({},Hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qr=Nn(Hd),h=w({},ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oa}),y=Nn(h),_=w({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),T=Nn(_),$=w({},Hl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=Nn($),be=w({},Br,{newState:0,oldState:0}),Fe=Nn(be),Xt=[9,13,27,32],ht=Ss&&"CompositionEvent"in window,Pt=null;Ss&&"documentMode"in document&&(Pt=document.documentMode);var js=Ss&&"TextEvent"in window&&!Pt,vr=Ss&&(!ht||Pt&&8<Pt&&11>=Pt),Ks=" ",Qs=!1;function qi(n,a){switch(n){case"keyup":return Xt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $l(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Kl=!1;function DS(n,a){switch(n){case"compositionend":return $l(a);case"keypress":return a.which!==32?null:(Qs=!0,Ks);case"textInput":return n=a.data,n===Ks&&Qs?null:n;default:return null}}function OS(n,a){if(Kl)return n==="compositionend"||!ht&&qi(n,a)?(n=Ic(),Li=Ac=pr=null,Kl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return vr&&a.locale!=="ko"?null:a.data;default:return null}}var MS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ky(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!MS[n.type]:a==="textarea"}function Dy(n,a,o,u){Ca?gr?gr.push(u):gr=[u]:Ca=u,a=Dh(a,"onChange"),0<a.length&&(o=new xr("onChange","change",null,o,u),n.push({event:o,listeners:a}))}var Dc=null,Oc=null;function VS(n){g1(n,0)}function Gd(n){var a=is(n);if(Oi(a))return n}function Oy(n,a){if(n==="change")return a}var My=!1;if(Ss){var Fm;if(Ss){var Hm="oninput"in document;if(!Hm){var Vy=document.createElement("div");Vy.setAttribute("oninput","return;"),Hm=typeof Vy.oninput=="function"}Fm=Hm}else Fm=!1;My=Fm&&(!document.documentMode||9<document.documentMode)}function Py(){Dc&&(Dc.detachEvent("onpropertychange",Ly),Oc=Dc=null)}function Ly(n){if(n.propertyName==="value"&&Gd(Oc)){var a=[];Dy(a,Oc,n,Ts(n)),Ra(VS,a)}}function PS(n,a,o){n==="focusin"?(Py(),Dc=a,Oc=o,Dc.attachEvent("onpropertychange",Ly)):n==="focusout"&&Py()}function LS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Gd(Oc)}function zS(n,a){if(n==="click")return Gd(a)}function US(n,a){if(n==="input"||n==="change")return Gd(a)}function BS(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var os=typeof Object.is=="function"?Object.is:BS;function Mc(n,a){if(os(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var o=Object.keys(n),u=Object.keys(a);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!Ot.call(a,m)||!os(n[m],a[m]))return!1}return!0}function zy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Uy(n,a){var o=zy(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=a&&u>=a)return{node:o,offset:a-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=zy(o)}}function By(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?By(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function qy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=mr(n.document);a instanceof n.HTMLIFrameElement;){try{var o=typeof a.contentWindow.location.href=="string"}catch{o=!1}if(o)n=a.contentWindow;else break;a=mr(n.document)}return a}function Gm(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}var qS=Ss&&"documentMode"in document&&11>=document.documentMode,Ql=null,$m=null,Vc=null,Km=!1;function Fy(n,a,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Km||Ql==null||Ql!==mr(u)||(u=Ql,"selectionStart"in u&&Gm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Vc&&Mc(Vc,u)||(Vc=u,u=Dh($m,"onSelect"),0<u.length&&(a=new xr("onSelect","select",null,a,o),n.push({event:a,listeners:u}),a.target=Ql)))}function Fi(n,a){var o={};return o[n.toLowerCase()]=a.toLowerCase(),o["Webkit"+n]="webkit"+a,o["Moz"+n]="moz"+a,o}var Xl={animationend:Fi("Animation","AnimationEnd"),animationiteration:Fi("Animation","AnimationIteration"),animationstart:Fi("Animation","AnimationStart"),transitionrun:Fi("Transition","TransitionRun"),transitionstart:Fi("Transition","TransitionStart"),transitioncancel:Fi("Transition","TransitionCancel"),transitionend:Fi("Transition","TransitionEnd")},Qm={},Hy={};Ss&&(Hy=document.createElement("div").style,"AnimationEvent"in window||(delete Xl.animationend.animation,delete Xl.animationiteration.animation,delete Xl.animationstart.animation),"TransitionEvent"in window||delete Xl.transitionend.transition);function Hi(n){if(Qm[n])return Qm[n];if(!Xl[n])return n;var a=Xl[n],o;for(o in a)if(a.hasOwnProperty(o)&&o in Hy)return Qm[n]=a[o];return n}var Gy=Hi("animationend"),$y=Hi("animationiteration"),Ky=Hi("animationstart"),FS=Hi("transitionrun"),HS=Hi("transitionstart"),GS=Hi("transitioncancel"),Qy=Hi("transitionend"),Xy=new Map,Xm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xm.push("scrollEnd");function Xs(n,a){Xy.set(n,a),hr(a,[n])}var $d=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},As=[],Yl=0,Ym=0;function Kd(){for(var n=Yl,a=Ym=Yl=0;a<n;){var o=As[a];As[a++]=null;var u=As[a];As[a++]=null;var m=As[a];As[a++]=null;var p=As[a];if(As[a++]=null,u!==null&&m!==null){var b=u.pending;b===null?m.next=m:(m.next=b.next,b.next=m),u.pending=m}p!==0&&Yy(o,m,p)}}function Qd(n,a,o,u){As[Yl++]=n,As[Yl++]=a,As[Yl++]=o,As[Yl++]=u,Ym|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Jm(n,a,o,u){return Qd(n,a,o,u),Xd(n)}function Gi(n,a){return Qd(n,null,null,a),Xd(n)}function Yy(n,a,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var m=!1,p=n.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(m=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,m&&a!==null&&(m=31-nt(o),n=p.hiddenUpdates,u=n[m],u===null?n[m]=[a]:u.push(a),a.lane=o|536870912),p):null}function Xd(n){if(50<ru)throw ru=0,ig=null,Error(s(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var Jl={};function $S(n,a,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cs(n,a,o,u){return new $S(n,a,o,u)}function Wm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Fr(n,a){var o=n.alternate;return o===null?(o=cs(n.tag,a,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=a,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,a=n.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Jy(n,a){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,a=o.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function Yd(n,a,o,u,m,p){var b=0;if(u=n,typeof n=="function")Wm(n)&&(b=1);else if(typeof n=="string")b=Jj(n,o,ee.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case A:return n=cs(31,o,a,m),n.elementType=A,n.lanes=p,n;case J:return $i(o.children,m,p,a);case B:b=8,m|=24;break;case he:return n=cs(12,o,a,m|2),n.elementType=he,n.lanes=p,n;case me:return n=cs(13,o,a,m),n.elementType=me,n.lanes=p,n;case G:return n=cs(19,o,a,m),n.elementType=G,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case le:b=10;break e;case oe:b=9;break e;case _e:b=11;break e;case S:b=14;break e;case j:b=16,u=null;break e}b=29,o=Error(s(130,n===null?"null":typeof n,"")),u=null}return a=cs(b,o,a,m),a.elementType=n,a.type=u,a.lanes=p,a}function $i(n,a,o,u){return n=cs(7,n,u,a),n.lanes=o,n}function Zm(n,a,o){return n=cs(6,n,null,a),n.lanes=o,n}function Wy(n){var a=cs(18,null,null,0);return a.stateNode=n,a}function e0(n,a,o){return a=cs(4,n.children!==null?n.children:[],n.key,a),a.lanes=o,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}var Zy=new WeakMap;function Is(n,a){if(typeof n=="object"&&n!==null){var o=Zy.get(n);return o!==void 0?o:(a={value:n,source:a,stack:Vr(a)},Zy.set(n,a),a)}return{value:n,source:a,stack:Vr(a)}}var Wl=[],Zl=0,Jd=null,Pc=0,Cs=[],Rs=0,Ma=null,wr=1,_r="";function Hr(n,a){Wl[Zl++]=Pc,Wl[Zl++]=Jd,Jd=n,Pc=a}function eb(n,a,o){Cs[Rs++]=wr,Cs[Rs++]=_r,Cs[Rs++]=Ma,Ma=n;var u=wr;n=_r;var m=32-nt(u)-1;u&=~(1<<m),o+=1;var p=32-nt(a)+m;if(30<p){var b=m-m%5;p=(u&(1<<b)-1).toString(32),u>>=b,m-=b,wr=1<<32-nt(a)+m|o<<m|u,_r=p+n}else wr=1<<p|o<<m|u,_r=n}function t0(n){n.return!==null&&(Hr(n,1),eb(n,1,0))}function n0(n){for(;n===Jd;)Jd=Wl[--Zl],Wl[Zl]=null,Pc=Wl[--Zl],Wl[Zl]=null;for(;n===Ma;)Ma=Cs[--Rs],Cs[Rs]=null,_r=Cs[--Rs],Cs[Rs]=null,wr=Cs[--Rs],Cs[Rs]=null}function tb(n,a){Cs[Rs++]=wr,Cs[Rs++]=_r,Cs[Rs++]=Ma,wr=a.id,_r=a.overflow,Ma=n}var En=null,kt=null,st=!1,Va=null,ks=!1,s0=Error(s(519));function Pa(n){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Lc(Is(a,n)),s0}function nb(n){var a=n.stateNode,o=n.type,u=n.memoizedProps;switch(a[en]=n,a[gn]=u,o){case"dialog":Qe("cancel",a),Qe("close",a);break;case"iframe":case"object":case"embed":Qe("load",a);break;case"video":case"audio":for(o=0;o<iu.length;o++)Qe(iu[o],a);break;case"source":Qe("error",a);break;case"img":case"image":case"link":Qe("error",a),Qe("load",a);break;case"details":Qe("toggle",a);break;case"input":Qe("invalid",a),Cd(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Qe("invalid",a);break;case"textarea":Qe("invalid",a),Aa(a,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||a.textContent===""+o||u.suppressHydrationWarning===!0||b1(a.textContent,o)?(u.popover!=null&&(Qe("beforetoggle",a),Qe("toggle",a)),u.onScroll!=null&&Qe("scroll",a),u.onScrollEnd!=null&&Qe("scrollend",a),u.onClick!=null&&(a.onclick=Hs),a=!0):a=!1,a||Pa(n,!0)}function sb(n){for(En=n.return;En;)switch(En.tag){case 5:case 31:case 13:ks=!1;return;case 27:case 3:ks=!0;return;default:En=En.return}}function eo(n){if(n!==En)return!1;if(!st)return sb(n),st=!0,!1;var a=n.tag,o;if((o=a!==3&&a!==27)&&((o=a===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||wg(n.type,n.memoizedProps)),o=!o),o&&kt&&Pa(n),sb(n),a===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));kt=A1(n)}else if(a===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));kt=A1(n)}else a===27?(a=kt,Ja(n.type)?(n=Sg,Sg=null,kt=n):kt=a):kt=En?Os(n.stateNode.nextSibling):null;return!0}function Ki(){kt=En=null,st=!1}function r0(){var n=Va;return n!==null&&(Jn===null?Jn=n:Jn.push.apply(Jn,n),Va=null),n}function Lc(n){Va===null?Va=[n]:Va.push(n)}var a0=k(null),Qi=null,Gr=null;function La(n,a,o){z(a0,a._currentValue),a._currentValue=o}function $r(n){n._currentValue=a0.current,U(a0)}function i0(n,a,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),n===o)break;n=n.return}}function l0(n,a,o,u){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var p=m.dependencies;if(p!==null){var b=m.child;p=p.firstContext;e:for(;p!==null;){var E=p;p=m;for(var R=0;R<a.length;R++)if(E.context===a[R]){p.lanes|=o,E=p.alternate,E!==null&&(E.lanes|=o),i0(p.return,o,n),u||(b=null);break e}p=E.next}}else if(m.tag===18){if(b=m.return,b===null)throw Error(s(341));b.lanes|=o,p=b.alternate,p!==null&&(p.lanes|=o),i0(b,o,n),b=null}else b=m.child;if(b!==null)b.return=m;else for(b=m;b!==null;){if(b===n){b=null;break}if(m=b.sibling,m!==null){m.return=b.return,b=m;break}b=b.return}m=b}}function to(n,a,o,u){n=null;for(var m=a,p=!1;m!==null;){if(!p){if((m.flags&524288)!==0)p=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var b=m.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var E=m.type;os(m.pendingProps.value,b.value)||(n!==null?n.push(E):n=[E])}}else if(m===Ue.current){if(b=m.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(du):n=[du])}m=m.return}n!==null&&l0(a,n,o,u),a.flags|=262144}function Wd(n){for(n=n.firstContext;n!==null;){if(!os(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Xi(n){Qi=n,Gr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Tn(n){return rb(Qi,n)}function Zd(n,a){return Qi===null&&Xi(n),rb(n,a)}function rb(n,a){var o=a._currentValue;if(a={context:a,memoizedValue:o,next:null},Gr===null){if(n===null)throw Error(s(308));Gr=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else Gr=Gr.next=a;return o}var KS=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){a.aborted=!0,n.forEach(function(o){return o()})}},QS=r.unstable_scheduleCallback,XS=r.unstable_NormalPriority,sn={$$typeof:le,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function o0(){return{controller:new KS,data:new Map,refCount:0}}function zc(n){n.refCount--,n.refCount===0&&QS(XS,function(){n.controller.abort()})}var Uc=null,c0=0,no=0,so=null;function YS(n,a){if(Uc===null){var o=Uc=[];c0=0,no=hg(),so={status:"pending",value:void 0,then:function(u){o.push(u)}}}return c0++,a.then(ab,ab),a}function ab(){if(--c0===0&&Uc!==null){so!==null&&(so.status="fulfilled");var n=Uc;Uc=null,no=0,so=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function JS(n,a){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return n.then(function(){u.status="fulfilled",u.value=a;for(var m=0;m<o.length;m++)(0,o[m])(a)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var ib=F.S;F.S=function(n,a){Fv=Vt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&YS(n,a),ib!==null&&ib(n,a)};var Yi=k(null);function u0(){var n=Yi.current;return n!==null?n:It.pooledCache}function eh(n,a){a===null?z(Yi,Yi.current):z(Yi,a.pool)}function lb(){var n=u0();return n===null?null:{parent:sn._currentValue,pool:n}}var ro=Error(s(460)),d0=Error(s(474)),th=Error(s(542)),nh={then:function(){}};function ob(n){return n=n.status,n==="fulfilled"||n==="rejected"}function cb(n,a,o){switch(o=n[o],o===void 0?n.push(a):o!==a&&(a.then(Hs,Hs),a=o),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,db(n),n;default:if(typeof a.status=="string")a.then(Hs,Hs);else{if(n=It,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=a,n.status="pending",n.then(function(u){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=u}},function(u){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,db(n),n}throw Wi=a,ro}}function Ji(n){try{var a=n._init;return a(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Wi=o,ro):o}}var Wi=null;function ub(){if(Wi===null)throw Error(s(459));var n=Wi;return Wi=null,n}function db(n){if(n===ro||n===th)throw Error(s(483))}var ao=null,Bc=0;function sh(n){var a=Bc;return Bc+=1,ao===null&&(ao=[]),cb(ao,n,a)}function qc(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function rh(n,a){throw a.$$typeof===N?Error(s(525)):(n=Object.prototype.toString.call(a),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function hb(n){function a(q,P){if(n){var K=q.deletions;K===null?(q.deletions=[P],q.flags|=16):K.push(P)}}function o(q,P){if(!n)return null;for(;P!==null;)a(q,P),P=P.sibling;return null}function u(q){for(var P=new Map;q!==null;)q.key!==null?P.set(q.key,q):P.set(q.index,q),q=q.sibling;return P}function m(q,P){return q=Fr(q,P),q.index=0,q.sibling=null,q}function p(q,P,K){return q.index=K,n?(K=q.alternate,K!==null?(K=K.index,K<P?(q.flags|=67108866,P):K):(q.flags|=67108866,P)):(q.flags|=1048576,P)}function b(q){return n&&q.alternate===null&&(q.flags|=67108866),q}function E(q,P,K,re){return P===null||P.tag!==6?(P=Zm(K,q.mode,re),P.return=q,P):(P=m(P,K),P.return=q,P)}function R(q,P,K,re){var ke=K.type;return ke===J?ne(q,P,K.props.children,re,K.key):P!==null&&(P.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===j&&Ji(ke)===P.type)?(P=m(P,K.props),qc(P,K),P.return=q,P):(P=Yd(K.type,K.key,K.props,null,q.mode,re),qc(P,K),P.return=q,P)}function Q(q,P,K,re){return P===null||P.tag!==4||P.stateNode.containerInfo!==K.containerInfo||P.stateNode.implementation!==K.implementation?(P=e0(K,q.mode,re),P.return=q,P):(P=m(P,K.children||[]),P.return=q,P)}function ne(q,P,K,re,ke){return P===null||P.tag!==7?(P=$i(K,q.mode,re,ke),P.return=q,P):(P=m(P,K),P.return=q,P)}function ae(q,P,K){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Zm(""+P,q.mode,K),P.return=q,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case C:return K=Yd(P.type,P.key,P.props,null,q.mode,K),qc(K,P),K.return=q,K;case M:return P=e0(P,q.mode,K),P.return=q,P;case j:return P=Ji(P),ae(q,P,K)}if(ge(P)||L(P))return P=$i(P,q.mode,K,null),P.return=q,P;if(typeof P.then=="function")return ae(q,sh(P),K);if(P.$$typeof===le)return ae(q,Zd(q,P),K);rh(q,P)}return null}function X(q,P,K,re){var ke=P!==null?P.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return ke!==null?null:E(q,P,""+K,re);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case C:return K.key===ke?R(q,P,K,re):null;case M:return K.key===ke?Q(q,P,K,re):null;case j:return K=Ji(K),X(q,P,K,re)}if(ge(K)||L(K))return ke!==null?null:ne(q,P,K,re,null);if(typeof K.then=="function")return X(q,P,sh(K),re);if(K.$$typeof===le)return X(q,P,Zd(q,K),re);rh(q,K)}return null}function W(q,P,K,re,ke){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return q=q.get(K)||null,E(P,q,""+re,ke);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case C:return q=q.get(re.key===null?K:re.key)||null,R(P,q,re,ke);case M:return q=q.get(re.key===null?K:re.key)||null,Q(P,q,re,ke);case j:return re=Ji(re),W(q,P,K,re,ke)}if(ge(re)||L(re))return q=q.get(K)||null,ne(P,q,re,ke,null);if(typeof re.then=="function")return W(q,P,K,sh(re),ke);if(re.$$typeof===le)return W(q,P,K,Zd(P,re),ke);rh(P,re)}return null}function Te(q,P,K,re){for(var ke=null,ot=null,Ae=P,Ge=P=0,Ze=null;Ae!==null&&Ge<K.length;Ge++){Ae.index>Ge?(Ze=Ae,Ae=null):Ze=Ae.sibling;var ct=X(q,Ae,K[Ge],re);if(ct===null){Ae===null&&(Ae=Ze);break}n&&Ae&&ct.alternate===null&&a(q,Ae),P=p(ct,P,Ge),ot===null?ke=ct:ot.sibling=ct,ot=ct,Ae=Ze}if(Ge===K.length)return o(q,Ae),st&&Hr(q,Ge),ke;if(Ae===null){for(;Ge<K.length;Ge++)Ae=ae(q,K[Ge],re),Ae!==null&&(P=p(Ae,P,Ge),ot===null?ke=Ae:ot.sibling=Ae,ot=Ae);return st&&Hr(q,Ge),ke}for(Ae=u(Ae);Ge<K.length;Ge++)Ze=W(Ae,q,Ge,K[Ge],re),Ze!==null&&(n&&Ze.alternate!==null&&Ae.delete(Ze.key===null?Ge:Ze.key),P=p(Ze,P,Ge),ot===null?ke=Ze:ot.sibling=Ze,ot=Ze);return n&&Ae.forEach(function(ni){return a(q,ni)}),st&&Hr(q,Ge),ke}function Me(q,P,K,re){if(K==null)throw Error(s(151));for(var ke=null,ot=null,Ae=P,Ge=P=0,Ze=null,ct=K.next();Ae!==null&&!ct.done;Ge++,ct=K.next()){Ae.index>Ge?(Ze=Ae,Ae=null):Ze=Ae.sibling;var ni=X(q,Ae,ct.value,re);if(ni===null){Ae===null&&(Ae=Ze);break}n&&Ae&&ni.alternate===null&&a(q,Ae),P=p(ni,P,Ge),ot===null?ke=ni:ot.sibling=ni,ot=ni,Ae=Ze}if(ct.done)return o(q,Ae),st&&Hr(q,Ge),ke;if(Ae===null){for(;!ct.done;Ge++,ct=K.next())ct=ae(q,ct.value,re),ct!==null&&(P=p(ct,P,Ge),ot===null?ke=ct:ot.sibling=ct,ot=ct);return st&&Hr(q,Ge),ke}for(Ae=u(Ae);!ct.done;Ge++,ct=K.next())ct=W(Ae,q,Ge,ct.value,re),ct!==null&&(n&&ct.alternate!==null&&Ae.delete(ct.key===null?Ge:ct.key),P=p(ct,P,Ge),ot===null?ke=ct:ot.sibling=ct,ot=ct);return n&&Ae.forEach(function(o4){return a(q,o4)}),st&&Hr(q,Ge),ke}function jt(q,P,K,re){if(typeof K=="object"&&K!==null&&K.type===J&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case C:e:{for(var ke=K.key;P!==null;){if(P.key===ke){if(ke=K.type,ke===J){if(P.tag===7){o(q,P.sibling),re=m(P,K.props.children),re.return=q,q=re;break e}}else if(P.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===j&&Ji(ke)===P.type){o(q,P.sibling),re=m(P,K.props),qc(re,K),re.return=q,q=re;break e}o(q,P);break}else a(q,P);P=P.sibling}K.type===J?(re=$i(K.props.children,q.mode,re,K.key),re.return=q,q=re):(re=Yd(K.type,K.key,K.props,null,q.mode,re),qc(re,K),re.return=q,q=re)}return b(q);case M:e:{for(ke=K.key;P!==null;){if(P.key===ke)if(P.tag===4&&P.stateNode.containerInfo===K.containerInfo&&P.stateNode.implementation===K.implementation){o(q,P.sibling),re=m(P,K.children||[]),re.return=q,q=re;break e}else{o(q,P);break}else a(q,P);P=P.sibling}re=e0(K,q.mode,re),re.return=q,q=re}return b(q);case j:return K=Ji(K),jt(q,P,K,re)}if(ge(K))return Te(q,P,K,re);if(L(K)){if(ke=L(K),typeof ke!="function")throw Error(s(150));return K=ke.call(K),Me(q,P,K,re)}if(typeof K.then=="function")return jt(q,P,sh(K),re);if(K.$$typeof===le)return jt(q,P,Zd(q,K),re);rh(q,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,P!==null&&P.tag===6?(o(q,P.sibling),re=m(P,K),re.return=q,q=re):(o(q,P),re=Zm(K,q.mode,re),re.return=q,q=re),b(q)):o(q,P)}return function(q,P,K,re){try{Bc=0;var ke=jt(q,P,K,re);return ao=null,ke}catch(Ae){if(Ae===ro||Ae===th)throw Ae;var ot=cs(29,Ae,null,q.mode);return ot.lanes=re,ot.return=q,ot}finally{}}}var Zi=hb(!0),fb=hb(!1),za=!1;function h0(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function f0(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ua(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ba(n,a,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(ft&2)!==0){var m=u.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),u.pending=a,a=Xd(n),Yy(n,null,o),a}return Qd(n,u,a,o),Xd(n)}function Fc(n,a,o){if(a=a.updateQueue,a!==null&&(a=a.shared,(o&4194048)!==0)){var u=a.lanes;u&=n.pendingLanes,o|=u,a.lanes=o,ki(n,o)}}function m0(n,a){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?m=p=b:p=p.next=b,o=o.next}while(o!==null);p===null?m=p=a:p=p.next=a}else m=p=a;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=a:n.next=a,o.lastBaseUpdate=a}var g0=!1;function Hc(){if(g0){var n=so;if(n!==null)throw n}}function Gc(n,a,o,u){g0=!1;var m=n.updateQueue;za=!1;var p=m.firstBaseUpdate,b=m.lastBaseUpdate,E=m.shared.pending;if(E!==null){m.shared.pending=null;var R=E,Q=R.next;R.next=null,b===null?p=Q:b.next=Q,b=R;var ne=n.alternate;ne!==null&&(ne=ne.updateQueue,E=ne.lastBaseUpdate,E!==b&&(E===null?ne.firstBaseUpdate=Q:E.next=Q,ne.lastBaseUpdate=R))}if(p!==null){var ae=m.baseState;b=0,ne=Q=R=null,E=p;do{var X=E.lane&-536870913,W=X!==E.lane;if(W?(We&X)===X:(u&X)===X){X!==0&&X===no&&(g0=!0),ne!==null&&(ne=ne.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Te=n,Me=E;X=a;var jt=o;switch(Me.tag){case 1:if(Te=Me.payload,typeof Te=="function"){ae=Te.call(jt,ae,X);break e}ae=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Me.payload,X=typeof Te=="function"?Te.call(jt,ae,X):Te,X==null)break e;ae=w({},ae,X);break e;case 2:za=!0}}X=E.callback,X!==null&&(n.flags|=64,W&&(n.flags|=8192),W=m.callbacks,W===null?m.callbacks=[X]:W.push(X))}else W={lane:X,tag:E.tag,payload:E.payload,callback:E.callback,next:null},ne===null?(Q=ne=W,R=ae):ne=ne.next=W,b|=X;if(E=E.next,E===null){if(E=m.shared.pending,E===null)break;W=E,E=W.next,W.next=null,m.lastBaseUpdate=W,m.shared.pending=null}}while(!0);ne===null&&(R=ae),m.baseState=R,m.firstBaseUpdate=Q,m.lastBaseUpdate=ne,p===null&&(m.shared.lanes=0),$a|=b,n.lanes=b,n.memoizedState=ae}}function mb(n,a){if(typeof n!="function")throw Error(s(191,n));n.call(a)}function gb(n,a){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)mb(o[n],a)}var io=k(null),ah=k(0);function pb(n,a){n=ta,z(ah,n),z(io,a),ta=n|a.baseLanes}function p0(){z(ah,ta),z(io,io.current)}function x0(){ta=ah.current,U(io),U(ah)}var us=k(null),Ds=null;function qa(n){var a=n.alternate;z(Yt,Yt.current&1),z(us,n),Ds===null&&(a===null||io.current!==null||a.memoizedState!==null)&&(Ds=n)}function y0(n){z(Yt,Yt.current),z(us,n),Ds===null&&(Ds=n)}function xb(n){n.tag===22?(z(Yt,Yt.current),z(us,n),Ds===null&&(Ds=n)):Fa()}function Fa(){z(Yt,Yt.current),z(us,us.current)}function ds(n){U(us),Ds===n&&(Ds=null),U(Yt)}var Yt=k(0);function ih(n){for(var a=n;a!==null;){if(a.tag===13){var o=a.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Eg(o)||Tg(o)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Kr=0,He=null,Tt=null,rn=null,lh=!1,lo=!1,el=!1,oh=0,$c=0,oo=null,WS=0;function Ht(){throw Error(s(321))}function b0(n,a){if(a===null)return!1;for(var o=0;o<a.length&&o<n.length;o++)if(!os(n[o],a[o]))return!1;return!0}function v0(n,a,o,u,m,p){return Kr=p,He=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,F.H=n===null||n.memoizedState===null?ev:M0,el=!1,p=o(u,m),el=!1,lo&&(p=bb(a,o,u,m)),yb(n),p}function yb(n){F.H=Xc;var a=Tt!==null&&Tt.next!==null;if(Kr=0,rn=Tt=He=null,lh=!1,$c=0,oo=null,a)throw Error(s(300));n===null||an||(n=n.dependencies,n!==null&&Wd(n)&&(an=!0))}function bb(n,a,o,u){He=n;var m=0;do{if(lo&&(oo=null),$c=0,lo=!1,25<=m)throw Error(s(301));if(m+=1,rn=Tt=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}F.H=tv,p=a(o,u)}while(lo);return p}function ZS(){var n=F.H,a=n.useState()[0];return a=typeof a.then=="function"?Kc(a):a,n=n.useState()[0],(Tt!==null?Tt.memoizedState:null)!==n&&(He.flags|=1024),a}function w0(){var n=oh!==0;return oh=0,n}function _0(n,a,o){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~o}function N0(n){if(lh){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}lh=!1}Kr=0,rn=Tt=He=null,lo=!1,$c=oh=0,oo=null}function Bn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?He.memoizedState=rn=n:rn=rn.next=n,rn}function Jt(){if(Tt===null){var n=He.alternate;n=n!==null?n.memoizedState:null}else n=Tt.next;var a=rn===null?He.memoizedState:rn.next;if(a!==null)rn=a,Tt=n;else{if(n===null)throw He.alternate===null?Error(s(467)):Error(s(310));Tt=n,n={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},rn===null?He.memoizedState=rn=n:rn=rn.next=n}return rn}function ch(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kc(n){var a=$c;return $c+=1,oo===null&&(oo=[]),n=cb(oo,n,a),a=He,(rn===null?a.memoizedState:rn.next)===null&&(a=a.alternate,F.H=a===null||a.memoizedState===null?ev:M0),n}function uh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Kc(n);if(n.$$typeof===le)return Tn(n)}throw Error(s(438,String(n)))}function E0(n){var a=null,o=He.updateQueue;if(o!==null&&(a=o.memoCache),a==null){var u=He.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),o===null&&(o=ch(),He.updateQueue=o),o.memoCache=a,o=a.data[a.index],o===void 0)for(o=a.data[a.index]=Array(n),u=0;u<n;u++)o[u]=O;return a.index++,o}function Qr(n,a){return typeof a=="function"?a(n):a}function dh(n){var a=Jt();return T0(a,Tt,n)}function T0(n,a,o){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var m=n.baseQueue,p=u.pending;if(p!==null){if(m!==null){var b=m.next;m.next=p.next,p.next=b}a.baseQueue=m=p,u.pending=null}if(p=n.baseState,m===null)n.memoizedState=p;else{a=m.next;var E=b=null,R=null,Q=a,ne=!1;do{var ae=Q.lane&-536870913;if(ae!==Q.lane?(We&ae)===ae:(Kr&ae)===ae){var X=Q.revertLane;if(X===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ae===no&&(ne=!0);else if((Kr&X)===X){Q=Q.next,X===no&&(ne=!0);continue}else ae={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},R===null?(E=R=ae,b=p):R=R.next=ae,He.lanes|=X,$a|=X;ae=Q.action,el&&o(p,ae),p=Q.hasEagerState?Q.eagerState:o(p,ae)}else X={lane:ae,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},R===null?(E=R=X,b=p):R=R.next=X,He.lanes|=ae,$a|=ae;Q=Q.next}while(Q!==null&&Q!==a);if(R===null?b=p:R.next=E,!os(p,n.memoizedState)&&(an=!0,ne&&(o=so,o!==null)))throw o;n.memoizedState=p,n.baseState=b,n.baseQueue=R,u.lastRenderedState=p}return m===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function S0(n){var a=Jt(),o=a.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=n;var u=o.dispatch,m=o.pending,p=a.memoizedState;if(m!==null){o.pending=null;var b=m=m.next;do p=n(p,b.action),b=b.next;while(b!==m);os(p,a.memoizedState)||(an=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),o.lastRenderedState=p}return[p,u]}function vb(n,a,o){var u=He,m=Jt(),p=st;if(p){if(o===void 0)throw Error(s(407));o=o()}else o=a();var b=!os((Tt||m).memoizedState,o);if(b&&(m.memoizedState=o,an=!0),m=m.queue,I0(Nb.bind(null,u,m,n),[n]),m.getSnapshot!==a||b||rn!==null&&rn.memoizedState.tag&1){if(u.flags|=2048,co(9,{destroy:void 0},_b.bind(null,u,m,o,a),null),It===null)throw Error(s(349));p||(Kr&127)!==0||wb(u,a,o)}return o}function wb(n,a,o){n.flags|=16384,n={getSnapshot:a,value:o},a=He.updateQueue,a===null?(a=ch(),He.updateQueue=a,a.stores=[n]):(o=a.stores,o===null?a.stores=[n]:o.push(n))}function _b(n,a,o,u){a.value=o,a.getSnapshot=u,Eb(a)&&Tb(n)}function Nb(n,a,o){return o(function(){Eb(a)&&Tb(n)})}function Eb(n){var a=n.getSnapshot;n=n.value;try{var o=a();return!os(n,o)}catch{return!0}}function Tb(n){var a=Gi(n,2);a!==null&&Wn(a,n,2)}function j0(n){var a=Bn();if(typeof n=="function"){var o=n;if(n=o(),el){Ut(!0);try{o()}finally{Ut(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:n},a}function Sb(n,a,o,u){return n.baseState=o,T0(n,Tt,typeof u=="function"?u:Qr)}function ej(n,a,o,u,m){if(mh(n))throw Error(s(485));if(n=a.action,n!==null){var p={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){p.listeners.push(b)}};F.T!==null?o(!0):p.isTransition=!1,u(p),o=a.pending,o===null?(p.next=a.pending=p,jb(a,p)):(p.next=o.next,a.pending=o.next=p)}}function jb(n,a){var o=a.action,u=a.payload,m=n.state;if(a.isTransition){var p=F.T,b={};F.T=b;try{var E=o(m,u),R=F.S;R!==null&&R(b,E),Ab(n,a,E)}catch(Q){A0(n,a,Q)}finally{p!==null&&b.types!==null&&(p.types=b.types),F.T=p}}else try{p=o(m,u),Ab(n,a,p)}catch(Q){A0(n,a,Q)}}function Ab(n,a,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Ib(n,a,u)},function(u){return A0(n,a,u)}):Ib(n,a,o)}function Ib(n,a,o){a.status="fulfilled",a.value=o,Cb(a),n.state=o,a=n.pending,a!==null&&(o=a.next,o===a?n.pending=null:(o=o.next,a.next=o,jb(n,o)))}function A0(n,a,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=o,Cb(a),a=a.next;while(a!==u)}n.action=null}function Cb(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function Rb(n,a){return a}function kb(n,a){if(st){var o=It.formState;if(o!==null){e:{var u=He;if(st){if(kt){t:{for(var m=kt,p=ks;m.nodeType!==8;){if(!p){m=null;break t}if(m=Os(m.nextSibling),m===null){m=null;break t}}p=m.data,m=p==="F!"||p==="F"?m:null}if(m){kt=Os(m.nextSibling),u=m.data==="F!";break e}}Pa(u)}u=!1}u&&(a=o[0])}}return o=Bn(),o.memoizedState=o.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rb,lastRenderedState:a},o.queue=u,o=Jb.bind(null,He,u),u.dispatch=o,u=j0(!1),p=O0.bind(null,He,!1,u.queue),u=Bn(),m={state:a,dispatch:null,action:n,pending:null},u.queue=m,o=ej.bind(null,He,m,p,o),m.dispatch=o,u.memoizedState=n,[a,o,!1]}function Db(n){var a=Jt();return Ob(a,Tt,n)}function Ob(n,a,o){if(a=T0(n,a,Rb)[0],n=dh(Qr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=Kc(a)}catch(b){throw b===ro?th:b}else u=a;a=Jt();var m=a.queue,p=m.dispatch;return o!==a.memoizedState&&(He.flags|=2048,co(9,{destroy:void 0},tj.bind(null,m,o),null)),[u,p,n]}function tj(n,a){n.action=a}function Mb(n){var a=Jt(),o=Tt;if(o!==null)return Ob(a,o,n);Jt(),a=a.memoizedState,o=Jt();var u=o.queue.dispatch;return o.memoizedState=n,[a,u,!1]}function co(n,a,o,u){return n={tag:n,create:o,deps:u,inst:a,next:null},a=He.updateQueue,a===null&&(a=ch(),He.updateQueue=a),o=a.lastEffect,o===null?a.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,a.lastEffect=n),n}function Vb(){return Jt().memoizedState}function hh(n,a,o,u){var m=Bn();He.flags|=n,m.memoizedState=co(1|a,{destroy:void 0},o,u===void 0?null:u)}function fh(n,a,o,u){var m=Jt();u=u===void 0?null:u;var p=m.memoizedState.inst;Tt!==null&&u!==null&&b0(u,Tt.memoizedState.deps)?m.memoizedState=co(a,p,o,u):(He.flags|=n,m.memoizedState=co(1|a,p,o,u))}function Pb(n,a){hh(8390656,8,n,a)}function I0(n,a){fh(2048,8,n,a)}function nj(n){He.flags|=4;var a=He.updateQueue;if(a===null)a=ch(),He.updateQueue=a,a.events=[n];else{var o=a.events;o===null?a.events=[n]:o.push(n)}}function Lb(n){var a=Jt().memoizedState;return nj({ref:a,nextImpl:n}),function(){if((ft&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function zb(n,a){return fh(4,2,n,a)}function Ub(n,a){return fh(4,4,n,a)}function Bb(n,a){if(typeof a=="function"){n=n();var o=a(n);return function(){typeof o=="function"?o():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function qb(n,a,o){o=o!=null?o.concat([n]):null,fh(4,4,Bb.bind(null,a,n),o)}function C0(){}function Fb(n,a){var o=Jt();a=a===void 0?null:a;var u=o.memoizedState;return a!==null&&b0(a,u[1])?u[0]:(o.memoizedState=[n,a],n)}function Hb(n,a){var o=Jt();a=a===void 0?null:a;var u=o.memoizedState;if(a!==null&&b0(a,u[1]))return u[0];if(u=n(),el){Ut(!0);try{n()}finally{Ut(!1)}}return o.memoizedState=[u,a],u}function R0(n,a,o){return o===void 0||(Kr&1073741824)!==0&&(We&261930)===0?n.memoizedState=a:(n.memoizedState=o,n=Gv(),He.lanes|=n,$a|=n,o)}function Gb(n,a,o,u){return os(o,a)?o:io.current!==null?(n=R0(n,o,u),os(n,a)||(an=!0),n):(Kr&42)===0||(Kr&1073741824)!==0&&(We&261930)===0?(an=!0,n.memoizedState=o):(n=Gv(),He.lanes|=n,$a|=n,a)}function $b(n,a,o,u,m){var p=ce.p;ce.p=p!==0&&8>p?p:8;var b=F.T,E={};F.T=E,O0(n,!1,a,o);try{var R=m(),Q=F.S;if(Q!==null&&Q(E,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var ne=JS(R,u);Qc(n,a,ne,ms(n))}else Qc(n,a,u,ms(n))}catch(ae){Qc(n,a,{then:function(){},status:"rejected",reason:ae},ms())}finally{ce.p=p,b!==null&&E.types!==null&&(b.types=E.types),F.T=b}}function sj(){}function k0(n,a,o,u){if(n.tag!==5)throw Error(s(476));var m=Kb(n).queue;$b(n,m,a,Z,o===null?sj:function(){return Qb(n),o(u)})}function Kb(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:Z},next:null};var o={};return a.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:o},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function Qb(n){var a=Kb(n);a.next===null&&(a=n.alternate.memoizedState),Qc(n,a.next.queue,{},ms())}function D0(){return Tn(du)}function Xb(){return Jt().memoizedState}function Yb(){return Jt().memoizedState}function rj(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var o=ms();n=Ua(o);var u=Ba(a,n,o);u!==null&&(Wn(u,a,o),Fc(u,a,o)),a={cache:o0()},n.payload=a;return}a=a.return}}function aj(n,a,o){var u=ms();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},mh(n)?Wb(a,o):(o=Jm(n,a,o,u),o!==null&&(Wn(o,n,u),Zb(o,a,u)))}function Jb(n,a,o){var u=ms();Qc(n,a,o,u)}function Qc(n,a,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(mh(n))Wb(a,m);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var b=a.lastRenderedState,E=p(b,o);if(m.hasEagerState=!0,m.eagerState=E,os(E,b))return Qd(n,a,m,0),It===null&&Kd(),!1}catch{}finally{}if(o=Jm(n,a,m,u),o!==null)return Wn(o,n,u),Zb(o,a,u),!0}return!1}function O0(n,a,o,u){if(u={lane:2,revertLane:hg(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},mh(n)){if(a)throw Error(s(479))}else a=Jm(n,o,u,2),a!==null&&Wn(a,n,2)}function mh(n){var a=n.alternate;return n===He||a!==null&&a===He}function Wb(n,a){lo=lh=!0;var o=n.pending;o===null?a.next=a:(a.next=o.next,o.next=a),n.pending=a}function Zb(n,a,o){if((o&4194048)!==0){var u=a.lanes;u&=n.pendingLanes,o|=u,a.lanes=o,ki(n,o)}}var Xc={readContext:Tn,use:uh,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht};Xc.useEffectEvent=Ht;var ev={readContext:Tn,use:uh,useCallback:function(n,a){return Bn().memoizedState=[n,a===void 0?null:a],n},useContext:Tn,useEffect:Pb,useImperativeHandle:function(n,a,o){o=o!=null?o.concat([n]):null,hh(4194308,4,Bb.bind(null,a,n),o)},useLayoutEffect:function(n,a){return hh(4194308,4,n,a)},useInsertionEffect:function(n,a){hh(4,2,n,a)},useMemo:function(n,a){var o=Bn();a=a===void 0?null:a;var u=n();if(el){Ut(!0);try{n()}finally{Ut(!1)}}return o.memoizedState=[u,a],u},useReducer:function(n,a,o){var u=Bn();if(o!==void 0){var m=o(a);if(el){Ut(!0);try{o(a)}finally{Ut(!1)}}}else m=a;return u.memoizedState=u.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},u.queue=n,n=n.dispatch=aj.bind(null,He,n),[u.memoizedState,n]},useRef:function(n){var a=Bn();return n={current:n},a.memoizedState=n},useState:function(n){n=j0(n);var a=n.queue,o=Jb.bind(null,He,a);return a.dispatch=o,[n.memoizedState,o]},useDebugValue:C0,useDeferredValue:function(n,a){var o=Bn();return R0(o,n,a)},useTransition:function(){var n=j0(!1);return n=$b.bind(null,He,n.queue,!0,!1),Bn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,o){var u=He,m=Bn();if(st){if(o===void 0)throw Error(s(407));o=o()}else{if(o=a(),It===null)throw Error(s(349));(We&127)!==0||wb(u,a,o)}m.memoizedState=o;var p={value:o,getSnapshot:a};return m.queue=p,Pb(Nb.bind(null,u,p,n),[n]),u.flags|=2048,co(9,{destroy:void 0},_b.bind(null,u,p,o,a),null),o},useId:function(){var n=Bn(),a=It.identifierPrefix;if(st){var o=_r,u=wr;o=(u&~(1<<32-nt(u)-1)).toString(32)+o,a="_"+a+"R_"+o,o=oh++,0<o&&(a+="H"+o.toString(32)),a+="_"}else o=WS++,a="_"+a+"r_"+o.toString(32)+"_";return n.memoizedState=a},useHostTransitionStatus:D0,useFormState:kb,useActionState:kb,useOptimistic:function(n){var a=Bn();a.memoizedState=a.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=o,a=O0.bind(null,He,!0,o),o.dispatch=a,[n,a]},useMemoCache:E0,useCacheRefresh:function(){return Bn().memoizedState=rj.bind(null,He)},useEffectEvent:function(n){var a=Bn(),o={impl:n};return a.memoizedState=o,function(){if((ft&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},M0={readContext:Tn,use:uh,useCallback:Fb,useContext:Tn,useEffect:I0,useImperativeHandle:qb,useInsertionEffect:zb,useLayoutEffect:Ub,useMemo:Hb,useReducer:dh,useRef:Vb,useState:function(){return dh(Qr)},useDebugValue:C0,useDeferredValue:function(n,a){var o=Jt();return Gb(o,Tt.memoizedState,n,a)},useTransition:function(){var n=dh(Qr)[0],a=Jt().memoizedState;return[typeof n=="boolean"?n:Kc(n),a]},useSyncExternalStore:vb,useId:Xb,useHostTransitionStatus:D0,useFormState:Db,useActionState:Db,useOptimistic:function(n,a){var o=Jt();return Sb(o,Tt,n,a)},useMemoCache:E0,useCacheRefresh:Yb};M0.useEffectEvent=Lb;var tv={readContext:Tn,use:uh,useCallback:Fb,useContext:Tn,useEffect:I0,useImperativeHandle:qb,useInsertionEffect:zb,useLayoutEffect:Ub,useMemo:Hb,useReducer:S0,useRef:Vb,useState:function(){return S0(Qr)},useDebugValue:C0,useDeferredValue:function(n,a){var o=Jt();return Tt===null?R0(o,n,a):Gb(o,Tt.memoizedState,n,a)},useTransition:function(){var n=S0(Qr)[0],a=Jt().memoizedState;return[typeof n=="boolean"?n:Kc(n),a]},useSyncExternalStore:vb,useId:Xb,useHostTransitionStatus:D0,useFormState:Mb,useActionState:Mb,useOptimistic:function(n,a){var o=Jt();return Tt!==null?Sb(o,Tt,n,a):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:E0,useCacheRefresh:Yb};tv.useEffectEvent=Lb;function V0(n,a,o,u){a=n.memoizedState,o=o(u,a),o=o==null?a:w({},a,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var P0={enqueueSetState:function(n,a,o){n=n._reactInternals;var u=ms(),m=Ua(u);m.payload=a,o!=null&&(m.callback=o),a=Ba(n,m,u),a!==null&&(Wn(a,n,u),Fc(a,n,u))},enqueueReplaceState:function(n,a,o){n=n._reactInternals;var u=ms(),m=Ua(u);m.tag=1,m.payload=a,o!=null&&(m.callback=o),a=Ba(n,m,u),a!==null&&(Wn(a,n,u),Fc(a,n,u))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var o=ms(),u=Ua(o);u.tag=2,a!=null&&(u.callback=a),a=Ba(n,u,o),a!==null&&(Wn(a,n,o),Fc(a,n,o))}};function nv(n,a,o,u,m,p,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,p,b):a.prototype&&a.prototype.isPureReactComponent?!Mc(o,u)||!Mc(m,p):!0}function sv(n,a,o,u){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(o,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(o,u),a.state!==n&&P0.enqueueReplaceState(a,a.state,null)}function tl(n,a){var o=a;if("ref"in a){o={};for(var u in a)u!=="ref"&&(o[u]=a[u])}if(n=n.defaultProps){o===a&&(o=w({},o));for(var m in n)o[m]===void 0&&(o[m]=n[m])}return o}function rv(n){$d(n)}function av(n){console.error(n)}function iv(n){$d(n)}function gh(n,a){try{var o=n.onUncaughtError;o(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function lv(n,a,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function L0(n,a,o){return o=Ua(o),o.tag=3,o.payload={element:null},o.callback=function(){gh(n,a)},o}function ov(n){return n=Ua(n),n.tag=3,n}function cv(n,a,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var p=u.value;n.payload=function(){return m(p)},n.callback=function(){lv(a,o,u)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(n.callback=function(){lv(a,o,u),typeof m!="function"&&(Ka===null?Ka=new Set([this]):Ka.add(this));var E=u.stack;this.componentDidCatch(u.value,{componentStack:E!==null?E:""})})}function ij(n,a,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=o.alternate,a!==null&&to(a,o,m,!0),o=us.current,o!==null){switch(o.tag){case 31:case 13:return Ds===null?jh():o.alternate===null&&Gt===0&&(Gt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===nh?o.flags|=16384:(a=o.updateQueue,a===null?o.updateQueue=new Set([u]):a.add(u),cg(n,u,m)),!1;case 22:return o.flags|=65536,u===nh?o.flags|=16384:(a=o.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=a):(o=a.retryQueue,o===null?a.retryQueue=new Set([u]):o.add(u)),cg(n,u,m)),!1}throw Error(s(435,o.tag))}return cg(n,u,m),jh(),!1}if(st)return a=us.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,u!==s0&&(n=Error(s(422),{cause:u}),Lc(Is(n,o)))):(u!==s0&&(a=Error(s(423),{cause:u}),Lc(Is(a,o))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,u=Is(u,o),m=L0(n.stateNode,u,m),m0(n,m),Gt!==4&&(Gt=2)),!1;var p=Error(s(520),{cause:u});if(p=Is(p,o),su===null?su=[p]:su.push(p),Gt!==4&&(Gt=2),a===null)return!0;u=Is(u,o),o=a;do{switch(o.tag){case 3:return o.flags|=65536,n=m&-m,o.lanes|=n,n=L0(o.stateNode,u,n),m0(o,n),!1;case 1:if(a=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ka===null||!Ka.has(p))))return o.flags|=65536,m&=-m,o.lanes|=m,m=ov(m),cv(m,n,o,u),m0(o,m),!1}o=o.return}while(o!==null);return!1}var z0=Error(s(461)),an=!1;function Sn(n,a,o,u){a.child=n===null?fb(a,null,o,u):Zi(a,n.child,o,u)}function uv(n,a,o,u,m){o=o.render;var p=a.ref;if("ref"in u){var b={};for(var E in u)E!=="ref"&&(b[E]=u[E])}else b=u;return Xi(a),u=v0(n,a,o,b,p,m),E=w0(),n!==null&&!an?(_0(n,a,m),Xr(n,a,m)):(st&&E&&t0(a),a.flags|=1,Sn(n,a,u,m),a.child)}function dv(n,a,o,u,m){if(n===null){var p=o.type;return typeof p=="function"&&!Wm(p)&&p.defaultProps===void 0&&o.compare===null?(a.tag=15,a.type=p,hv(n,a,p,u,m)):(n=Yd(o.type,null,u,a,a.mode,m),n.ref=a.ref,n.return=a,a.child=n)}if(p=n.child,!K0(n,m)){var b=p.memoizedProps;if(o=o.compare,o=o!==null?o:Mc,o(b,u)&&n.ref===a.ref)return Xr(n,a,m)}return a.flags|=1,n=Fr(p,u),n.ref=a.ref,n.return=a,a.child=n}function hv(n,a,o,u,m){if(n!==null){var p=n.memoizedProps;if(Mc(p,u)&&n.ref===a.ref)if(an=!1,a.pendingProps=u=p,K0(n,m))(n.flags&131072)!==0&&(an=!0);else return a.lanes=n.lanes,Xr(n,a,m)}return U0(n,a,o,u,m)}function fv(n,a,o,u){var m=u.children,p=n!==null?n.memoizedState:null;if(n===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,n!==null){for(u=a.child=n.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~p}else u=0,a.child=null;return mv(n,a,p,o,u)}if((o&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&eh(a,p!==null?p.cachePool:null),p!==null?pb(a,p):p0(),xb(a);else return u=a.lanes=536870912,mv(n,a,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(eh(a,p.cachePool),pb(a,p),Fa(),a.memoizedState=null):(n!==null&&eh(a,null),p0(),Fa());return Sn(n,a,m,o),a.child}function Yc(n,a){return n!==null&&n.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function mv(n,a,o,u,m){var p=u0();return p=p===null?null:{parent:sn._currentValue,pool:p},a.memoizedState={baseLanes:o,cachePool:p},n!==null&&eh(a,null),p0(),xb(a),n!==null&&to(n,a,u,!0),a.childLanes=m,null}function ph(n,a){return a=yh({mode:a.mode,children:a.children},n.mode),a.ref=n.ref,n.child=a,a.return=n,a}function gv(n,a,o){return Zi(a,n.child,null,o),n=ph(a,a.pendingProps),n.flags|=2,ds(a),a.memoizedState=null,n}function lj(n,a,o){var u=a.pendingProps,m=(a.flags&128)!==0;if(a.flags&=-129,n===null){if(st){if(u.mode==="hidden")return n=ph(a,u),a.lanes=536870912,Yc(null,n);if(y0(a),(n=kt)?(n=j1(n,ks),n=n!==null&&n.data==="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:Ma!==null?{id:wr,overflow:_r}:null,retryLane:536870912,hydrationErrors:null},o=Wy(n),o.return=a,a.child=o,En=a,kt=null)):n=null,n===null)throw Pa(a);return a.lanes=536870912,null}return ph(a,u)}var p=n.memoizedState;if(p!==null){var b=p.dehydrated;if(y0(a),m)if(a.flags&256)a.flags&=-257,a=gv(n,a,o);else if(a.memoizedState!==null)a.child=n.child,a.flags|=128,a=null;else throw Error(s(558));else if(an||to(n,a,o,!1),m=(o&n.childLanes)!==0,an||m){if(u=It,u!==null&&(b=xc(u,o),b!==0&&b!==p.retryLane))throw p.retryLane=b,Gi(n,b),Wn(u,n,b),z0;jh(),a=gv(n,a,o)}else n=p.treeContext,kt=Os(b.nextSibling),En=a,st=!0,Va=null,ks=!1,n!==null&&tb(a,n),a=ph(a,u),a.flags|=4096;return a}return n=Fr(n.child,{mode:u.mode,children:u.children}),n.ref=a.ref,a.child=n,n.return=a,n}function xh(n,a){var o=a.ref;if(o===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(n===null||n.ref!==o)&&(a.flags|=4194816)}}function U0(n,a,o,u,m){return Xi(a),o=v0(n,a,o,u,void 0,m),u=w0(),n!==null&&!an?(_0(n,a,m),Xr(n,a,m)):(st&&u&&t0(a),a.flags|=1,Sn(n,a,o,m),a.child)}function pv(n,a,o,u,m,p){return Xi(a),a.updateQueue=null,o=bb(a,u,o,m),yb(n),u=w0(),n!==null&&!an?(_0(n,a,p),Xr(n,a,p)):(st&&u&&t0(a),a.flags|=1,Sn(n,a,o,p),a.child)}function xv(n,a,o,u,m){if(Xi(a),a.stateNode===null){var p=Jl,b=o.contextType;typeof b=="object"&&b!==null&&(p=Tn(b)),p=new o(u,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=P0,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=u,p.state=a.memoizedState,p.refs={},h0(a),b=o.contextType,p.context=typeof b=="object"&&b!==null?Tn(b):Jl,p.state=a.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(V0(a,o,b,u),p.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(b=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),b!==p.state&&P0.enqueueReplaceState(p,p.state,null),Gc(a,u,p,m),Hc(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(n===null){p=a.stateNode;var E=a.memoizedProps,R=tl(o,E);p.props=R;var Q=p.context,ne=o.contextType;b=Jl,typeof ne=="object"&&ne!==null&&(b=Tn(ne));var ae=o.getDerivedStateFromProps;ne=typeof ae=="function"||typeof p.getSnapshotBeforeUpdate=="function",E=a.pendingProps!==E,ne||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E||Q!==b)&&sv(a,p,u,b),za=!1;var X=a.memoizedState;p.state=X,Gc(a,u,p,m),Hc(),Q=a.memoizedState,E||X!==Q||za?(typeof ae=="function"&&(V0(a,o,ae,u),Q=a.memoizedState),(R=za||nv(a,o,R,u,X,Q,b))?(ne||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=Q),p.props=u,p.state=Q,p.context=b,u=R):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{p=a.stateNode,f0(n,a),b=a.memoizedProps,ne=tl(o,b),p.props=ne,ae=a.pendingProps,X=p.context,Q=o.contextType,R=Jl,typeof Q=="object"&&Q!==null&&(R=Tn(Q)),E=o.getDerivedStateFromProps,(Q=typeof E=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b!==ae||X!==R)&&sv(a,p,u,R),za=!1,X=a.memoizedState,p.state=X,Gc(a,u,p,m),Hc();var W=a.memoizedState;b!==ae||X!==W||za||n!==null&&n.dependencies!==null&&Wd(n.dependencies)?(typeof E=="function"&&(V0(a,o,E,u),W=a.memoizedState),(ne=za||nv(a,o,ne,u,X,W,R)||n!==null&&n.dependencies!==null&&Wd(n.dependencies))?(Q||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,W,R),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,W,R)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=W),p.props=u,p.state=W,p.context=R,u=ne):(typeof p.componentDidUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=1024),u=!1)}return p=u,xh(n,a),u=(a.flags&128)!==0,p||u?(p=a.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,n!==null&&u?(a.child=Zi(a,n.child,null,m),a.child=Zi(a,null,o,m)):Sn(n,a,o,m),a.memoizedState=p.state,n=a.child):n=Xr(n,a,m),n}function yv(n,a,o,u){return Ki(),a.flags|=256,Sn(n,a,o,u),a.child}var B0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function q0(n){return{baseLanes:n,cachePool:lb()}}function F0(n,a,o){return n=n!==null?n.childLanes&~o:0,a&&(n|=fs),n}function bv(n,a,o){var u=a.pendingProps,m=!1,p=(a.flags&128)!==0,b;if((b=p)||(b=n!==null&&n.memoizedState===null?!1:(Yt.current&2)!==0),b&&(m=!0,a.flags&=-129),b=(a.flags&32)!==0,a.flags&=-33,n===null){if(st){if(m?qa(a):Fa(),(n=kt)?(n=j1(n,ks),n=n!==null&&n.data!=="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:Ma!==null?{id:wr,overflow:_r}:null,retryLane:536870912,hydrationErrors:null},o=Wy(n),o.return=a,a.child=o,En=a,kt=null)):n=null,n===null)throw Pa(a);return Tg(n)?a.lanes=32:a.lanes=536870912,null}var E=u.children;return u=u.fallback,m?(Fa(),m=a.mode,E=yh({mode:"hidden",children:E},m),u=$i(u,m,o,null),E.return=a,u.return=a,E.sibling=u,a.child=E,u=a.child,u.memoizedState=q0(o),u.childLanes=F0(n,b,o),a.memoizedState=B0,Yc(null,u)):(qa(a),H0(a,E))}var R=n.memoizedState;if(R!==null&&(E=R.dehydrated,E!==null)){if(p)a.flags&256?(qa(a),a.flags&=-257,a=G0(n,a,o)):a.memoizedState!==null?(Fa(),a.child=n.child,a.flags|=128,a=null):(Fa(),E=u.fallback,m=a.mode,u=yh({mode:"visible",children:u.children},m),E=$i(E,m,o,null),E.flags|=2,u.return=a,E.return=a,u.sibling=E,a.child=u,Zi(a,n.child,null,o),u=a.child,u.memoizedState=q0(o),u.childLanes=F0(n,b,o),a.memoizedState=B0,a=Yc(null,u));else if(qa(a),Tg(E)){if(b=E.nextSibling&&E.nextSibling.dataset,b)var Q=b.dgst;b=Q,u=Error(s(419)),u.stack="",u.digest=b,Lc({value:u,source:null,stack:null}),a=G0(n,a,o)}else if(an||to(n,a,o,!1),b=(o&n.childLanes)!==0,an||b){if(b=It,b!==null&&(u=xc(b,o),u!==0&&u!==R.retryLane))throw R.retryLane=u,Gi(n,u),Wn(b,n,u),z0;Eg(E)||jh(),a=G0(n,a,o)}else Eg(E)?(a.flags|=192,a.child=n.child,a=null):(n=R.treeContext,kt=Os(E.nextSibling),En=a,st=!0,Va=null,ks=!1,n!==null&&tb(a,n),a=H0(a,u.children),a.flags|=4096);return a}return m?(Fa(),E=u.fallback,m=a.mode,R=n.child,Q=R.sibling,u=Fr(R,{mode:"hidden",children:u.children}),u.subtreeFlags=R.subtreeFlags&65011712,Q!==null?E=Fr(Q,E):(E=$i(E,m,o,null),E.flags|=2),E.return=a,u.return=a,u.sibling=E,a.child=u,Yc(null,u),u=a.child,E=n.child.memoizedState,E===null?E=q0(o):(m=E.cachePool,m!==null?(R=sn._currentValue,m=m.parent!==R?{parent:R,pool:R}:m):m=lb(),E={baseLanes:E.baseLanes|o,cachePool:m}),u.memoizedState=E,u.childLanes=F0(n,b,o),a.memoizedState=B0,Yc(n.child,u)):(qa(a),o=n.child,n=o.sibling,o=Fr(o,{mode:"visible",children:u.children}),o.return=a,o.sibling=null,n!==null&&(b=a.deletions,b===null?(a.deletions=[n],a.flags|=16):b.push(n)),a.child=o,a.memoizedState=null,o)}function H0(n,a){return a=yh({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function yh(n,a){return n=cs(22,n,null,a),n.lanes=0,n}function G0(n,a,o){return Zi(a,n.child,null,o),n=H0(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function vv(n,a,o){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a),i0(n.return,a,o)}function $0(n,a,o,u,m,p){var b=n.memoizedState;b===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:p}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=u,b.tail=o,b.tailMode=m,b.treeForkCount=p)}function wv(n,a,o){var u=a.pendingProps,m=u.revealOrder,p=u.tail;u=u.children;var b=Yt.current,E=(b&2)!==0;if(E?(b=b&1|2,a.flags|=128):b&=1,z(Yt,b),Sn(n,a,u,o),u=st?Pc:0,!E&&n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&vv(n,o,a);else if(n.tag===19)vv(n,o,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(o=a.child,m=null;o!==null;)n=o.alternate,n!==null&&ih(n)===null&&(m=o),o=o.sibling;o=m,o===null?(m=a.child,a.child=null):(m=o.sibling,o.sibling=null),$0(a,!1,m,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=a.child,a.child=null;m!==null;){if(n=m.alternate,n!==null&&ih(n)===null){a.child=m;break}n=m.sibling,m.sibling=o,o=m,m=n}$0(a,!0,o,null,p,u);break;case"together":$0(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function Xr(n,a,o){if(n!==null&&(a.dependencies=n.dependencies),$a|=a.lanes,(o&a.childLanes)===0)if(n!==null){if(to(n,a,o,!1),(o&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(s(153));if(a.child!==null){for(n=a.child,o=Fr(n,n.pendingProps),a.child=o,o.return=a;n.sibling!==null;)n=n.sibling,o=o.sibling=Fr(n,n.pendingProps),o.return=a;o.sibling=null}return a.child}function K0(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&Wd(n)))}function oj(n,a,o){switch(a.tag){case 3:at(a,a.stateNode.containerInfo),La(a,sn,n.memoizedState.cache),Ki();break;case 27:case 5:Nt(a);break;case 4:at(a,a.stateNode.containerInfo);break;case 10:La(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,y0(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(qa(a),a.flags|=128,null):(o&a.child.childLanes)!==0?bv(n,a,o):(qa(a),n=Xr(n,a,o),n!==null?n.sibling:null);qa(a);break;case 19:var m=(n.flags&128)!==0;if(u=(o&a.childLanes)!==0,u||(to(n,a,o,!1),u=(o&a.childLanes)!==0),m){if(u)return wv(n,a,o);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),z(Yt,Yt.current),u)break;return null;case 22:return a.lanes=0,fv(n,a,o,a.pendingProps);case 24:La(a,sn,n.memoizedState.cache)}return Xr(n,a,o)}function _v(n,a,o){if(n!==null)if(n.memoizedProps!==a.pendingProps)an=!0;else{if(!K0(n,o)&&(a.flags&128)===0)return an=!1,oj(n,a,o);an=(n.flags&131072)!==0}else an=!1,st&&(a.flags&1048576)!==0&&eb(a,Pc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(n=Ji(a.elementType),a.type=n,typeof n=="function")Wm(n)?(u=tl(n,u),a.tag=1,a=xv(null,a,n,u,o)):(a.tag=0,a=U0(null,a,n,u,o));else{if(n!=null){var m=n.$$typeof;if(m===_e){a.tag=11,a=uv(null,a,n,u,o);break e}else if(m===S){a.tag=14,a=dv(null,a,n,u,o);break e}}throw a=de(n)||n,Error(s(306,a,""))}}return a;case 0:return U0(n,a,a.type,a.pendingProps,o);case 1:return u=a.type,m=tl(u,a.pendingProps),xv(n,a,u,m,o);case 3:e:{if(at(a,a.stateNode.containerInfo),n===null)throw Error(s(387));u=a.pendingProps;var p=a.memoizedState;m=p.element,f0(n,a),Gc(a,u,null,o);var b=a.memoizedState;if(u=b.cache,La(a,sn,u),u!==p.cache&&l0(a,[sn],o,!0),Hc(),u=b.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:b.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=yv(n,a,u,o);break e}else if(u!==m){m=Is(Error(s(424)),a),Lc(m),a=yv(n,a,u,o);break e}else{switch(n=a.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(kt=Os(n.firstChild),En=a,st=!0,Va=null,ks=!0,o=fb(a,null,u,o),a.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ki(),u===m){a=Xr(n,a,o);break e}Sn(n,a,u,o)}a=a.child}return a;case 26:return xh(n,a),n===null?(o=D1(a.type,null,a.pendingProps,null))?a.memoizedState=o:st||(o=a.type,n=a.pendingProps,u=Oh(Oe.current).createElement(o),u[en]=a,u[gn]=n,jn(u,o,n),tn(u),a.stateNode=u):a.memoizedState=D1(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return Nt(a),n===null&&st&&(u=a.stateNode=C1(a.type,a.pendingProps,Oe.current),En=a,ks=!0,m=kt,Ja(a.type)?(Sg=m,kt=Os(u.firstChild)):kt=m),Sn(n,a,a.pendingProps.children,o),xh(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&st&&((m=u=kt)&&(u=Lj(u,a.type,a.pendingProps,ks),u!==null?(a.stateNode=u,En=a,kt=Os(u.firstChild),ks=!1,m=!0):m=!1),m||Pa(a)),Nt(a),m=a.type,p=a.pendingProps,b=n!==null?n.memoizedProps:null,u=p.children,wg(m,p)?u=null:b!==null&&wg(m,b)&&(a.flags|=32),a.memoizedState!==null&&(m=v0(n,a,ZS,null,null,o),du._currentValue=m),xh(n,a),Sn(n,a,u,o),a.child;case 6:return n===null&&st&&((n=o=kt)&&(o=zj(o,a.pendingProps,ks),o!==null?(a.stateNode=o,En=a,kt=null,n=!0):n=!1),n||Pa(a)),null;case 13:return bv(n,a,o);case 4:return at(a,a.stateNode.containerInfo),u=a.pendingProps,n===null?a.child=Zi(a,null,u,o):Sn(n,a,u,o),a.child;case 11:return uv(n,a,a.type,a.pendingProps,o);case 7:return Sn(n,a,a.pendingProps,o),a.child;case 8:return Sn(n,a,a.pendingProps.children,o),a.child;case 12:return Sn(n,a,a.pendingProps.children,o),a.child;case 10:return u=a.pendingProps,La(a,a.type,u.value),Sn(n,a,u.children,o),a.child;case 9:return m=a.type._context,u=a.pendingProps.children,Xi(a),m=Tn(m),u=u(m),a.flags|=1,Sn(n,a,u,o),a.child;case 14:return dv(n,a,a.type,a.pendingProps,o);case 15:return hv(n,a,a.type,a.pendingProps,o);case 19:return wv(n,a,o);case 31:return lj(n,a,o);case 22:return fv(n,a,o,a.pendingProps);case 24:return Xi(a),u=Tn(sn),n===null?(m=u0(),m===null&&(m=It,p=o0(),m.pooledCache=p,p.refCount++,p!==null&&(m.pooledCacheLanes|=o),m=p),a.memoizedState={parent:u,cache:m},h0(a),La(a,sn,m)):((n.lanes&o)!==0&&(f0(n,a),Gc(a,null,null,o),Hc()),m=n.memoizedState,p=a.memoizedState,m.parent!==u?(m={parent:u,cache:u},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),La(a,sn,u)):(u=p.cache,La(a,sn,u),u!==m.cache&&l0(a,[sn],o,!0))),Sn(n,a,a.pendingProps.children,o),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function Yr(n){n.flags|=4}function Q0(n,a,o,u,m){if((a=(n.mode&32)!==0)&&(a=!1),a){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(Xv())n.flags|=8192;else throw Wi=nh,d0}else n.flags&=-16777217}function Nv(n,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!L1(a))if(Xv())n.flags|=8192;else throw Wi=nh,d0}function bh(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?At():536870912,n.lanes|=a,mo|=a)}function Jc(n,a){if(!st)switch(n.tailMode){case"hidden":a=n.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Dt(n){var a=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(a)for(var m=n.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=u,n.childLanes=o,a}function cj(n,a,o){var u=a.pendingProps;switch(n0(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(a),null;case 1:return Dt(a),null;case 3:return o=a.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),$r(sn),Re(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(eo(a)?Yr(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,r0())),Dt(a),null;case 26:var m=a.type,p=a.memoizedState;return n===null?(Yr(a),p!==null?(Dt(a),Nv(a,p)):(Dt(a),Q0(a,m,null,u,o))):p?p!==n.memoizedState?(Yr(a),Dt(a),Nv(a,p)):(Dt(a),a.flags&=-16777217):(n=n.memoizedProps,n!==u&&Yr(a),Dt(a),Q0(a,m,n,u,o)),null;case 27:if(gt(a),o=Oe.current,m=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==u&&Yr(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return Dt(a),null}n=ee.current,eo(a)?nb(a):(n=C1(m,u,o),a.stateNode=n,Yr(a))}return Dt(a),null;case 5:if(gt(a),m=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==u&&Yr(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return Dt(a),null}if(p=ee.current,eo(a))nb(a);else{var b=Oh(Oe.current);switch(p){case 1:p=b.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:p=b.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":p=b.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":p=b.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":p=b.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?b.createElement("select",{is:u.is}):b.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?b.createElement(m,{is:u.is}):b.createElement(m)}}p[en]=a,p[gn]=u;e:for(b=a.child;b!==null;){if(b.tag===5||b.tag===6)p.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===a)break e;for(;b.sibling===null;){if(b.return===null||b.return===a)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}a.stateNode=p;e:switch(jn(p,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Yr(a)}}return Dt(a),Q0(a,a.type,n===null?null:n.memoizedProps,a.pendingProps,o),null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==u&&Yr(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(s(166));if(n=Oe.current,eo(a)){if(n=a.stateNode,o=a.memoizedProps,u=null,m=En,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}n[en]=a,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||b1(n.nodeValue,o)),n||Pa(a,!0)}else n=Oh(n).createTextNode(u),n[en]=a,a.stateNode=n}return Dt(a),null;case 31:if(o=a.memoizedState,n===null||n.memoizedState!==null){if(u=eo(a),o!==null){if(n===null){if(!u)throw Error(s(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[en]=a}else Ki(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dt(a),n=!1}else o=r0(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return a.flags&256?(ds(a),a):(ds(a),null);if((a.flags&128)!==0)throw Error(s(558))}return Dt(a),null;case 13:if(u=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=eo(a),u!==null&&u.dehydrated!==null){if(n===null){if(!m)throw Error(s(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[en]=a}else Ki(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dt(a),m=!1}else m=r0(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(ds(a),a):(ds(a),null)}return ds(a),(a.flags&128)!==0?(a.lanes=o,a):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=a.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==m&&(u.flags|=2048)),o!==n&&o&&(a.child.flags|=8192),bh(a,a.updateQueue),Dt(a),null);case 4:return Re(),n===null&&pg(a.stateNode.containerInfo),Dt(a),null;case 10:return $r(a.type),Dt(a),null;case 19:if(U(Yt),u=a.memoizedState,u===null)return Dt(a),null;if(m=(a.flags&128)!==0,p=u.rendering,p===null)if(m)Jc(u,!1);else{if(Gt!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(p=ih(n),p!==null){for(a.flags|=128,Jc(u,!1),n=p.updateQueue,a.updateQueue=n,bh(a,n),a.subtreeFlags=0,n=o,o=a.child;o!==null;)Jy(o,n),o=o.sibling;return z(Yt,Yt.current&1|2),st&&Hr(a,u.treeForkCount),a.child}n=n.sibling}u.tail!==null&&Vt()>Eh&&(a.flags|=128,m=!0,Jc(u,!1),a.lanes=4194304)}else{if(!m)if(n=ih(p),n!==null){if(a.flags|=128,m=!0,n=n.updateQueue,a.updateQueue=n,bh(a,n),Jc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!st)return Dt(a),null}else 2*Vt()-u.renderingStartTime>Eh&&o!==536870912&&(a.flags|=128,m=!0,Jc(u,!1),a.lanes=4194304);u.isBackwards?(p.sibling=a.child,a.child=p):(n=u.last,n!==null?n.sibling=p:a.child=p,u.last=p)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Vt(),n.sibling=null,o=Yt.current,z(Yt,m?o&1|2:o&1),st&&Hr(a,u.treeForkCount),n):(Dt(a),null);case 22:case 23:return ds(a),x0(),u=a.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(o&536870912)!==0&&(a.flags&128)===0&&(Dt(a),a.subtreeFlags&6&&(a.flags|=8192)):Dt(a),o=a.updateQueue,o!==null&&bh(a,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==o&&(a.flags|=2048),n!==null&&U(Yi),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),$r(sn),Dt(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function uj(n,a){switch(n0(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return $r(sn),Re(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return gt(a),null;case 31:if(a.memoizedState!==null){if(ds(a),a.alternate===null)throw Error(s(340));Ki()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 13:if(ds(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(s(340));Ki()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return U(Yt),null;case 4:return Re(),null;case 10:return $r(a.type),null;case 22:case 23:return ds(a),x0(),n!==null&&U(Yi),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return $r(sn),null;case 25:return null;default:return null}}function Ev(n,a){switch(n0(a),a.tag){case 3:$r(sn),Re();break;case 26:case 27:case 5:gt(a);break;case 4:Re();break;case 31:a.memoizedState!==null&&ds(a);break;case 13:ds(a);break;case 19:U(Yt);break;case 10:$r(a.type);break;case 22:case 23:ds(a),x0(),n!==null&&U(Yi);break;case 24:$r(sn)}}function Wc(n,a){try{var o=a.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&n)===n){u=void 0;var p=o.create,b=o.inst;u=p(),b.destroy=u}o=o.next}while(o!==m)}}catch(E){yt(a,a.return,E)}}function Ha(n,a,o){try{var u=a.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var p=m.next;u=p;do{if((u.tag&n)===n){var b=u.inst,E=b.destroy;if(E!==void 0){b.destroy=void 0,m=a;var R=o,Q=E;try{Q()}catch(ne){yt(m,R,ne)}}}u=u.next}while(u!==p)}}catch(ne){yt(a,a.return,ne)}}function Tv(n){var a=n.updateQueue;if(a!==null){var o=n.stateNode;try{gb(a,o)}catch(u){yt(n,n.return,u)}}}function Sv(n,a,o){o.props=tl(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){yt(n,a,u)}}function Zc(n,a){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(m){yt(n,a,m)}}function Nr(n,a){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){yt(n,a,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){yt(n,a,m)}else o.current=null}function jv(n){var a=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){yt(n,n.return,m)}}function X0(n,a,o){try{var u=n.stateNode;kj(u,n.type,o,a),u[gn]=a}catch(m){yt(n,n.return,m)}}function Av(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ja(n.type)||n.tag===4}function Y0(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Av(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ja(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function J0(n,a,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,a?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,a):(a=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,a.appendChild(n),o=o._reactRootContainer,o!=null||a.onclick!==null||(a.onclick=Hs));else if(u!==4&&(u===27&&Ja(n.type)&&(o=n.stateNode,a=null),n=n.child,n!==null))for(J0(n,a,o),n=n.sibling;n!==null;)J0(n,a,o),n=n.sibling}function vh(n,a,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,a?o.insertBefore(n,a):o.appendChild(n);else if(u!==4&&(u===27&&Ja(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(vh(n,a,o),n=n.sibling;n!==null;)vh(n,a,o),n=n.sibling}function Iv(n){var a=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);jn(a,u,o),a[en]=n,a[gn]=o}catch(p){yt(n,n.return,p)}}var Jr=!1,ln=!1,W0=!1,Cv=typeof WeakSet=="function"?WeakSet:Set,xn=null;function dj(n,a){if(n=n.containerInfo,bg=Bh,n=qy(n),Gm(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var b=0,E=-1,R=-1,Q=0,ne=0,ae=n,X=null;t:for(;;){for(var W;ae!==o||m!==0&&ae.nodeType!==3||(E=b+m),ae!==p||u!==0&&ae.nodeType!==3||(R=b+u),ae.nodeType===3&&(b+=ae.nodeValue.length),(W=ae.firstChild)!==null;)X=ae,ae=W;for(;;){if(ae===n)break t;if(X===o&&++Q===m&&(E=b),X===p&&++ne===u&&(R=b),(W=ae.nextSibling)!==null)break;ae=X,X=ae.parentNode}ae=W}o=E===-1||R===-1?null:{start:E,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for(vg={focusedElem:n,selectionRange:o},Bh=!1,xn=a;xn!==null;)if(a=xn,n=a.child,(a.subtreeFlags&1028)!==0&&n!==null)n.return=a,xn=n;else for(;xn!==null;){switch(a=xn,p=a.alternate,n=a.flags,a.tag){case 0:if((n&4)!==0&&(n=a.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)m=n[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=a,m=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Te=tl(o.type,m);n=u.getSnapshotBeforeUpdate(Te,p),u.__reactInternalSnapshotBeforeUpdate=n}catch(Me){yt(o,o.return,Me)}}break;case 3:if((n&1024)!==0){if(n=a.stateNode.containerInfo,o=n.nodeType,o===9)Ng(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Ng(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=a.sibling,n!==null){n.return=a.return,xn=n;break}xn=a.return}}function Rv(n,a,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Zr(n,o),u&4&&Wc(5,o);break;case 1:if(Zr(n,o),u&4)if(n=o.stateNode,a===null)try{n.componentDidMount()}catch(b){yt(o,o.return,b)}else{var m=tl(o.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(m,a,n.__reactInternalSnapshotBeforeUpdate)}catch(b){yt(o,o.return,b)}}u&64&&Tv(o),u&512&&Zc(o,o.return);break;case 3:if(Zr(n,o),u&64&&(n=o.updateQueue,n!==null)){if(a=null,o.child!==null)switch(o.child.tag){case 27:case 5:a=o.child.stateNode;break;case 1:a=o.child.stateNode}try{gb(n,a)}catch(b){yt(o,o.return,b)}}break;case 27:a===null&&u&4&&Iv(o);case 26:case 5:Zr(n,o),a===null&&u&4&&jv(o),u&512&&Zc(o,o.return);break;case 12:Zr(n,o);break;case 31:Zr(n,o),u&4&&Ov(n,o);break;case 13:Zr(n,o),u&4&&Mv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=vj.bind(null,o),Uj(n,o))));break;case 22:if(u=o.memoizedState!==null||Jr,!u){a=a!==null&&a.memoizedState!==null||ln,m=Jr;var p=ln;Jr=u,(ln=a)&&!p?ea(n,o,(o.subtreeFlags&8772)!==0):Zr(n,o),Jr=m,ln=p}break;case 30:break;default:Zr(n,o)}}function kv(n){var a=n.alternate;a!==null&&(n.alternate=null,kv(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&Pl(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Lt=null,Qn=!1;function Wr(n,a,o){for(o=o.child;o!==null;)Dv(n,a,o),o=o.sibling}function Dv(n,a,o){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(Be,o)}catch{}switch(o.tag){case 26:ln||Nr(o,a),Wr(n,a,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ln||Nr(o,a);var u=Lt,m=Qn;Ja(o.type)&&(Lt=o.stateNode,Qn=!1),Wr(n,a,o),ou(o.stateNode),Lt=u,Qn=m;break;case 5:ln||Nr(o,a);case 6:if(u=Lt,m=Qn,Lt=null,Wr(n,a,o),Lt=u,Qn=m,Lt!==null)if(Qn)try{(Lt.nodeType===9?Lt.body:Lt.nodeName==="HTML"?Lt.ownerDocument.body:Lt).removeChild(o.stateNode)}catch(p){yt(o,a,p)}else try{Lt.removeChild(o.stateNode)}catch(p){yt(o,a,p)}break;case 18:Lt!==null&&(Qn?(n=Lt,T1(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),_o(n)):T1(Lt,o.stateNode));break;case 4:u=Lt,m=Qn,Lt=o.stateNode.containerInfo,Qn=!0,Wr(n,a,o),Lt=u,Qn=m;break;case 0:case 11:case 14:case 15:Ha(2,o,a),ln||Ha(4,o,a),Wr(n,a,o);break;case 1:ln||(Nr(o,a),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Sv(o,a,u)),Wr(n,a,o);break;case 21:Wr(n,a,o);break;case 22:ln=(u=ln)||o.memoizedState!==null,Wr(n,a,o),ln=u;break;default:Wr(n,a,o)}}function Ov(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{_o(n)}catch(o){yt(a,a.return,o)}}}function Mv(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{_o(n)}catch(o){yt(a,a.return,o)}}function hj(n){switch(n.tag){case 31:case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new Cv),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new Cv),a;default:throw Error(s(435,n.tag))}}function wh(n,a){var o=hj(n);a.forEach(function(u){if(!o.has(u)){o.add(u);var m=wj.bind(null,n,u);u.then(m,m)}})}function Xn(n,a){var o=a.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],p=n,b=a,E=b;e:for(;E!==null;){switch(E.tag){case 27:if(Ja(E.type)){Lt=E.stateNode,Qn=!1;break e}break;case 5:Lt=E.stateNode,Qn=!1;break e;case 3:case 4:Lt=E.stateNode.containerInfo,Qn=!0;break e}E=E.return}if(Lt===null)throw Error(s(160));Dv(p,b,m),Lt=null,Qn=!1,p=m.alternate,p!==null&&(p.return=null),m.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Vv(a,n),a=a.sibling}var Ys=null;function Vv(n,a){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Xn(a,n),Yn(n),u&4&&(Ha(3,n,n.return),Wc(3,n),Ha(5,n,n.return));break;case 1:Xn(a,n),Yn(n),u&512&&(ln||o===null||Nr(o,o.return)),u&64&&Jr&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=Ys;if(Xn(a,n),Yn(n),u&512&&(ln||o===null||Nr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":p=m.getElementsByTagName("title")[0],(!p||p[cr]||p[en]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=m.createElement(u),m.head.insertBefore(p,m.querySelector("head > title"))),jn(p,u,o),p[en]=n,tn(p),u=p;break e;case"link":var b=V1("link","href",m).get(u+(o.href||""));if(b){for(var E=0;E<b.length;E++)if(p=b[E],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(E,1);break t}}p=m.createElement(u),jn(p,u,o),m.head.appendChild(p);break;case"meta":if(b=V1("meta","content",m).get(u+(o.content||""))){for(E=0;E<b.length;E++)if(p=b[E],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(E,1);break t}}p=m.createElement(u),jn(p,u,o),m.head.appendChild(p);break;default:throw Error(s(468,u))}p[en]=n,tn(p),u=p}n.stateNode=u}else P1(m,n.type,n.stateNode);else n.stateNode=M1(m,u,n.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?P1(m,n.type,n.stateNode):M1(m,u,n.memoizedProps)):u===null&&n.stateNode!==null&&X0(n,n.memoizedProps,o.memoizedProps)}break;case 27:Xn(a,n),Yn(n),u&512&&(ln||o===null||Nr(o,o.return)),o!==null&&u&4&&X0(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Xn(a,n),Yn(n),u&512&&(ln||o===null||Nr(o,o.return)),n.flags&32){m=n.stateNode;try{Kn(m,"")}catch(Te){yt(n,n.return,Te)}}u&4&&n.stateNode!=null&&(m=n.memoizedProps,X0(n,m,o!==null?o.memoizedProps:m)),u&1024&&(W0=!0);break;case 6:if(Xn(a,n),Yn(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(Te){yt(n,n.return,Te)}}break;case 3:if(Ph=null,m=Ys,Ys=Mh(a.containerInfo),Xn(a,n),Ys=m,Yn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{_o(a.containerInfo)}catch(Te){yt(n,n.return,Te)}W0&&(W0=!1,Pv(n));break;case 4:u=Ys,Ys=Mh(n.stateNode.containerInfo),Xn(a,n),Yn(n),Ys=u;break;case 12:Xn(a,n),Yn(n);break;case 31:Xn(a,n),Yn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,wh(n,u)));break;case 13:Xn(a,n),Yn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Nh=Vt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,wh(n,u)));break;case 22:m=n.memoizedState!==null;var R=o!==null&&o.memoizedState!==null,Q=Jr,ne=ln;if(Jr=Q||m,ln=ne||R,Xn(a,n),ln=ne,Jr=Q,Yn(n),u&8192)e:for(a=n.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(o===null||R||Jr||ln||nl(n)),o=null,a=n;;){if(a.tag===5||a.tag===26){if(o===null){R=o=a;try{if(p=R.stateNode,m)b=p.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{E=R.stateNode;var ae=R.memoizedProps.style,X=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;E.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Te){yt(R,R.return,Te)}}}else if(a.tag===6){if(o===null){R=a;try{R.stateNode.nodeValue=m?"":R.memoizedProps}catch(Te){yt(R,R.return,Te)}}}else if(a.tag===18){if(o===null){R=a;try{var W=R.stateNode;m?S1(W,!0):S1(R.stateNode,!1)}catch(Te){yt(R,R.return,Te)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;o===a&&(o=null),a=a.return}o===a&&(o=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,wh(n,o))));break;case 19:Xn(a,n),Yn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,wh(n,u)));break;case 30:break;case 21:break;default:Xn(a,n),Yn(n)}}function Yn(n){var a=n.flags;if(a&2){try{for(var o,u=n.return;u!==null;){if(Av(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,p=Y0(n);vh(n,p,m);break;case 5:var b=o.stateNode;o.flags&32&&(Kn(b,""),o.flags&=-33);var E=Y0(n);vh(n,E,b);break;case 3:case 4:var R=o.stateNode.containerInfo,Q=Y0(n);J0(n,Q,R);break;default:throw Error(s(161))}}catch(ne){yt(n,n.return,ne)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function Pv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;Pv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function Zr(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Rv(n,a.alternate,a),a=a.sibling}function nl(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:Ha(4,a,a.return),nl(a);break;case 1:Nr(a,a.return);var o=a.stateNode;typeof o.componentWillUnmount=="function"&&Sv(a,a.return,o),nl(a);break;case 27:ou(a.stateNode);case 26:case 5:Nr(a,a.return),nl(a);break;case 22:a.memoizedState===null&&nl(a);break;case 30:nl(a);break;default:nl(a)}n=n.sibling}}function ea(n,a,o){for(o=o&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,m=n,p=a,b=p.flags;switch(p.tag){case 0:case 11:case 15:ea(m,p,o),Wc(4,p);break;case 1:if(ea(m,p,o),u=p,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(Q){yt(u,u.return,Q)}if(u=p,m=u.updateQueue,m!==null){var E=u.stateNode;try{var R=m.shared.hiddenCallbacks;if(R!==null)for(m.shared.hiddenCallbacks=null,m=0;m<R.length;m++)mb(R[m],E)}catch(Q){yt(u,u.return,Q)}}o&&b&64&&Tv(p),Zc(p,p.return);break;case 27:Iv(p);case 26:case 5:ea(m,p,o),o&&u===null&&b&4&&jv(p),Zc(p,p.return);break;case 12:ea(m,p,o);break;case 31:ea(m,p,o),o&&b&4&&Ov(m,p);break;case 13:ea(m,p,o),o&&b&4&&Mv(m,p);break;case 22:p.memoizedState===null&&ea(m,p,o),Zc(p,p.return);break;case 30:break;default:ea(m,p,o)}a=a.sibling}}function Z0(n,a){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&zc(o))}function eg(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&zc(n))}function Js(n,a,o,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Lv(n,a,o,u),a=a.sibling}function Lv(n,a,o,u){var m=a.flags;switch(a.tag){case 0:case 11:case 15:Js(n,a,o,u),m&2048&&Wc(9,a);break;case 1:Js(n,a,o,u);break;case 3:Js(n,a,o,u),m&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&zc(n)));break;case 12:if(m&2048){Js(n,a,o,u),n=a.stateNode;try{var p=a.memoizedProps,b=p.id,E=p.onPostCommit;typeof E=="function"&&E(b,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(R){yt(a,a.return,R)}}else Js(n,a,o,u);break;case 31:Js(n,a,o,u);break;case 13:Js(n,a,o,u);break;case 23:break;case 22:p=a.stateNode,b=a.alternate,a.memoizedState!==null?p._visibility&2?Js(n,a,o,u):eu(n,a):p._visibility&2?Js(n,a,o,u):(p._visibility|=2,uo(n,a,o,u,(a.subtreeFlags&10256)!==0||!1)),m&2048&&Z0(b,a);break;case 24:Js(n,a,o,u),m&2048&&eg(a.alternate,a);break;default:Js(n,a,o,u)}}function uo(n,a,o,u,m){for(m=m&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var p=n,b=a,E=o,R=u,Q=b.flags;switch(b.tag){case 0:case 11:case 15:uo(p,b,E,R,m),Wc(8,b);break;case 23:break;case 22:var ne=b.stateNode;b.memoizedState!==null?ne._visibility&2?uo(p,b,E,R,m):eu(p,b):(ne._visibility|=2,uo(p,b,E,R,m)),m&&Q&2048&&Z0(b.alternate,b);break;case 24:uo(p,b,E,R,m),m&&Q&2048&&eg(b.alternate,b);break;default:uo(p,b,E,R,m)}a=a.sibling}}function eu(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var o=n,u=a,m=u.flags;switch(u.tag){case 22:eu(o,u),m&2048&&Z0(u.alternate,u);break;case 24:eu(o,u),m&2048&&eg(u.alternate,u);break;default:eu(o,u)}a=a.sibling}}var tu=8192;function ho(n,a,o){if(n.subtreeFlags&tu)for(n=n.child;n!==null;)zv(n,a,o),n=n.sibling}function zv(n,a,o){switch(n.tag){case 26:ho(n,a,o),n.flags&tu&&n.memoizedState!==null&&Wj(o,Ys,n.memoizedState,n.memoizedProps);break;case 5:ho(n,a,o);break;case 3:case 4:var u=Ys;Ys=Mh(n.stateNode.containerInfo),ho(n,a,o),Ys=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=tu,tu=16777216,ho(n,a,o),tu=u):ho(n,a,o));break;default:ho(n,a,o)}}function Uv(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function nu(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];xn=u,qv(u,n)}Uv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Bv(n),n=n.sibling}function Bv(n){switch(n.tag){case 0:case 11:case 15:nu(n),n.flags&2048&&Ha(9,n,n.return);break;case 3:nu(n);break;case 12:nu(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,_h(n)):nu(n);break;default:nu(n)}}function _h(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];xn=u,qv(u,n)}Uv(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:Ha(8,a,a.return),_h(a);break;case 22:o=a.stateNode,o._visibility&2&&(o._visibility&=-3,_h(a));break;default:_h(a)}n=n.sibling}}function qv(n,a){for(;xn!==null;){var o=xn;switch(o.tag){case 0:case 11:case 15:Ha(8,o,a);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:zc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,xn=u;else e:for(o=n;xn!==null;){u=xn;var m=u.sibling,p=u.return;if(kv(u),u===o){xn=null;break e}if(m!==null){m.return=p,xn=m;break e}xn=p}}}var fj={getCacheForType:function(n){var a=Tn(sn),o=a.data.get(n);return o===void 0&&(o=n(),a.data.set(n,o)),o},cacheSignal:function(){return Tn(sn).controller.signal}},mj=typeof WeakMap=="function"?WeakMap:Map,ft=0,It=null,Ke=null,We=0,xt=0,hs=null,Ga=!1,fo=!1,tg=!1,ta=0,Gt=0,$a=0,sl=0,ng=0,fs=0,mo=0,su=null,Jn=null,sg=!1,Nh=0,Fv=0,Eh=1/0,Th=null,Ka=null,un=0,Qa=null,go=null,na=0,rg=0,ag=null,Hv=null,ru=0,ig=null;function ms(){return(ft&2)!==0&&We!==0?We&-We:F.T!==null?hg():Sd()}function Gv(){if(fs===0)if((We&536870912)===0||st){var n=ue;ue<<=1,(ue&3932160)===0&&(ue=262144),fs=n}else fs=536870912;return n=us.current,n!==null&&(n.flags|=32),fs}function Wn(n,a,o){(n===It&&(xt===2||xt===9)||n.cancelPendingCommit!==null)&&(po(n,0),Xa(n,We,fs,!1)),dt(n,o),((ft&2)===0||n!==It)&&(n===It&&((ft&2)===0&&(sl|=o),Gt===4&&Xa(n,We,fs,!1)),Er(n))}function $v(n,a,o){if((ft&6)!==0)throw Error(s(327));var u=!o&&(a&127)===0&&(a&n.expiredLanes)===0||Pe(n,a),m=u?xj(n,a):og(n,a,!0),p=u;do{if(m===0){fo&&!u&&Xa(n,a,0,!1);break}else{if(o=n.current.alternate,p&&!gj(o)){m=og(n,a,!1),p=!1;continue}if(m===2){if(p=a,n.errorRecoveryDisabledLanes&p)var b=0;else b=n.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){a=b;e:{var E=n;m=su;var R=E.current.memoizedState.isDehydrated;if(R&&(po(E,b).flags|=256),b=og(E,b,!1),b!==2){if(tg&&!R){E.errorRecoveryDisabledLanes|=p,sl|=p,m=4;break e}p=Jn,Jn=m,p!==null&&(Jn===null?Jn=p:Jn.push.apply(Jn,p))}m=b}if(p=!1,m!==2)continue}}if(m===1){po(n,0),Xa(n,a,0,!0);break}e:{switch(u=n,p=m,p){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:Xa(u,a,fs,!Ga);break e;case 2:Jn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(m=Nh+300-Vt(),10<m)){if(Xa(u,a,fs,!Ga),ye(u,0,!0)!==0)break e;na=a,u.timeoutHandle=N1(Kv.bind(null,u,o,Jn,Th,sg,a,fs,sl,mo,Ga,p,"Throttled",-0,0),m);break e}Kv(u,o,Jn,Th,sg,a,fs,sl,mo,Ga,p,null,-0,0)}}break}while(!0);Er(n)}function Kv(n,a,o,u,m,p,b,E,R,Q,ne,ae,X,W){if(n.timeoutHandle=-1,ae=a.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Hs},zv(a,p,ae);var Te=(p&62914560)===p?Nh-Vt():(p&4194048)===p?Fv-Vt():0;if(Te=Zj(ae,Te),Te!==null){na=p,n.cancelPendingCommit=Te(t1.bind(null,n,a,p,o,u,m,b,E,R,ne,ae,null,X,W)),Xa(n,p,b,!Q);return}}t1(n,a,p,o,u,m,b,E,R)}function gj(n){for(var a=n;;){var o=a.tag;if((o===0||o===11||o===15)&&a.flags&16384&&(o=a.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],p=m.getSnapshot;m=m.value;try{if(!os(p(),m))return!1}catch{return!1}}if(o=a.child,a.subtreeFlags&16384&&o!==null)o.return=a,a=o;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Xa(n,a,o,u){a&=~ng,a&=~sl,n.suspendedLanes|=a,n.pingedLanes&=~a,u&&(n.warmLanes|=a),u=n.expirationTimes;for(var m=a;0<m;){var p=31-nt(m),b=1<<p;u[p]=-1,m&=~b}o!==0&&mn(n,o,a)}function Sh(){return(ft&6)===0?(au(0),!1):!0}function lg(){if(Ke!==null){if(xt===0)var n=Ke.return;else n=Ke,Gr=Qi=null,N0(n),ao=null,Bc=0,n=Ke;for(;n!==null;)Ev(n.alternate,n),n=n.return;Ke=null}}function po(n,a){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,Mj(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),na=0,lg(),It=n,Ke=o=Fr(n.current,null),We=a,xt=0,hs=null,Ga=!1,fo=Pe(n,a),tg=!1,mo=fs=ng=sl=$a=Gt=0,Jn=su=null,sg=!1,(a&8)!==0&&(a|=a&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=a;0<u;){var m=31-nt(u),p=1<<m;a|=n[m],u&=~p}return ta=a,Kd(),o}function Qv(n,a){He=null,F.H=Xc,a===ro||a===th?(a=ub(),xt=3):a===d0?(a=ub(),xt=4):xt=a===z0?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,hs=a,Ke===null&&(Gt=1,gh(n,Is(a,n.current)))}function Xv(){var n=us.current;return n===null?!0:(We&4194048)===We?Ds===null:(We&62914560)===We||(We&536870912)!==0?n===Ds:!1}function Yv(){var n=F.H;return F.H=Xc,n===null?Xc:n}function Jv(){var n=F.A;return F.A=fj,n}function jh(){Gt=4,Ga||(We&4194048)!==We&&us.current!==null||(fo=!0),($a&134217727)===0&&(sl&134217727)===0||It===null||Xa(It,We,fs,!1)}function og(n,a,o){var u=ft;ft|=2;var m=Yv(),p=Jv();(It!==n||We!==a)&&(Th=null,po(n,a)),a=!1;var b=Gt;e:do try{if(xt!==0&&Ke!==null){var E=Ke,R=hs;switch(xt){case 8:lg(),b=6;break e;case 3:case 2:case 9:case 6:us.current===null&&(a=!0);var Q=xt;if(xt=0,hs=null,xo(n,E,R,Q),o&&fo){b=0;break e}break;default:Q=xt,xt=0,hs=null,xo(n,E,R,Q)}}pj(),b=Gt;break}catch(ne){Qv(n,ne)}while(!0);return a&&n.shellSuspendCounter++,Gr=Qi=null,ft=u,F.H=m,F.A=p,Ke===null&&(It=null,We=0,Kd()),b}function pj(){for(;Ke!==null;)Wv(Ke)}function xj(n,a){var o=ft;ft|=2;var u=Yv(),m=Jv();It!==n||We!==a?(Th=null,Eh=Vt()+500,po(n,a)):fo=Pe(n,a);e:do try{if(xt!==0&&Ke!==null){a=Ke;var p=hs;t:switch(xt){case 1:xt=0,hs=null,xo(n,a,p,1);break;case 2:case 9:if(ob(p)){xt=0,hs=null,Zv(a);break}a=function(){xt!==2&&xt!==9||It!==n||(xt=7),Er(n)},p.then(a,a);break e;case 3:xt=7;break e;case 4:xt=5;break e;case 7:ob(p)?(xt=0,hs=null,Zv(a)):(xt=0,hs=null,xo(n,a,p,7));break;case 5:var b=null;switch(Ke.tag){case 26:b=Ke.memoizedState;case 5:case 27:var E=Ke;if(b?L1(b):E.stateNode.complete){xt=0,hs=null;var R=E.sibling;if(R!==null)Ke=R;else{var Q=E.return;Q!==null?(Ke=Q,Ah(Q)):Ke=null}break t}}xt=0,hs=null,xo(n,a,p,5);break;case 6:xt=0,hs=null,xo(n,a,p,6);break;case 8:lg(),Gt=6;break e;default:throw Error(s(462))}}yj();break}catch(ne){Qv(n,ne)}while(!0);return Gr=Qi=null,F.H=u,F.A=m,ft=o,Ke!==null?0:(It=null,We=0,Kd(),Gt)}function yj(){for(;Ke!==null&&!_a();)Wv(Ke)}function Wv(n){var a=_v(n.alternate,n,ta);n.memoizedProps=n.pendingProps,a===null?Ah(n):Ke=a}function Zv(n){var a=n,o=a.alternate;switch(a.tag){case 15:case 0:a=pv(o,a,a.pendingProps,a.type,void 0,We);break;case 11:a=pv(o,a,a.pendingProps,a.type.render,a.ref,We);break;case 5:N0(a);default:Ev(o,a),a=Ke=Jy(a,ta),a=_v(o,a,ta)}n.memoizedProps=n.pendingProps,a===null?Ah(n):Ke=a}function xo(n,a,o,u){Gr=Qi=null,N0(a),ao=null,Bc=0;var m=a.return;try{if(ij(n,m,a,o,We)){Gt=1,gh(n,Is(o,n.current)),Ke=null;return}}catch(p){if(m!==null)throw Ke=m,p;Gt=1,gh(n,Is(o,n.current)),Ke=null;return}a.flags&32768?(st||u===1?n=!0:fo||(We&536870912)!==0?n=!1:(Ga=n=!0,(u===2||u===9||u===3||u===6)&&(u=us.current,u!==null&&u.tag===13&&(u.flags|=16384))),e1(a,n)):Ah(a)}function Ah(n){var a=n;do{if((a.flags&32768)!==0){e1(a,Ga);return}n=a.return;var o=cj(a.alternate,a,ta);if(o!==null){Ke=o;return}if(a=a.sibling,a!==null){Ke=a;return}Ke=a=n}while(a!==null);Gt===0&&(Gt=5)}function e1(n,a){do{var o=uj(n.alternate,n);if(o!==null){o.flags&=32767,Ke=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!a&&(n=n.sibling,n!==null)){Ke=n;return}Ke=n=o}while(n!==null);Gt=6,Ke=null}function t1(n,a,o,u,m,p,b,E,R){n.cancelPendingCommit=null;do Ih();while(un!==0);if((ft&6)!==0)throw Error(s(327));if(a!==null){if(a===n.current)throw Error(s(177));if(p=a.lanes|a.childLanes,p|=Ym,Bt(n,o,p,b,E,R),n===It&&(Ke=It=null,We=0),go=a,Qa=n,na=o,rg=p,ag=m,Hv=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,_j(_n,function(){return i1(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=F.T,F.T=null,m=ce.p,ce.p=2,b=ft,ft|=4;try{dj(n,a,o)}finally{ft=b,ce.p=m,F.T=u}}un=1,n1(),s1(),r1()}}function n1(){if(un===1){un=0;var n=Qa,a=go,o=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||o){o=F.T,F.T=null;var u=ce.p;ce.p=2;var m=ft;ft|=4;try{Vv(a,n);var p=vg,b=qy(n.containerInfo),E=p.focusedElem,R=p.selectionRange;if(b!==E&&E&&E.ownerDocument&&By(E.ownerDocument.documentElement,E)){if(R!==null&&Gm(E)){var Q=R.start,ne=R.end;if(ne===void 0&&(ne=Q),"selectionStart"in E)E.selectionStart=Q,E.selectionEnd=Math.min(ne,E.value.length);else{var ae=E.ownerDocument||document,X=ae&&ae.defaultView||window;if(X.getSelection){var W=X.getSelection(),Te=E.textContent.length,Me=Math.min(R.start,Te),jt=R.end===void 0?Me:Math.min(R.end,Te);!W.extend&&Me>jt&&(b=jt,jt=Me,Me=b);var q=Uy(E,Me),P=Uy(E,jt);if(q&&P&&(W.rangeCount!==1||W.anchorNode!==q.node||W.anchorOffset!==q.offset||W.focusNode!==P.node||W.focusOffset!==P.offset)){var K=ae.createRange();K.setStart(q.node,q.offset),W.removeAllRanges(),Me>jt?(W.addRange(K),W.extend(P.node,P.offset)):(K.setEnd(P.node,P.offset),W.addRange(K))}}}}for(ae=[],W=E;W=W.parentNode;)W.nodeType===1&&ae.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ae.length;E++){var re=ae[E];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Bh=!!bg,vg=bg=null}finally{ft=m,ce.p=u,F.T=o}}n.current=a,un=2}}function s1(){if(un===2){un=0;var n=Qa,a=go,o=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||o){o=F.T,F.T=null;var u=ce.p;ce.p=2;var m=ft;ft|=4;try{Rv(n,a.alternate,a)}finally{ft=m,ce.p=u,F.T=o}}un=3}}function r1(){if(un===4||un===3){un=0,Na();var n=Qa,a=go,o=na,u=Hv;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?un=5:(un=0,go=Qa=null,a1(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(Ka=null),zr(o),a=a.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(Be,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=F.T,m=ce.p,ce.p=2,F.T=null;try{for(var p=n.onRecoverableError,b=0;b<u.length;b++){var E=u[b];p(E.value,{componentStack:E.stack})}}finally{F.T=a,ce.p=m}}(na&3)!==0&&Ih(),Er(n),m=n.pendingLanes,(o&261930)!==0&&(m&42)!==0?n===ig?ru++:(ru=0,ig=n):ru=0,au(0)}}function a1(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,zc(a)))}function Ih(){return n1(),s1(),r1(),i1()}function i1(){if(un!==5)return!1;var n=Qa,a=rg;rg=0;var o=zr(na),u=F.T,m=ce.p;try{ce.p=32>o?32:o,F.T=null,o=ag,ag=null;var p=Qa,b=na;if(un=0,go=Qa=null,na=0,(ft&6)!==0)throw Error(s(331));var E=ft;if(ft|=4,Bv(p.current),Lv(p,p.current,b,o),ft=E,au(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(Be,p)}catch{}return!0}finally{ce.p=m,F.T=u,a1(n,a)}}function l1(n,a,o){a=Is(o,a),a=L0(n.stateNode,a,2),n=Ba(n,a,2),n!==null&&(dt(n,2),Er(n))}function yt(n,a,o){if(n.tag===3)l1(n,n,o);else for(;a!==null;){if(a.tag===3){l1(a,n,o);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ka===null||!Ka.has(u))){n=Is(o,n),o=ov(2),u=Ba(a,o,2),u!==null&&(cv(o,u,a,n),dt(u,2),Er(u));break}}a=a.return}}function cg(n,a,o){var u=n.pingCache;if(u===null){u=n.pingCache=new mj;var m=new Set;u.set(a,m)}else m=u.get(a),m===void 0&&(m=new Set,u.set(a,m));m.has(o)||(tg=!0,m.add(o),n=bj.bind(null,n,a,o),a.then(n,n))}function bj(n,a,o){var u=n.pingCache;u!==null&&u.delete(a),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,It===n&&(We&o)===o&&(Gt===4||Gt===3&&(We&62914560)===We&&300>Vt()-Nh?(ft&2)===0&&po(n,0):ng|=o,mo===We&&(mo=0)),Er(n)}function o1(n,a){a===0&&(a=At()),n=Gi(n,a),n!==null&&(dt(n,a),Er(n))}function vj(n){var a=n.memoizedState,o=0;a!==null&&(o=a.retryLane),o1(n,o)}function wj(n,a){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,m=n.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(a),o1(n,o)}function _j(n,a){return Mt(n,a)}var Ch=null,yo=null,ug=!1,Rh=!1,dg=!1,Ya=0;function Er(n){n!==yo&&n.next===null&&(yo===null?Ch=yo=n:yo=yo.next=n),Rh=!0,ug||(ug=!0,Ej())}function au(n,a){if(!dg&&Rh){dg=!0;do for(var o=!1,u=Ch;u!==null;){if(n!==0){var m=u.pendingLanes;if(m===0)var p=0;else{var b=u.suspendedLanes,E=u.pingedLanes;p=(1<<31-nt(42|n)+1)-1,p&=m&~(b&~E),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,h1(u,p))}else p=We,p=ye(u,u===It?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Pe(u,p)||(o=!0,h1(u,p));u=u.next}while(o);dg=!1}}function Nj(){c1()}function c1(){Rh=ug=!1;var n=0;Ya!==0&&Oj()&&(n=Ya);for(var a=Vt(),o=null,u=Ch;u!==null;){var m=u.next,p=u1(u,a);p===0?(u.next=null,o===null?Ch=m:o.next=m,m===null&&(yo=o)):(o=u,(n!==0||(p&3)!==0)&&(Rh=!0)),u=m}un!==0&&un!==5||au(n),Ya!==0&&(Ya=0)}function u1(n,a){for(var o=n.suspendedLanes,u=n.pingedLanes,m=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var b=31-nt(p),E=1<<b,R=m[b];R===-1?((E&o)===0||(E&u)!==0)&&(m[b]=Je(E,a)):R<=a&&(n.expiredLanes|=E),p&=~E}if(a=It,o=We,o=ye(n,n===a?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===a&&(xt===2||xt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&fn(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Pe(n,o)){if(a=o&-o,a===n.callbackPriority)return a;switch(u!==null&&fn(u),zr(o)){case 2:case 8:o=Pr;break;case 32:o=_n;break;case 268435456:o=Ta;break;default:o=_n}return u=d1.bind(null,n),o=Mt(o,u),n.callbackPriority=a,n.callbackNode=o,a}return u!==null&&u!==null&&fn(u),n.callbackPriority=2,n.callbackNode=null,2}function d1(n,a){if(un!==0&&un!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Ih()&&n.callbackNode!==o)return null;var u=We;return u=ye(n,n===It?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:($v(n,u,a),u1(n,Vt()),n.callbackNode!=null&&n.callbackNode===o?d1.bind(null,n):null)}function h1(n,a){if(Ih())return null;$v(n,a,!0)}function Ej(){Vj(function(){(ft&6)!==0?Mt(ir,Nj):c1()})}function hg(){if(Ya===0){var n=no;n===0&&(n=Gn,Gn<<=1,(Gn&261888)===0&&(Gn=256)),Ya=n}return Ya}function f1(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Bl(""+n)}function m1(n,a){var o=a.ownerDocument.createElement("input");return o.name=a.name,o.value=a.value,n.id&&o.setAttribute("form",n.id),a.parentNode.insertBefore(o,a),n=new FormData(n),o.parentNode.removeChild(o),n}function Tj(n,a,o,u,m){if(a==="submit"&&o&&o.stateNode===m){var p=f1((m[gn]||null).action),b=u.submitter;b&&(a=(a=b[gn]||null)?f1(a.formAction):b.getAttribute("formAction"),a!==null&&(p=a,b=null));var E=new xr("action","action",null,u,m);n.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ya!==0){var R=b?m1(m,b):new FormData(m);k0(o,{pending:!0,data:R,method:m.method,action:p},null,R)}}else typeof p=="function"&&(E.preventDefault(),R=b?m1(m,b):new FormData(m),k0(o,{pending:!0,data:R,method:m.method,action:p},p,R))},currentTarget:m}]})}}for(var fg=0;fg<Xm.length;fg++){var mg=Xm[fg],Sj=mg.toLowerCase(),jj=mg[0].toUpperCase()+mg.slice(1);Xs(Sj,"on"+jj)}Xs(Gy,"onAnimationEnd"),Xs($y,"onAnimationIteration"),Xs(Ky,"onAnimationStart"),Xs("dblclick","onDoubleClick"),Xs("focusin","onFocus"),Xs("focusout","onBlur"),Xs(FS,"onTransitionRun"),Xs(HS,"onTransitionStart"),Xs(GS,"onTransitionCancel"),Xs(Qy,"onTransitionEnd"),fr("onMouseEnter",["mouseout","mouseover"]),fr("onMouseLeave",["mouseout","mouseover"]),fr("onPointerEnter",["pointerout","pointerover"]),fr("onPointerLeave",["pointerout","pointerover"]),hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hr("onBeforeInput",["compositionend","keypress","textInput","paste"]),hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Aj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(iu));function g1(n,a){a=(a&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],m=u.event;u=u.listeners;e:{var p=void 0;if(a)for(var b=u.length-1;0<=b;b--){var E=u[b],R=E.instance,Q=E.currentTarget;if(E=E.listener,R!==p&&m.isPropagationStopped())break e;p=E,m.currentTarget=Q;try{p(m)}catch(ne){$d(ne)}m.currentTarget=null,p=R}else for(b=0;b<u.length;b++){if(E=u[b],R=E.instance,Q=E.currentTarget,E=E.listener,R!==p&&m.isPropagationStopped())break e;p=E,m.currentTarget=Q;try{p(m)}catch(ne){$d(ne)}m.currentTarget=null,p=R}}}}function Qe(n,a){var o=a[Vl];o===void 0&&(o=a[Vl]=new Set);var u=n+"__bubble";o.has(u)||(p1(a,n,2,!1),o.add(u))}function gg(n,a,o){var u=0;a&&(u|=4),p1(o,n,u,a)}var kh="_reactListening"+Math.random().toString(36).slice(2);function pg(n){if(!n[kh]){n[kh]=!0,yc.forEach(function(o){o!=="selectionchange"&&(Aj.has(o)||gg(o,!1,n),gg(o,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[kh]||(a[kh]=!0,gg("selectionchange",!1,a))}}function p1(n,a,o,u){switch(G1(a)){case 2:var m=n4;break;case 8:m=s4;break;default:m=Rg}o=m.bind(null,a,o,n),m=void 0,!Pi||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),u?m!==void 0?n.addEventListener(a,o,{capture:!0,passive:m}):n.addEventListener(a,o,!0):m!==void 0?n.addEventListener(a,o,{passive:m}):n.addEventListener(a,o,!1)}function xg(n,a,o,u,m){var p=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var E=u.stateNode.containerInfo;if(E===m)break;if(b===4)for(b=u.return;b!==null;){var R=b.tag;if((R===3||R===4)&&b.stateNode.containerInfo===m)return;b=b.return}for(;E!==null;){if(b=ur(E),b===null)return;if(R=b.tag,R===5||R===6||R===26||R===27){u=p=b;continue e}E=E.parentNode}}u=u.return}Ra(function(){var Q=p,ne=Ts(o),ae=[];e:{var X=Xy.get(n);if(X!==void 0){var W=xr,Te=n;switch(n){case"keypress":if(zi(o)===0)break e;case"keydown":case"keyup":W=Fd;break;case"focusin":Te="focus",W=Bi;break;case"focusout":Te="blur",W=Bi;break;case"beforeblur":case"afterblur":W=Bi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Rc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Od;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=y;break;case Gy:case $y:case Ky:W=Vd;break;case Qy:W=T;break;case"scroll":case"scrollend":W=Cc;break;case"wheel":W=Y;break;case"copy":case"cut":case"paste":W=Pd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=qr;break;case"toggle":case"beforetoggle":W=Fe}var Me=(a&4)!==0,jt=!Me&&(n==="scroll"||n==="scrollend"),q=Me?X!==null?X+"Capture":null:X;Me=[];for(var P=Q,K;P!==null;){var re=P;if(K=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||K===null||q===null||(re=Gs(P,q),re!=null&&Me.push(lu(P,re,K))),jt)break;P=P.return}0<Me.length&&(X=new W(X,Te,null,o,ne),ae.push({event:X,listeners:Me}))}}if((a&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",W=n==="mouseout"||n==="pointerout",X&&o!==jc&&(Te=o.relatedTarget||o.fromElement)&&(ur(Te)||Te[or]))break e;if((W||X)&&(X=ne.window===ne?ne:(X=ne.ownerDocument)?X.defaultView||X.parentWindow:window,W?(Te=o.relatedTarget||o.toElement,W=Q,Te=Te?ur(Te):null,Te!==null&&(jt=c(Te),Me=Te.tag,Te!==jt||Me!==5&&Me!==27&&Me!==6)&&(Te=null)):(W=null,Te=Q),W!==Te)){if(Me=Rc,re="onMouseLeave",q="onMouseEnter",P="mouse",(n==="pointerout"||n==="pointerover")&&(Me=qr,re="onPointerLeave",q="onPointerEnter",P="pointer"),jt=W==null?X:is(W),K=Te==null?X:is(Te),X=new Me(re,P+"leave",W,o,ne),X.target=jt,X.relatedTarget=K,re=null,ur(ne)===Q&&(Me=new Me(q,P+"enter",Te,o,ne),Me.target=K,Me.relatedTarget=jt,re=Me),jt=re,W&&Te)t:{for(Me=Ij,q=W,P=Te,K=0,re=q;re;re=Me(re))K++;re=0;for(var ke=P;ke;ke=Me(ke))re++;for(;0<K-re;)q=Me(q),K--;for(;0<re-K;)P=Me(P),re--;for(;K--;){if(q===P||P!==null&&q===P.alternate){Me=q;break t}q=Me(q),P=Me(P)}Me=null}else Me=null;W!==null&&x1(ae,X,W,Me,!1),Te!==null&&jt!==null&&x1(ae,jt,Te,Me,!0)}}e:{if(X=Q?is(Q):window,W=X.nodeName&&X.nodeName.toLowerCase(),W==="select"||W==="input"&&X.type==="file")var ot=Oy;else if(ky(X))if(My)ot=US;else{ot=LS;var Ae=PS}else W=X.nodeName,!W||W.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&Ul(Q.elementType)&&(ot=Oy):ot=zS;if(ot&&(ot=ot(n,Q))){Dy(ae,ot,o,ne);break e}Ae&&Ae(n,X,Q),n==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&Ec(X,"number",X.value)}switch(Ae=Q?is(Q):window,n){case"focusin":(ky(Ae)||Ae.contentEditable==="true")&&(Ql=Ae,$m=Q,Vc=null);break;case"focusout":Vc=$m=Ql=null;break;case"mousedown":Km=!0;break;case"contextmenu":case"mouseup":case"dragend":Km=!1,Fy(ae,o,ne);break;case"selectionchange":if(qS)break;case"keydown":case"keyup":Fy(ae,o,ne)}var Ge;if(ht)e:{switch(n){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else Kl?qi(n,o)&&(Ze="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ze="onCompositionStart");Ze&&(vr&&o.locale!=="ko"&&(Kl||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&Kl&&(Ge=Ic()):(pr=ne,Ac="value"in pr?pr.value:pr.textContent,Kl=!0)),Ae=Dh(Q,Ze),0<Ae.length&&(Ze=new br(Ze,n,null,o,ne),ae.push({event:Ze,listeners:Ae}),Ge?Ze.data=Ge:(Ge=$l(o),Ge!==null&&(Ze.data=Ge)))),(Ge=js?DS(n,o):OS(n,o))&&(Ze=Dh(Q,"onBeforeInput"),0<Ze.length&&(Ae=new br("onBeforeInput","beforeinput",null,o,ne),ae.push({event:Ae,listeners:Ze}),Ae.data=Ge)),Tj(ae,n,Q,o,ne)}g1(ae,a)})}function lu(n,a,o){return{instance:n,listener:a,currentTarget:o}}function Dh(n,a){for(var o=a+"Capture",u=[];n!==null;){var m=n,p=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||p===null||(m=Gs(n,o),m!=null&&u.unshift(lu(n,m,p)),m=Gs(n,a),m!=null&&u.push(lu(n,m,p))),n.tag===3)return u;n=n.return}return[]}function Ij(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function x1(n,a,o,u,m){for(var p=a._reactName,b=[];o!==null&&o!==u;){var E=o,R=E.alternate,Q=E.stateNode;if(E=E.tag,R!==null&&R===u)break;E!==5&&E!==26&&E!==27||Q===null||(R=Q,m?(Q=Gs(o,p),Q!=null&&b.unshift(lu(o,Q,R))):m||(Q=Gs(o,p),Q!=null&&b.push(lu(o,Q,R)))),o=o.return}b.length!==0&&n.push({event:a,listeners:b})}var Cj=/\r\n?/g,Rj=/\u0000|\uFFFD/g;function y1(n){return(typeof n=="string"?n:""+n).replace(Cj,`
`).replace(Rj,"")}function b1(n,a){return a=y1(a),y1(n)===a}function St(n,a,o,u,m,p){switch(o){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||Kn(n,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&Kn(n,""+u);break;case"className":ls(n,"class",u);break;case"tabIndex":ls(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ls(n,o,u);break;case"style":Sc(n,u,p);break;case"data":if(a!=="object"){ls(n,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Bl(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(a!=="input"&&St(n,a,"name",m.name,m,null),St(n,a,"formEncType",m.formEncType,m,null),St(n,a,"formMethod",m.formMethod,m,null),St(n,a,"formTarget",m.formTarget,m,null)):(St(n,a,"encType",m.encType,m,null),St(n,a,"method",m.method,m,null),St(n,a,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Bl(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Hs);break;case"onScroll":u!=null&&Qe("scroll",n);break;case"onScrollEnd":u!=null&&Qe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Bl(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Qe("beforetoggle",n),Qe("toggle",n),Ll(n,"popover",u);break;case"xlinkActuate":nn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":nn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":nn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":nn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":nn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":nn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":nn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":nn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":nn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ll(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Dd.get(o)||o,Ll(n,o,u))}}function yg(n,a,o,u,m,p){switch(o){case"style":Sc(n,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Kn(n,u):(typeof u=="number"||typeof u=="bigint")&&Kn(n,""+u);break;case"onScroll":u!=null&&Qe("scroll",n);break;case"onScrollEnd":u!=null&&Qe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Hs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bc.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),a=o.slice(2,m?o.length-7:void 0),p=n[gn]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(a,p,m),typeof u=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(a,u,m);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Ll(n,o,u)}}}function jn(n,a,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",n),Qe("load",n);var u=!1,m=!1,p;for(p in o)if(o.hasOwnProperty(p)){var b=o[p];if(b!=null)switch(p){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:St(n,a,p,b,o,null)}}m&&St(n,a,"srcSet",o.srcSet,o,null),u&&St(n,a,"src",o.src,o,null);return;case"input":Qe("invalid",n);var E=p=b=m=null,R=null,Q=null;for(u in o)if(o.hasOwnProperty(u)){var ne=o[u];if(ne!=null)switch(u){case"name":m=ne;break;case"type":b=ne;break;case"checked":R=ne;break;case"defaultChecked":Q=ne;break;case"value":p=ne;break;case"defaultValue":E=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,a));break;default:St(n,a,u,ne,o,null)}}Cd(n,p,E,R,Q,b,m,!1);return;case"select":Qe("invalid",n),u=b=p=null;for(m in o)if(o.hasOwnProperty(m)&&(E=o[m],E!=null))switch(m){case"value":p=E;break;case"defaultValue":b=E;break;case"multiple":u=E;default:St(n,a,m,E,o,null)}a=p,o=b,n.multiple=!!u,a!=null?ja(n,!!u,a,!1):o!=null&&ja(n,!!u,o,!0);return;case"textarea":Qe("invalid",n),p=m=u=null;for(b in o)if(o.hasOwnProperty(b)&&(E=o[b],E!=null))switch(b){case"value":u=E;break;case"defaultValue":m=E;break;case"children":p=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:St(n,a,b,E,o,null)}Aa(n,u,m,p);return;case"option":for(R in o)if(o.hasOwnProperty(R)&&(u=o[R],u!=null))switch(R){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:St(n,a,R,u,o,null)}return;case"dialog":Qe("beforetoggle",n),Qe("toggle",n),Qe("cancel",n),Qe("close",n);break;case"iframe":case"object":Qe("load",n);break;case"video":case"audio":for(u=0;u<iu.length;u++)Qe(iu[u],n);break;case"image":Qe("error",n),Qe("load",n);break;case"details":Qe("toggle",n);break;case"embed":case"source":case"link":Qe("error",n),Qe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in o)if(o.hasOwnProperty(Q)&&(u=o[Q],u!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:St(n,a,Q,u,o,null)}return;default:if(Ul(a)){for(ne in o)o.hasOwnProperty(ne)&&(u=o[ne],u!==void 0&&yg(n,a,ne,u,o,void 0));return}}for(E in o)o.hasOwnProperty(E)&&(u=o[E],u!=null&&St(n,a,E,u,o,null))}function kj(n,a,o,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,p=null,b=null,E=null,R=null,Q=null,ne=null;for(W in o){var ae=o[W];if(o.hasOwnProperty(W)&&ae!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":R=ae;default:u.hasOwnProperty(W)||St(n,a,W,null,u,ae)}}for(var X in u){var W=u[X];if(ae=o[X],u.hasOwnProperty(X)&&(W!=null||ae!=null))switch(X){case"type":p=W;break;case"name":m=W;break;case"checked":Q=W;break;case"defaultChecked":ne=W;break;case"value":b=W;break;case"defaultValue":E=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,a));break;default:W!==ae&&St(n,a,X,W,u,ae)}}zl(n,b,E,R,Q,ne,p,m);return;case"select":W=b=E=X=null;for(p in o)if(R=o[p],o.hasOwnProperty(p)&&R!=null)switch(p){case"value":break;case"multiple":W=R;default:u.hasOwnProperty(p)||St(n,a,p,null,u,R)}for(m in u)if(p=u[m],R=o[m],u.hasOwnProperty(m)&&(p!=null||R!=null))switch(m){case"value":X=p;break;case"defaultValue":E=p;break;case"multiple":b=p;default:p!==R&&St(n,a,m,p,u,R)}a=E,o=b,u=W,X!=null?ja(n,!!o,X,!1):!!u!=!!o&&(a!=null?ja(n,!!o,a,!0):ja(n,!!o,o?[]:"",!1));return;case"textarea":W=X=null;for(E in o)if(m=o[E],o.hasOwnProperty(E)&&m!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:St(n,a,E,null,u,m)}for(b in u)if(m=u[b],p=o[b],u.hasOwnProperty(b)&&(m!=null||p!=null))switch(b){case"value":X=m;break;case"defaultValue":W=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==p&&St(n,a,b,m,u,p)}Rd(n,X,W);return;case"option":for(var Te in o)if(X=o[Te],o.hasOwnProperty(Te)&&X!=null&&!u.hasOwnProperty(Te))switch(Te){case"selected":n.selected=!1;break;default:St(n,a,Te,null,u,X)}for(R in u)if(X=u[R],W=o[R],u.hasOwnProperty(R)&&X!==W&&(X!=null||W!=null))switch(R){case"selected":n.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:St(n,a,R,X,u,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in o)X=o[Me],o.hasOwnProperty(Me)&&X!=null&&!u.hasOwnProperty(Me)&&St(n,a,Me,null,u,X);for(Q in u)if(X=u[Q],W=o[Q],u.hasOwnProperty(Q)&&X!==W&&(X!=null||W!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,a));break;default:St(n,a,Q,X,u,W)}return;default:if(Ul(a)){for(var jt in o)X=o[jt],o.hasOwnProperty(jt)&&X!==void 0&&!u.hasOwnProperty(jt)&&yg(n,a,jt,void 0,u,X);for(ne in u)X=u[ne],W=o[ne],!u.hasOwnProperty(ne)||X===W||X===void 0&&W===void 0||yg(n,a,ne,X,u,W);return}}for(var q in o)X=o[q],o.hasOwnProperty(q)&&X!=null&&!u.hasOwnProperty(q)&&St(n,a,q,null,u,X);for(ae in u)X=u[ae],W=o[ae],!u.hasOwnProperty(ae)||X===W||X==null&&W==null||St(n,a,ae,X,u,W)}function v1(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Dj(){if(typeof performance.getEntriesByType=="function"){for(var n=0,a=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],p=m.transferSize,b=m.initiatorType,E=m.duration;if(p&&E&&v1(b)){for(b=0,E=m.responseEnd,u+=1;u<o.length;u++){var R=o[u],Q=R.startTime;if(Q>E)break;var ne=R.transferSize,ae=R.initiatorType;ne&&v1(ae)&&(R=R.responseEnd,b+=ne*(R<E?1:(E-Q)/(R-Q)))}if(--u,a+=8*(p+b)/(m.duration/1e3),n++,10<n)break}}if(0<n)return a/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var bg=null,vg=null;function Oh(n){return n.nodeType===9?n:n.ownerDocument}function w1(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _1(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function wg(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var _g=null;function Oj(){var n=window.event;return n&&n.type==="popstate"?n===_g?!1:(_g=n,!0):(_g=null,!1)}var N1=typeof setTimeout=="function"?setTimeout:void 0,Mj=typeof clearTimeout=="function"?clearTimeout:void 0,E1=typeof Promise=="function"?Promise:void 0,Vj=typeof queueMicrotask=="function"?queueMicrotask:typeof E1<"u"?function(n){return E1.resolve(null).then(n).catch(Pj)}:N1;function Pj(n){setTimeout(function(){throw n})}function Ja(n){return n==="head"}function T1(n,a){var o=a,u=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(m),_o(a);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")ou(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,ou(o);for(var p=o.firstChild;p;){var b=p.nextSibling,E=p.nodeName;p[cr]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=b}}else o==="body"&&ou(n.ownerDocument.body);o=m}while(o);_o(a)}function S1(n,a){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?a?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(a?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function Ng(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var o=a;switch(a=a.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Ng(o),Pl(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function Lj(n,a,o,u){for(;n.nodeType===1;){var m=o;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[cr])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var p=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=Os(n.nextSibling),n===null)break}return null}function zj(n,a,o){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Os(n.nextSibling),n===null))return null;return n}function j1(n,a){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Os(n.nextSibling),n===null))return null;return n}function Eg(n){return n.data==="$?"||n.data==="$~"}function Tg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Uj(n,a){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=a;else if(n.data!=="$?"||o.readyState!=="loading")a();else{var u=function(){a(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Os(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return n}var Sg=null;function A1(n){n=n.nextSibling;for(var a=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(a===0)return Os(n.nextSibling);a--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||a++}n=n.nextSibling}return null}function I1(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(a===0)return n;a--}else o!=="/$"&&o!=="/&"||a++}n=n.previousSibling}return null}function C1(n,a,o){switch(a=Oh(o),n){case"html":if(n=a.documentElement,!n)throw Error(s(452));return n;case"head":if(n=a.head,!n)throw Error(s(453));return n;case"body":if(n=a.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function ou(n){for(var a=n.attributes;a.length;)n.removeAttributeNode(a[0]);Pl(n)}var Ms=new Map,R1=new Set;function Mh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var sa=ce.d;ce.d={f:Bj,r:qj,D:Fj,C:Hj,L:Gj,m:$j,X:Qj,S:Kj,M:Xj};function Bj(){var n=sa.f(),a=Sh();return n||a}function qj(n){var a=Es(n);a!==null&&a.tag===5&&a.type==="form"?Qb(a):sa.r(n)}var bo=typeof document>"u"?null:document;function k1(n,a,o){var u=bo;if(u&&typeof a=="string"&&a){var m=$n(a);m='link[rel="'+n+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),R1.has(m)||(R1.add(m),n={rel:n,crossOrigin:o,href:a},u.querySelector(m)===null&&(a=u.createElement("link"),jn(a,"link",n),tn(a),u.head.appendChild(a)))}}function Fj(n){sa.D(n),k1("dns-prefetch",n,null)}function Hj(n,a){sa.C(n,a),k1("preconnect",n,a)}function Gj(n,a,o){sa.L(n,a,o);var u=bo;if(u&&n&&a){var m='link[rel="preload"][as="'+$n(a)+'"]';a==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+$n(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+$n(o.imageSizes)+'"]')):m+='[href="'+$n(n)+'"]';var p=m;switch(a){case"style":p=vo(n);break;case"script":p=wo(n)}Ms.has(p)||(n=w({rel:"preload",href:a==="image"&&o&&o.imageSrcSet?void 0:n,as:a},o),Ms.set(p,n),u.querySelector(m)!==null||a==="style"&&u.querySelector(cu(p))||a==="script"&&u.querySelector(uu(p))||(a=u.createElement("link"),jn(a,"link",n),tn(a),u.head.appendChild(a)))}}function $j(n,a){sa.m(n,a);var o=bo;if(o&&n){var u=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+$n(u)+'"][href="'+$n(n)+'"]',p=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=wo(n)}if(!Ms.has(p)&&(n=w({rel:"modulepreload",href:n},a),Ms.set(p,n),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(uu(p)))return}u=o.createElement("link"),jn(u,"link",n),tn(u),o.head.appendChild(u)}}}function Kj(n,a,o){sa.S(n,a,o);var u=bo;if(u&&n){var m=dr(u).hoistableStyles,p=vo(n);a=a||"default";var b=m.get(p);if(!b){var E={loading:0,preload:null};if(b=u.querySelector(cu(p)))E.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":a},o),(o=Ms.get(p))&&jg(n,o);var R=b=u.createElement("link");tn(R),jn(R,"link",n),R._p=new Promise(function(Q,ne){R.onload=Q,R.onerror=ne}),R.addEventListener("load",function(){E.loading|=1}),R.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Vh(b,a,u)}b={type:"stylesheet",instance:b,count:1,state:E},m.set(p,b)}}}function Qj(n,a){sa.X(n,a);var o=bo;if(o&&n){var u=dr(o).hoistableScripts,m=wo(n),p=u.get(m);p||(p=o.querySelector(uu(m)),p||(n=w({src:n,async:!0},a),(a=Ms.get(m))&&Ag(n,a),p=o.createElement("script"),tn(p),jn(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(m,p))}}function Xj(n,a){sa.M(n,a);var o=bo;if(o&&n){var u=dr(o).hoistableScripts,m=wo(n),p=u.get(m);p||(p=o.querySelector(uu(m)),p||(n=w({src:n,async:!0,type:"module"},a),(a=Ms.get(m))&&Ag(n,a),p=o.createElement("script"),tn(p),jn(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(m,p))}}function D1(n,a,o,u){var m=(m=Oe.current)?Mh(m):null;if(!m)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(a=vo(o.href),o=dr(m).hoistableStyles,u=o.get(a),u||(u={type:"style",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=vo(o.href);var p=dr(m).hoistableStyles,b=p.get(n);if(b||(m=m.ownerDocument||m,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,b),(p=m.querySelector(cu(n)))&&!p._p&&(b.instance=p,b.state.loading=5),Ms.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ms.set(n,o),p||Yj(m,n,o,b.state))),a&&u===null)throw Error(s(528,""));return b}if(a&&u!==null)throw Error(s(529,""));return null;case"script":return a=o.async,o=o.src,typeof o=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=wo(o),o=dr(m).hoistableScripts,u=o.get(a),u||(u={type:"script",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function vo(n){return'href="'+$n(n)+'"'}function cu(n){return'link[rel="stylesheet"]['+n+"]"}function O1(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function Yj(n,a,o,u){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=n.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),jn(a,"link",o),tn(a),n.head.appendChild(a))}function wo(n){return'[src="'+$n(n)+'"]'}function uu(n){return"script[async]"+n}function M1(n,a,o){if(a.count++,a.instance===null)switch(a.type){case"style":var u=n.querySelector('style[data-href~="'+$n(o.href)+'"]');if(u)return a.instance=u,tn(u),u;var m=w({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),tn(u),jn(u,"style",m),Vh(u,o.precedence,n),a.instance=u;case"stylesheet":m=vo(o.href);var p=n.querySelector(cu(m));if(p)return a.state.loading|=4,a.instance=p,tn(p),p;u=O1(o),(m=Ms.get(m))&&jg(u,m),p=(n.ownerDocument||n).createElement("link"),tn(p);var b=p;return b._p=new Promise(function(E,R){b.onload=E,b.onerror=R}),jn(p,"link",u),a.state.loading|=4,Vh(p,o.precedence,n),a.instance=p;case"script":return p=wo(o.src),(m=n.querySelector(uu(p)))?(a.instance=m,tn(m),m):(u=o,(m=Ms.get(p))&&(u=w({},o),Ag(u,m)),n=n.ownerDocument||n,m=n.createElement("script"),tn(m),jn(m,"link",u),n.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Vh(u,o.precedence,n));return a.instance}function Vh(n,a,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,p=m,b=0;b<u.length;b++){var E=u[b];if(E.dataset.precedence===a)p=E;else if(p!==m)break}p?p.parentNode.insertBefore(n,p.nextSibling):(a=o.nodeType===9?o.head:o,a.insertBefore(n,a.firstChild))}function jg(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function Ag(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var Ph=null;function V1(n,a,o){if(Ph===null){var u=new Map,m=Ph=new Map;m.set(o,u)}else m=Ph,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),m=0;m<o.length;m++){var p=o[m];if(!(p[cr]||p[en]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var b=p.getAttribute(a)||"";b=n+b;var E=u.get(b);E?E.push(p):u.set(b,[p])}}return u}function P1(n,a,o){n=n.ownerDocument||n,n.head.insertBefore(o,a==="title"?n.querySelector("head > title"):null)}function Jj(n,a,o){if(o===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return n=a.disabled,typeof a.precedence=="string"&&n==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function L1(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Wj(n,a,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=vo(u.href),p=a.querySelector(cu(m));if(p){a=p._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(n.count++,n=Lh.bind(n),a.then(n,n)),o.state.loading|=4,o.instance=p,tn(p);return}p=a.ownerDocument||a,u=O1(u),(m=Ms.get(m))&&jg(u,m),p=p.createElement("link"),tn(p);var b=p;b._p=new Promise(function(E,R){b.onload=E,b.onerror=R}),jn(p,"link",u),o.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Lh.bind(n),a.addEventListener("load",o),a.addEventListener("error",o))}}var Ig=0;function Zj(n,a){return n.stylesheets&&n.count===0&&Uh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&Uh(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+a);0<n.imgBytes&&Ig===0&&(Ig=62500*Dj());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Uh(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>Ig?50:800)+a);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function Lh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Uh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var zh=null;function Uh(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,zh=new Map,a.forEach(e4,n),zh=null,Lh.call(n))}function e4(n,a){if(!(a.state.loading&4)){var o=zh.get(n);if(o)var u=o.get(null);else{o=new Map,zh.set(n,o);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<m.length;p++){var b=m[p];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),u=b)}u&&o.set(null,u)}m=a.instance,b=m.getAttribute("data-precedence"),p=o.get(b)||u,p===u&&o.set(null,m),o.set(b,m),this.count++,u=Lh.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),p?p.parentNode.insertBefore(m,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),a.state.loading|=4}}var du={$$typeof:le,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function t4(n,a,o,u,m,p,b,E,R){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ut(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ut(0),this.hiddenUpdates=ut(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=p,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function z1(n,a,o,u,m,p,b,E,R,Q,ne,ae){return n=new t4(n,a,o,b,R,Q,ne,ae,E),a=1,p===!0&&(a|=24),p=cs(3,null,null,a),n.current=p,p.stateNode=n,a=o0(),a.refCount++,n.pooledCache=a,a.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:a},h0(p),n}function U1(n){return n?(n=Jl,n):Jl}function B1(n,a,o,u,m,p){m=U1(m),u.context===null?u.context=m:u.pendingContext=m,u=Ua(a),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Ba(n,u,a),o!==null&&(Wn(o,n,a),Fc(o,n,a))}function q1(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<a?o:a}}function Cg(n,a){q1(n,a),(n=n.alternate)&&q1(n,a)}function F1(n){if(n.tag===13||n.tag===31){var a=Gi(n,67108864);a!==null&&Wn(a,n,67108864),Cg(n,67108864)}}function H1(n){if(n.tag===13||n.tag===31){var a=ms();a=Di(a);var o=Gi(n,a);o!==null&&Wn(o,n,a),Cg(n,a)}}var Bh=!0;function n4(n,a,o,u){var m=F.T;F.T=null;var p=ce.p;try{ce.p=2,Rg(n,a,o,u)}finally{ce.p=p,F.T=m}}function s4(n,a,o,u){var m=F.T;F.T=null;var p=ce.p;try{ce.p=8,Rg(n,a,o,u)}finally{ce.p=p,F.T=m}}function Rg(n,a,o,u){if(Bh){var m=kg(u);if(m===null)xg(n,a,u,qh,o),$1(n,u);else if(a4(m,n,a,o,u))u.stopPropagation();else if($1(n,u),a&4&&-1<r4.indexOf(n)){for(;m!==null;){var p=Es(m);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var b=Ie(p.pendingLanes);if(b!==0){var E=p;for(E.pendingLanes|=2,E.entangledLanes|=2;b;){var R=1<<31-nt(b);E.entanglements[1]|=R,b&=~R}Er(p),(ft&6)===0&&(Eh=Vt()+500,au(0))}}break;case 31:case 13:E=Gi(p,2),E!==null&&Wn(E,p,2),Sh(),Cg(p,2)}if(p=kg(u),p===null&&xg(n,a,u,qh,o),p===m)break;m=p}m!==null&&u.stopPropagation()}else xg(n,a,u,null,o)}}function kg(n){return n=Ts(n),Dg(n)}var qh=null;function Dg(n){if(qh=null,n=ur(n),n!==null){var a=c(n);if(a===null)n=null;else{var o=a.tag;if(o===13){if(n=d(a),n!==null)return n;n=null}else if(o===31){if(n=f(a),n!==null)return n;n=null}else if(o===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return qh=n,null}function G1(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ns()){case ir:return 2;case Pr:return 8;case _n:case Ea:return 32;case Ta:return 268435456;default:return 32}default:return 32}}var Og=!1,Wa=null,Za=null,ei=null,hu=new Map,fu=new Map,ti=[],r4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $1(n,a){switch(n){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":Za=null;break;case"mouseover":case"mouseout":ei=null;break;case"pointerover":case"pointerout":hu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":fu.delete(a.pointerId)}}function mu(n,a,o,u,m,p){return n===null||n.nativeEvent!==p?(n={blockedOn:a,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[m]},a!==null&&(a=Es(a),a!==null&&F1(a)),n):(n.eventSystemFlags|=u,a=n.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),n)}function a4(n,a,o,u,m){switch(a){case"focusin":return Wa=mu(Wa,n,a,o,u,m),!0;case"dragenter":return Za=mu(Za,n,a,o,u,m),!0;case"mouseover":return ei=mu(ei,n,a,o,u,m),!0;case"pointerover":var p=m.pointerId;return hu.set(p,mu(hu.get(p)||null,n,a,o,u,m)),!0;case"gotpointercapture":return p=m.pointerId,fu.set(p,mu(fu.get(p)||null,n,a,o,u,m)),!0}return!1}function K1(n){var a=ur(n.target);if(a!==null){var o=c(a);if(o!==null){if(a=o.tag,a===13){if(a=d(o),a!==null){n.blockedOn=a,qs(n.priority,function(){H1(o)});return}}else if(a===31){if(a=f(o),a!==null){n.blockedOn=a,qs(n.priority,function(){H1(o)});return}}else if(a===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Fh(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var o=kg(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);jc=u,o.target.dispatchEvent(u),jc=null}else return a=Es(o),a!==null&&F1(a),n.blockedOn=o,!1;a.shift()}return!0}function Q1(n,a,o){Fh(n)&&o.delete(a)}function i4(){Og=!1,Wa!==null&&Fh(Wa)&&(Wa=null),Za!==null&&Fh(Za)&&(Za=null),ei!==null&&Fh(ei)&&(ei=null),hu.forEach(Q1),fu.forEach(Q1)}function Hh(n,a){n.blockedOn===a&&(n.blockedOn=null,Og||(Og=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,i4)))}var Gh=null;function X1(n){Gh!==n&&(Gh=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Gh===n&&(Gh=null);for(var a=0;a<n.length;a+=3){var o=n[a],u=n[a+1],m=n[a+2];if(typeof u!="function"){if(Dg(u||o)===null)continue;break}var p=Es(o);p!==null&&(n.splice(a,3),a-=3,k0(p,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function _o(n){function a(R){return Hh(R,n)}Wa!==null&&Hh(Wa,n),Za!==null&&Hh(Za,n),ei!==null&&Hh(ei,n),hu.forEach(a),fu.forEach(a);for(var o=0;o<ti.length;o++){var u=ti[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ti.length&&(o=ti[0],o.blockedOn===null);)K1(o),o.blockedOn===null&&ti.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],p=o[u+1],b=m[gn]||null;if(typeof p=="function")b||X1(o);else if(b){var E=null;if(p&&p.hasAttribute("formAction")){if(m=p,b=p[gn]||null)E=b.formAction;else if(Dg(m)!==null)continue}else E=b.action;typeof E=="function"?o[u+1]=E:(o.splice(u,3),u-=3),X1(o)}}}function Y1(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(b){return m=b})},focusReset:"manual",scroll:"manual"})}function a(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),m!==null&&(m(),m=null)}}}function Mg(n){this._internalRoot=n}$h.prototype.render=Mg.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(s(409));var o=a.current,u=ms();B1(o,u,n,a,null,null)},$h.prototype.unmount=Mg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;B1(n.current,2,null,n,null,null),Sh(),a[or]=null}};function $h(n){this._internalRoot=n}$h.prototype.unstable_scheduleHydration=function(n){if(n){var a=Sd();n={blockedOn:null,target:n,priority:a};for(var o=0;o<ti.length&&a!==0&&a<ti[o].priority;o++);ti.splice(o,0,n),o===0&&K1(n)}};var J1=e.version;if(J1!=="19.2.0")throw Error(s(527,J1,"19.2.0"));ce.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=x(a),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var l4={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kh.isDisabled&&Kh.supportsFiber)try{Be=Kh.inject(l4),Ye=Kh}catch{}}return pu.createRoot=function(n,a){if(!i(n))throw Error(s(299));var o=!1,u="",m=rv,p=av,b=iv;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError)),a=z1(n,1,!1,null,null,o,u,null,m,p,b,Y1),n[or]=a.current,pg(n),new Mg(a)},pu.hydrateRoot=function(n,a,o){if(!i(n))throw Error(s(299));var u=!1,m="",p=rv,b=av,E=iv,R=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.formState!==void 0&&(R=o.formState)),a=z1(n,1,!0,a,o??null,u,m,R,p,b,E,Y1),a.context=U1(null),o=a.current,u=ms(),u=Di(u),m=Ua(u),m.callback=null,Ba(o,m,u),o=u,a.current.lanes=o,dt(a,o),Er(a),n[or]=a.current,pg(n),new $h(a)},pu.version="19.2.0",pu}var lw;function x4(){if(lw)return Lg.exports;lw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Lg.exports=p4(),Lg.exports}var y4=x4();const b4=A2(y4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),w4=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),ow=r=>{const e=w4(r);return e.charAt(0).toUpperCase()+e.slice(1)},I2=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),_4=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var N4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=V.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:i="",children:c,iconNode:d,...f},g)=>V.createElement("svg",{ref:g,...N4,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:I2("lucide",i),...!c&&!_4(f)&&{"aria-hidden":"true"},...f},[...d.map(([x,v])=>V.createElement(x,v)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=(r,e)=>{const t=V.forwardRef(({className:s,...i},c)=>V.createElement(E4,{ref:c,iconNode:e,className:I2(`lucide-${v4(ow(r))}`,`lucide-${r}`,s),...i}));return t.displayName=ow(r),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],cw=pe("activity",T4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],wf=pe("arrow-left",S4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],qt=pe("arrow-right",j4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],od=pe("award",A4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Qh=pe("bell",I4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ns=pe("book-open",C4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Bu=pe("book",R4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],C2=pe("brain",k4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],O4=pe("briefcase",D4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],qu=pe("calendar",M4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],R2=pe("chart-column",V4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],bl=pe("chevron-down",P4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ra=pe("chevron-left",L4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],qg=pe("chevron-right",z4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],_f=pe("circle-alert",U4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ha=pe("circle-check-big",B4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],bn=pe("circle-check",q4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],H4=pe("circle-play",F4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],uw=pe("circle-plus",G4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],oa=pe("circle-question-mark",$4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],Q4=pe("circle-user",K4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Y4=pe("circle-x",X4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ix=pe("clock",J4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],Z4=pe("cloud-download",W4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],k2=pe("cloud-upload",e5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],ic=pe("crown",t5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],gp=pe("download",n5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pp=pe("eye",s5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],xp=pe("facebook",r5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],i5=pe("file-check",a5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],o5=pe("file-plus",l5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],u5=pe("file-search",c5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ss=pe("file-text",d5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],lx=pe("flag",h5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Nf=pe("flame",f5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Do=pe("folder-open",m5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],p5=pe("globe",g5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],fa=pe("graduation-cap",x5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Ef=pe("house",y5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],D2=pe("info",b5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],sm=pe("languages",v5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Fu=pe("layers",w5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],dw=pe("layout-dashboard",_5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],E5=pe("link",N5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],S5=pe("list",T5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],bt=pe("loader-circle",j5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],yp=pe("log-in",A5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],li=pe("lock",I5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Tf=pe("log-out",C5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],jr=pe("mail",R5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],bp=pe("map-pin",k5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],vp=pe("medal",D5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],hw=pe("megaphone",O5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],V5=pe("menu",M5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Hu=pe("message-circle",P5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],rm=pe("message-square",L5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Gu=pe("monitor",z5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],O2=pe("move-right",U5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],q5=pe("octagon-alert",B5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],fw=pe("palette",F5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],G5=pe("pen-line",H5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],ox=pe("pen-tool",$5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],Q5=pe("percent",K5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],Y5=pe("quote",X5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],am=pe("refresh-cw",J5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Z5=pe("rocket",W5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],M2=pe("rotate-ccw",eA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],gi=pe("save",tA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],cx=pe("school",nA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Us=pe("search",sA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ca=pe("send",rA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],iA=pe("shield-alert",aA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],V2=pe("shield-check",lA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],cA=pe("smartphone",oA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],dA=pe("sparkles",uA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],wp=pe("square-pen",hA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],vl=pe("star",fA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],P2=pe("tag",mA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ux=pe("target",gA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],xA=pe("text-align-start",pA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],bA=pe("timer",yA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],wi=pe("trash-2",vA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],_A=pe("trending-up",wA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],dx=pe("triangle-alert",NA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Mo=pe("trophy",EA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],SA=pe("type",TA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Zn=pe("user",jA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],im=pe("users",AA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],CA=pe("wifi-off",IA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ps=pe("x",RA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],lm=pe("zap",kA),DA=()=>{};var mw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let i=r.charCodeAt(s);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},OA=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const i=r[t++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const c=r[t++];e[s++]=String.fromCharCode((i&31)<<6|c&63)}else if(i>239&&i<365){const c=r[t++],d=r[t++],f=r[t++],g=((i&7)<<18|(c&63)<<12|(d&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[t++],d=r[t++];e[s++]=String.fromCharCode((i&15)<<12|(c&63)<<6|d&63)}}return e.join("")},z2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<r.length;i+=3){const c=r[i],d=i+1<r.length,f=d?r[i+1]:0,g=i+2<r.length,x=g?r[i+2]:0,v=c>>2,w=(c&3)<<4|f>>4;let N=(f&15)<<2|x>>6,C=x&63;g||(C=64,d||(N=64)),s.push(t[v],t[w],t[N],t[C])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(L2(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):OA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<r.length;){const c=t[r.charAt(i++)],f=i<r.length?t[r.charAt(i)]:0;++i;const x=i<r.length?t[r.charAt(i)]:64;++i;const w=i<r.length?t[r.charAt(i)]:64;if(++i,c==null||f==null||x==null||w==null)throw new MA;const N=c<<2|f>>4;if(s.push(N),x!==64){const C=f<<4&240|x>>2;if(s.push(C),w!==64){const M=x<<6&192|w;s.push(M)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class MA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VA=function(r){const e=L2(r);return z2.encodeByteArray(e,!0)},U2=function(r){return VA(r).replace(/\./g,"")},B2=function(r){try{return z2.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=()=>q2().__FIREBASE_DEFAULTS__,LA=()=>{if(typeof process>"u"||typeof mw>"u")return;const r=mw.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},zA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&B2(r[1]);return e&&JSON.parse(e)},om=()=>{try{return DA()||PA()||LA()||zA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},UA=r=>{var e,t;return(t=(e=om())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},F2=()=>{var r;return(r=om())==null?void 0:r.config},H2=r=>{var e;return(e=om())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function G2(r){return(await fetch(r,{credentials:"include"})).ok}const Iu={};function qA(){const r={prod:[],emulator:[]};for(const e of Object.keys(Iu))Iu[e]?r.emulator.push(e):r.prod.push(e);return r}function FA(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let gw=!1;function HA(r,e){if(typeof window>"u"||typeof document>"u"||!lc(window.location.host)||Iu[r]===e||Iu[r]||gw)return;Iu[r]=e;function t(N){return`__firebase__banner__${N}`}const s="__firebase__banner",c=qA().prod.length>0;function d(){const N=document.getElementById(s);N&&N.remove()}function f(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function g(N,C){N.setAttribute("width","24"),N.setAttribute("id",C),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function x(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{gw=!0,d()},N}function v(N,C){N.setAttribute("id",C),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function w(){const N=FA(s),C=t("text"),M=document.getElementById(C)||document.createElement("span"),J=t("learnmore"),B=document.getElementById(J)||document.createElement("a"),he=t("preprendIcon"),oe=document.getElementById(he)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const le=N.element;f(le),v(B,J);const _e=x();g(oe,he),le.append(oe,M,B,_e),document.body.appendChild(le)}c?(M.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function $2(){var e;const r=(e=om())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $A(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function K2(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function KA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QA(){const r=dn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Q2(){return!$2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function X2(){return!$2()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function hx(){try{return typeof indexedDB=="object"}catch{return!1}}function Y2(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var c;e(((c=i.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}function XA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="FirebaseError";class nr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=YA,Object.setPrototypeOf(this,nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kl.prototype.create)}}class kl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},i=`${this.service}/${e}`,c=this.errors[e],d=c?JA(c,s):"Error",f=`${this.serviceName}: ${d} (${i}).`;return new nr(i,f,s)}}function JA(r,e){return r.replace(WA,(t,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const WA=/\{\$([^}]+)}/g;function ZA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function _i(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const i of t){if(!s.includes(i))return!1;const c=r[i],d=e[i];if(pw(c)&&pw(d)){if(!_i(c,d))return!1}else if(c!==d)return!1}for(const i of s)if(!t.includes(i))return!1;return!0}function pw(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function _u(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,c]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(c)}}),e}function Nu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function eI(r,e){const t=new tI(r,e);return t.subscribe.bind(t)}class tI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let i;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");nI(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:s},i.next===void 0&&(i.next=Fg),i.error===void 0&&(i.error=Fg),i.complete===void 0&&(i.complete=Fg);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Fg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=1e3,rI=2,aI=14400*1e3,iI=.5;function xw(r,e=sI,t=rI){const s=e*Math.pow(t,r),i=Math.round(iI*s*(Math.random()-.5)*2);return Math.min(aI,s+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(r){return r&&r._delegate?r._delegate:r}class er{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new BA;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cI(e))try{this.getOrInitializeService({instanceIdentifier:il})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:i});s.resolve(c)}catch{}}}}clearInstance(e=il){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=il){return this.instances.has(e)}getOptions(e=il){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(c);s===f&&d.resolve(i)}return i}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(s)??new Set;i.add(e),this.onInitCallbacks.set(s,i);const c=this.instances.get(s);return c&&e(c,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const i of s)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:oI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=il){return this.component?this.component.multipleInstances?e:il:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oI(r){return r===il?void 0:r}function cI(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(et||(et={}));const dI={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},hI=et.INFO,fI={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},mI=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),i=fI[e];if(i)console[i](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cm{constructor(e){this.name=e,this._logLevel=hI,this._logHandler=mI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const gI=(r,e)=>e.some(t=>r instanceof t);let yw,bw;function pI(){return yw||(yw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xI(){return bw||(bw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const J2=new WeakMap,_p=new WeakMap,W2=new WeakMap,Hg=new WeakMap,fx=new WeakMap;function yI(r){const e=new Promise((t,s)=>{const i=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{t(pi(r.result)),i()},d=()=>{s(r.error),i()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&J2.set(t,r)}).catch(()=>{}),fx.set(e,r),e}function bI(r){if(_p.has(r))return;const e=new Promise((t,s)=>{const i=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{t(),i()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});_p.set(r,e)}let Np={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return _p.get(r);if(e==="objectStoreNames")return r.objectStoreNames||W2.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return pi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function vI(r){Np=r(Np)}function wI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Gg(this),e,...t);return W2.set(s,e.sort?e.sort():[e]),pi(s)}:xI().includes(r)?function(...e){return r.apply(Gg(this),e),pi(J2.get(this))}:function(...e){return pi(r.apply(Gg(this),e))}}function _I(r){return typeof r=="function"?wI(r):(r instanceof IDBTransaction&&bI(r),gI(r,pI())?new Proxy(r,Np):r)}function pi(r){if(r instanceof IDBRequest)return yI(r);if(Hg.has(r))return Hg.get(r);const e=_I(r);return e!==r&&(Hg.set(r,e),fx.set(e,r)),e}const Gg=r=>fx.get(r);function Z2(r,e,{blocked:t,upgrade:s,blocking:i,terminated:c}={}){const d=indexedDB.open(r,e),f=pi(d);return s&&d.addEventListener("upgradeneeded",g=>{s(pi(d.result),g.oldVersion,g.newVersion,pi(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{c&&g.addEventListener("close",()=>c()),i&&g.addEventListener("versionchange",x=>i(x.oldVersion,x.newVersion,x))}).catch(()=>{}),f}const NI=["get","getKey","getAll","getAllKeys","count"],EI=["put","add","delete","clear"],$g=new Map;function vw(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if($g.get(e))return $g.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,i=EI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(i||NI.includes(t)))return;const c=async function(d,...f){const g=this.transaction(d,i?"readwrite":"readonly");let x=g.store;return s&&(x=x.index(f.shift())),(await Promise.all([x[t](...f),i&&g.done]))[0]};return $g.set(e,c),c}vI(r=>({...r,get:(e,t,s)=>vw(e,t)||r.get(e,t,s),has:(e,t)=>!!vw(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(SI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function SI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ep="@firebase/app",ww="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=new cm("@firebase/app"),jI="@firebase/app-compat",AI="@firebase/analytics-compat",II="@firebase/analytics",CI="@firebase/app-check-compat",RI="@firebase/app-check",kI="@firebase/auth",DI="@firebase/auth-compat",OI="@firebase/database",MI="@firebase/data-connect",VI="@firebase/database-compat",PI="@firebase/functions",LI="@firebase/functions-compat",zI="@firebase/installations",UI="@firebase/installations-compat",BI="@firebase/messaging",qI="@firebase/messaging-compat",FI="@firebase/performance",HI="@firebase/performance-compat",GI="@firebase/remote-config",$I="@firebase/remote-config-compat",KI="@firebase/storage",QI="@firebase/storage-compat",XI="@firebase/firestore",YI="@firebase/ai",JI="@firebase/firestore-compat",WI="firebase",ZI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="[DEFAULT]",e3={[Ep]:"fire-core",[jI]:"fire-core-compat",[II]:"fire-analytics",[AI]:"fire-analytics-compat",[RI]:"fire-app-check",[CI]:"fire-app-check-compat",[kI]:"fire-auth",[DI]:"fire-auth-compat",[OI]:"fire-rtdb",[MI]:"fire-data-connect",[VI]:"fire-rtdb-compat",[PI]:"fire-fn",[LI]:"fire-fn-compat",[zI]:"fire-iid",[UI]:"fire-iid-compat",[BI]:"fire-fcm",[qI]:"fire-fcm-compat",[FI]:"fire-perf",[HI]:"fire-perf-compat",[GI]:"fire-rc",[$I]:"fire-rc-compat",[KI]:"fire-gcs",[QI]:"fire-gcs-compat",[XI]:"fire-fst",[JI]:"fire-fst-compat",[YI]:"fire-vertex","fire-js":"fire-js",[WI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=new Map,t3=new Map,Sp=new Map;function _w(r,e){try{r.container.addComponent(e)}catch(t){ma.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Or(r){const e=r.name;if(Sp.has(e))return ma.debug(`There were multiple attempts to register component ${e}.`),!1;Sp.set(e,r);for(const t of Sf.values())_w(t,r);for(const t of t3.values())_w(t,r);return!0}function Dl(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Vs(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xi=new kl("app","Firebase",n3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new er("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=ZI;function eN(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Tp,automaticDataCollectionEnabled:!0,...e},i=s.name;if(typeof i!="string"||!i)throw xi.create("bad-app-name",{appName:String(i)});if(t||(t=F2()),!t)throw xi.create("no-options");const c=Sf.get(i);if(c){if(_i(t,c.options)&&_i(s,c.config))return c;throw xi.create("duplicate-app",{appName:i})}const d=new uI(i);for(const g of Sp.values())d.addComponent(g);const f=new s3(t,s,d);return Sf.set(i,f),f}function tN(r=Tp){const e=Sf.get(r);if(!e&&r===Tp&&F2())return eN();if(!e)throw xi.create("no-app",{appName:r});return e}function Ls(r,e,t){let s=e3[r]??r;t&&(s+=`-${t}`);const i=s.match(/\s|\//),c=e.match(/\s|\//);if(i||c){const d=[`Unable to register library "${s}" with version "${e}":`];i&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ma.warn(d.join(" "));return}Or(new er(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3="firebase-heartbeat-database",a3=1,$u="firebase-heartbeat-store";let Kg=null;function nN(){return Kg||(Kg=Z2(r3,a3,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore($u)}catch(t){console.warn(t)}}}}).catch(r=>{throw xi.create("idb-open",{originalErrorMessage:r.message})})),Kg}async function i3(r){try{const t=(await nN()).transaction($u),s=await t.objectStore($u).get(sN(r));return await t.done,s}catch(e){if(e instanceof nr)ma.warn(e.message);else{const t=xi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ma.warn(t.message)}}}async function Nw(r,e){try{const s=(await nN()).transaction($u,"readwrite");await s.objectStore($u).put(e,sN(r)),await s.done}catch(t){if(t instanceof nr)ma.warn(t.message);else{const s=xi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ma.warn(s.message)}}}function sN(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3=1024,o3=30;class c3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new d3(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Ew();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:i}),this._heartbeatsCache.heartbeats.length>o3){const d=h3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ma.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Ew(),{heartbeatsToSend:s,unsentEntries:i}=u3(this._heartbeatsCache.heartbeats),c=U2(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return ma.warn(t),""}}}function Ew(){return new Date().toISOString().substring(0,10)}function u3(r,e=l3){const t=[];let s=r.slice();for(const i of r){const c=t.find(d=>d.agent===i.agent);if(c){if(c.dates.push(i.date),Tw(t)>e){c.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Tw(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class d3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hx()?Y2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await i3(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Nw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Nw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Tw(r){return U2(JSON.stringify({version:2,heartbeats:r})).length}function h3(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f3(r){Or(new er("platform-logger",e=>new TI(e),"PRIVATE")),Or(new er("heartbeat",e=>new c3(e),"PRIVATE")),Ls(Ep,ww,r),Ls(Ep,ww,"esm2020"),Ls("fire-js","")}f3("");var m3="firebase",g3="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ls(m3,g3,"app");function rN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const p3=rN,aN=new kl("auth","Firebase",rN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf=new cm("@firebase/auth");function x3(r,...e){jf.logLevel<=et.WARN&&jf.warn(`Auth (${oc}): ${r}`,...e)}function rf(r,...e){jf.logLevel<=et.ERROR&&jf.error(`Auth (${oc}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(r,...e){throw mx(r,...e)}function Cr(r,...e){return mx(r,...e)}function iN(r,e,t){const s={...p3(),[e]:t};return new kl("auth","Firebase",s).create(e,{appName:r.name})}function ua(r){return iN(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mx(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return aN.create(r,...e)}function Ve(r,e,...t){if(!r)throw mx(e,...t)}function aa(r){const e="INTERNAL ASSERTION FAILED: "+r;throw rf(e),new Error(e)}function ga(r,e){r||aa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function y3(){return Sw()==="http:"||Sw()==="https:"}function Sw(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(y3()||K2()||"connection"in navigator)?navigator.onLine:!0}function v3(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t){this.shortDelay=e,this.longDelay=t,ga(t>e,"Short delay should be less than long delay!"),this.isMobile=GA()||KA()}get(){return b3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(r,e){ga(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;aa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;aa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;aa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],N3=new ud(3e4,6e4);function ya(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ba(r,e,t,s,i={}){return oN(r,i,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const f=cd({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const x={method:e,headers:g,...c};return $A()||(x.referrerPolicy="no-referrer"),r.emulatorConfig&&lc(r.emulatorConfig.host)&&(x.credentials="include"),lN.fetch()(await cN(r,r.config.apiHost,t,f),x)})}async function oN(r,e,t){r._canInitEmulator=!1;const s={...w3,...e};try{const i=new T3(r),c=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Xh(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const f=c.ok?d.errorMessage:d.error.message,[g,x]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xh(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Xh(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw Xh(r,"user-disabled",d);const v=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw iN(r,v,x);tr(r,v)}}catch(i){if(i instanceof nr)throw i;tr(r,"network-request-failed",{message:String(i)})}}async function dd(r,e,t,s,i={}){const c=await ba(r,e,t,s,i);return"mfaPendingCredential"in c&&tr(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function cN(r,e,t,s){const i=`${e}${t}?${s}`,c=r,d=c.config.emulator?gx(r.config,i):`${r.config.apiScheme}://${i}`;return _3.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function E3(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class T3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Cr(this.auth,"network-request-failed")),N3.get())})}}function Xh(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const i=Cr(r,e,s);return i.customData._tokenResponse=t,i}function jw(r){return r!==void 0&&r.enterprise!==void 0}class S3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return E3(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function j3(r,e){return ba(r,"GET","/v2/recaptchaConfig",ya(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A3(r,e){return ba(r,"POST","/v1/accounts:delete",e)}async function Af(r,e){return ba(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function I3(r,e=!1){const t=Qt(r),s=await t.getIdToken(e),i=px(s);Ve(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const c=typeof i.firebase=="object"?i.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:i,token:s,authTime:Cu(Qg(i.auth_time)),issuedAtTime:Cu(Qg(i.iat)),expirationTime:Cu(Qg(i.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Qg(r){return Number(r)*1e3}function px(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return rf("JWT malformed, contained fewer than 3 sections"),null;try{const i=B2(t);return i?JSON.parse(i):(rf("Failed to decode base64 JWT payload"),null)}catch(i){return rf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Aw(r){const e=px(r);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ku(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof nr&&C3(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function C3({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cu(this.lastLoginAt),this.creationTime=Cu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function If(r){var w;const e=r.auth,t=await r.getIdToken(),s=await Ku(r,Af(e,{idToken:t}));Ve(s==null?void 0:s.users.length,e,"internal-error");const i=s.users[0];r._notifyReloadListener(i);const c=(w=i.providerUserInfo)!=null&&w.length?uN(i.providerUserInfo):[],d=D3(r.providerData,c),f=r.isAnonymous,g=!(r.email&&i.passwordHash)&&!(d!=null&&d.length),x=f?g:!1,v={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:d,metadata:new Ap(i.createdAt,i.lastLoginAt),isAnonymous:x};Object.assign(r,v)}async function k3(r){const e=Qt(r);await If(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function D3(r,e){return[...r.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function uN(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O3(r,e){const t=await oN(r,{},async()=>{const s=cd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:c}=r.config,d=await cN(r,i,"/v1/token",`key=${c}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return r.emulatorConfig&&lc(r.emulatorConfig.host)&&(g.credentials="include"),lN.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function M3(r,e){return ba(r,"POST","/v2/accounts:revokeToken",ya(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Aw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const t=Aw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:i,expiresIn:c}=await O3(e,t);this.updateTokensAndExpiration(s,i,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:i,expirationTime:c}=t,d=new Vo;return s&&(Ve(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),i&&(Ve(typeof i=="string","internal-error",{appName:e}),d.accessToken=i),c&&(Ve(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vo,this.toJSON())}_performRefresh(){return aa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(r,e){Ve(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Zs{constructor({uid:e,auth:t,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new R3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ap(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ku(this,this.stsTokenManager.getToken(this.auth,e));return Ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return I3(this,e)}reload(){return k3(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await If(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vs(this.auth.app))return Promise.reject(ua(this.auth));const e=await this.getIdToken();return await Ku(this,A3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,i=t.email??void 0,c=t.phoneNumber??void 0,d=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,x=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:w,emailVerified:N,isAnonymous:C,providerData:M,stsTokenManager:J}=t;Ve(w&&J,e,"internal-error");const B=Vo.fromJSON(this.name,J);Ve(typeof w=="string",e,"internal-error"),si(s,e.name),si(i,e.name),Ve(typeof N=="boolean",e,"internal-error"),Ve(typeof C=="boolean",e,"internal-error"),si(c,e.name),si(d,e.name),si(f,e.name),si(g,e.name),si(x,e.name),si(v,e.name);const he=new Zs({uid:w,auth:e,email:i,emailVerified:N,displayName:s,isAnonymous:C,photoURL:d,phoneNumber:c,tenantId:f,stsTokenManager:B,createdAt:x,lastLoginAt:v});return M&&Array.isArray(M)&&(he.providerData=M.map(oe=>({...oe}))),g&&(he._redirectEventId=g),he}static async _fromIdTokenResponse(e,t,s=!1){const i=new Vo;i.updateFromServerResponse(t);const c=new Zs({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await If(c),c}static async _fromGetAccountInfoResponse(e,t,s){const i=t.users[0];Ve(i.localId!==void 0,"internal-error");const c=i.providerUserInfo!==void 0?uN(i.providerUserInfo):[],d=!(i.email&&i.passwordHash)&&!(c!=null&&c.length),f=new Vo;f.updateFromIdToken(s);const g=new Zs({uid:i.localId,auth:e,stsTokenManager:f,isAnonymous:d}),x={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Ap(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,x),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=new Map;function ia(r){ga(r instanceof Function,"Expected a class definition");let e=Iw.get(r);return e?(ga(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Iw.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}dN.type="NONE";const Cw=dN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(r,e,t){return`firebase:${r}:${e}:${t}`}class Po{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:i,name:c}=this.auth;this.fullUserKey=af(this.userKey,i.apiKey,c),this.fullPersistenceKey=af("persistence",i.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Af(this.auth,{idToken:e}).catch(()=>{});return t?Zs._fromGetAccountInfoResponse(this.auth,t,e):null}return Zs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Po(ia(Cw),e,s);const i=(await Promise.all(t.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let c=i[0]||ia(Cw);const d=af(s,e.config.apiKey,e.name);let f=null;for(const x of t)try{const v=await x._get(d);if(v){let w;if(typeof v=="string"){const N=await Af(e,{idToken:v}).catch(()=>{});if(!N)break;w=await Zs._fromGetAccountInfoResponse(e,N,v)}else w=Zs._fromJSON(e,v);x!==c&&(f=w),c=x;break}}catch{}const g=i.filter(x=>x._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Po(c,e,s):(c=g[0],f&&await c._set(d,f.toJSON()),await Promise.all(t.map(async x=>{if(x!==c)try{await x._remove(d)}catch{}})),new Po(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xN(e))return"Blackberry";if(yN(e))return"Webos";if(fN(e))return"Safari";if((e.includes("chrome/")||mN(e))&&!e.includes("edge/"))return"Chrome";if(pN(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function hN(r=dn()){return/firefox\//i.test(r)}function fN(r=dn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mN(r=dn()){return/crios\//i.test(r)}function gN(r=dn()){return/iemobile/i.test(r)}function pN(r=dn()){return/android/i.test(r)}function xN(r=dn()){return/blackberry/i.test(r)}function yN(r=dn()){return/webos/i.test(r)}function xx(r=dn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function V3(r=dn()){var e;return xx(r)&&!!((e=window.navigator)!=null&&e.standalone)}function P3(){return QA()&&document.documentMode===10}function bN(r=dn()){return xx(r)||pN(r)||yN(r)||xN(r)||/windows phone/i.test(r)||gN(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(r,e=[]){let t;switch(r){case"Browser":t=Rw(dn());break;case"Worker":t=`${Rw(dn())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${oc}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((d,f)=>{try{const g=e(c);d(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z3(r,e={}){return ba(r,"GET","/v2/passwordPolicy",ya(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3=6;class B3{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??U3,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,i,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,t,s,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kw(this),this.idTokenSubscription=new kw(this),this.beforeStateQueue=new L3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ia(t)),this._initializationPromise=this.queue(async()=>{var s,i,c;if(!this._deleted&&(this.persistenceManager=await Po.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Af(this,{idToken:e}),s=await Zs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(Vs(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(c=this.redirectUser)==null?void 0:c._redirectEventId,f=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===f)&&(g!=null&&g.user)&&(s=g.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(d){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await If(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=v3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vs(this.app))return Promise.reject(ua(this));const t=e?Qt(e):null;return t&&Ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vs(this.app)?Promise.reject(ua(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vs(this.app)?Promise.reject(ua(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ia(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await z3(this),t=new B3(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new kl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await M3(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ia(e)||this._popupRedirectResolver;Ve(t,this,"argument-error"),this.redirectPersistenceManager=await Po.create(this,[ia(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,i){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(f,this,"internal-error"),f.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,i);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Vs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&x3(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ji(r){return Qt(r)}class kw{constructor(e){this.auth=e,this.observer=null,this.addObserver=eI(t=>this.observer=t)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let um={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function F3(r){um=r}function wN(r){return um.loadJS(r)}function H3(){return um.recaptchaEnterpriseScript}function G3(){return um.gapiScript}function $3(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class K3{constructor(){this.enterprise=new Q3}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Q3{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const X3="recaptcha-enterprise",_N="NO_RECAPTCHA";class Y3{constructor(e){this.type=X3,this.auth=ji(e)}async verify(e="verify",t=!1){async function s(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,f)=>{j3(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const x=new S3(g);return c.tenantId==null?c._agentRecaptchaConfig=x:c._tenantRecaptchaConfigs[c.tenantId]=x,d(x.siteKey)}}).catch(g=>{f(g)})})}function i(c,d,f){const g=window.grecaptcha;jw(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(x=>{d(x)}).catch(()=>{d(_N)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new K3().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(f=>{if(!t&&jw(window.grecaptcha))i(f,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=H3();g.length!==0&&(g+=f),wN(g).then(()=>{i(f,c,d)}).catch(x=>{d(x)})}}).catch(f=>{d(f)})})}}async function Dw(r,e,t,s=!1,i=!1){const c=new Y3(r);let d;if(i)d=_N;else try{d=await c.verify(t)}catch{d=await c.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const g=f.phoneEnrollmentInfo.phoneNumber,x=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:x,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const g=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:d}):Object.assign(f,{captchaResponse:d}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Cf(r,e,t,s,i){var c;if((c=r._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await Dw(r,e,t,t==="getOobCode");return s(r,d)}else return s(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Dw(r,e,t,t==="getOobCode");return s(r,f)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J3(r,e){const t=Dl(r,"auth");if(t.isInitialized()){const i=t.getImmediate(),c=t.getOptions();if(_i(c,e??{}))return i;tr(i,"already-initialized")}return t.initialize({options:e})}function W3(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(ia);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Z3(r,e,t){const s=ji(r);Ve(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,c=NN(e),{host:d,port:f}=eC(e),g=f===null?"":`:${f}`,x={url:`${c}//${d}${g}/`},v=Object.freeze({host:d,port:f,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){Ve(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ve(_i(x,s.config.emulator)&&_i(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=x,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,lc(d)?(G2(`${c}//${d}${g}`),HA("Auth",!0)):tC()}function NN(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function eC(r){const e=NN(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const c=i[1];return{host:c,port:Ow(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:Ow(d)}}}function Ow(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function tC(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return aa("not implemented")}_getIdTokenResponse(e){return aa("not implemented")}_linkToIdToken(e,t){return aa("not implemented")}_getReauthenticationResolver(e){return aa("not implemented")}}async function nC(r,e){return ba(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sC(r,e){return dd(r,"POST","/v1/accounts:signInWithPassword",ya(r,e))}async function rC(r,e){return ba(r,"POST","/v1/accounts:sendOobCode",ya(r,e))}async function aC(r,e){return rC(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iC(r,e){return dd(r,"POST","/v1/accounts:signInWithEmailLink",ya(r,e))}async function lC(r,e){return dd(r,"POST","/v1/accounts:signInWithEmailLink",ya(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends yx{constructor(e,t,s,i=null){super("password",s),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Qu(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Qu(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cf(e,t,"signInWithPassword",sC);case"emailLink":return iC(e,{email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cf(e,s,"signUpPassword",nC);case"emailLink":return lC(e,{idToken:t,email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(r,e){return dd(r,"POST","/v1/accounts:signInWithIdp",ya(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC="http://localhost";class wl extends yx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):tr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i,...c}=t;if(!s||!i)return null;const d=new wl(s,i);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Lo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Lo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Lo(e,t)}buildRequest(){const e={requestUri:oC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=cd(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uC(r){const e=_u(Nu(r)).link,t=e?_u(Nu(e)).deep_link_id:null,s=_u(Nu(r)).deep_link_id;return(s?_u(Nu(s)).link:null)||s||t||e||r}class bx{constructor(e){const t=_u(Nu(e)),s=t.apiKey??null,i=t.oobCode??null,c=cC(t.mode??null);Ve(s&&i&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=uC(e);try{return new bx(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(){this.providerId=cc.PROVIDER_ID}static credential(e,t){return Qu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=bx.parseLink(t);return Ve(s,"argument-error"),Qu._fromEmailAndCode(e,s.code,s.tenantId)}}cc.PROVIDER_ID="password";cc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";cc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd extends EN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends hd{constructor(){super("facebook.com")}static credential(e){return wl._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oi.credential(e.oauthAccessToken)}catch{return null}}}oi.FACEBOOK_SIGN_IN_METHOD="facebook.com";oi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends hd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wl._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ci.credential(t,s)}catch{return null}}}ci.GOOGLE_SIGN_IN_METHOD="google.com";ci.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends hd{constructor(){super("github.com")}static credential(e){return wl._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.GITHUB_SIGN_IN_METHOD="github.com";ui.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends hd{constructor(){super("twitter.com")}static credential(e,t){return wl._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return di.credential(t,s)}catch{return null}}}di.TWITTER_SIGN_IN_METHOD="twitter.com";di.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dC(r,e){return dd(r,"POST","/v1/accounts:signUp",ya(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,i=!1){const c=await Zs._fromIdTokenResponse(e,s,i),d=Mw(s);return new _l({user:c,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const i=Mw(s);return new _l({user:e,providerId:i,_tokenResponse:s,operationType:t})}}function Mw(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf extends nr{constructor(e,t,s,i){super(t.code,t.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Rf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,i){return new Rf(e,t,s,i)}}function TN(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Rf._fromErrorAndOperation(r,c,e,s):c})}async function hC(r,e,t=!1){const s=await Ku(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return _l._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fC(r,e,t=!1){const{auth:s}=r;if(Vs(s.app))return Promise.reject(ua(s));const i="reauthenticate";try{const c=await Ku(r,TN(s,i,e,r),t);Ve(c.idToken,s,"internal-error");const d=px(c.idToken);Ve(d,s,"internal-error");const{sub:f}=d;return Ve(r.uid===f,s,"user-mismatch"),_l._forOperation(r,i,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&tr(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(r,e,t=!1){if(Vs(r.app))return Promise.reject(ua(r));const s="signIn",i=await TN(r,s,e),c=await _l._fromIdTokenResponse(r,s,i);return t||await r._updateCurrentUser(c.user),c}async function mC(r,e){return SN(ji(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jN(r){const e=ji(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gC(r,e,t){const s=ji(r);await Cf(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",aC)}async function pC(r,e,t){if(Vs(r.app))return Promise.reject(ua(r));const s=ji(r),d=await Cf(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&jN(r),g}),f=await _l._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(f.user),f}function xC(r,e,t){return Vs(r.app)?Promise.reject(ua(r)):mC(Qt(r),cc.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&jN(r),s})}function yC(r,e,t,s){return Qt(r).onIdTokenChanged(e,t,s)}function bC(r,e,t){return Qt(r).beforeAuthStateChanged(e,t)}function vC(r,e,t,s){return Qt(r).onAuthStateChanged(e,t,s)}function wC(r){return Qt(r).signOut()}const kf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(kf,"1"),this.storage.removeItem(kf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=1e3,NC=10;class IN extends AN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),i=this.localCache[t];s!==i&&e(t,i,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,f,g)=>{this.notifyListeners(d,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);P3()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,NC):i()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},_C)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}IN.type="LOCAL";const EC=IN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN extends AN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}CN.type="SESSION";const RN=CN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const s=new dm(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:i,data:c}=t.data,d=this.handlersMap[i];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const f=Array.from(d).map(async x=>x(t.origin,c)),g=await TC(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let c,d;return new Promise((f,g)=>{const x=vx("",20);i.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:i,onMessage(w){const N=w;if(N.data.eventId===x)switch(N.data.status){case"ack":clearTimeout(v),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),f(N.data.response);break;default:clearTimeout(v),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),i.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:x,data:t},[i.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(){return window}function jC(r){Rr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(){return typeof Rr().WorkerGlobalScope<"u"&&typeof Rr().importScripts=="function"}async function AC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function IC(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function CC(){return kN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN="firebaseLocalStorageDb",RC=1,Df="firebaseLocalStorage",ON="fbase_key";class fd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hm(r,e){return r.transaction([Df],e?"readwrite":"readonly").objectStore(Df)}function kC(){const r=indexedDB.deleteDatabase(DN);return new fd(r).toPromise()}function Ip(){const r=indexedDB.open(DN,RC);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Df,{keyPath:ON})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Df)?e(s):(s.close(),await kC(),e(await Ip()))})})}async function Vw(r,e,t){const s=hm(r,!0).put({[ON]:e,value:t});return new fd(s).toPromise()}async function DC(r,e){const t=hm(r,!1).get(e),s=await new fd(t).toPromise();return s===void 0?null:s.value}function Pw(r,e){const t=hm(r,!0).delete(e);return new fd(t).toPromise()}const OC=800,MC=3;class MN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ip(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>MC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dm._getInstance(CC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await AC(),!this.activeServiceWorker)return;this.sender=new SC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||IC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ip();return await Vw(e,kf,"1"),await Pw(e,kf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Vw(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>DC(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Pw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const c=hm(i,!1).getAll();return new fd(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:c}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(c)&&(this.notifyListeners(i,c),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),OC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}MN.type="LOCAL";const VC=MN;new ud(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(r,e){return e?ia(e):(Ve(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx extends yx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Lo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Lo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function LC(r){return SN(r.auth,new wx(r),r.bypassAuthState)}function zC(r){const{auth:e,user:t}=r;return Ve(t,e,"internal-error"),fC(t,new wx(r),r.bypassAuthState)}async function UC(r){const{auth:e,user:t}=r;return Ve(t,e,"internal-error"),hC(t,new wx(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,t,s,i,c=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:i,tenantId:c,error:d,type:f}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LC;case"linkViaPopup":case"linkViaRedirect":return UC;case"reauthViaPopup":case"reauthViaRedirect":return zC;default:tr(this.auth,"internal-error")}}resolve(e){ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=new ud(2e3,1e4);class Oo extends VN{constructor(e,t,s,i,c){super(e,t,i,c),this.provider=s,this.authWindow=null,this.pollId=null,Oo.currentPopupAction&&Oo.currentPopupAction.cancel(),Oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){ga(this.filter.length===1,"Popup operations only handle one event");const e=vx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BC.get())};e()}}Oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="pendingRedirect",lf=new Map;class FC extends VN{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=lf.get(this.auth._key());if(!e){try{const s=await HC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}lf.set(this.auth._key(),e)}return this.bypassAuthState||lf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HC(r,e){const t=KC(e),s=$C(r);if(!await s._isAvailable())return!1;const i=await s._get(t)==="true";return await s._remove(t),i}function GC(r,e){lf.set(r._key(),e)}function $C(r){return ia(r._redirectPersistence)}function KC(r){return af(qC,r.config.apiKey,r.name)}async function QC(r,e,t=!1){if(Vs(r.app))return Promise.reject(ua(r));const s=ji(r),i=PC(s,e),d=await new FC(s,i,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=600*1e3;class YC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!PN(e)){const i=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Cr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lw(e))}saveEventToCache(e){this.cachedEventUids.add(Lw(e)),this.lastProcessedEventTime=Date.now()}}function Lw(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function PN({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function JC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PN(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WC(r,e={}){return ba(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eR=/^https?/;async function tR(r){if(r.config.emulator)return;const{authorizedDomains:e}=await WC(r);for(const t of e)try{if(nR(t))return}catch{}tr(r,"unauthorized-domain")}function nR(r){const e=jp(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!eR.test(t))return!1;if(ZC.test(r))return s===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=new ud(3e4,6e4);function zw(){const r=Rr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function rR(r){return new Promise((e,t)=>{var i,c,d;function s(){zw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zw(),t(Cr(r,"network-request-failed"))},timeout:sR.get()})}if((c=(i=Rr().gapi)==null?void 0:i.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((d=Rr().gapi)!=null&&d.load)s();else{const f=$3("iframefcb");return Rr()[f]=()=>{gapi.load?s():t(Cr(r,"network-request-failed"))},wN(`${G3()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw of=null,e})}let of=null;function aR(r){return of=of||rR(r),of}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=new ud(5e3,15e3),lR="__/auth/iframe",oR="emulator/auth/iframe",cR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dR(r){const e=r.config;Ve(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?gx(e,oR):`https://${r.config.authDomain}/${lR}`,s={apiKey:e.apiKey,appName:r.name,v:oc},i=uR.get(r.config.apiHost);i&&(s.eid=i);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${cd(s).slice(1)}`}async function hR(r){const e=await aR(r),t=Rr().gapi;return Ve(t,r,"internal-error"),e.open({where:document.body,url:dR(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cR,dontclear:!0},s=>new Promise(async(i,c)=>{await s.restyle({setHideOnLeave:!1});const d=Cr(r,"network-request-failed"),f=Rr().setTimeout(()=>{c(d)},iR.get());function g(){Rr().clearTimeout(f),i(s)}s.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mR=500,gR=600,pR="_blank",xR="http://localhost";class Uw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yR(r,e,t,s=mR,i=gR){const c=Math.max((window.screen.availHeight-i)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...fR,width:s.toString(),height:i.toString(),top:c,left:d},x=dn().toLowerCase();t&&(f=mN(x)?pR:t),hN(x)&&(e=e||xR,g.scrollbars="yes");const v=Object.entries(g).reduce((N,[C,M])=>`${N}${C}=${M},`,"");if(V3(x)&&f!=="_self")return bR(e||"",f),new Uw(null);const w=window.open(e||"",f,v);Ve(w,r,"popup-blocked");try{w.focus()}catch{}return new Uw(w)}function bR(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="__/auth/handler",wR="emulator/auth/handler",_R=encodeURIComponent("fac");async function Bw(r,e,t,s,i,c){Ve(r.config.authDomain,r,"auth-domain-config-required"),Ve(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:oc,eventId:i};if(e instanceof EN){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",ZA(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))d[v]=w}if(e instanceof hd){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(d.scopes=v.join(","))}r.tenantId&&(d.tid=r.tenantId);const f=d;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const g=await r._getAppCheckToken(),x=g?`#${_R}=${encodeURIComponent(g)}`:"";return`${NR(r)}?${cd(f).slice(1)}${x}`}function NR({config:r}){return r.emulator?gx(r,wR):`https://${r.authDomain}/${vR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg="webStorageSupport";class ER{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RN,this._completeRedirectFn=QC,this._overrideRedirectResult=GC}async _openPopup(e,t,s,i){var d;ga((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const c=await Bw(e,t,s,jp(),i);return yR(e,c,vx())}async _openRedirect(e,t,s,i){await this._originValidation(e);const c=await Bw(e,t,s,jp(),i);return jC(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:c}=this.eventManagers[t];return i?Promise.resolve(i):(ga(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await hR(e),s=new YC(e);return t.register("authEvent",i=>(Ve(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Xg,{type:Xg},i=>{var d;const c=(d=i==null?void 0:i[0])==null?void 0:d[Xg];c!==void 0&&t(!!c),tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=tR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return bN()||fN()||xx()}}const TR=ER;var qw="@firebase/auth",Fw="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function AR(r){Or(new er("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:f}=s.options;Ve(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vN(r)},x=new q3(s,i,c,g);return W3(x,t),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Or(new er("auth-internal",e=>{const t=ji(e.getProvider("auth").getImmediate());return(s=>new SR(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ls(qw,Fw,jR(r)),Ls(qw,Fw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=300,CR=H2("authIdTokenMaxAge")||IR;let Hw=null;const RR=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>CR)return;const i=t==null?void 0:t.token;Hw!==i&&(Hw=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function kR(r=tN()){const e=Dl(r,"auth");if(e.isInitialized())return e.getImmediate();const t=J3(r,{popupRedirectResolver:TR,persistence:[VC,EC,RN]}),s=H2("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=RR(c.toString());bC(t,d,()=>d(t.currentUser)),yC(t,f=>d(f))}}const i=UA("auth");return i&&Z3(t,`http://${i}`),t}function DR(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}F3({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=i=>{const c=Cr("internal-error");c.customData=i,t(c)},s.type="text/javascript",s.charset="UTF-8",DR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});AR("Browser");var Gw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yi,LN;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,j){function A(){}A.prototype=j.prototype,S.F=j.prototype,S.prototype=new A,S.prototype.constructor=S,S.D=function(O,D,L){for(var I=Array(arguments.length-2),de=2;de<arguments.length;de++)I[de-2]=arguments[de];return j.prototype[D].apply(O,I)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,j,A){A||(A=0);const O=Array(16);if(typeof j=="string")for(var D=0;D<16;++D)O[D]=j.charCodeAt(A++)|j.charCodeAt(A++)<<8|j.charCodeAt(A++)<<16|j.charCodeAt(A++)<<24;else for(D=0;D<16;++D)O[D]=j[A++]|j[A++]<<8|j[A++]<<16|j[A++]<<24;j=S.g[0],A=S.g[1],D=S.g[2];let L=S.g[3],I;I=j+(L^A&(D^L))+O[0]+3614090360&4294967295,j=A+(I<<7&4294967295|I>>>25),I=L+(D^j&(A^D))+O[1]+3905402710&4294967295,L=j+(I<<12&4294967295|I>>>20),I=D+(A^L&(j^A))+O[2]+606105819&4294967295,D=L+(I<<17&4294967295|I>>>15),I=A+(j^D&(L^j))+O[3]+3250441966&4294967295,A=D+(I<<22&4294967295|I>>>10),I=j+(L^A&(D^L))+O[4]+4118548399&4294967295,j=A+(I<<7&4294967295|I>>>25),I=L+(D^j&(A^D))+O[5]+1200080426&4294967295,L=j+(I<<12&4294967295|I>>>20),I=D+(A^L&(j^A))+O[6]+2821735955&4294967295,D=L+(I<<17&4294967295|I>>>15),I=A+(j^D&(L^j))+O[7]+4249261313&4294967295,A=D+(I<<22&4294967295|I>>>10),I=j+(L^A&(D^L))+O[8]+1770035416&4294967295,j=A+(I<<7&4294967295|I>>>25),I=L+(D^j&(A^D))+O[9]+2336552879&4294967295,L=j+(I<<12&4294967295|I>>>20),I=D+(A^L&(j^A))+O[10]+4294925233&4294967295,D=L+(I<<17&4294967295|I>>>15),I=A+(j^D&(L^j))+O[11]+2304563134&4294967295,A=D+(I<<22&4294967295|I>>>10),I=j+(L^A&(D^L))+O[12]+1804603682&4294967295,j=A+(I<<7&4294967295|I>>>25),I=L+(D^j&(A^D))+O[13]+4254626195&4294967295,L=j+(I<<12&4294967295|I>>>20),I=D+(A^L&(j^A))+O[14]+2792965006&4294967295,D=L+(I<<17&4294967295|I>>>15),I=A+(j^D&(L^j))+O[15]+1236535329&4294967295,A=D+(I<<22&4294967295|I>>>10),I=j+(D^L&(A^D))+O[1]+4129170786&4294967295,j=A+(I<<5&4294967295|I>>>27),I=L+(A^D&(j^A))+O[6]+3225465664&4294967295,L=j+(I<<9&4294967295|I>>>23),I=D+(j^A&(L^j))+O[11]+643717713&4294967295,D=L+(I<<14&4294967295|I>>>18),I=A+(L^j&(D^L))+O[0]+3921069994&4294967295,A=D+(I<<20&4294967295|I>>>12),I=j+(D^L&(A^D))+O[5]+3593408605&4294967295,j=A+(I<<5&4294967295|I>>>27),I=L+(A^D&(j^A))+O[10]+38016083&4294967295,L=j+(I<<9&4294967295|I>>>23),I=D+(j^A&(L^j))+O[15]+3634488961&4294967295,D=L+(I<<14&4294967295|I>>>18),I=A+(L^j&(D^L))+O[4]+3889429448&4294967295,A=D+(I<<20&4294967295|I>>>12),I=j+(D^L&(A^D))+O[9]+568446438&4294967295,j=A+(I<<5&4294967295|I>>>27),I=L+(A^D&(j^A))+O[14]+3275163606&4294967295,L=j+(I<<9&4294967295|I>>>23),I=D+(j^A&(L^j))+O[3]+4107603335&4294967295,D=L+(I<<14&4294967295|I>>>18),I=A+(L^j&(D^L))+O[8]+1163531501&4294967295,A=D+(I<<20&4294967295|I>>>12),I=j+(D^L&(A^D))+O[13]+2850285829&4294967295,j=A+(I<<5&4294967295|I>>>27),I=L+(A^D&(j^A))+O[2]+4243563512&4294967295,L=j+(I<<9&4294967295|I>>>23),I=D+(j^A&(L^j))+O[7]+1735328473&4294967295,D=L+(I<<14&4294967295|I>>>18),I=A+(L^j&(D^L))+O[12]+2368359562&4294967295,A=D+(I<<20&4294967295|I>>>12),I=j+(A^D^L)+O[5]+4294588738&4294967295,j=A+(I<<4&4294967295|I>>>28),I=L+(j^A^D)+O[8]+2272392833&4294967295,L=j+(I<<11&4294967295|I>>>21),I=D+(L^j^A)+O[11]+1839030562&4294967295,D=L+(I<<16&4294967295|I>>>16),I=A+(D^L^j)+O[14]+4259657740&4294967295,A=D+(I<<23&4294967295|I>>>9),I=j+(A^D^L)+O[1]+2763975236&4294967295,j=A+(I<<4&4294967295|I>>>28),I=L+(j^A^D)+O[4]+1272893353&4294967295,L=j+(I<<11&4294967295|I>>>21),I=D+(L^j^A)+O[7]+4139469664&4294967295,D=L+(I<<16&4294967295|I>>>16),I=A+(D^L^j)+O[10]+3200236656&4294967295,A=D+(I<<23&4294967295|I>>>9),I=j+(A^D^L)+O[13]+681279174&4294967295,j=A+(I<<4&4294967295|I>>>28),I=L+(j^A^D)+O[0]+3936430074&4294967295,L=j+(I<<11&4294967295|I>>>21),I=D+(L^j^A)+O[3]+3572445317&4294967295,D=L+(I<<16&4294967295|I>>>16),I=A+(D^L^j)+O[6]+76029189&4294967295,A=D+(I<<23&4294967295|I>>>9),I=j+(A^D^L)+O[9]+3654602809&4294967295,j=A+(I<<4&4294967295|I>>>28),I=L+(j^A^D)+O[12]+3873151461&4294967295,L=j+(I<<11&4294967295|I>>>21),I=D+(L^j^A)+O[15]+530742520&4294967295,D=L+(I<<16&4294967295|I>>>16),I=A+(D^L^j)+O[2]+3299628645&4294967295,A=D+(I<<23&4294967295|I>>>9),I=j+(D^(A|~L))+O[0]+4096336452&4294967295,j=A+(I<<6&4294967295|I>>>26),I=L+(A^(j|~D))+O[7]+1126891415&4294967295,L=j+(I<<10&4294967295|I>>>22),I=D+(j^(L|~A))+O[14]+2878612391&4294967295,D=L+(I<<15&4294967295|I>>>17),I=A+(L^(D|~j))+O[5]+4237533241&4294967295,A=D+(I<<21&4294967295|I>>>11),I=j+(D^(A|~L))+O[12]+1700485571&4294967295,j=A+(I<<6&4294967295|I>>>26),I=L+(A^(j|~D))+O[3]+2399980690&4294967295,L=j+(I<<10&4294967295|I>>>22),I=D+(j^(L|~A))+O[10]+4293915773&4294967295,D=L+(I<<15&4294967295|I>>>17),I=A+(L^(D|~j))+O[1]+2240044497&4294967295,A=D+(I<<21&4294967295|I>>>11),I=j+(D^(A|~L))+O[8]+1873313359&4294967295,j=A+(I<<6&4294967295|I>>>26),I=L+(A^(j|~D))+O[15]+4264355552&4294967295,L=j+(I<<10&4294967295|I>>>22),I=D+(j^(L|~A))+O[6]+2734768916&4294967295,D=L+(I<<15&4294967295|I>>>17),I=A+(L^(D|~j))+O[13]+1309151649&4294967295,A=D+(I<<21&4294967295|I>>>11),I=j+(D^(A|~L))+O[4]+4149444226&4294967295,j=A+(I<<6&4294967295|I>>>26),I=L+(A^(j|~D))+O[11]+3174756917&4294967295,L=j+(I<<10&4294967295|I>>>22),I=D+(j^(L|~A))+O[2]+718787259&4294967295,D=L+(I<<15&4294967295|I>>>17),I=A+(L^(D|~j))+O[9]+3951481745&4294967295,S.g[0]=S.g[0]+j&4294967295,S.g[1]=S.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,S.g[2]=S.g[2]+D&4294967295,S.g[3]=S.g[3]+L&4294967295}s.prototype.v=function(S,j){j===void 0&&(j=S.length);const A=j-this.blockSize,O=this.C;let D=this.h,L=0;for(;L<j;){if(D==0)for(;L<=A;)i(this,S,L),L+=this.blockSize;if(typeof S=="string"){for(;L<j;)if(O[D++]=S.charCodeAt(L++),D==this.blockSize){i(this,O),D=0;break}}else for(;L<j;)if(O[D++]=S[L++],D==this.blockSize){i(this,O),D=0;break}}this.h=D,this.o+=j},s.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var j=1;j<S.length-8;++j)S[j]=0;j=this.o*8;for(var A=S.length-8;A<S.length;++A)S[A]=j&255,j/=256;for(this.v(S),S=Array(16),j=0,A=0;A<4;++A)for(let O=0;O<32;O+=8)S[j++]=this.g[A]>>>O&255;return S};function c(S,j){var A=f;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=j(S)}function d(S,j){this.h=j;const A=[];let O=!0;for(let D=S.length-1;D>=0;D--){const L=S[D]|0;O&&L==j||(A[D]=L,O=!1)}this.g=A}var f={};function g(S){return-128<=S&&S<128?c(S,function(j){return new d([j|0],j<0?-1:0)}):new d([S|0],S<0?-1:0)}function x(S){if(isNaN(S)||!isFinite(S))return w;if(S<0)return B(x(-S));const j=[];let A=1;for(let O=0;S>=A;O++)j[O]=S/A|0,A*=4294967296;return new d(j,0)}function v(S,j){if(S.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(S.charAt(0)=="-")return B(v(S.substring(1),j));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=x(Math.pow(j,8));let O=w;for(let L=0;L<S.length;L+=8){var D=Math.min(8,S.length-L);const I=parseInt(S.substring(L,L+D),j);D<8?(D=x(Math.pow(j,D)),O=O.j(D).add(x(I))):(O=O.j(A),O=O.add(x(I)))}return O}var w=g(0),N=g(1),C=g(16777216);r=d.prototype,r.m=function(){if(J(this))return-B(this).m();let S=0,j=1;for(let A=0;A<this.g.length;A++){const O=this.i(A);S+=(O>=0?O:4294967296+O)*j,j*=4294967296}return S},r.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(M(this))return"0";if(J(this))return"-"+B(this).toString(S);const j=x(Math.pow(S,6));var A=this;let O="";for(;;){const D=_e(A,j).g;A=he(A,D.j(j));let L=((A.g.length>0?A.g[0]:A.h)>>>0).toString(S);if(A=D,M(A))return L+O;for(;L.length<6;)L="0"+L;O=L+O}},r.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function M(S){if(S.h!=0)return!1;for(let j=0;j<S.g.length;j++)if(S.g[j]!=0)return!1;return!0}function J(S){return S.h==-1}r.l=function(S){return S=he(this,S),J(S)?-1:M(S)?0:1};function B(S){const j=S.g.length,A=[];for(let O=0;O<j;O++)A[O]=~S.g[O];return new d(A,~S.h).add(N)}r.abs=function(){return J(this)?B(this):this},r.add=function(S){const j=Math.max(this.g.length,S.g.length),A=[];let O=0;for(let D=0;D<=j;D++){let L=O+(this.i(D)&65535)+(S.i(D)&65535),I=(L>>>16)+(this.i(D)>>>16)+(S.i(D)>>>16);O=I>>>16,L&=65535,I&=65535,A[D]=I<<16|L}return new d(A,A[A.length-1]&-2147483648?-1:0)};function he(S,j){return S.add(B(j))}r.j=function(S){if(M(this)||M(S))return w;if(J(this))return J(S)?B(this).j(B(S)):B(B(this).j(S));if(J(S))return B(this.j(B(S)));if(this.l(C)<0&&S.l(C)<0)return x(this.m()*S.m());const j=this.g.length+S.g.length,A=[];for(var O=0;O<2*j;O++)A[O]=0;for(O=0;O<this.g.length;O++)for(let D=0;D<S.g.length;D++){const L=this.i(O)>>>16,I=this.i(O)&65535,de=S.i(D)>>>16,ge=S.i(D)&65535;A[2*O+2*D]+=I*ge,oe(A,2*O+2*D),A[2*O+2*D+1]+=L*ge,oe(A,2*O+2*D+1),A[2*O+2*D+1]+=I*de,oe(A,2*O+2*D+1),A[2*O+2*D+2]+=L*de,oe(A,2*O+2*D+2)}for(S=0;S<j;S++)A[S]=A[2*S+1]<<16|A[2*S];for(S=j;S<2*j;S++)A[S]=0;return new d(A,0)};function oe(S,j){for(;(S[j]&65535)!=S[j];)S[j+1]+=S[j]>>>16,S[j]&=65535,j++}function le(S,j){this.g=S,this.h=j}function _e(S,j){if(M(j))throw Error("division by zero");if(M(S))return new le(w,w);if(J(S))return j=_e(B(S),j),new le(B(j.g),B(j.h));if(J(j))return j=_e(S,B(j)),new le(B(j.g),j.h);if(S.g.length>30){if(J(S)||J(j))throw Error("slowDivide_ only works with positive integers.");for(var A=N,O=j;O.l(S)<=0;)A=me(A),O=me(O);var D=G(A,1),L=G(O,1);for(O=G(O,2),A=G(A,2);!M(O);){var I=L.add(O);I.l(S)<=0&&(D=D.add(A),L=I),O=G(O,1),A=G(A,1)}return j=he(S,D.j(j)),new le(D,j)}for(D=w;S.l(j)>=0;){for(A=Math.max(1,Math.floor(S.m()/j.m())),O=Math.ceil(Math.log(A)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),L=x(A),I=L.j(j);J(I)||I.l(S)>0;)A-=O,L=x(A),I=L.j(j);M(L)&&(L=N),D=D.add(L),S=he(S,I)}return new le(D,S)}r.B=function(S){return _e(this,S).h},r.and=function(S){const j=Math.max(this.g.length,S.g.length),A=[];for(let O=0;O<j;O++)A[O]=this.i(O)&S.i(O);return new d(A,this.h&S.h)},r.or=function(S){const j=Math.max(this.g.length,S.g.length),A=[];for(let O=0;O<j;O++)A[O]=this.i(O)|S.i(O);return new d(A,this.h|S.h)},r.xor=function(S){const j=Math.max(this.g.length,S.g.length),A=[];for(let O=0;O<j;O++)A[O]=this.i(O)^S.i(O);return new d(A,this.h^S.h)};function me(S){const j=S.g.length+1,A=[];for(let O=0;O<j;O++)A[O]=S.i(O)<<1|S.i(O-1)>>>31;return new d(A,S.h)}function G(S,j){const A=j>>5;j%=32;const O=S.g.length-A,D=[];for(let L=0;L<O;L++)D[L]=j>0?S.i(L+A)>>>j|S.i(L+A+1)<<32-j:S.i(L+A);return new d(D,S.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,LN=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=x,d.fromString=v,yi=d}).apply(typeof Gw<"u"?Gw:typeof self<"u"?self:typeof window<"u"?window:{});var Yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zN,Eu,UN,cf,Cp,BN,qN,FN;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yh=="object"&&Yh];for(var y=0;y<h.length;++y){var _=h[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function i(h,y){if(y)e:{var _=s;h=h.split(".");for(var T=0;T<h.length-1;T++){var $=h[T];if(!($ in _))break e;_=_[$]}h=h[h.length-1],T=_[h],y=y(T),y!=T&&y!=null&&e(_,h,{configurable:!0,writable:!0,value:y})}}i("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(h){return h||function(y){var _=[],T;for(T in y)Object.prototype.hasOwnProperty.call(y,T)&&_.push([T,y[T]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function f(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,_){return h.call.apply(h.bind,arguments)}function x(h,y,_){return x=g,x.apply(null,arguments)}function v(h,y){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),h.apply(this,T)}}function w(h,y){function _(){}_.prototype=y.prototype,h.Z=y.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(T,$,Y){for(var be=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)be[Fe-2]=arguments[Fe];return y.prototype[$].apply(T,be)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function C(h){const y=h.length;if(y>0){const _=Array(y);for(let T=0;T<y;T++)_[T]=h[T];return _}return[]}function M(h,y){for(let T=1;T<arguments.length;T++){const $=arguments[T];var _=typeof $;if(_=_!="object"?_:$?Array.isArray($)?"array":_:"null",_=="array"||_=="object"&&typeof $.length=="number"){_=h.length||0;const Y=$.length||0;h.length=_+Y;for(let be=0;be<Y;be++)h[_+be]=$[be]}else h.push($)}}class J{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function B(h){d.setTimeout(()=>{throw h},0)}function he(){var h=S;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class oe{constructor(){this.h=this.g=null}add(y,_){const T=le.get();T.set(y,_),this.h?this.h.next=T:this.g=T,this.h=T}}var le=new J(()=>new _e,h=>h.reset());class _e{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let me,G=!1,S=new oe,j=()=>{const h=Promise.resolve(void 0);me=()=>{h.then(A)}};function A(){for(var h;h=he();){try{h.h.call(h.g)}catch(_){B(_)}var y=le;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}G=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};d.addEventListener("test",_,y),d.removeEventListener("test",_,y)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function de(h,y){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}w(de,D),de.prototype.init=function(h,y){const _=this.type=h.type,T=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(_=="mouseover"?y=h.fromElement:_=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&de.Z.h.call(this)},de.prototype.h=function(){de.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ge="closure_listenable_"+(Math.random()*1e6|0),F=0;function ce(h,y,_,T,$){this.listener=h,this.proxy=null,this.src=y,this.type=_,this.capture=!!T,this.ha=$,this.key=++F,this.da=this.fa=!1}function Z(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function se(h,y,_){for(const T in h)y.call(_,h[T],T,h)}function Se(h,y){for(const _ in h)y.call(void 0,h[_],_,h)}function k(h){const y={};for(const _ in h)y[_]=h[_];return y}const U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(h,y){let _,T;for(let $=1;$<arguments.length;$++){T=arguments[$];for(_ in T)h[_]=T[_];for(let Y=0;Y<U.length;Y++)_=U[Y],Object.prototype.hasOwnProperty.call(T,_)&&(h[_]=T[_])}}function ee(h){this.src=h,this.g={},this.h=0}ee.prototype.add=function(h,y,_,T,$){const Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);const be=Oe(h,y,T,$);return be>-1?(y=h[be],_||(y.fa=!1)):(y=new ce(y,this.src,Y,!!T,$),y.fa=_,h.push(y)),y};function ve(h,y){const _=y.type;if(_ in h.g){var T=h.g[_],$=Array.prototype.indexOf.call(T,y,void 0),Y;(Y=$>=0)&&Array.prototype.splice.call(T,$,1),Y&&(Z(y),h.g[_].length==0&&(delete h.g[_],h.h--))}}function Oe(h,y,_,T){for(let $=0;$<h.length;++$){const Y=h[$];if(!Y.da&&Y.listener==y&&Y.capture==!!_&&Y.ha==T)return $}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),at={};function Re(h,y,_,T,$){if(Array.isArray(y)){for(let Y=0;Y<y.length;Y++)Re(h,y[Y],_,T,$);return null}return _=Vr(_),h&&h[ge]?h.J(y,_,f(T)?!!T.capture:!1,$):Nt(h,y,_,!1,T,$)}function Nt(h,y,_,T,$,Y){if(!y)throw Error("Invalid event type");const be=f($)?!!$.capture:!!$;let Fe=_s(h);if(Fe||(h[Ue]=Fe=new ee(h)),_=Fe.add(y,_,T,be,Y),_.proxy)return _;if(T=gt(),_.proxy=T,T.src=h,T.listener=_,h.addEventListener)L||($=be),$===void 0&&($=!1),h.addEventListener(y.toString(),T,$);else if(h.attachEvent)h.attachEvent(wn(y.toString()),T);else if(h.addListener&&h.removeListener)h.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function gt(){function h(_){return y.call(h.src,h.listener,_)}const y=ws;return h}function Rt(h,y,_,T,$){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)Rt(h,y[Y],_,T,$);else T=f(T)?!!T.capture:!!T,_=Vr(_),h&&h[ge]?(h=h.i,Y=String(y).toString(),Y in h.g&&(y=h.g[Y],_=Oe(y,_,T,$),_>-1&&(Z(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete h.g[Y],h.h--)))):h&&(h=_s(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Oe(y,_,T,$)),(_=h>-1?y[h]:null)&&lt(_))}function lt(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[ge])ve(y.i,h);else{var _=h.type,T=h.proxy;y.removeEventListener?y.removeEventListener(_,T,h.capture):y.detachEvent?y.detachEvent(wn(_),T):y.addListener&&y.removeListener&&y.removeListener(T),(_=_s(y))?(ve(_,h),_.h==0&&(_.src=null,y[Ue]=null)):Z(h)}}}function wn(h){return h in at?at[h]:at[h]="on"+h}function ws(h,y){if(h.da)h=!0;else{y=new de(y,this);const _=h.listener,T=h.ha||h.src;h.fa&&lt(h),h=_.call(T,y)}return h}function _s(h){return h=h[Ue],h instanceof ee?h:null}var ar="__closure_events_fn_"+(Math.random()*1e9>>>0);function Vr(h){return typeof h=="function"?h:(h[ar]||(h[ar]=function(y){return h.handleEvent(y)}),h[ar])}function Ot(){O.call(this),this.i=new ee(this),this.M=this,this.G=null}w(Ot,O),Ot.prototype[ge]=!0,Ot.prototype.removeEventListener=function(h,y,_,T){Rt(this,h,y,_,T)};function Mt(h,y){var _,T=h.G;if(T)for(_=[];T;T=T.G)_.push(T);if(h=h.M,T=y.type||y,typeof y=="string")y=new D(y,h);else if(y instanceof D)y.target=y.target||h;else{var $=y;y=new D(T,h),z(y,$)}$=!0;let Y,be;if(_)for(be=_.length-1;be>=0;be--)Y=y.g=_[be],$=fn(Y,T,!0,y)&&$;if(Y=y.g=h,$=fn(Y,T,!0,y)&&$,$=fn(Y,T,!1,y)&&$,_)for(be=0;be<_.length;be++)Y=y.g=_[be],$=fn(Y,T,!1,y)&&$}Ot.prototype.N=function(){if(Ot.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const _=h.g[y];for(let T=0;T<_.length;T++)Z(_[T]);delete h.g[y],h.h--}}this.G=null},Ot.prototype.J=function(h,y,_,T){return this.i.add(String(h),y,!1,_,T)},Ot.prototype.K=function(h,y,_,T){return this.i.add(String(h),y,!0,_,T)};function fn(h,y,_,T){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let $=!0;for(let Y=0;Y<y.length;++Y){const be=y[Y];if(be&&!be.da&&be.capture==_){const Fe=be.listener,Xt=be.ha||be.src;be.fa&&ve(h.i,be),$=Fe.call(Xt,T)!==!1&&$}}return $&&!T.defaultPrevented}function _a(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:d.setTimeout(h,y||0)}function Na(h){h.g=_a(()=>{h.g=null,h.i&&(h.i=!1,Na(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Vt extends O{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Na(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ns(h){O.call(this),this.h=h,this.g={}}w(Ns,O);var ir=[];function Pr(h){se(h.g,function(y,_){this.g.hasOwnProperty(_)&&lt(y)},h),h.g={}}Ns.prototype.N=function(){Ns.Z.N.call(this),Pr(this)},Ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _n=d.JSON.stringify,Ea=d.JSON.parse,Ta=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function ie(){}function Xe(){}var Be={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ye(){D.call(this,"d")}w(Ye,D);function Ut(){D.call(this,"c")}w(Ut,D);var nt={},Lr=null;function zn(){return Lr=Lr||new Ot}nt.Ia="serverreachability";function lr(h){D.call(this,nt.Ia,h)}w(lr,D);function Gn(h){const y=zn();Mt(y,new lr(y))}nt.STAT_EVENT="statevent";function ue(h,y){D.call(this,nt.STAT_EVENT,h),this.stat=y}w(ue,D);function we(h){const y=zn();Mt(y,new ue(y,h))}nt.Ja="timingevent";function Ie(h,y){D.call(this,nt.Ja,h),this.size=y}w(Ie,D);function ye(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Pe(){this.g=!0}Pe.prototype.ua=function(){this.g=!1};function Je(h,y,_,T,$,Y){h.info(function(){if(h.g)if(Y){var be="",Fe=Y.split("&");for(let ht=0;ht<Fe.length;ht++){var Xt=Fe[ht].split("=");if(Xt.length>1){const Pt=Xt[0];Xt=Xt[1];const js=Pt.split("_");be=js.length>=2&&js[1]=="type"?be+(Pt+"="+Xt+"&"):be+(Pt+"=redacted&")}}}else be=null;else be=Y;return"XMLHTTP REQ ("+T+") [attempt "+$+"]: "+y+`
`+_+`
`+be})}function At(h,y,_,T,$,Y,be){h.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+$+"]: "+y+`
`+_+`
`+Y+" "+be})}function ut(h,y,_,T){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Bt(h,_)+(T?" "+T:"")})}function dt(h,y){h.info(function(){return"TIMEOUT: "+y})}Pe.prototype.info=function(){};function Bt(h,y){if(!h.g)return y;if(!y)return null;try{const Y=JSON.parse(y);if(Y){for(h=0;h<Y.length;h++)if(Array.isArray(Y[h])){var _=Y[h];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var $=T[0];if($!="noop"&&$!="stop"&&$!="close")for(let be=1;be<T.length;be++)T[be]=""}}}}return _n(Y)}catch{return y}}var mn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ki={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xc;function Di(){}w(Di,ie),Di.prototype.g=function(){return new XMLHttpRequest},xc=new Di;function zr(h){return encodeURIComponent(String(h))}function Sd(h){var y=1;h=h.split(":");const _=[];for(;y>0&&h.length;)_.push(h.shift()),y--;return h.length&&_.push(h.join(":")),_}function qs(h,y,_,T){this.j=h,this.i=y,this.l=_,this.S=T||1,this.V=new Ns(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Fs}function Fs(){this.i=null,this.g="",this.h=!1}var en={},gn={};function or(h,y,_){h.M=1,h.A=Oi(nn(y)),h.u=_,h.R=!0,Vl(h,null)}function Vl(h,y){h.F=Date.now(),cr(h),h.B=nn(h.A);var _=h.B,T=h.S;Array.isArray(T)||(T=[String(T)]),Ul(_.i,"t",T),h.C=0,_=h.j.L,h.h=new Fs,h.g=Bd(h.j,_?y:null,!h.u),h.P>0&&(h.O=new Vt(x(h.Y,h,h.g),h.P)),y=h.V,_=h.g,T=h.ba;var $="readystatechange";Array.isArray($)||($&&(ir[0]=$.toString()),$=ir);for(let Y=0;Y<$.length;Y++){const be=Re(_,$[Y],T||y.handleEvent,!1,y.h||y);if(!be)break;y.g[be.key]=be}y=h.J?k(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Gn(),Je(h.i,h.v,h.B,h.l,h.S,h.u)}qs.prototype.ba=function(h){h=h.target;const y=this.O;y&&$s(h)==3?y.j():this.Y(h)},qs.prototype.Y=function(h){try{if(h==this.g)e:{const Fe=$s(this.g),Xt=this.g.ya(),ht=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||Nn(this.g)))){this.K||Fe!=4||Xt==7||(Xt==8||ht<=0?Gn(3):Gn(2)),ur(this);var y=this.g.ca();this.X=y;var _=qm(this);if(this.o=y==200,At(this.i,this.v,this.B,this.l,this.S,Fe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var T,$=this.g;if((T=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(T)){var Y=T;break t}}Y=null}if(h=Y)ut(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,dr(this,h);else{this.o=!1,this.m=3,we(12),is(this),Es(this);break e}}if(this.R){h=!0;let Pt;for(;!this.K&&this.C<_.length;)if(Pt=Ad(this,_),Pt==gn){Fe==4&&(this.m=4,we(14),h=!1),ut(this.i,this.l,null,"[Incomplete Response]");break}else if(Pt==en){this.m=4,we(15),ut(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else ut(this.i,this.l,Pt,null),dr(this,Pt);if(jd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||_.length!=0||this.h.h||(this.m=1,we(16),h=!1),this.o=this.o&&h,!h)ut(this.i,this.l,_,"[Invalid Chunked Response]"),is(this),Es(this);else if(_.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),kc(be),be.P=!0,we(11))}}else ut(this.i,this.l,_,null),dr(this,_);Fe==4&&is(this),this.o&&!this.K&&(Fe==4?Pd(this.j,this):(this.o=!1,cr(this)))}else Br(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,we(12)):(this.m=0,we(13)),is(this),Es(this)}}}catch{}finally{}};function qm(h){if(!jd(h))return h.g.la();const y=Nn(h.g);if(y==="")return"";let _="";const T=y.length,$=$s(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return is(h),Es(h),"";h.h.i=new d.TextDecoder}for(let Y=0;Y<T;Y++)h.h.h=!0,_+=h.h.i.decode(y[Y],{stream:!($&&Y==T-1)});return y.length=0,h.h.g+=_,h.C=0,h.h.g}function jd(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ad(h,y){var _=h.C,T=y.indexOf(`
`,_);return T==-1?gn:(_=Number(y.substring(_,T)),isNaN(_)?en:(T+=1,T+_>y.length?gn:(y=y.slice(T,T+_),h.C=T+_,y)))}qs.prototype.cancel=function(){this.K=!0,is(this)};function cr(h){h.T=Date.now()+h.H,Pl(h,h.H)}function Pl(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=ye(x(h.aa,h),y)}function ur(h){h.D&&(d.clearTimeout(h.D),h.D=null)}qs.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(dt(this.i,this.B),this.M!=2&&(Gn(),we(17)),is(this),this.m=2,Es(this)):Pl(this,this.T-h)};function Es(h){h.j.I==0||h.K||Pd(h.j,h)}function is(h){ur(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Pr(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function dr(h,y){try{var _=h.j;if(_.I!=0&&(_.g==h||fr(_.h,h))){if(!h.L&&fr(_.h,h)&&_.I==3){try{var T=_.Ba.g.parse(y)}catch{T=null}if(Array.isArray(T)&&T.length==3){var $=T;if($[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)Gl(_),Da(_);else break e;Bi(_),we(18)}}else _.xa=$[1],0<_.xa-_.K&&$[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=ye(x(_.Va,_),6e3));hr(_.h)<=1&&_.ta&&(_.ta=void 0)}else br(_,11)}else if((h.L||_.g==h)&&Gl(_),!I(y))for($=_.Ba.g.parse(y),y=0;y<$.length;y++){let ht=$[y];const Pt=ht[0];if(!(Pt<=_.K))if(_.K=Pt,ht=ht[1],_.I==2)if(ht[0]=="c"){_.M=ht[1],_.ba=ht[2];const js=ht[3];js!=null&&(_.ka=js,_.j.info("VER="+_.ka));const vr=ht[4];vr!=null&&(_.za=vr,_.j.info("SVER="+_.za));const Ks=ht[5];Ks!=null&&typeof Ks=="number"&&Ks>0&&(T=1.5*Ks,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const Qs=h.g;if(Qs){const qi=Qs.g?Qs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qi){var Y=T.h;Y.g||qi.indexOf("spdy")==-1&&qi.indexOf("quic")==-1&&qi.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(vc(Y,Y.h),Y.h=null))}if(T.G){const $l=Qs.g?Qs.g.getResponseHeader("X-HTTP-Session-Id"):null;$l&&(T.wa=$l,pt(T.J,T.G,$l))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var be=h;if(T.na=Ud(T,T.L?T.ba:null,T.W),be.L){wc(T.h,be);var Fe=be,Xt=T.O;Xt&&(Fe.H=Xt),Fe.D&&(ur(Fe),cr(Fe)),T.g=be}else Md(T);_.i.length>0&&yr(_)}else ht[0]!="stop"&&ht[0]!="close"||br(_,7);else _.I==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?br(_,7):Cc(_):ht[0]!="noop"&&_.l&&_.l.qa(ht),_.A=0)}}Gn(4)}catch{}}var tn=class{constructor(h,y){this.g=h,this.map=y}};function yc(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function bc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function hr(h){return h.h?1:h.g?h.g.size:0}function fr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function vc(h,y){h.g?h.g.add(y):h.h=y}function wc(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}yc.prototype.cancel=function(){if(this.i=_c(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function _c(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const _ of h.g.values())y=y.concat(_.G);return y}return C(h.i)}var Id=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ll(h,y){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const T=h[_].indexOf("=");let $,Y=null;T>=0?($=h[_].substring(0,T),Y=h[_].substring(T+1)):$=h[_],y($,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function ls(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof ls?(this.l=h.l,pn(this,h.j),this.o=h.o,this.g=h.g,Sa(this,h.u),this.h=h.h,Nc(this,Dd(h.i)),this.m=h.m):h&&(y=String(h).match(Id))?(this.l=!1,pn(this,y[1]||"",!0),this.o=mr(y[2]||""),this.g=mr(y[3]||"",!0),Sa(this,y[4]),this.h=mr(y[5]||"",!0),Nc(this,y[6]||"",!0),this.m=mr(y[7]||"")):(this.l=!1,this.i=new Aa(null,this.l))}ls.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Mi(y,zl,!0),":");var _=this.g;return(_||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Mi(y,zl,!0),"@"),h.push(zr(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(Mi(_,_.charAt(0)=="/"?Ec:Cd,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",Mi(_,Rd)),h.join("")},ls.prototype.resolve=function(h){const y=nn(this);let _=!!h.j;_?pn(y,h.j):_=!!h.o,_?y.o=h.o:_=!!h.g,_?y.g=h.g:_=h.u!=null;var T=h.h;if(_)Sa(y,h.u);else if(_=!!h.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var $=y.h.lastIndexOf("/");$!=-1&&(T=y.h.slice(0,$+1)+T)}if($=T,$==".."||$==".")T="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){T=$.lastIndexOf("/",0)==0,$=$.split("/");const Y=[];for(let be=0;be<$.length;){const Fe=$[be++];Fe=="."?T&&be==$.length&&Y.push(""):Fe==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),T&&be==$.length&&Y.push("")):(Y.push(Fe),T=!0)}T=Y.join("/")}else T=$}return _?y.h=T:_=h.i.toString()!=="",_?Nc(y,Dd(h.i)):_=!!h.m,_&&(y.m=h.m),y};function nn(h){return new ls(h)}function pn(h,y,_){h.j=_?mr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Sa(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Nc(h,y,_){y instanceof Aa?(h.i=y,Bl(h.i,h.l)):(_||(y=Mi(y,ja)),h.i=new Aa(y,h.l))}function pt(h,y,_){h.i.set(y,_)}function Oi(h){return pt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function mr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Mi(h,y,_){return typeof h=="string"?(h=encodeURI(h).replace(y,$n),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function $n(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var zl=/[#\/\?@]/g,Cd=/[#\?:]/g,Ec=/[#\?]/g,ja=/[#\?@]/g,Rd=/#/g;function Aa(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Kn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ll(h.i,function(y,_){h.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}r=Aa.prototype,r.add=function(h,y){Kn(this),this.i=null,h=Ia(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(y),this.h+=1,this};function kd(h,y){Kn(h),y=Ia(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Tc(h,y){return Kn(h),y=Ia(h,y),h.g.has(y)}r.forEach=function(h,y){Kn(this),this.g.forEach(function(_,T){_.forEach(function($){h.call(y,$,T,this)},this)},this)};function Sc(h,y){Kn(h);let _=[];if(typeof y=="string")Tc(h,y)&&(_=_.concat(h.g.get(Ia(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)_=_.concat(h[y]);return _}r.set=function(h,y){return Kn(this),this.i=null,h=Ia(this,h),Tc(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=Sc(this,h),h.length>0?String(h[0]):y):y};function Ul(h,y,_){kd(h,y),_.length>0&&(h.i=null,h.g.set(Ia(h,y),C(_)),h.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let T=0;T<y.length;T++){var _=y[T];const $=zr(_);_=Sc(this,_);for(let Y=0;Y<_.length;Y++){let be=$;_[Y]!==""&&(be+="="+zr(_[Y])),h.push(be)}}return this.i=h.join("&")};function Dd(h){const y=new Aa;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Ia(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Bl(h,y){y&&!h.j&&(Kn(h),h.i=null,h.g.forEach(function(_,T){const $=T.toLowerCase();T!=$&&(kd(this,T),Ul(this,$,_))},h)),h.j=y}function Hs(h,y){const _=new Pe;if(d.Image){const T=new Image;T.onload=v(Ts,_,"TestLoadImage: loaded",!0,y,T),T.onerror=v(Ts,_,"TestLoadImage: error",!1,y,T),T.onabort=v(Ts,_,"TestLoadImage: abort",!1,y,T),T.ontimeout=v(Ts,_,"TestLoadImage: timeout",!1,y,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=h}else y(!1)}function jc(h,y){const _=new Pe,T=new AbortController,$=setTimeout(()=>{T.abort(),Ts(_,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:T.signal}).then(Y=>{clearTimeout($),Y.ok?Ts(_,"TestPingServer: ok",!0,y):Ts(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout($),Ts(_,"TestPingServer: error",!1,y)})}function Ts(h,y,_,T,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),T(_)}catch{}}function Ca(){this.g=new Ta}function gr(h){this.i=h.Sb||null,this.h=h.ab||!1}w(gr,ie),gr.prototype.g=function(){return new Vi(this.i,this.h)};function Vi(h,y){Ot.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Vi,Ot),r=Vi.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Gs(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||d).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ra(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Gs(this)),this.g&&(this.readyState=3,Gs(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ql(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function ql(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Ra(this):Gs(this),this.readyState==3&&ql(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,Ra(this))},r.Na=function(h){this.g&&(this.response=h,Ra(this))},r.ga=function(){this.g&&Ra(this)};function Ra(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Gs(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=y.next();return h.join(`\r
`)};function Gs(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ss(h){let y="";return se(h,function(_,T){y+=T,y+=":",y+=_,y+=`\r
`}),y}function Pi(h,y,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=Ss(_),typeof h=="string"?_!=null&&zr(_):pt(h,y,_))}function Et(h){Ot.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(Et,Ot);var pr=/^https?$/i,Ac=["POST","PUT"];r=Et.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xc.g(),this.g.onreadystatechange=N(x(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Y){Li(this,Y);return}if(h=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var $ in T)_.set($,T[$]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const Y of T.keys())_.set(Y,T.get(Y));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(Y=>Y.toLowerCase()=="content-type"),$=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Ac,y,void 0)>=0)||T||$||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,be]of _)this.g.setRequestHeader(Y,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Y){Li(this,Y)}};function Li(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Ic(h),Ur(h)}function Ic(h){h.A||(h.A=!0,Mt(h,"complete"),Mt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Mt(this,"complete"),Mt(this,"abort"),Ur(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ur(this,!0)),Et.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?zi(this):this.Xa())},r.Xa=function(){zi(this)};function zi(h){if(h.h&&typeof c<"u"){if(h.v&&$s(h)==4)setTimeout(h.Ca.bind(h),0);else if(Mt(h,"readystatechange"),$s(h)==4){h.h=!1;try{const Y=h.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var T;if(T=Y===0){let be=String(h.D).match(Id)[1]||null;!be&&d.self&&d.self.location&&(be=d.self.location.protocol.slice(0,-1)),T=!pr.test(be?be.toLowerCase():"")}_=T}if(_)Mt(h,"complete"),Mt(h,"success");else{h.o=6;try{var $=$s(h)>2?h.g.statusText:""}catch{$=""}h.l=$+" ["+h.ca()+"]",Ic(h)}}finally{Ur(h)}}}}function Ur(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,y||Mt(h,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function $s(h){return h.g?h.g.readyState:0}r.ca=function(){try{return $s(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Ea(y)}};function Nn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Br(h){const y={};h=(h.g&&$s(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<h.length;T++){if(I(h[T]))continue;var _=Sd(h[T]);const $=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Y=y[$]||[];y[$]=Y,Y.push(_)}Se(y,function(T){return T.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xr(h,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||y}function ka(h){this.za=0,this.i=[],this.j=new Pe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xr("baseRetryDelayMs",5e3,h),this.Za=xr("retryDelaySeedMs",1e4,h),this.Ta=xr("forwardChannelMaxRetries",2,h),this.va=xr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new yc(h&&h.concurrentRequestLimit),this.Ba=new Ca,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=ka.prototype,r.ka=8,r.I=1,r.connect=function(h,y,_,T){we(0),this.W=h,this.H=y||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=Ud(this,null,this.W),yr(this)};function Cc(h){if(Fl(h),h.I==3){var y=h.V++,_=nn(h.J);if(pt(_,"SID",h.M),pt(_,"RID",y),pt(_,"TYPE","terminate"),Ui(h,_),y=new qs(h,h.j,y),y.M=2,y.A=Oi(nn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=y.A,_=!0),_||(y.g=Bd(y.j,null),y.g.ea(y.A)),y.F=Date.now(),cr(y)}zd(h)}function Da(h){h.g&&(kc(h),h.g.cancel(),h.g=null)}function Fl(h){Da(h),h.v&&(d.clearTimeout(h.v),h.v=null),Gl(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function yr(h){if(!bc(h.h)&&!h.m){h.m=!0;var y=h.Ea;me||j(),G||(me(),G=!0),S.add(y,h),h.D=0}}function Hl(h,y){return hr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=ye(x(h.Ea,h,y),Ld(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const $=new qs(this,this.j,h);let Y=this.o;if(this.U&&(Y?(Y=k(Y),z(Y,this.U)):Y=this.U),this.u!==null||this.R||($.J=Y,Y=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(y+=T,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Od(this,$,y),_=nn(this.J),pt(_,"RID",h),pt(_,"CVER",22),this.G&&pt(_,"X-HTTP-Session-Id",this.G),Ui(this,_),Y&&(this.R?y="headers="+zr(Ss(Y))+"&"+y:this.u&&Pi(_,this.u,Y)),vc(this.h,$),this.Ra&&pt(_,"TYPE","init"),this.S?(pt(_,"$req",y),pt(_,"SID","null"),$.U=!0,or($,_,null)):or($,_,y),this.I=2}}else this.I==3&&(h?Rc(this,h):this.i.length==0||bc(this.h)||Rc(this))};function Rc(h,y){var _;y?_=y.l:_=h.V++;const T=nn(h.J);pt(T,"SID",h.M),pt(T,"RID",_),pt(T,"AID",h.K),Ui(h,T),h.u&&h.o&&Pi(T,h.u,h.o),_=new qs(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Od(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),vc(h.h,_),or(_,T,y)}function Ui(h,y){h.H&&se(h.H,function(_,T){pt(y,T,_)}),h.l&&se({},function(_,T){pt(y,T,_)})}function Od(h,y,_){_=Math.min(h.i.length,_);const T=h.l?x(h.l.Ka,h.l,h):null;e:{var $=h.i;let Fe=-1;for(;;){const Xt=["count="+_];Fe==-1?_>0?(Fe=$[0].g,Xt.push("ofs="+Fe)):Fe=0:Xt.push("ofs="+Fe);let ht=!0;for(let Pt=0;Pt<_;Pt++){var Y=$[Pt].g;const js=$[Pt].map;if(Y-=Fe,Y<0)Fe=Math.max(0,$[Pt].g-100),ht=!1;else try{Y="req"+Y+"_"||"";try{var be=js instanceof Map?js:Object.entries(js);for(const[vr,Ks]of be){let Qs=Ks;f(Ks)&&(Qs=_n(Ks)),Xt.push(Y+vr+"="+encodeURIComponent(Qs))}}catch(vr){throw Xt.push(Y+"type="+encodeURIComponent("_badmap")),vr}}catch{T&&T(js)}}if(ht){be=Xt.join("&");break e}}be=void 0}return h=h.i.splice(0,_),y.G=h,be}function Md(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;me||j(),G||(me(),G=!0),S.add(y,h),h.A=0}}function Bi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=ye(x(h.Da,h),Ld(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,Vd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=ye(x(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,we(10),Da(this),Vd(this))};function kc(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Vd(h){h.g=new qs(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=nn(h.na);pt(y,"RID","rpc"),pt(y,"SID",h.M),pt(y,"AID",h.K),pt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&pt(y,"TO",h.ia),pt(y,"TYPE","xmlhttp"),Ui(h,y),h.u&&h.o&&Pi(y,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=Oi(nn(y)),_.u=null,_.R=!0,Vl(_,h)}r.Va=function(){this.C!=null&&(this.C=null,Da(this),Bi(this),we(19))};function Gl(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Pd(h,y){var _=null;if(h.g==y){Gl(h),kc(h),h.g=null;var T=2}else if(fr(h.h,y))_=y.G,wc(h.h,y),T=1;else return;if(h.I!=0){if(y.o)if(T==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var $=h.D;T=zn(),Mt(T,new Ie(T,_)),yr(h)}else Md(h);else if($=y.m,$==3||$==0&&y.X>0||!(T==1&&Hl(h,y)||T==2&&Bi(h)))switch(_&&_.length>0&&(y=h.h,y.i=y.i.concat(_)),$){case 1:br(h,5);break;case 4:br(h,10);break;case 3:br(h,6);break;default:br(h,2)}}}function Ld(h,y){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*y}function br(h,y){if(h.j.info("Error code "+y),y==2){var _=x(h.bb,h),T=h.Ua;const $=!T;T=new ls(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||pn(T,"https"),Oi(T),$?Hs(T.toString(),_):jc(T.toString(),_)}else we(2);h.I=0,h.l&&h.l.pa(y),zd(h),Fl(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),we(2)):(this.j.info("Failed to ping google.com"),we(1))};function zd(h){if(h.I=0,h.ja=[],h.l){const y=_c(h.h);(y.length!=0||h.i.length!=0)&&(M(h.ja,y),M(h.ja,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.oa()}}function Ud(h,y,_){var T=_ instanceof ls?nn(_):new ls(_);if(T.g!="")y&&(T.g=y+"."+T.g),Sa(T,T.u);else{var $=d.location;T=$.protocol,y=y?y+"."+$.hostname:$.hostname,$=+$.port;const Y=new ls(null);T&&pn(Y,T),y&&(Y.g=y),$&&Sa(Y,$),_&&(Y.h=_),T=Y}return _=h.G,y=h.wa,_&&y&&pt(T,_,y),pt(T,"VER",h.ka),Ui(h,T),T}function Bd(h,y,_){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Et(new gr({ab:_})):new Et(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function qd(){}r=qd.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Oa(){}Oa.prototype.g=function(h,y){return new Un(h,y)};function Un(h,y){Ot.call(this),this.g=new ka(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!I(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new qr(this)}w(Un,Ot),Un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){Cc(this.g)},Un.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=_n(h),h=_);y.i.push(new tn(y.Ya++,h)),y.I==3&&yr(y)},Un.prototype.N=function(){this.g.l=null,delete this.j,Cc(this.g),delete this.g,Un.Z.N.call(this)};function Fd(h){Ye.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const _ in y){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}w(Fd,Ye);function Hd(){Ut.call(this),this.status=1}w(Hd,Ut);function qr(h){this.g=h}w(qr,qd),qr.prototype.ra=function(){Mt(this.g,"a")},qr.prototype.qa=function(h){Mt(this.g,new Fd(h))},qr.prototype.pa=function(h){Mt(this.g,new Hd)},qr.prototype.oa=function(){Mt(this.g,"b")},Oa.prototype.createWebChannel=Oa.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,FN=function(){return new Oa},qN=function(){return zn()},BN=nt,Cp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},mn.NO_ERROR=0,mn.TIMEOUT=8,mn.HTTP_ERROR=6,cf=mn,ki.COMPLETE="complete",UN=ki,Xe.EventType=Be,Be.OPEN="a",Be.CLOSE="b",Be.ERROR="c",Be.MESSAGE="d",Ot.prototype.listen=Ot.prototype.J,Eu=Xe,Et.prototype.listenOnce=Et.prototype.K,Et.prototype.getLastError=Et.prototype.Ha,Et.prototype.getLastErrorCode=Et.prototype.ya,Et.prototype.getStatus=Et.prototype.ca,Et.prototype.getResponseJson=Et.prototype.La,Et.prototype.getResponseText=Et.prototype.la,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Fa,zN=Et}).apply(typeof Yh<"u"?Yh:typeof self<"u"?self:typeof window<"u"?window:{});const $w="@firebase/firestore",Kw="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kn.UNAUTHENTICATED=new kn(null),kn.GOOGLE_CREDENTIALS=new kn("google-credentials-uid"),kn.FIRST_PARTY=new kn("first-party-uid"),kn.MOCK_USER=new kn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl=new cm("@firebase/firestore");function Io(){return Nl.logLevel}function fe(r,...e){if(Nl.logLevel<=et.DEBUG){const t=e.map(_x);Nl.debug(`Firestore (${uc}): ${r}`,...t)}}function Wt(r,...e){if(Nl.logLevel<=et.ERROR){const t=e.map(_x);Nl.error(`Firestore (${uc}): ${r}`,...t)}}function Xu(r,...e){if(Nl.logLevel<=et.WARN){const t=e.map(_x);Nl.warn(`Firestore (${uc}): ${r}`,...t)}}function _x(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,HN(r,s,t)}function HN(r,e,t){let s=`FIRESTORE (${uc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Wt(s),new Error(s)}function Ce(r,e,t,s){let i="Unexpected state";typeof t=="string"?i=t:s=t,r||HN(e,i,s)}function je(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends nr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(kn.UNAUTHENTICATED)))}shutdown(){}}class VR{constructor(e){this.t=e,this.currentUser=kn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ce(this.o===void 0,42304);let s=this.i;const i=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let c=new zs;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new zs,e.enqueueRetryable((()=>i(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await i(this.currentUser)}))},f=g=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new zs)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ce(typeof s.accessToken=="string",31837,{l:s}),new OR(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new kn(e)}}class PR{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=kn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class LR{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new PR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(kn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Qw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ce(this.o===void 0,3512);const s=c=>{c.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,fe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const i=c=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>i(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?i(c):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Qw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ce(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Qw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=UR(40);for(let c=0;c<i.length;++c)s.length<20&&i[c]<t&&(s+=e.charAt(i[c]%62))}return s}}function ze(r,e){return r<e?-1:r>e?1:0}function Rp(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const i=r.charAt(s),c=e.charAt(s);if(i!==c)return Yg(i)===Yg(c)?ze(i,c):Yg(i)?1:-1}return ze(r.length,e.length)}const BR=55296,qR=57343;function Yg(r){const e=r.charCodeAt(0);return e>=BR&&e<=qR}function Bo(r,e,t){return r.length===e.length&&r.every(((s,i)=>t(s,e[i])))}function GN(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw="__name__";class Tr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ee(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Tr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Tr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let i=0;i<s;i++){const c=Tr.compareSegments(e.get(i),t.get(i));if(c!==0)return c}return ze(e.length,t.length)}static compareSegments(e,t){const s=Tr.isNumericId(e),i=Tr.isNumericId(t);return s&&!i?-1:!s&&i?1:s&&i?Tr.extractNumericId(e).compare(Tr.extractNumericId(t)):Rp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yi.fromString(e.substring(4,e.length-2))}}class mt extends Tr{construct(e,t,s){return new mt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new xe(te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((i=>i.length>0)))}return new mt(t)}static emptyPath(){return new mt([])}}const FR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends Tr{construct(e,t,s){return new Ft(e,t,s)}static isValidIdentifier(e){return FR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Xw}static keyField(){return new Ft([Xw])}static fromServerFormat(e){const t=[];let s="",i=0;const c=()=>{if(s.length===0)throw new xe(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;i<e.length;){const f=e[i];if(f==="\\"){if(i+1===e.length)throw new xe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new xe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,i+=2}else f==="`"?(d=!d,i++):f!=="."||d?(s+=f,i++):(c(),i++)}if(c(),d)throw new xe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(t)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(mt.fromString(e))}static fromName(e){return new Ne(mt.fromString(e).popFirst(5))}static empty(){return new Ne(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(r,e,t){if(!t)throw new xe(te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function HR(r,e,t,s){if(e===!0&&s===!0)throw new xe(te.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Yw(r){if(!Ne.isDocumentKey(r))throw new xe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Jw(r){if(Ne.isDocumentKey(r))throw new xe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function KN(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function fm(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ee(12329,{type:typeof r})}function vn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new xe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=fm(r);throw new xe(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function GR(r,e){if(e<=0)throw new xe(te.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(r,e){const t={typeString:r};return e&&(t.value=e),t}function md(r,e){if(!KN(r))throw new xe(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const i=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const d=r[s];if(i&&typeof d!==i){t=`JSON field '${s}' must be a ${i}.`;break}if(c!==void 0&&d!==c.value){t=`Expected '${s}' field to equal '${c.value}'`;break}}if(t)throw new xe(te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww=-62135596800,Zw=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Zw);return new vt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ww)throw new xe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Zw}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(md(e,vt._jsonSchema))return new vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ww;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vt._jsonSchemaVersion="firestore/timestamp/1.0",vt._jsonSchema={type:cn("string",vt._jsonSchemaVersion),seconds:cn("number"),nanoseconds:cn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new vt(0,0))}static max(){return new De(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=-1;class Of{constructor(e,t,s,i){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=i}}function kp(r){return r.fields.find((e=>e.kind===2))}function ll(r){return r.fields.filter((e=>e.kind!==2))}Of.UNKNOWN_ID=-1;class uf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Yu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Yu(0,vs.min())}}function QN(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,i=De.fromTimestamp(s===1e9?new vt(t+1,0):new vt(t,s));return new vs(i,Ne.empty(),e)}function XN(r){return new vs(r.readTime,r.key,qo)}class vs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new vs(De.min(),Ne.empty(),qo)}static max(){return new vs(De.max(),Ne.empty(),qo)}}function Ex(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ne.comparator(r.documentKey,e.documentKey),t!==0?t:ze(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ai(r){if(r.code!==te.FAILED_PRECONDITION||r.message!==YN)throw r;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new H(((s,i)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,i)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof H?t:H.resolve(t)}catch(t){return H.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):H.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):H.reject(t)}static resolve(e){return new H(((t,s)=>{t(e)}))}static reject(e){return new H(((t,s)=>{s(e)}))}static waitFor(e){return new H(((t,s)=>{let i=0,c=0,d=!1;e.forEach((f=>{++i,f.next((()=>{++c,d&&c===i&&t()}),(g=>s(g)))})),d=!0,c===i&&t()}))}static or(e){let t=H.resolve(!1);for(const s of e)t=t.next((i=>i?H.resolve(i):s()));return t}static forEach(e,t){const s=[];return e.forEach(((i,c)=>{s.push(t.call(this,i,c))})),this.waitFor(s)}static mapArray(e,t){return new H(((s,i)=>{const c=e.length,d=new Array(c);let f=0;for(let g=0;g<c;g++){const x=g;t(e[x]).next((v=>{d[x]=v,++f,f===c&&s(d)}),(v=>i(v)))}}))}static doWhile(e,t){return new H(((s,i)=>{const c=()=>{e()===!0?t().next((()=>{c()}),i):s()};c()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="SimpleDb";class mm{static open(e,t,s,i){try{return new mm(t,e.transaction(i,s))}catch(c){throw new Ru(t,c)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new zs,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Ru(e,t.error)):this.S.resolve()},this.transaction.onerror=s=>{const i=Tx(s.target.error);this.S.reject(new Ru(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(fe(gs,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new KR(t)}}class bi{static delete(e){return fe(gs,"Removing database:",e),cl(q2().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!hx())return!1;if(bi.F())return!0;const e=dn(),t=bi.M(e),s=0<t&&t<10,i=WN(e),c=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||c)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}constructor(e,t,s){this.name=e,this.version=t,this.N=s,this.B=null,bi.M(dn())===12.2&&Wt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(fe(gs,"Opening database:",this.name),this.db=await new Promise(((t,s)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=c=>{const d=c.target.result;t(d)},i.onblocked=()=>{s(new Ru(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=c=>{const d=c.target.error;d.name==="VersionError"?s(new xe(te.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):d.name==="InvalidStateError"?s(new xe(te.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d)):s(new Ru(e,d))},i.onupgradeneeded=c=>{fe(gs,'Database "'+this.name+'" requires upgrade from version:',c.oldVersion);const d=c.target.result;this.N.k(d,i.transaction,c.oldVersion,this.version).next((()=>{fe(gs,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,s,i){const c=t==="readonly";let d=0;for(;;){++d;try{this.db=await this.L(e);const f=mm.open(this.db,e,c?"readonly":"readwrite",s),g=i(f).next((x=>(f.C(),x))).catch((x=>(f.abort(x),H.reject(x)))).toPromise();return g.catch((()=>{})),await f.D,g}catch(f){const g=f,x=g.name!=="FirebaseError"&&d<3;if(fe(gs,"Transaction failed with error:",g.message,"Retrying:",x),this.close(),!x)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function WN(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class $R{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return cl(this.U.delete())}}class Ru extends xe{constructor(e,t){super(te.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ii(r){return r.name==="IndexedDbTransactionError"}class KR{constructor(e){this.store=e}put(e,t){let s;return t!==void 0?(fe(gs,"PUT",this.store.name,e,t),s=this.store.put(t,e)):(fe(gs,"PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),cl(s)}add(e){return fe(gs,"ADD",this.store.name,e,e),cl(this.store.add(e))}get(e){return cl(this.store.get(e)).next((t=>(t===void 0&&(t=null),fe(gs,"GET",this.store.name,e,t),t)))}delete(e){return fe(gs,"DELETE",this.store.name,e),cl(this.store.delete(e))}count(){return fe(gs,"COUNT",this.store.name),cl(this.store.count())}J(e,t){const s=this.options(e,t),i=s.index?this.store.index(s.index):this.store;if(typeof i.getAll=="function"){const c=i.getAll(s.range);return new H(((d,f)=>{c.onerror=g=>{f(g.target.error)},c.onsuccess=g=>{d(g.target.result)}}))}{const c=this.cursor(s),d=[];return this.H(c,((f,g)=>{d.push(g)})).next((()=>d))}}Y(e,t){const s=this.store.getAll(e,t===null?void 0:t);return new H(((i,c)=>{s.onerror=d=>{c(d.target.error)},s.onsuccess=d=>{i(d.target.result)}}))}Z(e,t){fe(gs,"DELETE ALL",this.store.name);const s=this.options(e,t);s.X=!1;const i=this.cursor(s);return this.H(i,((c,d,f)=>f.delete()))}ee(e,t){let s;t?s=e:(s={},t=e);const i=this.cursor(s);return this.H(i,t)}te(e){const t=this.cursor({});return new H(((s,i)=>{t.onerror=c=>{const d=Tx(c.target.error);i(d)},t.onsuccess=c=>{const d=c.target.result;d?e(d.primaryKey,d.value).next((f=>{f?d.continue():s()})):s()}}))}H(e,t){const s=[];return new H(((i,c)=>{e.onerror=d=>{c(d.target.error)},e.onsuccess=d=>{const f=d.target.result;if(!f)return void i();const g=new $R(f),x=t(f.primaryKey,f.value,g);if(x instanceof H){const v=x.catch((w=>(g.done(),H.reject(w))));s.push(v)}g.isDone?i():g.G===null?f.continue():f.continue(g.G)}})).next((()=>H.waitFor(s)))}options(e,t){let s;return e!==void 0&&(typeof e=="string"?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.X?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function cl(r){return new H(((e,t)=>{r.onsuccess=s=>{const i=s.target.result;e(i)},r.onerror=s=>{const i=Tx(s.target.error);t(i)}}))}let e_=!1;function Tx(r){const e=bi.M(dn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return e_||(e_=!0,setTimeout((()=>{throw s}),0)),s}}return r}const ku="IndexBackfiller";class QR{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){fe(ku,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();fe(ku,`Documents written: ${t}`)}catch(t){Ii(t)?fe(ku,"Ignoring IndexedDB error during index backfill: ",t):await Ai(t)}await this.re(6e4)}))}}class XR{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const s=new Set;let i=t,c=!0;return H.doWhile((()=>c===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((d=>{if(d!==null&&!s.has(d))return fe(ku,`Processing collection: ${d}`),this.oe(e,d,i).next((f=>{i-=f,s.add(d)}));c=!1})))).next((()=>t-i))}oe(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,s).next((c=>{const d=c.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next((()=>this._e(i,c))).next((f=>(fe(ku,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f)))).next((()=>d.size))}))))}_e(e,t){let s=e;return t.changes.forEach(((i,c)=>{const d=XN(c);Ex(d,s)>0&&(s=d)})),new vs(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}es.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=-1;function gm(r){return r==null}function Ju(r){return r===0&&1/r==-1/0}function ZN(r){return typeof r=="number"&&Number.isInteger(r)&&!Ju(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf="";function Vn(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=t_(e)),e=YR(r.get(t),e);return t_(e)}function YR(r,e){let t=e;const s=r.length;for(let i=0;i<s;i++){const c=r.charAt(i);switch(c){case"\0":t+="";break;case Mf:t+="";break;default:t+=c}}return t}function t_(r){return r+Mf+""}function Ar(r){const e=r.length;if(Ce(e>=2,64408,{path:r}),e===2)return Ce(r.charAt(0)===Mf&&r.charAt(1)==="",56145,{path:r}),mt.emptyPath();const t=e-2,s=[];let i="";for(let c=0;c<e;){const d=r.indexOf(Mf,c);switch((d<0||d>t)&&Ee(50515,{path:r}),r.charAt(d+1)){case"":const f=r.substring(c,d);let g;i.length===0?g=f:(i+=f,g=i,i=""),s.push(g);break;case"":i+=r.substring(c,d),i+="\0";break;case"":i+=r.substring(c,d+1);break;default:Ee(61167,{path:r})}c=d+2}return new mt(s)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol="remoteDocuments",gd="owner",No="owner",Wu="mutationQueues",JR="userId",Ws="mutations",n_="batchId",fl="userMutationsIndex",s_=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(r,e){return[r,Vn(e)]}function eE(r,e,t){return[r,Vn(e),t]}const WR={},Fo="documentMutations",Vf="remoteDocumentsV14",ZR=["prefixPath","collectionGroup","readTime","documentId"],hf="documentKeyIndex",e6=["prefixPath","collectionGroup","documentId"],tE="collectionGroupIndex",t6=["collectionGroup","readTime","prefixPath","documentId"],Zu="remoteDocumentGlobal",Dp="remoteDocumentGlobalKey",Ho="targets",nE="queryTargetsIndex",n6=["canonicalId","targetId"],Go="targetDocuments",s6=["targetId","path"],Sx="documentTargetsIndex",r6=["path","targetId"],Pf="targetGlobalKey",pl="targetGlobal",ed="collectionParents",a6=["collectionId","parent"],$o="clientMetadata",i6="clientId",pm="bundles",l6="bundleId",xm="namedQueries",o6="name",jx="indexConfiguration",c6="indexId",Op="collectionGroupIndex",u6="collectionGroup",Du="indexState",d6=["indexId","uid"],sE="sequenceNumberIndex",h6=["uid","sequenceNumber"],Ou="indexEntries",f6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rE="documentKeyIndex",m6=["indexId","uid","orderedDocumentKey"],ym="documentOverlays",g6=["userId","collectionPath","documentId"],Mp="collectionPathOverlayIndex",p6=["userId","collectionPath","largestBatchId"],aE="collectionGroupOverlayIndex",x6=["userId","collectionGroup","largestBatchId"],Ax="globals",y6="name",iE=[Wu,Ws,Fo,ol,Ho,gd,pl,Go,$o,Zu,ed,pm,xm],b6=[...iE,ym],lE=[Wu,Ws,Fo,Vf,Ho,gd,pl,Go,$o,Zu,ed,pm,xm,ym],oE=lE,Ix=[...oE,jx,Du,Ou],v6=Ix,cE=[...Ix,Ax],w6=cE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp extends JN{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function hn(r,e){const t=je(r);return bi.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ci(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function _6(r,e){const t=[];for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&t.push(e(r[s],s,r));return t}function uE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,t){this.comparator=e,this.root=t||An.EMPTY}insert(e,t){return new Ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,An.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,An.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return t+s.left.size;i<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jh(this.root,e,this.comparator,!0)}}class Jh{constructor(e,t,s,i){this.isReverse=i,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&i&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class An{constructor(e,t,s,i,c){this.key=e,this.value=t,this.color=s??An.RED,this.left=i??An.EMPTY,this.right=c??An.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,i,c){return new An(e??this.key,t??this.value,s??this.color,i??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let i=this;const c=s(e,i.key);return i=c<0?i.copy(null,null,null,i.left.insert(e,t,s),null):c===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return An.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return An.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,An.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,An.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}An.EMPTY=null,An.RED=!0,An.BLACK=!1;An.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,t,s,i,c){return this}insert(e,t,s){return new An(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new a_(this.data.getIterator())}getIteratorFrom(e){return new a_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,c=s.getNext().key;if(this.comparator(i,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new _t(this.comparator);return t.data=e,t}}class a_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Eo(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new ts([])}unionWith(e){let t=new _t(Ft.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ts(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new dE("Invalid base64 string: "+c):c}})(e);return new Zt(t)}static fromUint8Array(e){const t=(function(i){let c="";for(let d=0;d<i.length;++d)c+=String.fromCharCode(i[d]);return c})(e);return new Zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let i=0;i<t.length;i++)s[i]=t.charCodeAt(i);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const N6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pa(r){if(Ce(!!r,39018),typeof r=="string"){let e=0;const t=N6.exec(r);if(Ce(!!t,46558,{timestamp:r}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:zt(r.seconds),nanos:zt(r.nanos)}}function zt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function xa(r){return typeof r=="string"?Zt.fromBase64String(r):Zt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="server_timestamp",fE="__type__",mE="__previous_value__",gE="__local_write_time__";function Cx(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[fE])==null?void 0:s.stringValue)===hE}function bm(r){const e=r.mapValue.fields[mE];return Cx(e)?bm(e):e}function td(r){const e=pa(r.mapValue.fields[gE].timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(e,t,s,i,c,d,f,g,x,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=i,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=x,this.isUsingEmulator=v}}const Lf="(default)";class El{constructor(e,t){this.projectId=e,this.database=t||Lf}static empty(){return new El("","")}get isDefaultDatabase(){return this.database===Lf}isEqual(e){return e instanceof El&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx="__type__",pE="__max__",mi={mapValue:{fields:{__type__:{stringValue:pE}}}},kx="__vector__",Ko="value",ff={nullValue:"NULL_VALUE"};function Ni(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Cx(r)?4:xE(r)?9007199254740991:vm(r)?10:11:Ee(28295,{value:r})}function Mr(r,e){if(r===e)return!0;const t=Ni(r);if(t!==Ni(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return td(r).isEqual(td(e));case 3:return(function(i,c){if(typeof i.timestampValue=="string"&&typeof c.timestampValue=="string"&&i.timestampValue.length===c.timestampValue.length)return i.timestampValue===c.timestampValue;const d=pa(i.timestampValue),f=pa(c.timestampValue);return d.seconds===f.seconds&&d.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(i,c){return xa(i.bytesValue).isEqual(xa(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(i,c){return zt(i.geoPointValue.latitude)===zt(c.geoPointValue.latitude)&&zt(i.geoPointValue.longitude)===zt(c.geoPointValue.longitude)})(r,e);case 2:return(function(i,c){if("integerValue"in i&&"integerValue"in c)return zt(i.integerValue)===zt(c.integerValue);if("doubleValue"in i&&"doubleValue"in c){const d=zt(i.doubleValue),f=zt(c.doubleValue);return d===f?Ju(d)===Ju(f):isNaN(d)&&isNaN(f)}return!1})(r,e);case 9:return Bo(r.arrayValue.values||[],e.arrayValue.values||[],Mr);case 10:case 11:return(function(i,c){const d=i.mapValue.fields||{},f=c.mapValue.fields||{};if(r_(d)!==r_(f))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(f[g]===void 0||!Mr(d[g],f[g])))return!1;return!0})(r,e);default:return Ee(52216,{left:r})}}function nd(r,e){return(r.values||[]).find((t=>Mr(t,e)))!==void 0}function Ei(r,e){if(r===e)return 0;const t=Ni(r),s=Ni(e);if(t!==s)return ze(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const f=zt(c.integerValue||c.doubleValue),g=zt(d.integerValue||d.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return i_(r.timestampValue,e.timestampValue);case 4:return i_(td(r),td(e));case 5:return Rp(r.stringValue,e.stringValue);case 6:return(function(c,d){const f=xa(c),g=xa(d);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const f=c.split("/"),g=d.split("/");for(let x=0;x<f.length&&x<g.length;x++){const v=ze(f[x],g[x]);if(v!==0)return v}return ze(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const f=ze(zt(c.latitude),zt(d.latitude));return f!==0?f:ze(zt(c.longitude),zt(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return l_(r.arrayValue,e.arrayValue);case 10:return(function(c,d){var N,C,M,J;const f=c.fields||{},g=d.fields||{},x=(N=f[Ko])==null?void 0:N.arrayValue,v=(C=g[Ko])==null?void 0:C.arrayValue,w=ze(((M=x==null?void 0:x.values)==null?void 0:M.length)||0,((J=v==null?void 0:v.values)==null?void 0:J.length)||0);return w!==0?w:l_(x,v)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===mi.mapValue&&d===mi.mapValue)return 0;if(c===mi.mapValue)return 1;if(d===mi.mapValue)return-1;const f=c.fields||{},g=Object.keys(f),x=d.fields||{},v=Object.keys(x);g.sort(),v.sort();for(let w=0;w<g.length&&w<v.length;++w){const N=Rp(g[w],v[w]);if(N!==0)return N;const C=Ei(f[g[w]],x[v[w]]);if(C!==0)return C}return ze(g.length,v.length)})(r.mapValue,e.mapValue);default:throw Ee(23264,{he:t})}}function i_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ze(r,e);const t=pa(r),s=pa(e),i=ze(t.seconds,s.seconds);return i!==0?i:ze(t.nanos,s.nanos)}function l_(r,e){const t=r.values||[],s=e.values||[];for(let i=0;i<t.length&&i<s.length;++i){const c=Ei(t[i],s[i]);if(c)return c}return ze(t.length,s.length)}function Qo(r){return Pp(r)}function Pp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=pa(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return xa(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ne.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",i=!0;for(const c of t.values||[])i?i=!1:s+=",",s+=Pp(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let i="{",c=!0;for(const d of s)c?c=!1:i+=",",i+=`${d}:${Pp(t.fields[d])}`;return i+"}"})(r.mapValue):Ee(61005,{value:r})}function mf(r){switch(Ni(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bm(r);return e?16+mf(e):16;case 5:return 2*r.stringValue.length;case 6:return xa(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((i,c)=>i+mf(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let i=0;return Ci(s.fields,((c,d)=>{i+=c.length+mf(d)})),i})(r.mapValue);default:throw Ee(13486,{value:r})}}function sd(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Lp(r){return!!r&&"integerValue"in r}function rd(r){return!!r&&"arrayValue"in r}function o_(r){return!!r&&"nullValue"in r}function c_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function gf(r){return!!r&&"mapValue"in r}function vm(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Rx])==null?void 0:s.stringValue)===kx}function Mu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ci(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Mu(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Mu(r.arrayValue.values[t]);return e}return{...r}}function xE(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===pE}const yE={mapValue:{fields:{[Rx]:{stringValue:kx},[Ko]:{arrayValue:{}}}}};function T6(r){return"nullValue"in r?ff:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?sd(El.empty(),Ne.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?vm(r)?yE:{mapValue:{}}:Ee(35942,{value:r})}function S6(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?sd(El.empty(),Ne.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?yE:"mapValue"in r?vm(r)?{mapValue:{}}:mi:Ee(61959,{value:r})}function u_(r,e){const t=Ei(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function d_(r,e){const t=Ei(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!gf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mu(t)}setAll(e){let t=Ft.emptyPath(),s={},i=[];e.forEach(((d,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,i),s={},i=[],t=f.popLast()}d?s[f.lastSegment()]=Mu(d):i.push(f.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,s,i)}delete(e){const t=this.field(e.popLast());gf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=t.mapValue.fields[e.get(s)];gf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,s){Ci(t,((i,c)=>e[i]=c));for(const i of s)delete e[i]}clone(){return new On(Mu(this.value))}}function bE(r){const e=[];return Ci(r.fields,((t,s)=>{const i=new Ft([t]);if(gf(s)){const c=bE(s.mapValue).fields;if(c.length===0)e.push(i);else for(const d of c)e.push(i.child(d))}else e.push(i)})),new ts(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,s,i,c,d,f){this.key=e,this.documentType=t,this.version=s,this.readTime=i,this.createTime=c,this.data=d,this.documentState=f}static newInvalidDocument(e){return new $t(e,0,De.min(),De.min(),De.min(),On.empty(),0)}static newFoundDocument(e,t,s,i){return new $t(e,1,t,De.min(),s,i,0)}static newNoDocument(e,t){return new $t(e,2,t,De.min(),De.min(),On.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,De.min(),De.min(),On.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,t){this.position=e,this.inclusive=t}}function h_(r,e,t){let s=0;for(let i=0;i<r.position.length;i++){const c=e[i],d=r.position[i];if(c.field.isKeyField()?s=Ne.comparator(Ne.fromName(d.referenceValue),t.key):s=Ei(d,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function f_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Mr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,t="asc"){this.field=e,this.dir=t}}function j6(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{}class tt extends vE{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new A6(e,t,s):t==="array-contains"?new R6(e,s):t==="in"?new SE(e,s):t==="not-in"?new k6(e,s):t==="array-contains-any"?new D6(e,s):new tt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new I6(e,s):new C6(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ei(t,this.value)):t!==null&&Ni(this.value)===Ni(t)&&this.matchesComparison(Ei(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wt extends vE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new wt(e,t)}matches(e){return Yo(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Yo(r){return r.op==="and"}function zp(r){return r.op==="or"}function Dx(r){return wE(r)&&Yo(r)}function wE(r){for(const e of r.filters)if(e instanceof wt)return!1;return!0}function Up(r){if(r instanceof tt)return r.field.canonicalString()+r.op.toString()+Qo(r.value);if(Dx(r))return r.filters.map((e=>Up(e))).join(",");{const e=r.filters.map((t=>Up(t))).join(",");return`${r.op}(${e})`}}function _E(r,e){return r instanceof tt?(function(s,i){return i instanceof tt&&s.op===i.op&&s.field.isEqual(i.field)&&Mr(s.value,i.value)})(r,e):r instanceof wt?(function(s,i){return i instanceof wt&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce(((c,d,f)=>c&&_E(d,i.filters[f])),!0):!1})(r,e):void Ee(19439)}function NE(r,e){const t=r.filters.concat(e);return wt.create(t,r.op)}function EE(r){return r instanceof tt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Qo(t.value)}`})(r):r instanceof wt?(function(t){return t.op.toString()+" {"+t.getFilters().map(EE).join(" ,")+"}"})(r):"Filter"}class A6 extends tt{constructor(e,t,s){super(e,t,s),this.key=Ne.fromName(s.referenceValue)}matches(e){const t=Ne.comparator(e.key,this.key);return this.matchesComparison(t)}}class I6 extends tt{constructor(e,t){super(e,"in",t),this.keys=TE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class C6 extends tt{constructor(e,t){super(e,"not-in",t),this.keys=TE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function TE(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Ne.fromName(s.referenceValue)))}class R6 extends tt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return rd(t)&&nd(t.arrayValue,this.value)}}class SE extends tt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&nd(this.value.arrayValue,t)}}class k6 extends tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(nd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!nd(this.value.arrayValue,t)}}class D6 extends tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!rd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>nd(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e,t=null,s=[],i=[],c=null,d=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=i,this.limit=c,this.startAt=d,this.endAt=f,this.Te=null}}function Bp(r,e=null,t=[],s=[],i=null,c=null,d=null){return new O6(r,e,t,s,i,c,d)}function Tl(r){const e=je(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Up(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),gm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Qo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Qo(s))).join(",")),e.Te=t}return e.Te}function pd(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!j6(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!_E(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!f_(r.startAt,e.startAt)&&f_(r.endAt,e.endAt)}function zf(r){return Ne.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Uf(r,e){return r.filters.filter((t=>t instanceof tt&&t.field.isEqual(e)))}function m_(r,e,t){let s=ff,i=!0;for(const c of Uf(r,e)){let d=ff,f=!0;switch(c.op){case"<":case"<=":d=T6(c.value);break;case"==":case"in":case">=":d=c.value;break;case">":d=c.value,f=!1;break;case"!=":case"not-in":d=ff}u_({value:s,inclusive:i},{value:d,inclusive:f})<0&&(s=d,i=f)}if(t!==null){for(let c=0;c<r.orderBy.length;++c)if(r.orderBy[c].field.isEqual(e)){const d=t.position[c];u_({value:s,inclusive:i},{value:d,inclusive:t.inclusive})<0&&(s=d,i=t.inclusive);break}}return{value:s,inclusive:i}}function g_(r,e,t){let s=mi,i=!0;for(const c of Uf(r,e)){let d=mi,f=!0;switch(c.op){case">=":case">":d=S6(c.value),f=!1;break;case"==":case"in":case"<=":d=c.value;break;case"<":d=c.value,f=!1;break;case"!=":case"not-in":d=mi}d_({value:s,inclusive:i},{value:d,inclusive:f})>0&&(s=d,i=f)}if(t!==null){for(let c=0;c<r.orderBy.length;++c)if(r.orderBy[c].field.isEqual(e)){const d=t.position[c];d_({value:s,inclusive:i},{value:d,inclusive:t.inclusive})>0&&(s=d,i=t.inclusive);break}}return{value:s,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t=null,s=[],i=[],c=null,d="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=i,this.limit=c,this.limitType=d,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function jE(r,e,t,s,i,c,d,f){return new dc(r,e,t,s,i,c,d,f)}function xd(r){return new dc(r)}function p_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function AE(r){return r.collectionGroup!==null}function Vu(r){const e=je(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let f=new _t(Ft.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((x=>{x.isInequality()&&(f=f.add(x.field))}))})),f})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new ad(c,s))})),t.has(Ft.keyField().canonicalString())||e.Ie.push(new ad(Ft.keyField(),s))}return e.Ie}function ys(r){const e=je(r);return e.Ee||(e.Ee=IE(e,Vu(r))),e.Ee}function M6(r){const e=je(r);return e.de||(e.de=IE(e,r.explicitOrderBy)),e.de}function IE(r,e){if(r.limitType==="F")return Bp(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((i=>{const c=i.dir==="desc"?"asc":"desc";return new ad(i.field,c)}));const t=r.endAt?new Xo(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Xo(r.startAt.position,r.startAt.inclusive):null;return Bp(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function qp(r,e){const t=r.filters.concat([e]);return new dc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Bf(r,e,t){return new dc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function wm(r,e){return pd(ys(r),ys(e))&&r.limitType===e.limitType}function CE(r){return`${Tl(ys(r))}|lt:${r.limitType}`}function Co(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((i=>EE(i))).join(", ")}]`),gm(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((i=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(i))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((i=>Qo(i))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((i=>Qo(i))).join(",")),`Target(${s})`})(ys(r))}; limitType=${r.limitType})`}function yd(r,e){return e.isFoundDocument()&&(function(s,i){const c=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ne.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,i){for(const c of Vu(s))if(!c.field.isKeyField()&&i.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,i){for(const c of s.filters)if(!c.matches(i))return!1;return!0})(r,e)&&(function(s,i){return!(s.startAt&&!(function(d,f,g){const x=h_(d,f,g);return d.inclusive?x<=0:x<0})(s.startAt,Vu(s),i)||s.endAt&&!(function(d,f,g){const x=h_(d,f,g);return d.inclusive?x>=0:x>0})(s.endAt,Vu(s),i))})(r,e)}function RE(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function kE(r){return(e,t)=>{let s=!1;for(const i of Vu(r)){const c=V6(i,e,t);if(c!==0)return c;s=s||i.field.isKeyField()}return 0}}function V6(r,e,t){const s=r.field.isKeyField()?Ne.comparator(e.key,t.key):(function(c,d,f){const g=d.data.field(c),x=f.data.field(c);return g!==null&&x!==null?Ei(g,x):Ee(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ee(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[i,c]of s)if(this.equalsFn(i,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<i.length;c++)if(this.equalsFn(i[c][0],e))return void(i[c]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[t]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ci(this.inner,((t,s)=>{for(const[i,c]of s)e(i,c)}))}isEmpty(){return uE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6=new Ct(Ne.comparator);function xs(){return P6}const DE=new Ct(Ne.comparator);function Tu(...r){let e=DE;for(const t of r)e=e.insert(t.key,t);return e}function OE(r){let e=DE;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Ir(){return Pu()}function ME(){return Pu()}function Pu(){return new va((r=>r.toString()),((r,e)=>r.isEqual(e)))}const L6=new Ct(Ne.comparator),z6=new _t(Ne.comparator);function $e(...r){let e=z6;for(const t of r)e=e.add(t);return e}const U6=new _t(ze);function Ox(){return U6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ju(e)?"-0":e}}function VE(r){return{integerValue:""+r}}function PE(r,e){return ZN(e)?VE(e):Mx(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(){this._=void 0}}function B6(r,e,t){return r instanceof Jo?(function(i,c){const d={fields:{[fE]:{stringValue:hE},[gE]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return c&&Cx(c)&&(c=bm(c)),c&&(d.fields[mE]=c),{mapValue:d}})(t,e):r instanceof Wo?zE(r,e):r instanceof Zo?UE(r,e):(function(i,c){const d=LE(i,c),f=x_(d)+x_(i.Ae);return Lp(d)&&Lp(i.Ae)?VE(f):Mx(i.serializer,f)})(r,e)}function q6(r,e,t){return r instanceof Wo?zE(r,e):r instanceof Zo?UE(r,e):t}function LE(r,e){return r instanceof ec?(function(s){return Lp(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Jo extends _m{}class Wo extends _m{constructor(e){super(),this.elements=e}}function zE(r,e){const t=BE(e);for(const s of r.elements)t.some((i=>Mr(i,s)))||t.push(s);return{arrayValue:{values:t}}}class Zo extends _m{constructor(e){super(),this.elements=e}}function UE(r,e){let t=BE(e);for(const s of r.elements)t=t.filter((i=>!Mr(i,s)));return{arrayValue:{values:t}}}class ec extends _m{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function x_(r){return zt(r.integerValue||r.doubleValue)}function BE(r){return rd(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,t){this.field=e,this.transform=t}}function F6(r,e){return r.field.isEqual(e.field)&&(function(s,i){return s instanceof Wo&&i instanceof Wo||s instanceof Zo&&i instanceof Zo?Bo(s.elements,i.elements,Mr):s instanceof ec&&i instanceof ec?Mr(s.Ae,i.Ae):s instanceof Jo&&i instanceof Jo})(r.transform,e.transform)}class H6{constructor(e,t){this.version=e,this.transformResults=t}}class Mn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mn}static exists(e){return new Mn(void 0,e)}static updateTime(e){return new Mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Nm{}function qE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Em(r.key,Mn.none()):new hc(r.key,r.data,Mn.none());{const t=r.data,s=On.empty();let i=new _t(Ft.comparator);for(let c of e.fields)if(!i.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?s.delete(c):s.set(c,d),i=i.add(c)}return new wa(r.key,s,new ts(i.toArray()),Mn.none())}}function G6(r,e,t){r instanceof hc?(function(i,c,d){const f=i.value.clone(),g=b_(i.fieldTransforms,c,d.transformResults);f.setAll(g),c.convertToFoundDocument(d.version,f).setHasCommittedMutations()})(r,e,t):r instanceof wa?(function(i,c,d){if(!pf(i.precondition,c))return void c.convertToUnknownDocument(d.version);const f=b_(i.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(FE(i)),g.setAll(f),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,t):(function(i,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function Lu(r,e,t,s){return r instanceof hc?(function(c,d,f,g){if(!pf(c.precondition,d))return f;const x=c.value.clone(),v=v_(c.fieldTransforms,g,d);return x.setAll(v),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),null})(r,e,t,s):r instanceof wa?(function(c,d,f,g){if(!pf(c.precondition,d))return f;const x=v_(c.fieldTransforms,g,d),v=d.data;return v.setAll(FE(c)),v.setAll(x),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),f===null?null:f.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(r,e,t,s):(function(c,d,f){return pf(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):f})(r,e,t)}function $6(r,e){let t=null;for(const s of r.fieldTransforms){const i=e.data.field(s.field),c=LE(s.transform,i||null);c!=null&&(t===null&&(t=On.empty()),t.set(s.field,c))}return t||null}function y_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&Bo(s,i,((c,d)=>F6(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class hc extends Nm{constructor(e,t,s,i=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class wa extends Nm{constructor(e,t,s,i,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=i,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function FE(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function b_(r,e,t){const s=new Map;Ce(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let i=0;i<t.length;i++){const c=r[i],d=c.transform,f=e.data.field(c.field);s.set(c.field,q6(d,f,t[i]))}return s}function v_(r,e,t){const s=new Map;for(const i of r){const c=i.transform,d=t.data.field(i.field);s.set(i.field,B6(c,d,e))}return s}class Em extends Nm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HE extends Nm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,t,s,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const c=this.mutations[i];c.key.isEqual(e.key)&&G6(c,e,s[i])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Lu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Lu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=ME();return this.mutations.forEach((i=>{const c=e.get(i.key),d=c.overlayedDocument;let f=this.applyToLocalView(d,c.mutatedFields);f=t.has(i.key)?null:f;const g=qE(d,f);g!==null&&s.set(i.key,g),d.isValidDocument()||d.convertToNoDocument(De.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),$e())}isEqual(e){return this.batchId===e.batchId&&Bo(this.mutations,e.mutations,((t,s)=>y_(t,s)))&&Bo(this.baseMutations,e.baseMutations,((t,s)=>y_(t,s)))}}class Lx{constructor(e,t,s,i){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=i}static from(e,t,s){Ce(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let i=(function(){return L6})();const c=e.mutations;for(let d=0;d<c.length;d++)i=i.insert(c[d].key,s[d].version);return new Lx(e,t,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e,t,s){this.alias=e,this.aggregateType=t,this.fieldPath=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var on,rt;function X6(r){switch(r){case te.OK:return Ee(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ee(15467,{code:r})}}function GE(r){if(r===void 0)return Wt("GRPC error has no .code"),te.UNKNOWN;switch(r){case on.OK:return te.OK;case on.CANCELLED:return te.CANCELLED;case on.UNKNOWN:return te.UNKNOWN;case on.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case on.INTERNAL:return te.INTERNAL;case on.UNAVAILABLE:return te.UNAVAILABLE;case on.UNAUTHENTICATED:return te.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case on.NOT_FOUND:return te.NOT_FOUND;case on.ALREADY_EXISTS:return te.ALREADY_EXISTS;case on.PERMISSION_DENIED:return te.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case on.ABORTED:return te.ABORTED;case on.OUT_OF_RANGE:return te.OUT_OF_RANGE;case on.UNIMPLEMENTED:return te.UNIMPLEMENTED;case on.DATA_LOSS:return te.DATA_LOSS;default:return Ee(39323,{code:r})}}(rt=on||(on={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6=new yi([4294967295,4294967295],0);function w_(r){const e=Y6().encode(r),t=new LN;return t.update(e),new Uint8Array(t.digest())}function __(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new yi([t,s],0),new yi([i,c],0)]}class Ux{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Su(`Invalid padding: ${t}`);if(s<0)throw new Su(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Su(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Su(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=yi.fromNumber(this.ge)}ye(e,t,s){let i=e.add(t.multiply(yi.fromNumber(s)));return i.compare(J6)===1&&(i=new yi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=w_(e),[s,i]=__(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,i,c);if(!this.we(d))return!1}return!0}static create(e,t,s){const i=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Ux(c,i,t);return s.forEach((f=>d.insert(f))),d}insert(e){if(this.ge===0)return;const t=w_(e),[s,i]=__(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,i,c);this.Se(d)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Su extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,t,s,i,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const i=new Map;return i.set(e,vd.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new bd(De.min(),i,new Ct(ze),xs(),$e())}}class vd{constructor(e,t,s,i,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new vd(s,t,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t,s,i){this.be=e,this.removedTargetIds=t,this.key=s,this.De=i}}class $E{constructor(e,t){this.targetId=e,this.Ce=t}}class KE{constructor(e,t,s=Zt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=i}}class N_{constructor(){this.ve=0,this.Fe=E_(),this.Me=Zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=$e(),t=$e(),s=$e();return this.Fe.forEach(((i,c)=>{switch(c){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:s=s.add(i);break;default:Ee(38017,{changeType:c})}})),new vd(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=E_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class W6{constructor(e){this.Ge=e,this.ze=new Map,this.je=xs(),this.Je=Wh(),this.He=Wh(),this.Ye=new Ct(ze)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,s=e.Ce.count,i=this.ot(t);if(i){const c=i.target;if(zf(c))if(s===0){const d=new Ne(c.path);this.et(t,d,$t.newNoDocument(d,De.min()))}else Ce(s===1,20013,{expectedCount:s});else{const d=this._t(t);if(d!==s){const f=this.ut(e),g=f?this.ct(f,e,d):1;if(g!==0){this.it(t);const x=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,x)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:c=0}=t;let d,f;try{d=xa(s).toUint8Array()}catch(g){if(g instanceof dE)return Xu("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Ux(d,i,c)}catch(g){return Xu(g instanceof Su?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let i=0;return s.forEach((c=>{const d=this.Ge.ht(),f=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(f)||(this.et(t,c,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((c,d)=>{const f=this.ot(d);if(f){if(c.current&&zf(f.target)){const g=new Ne(f.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,$t.newNoDocument(g,e))}c.Be&&(t.set(d,c.ke()),c.qe())}}));let s=$e();this.He.forEach(((c,d)=>{let f=!0;d.forEachWhile((g=>{const x=this.ot(g);return!x||x.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const i=new bd(e,t,this.Ye,this.je,s);return this.je=xs(),this.Je=Wh(),this.He=Wh(),this.Ye=new Ct(ze),i}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new N_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new _t(ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new _t(ze),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new N_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Wh(){return new Ct(Ne.comparator)}function E_(){return new Ct(Ne.comparator)}const Z6={asc:"ASCENDING",desc:"DESCENDING"},ek={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tk={and:"AND",or:"OR"};class nk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Fp(r,e){return r.useProto3Json||gm(e)?e:{value:e}}function tc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function sk(r,e){return tc(r,e.toTimestamp())}function qn(r){return Ce(!!r,49232),De.fromTimestamp((function(t){const s=pa(t);return new vt(s.seconds,s.nanos)})(r))}function Bx(r,e){return Hp(r,e).canonicalString()}function Hp(r,e){const t=(function(i){return new mt(["projects",i.projectId,"databases",i.database])})(r).child("documents");return e===void 0?t:t.child(e)}function XE(r){const e=mt.fromString(r);return Ce(sT(e),10190,{key:e.toString()}),e}function qf(r,e){return Bx(r.databaseId,e.path)}function xl(r,e){const t=XE(e);if(t.get(1)!==r.databaseId.projectId)throw new xe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new xe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ne(WE(t))}function YE(r,e){return Bx(r.databaseId,e)}function JE(r){const e=XE(r);return e.length===4?mt.emptyPath():WE(e)}function Gp(r){return new mt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function WE(r){return Ce(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function T_(r,e,t){return{name:qf(r,e),fields:t.value.mapValue.fields}}function rk(r,e,t){const s=xl(r,e.name),i=qn(e.updateTime),c=e.createTime?qn(e.createTime):De.min(),d=new On({mapValue:{fields:e.fields}}),f=$t.newFoundDocument(s,i,c,d);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function ak(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:Ee(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],c=(function(x,v){return x.useProto3Json?(Ce(v===void 0||typeof v=="string",58123),Zt.fromBase64String(v||"")):(Ce(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Zt.fromUint8Array(v||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,f=d&&(function(x){const v=x.code===void 0?te.UNKNOWN:GE(x.code);return new xe(v,x.message||"")})(d);t=new KE(s,i,c,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=xl(r,s.document.name),c=qn(s.document.updateTime),d=s.document.createTime?qn(s.document.createTime):De.min(),f=new On({mapValue:{fields:s.document.fields}}),g=$t.newFoundDocument(i,c,d,f),x=s.targetIds||[],v=s.removedTargetIds||[];t=new xf(x,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=xl(r,s.document),c=s.readTime?qn(s.readTime):De.min(),d=$t.newNoDocument(i,c),f=s.removedTargetIds||[];t=new xf([],f,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=xl(r,s.document),c=s.removedTargetIds||[];t=new xf([],c,i,null)}else{if(!("filter"in e))return Ee(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:c}=s,d=new Q6(i,c),f=s.targetId;t=new $E(f,d)}}return t}function Ff(r,e){let t;if(e instanceof hc)t={update:T_(r,e.key,e.value)};else if(e instanceof Em)t={delete:qf(r,e.key)};else if(e instanceof wa)t={update:T_(r,e.key,e.data),updateMask:hk(e.fieldMask)};else{if(!(e instanceof HE))return Ee(16599,{Vt:e.type});t={verify:qf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const f=d.transform;if(f instanceof Jo)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Wo)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Zo)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof ec)return{fieldPath:d.field.canonicalString(),increment:f.Ae};throw Ee(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(i,c){return c.updateTime!==void 0?{updateTime:sk(i,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ee(27497)})(r,e.precondition)),t}function $p(r,e){const t=e.currentDocument?(function(c){return c.updateTime!==void 0?Mn.updateTime(qn(c.updateTime)):c.exists!==void 0?Mn.exists(c.exists):Mn.none()})(e.currentDocument):Mn.none(),s=e.updateTransforms?e.updateTransforms.map((i=>(function(d,f){let g=null;if("setToServerValue"in f)Ce(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),g=new Jo;else if("appendMissingElements"in f){const v=f.appendMissingElements.values||[];g=new Wo(v)}else if("removeAllFromArray"in f){const v=f.removeAllFromArray.values||[];g=new Zo(v)}else"increment"in f?g=new ec(d,f.increment):Ee(16584,{proto:f});const x=Ft.fromServerFormat(f.fieldPath);return new Vx(x,g)})(r,i))):[];if(e.update){e.update.name;const i=xl(r,e.update.name),c=new On({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=(function(g){const x=g.fieldPaths||[];return new ts(x.map((v=>Ft.fromServerFormat(v))))})(e.updateMask);return new wa(i,c,d,t,s)}return new hc(i,c,t,s)}if(e.delete){const i=xl(r,e.delete);return new Em(i,t)}if(e.verify){const i=xl(r,e.verify);return new HE(i,t)}return Ee(1463,{proto:e})}function ik(r,e){return r&&r.length>0?(Ce(e!==void 0,14353),r.map((t=>(function(i,c){let d=i.updateTime?qn(i.updateTime):qn(c);return d.isEqual(De.min())&&(d=qn(c)),new H6(d,i.transformResults||[])})(t,e)))):[]}function ZE(r,e){return{documents:[YE(r,e.path)]}}function qx(r,e){const t={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=YE(r,i);const c=(function(x){if(x.length!==0)return nT(wt.create(x,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const d=(function(x){if(x.length!==0)return x.map((v=>(function(N){return{field:hi(N.field),direction:ck(N.dir)}})(v)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const f=Fp(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:t,parent:i}}function lk(r,e,t,s){const{ft:i,parent:c}=qx(r,e),d={},f=[];let g=0;return t.forEach((x=>{const v="aggregate_"+g++;d[v]=x.alias,x.aggregateType==="count"?f.push({alias:v,count:{}}):x.aggregateType==="avg"?f.push({alias:v,avg:{field:hi(x.fieldPath)}}):x.aggregateType==="sum"&&f.push({alias:v,sum:{field:hi(x.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:f,structuredQuery:i.structuredQuery},parent:i.parent},gt:d,parent:c}}function eT(r){let e=JE(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let i=null;if(s>0){Ce(s===1,65062);const v=t.from[0];v.allDescendants?i=v.collectionId:e=e.child(v.collectionId)}let c=[];t.where&&(c=(function(w){const N=tT(w);return N instanceof wt&&Dx(N)?N.getFilters():[N]})(t.where));let d=[];t.orderBy&&(d=(function(w){return w.map((N=>(function(M){return new ad(Ro(M.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(N)))})(t.orderBy));let f=null;t.limit&&(f=(function(w){let N;return N=typeof w=="object"?w.value:w,gm(N)?null:N})(t.limit));let g=null;t.startAt&&(g=(function(w){const N=!!w.before,C=w.values||[];return new Xo(C,N)})(t.startAt));let x=null;return t.endAt&&(x=(function(w){const N=!w.before,C=w.values||[];return new Xo(C,N)})(t.endAt)),jE(e,i,d,c,f,"F",g,x)}function ok(r,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function tT(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Ro(t.unaryFilter.field);return tt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=Ro(t.unaryFilter.field);return tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ro(t.unaryFilter.field);return tt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ro(t.unaryFilter.field);return tt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(r):r.fieldFilter!==void 0?(function(t){return tt.create(Ro(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return wt.create(t.compositeFilter.filters.map((s=>tT(s))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(t.compositeFilter.op))})(r):Ee(30097,{filter:r})}function ck(r){return Z6[r]}function uk(r){return ek[r]}function dk(r){return tk[r]}function hi(r){return{fieldPath:r.canonicalString()}}function Ro(r){return Ft.fromServerFormat(r.fieldPath)}function nT(r){return r instanceof tt?(function(t){if(t.op==="=="){if(c_(t.value))return{unaryFilter:{field:hi(t.field),op:"IS_NAN"}};if(o_(t.value))return{unaryFilter:{field:hi(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(c_(t.value))return{unaryFilter:{field:hi(t.field),op:"IS_NOT_NAN"}};if(o_(t.value))return{unaryFilter:{field:hi(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hi(t.field),op:uk(t.op),value:t.value}}})(r):r instanceof wt?(function(t){const s=t.getFilters().map((i=>nT(i)));return s.length===1?s[0]:{compositeFilter:{op:dk(t.op),filters:s}}})(r):Ee(54877,{filter:r})}function hk(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function sT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,t,s,i,c=De.min(),d=De.min(),f=Zt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new la(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e){this.yt=e}}function fk(r,e){let t;if(e.document)t=rk(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Ne.fromSegments(e.noDocument.path),i=jl(e.noDocument.readTime);t=$t.newNoDocument(s,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ee(56709);{const s=Ne.fromSegments(e.unknownDocument.path),i=jl(e.unknownDocument.version);t=$t.newUnknownDocument(s,i)}}return e.readTime&&t.setReadTime((function(i){const c=new vt(i[0],i[1]);return De.fromTimestamp(c)})(e.readTime)),t}function S_(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Hf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document=(function(c,d){return{name:qf(c,d.key),fields:d.data.value.mapValue.fields,updateTime:tc(c,d.version.toTimestamp()),createTime:tc(c,d.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:Sl(e.version)};else{if(!e.isUnknownDocument())return Ee(57904,{document:e});s.unknownDocument={path:t.path.toArray(),version:Sl(e.version)}}return s}function Hf(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Sl(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jl(r){const e=new vt(r.seconds,r.nanoseconds);return De.fromTimestamp(e)}function ul(r,e){const t=(e.baseMutations||[]).map((c=>$p(r.yt,c)));for(let c=0;c<e.mutations.length-1;++c){const d=e.mutations[c];if(c+1<e.mutations.length&&e.mutations[c+1].transform!==void 0){const f=e.mutations[c+1];d.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(c+1,1),++c}}const s=e.mutations.map((c=>$p(r.yt,c))),i=vt.fromMillis(e.localWriteTimeMs);return new Px(e.batchId,i,t,s)}function ju(r){const e=jl(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?jl(r.lastLimboFreeSnapshotVersion):De.min();let s;return s=(function(c){return c.documents!==void 0})(r.query)?(function(c){const d=c.documents.length;return Ce(d===1,1966,{count:d}),ys(xd(JE(c.documents[0])))})(r.query):(function(c){return ys(eT(c))})(r.query),new la(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Zt.fromBase64String(r.resumeToken))}function aT(r,e){const t=Sl(e.snapshotVersion),s=Sl(e.lastLimboFreeSnapshotVersion);let i;i=zf(e.target)?ZE(r.yt,e.target):qx(r.yt,e.target).ft;const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Tl(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:i}}function iT(r){const e=eT({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Bf(e,e.limit,"L"):e}function Jg(r,e){return new zx(e.largestBatchId,$p(r.yt,e.overlayMutation))}function j_(r,e){const t=e.path.lastSegment();return[r,Vn(e.path.popLast()),t]}function A_(r,e,t,s){return{indexId:r,uid:e,sequenceNumber:t,readTime:Sl(s.readTime),documentKey:Vn(s.documentKey.path),largestBatchId:s.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{getBundleMetadata(e,t){return I_(e).get(t).next((s=>{if(s)return(function(c){return{id:c.bundleId,createTime:jl(c.createTime),version:c.version}})(s)}))}saveBundleMetadata(e,t){return I_(e).put((function(i){return{bundleId:i.id,createTime:Sl(qn(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return C_(e).get(t).next((s=>{if(s)return(function(c){return{name:c.name,query:iT(c.bundledQuery),readTime:jl(c.readTime)}})(s)}))}saveNamedQuery(e,t){return C_(e).put((function(i){return{name:i.name,readTime:Sl(qn(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function I_(r){return hn(r,pm)}function C_(r){return hn(r,xm)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const s=t.uid||"";return new Tm(e,s)}getOverlay(e,t){return xu(e).get(j_(this.userId,t)).next((s=>s?Jg(this.serializer,s):null))}getOverlays(e,t){const s=Ir();return H.forEach(t,(i=>this.getOverlay(e,i).next((c=>{c!==null&&s.set(i,c)})))).next((()=>s))}saveOverlays(e,t,s){const i=[];return s.forEach(((c,d)=>{const f=new zx(t,d);i.push(this.St(e,f))})),H.waitFor(i)}removeOverlaysForBatchId(e,t,s){const i=new Set;t.forEach((d=>i.add(Vn(d.getCollectionPath()))));const c=[];return i.forEach((d=>{const f=IDBKeyRange.bound([this.userId,d,s],[this.userId,d,s+1],!1,!0);c.push(xu(e).Z(Mp,f))})),H.waitFor(c)}getOverlaysForCollection(e,t,s){const i=Ir(),c=Vn(t),d=IDBKeyRange.bound([this.userId,c,s],[this.userId,c,Number.POSITIVE_INFINITY],!0);return xu(e).J(Mp,d).next((f=>{for(const g of f){const x=Jg(this.serializer,g);i.set(x.getKey(),x)}return i}))}getOverlaysForCollectionGroup(e,t,s,i){const c=Ir();let d;const f=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return xu(e).ee({index:aE,range:f},((g,x,v)=>{const w=Jg(this.serializer,x);c.size()<i||w.largestBatchId===d?(c.set(w.getKey(),w),d=w.largestBatchId):v.done()})).next((()=>c))}St(e,t){return xu(e).put((function(i,c,d){const[f,g,x]=j_(c,d.mutation.key);return{userId:c,collectionPath:g,documentId:x,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:Ff(i.yt,d.mutation)}})(this.serializer,this.userId,t))}}function xu(r){return hn(r,ym)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{bt(e){return hn(e,Ax)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const s=t==null?void 0:t.value;return s?Zt.fromUint8Array(s):Zt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(zt(e.integerValue));else if("doubleValue"in e){const s=zt(e.doubleValue);isNaN(s)?this.Ft(t,13):(this.Ft(t,15),Ju(s)?t.Mt(0):t.Mt(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Ft(t,20),typeof s=="string"&&(s=pa(s)),t.xt(`${s.seconds||""}`),t.Mt(s.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(xa(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.Ft(t,45),t.Mt(s.latitude||0),t.Mt(s.longitude||0)}else"mapValue"in e?xE(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):vm(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ee(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const s=e.fields||{};this.Ft(t,55);for(const i of Object.keys(s))this.Ot(i,t),this.Ct(s[i],t)}kt(e,t){var d,f;const s=e.fields||{};this.Ft(t,53);const i=Ko,c=((f=(d=s[i].arrayValue)==null?void 0:d.values)==null?void 0:f.length)||0;this.Ft(t,15),t.Mt(zt(c)),this.Ot(i,t),this.Ct(s[i],t)}Qt(e,t){const s=e.values||[];this.Ft(t,50);for(const i of s)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),Ne.fromName(e).path.forEach((s=>{this.Ft(t,60),this.Ut(s,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}dl.Kt=new dl;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=255;function pk(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function R_(r){const e=64-(function(s){let i=0;for(let c=0;c<8;++c){const d=pk(255&s[c]);if(i+=d,d!==8)break}return i})(r);return Math.ceil(e/8)}class xk{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Gt(s.value),s=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Jt(s.value),s=t.next();this.Ht()}Yt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Gt(s);else if(s<2048)this.Gt(960|s>>>6),this.Gt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Jt(s);else if(s<2048)this.Jt(960|s>>>6),this.Jt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),s=R_(t);this.tn(1+s),this.buffer[this.position++]=255&s;for(let i=t.length-s;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),s=R_(t);this.tn(1+s),this.buffer[this.position++]=~(255&s);for(let i=t.length-s;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(To),this.sn(255)}_n(){this.an(To),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(c){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,c,!1),new Uint8Array(d.buffer)})(e),s=!!(128&t[0]);t[0]^=s?255:128;for(let i=1;i<t.length;++i)t[i]^=s?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===To?(this.sn(To),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===To?(this.an(To),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const i=new Uint8Array(s);i.set(this.buffer),this.buffer=i}}class yk{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class bk{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class yu{constructor(){this.cn=new xk,this.ln=new yk(this.cn),this.hn=new bk(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,t,s,i){this.Tn=e,this.In=t,this.En=s,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,s=new Uint8Array(t);return s.set(this.dn,0),t!==e?s.set([0],this.dn.length):++s[s.length-1],new hl(this.Tn,this.In,this.En,s)}Rn(e,t,s){return{indexId:this.Tn,uid:e,arrayValue:yf(this.En),directionalValue:yf(this.dn),orderedDocumentKey:yf(t),documentKey:s.path.toArray()}}Vn(e,t,s){const i=this.Rn(e,t,s);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function ri(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=k_(r.En,e.En),t!==0?t:(t=k_(r.dn,e.dn),t!==0?t:Ne.comparator(r.In,e.In)))}function k_(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(s!==0)return s}return r.length-e.length}function yf(r){return X2()?(function(t){let s="";for(let i=0;i<t.length;i++)s+=String.fromCharCode(t[i]);return s})(r):r}function D_(r){return typeof r!="string"?r:(function(t){const s=new Uint8Array(t.length);for(let i=0;i<t.length;i++)s[i]=t.charCodeAt(i);return s})(r)}class O_{constructor(e){this.mn=new _t(((t,s)=>Ft.comparator(t.field,s.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const s=t;s.isInequality()?this.mn=this.mn.add(s):this.gn.push(s)}}get pn(){return this.mn.size>1}yn(e){if(Ce(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=kp(e);if(t!==void 0&&!this.wn(t))return!1;const s=ll(e);let i=new Set,c=0,d=0;for(;c<s.length&&this.wn(s[c]);++c)i=i.add(s[c].fieldPath.canonicalString());if(c===s.length)return!0;if(this.mn.size>0){const f=this.mn.getIterator().getNext();if(!i.has(f.field.canonicalString())){const g=s[c];if(!this.Sn(f,g)||!this.bn(this.fn[d++],g))return!1}++c}for(;c<s.length;++c){const f=s[c];if(d>=this.fn.length||!this.bn(this.fn[d++],f))return!1}return!0}Dn(){if(this.pn)return null;let e=new _t(Ft.comparator);const t=[];for(const s of this.gn)if(!s.field.isKeyField())if(s.op==="array-contains"||s.op==="array-contains-any")t.push(new uf(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),t.push(new uf(s.field,0))}for(const s of this.fn)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),t.push(new uf(s.field,s.dir==="asc"?0:1)));return new Of(Of.UNKNOWN_ID,this.collectionId,t,Yu.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const s=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===s}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(r){var t,s;if(Ce(r instanceof tt||r instanceof wt,20012),r instanceof tt){if(r instanceof SE){const i=((s=(t=r.value.arrayValue)==null?void 0:t.values)==null?void 0:s.map((c=>tt.create(r.field,"==",c))))||[];return wt.create(i,"or")}return r}const e=r.filters.map((i=>lT(i)));return wt.create(e,r.op)}function vk(r){if(r.getFilters().length===0)return[];const e=Xp(lT(r));return Ce(oT(e),7391),Kp(e)||Qp(e)?[e]:e.getFilters()}function Kp(r){return r instanceof tt}function Qp(r){return r instanceof wt&&Dx(r)}function oT(r){return Kp(r)||Qp(r)||(function(t){if(t instanceof wt&&zp(t)){for(const s of t.getFilters())if(!Kp(s)&&!Qp(s))return!1;return!0}return!1})(r)}function Xp(r){if(Ce(r instanceof tt||r instanceof wt,34018),r instanceof tt)return r;if(r.filters.length===1)return Xp(r.filters[0]);const e=r.filters.map((s=>Xp(s)));let t=wt.create(e,r.op);return t=Gf(t),oT(t)?t:(Ce(t instanceof wt,64498),Ce(Yo(t),40251),Ce(t.filters.length>1,57927),t.filters.reduce(((s,i)=>Fx(s,i))))}function Fx(r,e){let t;return Ce(r instanceof tt||r instanceof wt,38388),Ce(e instanceof tt||e instanceof wt,25473),t=r instanceof tt?e instanceof tt?(function(i,c){return wt.create([i,c],"and")})(r,e):M_(r,e):e instanceof tt?M_(e,r):(function(i,c){if(Ce(i.filters.length>0&&c.filters.length>0,48005),Yo(i)&&Yo(c))return NE(i,c.getFilters());const d=zp(i)?i:c,f=zp(i)?c:i,g=d.filters.map((x=>Fx(x,f)));return wt.create(g,"or")})(r,e),Gf(t)}function M_(r,e){if(Yo(e))return NE(e,r.getFilters());{const t=e.filters.map((s=>Fx(r,s)));return wt.create(t,"or")}}function Gf(r){if(Ce(r instanceof tt||r instanceof wt,11850),r instanceof tt)return r;const e=r.getFilters();if(e.length===1)return Gf(e[0]);if(wE(r))return r;const t=e.map((i=>Gf(i))),s=[];return t.forEach((i=>{i instanceof tt?s.push(i):i instanceof wt&&(i.op===r.op?s.push(...i.filters):s.push(i))})),s.length===1?s[0]:wt.create(s,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(){this.Cn=new Hx}addToCollectionParentIndex(e,t){return this.Cn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(vs.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(vs.min())}updateCollectionGroup(e,t,s){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}}class Hx{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),i=this.index[t]||new _t(mt.comparator),c=!i.has(s);return this.index[t]=i.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),i=this.index[t];return i&&i.has(s)}getEntries(e){return(this.index[e]||new _t(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="IndexedDbIndexManager",Zh=new Uint8Array(0);class _k{constructor(e,t){this.databaseId=t,this.vn=new Hx,this.Fn=new va((s=>Tl(s)),((s,i)=>pd(s,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const s=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const c={collectionId:s,parent:Vn(i)};return P_(e).put(c)}return H.resolve()}getCollectionParents(e,t){const s=[],i=IDBKeyRange.bound([t,""],[GN(t),""],!1,!0);return P_(e).J(i).next((c=>{for(const d of c){if(d.collectionId!==t)break;s.push(Ar(d.parent))}return s}))}addFieldIndex(e,t){const s=bu(e),i=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(t);delete i.indexId;const c=s.add(i);if(t.indexState){const d=jo(e);return c.next((f=>{d.put(A_(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return c.next()}deleteFieldIndex(e,t){const s=bu(e),i=jo(e),c=So(e);return s.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=bu(e),s=So(e),i=jo(e);return t.Z().next((()=>s.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return H.forEach(this.Mn(t),(s=>this.getIndexType(e,s).next((i=>{if(i===0||i===1){const c=new O_(s).Dn();if(c!=null)return this.addFieldIndex(e,c)}}))))}getDocumentsMatchingTarget(e,t){const s=So(e);let i=!0;const c=new Map;return H.forEach(this.Mn(t),(d=>this.xn(e,d).next((f=>{i&&(i=!!f),c.set(d,f)})))).next((()=>{if(i){let d=$e();const f=[];return H.forEach(c,((g,x)=>{fe(V_,`Using index ${(function(le){return`id=${le.indexId}|cg=${le.collectionGroup}|f=${le.fields.map((_e=>`${_e.fieldPath}:${_e.kind}`)).join(",")}`})(g)} to execute ${Tl(t)}`);const v=(function(le,_e){const me=kp(_e);if(me===void 0)return null;for(const G of Uf(le,me.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null})(x,g),w=(function(le,_e){const me=new Map;for(const G of ll(_e))for(const S of Uf(le,G.fieldPath))switch(S.op){case"==":case"in":me.set(G.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return me.set(G.fieldPath.canonicalString(),S.value),Array.from(me.values())}return null})(x,g),N=(function(le,_e){const me=[];let G=!0;for(const S of ll(_e)){const j=S.kind===0?m_(le,S.fieldPath,le.startAt):g_(le,S.fieldPath,le.startAt);me.push(j.value),G&&(G=j.inclusive)}return new Xo(me,G)})(x,g),C=(function(le,_e){const me=[];let G=!0;for(const S of ll(_e)){const j=S.kind===0?g_(le,S.fieldPath,le.endAt):m_(le,S.fieldPath,le.endAt);me.push(j.value),G&&(G=j.inclusive)}return new Xo(me,G)})(x,g),M=this.On(g,x,N),J=this.On(g,x,C),B=this.Nn(g,x,w),he=this.Bn(g.indexId,v,M,N.inclusive,J,C.inclusive,B);return H.forEach(he,(oe=>s.Y(oe,t.limit).next((le=>{le.forEach((_e=>{const me=Ne.fromSegments(_e.documentKey);d.has(me)||(d=d.add(me),f.push(me))}))}))))})).next((()=>f))}return H.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=vk(wt.create(e.filters,"and")).map((s=>Bp(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,s,i,c,d,f){const g=(t!=null?t.length:1)*Math.max(s.length,c.length),x=g/(t!=null?t.length:1),v=[];for(let w=0;w<g;++w){const N=t?this.Ln(t[w/x]):Zh,C=this.kn(e,N,s[w%x],i),M=this.qn(e,N,c[w%x],d),J=f.map((B=>this.kn(e,N,B,!0)));v.push(...this.createRange(C,M,J))}return v}kn(e,t,s,i){const c=new hl(e,Ne.empty(),t,s);return i?c:c.An()}qn(e,t,s,i){const c=new hl(e,Ne.empty(),t,s);return i?c.An():c}xn(e,t){const s=new O_(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((c=>{let d=null;for(const f of c)s.yn(f)&&(!d||f.fields.length>d.fields.length)&&(d=f);return d}))}getIndexType(e,t){let s=2;const i=this.Mn(t);return H.forEach(i,(c=>this.xn(e,c).next((d=>{d?s!==0&&d.fields.length<(function(g){let x=new _t(Ft.comparator),v=!1;for(const w of g.filters)for(const N of w.getFlattenedFilters())N.field.isKeyField()||(N.op==="array-contains"||N.op==="array-contains-any"?v=!0:x=x.add(N.field));for(const w of g.orderBy)w.field.isKeyField()||(x=x.add(w.field));return x.size+(v?1:0)})(c)&&(s=1):s=0})))).next((()=>(function(d){return d.limit!==null})(t)&&i.length>1&&s===2?1:s))}Qn(e,t){const s=new yu;for(const i of ll(e)){const c=t.data.field(i.fieldPath);if(c==null)return null;const d=s.Pn(i.kind);dl.Kt.Dt(c,d)}return s.un()}Ln(e){const t=new yu;return dl.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const s=new yu;return dl.Kt.Dt(sd(this.databaseId,t),s.Pn((function(c){const d=ll(c);return d.length===0?0:d[d.length-1].kind})(e))),s.un()}Nn(e,t,s){if(s===null)return[];let i=[];i.push(new yu);let c=0;for(const d of ll(e)){const f=s[c++];for(const g of i)if(this.Un(t,d.fieldPath)&&rd(f))i=this.Kn(i,d,f);else{const x=g.Pn(d.kind);dl.Kt.Dt(f,x)}}return this.Wn(i)}On(e,t,s){return this.Nn(e,t,s.position)}Wn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].un();return t}Kn(e,t,s){const i=[...e],c=[];for(const d of s.arrayValue.values||[])for(const f of i){const g=new yu;g.seed(f.un()),dl.Kt.Dt(d,g.Pn(t.kind)),c.push(g)}return c}Un(e,t){return!!e.filters.find((s=>s instanceof tt&&s.field.isEqual(t)&&(s.op==="in"||s.op==="not-in")))}getFieldIndexes(e,t){const s=bu(e),i=jo(e);return(t?s.J(Op,IDBKeyRange.bound(t,t)):s.J()).next((c=>{const d=[];return H.forEach(c,(f=>i.get([f.indexId,this.uid]).next((g=>{d.push((function(v,w){const N=w?new Yu(w.sequenceNumber,new vs(jl(w.readTime),new Ne(Ar(w.documentKey)),w.largestBatchId)):Yu.empty(),C=v.fields.map((([M,J])=>new uf(Ft.fromServerFormat(M),J)));return new Of(v.indexId,v.collectionGroup,C,N)})(f,g))})))).next((()=>d))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((s,i)=>{const c=s.indexState.sequenceNumber-i.indexState.sequenceNumber;return c!==0?c:ze(s.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,s){const i=bu(e),c=jo(e);return this.Gn(e).next((d=>i.J(Op,IDBKeyRange.bound(t,t)).next((f=>H.forEach(f,(g=>c.put(A_(g.indexId,this.uid,d,s))))))))}updateIndexEntries(e,t){const s=new Map;return H.forEach(t,((i,c)=>{const d=s.get(i.collectionGroup);return(d?H.resolve(d):this.getFieldIndexes(e,i.collectionGroup)).next((f=>(s.set(i.collectionGroup,f),H.forEach(f,(g=>this.zn(e,i,g).next((x=>{const v=this.jn(c,g);return x.isEqual(v)?H.resolve():this.Jn(e,c,g,x,v)})))))))}))}Hn(e,t,s,i){return So(e).put(i.Rn(this.uid,this.$n(s,t.key),t.key))}Yn(e,t,s,i){return So(e).delete(i.Vn(this.uid,this.$n(s,t.key),t.key))}zn(e,t,s){const i=So(e);let c=new _t(ri);return i.ee({index:rE,range:IDBKeyRange.only([s.indexId,this.uid,yf(this.$n(s,t))])},((d,f)=>{c=c.add(new hl(s.indexId,t,D_(f.arrayValue),D_(f.directionalValue)))})).next((()=>c))}jn(e,t){let s=new _t(ri);const i=this.Qn(t,e);if(i==null)return s;const c=kp(t);if(c!=null){const d=e.data.field(c.fieldPath);if(rd(d))for(const f of d.arrayValue.values||[])s=s.add(new hl(t.indexId,e.key,this.Ln(f),i))}else s=s.add(new hl(t.indexId,e.key,Zh,i));return s}Jn(e,t,s,i,c){fe(V_,"Updating index entries for document '%s'",t.key);const d=[];return(function(g,x,v,w,N){const C=g.getIterator(),M=x.getIterator();let J=Eo(C),B=Eo(M);for(;J||B;){let he=!1,oe=!1;if(J&&B){const le=v(J,B);le<0?oe=!0:le>0&&(he=!0)}else J!=null?oe=!0:he=!0;he?(w(B),B=Eo(M)):oe?(N(J),J=Eo(C)):(J=Eo(C),B=Eo(M))}})(i,c,ri,(f=>{d.push(this.Hn(e,t,s,f))}),(f=>{d.push(this.Yn(e,t,s,f))})),H.waitFor(d)}Gn(e){let t=1;return jo(e).ee({index:sE,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((s,i,c)=>{c.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,s){s=s.sort(((d,f)=>ri(d,f))).filter(((d,f,g)=>!f||ri(d,g[f-1])!==0));const i=[];i.push(e);for(const d of s){const f=ri(d,e),g=ri(d,t);if(f===0)i[0]=e.An();else if(f>0&&g<0)i.push(d),i.push(d.An());else if(g>0)break}i.push(t);const c=[];for(let d=0;d<i.length;d+=2){if(this.Zn(i[d],i[d+1]))return[];const f=i[d].Vn(this.uid,Zh,Ne.empty()),g=i[d+1].Vn(this.uid,Zh,Ne.empty());c.push(IDBKeyRange.bound(f,g))}return c}Zn(e,t){return ri(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(L_)}getMinOffset(e,t){return H.mapArray(this.Mn(t),(s=>this.xn(e,s).next((i=>i||Ee(44426))))).next(L_)}}function P_(r){return hn(r,ed)}function So(r){return hn(r,Ou)}function bu(r){return hn(r,jx)}function jo(r){return hn(r,Du)}function L_(r){Ce(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const i=r[s].indexState.offset;Ex(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new vs(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cT=41943040;class Dn{static withCacheSize(e){return new Dn(e,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(r,e,t){const s=r.store(Ws),i=r.store(Fo),c=[],d=IDBKeyRange.only(t.batchId);let f=0;const g=s.ee({range:d},((v,w,N)=>(f++,N.delete())));c.push(g.next((()=>{Ce(f===1,47070,{batchId:t.batchId})})));const x=[];for(const v of t.mutations){const w=eE(e,v.key.path,t.batchId);c.push(i.delete(w)),x.push(v.key)}return H.waitFor(c).next((()=>x))}function $f(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Ee(14731);e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(cT,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);class Sm{constructor(e,t,s,i){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=i,this.Xn={}}static wt(e,t,s,i){Ce(e.uid!=="",64387);const c=e.isAuthenticated()?e.uid:"";return new Sm(c,t,s,i)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ai(e).ee({index:fl,range:s},((i,c,d)=>{t=!1,d.done()})).next((()=>t))}addMutationBatch(e,t,s,i){const c=ko(e),d=ai(e);return d.add({}).next((f=>{Ce(typeof f=="number",49019);const g=new Px(f,t,s,i),x=(function(C,M,J){const B=J.baseMutations.map((oe=>Ff(C.yt,oe))),he=J.mutations.map((oe=>Ff(C.yt,oe)));return{userId:M,batchId:J.batchId,localWriteTimeMs:J.localWriteTime.toMillis(),baseMutations:B,mutations:he}})(this.serializer,this.userId,g),v=[];let w=new _t(((N,C)=>ze(N.canonicalString(),C.canonicalString())));for(const N of i){const C=eE(this.userId,N.key.path,f);w=w.add(N.key.path.popLast()),v.push(d.put(x)),v.push(c.put(C,WR))}return w.forEach((N=>{v.push(this.indexManager.addToCollectionParentIndex(e,N))})),e.addOnCommittedListener((()=>{this.Xn[f]=g.keys()})),H.waitFor(v).next((()=>g))}))}lookupMutationBatch(e,t){return ai(e).get(t).next((s=>s?(Ce(s.userId===this.userId,48,"Unexpected user for mutation batch",{userId:s.userId,batchId:t}),ul(this.serializer,s)):null))}er(e,t){return this.Xn[t]?H.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((s=>{if(s){const i=s.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,i=IDBKeyRange.lowerBound([this.userId,s]);let c=null;return ai(e).ee({index:fl,range:i},((d,f,g)=>{f.userId===this.userId&&(Ce(f.batchId>=s,47524,{tr:s}),c=ul(this.serializer,f)),g.done()})).next((()=>c))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=gl;return ai(e).ee({index:fl,range:t,reverse:!0},((i,c,d)=>{s=c.batchId,d.done()})).next((()=>s))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,gl],[this.userId,Number.POSITIVE_INFINITY]);return ai(e).J(fl,t).next((s=>s.map((i=>ul(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=df(this.userId,t.path),i=IDBKeyRange.lowerBound(s),c=[];return ko(e).ee({range:i},((d,f,g)=>{const[x,v,w]=d,N=Ar(v);if(x===this.userId&&t.path.isEqual(N))return ai(e).get(w).next((C=>{if(!C)throw Ee(61480,{nr:d,batchId:w});Ce(C.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:C.userId,batchId:w}),c.push(ul(this.serializer,C))}));g.done()})).next((()=>c))}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new _t(ze);const i=[];return t.forEach((c=>{const d=df(this.userId,c.path),f=IDBKeyRange.lowerBound(d),g=ko(e).ee({range:f},((x,v,w)=>{const[N,C,M]=x,J=Ar(C);N===this.userId&&c.path.isEqual(J)?s=s.add(M):w.done()}));i.push(g)})),H.waitFor(i).next((()=>this.rr(e,s)))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,i=s.length+1,c=df(this.userId,s),d=IDBKeyRange.lowerBound(c);let f=new _t(ze);return ko(e).ee({range:d},((g,x,v)=>{const[w,N,C]=g,M=Ar(N);w===this.userId&&s.isPrefixOf(M)?M.length===i&&(f=f.add(C)):v.done()})).next((()=>this.rr(e,f)))}rr(e,t){const s=[],i=[];return t.forEach((c=>{i.push(ai(e).get(c).next((d=>{if(d===null)throw Ee(35274,{batchId:c});Ce(d.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:d.userId,batchId:c}),s.push(ul(this.serializer,d))})))})),H.waitFor(i).next((()=>s))}removeMutationBatch(e,t){return uT(e.le,this.userId,t).next((s=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),H.forEach(s,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return H.resolve();const s=IDBKeyRange.lowerBound((function(d){return[d]})(this.userId)),i=[];return ko(e).ee({range:s},((c,d,f)=>{if(c[0]===this.userId){const g=Ar(c[1]);i.push(g)}else f.done()})).next((()=>{Ce(i.length===0,56720,{sr:i.map((c=>c.canonicalString()))})}))}))}containsKey(e,t){return dT(e,this.userId,t)}_r(e){return hT(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:gl,lastStreamToken:""}))}}function dT(r,e,t){const s=df(e,t.path),i=s[1],c=IDBKeyRange.lowerBound(s);let d=!1;return ko(r).ee({range:c,X:!0},((f,g,x)=>{const[v,w,N]=f;v===e&&w===i&&(d=!0),x.done()})).next((()=>d))}function ai(r){return hn(r,Ws)}function ko(r){return hn(r,Fo)}function hT(r){return hn(r,Wu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Al(0)}static cr(){return new Al(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const s=new Al(t.highestTargetId);return t.highestTargetId=s.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>De.fromTimestamp(new vt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,s){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,s&&(i.lastRemoteSnapshotVersion=s.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((s=>(s.targetCount+=1,this.Tr(t,s),this.hr(e,s))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Ao(e).delete(t.targetId))).next((()=>this.lr(e))).next((s=>(Ce(s.targetCount>0,8065),s.targetCount-=1,this.hr(e,s))))}removeTargets(e,t,s){let i=0;const c=[];return Ao(e).ee(((d,f)=>{const g=ju(f);g.sequenceNumber<=t&&s.get(g.targetId)===null&&(i++,c.push(this.removeTargetData(e,g)))})).next((()=>H.waitFor(c))).next((()=>i))}forEachTarget(e,t){return Ao(e).ee(((s,i)=>{const c=ju(i);t(c)}))}lr(e){return U_(e).get(Pf).next((t=>(Ce(t!==null,2888),t)))}hr(e,t){return U_(e).put(Pf,t)}Pr(e,t){return Ao(e).put(aT(this.serializer,t))}Tr(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const s=Tl(t),i=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let c=null;return Ao(e).ee({range:i,index:nE},((d,f,g)=>{const x=ju(f);pd(t,x.target)&&(c=x,g.done())})).next((()=>c))}addMatchingKeys(e,t,s){const i=[],c=fi(e);return t.forEach((d=>{const f=Vn(d.path);i.push(c.put({targetId:s,path:f})),i.push(this.referenceDelegate.addReference(e,s,d))})),H.waitFor(i)}removeMatchingKeys(e,t,s){const i=fi(e);return H.forEach(t,(c=>{const d=Vn(c.path);return H.waitFor([i.delete([s,d]),this.referenceDelegate.removeReference(e,s,c)])}))}removeMatchingKeysForTargetId(e,t){const s=fi(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(i)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),i=fi(e);let c=$e();return i.ee({range:s,X:!0},((d,f,g)=>{const x=Ar(d[1]),v=new Ne(x);c=c.add(v)})).next((()=>c))}containsKey(e,t){const s=Vn(t.path),i=IDBKeyRange.bound([s],[GN(s)],!1,!0);let c=0;return fi(e).ee({index:Sx,X:!0,range:i},(([d,f],g,x)=>{d!==0&&(c++,x.done())})).next((()=>c>0))}At(e,t){return Ao(e).get(t).next((s=>s?ju(s):null))}}function Ao(r){return hn(r,Ho)}function U_(r){return hn(r,pl)}function fi(r){return hn(r,Go)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="LruGarbageCollector",fT=1048576;function q_([r,e],[t,s]){const i=ze(r,t);return i===0?ze(e,s):i}class Ek{constructor(e){this.Ir=e,this.buffer=new _t(q_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();q_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class mT{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(B_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ii(t)?fe(B_,"Ignoring IndexedDB error during garbage collection: ",t):await Ai(t)}await this.Vr(3e5)}))}}class Tk{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return H.resolve(es.ce);const s=new Ek(t);return this.mr.forEachTarget(e,(i=>s.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>s.Ar(i))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(z_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),z_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,i,c,d,f,g,x;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),i=this.params.maximumSequenceNumbersToCollect):i=w,d=Date.now(),this.nthSequenceNumber(e,i)))).next((w=>(s=w,f=Date.now(),this.removeTargets(e,s,t)))).next((w=>(c=w,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((w=>(x=Date.now(),Io()<=et.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-v}ms
	Determined least recently used ${i} in `+(f-d)+`ms
	Removed ${c} targets in `+(g-f)+`ms
	Removed ${w} documents in `+(x-g)+`ms
Total Duration: ${x-v}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:c,documentsRemoved:w}))))}}function gT(r,e){return new Tk(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e,t){this.db=e,this.garbageCollector=gT(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((s=>t.next((i=>s+i))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((s,i)=>t(i)))}addReference(e,t,s){return ef(e,s)}removeReference(e,t,s){return ef(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return ef(e,t)}br(e,t){return(function(i,c){let d=!1;return hT(i).te((f=>dT(i,f,c).next((g=>(g&&(d=!0),H.resolve(!g)))))).next((()=>d))})(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let c=0;return this.Sr(e,((d,f)=>{if(f<=t){const g=this.br(e,d).next((x=>{if(!x)return c++,s.getEntry(e,d).next((()=>(s.removeEntry(d,De.min()),fi(e).delete((function(w){return[0,Vn(w.path)]})(d)))))}));i.push(g)}})).next((()=>H.waitFor(i))).next((()=>s.apply(e))).next((()=>c))}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return ef(e,t)}Sr(e,t){const s=fi(e);let i,c=es.ce;return s.ee({index:Sx},(([d,f],{path:g,sequenceNumber:x})=>{d===0?(c!==es.ce&&t(new Ne(Ar(i)),c),c=x,i=g):c=es.ce})).next((()=>{c!==es.ce&&t(new Ne(Ar(i)),c)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ef(r,e){return fi(r).put((function(s,i){return{targetId:0,path:Vn(s.path),sequenceNumber:i}})(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(){this.changes=new va((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?H.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return rl(e).put(s)}removeEntry(e,t,s){return rl(e).delete((function(c,d){const f=c.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],Hf(d),f[f.length-1]]})(t,s))}updateMetadata(e,t){return this.getMetadata(e).next((s=>(s.byteSize+=t,this.Dr(e,s))))}getEntry(e,t){let s=$t.newInvalidDocument(t);return rl(e).ee({index:hf,range:IDBKeyRange.only(vu(t))},((i,c)=>{s=this.Cr(t,c)})).next((()=>s))}vr(e,t){let s={size:0,document:$t.newInvalidDocument(t)};return rl(e).ee({index:hf,range:IDBKeyRange.only(vu(t))},((i,c)=>{s={document:this.Cr(t,c),size:$f(c)}})).next((()=>s))}getEntries(e,t){let s=xs();return this.Fr(e,t,((i,c)=>{const d=this.Cr(i,c);s=s.insert(i,d)})).next((()=>s))}Mr(e,t){let s=xs(),i=new Ct(Ne.comparator);return this.Fr(e,t,((c,d)=>{const f=this.Cr(c,d);s=s.insert(c,f),i=i.insert(c,$f(d))})).next((()=>({documents:s,Or:i})))}Fr(e,t,s){if(t.isEmpty())return H.resolve();let i=new _t(G_);t.forEach((g=>i=i.add(g)));const c=IDBKeyRange.bound(vu(i.first()),vu(i.last())),d=i.getIterator();let f=d.getNext();return rl(e).ee({index:hf,range:c},((g,x,v)=>{const w=Ne.fromSegments([...x.prefixPath,x.collectionGroup,x.documentId]);for(;f&&G_(f,w)<0;)s(f,null),f=d.getNext();f&&f.isEqual(w)&&(s(f,x),f=d.hasNext()?d.getNext():null),f?v.j(vu(f)):v.done()})).next((()=>{for(;f;)s(f,null),f=d.hasNext()?d.getNext():null}))}getDocumentsMatchingQuery(e,t,s,i,c){const d=t.path,f=[d.popLast().toArray(),d.lastSegment(),Hf(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],g=[d.popLast().toArray(),d.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return rl(e).J(IDBKeyRange.bound(f,g,!0)).next((x=>{c==null||c.incrementDocumentReadCount(x.length);let v=xs();for(const w of x){const N=this.Cr(Ne.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);N.isFoundDocument()&&(yd(t,N)||i.has(N.key))&&(v=v.insert(N.key,N))}return v}))}getAllFromCollectionGroup(e,t,s,i){let c=xs();const d=H_(t,s),f=H_(t,vs.max());return rl(e).ee({index:tE,range:IDBKeyRange.bound(d,f,!0)},((g,x,v)=>{const w=this.Cr(Ne.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);c=c.insert(w.key,w),c.size===i&&v.done()})).next((()=>c))}newChangeBuffer(e){return new Ak(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return F_(e).get(Dp).next((t=>(Ce(!!t,20021),t)))}Dr(e,t){return F_(e).put(Dp,t)}Cr(e,t){if(t){const s=fk(this.serializer,t);if(!(s.isNoDocument()&&s.version.isEqual(De.min())))return s}return $t.newInvalidDocument(e)}}function xT(r){return new jk(r)}class Ak extends pT{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new va((s=>s.toString()),((s,i)=>s.isEqual(i)))}applyChanges(e){const t=[];let s=0,i=new _t(((c,d)=>ze(c.canonicalString(),d.canonicalString())));return this.changes.forEach(((c,d)=>{const f=this.Br.get(c);if(t.push(this.Nr.removeEntry(e,c,f.readTime)),d.isValidDocument()){const g=S_(this.Nr.serializer,d);i=i.add(c.path.popLast());const x=$f(g);s+=x-f.size,t.push(this.Nr.addEntry(e,c,g))}else if(s-=f.size,this.trackRemovals){const g=S_(this.Nr.serializer,d.convertToNoDocument(De.min()));t.push(this.Nr.addEntry(e,c,g))}})),i.forEach((c=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,c))})),t.push(this.Nr.updateMetadata(e,s)),H.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((s=>(this.Br.set(t,{size:s.size,readTime:s.document.readTime}),s.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:s,Or:i})=>(i.forEach(((c,d)=>{this.Br.set(c,{size:d,readTime:s.get(c).readTime})})),s)))}}function F_(r){return hn(r,Zu)}function rl(r){return hn(r,Vf)}function vu(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function H_(r,e){const t=e.documentKey.path.toArray();return[r,Hf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function G_(r,e){const t=r.path.toArray(),s=e.path.toArray();let i=0;for(let c=0;c<t.length-2&&c<s.length-2;++c)if(i=ze(t[c],s[c]),i)return i;return i=ze(t.length,s.length),i||(i=ze(t[t.length-2],s[s.length-2]),i||ze(t[t.length-1],s[s.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,t,s,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(s=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(s!==null&&Lu(s.mutation,i,ts.empty(),vt.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,$e()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=$e()){const i=Ir();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,s).next((c=>{let d=Tu();return c.forEach(((f,g)=>{d=d.insert(f,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const s=Ir();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,$e())))}populateOverlays(e,t,s){const i=[];return s.forEach((c=>{t.has(c)||i.push(c)})),this.documentOverlayCache.getOverlays(e,i).next((c=>{c.forEach(((d,f)=>{t.set(d,f)}))}))}computeViews(e,t,s,i){let c=xs();const d=Pu(),f=(function(){return Pu()})();return t.forEach(((g,x)=>{const v=s.get(x.key);i.has(x.key)&&(v===void 0||v.mutation instanceof wa)?c=c.insert(x.key,x):v!==void 0?(d.set(x.key,v.mutation.getFieldMask()),Lu(v.mutation,x,v.mutation.getFieldMask(),vt.now())):d.set(x.key,ts.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((x,v)=>d.set(x,v))),t.forEach(((x,v)=>f.set(x,new Ik(v,d.get(x)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Pu();let i=new Ct(((d,f)=>d-f)),c=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const f of d)f.keys().forEach((g=>{const x=t.get(g);if(x===null)return;let v=s.get(g)||ts.empty();v=f.applyToLocalView(x,v),s.set(g,v);const w=(i.get(f.batchId)||$e()).add(g);i=i.insert(f.batchId,w)}))})).next((()=>{const d=[],f=i.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),x=g.key,v=g.value,w=ME();v.forEach((N=>{if(!c.has(N)){const C=qE(t.get(N),s.get(N));C!==null&&w.set(N,C),c=c.add(N)}})),d.push(this.documentOverlayCache.saveOverlays(e,x,w))}return H.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,i){return(function(d){return Ne.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):AE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,i):this.getDocumentsMatchingCollectionQuery(e,t,s,i)}getNextDocuments(e,t,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,i).next((c=>{const d=i-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,i-c.size):H.resolve(Ir());let f=qo,g=c;return d.next((x=>H.forEach(x,((v,w)=>(f<w.largestBatchId&&(f=w.largestBatchId),c.get(v)?H.resolve():this.remoteDocumentCache.getEntry(e,v).next((N=>{g=g.insert(v,N)}))))).next((()=>this.populateOverlays(e,x,c))).next((()=>this.computeViews(e,g,x,$e()))).next((v=>({batchId:f,changes:OE(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ne(t)).next((s=>{let i=Tu();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,i){const c=t.collectionGroup;let d=Tu();return this.indexManager.getCollectionParents(e,c).next((f=>H.forEach(f,(g=>{const x=(function(w,N){return new dc(N,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,x,s,i).next((v=>{v.forEach(((w,N)=>{d=d.insert(w,N)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,s,i){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,i)))).next((d=>{c.forEach(((g,x)=>{const v=x.getKey();d.get(v)===null&&(d=d.insert(v,$t.newInvalidDocument(v)))}));let f=Tu();return d.forEach(((g,x)=>{const v=c.get(g);v!==void 0&&Lu(v.mutation,x,ts.empty(),vt.now()),yd(t,x)&&(f=f.insert(g,x))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return H.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:qn(i.createTime)}})(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:iT(i.bundledQuery),readTime:qn(i.readTime)}})(t)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(){this.overlays=new Ct(Ne.comparator),this.qr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ir();return H.forEach(t,(i=>this.getOverlay(e,i).next((c=>{c!==null&&s.set(i,c)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((i,c)=>{this.St(e,t,c)})),H.resolve()}removeOverlaysForBatchId(e,t,s){const i=this.qr.get(s);return i!==void 0&&(i.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),H.resolve()}getOverlaysForCollection(e,t,s){const i=Ir(),c=t.length+1,d=new Ne(t.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const g=f.getNext().value,x=g.getKey();if(!t.isPrefixOf(x.path))break;x.path.length===c&&g.largestBatchId>s&&i.set(g.getKey(),g)}return H.resolve(i)}getOverlaysForCollectionGroup(e,t,s,i){let c=new Ct(((x,v)=>x-v));const d=this.overlays.getIterator();for(;d.hasNext();){const x=d.getNext().value;if(x.getKey().getCollectionGroup()===t&&x.largestBatchId>s){let v=c.get(x.largestBatchId);v===null&&(v=Ir(),c=c.insert(x.largestBatchId,v)),v.set(x.getKey(),x)}}const f=Ir(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((x,v)=>f.set(x,v))),!(f.size()>=i)););return H.resolve(f)}St(e,t,s){const i=this.overlays.get(s.key);if(i!==null){const d=this.qr.get(i.largestBatchId).delete(s.key);this.qr.set(i.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new zx(t,s));let c=this.qr.get(t);c===void 0&&(c=$e(),this.qr.set(t,c)),this.qr.set(t,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this.Qr=new _t(yn.$r),this.Ur=new _t(yn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new yn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new yn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ne(new mt([])),s=new yn(t,e),i=new yn(t,e+1),c=[];return this.Ur.forEachInRange([s,i],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ne(new mt([])),s=new yn(t,e),i=new yn(t,e+1);let c=$e();return this.Ur.forEachInRange([s,i],(d=>{c=c.add(d.key)})),c}containsKey(e){const t=new yn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class yn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ne.comparator(e.key,t.key)||ze(e.Yr,t.Yr)}static Kr(e,t){return ze(e.Yr,t.Yr)||Ne.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new _t(yn.$r)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,i){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Px(c,t,s,i);this.mutationQueue.push(d);for(const f of i)this.Zr=this.Zr.add(new yn(f.key,c)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return H.resolve(d)}lookupMutationBatch(e,t){return H.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,i=this.ei(s),c=i<0?0:i;return H.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?gl:this.tr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new yn(t,0),i=new yn(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,i],(d=>{const f=this.Xr(d.Yr);c.push(f)})),H.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new _t(ze);return t.forEach((i=>{const c=new yn(i,0),d=new yn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(f=>{s=s.add(f.Yr)}))})),H.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,i=s.length+1;let c=s;Ne.isDocumentKey(c)||(c=c.child(""));const d=new yn(new Ne(c),0);let f=new _t(ze);return this.Zr.forEachWhile((g=>{const x=g.key.path;return!!s.isPrefixOf(x)&&(x.length===i&&(f=f.add(g.Yr)),!0)}),d),H.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const i=this.Xr(s);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Ce(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return H.forEach(t.mutations,(i=>{const c=new yn(i.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new yn(t,0),i=this.Zr.firstAfterOrEqual(s);return H.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.ri=e,this.docs=(function(){return new Ct(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,i=this.docs.get(s),c=i?i.size:0,d=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return H.resolve(s?s.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let s=xs();return t.forEach((i=>{const c=this.docs.get(i);s=s.insert(i,c?c.document.mutableCopy():$t.newInvalidDocument(i))})),H.resolve(s)}getDocumentsMatchingQuery(e,t,s,i){let c=xs();const d=t.path,f=new Ne(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:x,value:{document:v}}=g.getNext();if(!d.isPrefixOf(x.path))break;x.path.length>d.length+1||Ex(XN(v),s)<=0||(i.has(v.key)||yd(t,v))&&(c=c.insert(v.key,v.mutableCopy()))}return H.resolve(c)}getAllFromCollectionGroup(e,t,s,i){Ee(9500)}ii(e,t){return H.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new Mk(this)}getSize(e){return H.resolve(this.size)}}class Mk extends pT{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(s)})),H.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e){this.persistence=e,this.si=new va((t=>Tl(t)),pd),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new Gx,this.targetCount=0,this.ai=Al.ur()}forEachTarget(e,t){return this.si.forEach(((s,i)=>t(i))),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),H.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Al(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.Pr(t),H.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,s){let i=0;const c=[];return this.si.forEach(((d,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)})),H.waitFor(c).next((()=>i))}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return H.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),H.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const i=this.persistence.referenceDelegate,c=[];return i&&t.forEach((d=>{c.push(i.markPotentiallyOrphaned(e,d))})),H.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),H.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return H.resolve(s)}containsKey(e,t){return H.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,t){this.ui={},this.overlays={},this.ci=new es(0),this.li=!1,this.li=!0,this.hi=new kk,this.referenceDelegate=e(this),this.Pi=new Vk(this),this.indexManager=new wk,this.remoteDocumentCache=(function(i){return new Ok(i)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new rT(t),this.Ii=new Ck(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Rk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new Dk(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){fe("MemoryPersistence","Starting transaction:",e);const i=new Pk(this.ci.next());return this.referenceDelegate.Ei(),s(i).next((c=>this.referenceDelegate.di(i).next((()=>c)))).toPromise().then((c=>(i.raiseOnCommittedEvent(),c)))}Ai(e,t){return H.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class Pk extends JN{constructor(e){super(),this.currentSequenceNumber=e}}class jm{constructor(e){this.persistence=e,this.Ri=new Gx,this.Vi=null}static mi(e){return new jm(e)}get fi(){if(this.Vi)return this.Vi;throw Ee(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),H.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),H.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.fi,(s=>{const i=Ne.fromPath(s);return this.gi(e,i).next((c=>{c||t.removeEntry(i,De.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return H.or([()=>H.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Kf{constructor(e,t){this.persistence=e,this.pi=new va((s=>Vn(s.path)),((s,i)=>s.isEqual(i))),this.garbageCollector=gT(this,t)}static mi(e,t){return new Kf(e,t)}Ei(){}di(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((i=>s+i))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return H.forEach(this.pi,((s,i)=>this.br(e,s,i).next((c=>c?H.resolve():t(i)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const i=this.persistence.getRemoteDocumentCache(),c=i.newChangeBuffer();return i.ii(e,(d=>this.br(e,d,t).next((f=>{f||(s++,c.removeEntry(d,De.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),H.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mf(e.data.value)),t}br(e,t,s){return H.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return H.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.serializer=e}k(e,t,s,i){const c=new mm("createOrUpgrade",t);s<1&&i>=1&&((function(g){g.createObjectStore(gd)})(e),(function(g){g.createObjectStore(Wu,{keyPath:JR}),g.createObjectStore(Ws,{keyPath:n_,autoIncrement:!0}).createIndex(fl,s_,{unique:!0}),g.createObjectStore(Fo)})(e),$_(e),(function(g){g.createObjectStore(ol)})(e));let d=H.resolve();return s<3&&i>=3&&(s!==0&&((function(g){g.deleteObjectStore(Go),g.deleteObjectStore(Ho),g.deleteObjectStore(pl)})(e),$_(e)),d=d.next((()=>(function(g){const x=g.store(pl),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:De.min().toTimestamp(),targetCount:0};return x.put(Pf,v)})(c)))),s<4&&i>=4&&(s!==0&&(d=d.next((()=>(function(g,x){return x.store(Ws).J().next((w=>{g.deleteObjectStore(Ws),g.createObjectStore(Ws,{keyPath:n_,autoIncrement:!0}).createIndex(fl,s_,{unique:!0});const N=x.store(Ws),C=w.map((M=>N.put(M)));return H.waitFor(C)}))})(e,c)))),d=d.next((()=>{(function(g){g.createObjectStore($o,{keyPath:i6})})(e)}))),s<5&&i>=5&&(d=d.next((()=>this.yi(c)))),s<6&&i>=6&&(d=d.next((()=>((function(g){g.createObjectStore(Zu)})(e),this.wi(c))))),s<7&&i>=7&&(d=d.next((()=>this.Si(c)))),s<8&&i>=8&&(d=d.next((()=>this.bi(e,c)))),s<9&&i>=9&&(d=d.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e)}))),s<10&&i>=10&&(d=d.next((()=>this.Di(c)))),s<11&&i>=11&&(d=d.next((()=>{(function(g){g.createObjectStore(pm,{keyPath:l6})})(e),(function(g){g.createObjectStore(xm,{keyPath:o6})})(e)}))),s<12&&i>=12&&(d=d.next((()=>{(function(g){const x=g.createObjectStore(ym,{keyPath:g6});x.createIndex(Mp,p6,{unique:!1}),x.createIndex(aE,x6,{unique:!1})})(e)}))),s<13&&i>=13&&(d=d.next((()=>(function(g){const x=g.createObjectStore(Vf,{keyPath:ZR});x.createIndex(hf,e6),x.createIndex(tE,t6)})(e))).next((()=>this.Ci(e,c))).next((()=>e.deleteObjectStore(ol)))),s<14&&i>=14&&(d=d.next((()=>this.Fi(e,c)))),s<15&&i>=15&&(d=d.next((()=>(function(g){g.createObjectStore(jx,{keyPath:c6,autoIncrement:!0}).createIndex(Op,u6,{unique:!1}),g.createObjectStore(Du,{keyPath:d6}).createIndex(sE,h6,{unique:!1}),g.createObjectStore(Ou,{keyPath:f6}).createIndex(rE,m6,{unique:!1})})(e)))),s<16&&i>=16&&(d=d.next((()=>{t.objectStore(Du).clear()})).next((()=>{t.objectStore(Ou).clear()}))),s<17&&i>=17&&(d=d.next((()=>{(function(g){g.createObjectStore(Ax,{keyPath:y6})})(e)}))),s<18&&i>=18&&X2()&&(d=d.next((()=>{t.objectStore(Du).clear()})).next((()=>{t.objectStore(Ou).clear()}))),d}wi(e){let t=0;return e.store(ol).ee(((s,i)=>{t+=$f(i)})).next((()=>{const s={byteSize:t};return e.store(Zu).put(Dp,s)}))}yi(e){const t=e.store(Wu),s=e.store(Ws);return t.J().next((i=>H.forEach(i,(c=>{const d=IDBKeyRange.bound([c.userId,gl],[c.userId,c.lastAcknowledgedBatchId]);return s.J(fl,d).next((f=>H.forEach(f,(g=>{Ce(g.userId===c.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const x=ul(this.serializer,g);return uT(e,c.userId,x).next((()=>{}))}))))}))))}Si(e){const t=e.store(Go),s=e.store(ol);return e.store(pl).get(Pf).next((i=>{const c=[];return s.ee(((d,f)=>{const g=new mt(d),x=(function(w){return[0,Vn(w)]})(g);c.push(t.get(x).next((v=>v?H.resolve():(w=>t.put({targetId:0,path:Vn(w),sequenceNumber:i.highestListenSequenceNumber}))(g))))})).next((()=>H.waitFor(c)))}))}bi(e,t){e.createObjectStore(ed,{keyPath:a6});const s=t.store(ed),i=new Hx,c=d=>{if(i.add(d)){const f=d.lastSegment(),g=d.popLast();return s.put({collectionId:f,parent:Vn(g)})}};return t.store(ol).ee({X:!0},((d,f)=>{const g=new mt(d);return c(g.popLast())})).next((()=>t.store(Fo).ee({X:!0},(([d,f,g],x)=>{const v=Ar(f);return c(v.popLast())}))))}Di(e){const t=e.store(Ho);return t.ee(((s,i)=>{const c=ju(i),d=aT(this.serializer,c);return t.put(d)}))}Ci(e,t){const s=t.store(ol),i=[];return s.ee(((c,d)=>{const f=t.store(Vf),g=(function(w){return w.document?new Ne(mt.fromString(w.document.name).popFirst(5)):w.noDocument?Ne.fromSegments(w.noDocument.path):w.unknownDocument?Ne.fromSegments(w.unknownDocument.path):Ee(36783)})(d).path.toArray(),x={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};i.push(f.put(x))})).next((()=>H.waitFor(i)))}Fi(e,t){const s=t.store(Ws),i=xT(this.serializer),c=new $x(jm.mi,this.serializer.yt);return s.J().next((d=>{const f=new Map;return d.forEach((g=>{let x=f.get(g.userId)??$e();ul(this.serializer,g).keys().forEach((v=>x=x.add(v))),f.set(g.userId,x)})),H.forEach(f,((g,x)=>{const v=new kn(x),w=Tm.wt(this.serializer,v),N=c.getIndexManager(v),C=Sm.wt(v,this.serializer,N,c.referenceDelegate);return new yT(i,C,w,N).recalculateAndSaveOverlaysForDocumentKeys(new Vp(t,es.ce),g).next()}))}))}}function $_(r){r.createObjectStore(Go,{keyPath:s6}).createIndex(Sx,r6,{unique:!0}),r.createObjectStore(Ho,{keyPath:"targetId"}).createIndex(nE,n6,{unique:!0}),r.createObjectStore(pl)}const ii="IndexedDbPersistence",Wg=18e5,Zg=5e3,ep="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",zk="main";class Kx{constructor(e,t,s,i,c,d,f,g,x,v,w=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Mi=c,this.window=d,this.document=f,this.xi=x,this.Oi=v,this.Ni=w,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=N=>Promise.resolve(),!Kx.v())throw new xe(te.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Sk(this,i),this.$i=t+zk,this.serializer=new rT(g),this.Ui=new bi(this.$i,this.Ni,new Lk(this.serializer)),this.hi=new gk,this.Pi=new Nk(this.referenceDelegate,this.serializer),this.remoteDocumentCache=xT(this.serializer),this.Ii=new mk,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,v===!1&&Wt(ii,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(te.FAILED_PRECONDITION,ep);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new es(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>tf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Ii(e))return fe(ii,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return fe(ii,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return wu(e).get(No).next((t=>H.resolve(this.es(t))))}ts(e){return tf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Wg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const s=hn(t,$o);return s.J().next((i=>{const c=this.ss(i,Wg),d=i.filter((f=>c.indexOf(f)===-1));return H.forEach(d,(f=>s.delete(f.clientId))).next((()=>d))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?H.resolve(!0):wu(e).get(No).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Zg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new xe(te.FAILED_PRECONDITION,ep);return!1}}return!(!this.networkEnabled||!this.inForeground)||tf(e).J().next((s=>this.ss(s,Zg).find((i=>{if(this.clientId!==i.clientId){const c=!this.networkEnabled&&i.networkEnabled,d=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(c||d&&f)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&fe(ii,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[gd,$o],(e=>{const t=new Vp(e,es.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((s=>this.rs(s.updateTimeMs,t)&&!this.us(s.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>tf(e).J().next((t=>this.ss(t,Wg).map((s=>s.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Sm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new _k(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Tm.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,s){fe(ii,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",c=(function(g){return g===18?w6:g===17?cE:g===16?v6:g===15?Ix:g===14?oE:g===13?lE:g===12?b6:g===11?iE:void Ee(60245)})(this.Ni);let d;return this.Ui.runTransaction(e,i,c,(f=>(d=new Vp(f,this.ci?this.ci.next():es.ce),t==="readwrite-primary"?this.Hi(d).next((g=>!!g||this.Yi(d))).next((g=>{if(!g)throw Wt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new xe(te.FAILED_PRECONDITION,YN);return s(d)})).next((g=>this.Xi(d).next((()=>g)))):this.Is(d).next((()=>s(d)))))).then((f=>(d.raiseOnCommittedEvent(),f)))}Is(e){return wu(e).get(No).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Zg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(te.FAILED_PRECONDITION,ep)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wu(e).put(No,t)}static v(){return bi.v()}Zi(e){const t=wu(e);return t.get(No).next((s=>this.es(s)?(fe(ii,"Releasing primary lease."),t.delete(No)):H.resolve()))}rs(e,t){const s=Date.now();return!(e<s-t)&&(!(e>s)||(Wt(`Detected an update time that is in the future: ${e} > ${s}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;Q2()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const s=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return fe(ii,`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Wt(ii,"Failed to get zombied client id.",s),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Wt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wu(r){return hn(r,gd)}function tf(r){return hn(r,$o)}function bT(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,t,s,i){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=i}static As(e,t){let s=$e(),i=$e();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:i=i.add(c.doc.key)}return new Qx(e,t.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Q2()?8:WN(dn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,i){const c={result:null};return this.ys(e,t).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,t,i,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new Uk;return this.Ss(e,t,d).next((f=>{if(c.result=f,this.Vs)return this.bs(e,t,d,f.size)}))})).next((()=>c.result))}bs(e,t,s,i){return s.documentReadCount<this.fs?(Io()<=et.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Co(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),H.resolve()):(Io()<=et.DEBUG&&fe("QueryEngine","Query:",Co(t),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.gs*i?(Io()<=et.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Co(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ys(t))):H.resolve())}ys(e,t){if(p_(t))return H.resolve(null);let s=ys(t);return this.indexManager.getIndexType(e,s).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Bf(t,null,"F"),s=ys(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=$e(...c);return this.ps.getDocuments(e,d).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const x=this.Ds(t,f);return this.Cs(t,x,d,g.readTime)?this.ys(e,Bf(t,null,"F")):this.vs(e,x,t,g)}))))})))))}ws(e,t,s,i){return p_(t)||i.isEqual(De.min())?H.resolve(null):this.ps.getDocuments(e,s).next((c=>{const d=this.Ds(t,c);return this.Cs(t,d,s,i)?H.resolve(null):(Io()<=et.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Co(t)),this.vs(e,d,t,QN(i,qo)).next((f=>f)))}))}Ds(e,t){let s=new _t(kE(e));return t.forEach(((i,c)=>{yd(e,c)&&(s=s.add(c))})),s}Cs(e,t,s,i){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(i)>0)}Ss(e,t,s){return Io()<=et.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Co(t)),this.ps.getDocumentsMatchingQuery(e,t,vs.min(),s)}vs(e,t,s,i){return this.ps.getDocumentsMatchingQuery(e,s,i).next((c=>(t.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="LocalStore",Bk=3e8;class qk{constructor(e,t,s,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ct(ze),this.xs=new va((c=>Tl(c)),pd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yT(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function wT(r,e,t,s){return new qk(r,e,t,s)}async function _T(r,e){const t=je(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let i;return t.mutationQueue.getAllMutationBatches(s).next((c=>(i=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],f=[];let g=$e();for(const x of i){d.push(x.batchId);for(const v of x.mutations)g=g.add(v.key)}for(const x of c){f.push(x.batchId);for(const v of x.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next((x=>({Ls:x,removedBatchIds:d,addedBatchIds:f})))}))}))}function Fk(r,e){const t=je(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const i=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,x,v){const w=x.batch,N=w.keys();let C=H.resolve();return N.forEach((M=>{C=C.next((()=>v.getEntry(g,M))).next((J=>{const B=x.docVersions.get(M);Ce(B!==null,48541),J.version.compareTo(B)<0&&(w.applyToRemoteDocument(J,x),J.isValidDocument()&&(J.setReadTime(x.commitVersion),v.addEntry(J)))}))})),C.next((()=>f.mutationQueue.removeMutationBatch(g,w)))})(t,s,e,c).next((()=>c.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=$e();for(let x=0;x<f.mutationResults.length;++x)f.mutationResults[x].transformResults.length>0&&(g=g.add(f.batch.mutations[x].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,i)))}))}function NT(r){const e=je(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Hk(r,e){const t=je(r),s=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const f=[];e.targetChanges.forEach(((v,w)=>{const N=i.get(w);if(!N)return;f.push(t.Pi.removeMatchingKeys(c,v.removedDocuments,w).next((()=>t.Pi.addMatchingKeys(c,v.addedDocuments,w))));let C=N.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(w)!==null?C=C.withResumeToken(Zt.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,s)),i=i.insert(w,C),(function(J,B,he){return J.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=Bk?!0:he.addedDocuments.size+he.modifiedDocuments.size+he.removedDocuments.size>0})(N,C,v)&&f.push(t.Pi.updateTargetData(c,C))}));let g=xs(),x=$e();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(c,v))})),f.push(Gk(c,d,e.documentUpdates).next((v=>{g=v.ks,x=v.qs}))),!s.isEqual(De.min())){const v=t.Pi.getLastRemoteSnapshotVersion(c).next((w=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));f.push(v)}return H.waitFor(f).next((()=>d.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,g,x))).next((()=>g))})).then((c=>(t.Ms=i,c)))}function Gk(r,e,t){let s=$e(),i=$e();return t.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let d=xs();return t.forEach(((f,g)=>{const x=c.get(f);g.isFoundDocument()!==x.isFoundDocument()&&(i=i.add(f)),g.isNoDocument()&&g.version.isEqual(De.min())?(e.removeEntry(f,g.readTime),d=d.insert(f,g)):!x.isValidDocument()||g.version.compareTo(x.version)>0||g.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(g),d=d.insert(f,g)):fe(Xx,"Ignoring outdated watch update for ",f,". Current version:",x.version," Watch version:",g.version)})),{ks:d,qs:i}}))}function $k(r,e){const t=je(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=gl),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Qf(r,e){const t=je(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let i;return t.Pi.getTargetData(s,e).next((c=>c?(i=c,H.resolve(i)):t.Pi.allocateTargetId(s).next((d=>(i=new la(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,i).next((()=>i)))))))})).then((s=>{const i=t.Ms.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function nc(r,e,t){const s=je(r),i=s.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,i)))}catch(d){if(!Ii(d))throw d;fe(Xx,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(i.target)}function Xf(r,e,t){const s=je(r);let i=De.min(),c=$e();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,x,v){const w=je(g),N=w.xs.get(v);return N!==void 0?H.resolve(w.Ms.get(N)):w.Pi.getTargetData(x,v)})(s,d,ys(e)).next((f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,f.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,t?i:De.min(),t?c:$e()))).next((f=>(ST(s,RE(e),f),{documents:f,Qs:c})))))}function ET(r,e){const t=je(r),s=je(t.Pi),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",(c=>s.At(c,e).next((d=>d?d.target:null))))}function TT(r,e){const t=je(r),s=t.Os.get(e)||De.min();return t.persistence.runTransaction("Get new document changes","readonly",(i=>t.Ns.getAllFromCollectionGroup(i,e,QN(s,qo),Number.MAX_SAFE_INTEGER))).then((i=>(ST(t,e,i),i)))}function ST(r,e,t){let s=r.Os.get(e)||De.min();t.forEach(((i,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(e,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="firestore_clients";function K_(r,e){return`${jT}_${r}_${e}`}const AT="firestore_mutations";function Q_(r,e,t){let s=`${AT}_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}const IT="firestore_targets";function tp(r,e){return`${IT}_${r}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr="SharedClientState";class Yf{constructor(e,t,s,i){this.user=e,this.batchId=t,this.state=s,this.error=i}static Ws(e,t,s){const i=JSON.parse(s);let c,d=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return d&&i.error&&(d=typeof i.error.message=="string"&&typeof i.error.code=="string",d&&(c=new xe(i.error.code,i.error.message))),d?new Yf(e,t,i.state,c):(Wt(Sr,`Failed to parse mutation state for ID '${t}': ${s}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zu{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Ws(e,t){const s=JSON.parse(t);let i,c=typeof s=="object"&&["not-current","current","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return c&&s.error&&(c=typeof s.error.message=="string"&&typeof s.error.code=="string",c&&(i=new xe(s.error.code,s.error.message))),c?new zu(e,s.state,i):(Wt(Sr,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const s=JSON.parse(t);let i=typeof s=="object"&&s.activeTargetIds instanceof Array,c=Ox();for(let d=0;i&&d<s.activeTargetIds.length;++d)i=ZN(s.activeTargetIds[d]),c=c.add(s.activeTargetIds[d]);return i?new Jf(e,c):(Wt(Sr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class Yx{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Yx(t.clientId,t.onlineState):(Wt(Sr,`Failed to parse online state: ${e}`),null)}}class Yp{constructor(){this.activeTargetIds=Ox()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class np{constructor(e,t,s,i,c){this.window=e,this.Mi=t,this.persistenceKey=s,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ct(ze),this.started=!1,this.Xs=[];const d=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.eo=K_(this.persistenceKey,this.Js),this.no=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Yp),this.ro=new RegExp(`^${jT}_${d}_([^_]*)$`),this.io=new RegExp(`^${AT}_${d}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${IT}_${d}_(\\d+)$`),this.oo=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this._o=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const s of e){if(s===this.Js)continue;const i=this.getItem(K_(this.persistenceKey,s));if(i){const c=Jf.Ws(s,i);c&&(this.Zs=this.Zs.insert(c.clientId,c))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const s=this.uo(t);s&&this.co(s)}for(const s of this.Xs)this.Ys(s);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((s,i)=>{i.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,s){this.ho(e,t,s),this.Po(e)}addLocalQueryTarget(e,t=!0){let s="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(tp(this.persistenceKey,e));if(i){const c=zu.Ws(e,i);c&&(s=c.state)}}return t&&this.To.zs(e),this.ao(),s}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(tp(this.persistenceKey,e))}updateQueryState(e,t,s){this.Io(e,t,s)}handleUserChange(e,t,s){t.forEach((i=>{this.Po(i)})),this.currentUser=e,s.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return fe(Sr,"READ",e,t),t}setItem(e,t){fe(Sr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){fe(Sr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(fe(Sr,"EVENT",t.key,t.newValue),t.key===this.eo)return void Wt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const s=this.Ro(t.key);return this.Vo(s,null)}{const s=this.mo(t.key,t.newValue);if(s)return this.Vo(s.clientId,s)}}else if(this.io.test(t.key)){if(t.newValue!==null){const s=this.fo(t.key,t.newValue);if(s)return this.po(s)}}else if(this.so.test(t.key)){if(t.newValue!==null){const s=this.yo(t.key,t.newValue);if(s)return this.wo(s)}}else if(t.key===this.oo){if(t.newValue!==null){const s=this.uo(t.newValue);if(s)return this.co(s)}}else if(t.key===this.no){const s=(function(c){let d=es.ce;if(c!=null)try{const f=JSON.parse(c);Ce(typeof f=="number",30636,{So:c}),d=f}catch(f){Wt(Sr,"Failed to read sequence number from WebStorage",f)}return d})(t.newValue);s!==es.ce&&this.sequenceNumberHandler(s)}else if(t.key===this._o){const s=this.bo(t.newValue);await Promise.all(s.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,s){const i=new Yf(this.currentUser,e,t,s),c=Q_(this.persistenceKey,this.currentUser,e);this.setItem(c,i.Gs())}Po(e){const t=Q_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,s){const i=tp(this.persistenceKey,e),c=new zu(e,t,s);this.setItem(i,c.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const s=this.Ro(e);return Jf.Ws(s,t)}fo(e,t){const s=this.io.exec(e),i=Number(s[1]),c=s[2]!==void 0?s[2]:null;return Yf.Ws(new kn(c),i,t)}yo(e,t){const s=this.so.exec(e),i=Number(s[1]);return zu.Ws(i,t)}uo(e){return Yx.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);fe(Sr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const s=t?this.Zs.insert(e,t):this.Zs.remove(e),i=this.lo(this.Zs),c=this.lo(s),d=[],f=[];return c.forEach((g=>{i.has(g)||d.push(g)})),i.forEach((g=>{c.has(g)||f.push(g)})),this.syncEngine.Fo(d,f).then((()=>{this.Zs=s}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=Ox();return e.forEach(((s,i)=>{t=t.unionWith(i.activeTargetIds)})),t}}class CT{constructor(){this.Mo=new Yp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Yp,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="ConnectivityMonitor";class Y_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(X_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(X_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nf=null;function Jp(){return nf===null?nf=(function(){return 268435456+Math.round(2147483648*Math.random())})():nf++,"0x"+nf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="RestConnection",Qk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Xk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${i}`,this.Wo=this.databaseId.database===Lf?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Go(e,t,s,i,c){const d=Jp(),f=this.zo(e,t.toUriEncodedString());fe(sp,`Sending RPC '${e}' ${d}:`,f,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,i,c);const{host:x}=new URL(f),v=lc(x);return this.Jo(e,f,g,s,v).then((w=>(fe(sp,`Received RPC '${e}' ${d}: `,w),w)),(w=>{throw Xu(sp,`RPC '${e}' ${d} failed with error: `,w,"url: ",f,"request:",s),w}))}Ho(e,t,s,i,c,d){return this.Go(e,t,s,i,c)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+uc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,c)=>e[c]=i)),s&&s.headers.forEach(((i,c)=>e[c]=i))}zo(e,t){const s=Qk[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn="WebChannelConnection";class Jk extends Xk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,i,c){const d=Jp();return new Promise(((f,g)=>{const x=new zN;x.setWithCredentials(!0),x.listenOnce(UN.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case cf.NO_ERROR:const w=x.getResponseJson();fe(Rn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(w)),f(w);break;case cf.TIMEOUT:fe(Rn,`RPC '${e}' ${d} timed out`),g(new xe(te.DEADLINE_EXCEEDED,"Request time out"));break;case cf.HTTP_ERROR:const N=x.getStatus();if(fe(Rn,`RPC '${e}' ${d} failed with status:`,N,"response text:",x.getResponseText()),N>0){let C=x.getResponseJson();Array.isArray(C)&&(C=C[0]);const M=C==null?void 0:C.error;if(M&&M.status&&M.message){const J=(function(he){const oe=he.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(oe)>=0?oe:te.UNKNOWN})(M.status);g(new xe(J,M.message))}else g(new xe(te.UNKNOWN,"Server responded with status "+x.getStatus()))}else g(new xe(te.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:d,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{fe(Rn,`RPC '${e}' ${d} completed.`)}}));const v=JSON.stringify(i);fe(Rn,`RPC '${e}' ${d} sending request:`,i),x.send(t,"POST",v,s,15)}))}T_(e,t,s){const i=Jp(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=FN(),f=qN(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(g.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=c.join("");fe(Rn,`Creating RPC '${e}' stream ${i}: ${v}`,g);const w=d.createWebChannel(v,g);this.I_(w);let N=!1,C=!1;const M=new Yk({Yo:B=>{C?fe(Rn,`Not sending because RPC '${e}' stream ${i} is closed:`,B):(N||(fe(Rn,`Opening RPC '${e}' stream ${i} transport.`),w.open(),N=!0),fe(Rn,`RPC '${e}' stream ${i} sending:`,B),w.send(B))},Zo:()=>w.close()}),J=(B,he,oe)=>{B.listen(he,(le=>{try{oe(le)}catch(_e){setTimeout((()=>{throw _e}),0)}}))};return J(w,Eu.EventType.OPEN,(()=>{C||(fe(Rn,`RPC '${e}' stream ${i} transport opened.`),M.o_())})),J(w,Eu.EventType.CLOSE,(()=>{C||(C=!0,fe(Rn,`RPC '${e}' stream ${i} transport closed`),M.a_(),this.E_(w))})),J(w,Eu.EventType.ERROR,(B=>{C||(C=!0,Xu(Rn,`RPC '${e}' stream ${i} transport errored. Name:`,B.name,"Message:",B.message),M.a_(new xe(te.UNAVAILABLE,"The operation could not be completed")))})),J(w,Eu.EventType.MESSAGE,(B=>{var he;if(!C){const oe=B.data[0];Ce(!!oe,16349);const le=oe,_e=(le==null?void 0:le.error)||((he=le[0])==null?void 0:he.error);if(_e){fe(Rn,`RPC '${e}' stream ${i} received error:`,_e);const me=_e.status;let G=(function(A){const O=on[A];if(O!==void 0)return GE(O)})(me),S=_e.message;G===void 0&&(G=te.INTERNAL,S="Unknown error status: "+me+" with message "+_e.message),C=!0,M.a_(new xe(G,S)),w.close()}else fe(Rn,`RPC '${e}' stream ${i} received:`,oe),M.u_(oe)}})),J(f,BN.STAT_EVENT,(B=>{B.stat===Cp.PROXY?fe(Rn,`RPC '${e}' stream ${i} detected buffering proxy`):B.stat===Cp.NOPROXY&&fe(Rn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{M.__()}),0),M}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(){return typeof window<"u"?window:null}function bf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(r){return new nk(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,t,s=1e3,i=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=i,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-s);i>0&&fe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="PersistentStream";class DT{constructor(e,t,s,i,c,d,f,g){this.Mi=e,this.S_=s,this.b_=i,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Wt(t.toString()),Wt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,i])=>{this.D_===t&&this.G_(s,i)}),(s=>{e((()=>{const i=new xe(te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{s((()=>this.z_(i)))})),this.stream.onMessage((i=>{s((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(J_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(fe(J_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Wk extends DT{constructor(e,t,s,i,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,i,d),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=ak(this.serializer,e),s=(function(c){if(!("targetChange"in c))return De.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?De.min():d.readTime?qn(d.readTime):De.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Gp(this.serializer),t.addTarget=(function(c,d){let f;const g=d.target;if(f=zf(g)?{documents:ZE(c,g)}:{query:qx(c,g).ft},f.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){f.resumeToken=QE(c,d.resumeToken);const x=Fp(c,d.expectedCount);x!==null&&(f.expectedCount=x)}else if(d.snapshotVersion.compareTo(De.min())>0){f.readTime=tc(c,d.snapshotVersion.toTimestamp());const x=Fp(c,d.expectedCount);x!==null&&(f.expectedCount=x)}return f})(this.serializer,e);const s=ok(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Gp(this.serializer),t.removeTarget=e,this.q_(t)}}class Zk extends DT{constructor(e,t,s,i,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,i,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=ik(e.writeResults,e.commitTime),s=qn(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Gp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>Ff(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{}class t9 extends e9{constructor(e,t,s,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new xe(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,Hp(t,s),i,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xe(te.UNKNOWN,c.toString())}))}Ho(e,t,s,i,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,f])=>this.connection.Ho(e,Hp(t,s),i,d,f,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new xe(te.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class n9{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wt(t),this.aa=!1):fe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il="RemoteStore";class s9{constructor(e,t,s,i,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Ol(this)&&(fe(Il,"Restarting streams for network reachability change."),await(async function(g){const x=je(g);x.Ea.add(4),await wd(x),x.Ra.set("Unknown"),x.Ea.delete(4),await Im(x)})(this))}))})),this.Ra=new n9(s,i)}}async function Im(r){if(Ol(r))for(const e of r.da)await e(!0)}async function wd(r){for(const e of r.da)await e(!1)}function Cm(r,e){const t=je(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Zx(t)?Wx(t):mc(t).O_()&&Jx(t,e))}function sc(r,e){const t=je(r),s=mc(t);t.Ia.delete(e),s.O_()&&OT(t,e),t.Ia.size===0&&(s.O_()?s.L_():Ol(t)&&t.Ra.set("Unknown"))}function Jx(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}mc(r).Y_(e)}function OT(r,e){r.Va.Ue(e),mc(r).Z_(e)}function Wx(r){r.Va=new W6({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),mc(r).start(),r.Ra.ua()}function Zx(r){return Ol(r)&&!mc(r).x_()&&r.Ia.size>0}function Ol(r){return je(r).Ea.size===0}function MT(r){r.Va=void 0}async function r9(r){r.Ra.set("Online")}async function a9(r){r.Ia.forEach(((e,t)=>{Jx(r,e)}))}async function i9(r,e){MT(r),Zx(r)?(r.Ra.ha(e),Wx(r)):r.Ra.set("Unknown")}async function l9(r,e,t){if(r.Ra.set("Online"),e instanceof KE&&e.state===2&&e.cause)try{await(async function(i,c){const d=c.cause;for(const f of c.targetIds)i.Ia.has(f)&&(await i.remoteSyncer.rejectListen(f,d),i.Ia.delete(f),i.Va.removeTarget(f))})(r,e)}catch(s){fe(Il,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Wf(r,s)}else if(e instanceof xf?r.Va.Ze(e):e instanceof $E?r.Va.st(e):r.Va.tt(e),!t.isEqual(De.min()))try{const s=await NT(r.localStore);t.compareTo(s)>=0&&await(function(c,d){const f=c.Va.Tt(d);return f.targetChanges.forEach(((g,x)=>{if(g.resumeToken.approximateByteSize()>0){const v=c.Ia.get(x);v&&c.Ia.set(x,v.withResumeToken(g.resumeToken,d))}})),f.targetMismatches.forEach(((g,x)=>{const v=c.Ia.get(g);if(!v)return;c.Ia.set(g,v.withResumeToken(Zt.EMPTY_BYTE_STRING,v.snapshotVersion)),OT(c,g);const w=new la(v.target,g,x,v.sequenceNumber);Jx(c,w)})),c.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){fe(Il,"Failed to raise snapshot:",s),await Wf(r,s)}}async function Wf(r,e,t){if(!Ii(e))throw e;r.Ea.add(1),await wd(r),r.Ra.set("Offline"),t||(t=()=>NT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{fe(Il,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Im(r)}))}function VT(r,e){return e().catch((t=>Wf(r,t,e)))}async function fc(r){const e=je(r),t=Ti(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:gl;for(;o9(e);)try{const i=await $k(e.localStore,s);if(i===null){e.Ta.length===0&&t.L_();break}s=i.batchId,c9(e,i)}catch(i){await Wf(e,i)}PT(e)&&LT(e)}function o9(r){return Ol(r)&&r.Ta.length<10}function c9(r,e){r.Ta.push(e);const t=Ti(r);t.O_()&&t.X_&&t.ea(e.mutations)}function PT(r){return Ol(r)&&!Ti(r).x_()&&r.Ta.length>0}function LT(r){Ti(r).start()}async function u9(r){Ti(r).ra()}async function d9(r){const e=Ti(r);for(const t of r.Ta)e.ea(t.mutations)}async function h9(r,e,t){const s=r.Ta.shift(),i=Lx.from(s,e,t);await VT(r,(()=>r.remoteSyncer.applySuccessfulWrite(i))),await fc(r)}async function f9(r,e){e&&Ti(r).X_&&await(async function(s,i){if((function(d){return X6(d)&&d!==te.ABORTED})(i.code)){const c=s.Ta.shift();Ti(s).B_(),await VT(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,i))),await fc(s)}})(r,e),PT(r)&&LT(r)}async function W_(r,e){const t=je(r);t.asyncQueue.verifyOperationInProgress(),fe(Il,"RemoteStore received new credentials");const s=Ol(t);t.Ea.add(3),await wd(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Im(t)}async function Wp(r,e){const t=je(r);e?(t.Ea.delete(2),await Im(t)):e||(t.Ea.add(2),await wd(t),t.Ra.set("Unknown"))}function mc(r){return r.ma||(r.ma=(function(t,s,i){const c=je(t);return c.sa(),new Wk(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,i)})(r.datastore,r.asyncQueue,{Xo:r9.bind(null,r),t_:a9.bind(null,r),r_:i9.bind(null,r),H_:l9.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Zx(r)?Wx(r):r.Ra.set("Unknown")):(await r.ma.stop(),MT(r))}))),r.ma}function Ti(r){return r.fa||(r.fa=(function(t,s,i){const c=je(t);return c.sa(),new Zk(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,i)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:u9.bind(null,r),r_:f9.bind(null,r),ta:d9.bind(null,r),na:h9.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await fc(r)):(await r.fa.stop(),r.Ta.length>0&&(fe(Il,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,t,s,i,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=i,this.removalCallback=c,this.deferred=new zs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,i,c){const d=Date.now()+s,f=new ey(e,t,d,i,c);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rm(r,e){if(Wt("AsyncQueue",`${e}: ${r}`),Ii(r))return new xe(te.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{static emptySet(e){return new zo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ne.comparator(t.key,s.key):(t,s)=>Ne.comparator(t.key,s.key),this.keyedMap=Tu(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,c=s.getNext().key;if(!i.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new zo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(){this.ga=new Ct(Ne.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ee(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class rc{constructor(e,t,s,i,c,d,f,g,x){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=x}static fromInitialDocuments(e,t,s,i,c){const d=[];return t.forEach((f=>{d.push({type:0,doc:f})})),new rc(e,t,zo.emptySet(t),d,s,i,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==s[i].type||!t[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class g9{constructor(){this.queries=e2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const i=je(t),c=i.queries;i.queries=e2(),c.forEach(((d,f)=>{for(const g of f.Sa)g.onError(s)}))})(this,new xe(te.ABORTED,"Firestore shutting down"))}}function e2(){return new va((r=>CE(r)),wm)}async function ty(r,e){const t=je(r);let s=3;const i=e.query;let c=t.queries.get(i);c?!c.ba()&&e.Da()&&(s=2):(c=new m9,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await t.onListen(i,!0);break;case 1:c.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(d){const f=Rm(d,`Initialization of query '${Co(e.query)}' failed`);return void e.onError(f)}t.queries.set(i,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&sy(t)}async function ny(r,e){const t=je(r),s=e.query;let i=3;const c=t.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?i=e.Da()?0:1:!c.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function p9(r,e){const t=je(r);let s=!1;for(const i of e){const c=i.query,d=t.queries.get(c);if(d){for(const f of d.Sa)f.Fa(i)&&(s=!0);d.wa=i}}s&&sy(t)}function x9(r,e,t){const s=je(r),i=s.queries.get(e);if(i)for(const c of i.Sa)c.onError(t);s.queries.delete(e)}function sy(r){r.Ca.forEach((e=>{e.next()}))}var Zp,t2;(t2=Zp||(Zp={})).Ma="default",t2.Cache="cache";class ry{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new rc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=rc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Zp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e){this.key=e}}class UT{constructor(e){this.key=e}}class BT{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=$e(),this.mutatedKeys=$e(),this.eu=kE(e),this.tu=new zo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new Z_,i=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,d=i,f=!1;const g=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,x=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((v,w)=>{const N=i.get(v),C=yd(this.query,w)?w:null,M=!!N&&this.mutatedKeys.has(N.key),J=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let B=!1;N&&C?N.data.isEqual(C.data)?M!==J&&(s.track({type:3,doc:C}),B=!0):this.su(N,C)||(s.track({type:2,doc:C}),B=!0,(g&&this.eu(C,g)>0||x&&this.eu(C,x)<0)&&(f=!0)):!N&&C?(s.track({type:0,doc:C}),B=!0):N&&!C&&(s.track({type:1,doc:N}),B=!0,(g||x)&&(f=!0)),B&&(C?(d=d.add(C),c=J?c.add(v):c.delete(v)):(d=d.delete(v),c=c.delete(v)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const v=this.query.limitType==="F"?d.last():d.first();d=d.delete(v.key),c=c.delete(v.key),s.track({type:1,doc:v})}return{tu:d,iu:s,Cs:f,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,i){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((v,w)=>(function(C,M){const J=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Rt:B})}};return J(C)-J(M)})(v.type,w.type)||this.eu(v.doc,w.doc))),this.ou(s),i=i??!1;const f=t&&!i?this._u():[],g=this.Xa.size===0&&this.current&&!i?1:0,x=g!==this.Za;return this.Za=g,d.length!==0||x?{snapshot:new rc(this.query,e.tu,c,d,e.mutatedKeys,g===0,x,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Z_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=$e(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new UT(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new zT(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=$e();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return rc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const gc="SyncEngine";class y9{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class b9{constructor(e){this.key=e,this.hu=!1}}class v9{constructor(e,t,s,i,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=i,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new va((f=>CE(f)),wm),this.Iu=new Map,this.Eu=new Set,this.du=new Ct(Ne.comparator),this.Au=new Map,this.Ru=new Gx,this.Vu={},this.mu=new Map,this.fu=Al.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function w9(r,e,t=!0){const s=km(r);let i;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),i=c.view.lu()):i=await qT(s,e,t,!0),i}async function _9(r,e){const t=km(r);await qT(t,e,!0,!1)}async function qT(r,e,t,s){const i=await Qf(r.localStore,ys(e)),c=i.targetId,d=r.sharedClientState.addLocalQueryTarget(c,t);let f;return s&&(f=await ay(r,e,c,d==="current",i.resumeToken)),r.isPrimaryClient&&t&&Cm(r.remoteStore,i),f}async function ay(r,e,t,s,i){r.pu=(w,N,C)=>(async function(J,B,he,oe){let le=B.view.ru(he);le.Cs&&(le=await Xf(J.localStore,B.query,!1).then((({documents:S})=>B.view.ru(S,le))));const _e=oe&&oe.targetChanges.get(B.targetId),me=oe&&oe.targetMismatches.get(B.targetId)!=null,G=B.view.applyChanges(le,J.isPrimaryClient,_e,me);return ex(J,B.targetId,G.au),G.snapshot})(r,w,N,C);const c=await Xf(r.localStore,e,!0),d=new BT(e,c.Qs),f=d.ru(c.documents),g=vd.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",i),x=d.applyChanges(f,r.isPrimaryClient,g);ex(r,t,x.au);const v=new y9(e,t,d);return r.Tu.set(e,v),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),x.snapshot}async function N9(r,e,t){const s=je(r),i=s.Tu.get(e),c=s.Iu.get(i.targetId);if(c.length>1)return s.Iu.set(i.targetId,c.filter((d=>!wm(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await nc(s.localStore,i.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(i.targetId),t&&sc(s.remoteStore,i.targetId),ac(s,i.targetId)})).catch(Ai)):(ac(s,i.targetId),await nc(s.localStore,i.targetId,!0))}async function E9(r,e){const t=je(r),s=t.Tu.get(e),i=t.Iu.get(s.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),sc(t.remoteStore,s.targetId))}async function T9(r,e,t){const s=cy(r);try{const i=await(function(d,f){const g=je(d),x=vt.now(),v=f.reduce(((C,M)=>C.add(M.key)),$e());let w,N;return g.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let M=xs(),J=$e();return g.Ns.getEntries(C,v).next((B=>{M=B,M.forEach(((he,oe)=>{oe.isValidDocument()||(J=J.add(he))}))})).next((()=>g.localDocuments.getOverlayedDocuments(C,M))).next((B=>{w=B;const he=[];for(const oe of f){const le=$6(oe,w.get(oe.key).overlayedDocument);le!=null&&he.push(new wa(oe.key,le,bE(le.value.mapValue),Mn.exists(!0)))}return g.mutationQueue.addMutationBatch(C,x,he,f)})).next((B=>{N=B;const he=B.applyToLocalDocumentSet(w,J);return g.documentOverlayCache.saveOverlays(C,B.batchId,he)}))})).then((()=>({batchId:N.batchId,changes:OE(w)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),(function(d,f,g){let x=d.Vu[d.currentUser.toKey()];x||(x=new Ct(ze)),x=x.insert(f,g),d.Vu[d.currentUser.toKey()]=x})(s,i.batchId,t),await Ri(s,i.changes),await fc(s.remoteStore)}catch(i){const c=Rm(i,"Failed to persist write");t.reject(c)}}async function FT(r,e){const t=je(r);try{const s=await Hk(t.localStore,e);e.targetChanges.forEach(((i,c)=>{const d=t.Au.get(c);d&&(Ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?d.hu=!0:i.modifiedDocuments.size>0?Ce(d.hu,14607):i.removedDocuments.size>0&&(Ce(d.hu,42227),d.hu=!1))})),await Ri(t,s,e)}catch(s){await Ai(s)}}function n2(r,e,t){const s=je(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const i=[];s.Tu.forEach(((c,d)=>{const f=d.view.va(e);f.snapshot&&i.push(f.snapshot)})),(function(d,f){const g=je(d);g.onlineState=f;let x=!1;g.queries.forEach(((v,w)=>{for(const N of w.Sa)N.va(f)&&(x=!0)})),x&&sy(g)})(s.eventManager,e),i.length&&s.Pu.H_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function S9(r,e,t){const s=je(r);s.sharedClientState.updateQueryState(e,"rejected",t);const i=s.Au.get(e),c=i&&i.key;if(c){let d=new Ct(Ne.comparator);d=d.insert(c,$t.newNoDocument(c,De.min()));const f=$e().add(c),g=new bd(De.min(),new Map,new Ct(ze),d,f);await FT(s,g),s.du=s.du.remove(c),s.Au.delete(e),oy(s)}else await nc(s.localStore,e,!1).then((()=>ac(s,e,t))).catch(Ai)}async function j9(r,e){const t=je(r),s=e.batch.batchId;try{const i=await Fk(t.localStore,e);ly(t,s,null),iy(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ri(t,i)}catch(i){await Ai(i)}}async function A9(r,e,t){const s=je(r);try{const i=await(function(d,f){const g=je(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let v;return g.mutationQueue.lookupMutationBatch(x,f).next((w=>(Ce(w!==null,37113),v=w.keys(),g.mutationQueue.removeMutationBatch(x,w)))).next((()=>g.mutationQueue.performConsistencyCheck(x))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(x,v,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,v))).next((()=>g.localDocuments.getDocuments(x,v)))}))})(s.localStore,e);ly(s,e,t),iy(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ri(s,i)}catch(i){await Ai(i)}}function iy(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function ly(r,e,t){const s=je(r);let i=s.Vu[s.currentUser.toKey()];if(i){const c=i.get(e);c&&(t?c.reject(t):c.resolve(),i=i.remove(e)),s.Vu[s.currentUser.toKey()]=i}}function ac(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||HT(r,s)}))}function HT(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(sc(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),oy(r))}function ex(r,e,t){for(const s of t)s instanceof zT?(r.Ru.addReference(s.key,e),I9(r,s)):s instanceof UT?(fe(gc,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||HT(r,s.key)):Ee(19791,{wu:s})}function I9(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(fe(gc,"New document in limbo: "+t),r.Eu.add(s),oy(r))}function oy(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Ne(mt.fromString(e)),s=r.fu.next();r.Au.set(s,new b9(t)),r.du=r.du.insert(t,s),Cm(r.remoteStore,new la(ys(xd(t.path)),s,"TargetPurposeLimboResolution",es.ce))}}async function Ri(r,e,t){const s=je(r),i=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{d.push(s.pu(g,e,t).then((x=>{var v;if((x||t)&&s.isPrimaryClient){const w=x?!x.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(x){i.push(x);const w=Qx.As(g.targetId,x);c.push(w)}})))})),await Promise.all(d),s.Pu.H_(i),await(async function(g,x){const v=je(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>H.forEach(x,(N=>H.forEach(N.Es,(C=>v.persistence.referenceDelegate.addReference(w,N.targetId,C))).next((()=>H.forEach(N.ds,(C=>v.persistence.referenceDelegate.removeReference(w,N.targetId,C)))))))))}catch(w){if(!Ii(w))throw w;fe(Xx,"Failed to update sequence numbers: "+w)}for(const w of x){const N=w.targetId;if(!w.fromCache){const C=v.Ms.get(N),M=C.snapshotVersion,J=C.withLastLimboFreeSnapshotVersion(M);v.Ms=v.Ms.insert(N,J)}}})(s.localStore,c))}async function C9(r,e){const t=je(r);if(!t.currentUser.isEqual(e)){fe(gc,"User change. New user:",e.toKey());const s=await _T(t.localStore,e);t.currentUser=e,(function(c,d){c.mu.forEach((f=>{f.forEach((g=>{g.reject(new xe(te.CANCELLED,d))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ri(t,s.Ls)}}function R9(r,e){const t=je(r),s=t.Au.get(e);if(s&&s.hu)return $e().add(s.key);{let i=$e();const c=t.Iu.get(e);if(!c)return i;for(const d of c){const f=t.Tu.get(d);i=i.unionWith(f.view.nu)}return i}}async function k9(r,e){const t=je(r),s=await Xf(t.localStore,e.query,!0),i=e.view.cu(s);return t.isPrimaryClient&&ex(t,e.targetId,i.au),i}async function D9(r,e){const t=je(r);return TT(t.localStore,e).then((s=>Ri(t,s)))}async function O9(r,e,t,s){const i=je(r),c=await(function(f,g){const x=je(f),v=je(x.mutationQueue);return x.persistence.runTransaction("Lookup mutation documents","readonly",(w=>v.er(w,g).next((N=>N?x.localDocuments.getDocuments(w,N):H.resolve(null)))))})(i.localStore,e);c!==null?(t==="pending"?await fc(i.remoteStore):t==="acknowledged"||t==="rejected"?(ly(i,e,s||null),iy(i,e),(function(f,g){je(je(f).mutationQueue).ir(g)})(i.localStore,e)):Ee(6720,"Unknown batchState",{Su:t}),await Ri(i,c)):fe(gc,"Cannot apply mutation batch with id: "+e)}async function M9(r,e){const t=je(r);if(km(t),cy(t),e===!0&&t.gu!==!0){const s=t.sharedClientState.getAllActiveQueryTargets(),i=await s2(t,s.toArray());t.gu=!0,await Wp(t.remoteStore,!0);for(const c of i)Cm(t.remoteStore,c)}else if(e===!1&&t.gu!==!1){const s=[];let i=Promise.resolve();t.Iu.forEach(((c,d)=>{t.sharedClientState.isLocalQueryTarget(d)?s.push(d):i=i.then((()=>(ac(t,d),nc(t.localStore,d,!0)))),sc(t.remoteStore,d)})),await i,await s2(t,s),(function(d){const f=je(d);f.Au.forEach(((g,x)=>{sc(f.remoteStore,x)})),f.Ru.Jr(),f.Au=new Map,f.du=new Ct(Ne.comparator)})(t),t.gu=!1,await Wp(t.remoteStore,!1)}}async function s2(r,e,t){const s=je(r),i=[],c=[];for(const d of e){let f;const g=s.Iu.get(d);if(g&&g.length!==0){f=await Qf(s.localStore,ys(g[0]));for(const x of g){const v=s.Tu.get(x),w=await k9(s,v);w.snapshot&&c.push(w.snapshot)}}else{const x=await ET(s.localStore,d);f=await Qf(s.localStore,x),await ay(s,GT(x),d,!1,f.resumeToken)}i.push(f)}return s.Pu.H_(c),i}function GT(r){return jE(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function V9(r){return(function(t){return je(je(t).persistence).Ts()})(je(r).localStore)}async function P9(r,e,t,s){const i=je(r);if(i.gu)return void fe(gc,"Ignoring unexpected query state notification.");const c=i.Iu.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const d=await TT(i.localStore,RE(c[0])),f=bd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Zt.EMPTY_BYTE_STRING);await Ri(i,d,f);break}case"rejected":await nc(i.localStore,e,!0),ac(i,e,s);break;default:Ee(64155,t)}}async function L9(r,e,t){const s=km(r);if(s.gu){for(const i of e){if(s.Iu.has(i)&&s.sharedClientState.isActiveQueryTarget(i)){fe(gc,"Adding an already active target "+i);continue}const c=await ET(s.localStore,i),d=await Qf(s.localStore,c);await ay(s,GT(c),d.targetId,!1,d.resumeToken),Cm(s.remoteStore,d)}for(const i of t)s.Iu.has(i)&&await nc(s.localStore,i,!1).then((()=>{sc(s.remoteStore,i),ac(s,i)})).catch(Ai)}}function km(r){const e=je(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=FT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=S9.bind(null,e),e.Pu.H_=p9.bind(null,e.eventManager),e.Pu.yu=x9.bind(null,e.eventManager),e}function cy(r){const e=je(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=j9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=A9.bind(null,e),e}class id{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Am(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return wT(this.persistence,new vT,e.initialUser,this.serializer)}Cu(e){return new $x(jm.mi,this.serializer)}Du(e){return new CT}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}id.provider={build:()=>new id};class z9 extends id{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ce(this.persistence.referenceDelegate instanceof Kf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new mT(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new $x((s=>Kf.mi(s,t)),this.serializer)}}class $T extends id{constructor(e,t,s){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await cy(this.xu.syncEngine),await fc(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return wT(this.persistence,new vT,e.initialUser,this.serializer)}Fu(e,t){const s=this.persistence.referenceDelegate.garbageCollector;return new mT(s,e.asyncQueue,t)}Mu(e,t){const s=new XR(t,this.persistence);return new QR(e.asyncQueue,s)}Cu(e){const t=bT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new Kx(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,RT(),bf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new CT}}class U9 extends $T{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof np&&(this.sharedClientState.syncEngine={Co:O9.bind(null,t),vo:P9.bind(null,t),Fo:L9.bind(null,t),Ts:V9.bind(null,t),Do:D9.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async s=>{await M9(this.xu.syncEngine,s),this.gcScheduler&&(s&&!this.gcScheduler.started?this.gcScheduler.start():s||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(s&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():s||this.indexBackfillerScheduler.stop())}))}Du(e){const t=RT();if(!np.v(t))throw new xe(te.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=bT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new np(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class ld{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>n2(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=C9.bind(null,this.syncEngine),await Wp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new g9})()}createDatastore(e){const t=Am(e.databaseInfo.databaseId),s=(function(c){return new Jk(c)})(e.databaseInfo);return(function(c,d,f,g){return new t9(c,d,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,i,c,d,f){return new s9(s,i,c,d,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>n2(this.syncEngine,t,0)),(function(){return Y_.v()?new Y_:new Kk})())}createSyncEngine(e,t){return(function(i,c,d,f,g,x,v){const w=new v9(i,c,d,f,g,x);return v&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const c=je(i);fe(Il,"RemoteStore shutting down."),c.Ea.add(5),await wd(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}ld.provider={build:()=>new ld};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Wt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="FirestoreClient";class B9{constructor(e,t,s,i,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=i,this.user=kn.UNAUTHENTICATED,this.clientId=Nx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{fe(Si,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(fe(Si,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Rm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function rp(r,e){r.asyncQueue.verifyOperationInProgress(),fe(Si,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async i=>{s.isEqual(i)||(await _T(e.localStore,i),s=i)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function r2(r,e){r.asyncQueue.verifyOperationInProgress();const t=await KT(r);fe(Si,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>W_(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,i)=>W_(e.remoteStore,i))),r._onlineComponents=e}async function KT(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){fe(Si,"Using user provided OfflineComponentProvider");try{await rp(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===te.FAILED_PRECONDITION||i.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Xu("Error using user provided cache. Falling back to memory cache: "+t),await rp(r,new id)}}else fe(Si,"Using default OfflineComponentProvider"),await rp(r,new z9(void 0));return r._offlineComponents}async function dy(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(fe(Si,"Using user provided OnlineComponentProvider"),await r2(r,r._uninitializedComponentsProvider._online)):(fe(Si,"Using default OnlineComponentProvider"),await r2(r,new ld))),r._onlineComponents}function q9(r){return KT(r).then((e=>e.localStore))}function F9(r){return dy(r).then((e=>e.syncEngine))}function H9(r){return dy(r).then((e=>e.datastore))}async function Zf(r){const e=await dy(r),t=e.eventManager;return t.onListen=w9.bind(null,e.syncEngine),t.onUnlisten=N9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=E9.bind(null,e.syncEngine),t}function G9(r,e,t={}){const s=new zs;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,f,g,x){const v=new uy({next:N=>{v.Nu(),d.enqueueAndForget((()=>ny(c,w)));const C=N.docs.has(f);!C&&N.fromCache?x.reject(new xe(te.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&N.fromCache&&g&&g.source==="server"?x.reject(new xe(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(N)},error:N=>x.reject(N)}),w=new ry(xd(f.path),v,{includeMetadataChanges:!0,qa:!0});return ty(c,w)})(await Zf(r),r.asyncQueue,e,t,s))),s.promise}function $9(r,e){const t=new zs;return r.asyncQueue.enqueueAndForget((async()=>(async function(i,c,d){try{const f=await Xf(i,c,!0),g=new BT(c,f.Qs),x=g.ru(f.documents),v=g.applyChanges(x,!1);d.resolve(v.snapshot)}catch(f){const g=Rm(f,`Failed to execute query '${c} against cache`);d.reject(g)}})(await q9(r),e,t))),t.promise}function QT(r,e,t={}){const s=new zs;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,f,g,x){const v=new uy({next:N=>{v.Nu(),d.enqueueAndForget((()=>ny(c,w))),N.fromCache&&g.source==="server"?x.reject(new xe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(N)},error:N=>x.reject(N)}),w=new ry(f,v,{includeMetadataChanges:!0,qa:!0});return ty(c,w)})(await Zf(r),r.asyncQueue,e,t,s))),s.promise}function K9(r,e,t){const s=new zs;return r.asyncQueue.enqueueAndForget((async()=>{try{const i=await H9(r);s.resolve((async function(d,f,g){var J;const x=je(d),{request:v,gt:w,parent:N}=lk(x.serializer,M6(f),g);x.connection.$o||delete v.parent;const C=(await x.Ho("RunAggregationQuery",x.serializer.databaseId,N,v,1)).filter((B=>!!B.result));Ce(C.length===1,64727);const M=(J=C[0].result)==null?void 0:J.aggregateFields;return Object.keys(M).reduce(((B,he)=>(B[w[he]]=M[he],B)),{})})(i,e,t))}catch(i){s.reject(i)}})),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9="firestore.googleapis.com",i2=!0;class l2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new xe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Q9,this.ssl=i2}else this.host=e.host,this.ssl=e.ssl??i2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fT)throw new xe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new xe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new xe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new xe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,i){return s.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hy{constructor(e,t,s,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new MR;switch(s.type){case"firstParty":return new LR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new xe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=a2.get(t);s&&(fe("ComponentProvider","Removing Datastore"),a2.delete(t),s.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new sr(this.firestore,e,this._query)}}class Kt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(md(t,Kt._jsonSchema))return new Kt(e,s||null,new Ne(mt.fromString(t.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:cn("string",Kt._jsonSchemaVersion),referencePath:cn("string")};class vi extends sr{constructor(e,t,s){super(e,t,xd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new Ne(e))}withConverter(e){return new vi(this.firestore,e,this._path)}}function it(r,e,...t){if(r=Qt(r),$N("collection","path",e),r instanceof hy){const s=mt.fromString(e,...t);return Jw(s),new vi(r,null,s)}{if(!(r instanceof Kt||r instanceof vi))throw new xe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(mt.fromString(e,...t));return Jw(s),new vi(r.firestore,null,s)}}function Hn(r,e,...t){if(r=Qt(r),arguments.length===1&&(e=Nx.newId()),$N("doc","path",e),r instanceof hy){const s=mt.fromString(e,...t);return Yw(s),new Kt(r,null,new Ne(s))}{if(!(r instanceof Kt||r instanceof vi))throw new xe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(mt.fromString(e,...t));return Yw(s),new Kt(r.firestore,r instanceof vi?r.converter:null,new Ne(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2="AsyncQueue";class c2{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kT(this,"async_queue_retry"),this._c=()=>{const s=bf();s&&fe(o2,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=bf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=bf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new zs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ii(e))throw e;fe(o2,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Wt("INTERNAL UNHANDLED ERROR: ",u2(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=ey.createAndSchedule(this,e,t,s,(c=>this.hc(c)));return this.tc.push(i),i}uc(){this.nc&&Ee(47125,{Pc:u2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function u2(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(r){return(function(t,s){if(typeof t!="object"||t===null)return!1;const i=t;for(const c of s)if(c in i&&typeof i[c]=="function")return!0;return!1})(r,["next","error","complete"])}class Bs extends hy{constructor(e,t,s,i){super(e,t,s,i),this.type="firestore",this._queue=new c2,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new c2(e),this._firestoreClient=void 0,await e}}}function X9(r,e,t){t||(t=Lf);const s=Dl(r,"firestore");if(s.isInitialized(t)){const i=s.getImmediate({identifier:t}),c=s.getOptions(t);if(_i(c,e))return i;throw new xe(te.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new xe(te.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fT)throw new xe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&lc(e.host)&&G2(e.host),s.initialize({options:e,instanceIdentifier:t})}function Ml(r){if(r._terminated)throw new xe(te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Y9(r),r._firestoreClient}function Y9(r){var s,i,c;const e=r._freezeSettings(),t=(function(f,g,x,v){return new E6(f,g,x,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,XT(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new B9(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class W9{constructor(e,t,s){this._userDataWriter=t,this._data=s,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ps(Zt.fromBase64String(e))}catch(t){throw new xe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ps(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ps._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(md(e,Ps._jsonSchema))return Ps.fromBase64String(e.bytes)}}Ps._jsonSchemaVersion="firestore/bytes/1.0",Ps._jsonSchema={type:cn("string",Ps._jsonSchemaVersion),bytes:cn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new xe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:kr._jsonSchemaVersion}}static fromJSON(e){if(md(e,kr._jsonSchema))return new kr(e.latitude,e.longitude)}}kr._jsonSchemaVersion="firestore/geoPoint/1.0",kr._jsonSchema={type:cn("string",kr._jsonSchemaVersion),latitude:cn("number"),longitude:cn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,i){if(s.length!==i.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==i[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Dr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(md(e,Dr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Dr(e.vectorValues);throw new xe(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Dr._jsonSchemaVersion="firestore/vectorValue/1.0",Dr._jsonSchema={type:cn("string",Dr._jsonSchemaVersion),vectorValues:cn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z9=/^__.*__$/;class e8{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new wa(e,this.data,this.fieldMask,t,this.fieldTransforms):new hc(e,this.data,t,this.fieldTransforms)}}class YT{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new wa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function JT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ac:r})}}class fy{constructor(e,t,s,i,c,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=i,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new fy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return em(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(JT(this.Ac)&&Z9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class t8{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Am(e)}Cc(e,t,s,i=!1){return new fy({Ac:e,methodName:t,Dc:s,path:Ft.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Om(r){const e=r._freezeSettings(),t=Am(r._databaseId);return new t8(r._databaseId,!!e.ignoreUndefinedProperties,t)}function WT(r,e,t,s,i,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,e,t,i);py("Data must be an object, but it was:",d,s);const f=ZT(s,d);let g,x;if(c.merge)g=new ts(d.fieldMask),x=d.fieldTransforms;else if(c.mergeFields){const v=[];for(const w of c.mergeFields){const N=tx(e,w,t);if(!d.contains(N))throw new xe(te.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);tS(v,N)||v.push(N)}g=new ts(v),x=d.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,x=d.fieldTransforms;return new e8(new On(f),g,x)}class Mm extends _d{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mm}}class my extends _d{_toFieldTransform(e){return new Vx(e.path,new Jo)}isEqual(e){return e instanceof my}}class gy extends _d{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new ec(e.serializer,PE(e.serializer,this.Fc));return new Vx(e.path,t)}isEqual(e){return e instanceof gy&&this.Fc===e.Fc}}function n8(r,e,t,s){const i=r.Cc(1,e,t);py("Data must be an object, but it was:",i,s);const c=[],d=On.empty();Ci(s,((g,x)=>{const v=xy(e,g,t);x=Qt(x);const w=i.yc(v);if(x instanceof Mm)c.push(v);else{const N=Nd(x,w);N!=null&&(c.push(v),d.set(v,N))}}));const f=new ts(c);return new YT(d,f,i.fieldTransforms)}function s8(r,e,t,s,i,c){const d=r.Cc(1,e,t),f=[tx(e,s,t)],g=[i];if(c.length%2!=0)throw new xe(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<c.length;N+=2)f.push(tx(e,c[N])),g.push(c[N+1]);const x=[],v=On.empty();for(let N=f.length-1;N>=0;--N)if(!tS(x,f[N])){const C=f[N];let M=g[N];M=Qt(M);const J=d.yc(C);if(M instanceof Mm)x.push(C);else{const B=Nd(M,J);B!=null&&(x.push(C),v.set(C,B))}}const w=new ts(x);return new YT(v,w,d.fieldTransforms)}function r8(r,e,t,s=!1){return Nd(t,r.Cc(s?4:3,e))}function Nd(r,e){if(eS(r=Qt(r)))return py("Unsupported field value:",e,r),ZT(r,e);if(r instanceof _d)return(function(s,i){if(!JT(i.Ac))throw i.Sc(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(i);c&&i.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,i){const c=[];let d=0;for(const f of s){let g=Nd(f,i.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,e)}return(function(s,i){if((s=Qt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return PE(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=vt.fromDate(s);return{timestampValue:tc(i.serializer,c)}}if(s instanceof vt){const c=new vt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:tc(i.serializer,c)}}if(s instanceof kr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ps)return{bytesValue:QE(i.serializer,s._byteString)};if(s instanceof Kt){const c=i.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw i.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Bx(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof Dr)return(function(d,f){return{mapValue:{fields:{[Rx]:{stringValue:kx},[Ko]:{arrayValue:{values:d.toArray().map((x=>{if(typeof x!="number")throw f.Sc("VectorValues must only contain numeric values.");return Mx(f.serializer,x)}))}}}}}})(s,i);throw i.Sc(`Unsupported field value: ${fm(s)}`)})(r,e)}function ZT(r,e){const t={};return uE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ci(r,((s,i)=>{const c=Nd(i,e.mc(s));c!=null&&(t[s]=c)})),{mapValue:{fields:t}}}function eS(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof vt||r instanceof kr||r instanceof Ps||r instanceof Kt||r instanceof _d||r instanceof Dr)}function py(r,e,t){if(!eS(t)||!KN(t)){const s=fm(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function tx(r,e,t){if((e=Qt(e))instanceof Dm)return e._internalPath;if(typeof e=="string")return xy(r,e);throw em("Field path arguments must be of type string or ",r,!1,void 0,t)}const a8=new RegExp("[~\\*/\\[\\]]");function xy(r,e,t){if(e.search(a8)>=0)throw em(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Dm(...e.split("."))._internalPath}catch{throw em(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function em(r,e,t,s,i){const c=s&&!s.isEmpty(),d=i!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${i}`),g+=")"),new xe(te.INVALID_ARGUMENT,f+r+g)}function tS(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,t,s,i,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=i,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new i8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class i8 extends nS{data(){return super.data()}}function Vm(r,e){return typeof e=="string"?xy(r,e):e instanceof Dm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new xe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yy{}class by extends yy{}function Ln(r,e,...t){let s=[];e instanceof yy&&s.push(e),s=s.concat(t),(function(c){const d=c.filter((g=>g instanceof vy)).length,f=c.filter((g=>g instanceof Pm)).length;if(d>1||d>0&&f>0)throw new xe(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const i of s)r=i._apply(r);return r}class Pm extends by{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Pm(e,t,s)}_apply(e){const t=this._parse(e);return aS(e._query,t),new sr(e.firestore,e.converter,qp(e._query,t))}_parse(e){const t=Om(e.firestore);return(function(c,d,f,g,x,v,w){let N;if(x.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new xe(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){f2(w,v);const M=[];for(const J of w)M.push(h2(g,c,J));N={arrayValue:{values:M}}}else N=h2(g,c,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||f2(w,v),N=r8(f,d,w,v==="in"||v==="not-in");return tt.create(x,v,N)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function In(r,e,t){const s=e,i=Vm("where",r);return Pm._create(i,s,t)}class vy extends yy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vy(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:wt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,c){let d=i;const f=c.getFlattenedFilters();for(const g of f)aS(d,g),d=qp(d,g)})(e._query,t),new sr(e.firestore,e.converter,qp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wy extends by{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new wy(e,t)}_apply(e){const t=(function(i,c,d){if(i.startAt!==null)throw new xe(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new xe(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ad(c,d)})(e._query,this._field,this._direction);return new sr(e.firestore,e.converter,(function(i,c){const d=i.explicitOrderBy.concat([c]);return new dc(i.path,i.collectionGroup,d,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function Ed(r,e="asc"){const t=e,s=Vm("orderBy",r);return wy._create(s,t)}class _y extends by{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new _y(e,t,s)}_apply(e){return new sr(e.firestore,e.converter,Bf(e._query,this._limit,this._limitType))}}function rS(r){return GR("limit",r),_y._create("limit",r,"F")}function h2(r,e,t){if(typeof(t=Qt(t))=="string"){if(t==="")throw new xe(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!AE(e)&&t.indexOf("/")!==-1)throw new xe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(mt.fromString(t));if(!Ne.isDocumentKey(s))throw new xe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return sd(r,new Ne(s))}if(t instanceof Kt)return sd(r,t._key);throw new xe(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fm(t)}.`)}function f2(r,e){if(!Array.isArray(r)||r.length===0)throw new xe(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aS(r,e){const t=(function(i,c){for(const d of i)for(const f of d.getFlattenedFilters())if(c.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new xe(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class l8{convertValue(e,t="none"){switch(Ni(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ci(e,((i,c)=>{s[i]=this.convertValue(c,t)})),s}convertVectorValue(e){var s,i,c;const t=(c=(i=(s=e.fields)==null?void 0:s[Ko].arrayValue)==null?void 0:i.values)==null?void 0:c.map((d=>zt(d.doubleValue)));return new Dr(t)}convertGeoPoint(e){return new kr(zt(e.latitude),zt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=bm(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(td(e));default:return null}}convertTimestamp(e){const t=pa(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=mt.fromString(e);Ce(sT(s),9688,{name:e});const i=new El(s.get(1),s.get(3)),c=new Ne(s.popFirst(5));return i.isEqual(t)||Wt(`Document ${c} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}function o8(){return new J9("count")}class Au{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yl extends nS{constructor(e,t,s,i,c,d){super(e,t,s,i,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Vm("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=yl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}yl._jsonSchemaVersion="firestore/documentSnapshot/1.0",yl._jsonSchema={type:cn("string",yl._jsonSchemaVersion),bundleSource:cn("string","DocumentSnapshot"),bundleName:cn("string"),bundle:cn("string")};class vf extends yl{data(e={}){return super.data(e)}}class da{constructor(e,t,s,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Au(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new vf(this._firestore,this._userDataWriter,s.key,s,new Au(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,c){if(i._snapshot.oldDocs.isEmpty()){let d=0;return i._snapshot.docChanges.map((f=>{const g=new vf(i._firestore,i._userDataWriter,f.doc.key,f.doc,new Au(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((f=>c||f.type!==3)).map((f=>{const g=new vf(i._firestore,i._userDataWriter,f.doc.key,f.doc,new Au(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter);let x=-1,v=-1;return f.type!==0&&(x=d.indexOf(f.doc.key),d=d.delete(f.doc.key)),f.type!==1&&(d=d.add(f.doc),v=d.indexOf(f.doc.key)),{type:c8(f.type),doc:g,oldIndex:x,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=da._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Nx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],i=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),i.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function c8(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(r){r=vn(r,Kt);const e=vn(r.firestore,Bs);return G9(Ml(e),r._key).then((t=>oS(e,r,t)))}da._jsonSchemaVersion="firestore/querySnapshot/1.0",da._jsonSchema={type:cn("string",da._jsonSchemaVersion),bundleSource:cn("string","QuerySnapshot"),bundleName:cn("string"),bundle:cn("string")};class pc extends l8{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ps(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,t)}}function rs(r){r=vn(r,sr);const e=vn(r.firestore,Bs),t=Ml(e),s=new pc(e);return sS(r._query),QT(t,r._query).then((i=>new da(e,s,r,i)))}function u8(r){r=vn(r,sr);const e=vn(r.firestore,Bs),t=Ml(e),s=new pc(e);return $9(t,r._query).then((i=>new da(e,s,r,i)))}function d8(r){r=vn(r,sr);const e=vn(r.firestore,Bs),t=Ml(e),s=new pc(e);return QT(t,r._query,{source:"server"}).then((i=>new da(e,s,r,i)))}function Ny(r,e,t){r=vn(r,Kt);const s=vn(r.firestore,Bs),i=iS(r.converter,e,t);return zm(s,[WT(Om(s),"setDoc",r._key,i,r.converter!==null,t).toMutation(r._key,Mn.none())])}function Td(r,e,t,...s){r=vn(r,Kt);const i=vn(r.firestore,Bs),c=Om(i);let d;return d=typeof(e=Qt(e))=="string"||e instanceof Dm?s8(c,"updateDoc",r._key,e,t,s):n8(c,"updateDoc",r._key,e),zm(i,[d.toMutation(r._key,Mn.exists(!0))])}function Lm(r){return zm(vn(r.firestore,Bs),[new Em(r._key,Mn.none())])}function as(r,e){const t=vn(r.firestore,Bs),s=Hn(r),i=iS(r.converter,e);return zm(t,[WT(Om(r.firestore),"addDoc",s._key,i,r.converter!==null,{}).toMutation(s._key,Mn.exists(!1))]).then((()=>s))}function h8(r,...e){var g,x,v;r=Qt(r);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||d2(e[s])||(t=e[s++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(d2(e[s])){const w=e[s];e[s]=(g=w.next)==null?void 0:g.bind(w),e[s+1]=(x=w.error)==null?void 0:x.bind(w),e[s+2]=(v=w.complete)==null?void 0:v.bind(w)}let c,d,f;if(r instanceof Kt)d=vn(r.firestore,Bs),f=xd(r._key.path),c={next:w=>{e[s]&&e[s](oS(d,r,w))},error:e[s+1],complete:e[s+2]};else{const w=vn(r,sr);d=vn(w.firestore,Bs),f=w._query;const N=new pc(d);c={next:C=>{e[s]&&e[s](new da(d,N,w,C))},error:e[s+1],complete:e[s+2]},sS(r._query)}return(function(N,C,M,J){const B=new uy(J),he=new ry(C,B,M);return N.asyncQueue.enqueueAndForget((async()=>ty(await Zf(N),he))),()=>{B.Nu(),N.asyncQueue.enqueueAndForget((async()=>ny(await Zf(N),he)))}})(Ml(d),f,i,c)}function zm(r,e){return(function(s,i){const c=new zs;return s.asyncQueue.enqueueAndForget((async()=>T9(await F9(s),i,c))),c.promise})(Ml(r),e)}function oS(r,e,t){const s=t.docs.get(e._key),i=new pc(r);return new yl(r,i,e._key,s,new Au(t.hasPendingWrites,t.fromCache),e.converter)}function sf(r){return f8(r,{count:o8()})}function f8(r,e){const t=vn(r.firestore,Bs),s=Ml(t),i=_6(e,((c,d)=>new K6(d,c.aggregateType,c._internalFieldPath)));return K9(s,r._query,i).then((c=>(function(f,g,x){const v=new pc(f);return new W9(g,v,x)})(t,r,c)))}class m8{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=y8(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function g8(r){return new m8(r)}class p8{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ld.provider,this._offlineComponentProvider={build:t=>new $T(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class x8{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ld.provider,this._offlineComponentProvider={build:t=>new U9(t,e==null?void 0:e.cacheSizeBytes)}}}function y8(r){return new p8(r==null?void 0:r.forceOwnership)}function b8(){return new x8}function Pn(){return new my("serverTimestamp")}function nx(r){return new gy("increment",r)}(function(e,t=!0){(function(i){uc=i})(oc),Or(new er("firestore",((s,{instanceIdentifier:i,options:c})=>{const d=s.getProvider("app").getImmediate(),f=new Bs(new VR(s.getProvider("auth-internal")),new zR(d,s.getProvider("app-check-internal")),(function(x,v){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new xe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new El(x.options.projectId,v)})(d,i),d);return c={useFetchStreams:t,...c},f._setSettings(c),f}),"PUBLIC").setMultipleInstances(!0)),Ls($w,Kw,e),Ls($w,Kw,"esm2020")})();const cS="@firebase/installations",Ey="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=1e4,dS=`w:${Ey}`,hS="FIS_v2",v8="https://firebaseinstallations.googleapis.com/v1",w8=3600*1e3,_8="installations",N8="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Cl=new kl(_8,N8,E8);function fS(r){return r instanceof nr&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS({projectId:r}){return`${v8}/projects/${r}/installations`}function gS(r){return{token:r.token,requestStatus:2,expiresIn:S8(r.expiresIn),creationTime:Date.now()}}async function pS(r,e){const s=(await e.json()).error;return Cl.create("request-failed",{requestName:r,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function xS({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function T8(r,{refreshToken:e}){const t=xS(r);return t.append("Authorization",j8(e)),t}async function yS(r){const e=await r();return e.status>=500&&e.status<600?r():e}function S8(r){return Number(r.replace("s","000"))}function j8(r){return`${hS} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A8({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const s=mS(r),i=xS(r),c=e.getImmediate({optional:!0});if(c){const x=await c.getHeartbeatsHeader();x&&i.append("x-firebase-client",x)}const d={fid:t,authVersion:hS,appId:r.appId,sdkVersion:dS},f={method:"POST",headers:i,body:JSON.stringify(d)},g=await yS(()=>fetch(s,f));if(g.ok){const x=await g.json();return{fid:x.fid||t,registrationStatus:2,refreshToken:x.refreshToken,authToken:gS(x.authToken)}}else throw await pS("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I8(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C8=/^[cdef][\w-]{21}$/,sx="";function R8(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=k8(r);return C8.test(t)?t:sx}catch{return sx}}function k8(r){return I8(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS=new Map;function wS(r,e){const t=Um(r);_S(t,e),D8(t,e)}function _S(r,e){const t=vS.get(r);if(t)for(const s of t)s(e)}function D8(r,e){const t=O8();t&&t.postMessage({key:r,fid:e}),M8()}let ml=null;function O8(){return!ml&&"BroadcastChannel"in self&&(ml=new BroadcastChannel("[Firebase] FID Change"),ml.onmessage=r=>{_S(r.data.key,r.data.fid)}),ml}function M8(){vS.size===0&&ml&&(ml.close(),ml=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8="firebase-installations-database",P8=1,Rl="firebase-installations-store";let ap=null;function Ty(){return ap||(ap=Z2(V8,P8,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Rl)}}})),ap}async function tm(r,e){const t=Um(r),i=(await Ty()).transaction(Rl,"readwrite"),c=i.objectStore(Rl),d=await c.get(t);return await c.put(e,t),await i.done,(!d||d.fid!==e.fid)&&wS(r,e.fid),e}async function NS(r){const e=Um(r),s=(await Ty()).transaction(Rl,"readwrite");await s.objectStore(Rl).delete(e),await s.done}async function Bm(r,e){const t=Um(r),i=(await Ty()).transaction(Rl,"readwrite"),c=i.objectStore(Rl),d=await c.get(t),f=e(d);return f===void 0?await c.delete(t):await c.put(f,t),await i.done,f&&(!d||d.fid!==f.fid)&&wS(r,f.fid),f}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sy(r){let e;const t=await Bm(r.appConfig,s=>{const i=L8(s),c=z8(r,i);return e=c.registrationPromise,c.installationEntry});return t.fid===sx?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function L8(r){const e=r||{fid:R8(),registrationStatus:0};return ES(e)}function z8(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Cl.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=U8(r,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:B8(r)}:{installationEntry:e}}async function U8(r,e){try{const t=await A8(r,e);return tm(r.appConfig,t)}catch(t){throw fS(t)&&t.customData.serverCode===409?await NS(r.appConfig):await tm(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function B8(r){let e=await m2(r.appConfig);for(;e.registrationStatus===1;)await bS(100),e=await m2(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await Sy(r);return s||t}return e}function m2(r){return Bm(r,e=>{if(!e)throw Cl.create("installation-not-found");return ES(e)})}function ES(r){return q8(r)?{fid:r.fid,registrationStatus:0}:r}function q8(r){return r.registrationStatus===1&&r.registrationTime+uS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F8({appConfig:r,heartbeatServiceProvider:e},t){const s=H8(r,t),i=T8(r,t),c=e.getImmediate({optional:!0});if(c){const x=await c.getHeartbeatsHeader();x&&i.append("x-firebase-client",x)}const d={installation:{sdkVersion:dS,appId:r.appId}},f={method:"POST",headers:i,body:JSON.stringify(d)},g=await yS(()=>fetch(s,f));if(g.ok){const x=await g.json();return gS(x)}else throw await pS("Generate Auth Token",g)}function H8(r,{fid:e}){return`${mS(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jy(r,e=!1){let t;const s=await Bm(r.appConfig,c=>{if(!TS(c))throw Cl.create("not-registered");const d=c.authToken;if(!e&&K8(d))return c;if(d.requestStatus===1)return t=G8(r,e),c;{if(!navigator.onLine)throw Cl.create("app-offline");const f=X8(c);return t=$8(r,f),f}});return t?await t:s.authToken}async function G8(r,e){let t=await g2(r.appConfig);for(;t.authToken.requestStatus===1;)await bS(100),t=await g2(r.appConfig);const s=t.authToken;return s.requestStatus===0?jy(r,e):s}function g2(r){return Bm(r,e=>{if(!TS(e))throw Cl.create("not-registered");const t=e.authToken;return Y8(t)?{...e,authToken:{requestStatus:0}}:e})}async function $8(r,e){try{const t=await F8(r,e),s={...e,authToken:t};return await tm(r.appConfig,s),t}catch(t){if(fS(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await NS(r.appConfig);else{const s={...e,authToken:{requestStatus:0}};await tm(r.appConfig,s)}throw t}}function TS(r){return r!==void 0&&r.registrationStatus===2}function K8(r){return r.requestStatus===2&&!Q8(r)}function Q8(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+w8}function X8(r){const e={requestStatus:1,requestTime:Date.now()};return{...r,authToken:e}}function Y8(r){return r.requestStatus===1&&r.requestTime+uS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J8(r){const e=r,{installationEntry:t,registrationPromise:s}=await Sy(e);return s?s.catch(console.error):jy(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W8(r,e=!1){const t=r;return await Z8(t),(await jy(t,e)).token}async function Z8(r){const{registrationPromise:e}=await Sy(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(r){if(!r||!r.options)throw ip("App Configuration");if(!r.name)throw ip("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw ip(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function ip(r){return Cl.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="installations",tD="installations-internal",nD=r=>{const e=r.getProvider("app").getImmediate(),t=eD(e),s=Dl(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},sD=r=>{const e=r.getProvider("app").getImmediate(),t=Dl(e,SS).getImmediate();return{getId:()=>J8(t),getToken:i=>W8(t,i)}};function rD(){Or(new er(SS,nD,"PUBLIC")),Or(new er(tD,sD,"PRIVATE"))}rD();Ls(cS,Ey);Ls(cS,Ey,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="analytics",aD="firebase_id",iD="origin",lD=60*1e3,oD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ay="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn=new cm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},bs=new kl("analytics","Analytics",cD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(r){if(!r.startsWith(Ay)){const e=bs.create("invalid-gtag-resource",{gtagURL:r});return Fn.warn(e.message),""}return r}function jS(r){return Promise.all(r.map(e=>e.catch(t=>t)))}function dD(r,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(r,e)),t}function hD(r,e){const t=dD("firebase-js-sdk-policy",{createScriptURL:uD}),s=document.createElement("script"),i=`${Ay}?l=${r}&id=${e}`;s.src=t?t==null?void 0:t.createScriptURL(i):i,s.async=!0,document.head.appendChild(s)}function fD(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function mD(r,e,t,s,i,c){const d=s[i];try{if(d)await e[d];else{const g=(await jS(t)).find(x=>x.measurementId===i);g&&await e[g.appId]}}catch(f){Fn.error(f)}r("config",i,c)}async function gD(r,e,t,s,i){try{let c=[];if(i&&i.send_to){let d=i.send_to;Array.isArray(d)||(d=[d]);const f=await jS(t);for(const g of d){const x=f.find(w=>w.measurementId===g),v=x&&e[x.appId];if(v)c.push(v);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),r("event",s,i||{})}catch(c){Fn.error(c)}}function pD(r,e,t,s){async function i(c,...d){try{if(c==="event"){const[f,g]=d;await gD(r,e,t,f,g)}else if(c==="config"){const[f,g]=d;await mD(r,e,t,s,f,g)}else if(c==="consent"){const[f,g]=d;r("consent",f,g)}else if(c==="get"){const[f,g,x]=d;r("get",f,g,x)}else if(c==="set"){const[f]=d;r("set",f)}else r(c,...d)}catch(f){Fn.error(f)}}return i}function xD(r,e,t,s,i){let c=function(...d){window[s].push(arguments)};return window[i]&&typeof window[i]=="function"&&(c=window[i]),window[i]=pD(c,r,e,t),{gtagCore:c,wrappedGtag:window[i]}}function yD(r){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Ay)&&t.src.includes(r))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=30,vD=1e3;class wD{constructor(e={},t=vD){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const AS=new wD;function _D(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function ND(r){var d;const{appId:e,apiKey:t}=r,s={method:"GET",headers:_D(t)},i=oD.replace("{app-id}",e),c=await fetch(i,s);if(c.status!==200&&c.status!==304){let f="";try{const g=await c.json();(d=g.error)!=null&&d.message&&(f=g.error.message)}catch{}throw bs.create("config-fetch-failed",{httpStatus:c.status,responseMessage:f})}return c.json()}async function ED(r,e=AS,t){const{appId:s,apiKey:i,measurementId:c}=r.options;if(!s)throw bs.create("no-app-id");if(!i){if(c)return{measurementId:c,appId:s};throw bs.create("no-api-key")}const d=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new jD;return setTimeout(async()=>{f.abort()},lD),IS({appId:s,apiKey:i,measurementId:c},d,f,e)}async function IS(r,{throttleEndTimeMillis:e,backoffCount:t},s,i=AS){var f;const{appId:c,measurementId:d}=r;try{await TD(s,e)}catch(g){if(d)return Fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:c,measurementId:d};throw g}try{const g=await ND(r);return i.deleteThrottleMetadata(c),g}catch(g){const x=g;if(!SD(x)){if(i.deleteThrottleMetadata(c),d)return Fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${x==null?void 0:x.message}]`),{appId:c,measurementId:d};throw g}const v=Number((f=x==null?void 0:x.customData)==null?void 0:f.httpStatus)===503?xw(t,i.intervalMillis,bD):xw(t,i.intervalMillis),w={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return i.setThrottleMetadata(c,w),Fn.debug(`Calling attemptFetch again in ${v} millis`),IS(r,w,s,i)}}function TD(r,e){return new Promise((t,s)=>{const i=Math.max(e-Date.now(),0),c=setTimeout(t,i);r.addEventListener(()=>{clearTimeout(c),s(bs.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function SD(r){if(!(r instanceof nr)||!r.customData)return!1;const e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}class jD{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function AD(r,e,t,s,i){if(i&&i.global){r("event",t,s);return}else{const c=await e,d={...s,send_to:c};r("event",t,d)}}async function ID(r,e,t,s){if(s&&s.global){const i={};for(const c of Object.keys(t))i[`user_properties.${c}`]=t[c];return r("set",i),Promise.resolve()}else{const i=await e;r("config",i,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CD(){if(hx())try{await Y2()}catch(r){return Fn.warn(bs.create("indexeddb-unavailable",{errorInfo:r==null?void 0:r.toString()}).message),!1}else return Fn.warn(bs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function RD(r,e,t,s,i,c,d){const f=ED(r);f.then(N=>{t[N.measurementId]=N.appId,r.options.measurementId&&N.measurementId!==r.options.measurementId&&Fn.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>Fn.error(N)),e.push(f);const g=CD().then(N=>{if(N)return s.getId()}),[x,v]=await Promise.all([f,g]);yD(c)||hD(c,x.measurementId),i("js",new Date);const w=(d==null?void 0:d.config)??{};return w[iD]="firebase",w.update=!0,v!=null&&(w[aD]=v),i("config",x.measurementId,w),x.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.app=e}_delete(){return delete Uo[this.app.options.appId],Promise.resolve()}}let Uo={},p2=[];const x2={};let lp="dataLayer",DD="gtag",y2,Iy,b2=!1;function OD(){const r=[];if(K2()&&r.push("This is a browser extension environment."),XA()||r.push("Cookies are not available."),r.length>0){const e=r.map((s,i)=>`(${i+1}) ${s}`).join(" "),t=bs.create("invalid-analytics-context",{errorInfo:e});Fn.warn(t.message)}}function MD(r,e,t){OD();const s=r.options.appId;if(!s)throw bs.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)Fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw bs.create("no-api-key");if(Uo[s]!=null)throw bs.create("already-exists",{id:s});if(!b2){fD(lp);const{wrappedGtag:c,gtagCore:d}=xD(Uo,p2,x2,lp,DD);Iy=c,y2=d,b2=!0}return Uo[s]=RD(r,p2,x2,e,y2,lp,t),new kD(r)}function VD(r=tN()){r=Qt(r);const e=Dl(r,nm);return e.isInitialized()?e.getImmediate():PD(r)}function PD(r,e={}){const t=Dl(r,nm);if(t.isInitialized()){const i=t.getImmediate();if(_i(e,t.getOptions()))return i;throw bs.create("already-initialized")}return t.initialize({options:e})}function LD(r,e,t){r=Qt(r),ID(Iy,Uo[r.app.options.appId],e,t).catch(s=>Fn.error(s))}function zD(r,e,t,s){r=Qt(r),AD(Iy,Uo[r.app.options.appId],e,t,s).catch(i=>Fn.error(i))}const v2="@firebase/analytics",w2="0.10.19";function UD(){Or(new er(nm,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return MD(s,i,t)},"PUBLIC")),Or(new er("analytics-internal",r,"PRIVATE")),Ls(v2,w2),Ls(v2,w2,"esm2020");function r(e){try{const t=e.getProvider(nm).getImmediate();return{logEvent:(s,i,c)=>zD(t,s,i,c),setUserProperties:(s,i)=>LD(t,s,i)}}catch(t){throw bs.create("interop-component-reg-failed",{reason:t})}}}UD();const BD={apiKey:"AIzaSyBFr--na-wJGHMdev7vUhPufAJHlyP3GNQ",authDomain:"school-9d3db.firebaseapp.com",projectId:"school-9d3db",storageBucket:"school-9d3db.firebasestorage.app",messagingSenderId:"429673694272",appId:"1:429673694272:web:43390c4fdfa5bce4744ba5",measurementId:"G-8YSDYV9VBN"},Cy=eN(BD),Uu=kR(Cy),Le=X9(Cy,{localCache:g8({tabManager:b8()})});VD(Cy);const CS=()=>{const r=()=>{window.location.reload()},e=()=>{window.open("https://wa.me/972568401548","_blank")};return l.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center p-4 text-center animate-fade-in relative overflow-hidden",children:[l.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[l.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-emerald-900/10 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-64 h-64 bg-red-900/10 rounded-full blur-3xl"})]}),l.jsxs("div",{className:"relative z-10 max-w-md w-full bg-gray-900 border border-gray-800 rounded-[2.5rem] p-8 shadow-2xl",children:[l.jsx("div",{className:"w-20 h-20 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6 border-4 border-gray-700 shadow-inner",children:l.jsx(CA,{className:"w-10 h-10 text-red-500/80"})}),l.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white mb-3",children:"    "}),l.jsx("p",{className:"text-gray-400 text-sm md:text-base leading-relaxed mb-8 font-medium",children:"           .     ."}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:r,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3.5 rounded-xl font-bold transition-all flex items-center justify-center gap-2 shadow-lg shadow-emerald-900/20",children:[l.jsx(am,{className:"w-5 h-5"})," "]}),l.jsxs("div",{className:"relative flex py-2 items-center",children:[l.jsx("div",{className:"flex-grow border-t border-gray-700"}),l.jsx("span",{className:"flex-shrink-0 mx-4 text-gray-500 text-xs font-bold",children:""}),l.jsx("div",{className:"flex-grow border-t border-gray-700"})]}),l.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-gray-700/50",children:[l.jsx("p",{className:"text-gray-300 text-xs font-bold mb-3",children:"       :"}),l.jsxs("div",{className:"flex items-center justify-between bg-gray-900 p-3 rounded-lg border border-gray-700",children:[l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-white font-bold text-sm",children:".   "}),l.jsx("p",{className:"text-emerald-500 text-xs dir-ltr",children:"Admin Support"})]}),l.jsx("button",{onClick:e,className:"bg-[#25D366] hover:bg-[#20bd5a] text-white p-2 rounded-full transition-colors shadow-md",children:l.jsx(Hu,{className:"w-5 h-5"})})]})]})]})]}),l.jsx("p",{className:"mt-8 text-gray-600 text-xs font-mono",children:"Error Code: CONNECTION_TIMEOUT / RENDER_FAIL"})]})},RS=V.createContext(void 0),qD=({children:r})=>{const[e,t]=V.useState(null),[s,i]=V.useState(!0),[c,d]=V.useState(!1),f=(v,w)=>{const N=`teacher-${w.split("@")[0]}`;let C="https://img.freepik.com/free-vector/teacher-standing-near-blackboard_23-2147517173.jpg";v.includes("")?C="https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P":v.includes("")&&(C="https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj"),t({uid:N,email:w,displayName:v,role:"teacher",avatar:C,gender:"male"}),localStorage.setItem("isTeacher","true"),localStorage.setItem("teacherName",v),localStorage.setItem("teacherEmail",w)},g=async()=>{try{(e==null?void 0:e.role)==="teacher"?(localStorage.removeItem("isTeacher"),localStorage.removeItem("teacherName"),localStorage.removeItem("teacherEmail"),t(null)):await wC(Uu)}catch(v){console.error("Logout error",v)}},x=async v=>{if(e)try{let w={...v};if(v.firstName!==void 0||v.lastName!==void 0){const N=v.firstName!==void 0?v.firstName:e.firstName||"",C=v.lastName!==void 0?v.lastName:e.lastName||"";w.displayName=`${N} ${C}`.trim()}if(t(N=>N?{...N,...w}:null),e.role!=="teacher"){const N=Hn(Le,"users",e.uid);await Ny(N,w,{merge:!0})}}catch(w){throw console.error("Error updating profile:",w),w}};return V.useEffect(()=>{const v=setTimeout(()=>{s&&d(!0)},1e4),w=localStorage.getItem("isTeacher")==="true";if(w){const C=localStorage.getItem("teacherName")||"",M=localStorage.getItem("teacherEmail")||"teacher@etqan.edu";f(C,M),i(!1),clearTimeout(v);return}const N=vC(Uu,async C=>{if(C)try{const M=Hn(Le,"users",C.uid),J=await lS(M);if(J.exists()){const B=J.data();(C.email==="q@gmail.com"||C.email==="yazan22@gmail.com")&&(B.totalXP=25e3,B.quizzesCompleted=500),t({uid:C.uid,email:C.email||"",displayName:B.displayName||`${B.firstName||""} ${B.lastName||""}`.trim()||"Student",firstName:B.firstName,lastName:B.lastName,age:B.age,role:B.role,grade:B.grade,phone:B.phone,address:B.address,school:B.school,gender:B.gender,avatar:B.avatar,profileBackground:B.profileBackground,genderChanged:B.genderChanged})}else t({uid:C.uid,email:C.email||"",displayName:"User",role:"student"})}catch(M){console.error("Error fetching user profile:",M)}else w||t(null);i(!1),clearTimeout(v)});return()=>{N(),clearTimeout(v)}},[]),c?l.jsx(CS,{}):l.jsx(RS.Provider,{value:{user:e,loading:s,logout:g,setTeacherSession:f,updateUserProfile:x},children:s?l.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 blur-xl rounded-full"}),l.jsx(bt,{className:"w-12 h-12 text-emerald-500 animate-spin relative z-10"})]}),l.jsx("p",{className:"mt-4 text-gray-400 font-bold text-sm animate-pulse",children:" ..."})]}):r})},rr=()=>{const r=V.useContext(RS);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},op=[{id:"teacher-yazan",name:".   "},{id:"teacher-majd",name:".   "}],FD=({onLoginClick:r,onNavigate:e,onLogoutClick:t})=>{var de;const[s,i]=V.useState(!1),[c,d]=V.useState(!1),{user:f}=rr(),[g,x]=V.useState(!1),[v,w]=V.useState([]),[N,C]=V.useState(0),M=V.useRef(null),[J,B]=V.useState(!1),[he,oe]=V.useState(""),[le,_e]=V.useState("teacher-yazan"),[me,G]=V.useState(!1),[S,j]=V.useState(!1);V.useEffect(()=>{const ge=()=>{d(window.scrollY>10)};return window.addEventListener("scroll",ge),()=>window.removeEventListener("scroll",ge)},[]),V.useEffect(()=>{const ge=F=>{M.current&&!M.current.contains(F.target)&&x(!1)};return document.addEventListener("mousedown",ge),()=>document.removeEventListener("mousedown",ge)},[]),V.useEffect(()=>{if(!f){w([]);return}const ge=f.role==="teacher"?100:10,F=Ln(it(Le,"notifications"),Ed("createdAt","desc"),rS(ge)),ce=h8(F,Z=>{const se=[];let Se=0,k=[];try{k=JSON.parse(localStorage.getItem(`viewed_notifs_${f.uid}`)||"[]")}catch(U){console.error("Error parsing viewed notifications",U)}Z.forEach(U=>{const z=U.data();if(z.recipientId==="all"||z.recipientId===f.uid){let ee=!1;z.recipientId==="all"?ee=k.includes(U.id):ee=z.read===!0,ee||Se++,se.push({id:U.id,...z,read:ee,createdAt:z.createdAt})}}),w(se),C(Se)});return()=>ce()},[f]);const A=async()=>{if(x(!g),!g&&N>0){const ge=v,F=ge.filter(Z=>Z.recipientId==="all").map(Z=>Z.id);if(F.length>0)try{const Z=JSON.parse(localStorage.getItem(`viewed_notifs_${f==null?void 0:f.uid}`)||"[]"),se=[...new Set([...Z,...F])];localStorage.setItem(`viewed_notifs_${f==null?void 0:f.uid}`,JSON.stringify(se))}catch(Z){console.error("Error updating local storage for notifications",Z)}ge.filter(Z=>Z.recipientId!=="all"&&!Z.read).forEach(async Z=>{try{const se=Hn(Le,"notifications",Z.id);await Td(se,{read:!0})}catch(se){console.error("Error marking personal notification read:",se)}}),C(0),w(Z=>Z.map(se=>({...se,read:!0})))}},O=async()=>{if(he.trim()){G(!0);try{const ge=op.find(F=>F.id===le);await as(it(Le,"contact_messages"),{studentId:f==null?void 0:f.uid,studentName:(f==null?void 0:f.displayName)||"",studentEmail:f==null?void 0:f.email,message:he,teacherId:le,teacherName:ge==null?void 0:ge.name,createdAt:Pn(),read:!1}),await as(it(Le,"notifications"),{recipientId:le,title:`   ${(f==null?void 0:f.displayName)||""}`,message:he.substring(0,100)+(he.length>100?"...":""),type:"message",senderName:f==null?void 0:f.displayName,senderId:f==null?void 0:f.uid,createdAt:Pn(),read:!1}),alert("    !"),oe(""),B(!1),j(!1)}catch(ge){console.error(ge),alert("   ")}finally{G(!1)}}},D=ge=>{switch(ge){case"quiz":return l.jsx(ns,{className:"w-4 h-4 text-yellow-400"});case"file":return l.jsx(ss,{className:"w-4 h-4 text-blue-400"});case"explanation":return l.jsx(Gu,{className:"w-4 h-4 text-purple-400"});case"message":return l.jsx(jr,{className:"w-4 h-4 text-emerald-400"});default:return l.jsx(Qh,{className:"w-4 h-4 text-gray-400"})}},L=ge=>{if(!ge)return"";const F=ge.toDate?ge.toDate():new Date(ge.seconds*1e3);return isNaN(F.getTime())?"":F.toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(",","")},I=ge=>"cursor-pointer px-4 py-2 rounded-xl transition-all font-bold text-sm flex items-center gap-2 text-gray-300 hover:text-white hover:bg-gray-800";return l.jsxs(l.Fragment,{children:[l.jsxs("nav",{className:`fixed w-full z-50 transition-all duration-300 ${c?"bg-gray-950 border-b border-white/5 py-3 shadow-xl":"bg-transparent py-5"}`,children:[l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e("HOME"),children:[l.jsx("img",{src:"https://lh3.googleusercontent.com/d/13x8Gorb7y4H2qcQ1LVJtHY9-RoUhxg2z",alt:"Logo",className:"w-10 h-10 rounded-full object-cover border-2 border-emerald-500/50"}),l.jsx("span",{className:"text-2xl font-black text-white tracking-tight",children:""})]}),l.jsxs("div",{className:"hidden md:flex items-center bg-gray-950 p-1.5 rounded-2xl border border-white/5 shadow-xl",children:[l.jsxs("button",{onClick:()=>e("HOME"),className:I(),children:[l.jsx(Ef,{className:"w-4 h-4"})," "]}),l.jsxs("button",{onClick:()=>e("QUIZZES"),className:I(),children:[l.jsx(ns,{className:"w-4 h-4"})," "]}),l.jsxs("button",{onClick:()=>e("LESSONS"),className:I(),children:[l.jsx(ss,{className:"w-4 h-4"})," "]}),l.jsxs("button",{onClick:()=>e("LESSONS_EXPLANATIONS"),className:I(),children:[l.jsx(Bu,{className:"w-4 h-4"})," "]}),l.jsxs("button",{onClick:()=>e("CONTACT_TEACHER"),className:I(),children:[l.jsx(Hu,{className:"w-4 h-4"}),"  "]})]}),l.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[f&&l.jsxs("div",{className:"relative",ref:M,children:[l.jsxs("button",{onClick:A,className:"p-2.5 rounded-xl bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white transition-all relative border border-gray-700 flex items-center justify-center group","aria-label":"Notifications",children:[l.jsx(Qh,{className:`w-5 h-5 ${N>0?"animate-swing":""}`}),N>0&&l.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[9px] font-bold flex items-center justify-center rounded-full border-2 border-gray-900 animate-pulse",children:N>9?"+9":N})]}),g&&l.jsxs("div",{className:"absolute top-full left-0 md:left-auto md:right-0 mt-3 w-80 bg-gray-900 border border-gray-700 rounded-2xl shadow-2xl overflow-hidden animate-fade-in-up origin-top-right z-[60]",children:[l.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-gray-900/50 backdrop-blur-sm",children:[l.jsxs("h3",{className:"font-bold text-white text-sm flex items-center gap-2",children:[l.jsx(Qh,{className:"w-4 h-4 text-emerald-400"}),""]}),f.role==="student"&&l.jsxs("button",{onClick:()=>{x(!1),B(!0)},className:"text-xs bg-emerald-900/30 text-emerald-400 px-3 py-1.5 rounded-lg hover:bg-emerald-900/50 transition-colors font-bold border border-emerald-500/30 flex items-center gap-1",children:[l.jsx(jr,{className:"w-3 h-3"})," "]})]}),l.jsx("div",{className:"max-h-80 overflow-y-auto custom-scrollbar",children:v.length===0?l.jsxs("div",{className:"p-12 text-center text-gray-500 text-sm flex flex-col items-center",children:[l.jsx(Qh,{className:"w-10 h-10 mb-3 opacity-20"}),l.jsx("p",{children:"   "})]}):l.jsx("div",{className:"divide-y divide-gray-800",children:v.map(ge=>l.jsxs("div",{className:`p-4 hover:bg-gray-800/50 transition-colors relative ${ge.read?"":"bg-emerald-900/10"}`,children:[!ge.read&&l.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-emerald-500 rounded-full"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("div",{className:"mt-1 shrink-0 bg-gray-800 p-1.5 w-8 h-8 flex items-center justify-center rounded-full border border-gray-700",children:D(ge.type)}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:`text-sm font-bold mb-1 ${ge.read?"text-gray-400":"text-white"}`,children:ge.title}),l.jsx("p",{className:"text-xs text-gray-500 leading-relaxed line-clamp-2",children:ge.message}),l.jsx("span",{className:"text-[10px] text-gray-600 mt-2 block flex items-center gap-1",children:L(ge.createdAt)})]})]})]},ge.id))})})]})]}),f?l.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[l.jsxs("div",{className:"relative group",children:[l.jsxs("button",{onClick:()=>e("PROFILE"),className:"flex items-center gap-2 bg-gray-800 hover:bg-gray-700 text-white pr-1 pl-4 py-1 rounded-full transition-all border border-gray-700 hover:border-gray-600",children:[f.avatar?l.jsx("img",{src:f.avatar,alt:"Avatar",className:"w-8 h-8 rounded-full object-cover border border-gray-600"}):l.jsx("div",{className:"w-8 h-8 bg-emerald-600 rounded-full flex items-center justify-center text-xs font-bold",children:f.displayName.charAt(0)}),l.jsx("span",{className:"text-sm font-bold max-w-[100px] truncate",children:f.displayName})]}),l.jsxs("div",{className:"absolute top-full mt-2 left-1/2 -translate-x-1/2 w-max bg-gray-900 text-emerald-400 text-[10px] font-bold px-3 py-1.5 rounded-lg border border-gray-700 opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none shadow-xl z-50",children:["   ",l.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 border-4 border-transparent border-b-gray-900"})]})]}),l.jsx("button",{onClick:t,className:"p-2 bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white rounded-full transition-all border border-red-500/20",title:" ",children:l.jsx(Tf,{className:"w-5 h-5"})})]}):l.jsxs("button",{onClick:r,className:"hidden md:flex bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-2.5 rounded-xl font-bold transition-all shadow-lg shadow-emerald-900/20 items-center gap-2",children:[l.jsx(yp,{className:"w-4 h-4"}),""]}),l.jsx("button",{onClick:()=>i(!s),className:"md:hidden p-2.5 text-gray-300 hover:text-white bg-gray-800 rounded-xl hover:bg-gray-700 transition-colors border border-gray-700",children:s?l.jsx(ps,{className:"w-6 h-6"}):l.jsx(V5,{className:"w-6 h-6"})})]})]})}),s&&l.jsx("div",{className:"md:hidden absolute top-full left-0 w-full bg-gray-950 border-b border-white/5 shadow-2xl animate-fade-in-up h-[calc(100vh-70px)] overflow-y-auto",children:l.jsxs("div",{className:"px-4 py-6 space-y-3",children:[f&&l.jsxs("div",{className:"mb-2",children:[l.jsx("p",{className:"text-[10px] text-emerald-500 font-bold px-4 mb-1",children:"   "}),l.jsxs("button",{onClick:()=>{e("PROFILE"),i(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-emerald-400 hover:bg-emerald-900/20 font-bold transition-colors border border-emerald-900/30",children:[l.jsx(Q4,{className:"w-5 h-5"})," ",f.displayName]})]}),l.jsxs("button",{onClick:()=>{e("HOME"),i(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[l.jsx(Ef,{className:"w-5 h-5"})," "]}),l.jsxs("button",{onClick:()=>{e("TEACHER_CV"),i(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[l.jsx(im,{className:"w-5 h-5"}),"   "]}),l.jsxs("button",{onClick:()=>{e("QUIZZES"),i(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[l.jsx(ns,{className:"w-5 h-5"})," "]}),l.jsxs("button",{onClick:()=>{e("LESSONS"),i(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[l.jsx(ss,{className:"w-5 h-5"})," "]}),l.jsxs("button",{onClick:()=>{e("LESSONS_EXPLANATIONS"),i(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[l.jsx(Bu,{className:"w-5 h-5"})," "]}),l.jsxs("button",{onClick:()=>{e("CONTACT_TEACHER"),i(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[l.jsx(Hu,{className:"w-5 h-5"}),"  "]}),l.jsxs("button",{onClick:()=>{e("PLATFORM_DEFINITION"),i(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[l.jsx(D2,{className:"w-5 h-5"}),"  "]}),l.jsx("div",{className:"border-t border-gray-800 my-2 pt-2",children:f?l.jsxs("button",{onClick:()=>{t(),i(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-400 hover:bg-red-900/20 font-bold transition-colors",children:[l.jsx(Tf,{className:"w-5 h-5"}),"  "]}):l.jsxs("button",{onClick:()=>{r(),i(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl bg-emerald-600 text-white font-bold justify-center shadow-lg",children:[l.jsx(yp,{className:"w-5 h-5"}),"  "]})})]})})]}),J&&l.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>{B(!1),j(!1)}}),l.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-md relative shadow-2xl p-6 animate-fade-in-up border border-white/10",children:[l.jsx("button",{onClick:()=>{B(!1),j(!1)},className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-white",children:l.jsx(ps,{className:"w-5 h-5"})}),S?l.jsxs("div",{className:"text-center py-6 animate-fade-in",children:[l.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-400 border border-emerald-500/20",children:l.jsx(oa,{className:"w-8 h-8"})}),l.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),l.jsxs("p",{className:"text-gray-400 text-sm mb-8",children:["        ",l.jsx("span",{className:"text-emerald-400 font-bold",children:(de=op.find(ge=>ge.id===le))==null?void 0:de.name}),""]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:O,disabled:me,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all shadow-lg shadow-emerald-900/20",children:me?l.jsx(bt,{className:"w-5 h-5 animate-spin"}):" "}),l.jsx("button",{onClick:()=>j(!1),disabled:me,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-all border border-gray-700",children:""})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-400 border border-emerald-500/20",children:l.jsx(jr,{className:"w-8 h-8"})}),l.jsx("h3",{className:"text-xl font-black text-white",children:" "}),l.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"     "})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-2",children:" "}),l.jsx("div",{className:"space-y-2",children:op.map(ge=>l.jsxs("div",{onClick:()=>_e(ge.id),className:`p-3 rounded-xl border-2 cursor-pointer transition-all flex items-center justify-between ${le===ge.id?"border-emerald-500 bg-emerald-900/20":"border-gray-700 bg-gray-800 hover:bg-gray-750"}`,children:[l.jsx("span",{className:`text-sm font-bold ${le===ge.id?"text-emerald-400":"text-gray-300"}`,children:ge.name}),le===ge.id&&l.jsx(ha,{className:"w-4 h-4 text-emerald-500"})]},ge.id))})]}),l.jsx("textarea",{value:he,onChange:ge=>oe(ge.target.value),placeholder:"",className:"w-full h-32 bg-gray-800 border border-gray-700 rounded-xl p-4 text-white outline-none focus:border-emerald-500 mb-4 resize-none focus:ring-2 focus:ring-emerald-500/20 transition-all"}),l.jsxs("button",{onClick:()=>{he.trim()&&j(!0)},disabled:!he.trim(),className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-emerald-900/30",children:[l.jsx(ca,{className:"w-5 h-5"})," "]})]})]})]})]})},HD=({onStartQuiz:r,onLoginClick:e,onNavigate:t})=>{const{user:s}=rr(),[i,c]=V.useState(!1),d=()=>{c(!0),setTimeout(()=>c(!1),3e3)},f=()=>{s?t("QUIZZES"):d()},g=()=>{s?t("LESSONS"):d()},x=()=>{t("LESSONS_EXPLANATIONS")},v=()=>{t("CONTACT_TEACHER")};return l.jsxs("section",{className:"relative w-full min-h-screen flex flex-col items-center bg-transparent overflow-hidden animate-fade-in transition-colors duration-300 pt-24 md:pt-32",children:[i&&l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center pointer-events-none px-4",children:l.jsxs("div",{className:"bg-red-900/90 border border-red-800 shadow-xl rounded-xl p-4 flex items-center gap-3 relative w-full max-w-md animate-fade-in-up pointer-events-auto backdrop-blur-md",children:[l.jsx("div",{className:"bg-red-800 p-2 rounded-full shrink-0",children:l.jsx(_f,{className:"w-6 h-6 text-red-200"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-bold text-white text-sm",children:"  "}),l.jsx("p",{className:"text-gray-300 text-xs mt-1",children:"        ."})]}),l.jsx("button",{onClick:()=>c(!1),className:"absolute top-2 left-2 text-gray-300 hover:text-white",children:l.jsx(ps,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>{c(!1),e()},className:"mr-auto bg-red-600 text-white text-xs font-bold px-3 py-1.5 rounded-lg hover:bg-red-700 transition-colors shrink-0",children:""})]})}),l.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 w-full relative z-10 flex flex-col items-center text-center",children:[l.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-black text-white leading-[1.2] lg:leading-[1.15] mb-6 drop-shadow-lg",children:["  ",l.jsx("br",{}),l.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300 inline-block relative pb-2",children:[" ",l.jsx("svg",{className:"absolute w-full h-3 -bottom-1 right-0 text-emerald-900/50 -z-10",viewBox:"0 0 100 10",preserveAspectRatio:"none",children:l.jsx("path",{d:"M0 5 Q 50 10 100 5",stroke:"currentColor",strokeWidth:"8",fill:"none"})})]}),l.jsx("br",{}),"  "]}),l.jsxs("p",{className:"text-lg md:text-xl text-gray-300 leading-relaxed max-w-2xl mx-auto mb-10",children:["      ",l.jsx("span",{className:"text-emerald-400 font-black text-2xl px-1 relative inline-block",children:"   "}),"."]}),l.jsxs("div",{className:"flex flex-col w-full max-w-md gap-3 justify-center",children:[l.jsxs("button",{onClick:f,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:l.jsx(ns,{className:"w-5 h-5 text-white"})}),l.jsx("span",{children:" "})]}),l.jsx(ra,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),l.jsxs("button",{onClick:x,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:l.jsx(Bu,{className:"w-5 h-5 text-white"})}),l.jsx("span",{children:" "})]}),l.jsx(ra,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),l.jsxs("button",{onClick:g,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:l.jsx(ss,{className:"w-5 h-5 text-white"})}),l.jsx("span",{children:" "})]}),l.jsx(ra,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),l.jsxs("button",{onClick:v,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:l.jsx(Hu,{className:"w-5 h-5 text-white"})}),l.jsx("span",{children:"  "})]}),l.jsx(ra,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),l.jsx("div",{className:"w-full mt-2",children:s?l.jsxs("button",{onClick:()=>t("PROFILE"),className:"w-full bg-gray-900 border-2 border-emerald-900 text-emerald-400 hover:bg-emerald-900/20 text-base font-bold py-3 px-5 rounded-xl transition-all flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:[l.jsx(Zn,{className:"w-5 h-5"})," "]}):l.jsxs("button",{onClick:e,className:"w-full bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-orange-500/40 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-orange-400/20",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:l.jsx(yp,{className:"w-5 h-5 text-white"})}),l.jsx("span",{children:"  "})]}),l.jsx(ra,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]})})]})]})]})},cp=({className:r})=>l.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),up=({className:r})=>l.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),GD=({className:r})=>l.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.03 2 11c0 2.87 1.56 5.47 4 7.1V22l3.57-1.96c.78.22 1.6.34 2.43.34 5.52 0 10-4.03 10-9s-4.48-9-10-9zm1.06 12.07l-2.6-2.78-5.07 2.78 5.58-5.93 2.62 2.78 5.05-2.78-5.58 5.93z"})}),al=[{id:1,name:" ",text:"      . ",platform:"whatsapp",time:"10:30 "},{id:2,name:" ",text:"     . ",platform:"messenger",time:"11:15 "},{id:3,name:" ",text:"    .",platform:"telegram",time:"09:45 "},{id:4,name:" ",text:"      .",platform:"whatsapp",time:"02:20 "},{id:5,name:" ",text:"        .",platform:"messenger",time:"04:10 "},{id:6,name:" ",text:"       . ",platform:"telegram",time:"08:00 "},{id:7,name:"  ",text:"        . ",platform:"whatsapp",time:"01:30 "},{id:8,name:" ",text:"       .",platform:"messenger",time:"06:45 "},{id:9,name:" ",text:"      .",platform:"telegram",time:"03:15 "},{id:10,name:" ",text:"      ! ",platform:"whatsapp",time:"12:00 "},{id:11,name:" ",text:"   .  . ",platform:"messenger",time:"07:30 "},{id:12,name:"  ",text:"       .",platform:"telegram",time:"10:10 "},{id:13,name:" ",text:"     .",platform:"whatsapp",time:"05:50 "},{id:14,name:" ",text:"     . ",platform:"messenger",time:"09:20 "},{id:15,name:" ",text:"      . ",platform:"telegram",time:"08:45 "}],$D=({onNavigate:r})=>{const[e,t]=V.useState(0),[s,i]=V.useState(!0);V.useEffect(()=>{const g=setInterval(()=>{i(!1),setTimeout(()=>{t(x=>(x+1)%al.length),i(!0)},500)},7e3);return()=>clearInterval(g)},[]);const c=g=>{switch(g){case"whatsapp":return l.jsx(cp,{className:"w-5 h-5 text-white"});case"messenger":return l.jsx(GD,{className:"w-5 h-5 text-white"});case"telegram":return l.jsx(up,{className:"w-5 h-5 text-white"});default:return null}},d=g=>{switch(g){case"whatsapp":return"bg-green-500";case"messenger":return"bg-blue-600";case"telegram":return"bg-sky-500";default:return"bg-gray-500"}},f=g=>l.jsxs("div",{className:"bg-gray-900 md:bg-white/5 md:backdrop-blur-md rounded-3xl p-6 shadow-sm md:shadow-lg border border-gray-800 md:border-white/5 relative h-full flex flex-col hover:border-white/20 hover:bg-gray-800 md:hover:bg-white/10 transition-all",children:[l.jsx("div",{className:"absolute -bottom-2 right-8 w-4 h-4 bg-gray-900 md:bg-white/5 border-b border-r border-gray-800 md:border-white/5 transform rotate-45"}),l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-900/50 flex items-center justify-center text-emerald-300 font-bold text-lg border border-emerald-500/20",children:g.name.charAt(0)}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-white",children:g.name}),l.jsx("span",{className:"text-xs text-gray-500 font-medium",children:g.time})]})]}),l.jsx("div",{className:`w-8 h-8 rounded-full ${d(g.platform)} flex items-center justify-center shadow-md ring-2 ring-black/20`,children:c(g.platform)})]}),l.jsxs("p",{className:"text-gray-300 text-base leading-relaxed font-medium",children:['"',g.text,'"']})]});return l.jsx("section",{className:"py-20 relative overflow-hidden",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[l.jsxs("div",{className:"text-center mb-16",children:[l.jsx("h2",{className:"text-4xl font-black text-white mb-4 drop-shadow-md",children:" "}),l.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full shadow-[0_0_10px_rgba(16,185,129,0.5)]"}),l.jsx("p",{className:"mt-6 text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"                       ."}),l.jsx("div",{className:"mt-8 flex justify-center animate-fade-in-up delay-200",children:l.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-900/20 border border-emerald-500/30 px-5 py-2.5 rounded-full shadow-lg backdrop-blur-sm",children:[l.jsx(vl,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),l.jsx("span",{className:"text-emerald-300 font-bold text-sm",children:"   "})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[l.jsxs("div",{className:"bg-gray-900 md:bg-white/5 md:backdrop-blur-xl p-6 rounded-[2.5rem] border border-gray-800 md:border-white/10 hover:border-emerald-500/50 transition-all group flex flex-col h-full shadow-lg md:shadow-2xl",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[l.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-gray-800 md:border-white/10 group-hover:border-emerald-500/30 group-hover:scale-105 transition-all",children:l.jsx("img",{src:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",alt:".   ",className:"w-full h-full object-cover"})}),l.jsxs("div",{className:"text-center sm:text-right flex-1",children:[l.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),l.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),l.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[l.jsx(bp,{className:"w-3.5 h-3.5 text-emerald-500"}),"   - "]})]})]}),l.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[l.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),l.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[l.jsx("a",{href:"https://www.facebook.com/yazanabokaheal2?locale=ms_MY",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:l.jsx(xp,{className:"w-6 h-6"})}),l.jsx("a",{href:"https://wa.me/972568401548",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:l.jsx(cp,{className:"w-6 h-6"})}),l.jsx("a",{href:"https://t.me/yazan1342",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:l.jsx(up,{className:"w-6 h-6"})})]})]})]}),l.jsxs("div",{className:"bg-gray-900 md:bg-white/5 md:backdrop-blur-xl p-6 rounded-[2.5rem] border border-gray-800 md:border-white/10 hover:border-blue-500/50 transition-all group flex flex-col h-full shadow-lg md:shadow-2xl",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[l.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-gray-800 md:border-white/10 group-hover:border-blue-500/30 group-hover:scale-105 transition-all",children:l.jsx("img",{src:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",alt:".   ",className:"w-full h-full object-cover"})}),l.jsxs("div",{className:"text-center sm:text-right flex-1",children:[l.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),l.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),l.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[l.jsx(bp,{className:"w-3.5 h-3.5 text-blue-500"}),"   - "]})]})]}),l.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[l.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),l.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[l.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:l.jsx(xp,{className:"w-6 h-6"})}),l.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:l.jsx(cp,{className:"w-6 h-6"})}),l.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:l.jsx(up,{className:"w-6 h-6"})})]})]})]})]}),l.jsx("div",{className:"text-center mb-12",children:l.jsxs("button",{onClick:()=>r("TEACHER_CV"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white text-xl font-bold px-10 py-5 rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(16,185,129,0.4)] transition-all transform hover:-translate-y-1 border border-emerald-500/50",children:[l.jsx(od,{className:"w-6 h-6"}),"  ",l.jsx(wf,{className:"w-6 h-6"})]})}),l.jsxs("div",{className:"mb-0 pt-10 border-t border-white/10",children:[l.jsxs("div",{className:"text-center mb-10",children:[l.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"  "}),l.jsx("p",{className:"text-gray-400",children:"          "})]}),l.jsxs("div",{className:`transform transition-all duration-700 ease-out ${s?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[l.jsxs("div",{className:"block md:hidden space-y-4",children:[f(al[e]),f(al[(e+1)%al.length])]}),l.jsx("div",{className:"hidden md:grid md:grid-cols-3 gap-6",children:[0,1,2].map(g=>{const x=(e+g)%al.length;return l.jsx("div",{children:f(al[x])},al[x].id)})})]})]})]})})},_2=({options:r,value:e,onChange:t,placeholder:s,disabled:i})=>{const[c,d]=V.useState(!1),f=V.useRef(null);V.useEffect(()=>{const x=v=>{f.current&&!f.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return l.jsxs("div",{className:`relative ${c?"z-[100]":"z-0"}`,ref:f,children:[l.jsxs("button",{type:"button",onClick:()=>!i&&d(!c),className:`w-full px-3 py-2.5 rounded-lg border flex justify-between items-center outline-none transition-all font-bold text-sm
            ${i?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-500 cursor-not-allowed":c?"bg-white dark:bg-gray-800 border-emerald-500 ring-1 ring-emerald-500/20 text-gray-800 dark:text-white shadow-sm":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-emerald-500 text-gray-800 dark:text-white"}
         `,children:[l.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),l.jsx(bl,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&l.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar animate-fade-in p-1 z-[100]",children:r.map((x,v)=>{if(x.isHeader)return l.jsx("div",{className:"px-3 py-1.5 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-1 first:mt-0 bg-gray-100 dark:bg-gray-800 rounded-md mb-1",children:x.label},v);const w=x.value===e;return l.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-3 py-2 rounded-md font-bold text-xs cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${w?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}
                   `,children:[x.label,w&&l.jsx(ha,{className:"w-3 h-3"})]},v)})})]})},KD=({isOpen:r,onClose:e})=>{const[t,s]=V.useState("ROLE_SELECTION"),[i,c]=V.useState(!1),[d,f]=V.useState(null),[g,x]=V.useState(null),{setTeacherSession:v}=rr(),[w,N]=V.useState(""),[C,M]=V.useState(""),[J,B]=V.useState(""),[he,oe]=V.useState(""),[le,_e]=V.useState(""),[me,G]=V.useState(""),[S,j]=V.useState(""),[A,O]=V.useState(""),[D,L]=V.useState(""),[I,de]=V.useState("male"),[ge,F]=V.useState(""),[ce,Z]=V.useState("");if(!r)return null;const se=()=>{s("ROLE_SELECTION"),f(null),x(null),N(""),M(""),B(""),oe(""),_e(""),G(""),j(""),O(""),L(""),de("male"),Z(""),F(""),c(!1)},Se=()=>{se(),e()},k=gt=>{gt.preventDefault(),f(null),c(!0),setTimeout(()=>{w==="2001"?(v(".   ","yazan@etqan.edu"),x("   !"),setTimeout(()=>Se(),1500)):w==="2003"?(v(".   ","majd@etqan.edu"),x("    !"),setTimeout(()=>Se(),1500)):(f("   "),c(!1))},800)},U=async gt=>{gt.preventDefault(),f(null),c(!0);try{await xC(Uu,C.trim(),J),x("   !"),setTimeout(()=>{Se(),window.location.reload()},1500)}catch(Rt){console.error(Rt),f("      "),c(!1)}},z=async gt=>{gt.preventDefault(),f(null),c(!0);try{const lt=(await pC(Uu,A.trim(),D)).user,wn="",ws=S==="university"&&ge?ge:"";await Ny(Hn(Le,"users",lt.uid),{firstName:he,lastName:le,age:me,grade:S,gender:I,school:ws,avatar:wn,profileBackground:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",email:A.trim(),role:"student",totalXP:0,quizzesCompleted:0,createdAt:new Date}),x("   !"),setTimeout(()=>{Se(),window.location.reload()},1500)}catch(Rt){console.error(Rt),Rt.code==="auth/email-already-in-use"?f("   "):Rt.code==="auth/weak-password"?f("   "):f("    .    ."),c(!1)}},ee=async gt=>{gt.preventDefault(),f(null),c(!0);try{await gC(Uu,ce.trim()),x("   !")}catch(Rt){console.error(Rt),Rt.code==="auth/user-not-found"?f("    "):Rt.code==="auth/invalid-email"?f("    "):Rt.code==="auth/too-many-requests"?f("           ."):f("          .")}finally{c(!1)}},ve=()=>{switch(t){case"TEACHER_LOGIN":return"    ...";case"STUDENT_LOGIN":return"  ...";case"STUDENT_SIGNUP":return"   ...";case"FORGOT_PASSWORD":return"   ...";default:return" ..."}},Oe=()=>l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsx("h3",{className:"text-xl font-bold text-center mb-6 text-gray-800 dark:text-white",children:"   "}),l.jsxs("button",{onClick:()=>s("STUDENT_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-all",children:[l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900 p-3 rounded-full ml-4 group-hover:bg-emerald-200 dark:group-hover:bg-emerald-800 transition-colors",children:l.jsx(Zn,{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400"})}),l.jsxs("div",{className:"text-right flex-1",children:[l.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),l.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"    "})]}),l.jsx(qg,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500"})]}),l.jsxs("button",{onClick:()=>s("TEACHER_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all",children:[l.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-3 rounded-full ml-4 group-hover:bg-blue-200 dark:group-hover:bg-blue-800 transition-colors",children:l.jsx(fa,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),l.jsxs("div",{className:"text-right flex-1",children:[l.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),l.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"   "})]}),l.jsx(qg,{className:"w-5 h-5 text-gray-300 group-hover:text-blue-500"})]})]}),Ue=()=>l.jsxs("form",{onSubmit:k,className:"flex flex-col gap-4",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(li,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),l.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:" "}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"     "})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),l.jsx("input",{type:"password",value:w,onChange:gt=>N(gt.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 dark:focus:ring-blue-900 outline-none transition-all text-center text-lg tracking-widest bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0})]}),l.jsx("button",{type:"submit",className:"mt-4 w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 dark:shadow-none",children:""})]}),at=()=>l.jsxs("form",{onSubmit:U,className:"flex flex-col gap-4",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:" !   "})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"email",value:C,onChange:gt=>M(gt.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),l.jsx(jr,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"password",value:J,onChange:gt=>B(gt.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0}),l.jsx(li,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]}),l.jsx("div",{className:"text-left",children:l.jsx("button",{type:"button",onClick:()=>s("FORGOT_PASSWORD"),className:"text-xs text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})})]}),l.jsx("button",{type:"submit",disabled:i,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:" "}),l.jsx("div",{className:"mt-4 text-center",children:l.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:["   "," ",l.jsx("button",{type:"button",onClick:()=>s("STUDENT_SIGNUP"),className:"text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})]})})]}),Re=()=>{const gt=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(lt=>({label:` ${lt}`,value:lt.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"  ",value:"English Major - QOU"},{label:" ",value:"university"}],Rt=[{label:"",value:"male"},{label:"",value:"female"}];return l.jsxs("form",{onSubmit:z,className:"flex flex-col gap-3",children:[l.jsxs("div",{className:"text-center mb-4",children:[l.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"   "}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"   "})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),l.jsx("input",{type:"text",value:he,onChange:lt=>oe(lt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),l.jsx("input",{type:"text",value:le,onChange:lt=>_e(lt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),l.jsx("input",{type:"number",value:me,onChange:lt=>G(lt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),l.jsx(_2,{options:Rt,value:I,onChange:lt=>de(lt),placeholder:" "})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 block mb-1",children:" "}),l.jsx(_2,{options:gt,value:S,onChange:lt=>j(lt),placeholder:"  / "})]}),S==="university"&&l.jsxs("div",{className:"space-y-1 animate-fade-in",children:[l.jsx("label",{className:"text-xs font-bold text-blue-400 block mb-1",children:"  / "}),l.jsx("input",{type:"text",value:ge,onChange:lt=>F(lt.target.value),placeholder:":   - ",className:"w-full px-3 py-2 rounded-lg border border-blue-500/50 focus:border-blue-500 outline-none bg-blue-50 dark:bg-blue-900/10 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),l.jsx("input",{type:"email",value:A,onChange:lt=>O(lt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),l.jsx("input",{type:"password",value:D,onChange:lt=>L(lt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0,minLength:6})]}),l.jsx("button",{type:"submit",disabled:i,className:"mt-2 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:" "}),l.jsx("div",{className:"text-center mt-2",children:l.jsx("button",{type:"button",onClick:()=>s("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors",children:"    "})})]})},Nt=()=>l.jsxs("form",{onSubmit:ee,className:"flex flex-col gap-4",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),l.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:["     ",l.jsx("strong",{children:""}),"  "]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"email",value:ce,onChange:gt=>Z(gt.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),l.jsx(jr,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),l.jsx("button",{type:"submit",disabled:i,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:"  "}),l.jsx("div",{className:"text-center mt-4",children:l.jsxs("button",{type:"button",onClick:()=>s("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors flex items-center justify-center gap-1 mx-auto",children:[l.jsx(wf,{className:"w-4 h-4"}),"  "]})})]});return l.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300",onClick:Se}),l.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl w-full max-w-md relative shadow-2xl overflow-visible animate-fade-in-up p-6 min-h-[400px] flex flex-col border border-gray-100 dark:border-gray-800",children:[i&&!g&&l.jsxs("div",{className:"absolute inset-0 bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm z-50 flex flex-col items-center justify-center animate-fade-in rounded-3xl",children:[l.jsxs("div",{className:"relative mb-6",children:[l.jsx("div",{className:"absolute inset-0 bg-emerald-200 dark:bg-emerald-900 rounded-full animate-ping opacity-30 duration-1000"}),l.jsx("div",{className:"relative w-20 h-20 bg-emerald-50 dark:bg-emerald-900/50 rounded-full flex items-center justify-center border border-emerald-100 dark:border-emerald-800 shadow-inner",children:l.jsx(bt,{className:"w-10 h-10 text-emerald-600 dark:text-emerald-400 animate-spin"})})]}),l.jsx("h4",{className:"text-lg font-black text-gray-800 dark:text-white mb-2 tracking-tight animate-pulse",children:ve()}),l.jsx("p",{className:"text-gray-400 text-xs font-medium",children:"   "})]}),l.jsx("button",{onClick:Se,disabled:i,className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 disabled:opacity-50",children:l.jsx(ps,{className:"w-5 h-5"})}),t!=="ROLE_SELECTION"&&!g&&t!=="FORGOT_PASSWORD"&&l.jsxs("button",{onClick:()=>s("ROLE_SELECTION"),disabled:i,className:"absolute top-4 right-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 flex items-center gap-1 disabled:opacity-50",children:[l.jsx(qg,{className:"w-5 h-5"}),l.jsx("span",{className:"text-xs font-bold",children:""})]}),l.jsx("div",{className:"mt-6 flex-1 flex flex-col justify-center",children:g?l.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center gap-4 animate-fade-in",children:[l.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mb-2 animate-[bounce_1s_infinite]",children:l.jsx(ha,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),l.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white leading-relaxed px-4 whitespace-pre-line",children:g}),t==="FORGOT_PASSWORD"&&l.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-900 rounded-xl p-4 mx-4 text-sm text-yellow-800 dark:text-yellow-200 text-right shadow-sm mt-4",children:[l.jsxs("p",{className:"font-bold flex items-center gap-2 mb-2 text-yellow-900 dark:text-yellow-100",children:[l.jsx(_f,{className:"w-5 h-5"}),"  :"]}),l.jsxs("p",{className:"leading-relaxed",children:["         ",l.jsx("strong",{children:"    (Spam)"}),"  (Junk)."]})]}),l.jsx("button",{onClick:()=>{t==="FORGOT_PASSWORD"?(s("STUDENT_LOGIN"),x(null)):Se()},className:"mt-8 bg-emerald-600 text-white px-10 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none transform hover:scale-105 duration-200",children:t==="FORGOT_PASSWORD"?"  ":""})]}):l.jsxs(l.Fragment,{children:[t==="ROLE_SELECTION"&&Oe(),t==="TEACHER_LOGIN"&&Ue(),t==="STUDENT_LOGIN"&&at(),t==="STUDENT_SIGNUP"&&Re(),t==="FORGOT_PASSWORD"&&Nt(),d&&l.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 rounded-lg flex items-start gap-2 text-red-600 dark:text-red-400 text-sm animate-fade-in",children:[l.jsx(_f,{className:"w-5 h-5 shrink-0 mt-0.5"}),l.jsx("span",{className:"font-medium",children:d})]})]})})]})]})},QD=()=>{const{user:r}=rr(),[e,t]=V.useState(!1),[s,i]=V.useState(null),[c,d]=V.useState("MCQ"),[f,g]=V.useState({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),[x,v]=V.useState([]),[w,N]=V.useState(null),[C,M]=V.useState({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:"",generalInstruction:"",passageFontSize:"md"}),[J,B]=V.useState(""),[he,oe]=V.useState(!1),[le,_e]=V.useState([]),[me,G]=V.useState(!1),[S,j]=V.useState(""),A=(z,ee)=>{M(ve=>({...ve,[z]:ee}))},O=(z,ee)=>{const ve=[...C.options];ve[z]=ee,M(Oe=>({...Oe,options:ve}))},D=()=>{if(!C.question.trim()){alert("   ");return}if((c==="MCQ"||c==="READING")&&C.options.some(ve=>!ve.trim())){alert("   ");return}if(c==="READING"&&!C.passageContent.trim()){alert("   ");return}if(c==="REORDER"&&!J.trim()){alert("    ");return}let z=[];if(c==="TF")z=["",""];else if(c==="REORDER"){if(z=J.split(" ").filter(ve=>ve.trim().length>0),z.length<2){alert("       ");return}}else z=C.options;const ee={id:w||Date.now(),question:C.question,options:z,correctAnswer:C.correctAnswer,explanation:C.explanation||"",type:c};c==="READING"&&(ee.passageContent=C.passageContent,ee.generalInstruction=C.generalInstruction,ee.passageFontSize=C.passageFontSize),w?(v(x.map(ve=>ve.id===w?ee:ve)),N(null)):v([...x,ee]),L()},L=()=>{M({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:"",generalInstruction:"",passageFontSize:"md"}),B(""),N(null),d("MCQ")},I=z=>{const ee=x.find(ve=>ve.id===z);ee&&(N(z),d(ee.type||"MCQ"),ee.type==="REORDER"?(B(ee.options.join(" ")),M({question:ee.question,options:["","","",""],correctAnswer:ee.correctAnswer,explanation:ee.explanation||"",passageContent:ee.passageContent||"",generalInstruction:ee.generalInstruction||"",passageFontSize:ee.passageFontSize||"md"})):(M({question:ee.question,options:ee.type==="TF"?["","","",""]:ee.options.length>=4?ee.options:[...ee.options,...Array(4-ee.options.length).fill("")],correctAnswer:ee.correctAnswer,explanation:ee.explanation||"",passageContent:ee.passageContent||"",generalInstruction:ee.generalInstruction||"",passageFontSize:ee.passageFontSize||"md"}),B("")),window.scrollTo({top:0,behavior:"smooth"}))},de=()=>{L()},ge=z=>{window.confirm("      ")&&(v(x.filter(ee=>ee.id!==z)),w===z&&L())},F=async()=>{if(!f.title||!f.grade){alert("     ");return}if(x.length===0){alert("     ");return}t(!0);try{const z={title:f.title,subject:f.subject,grade:f.grade,category:f.category,questions:x,createdBy:(r==null?void 0:r.uid)||"teacher",teacherName:(r==null?void 0:r.displayName)||"",description:f.description||"",duration:parseInt(f.duration)||30,questionDuration:f.questionDuration?parseInt(f.questionDuration):null};if(s){const ee=Hn(Le,"quizzes",s);await Td(ee,{...z,updatedAt:Pn()}),alert("    !")}else await as(it(Le,"quizzes"),{...z,createdAt:Pn()}),await as(it(Le,"notifications"),{recipientId:"all",title:" ",message:`   : ${f.title}  ${f.grade}`,type:"quiz",createdAt:Pn(),read:!1}),alert("    !");g({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),v([]),i(null),L()}catch(z){console.error("Error saving quiz:",z),alert("   ")}finally{t(!1)}},ce=()=>{window.confirm("        .")&&(g({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),v([]),i(null),L())},Z=async()=>{G(!0);try{const z=Ln(it(Le,"quizzes"),Ed("createdAt","desc")),ee=await rs(z);_e(ee.docs.map(ve=>({id:ve.id,...ve.data()})))}catch(z){console.error(z)}G(!1)},se=()=>{Z(),oe(!0)},Se=z=>{x.length>0&&!window.confirm("         .")||(i(z.id||null),g({title:z.title,subject:z.subject,grade:z.grade,category:z.category||"Language",description:z.description||"",duration:z.duration?z.duration.toString():"30",questionDuration:z.questionDuration?z.questionDuration.toString():""}),v(z.questions),oe(!1),L(),window.scrollTo({top:0,behavior:"smooth"}))},k=le.filter(z=>(z.title?z.title.toLowerCase().includes(S.toLowerCase()):!1)||(z.grade?z.grade.includes(S):!1)),U=[{value:"sm",label:""},{value:"md",label:""},{value:"lg",label:""},{value:"xl",label:" "}];return l.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in transition-colors duration-300 text-gray-100",children:[l.jsx("div",{className:"bg-gray-950 pt-10 pb-28 px-4 border-b border-white/5 shadow-sm relative overflow-hidden",children:l.jsx("div",{className:"max-w-6xl mx-auto relative z-10",children:l.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsx("div",{className:"p-4 bg-blue-900/30 rounded-3xl shadow-inner border border-blue-800",children:l.jsx(dw,{className:"w-10 h-10 text-blue-400"})}),l.jsxs("div",{className:"text-center md:text-right",children:[l.jsx("h1",{className:"text-3xl md:text-5xl font-black tracking-tight text-white mb-2",children:" "}),l.jsxs("p",{className:"text-blue-400 font-bold text-lg",children:["  ",r==null?void 0:r.displayName]})]})]}),l.jsx("div",{className:"flex gap-3",children:l.jsxs("button",{onClick:se,className:"bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-emerald-700 transition-colors shadow-lg",children:[l.jsx(gp,{className:"w-5 h-5"})," "]})})]})})}),l.jsx("div",{className:"max-w-6xl mx-auto px-4 -mt-16 relative z-20",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[l.jsxs("div",{className:`bg-gray-900 rounded-[2rem] shadow-xl border p-6 md:p-8 transition-all ${s?"border-blue-500 ring-2 ring-blue-900":"border-gray-700"}`,children:[l.jsxs("div",{className:"flex justify-between items-start mb-8 border-b border-gray-700 pb-4",children:[l.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[l.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:l.jsx(ns,{className:"w-5 h-5 text-blue-400"})}),s?"  ":"  "]}),s&&l.jsxs("div",{className:"flex gap-2",children:[l.jsx("span",{className:"bg-blue-900 text-blue-300 px-3 py-1 rounded-full text-xs font-bold animate-pulse",children:" "}),l.jsx("button",{onClick:ce,className:"text-red-500 hover:bg-red-900/20 px-2 rounded",children:l.jsx(ps,{className:"w-4 h-4"})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"col-span-2",children:[l.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),l.jsx("input",{type:"text",value:f.title,onChange:z=>g({...f,title:z.target.value}),placeholder:":    - ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white placeholder-gray-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),l.jsxs("div",{className:"relative",children:[l.jsx(ox,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),l.jsxs("select",{value:f.subject,onChange:z=>g({...f,subject:z.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[l.jsx("option",{value:"English",children:"English"}),l.jsx("option",{value:"Science",children:""}),l.jsx("option",{value:"Math",children:""})]})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"    "}),l.jsxs("div",{className:"relative",children:[l.jsx(fa,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),l.jsxs("select",{value:f.grade,onChange:z=>g({...f,grade:z.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[l.jsx("option",{value:"",className:"text-gray-400",children:" "}),l.jsx("optgroup",{label:" ",children:[5,6,7,8,9,10,11,12].map(z=>l.jsxs("option",{value:z.toString(),children:[" ",z]},z))}),l.jsx("optgroup",{label:" ",children:l.jsx("option",{value:"English Major - QOU",children:"   -   "})})]}),l.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:l.jsx(bl,{className:"w-5 h-5"})})]})]}),l.jsxs("div",{className:"col-span-2 md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  /  (Category)"}),l.jsxs("div",{className:"relative",children:[l.jsx(P2,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),l.jsxs("select",{value:f.category,onChange:z=>g({...f,category:z.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[l.jsx("option",{value:"Language",children:"Language ()"}),l.jsx("option",{value:"Reading",children:"Reading ()"}),l.jsx("option",{value:"Writing",children:"Writing ()"}),l.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"}),l.jsx("option",{value:"General",children:"  (General Quiz)"})]}),l.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:l.jsx(bl,{className:"w-5 h-5"})})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[l.jsx(ix,{className:"w-4 h-4 text-blue-600"}),"  ()"]}),l.jsx("input",{type:"number",min:"1",value:f.duration,onChange:z=>g({...f,duration:z.target.value}),placeholder:": 30",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[l.jsx(bA,{className:"w-4 h-4 text-blue-600"}),"   ()"]}),l.jsx("input",{type:"number",min:"5",value:f.questionDuration,onChange:z=>g({...f,questionDuration:z.target.value}),placeholder:"   ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"}),l.jsx("p",{className:"text-[10px] text-gray-500 mt-1 mr-1",children:":         ."})]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  ()"}),l.jsx("textarea",{value:f.description,onChange:z=>g({...f,description:z.target.value}),className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-medium text-white h-24 resize-none placeholder-gray-500",placeholder:"    ..."})]})]}),l.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 md:p-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8 border-b border-gray-700 pb-4",children:[l.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[l.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:l.jsx(uw,{className:"w-5 h-5 text-blue-400"})}),w?" ":" "]}),l.jsxs("div",{className:"flex flex-wrap gap-2 bg-gray-800 p-1.5 rounded-xl self-start",children:[l.jsx("button",{onClick:()=>d("MCQ"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${c==="MCQ"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:"  "}),l.jsx("button",{onClick:()=>d("TF"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${c==="TF"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:"  "}),l.jsxs("button",{onClick:()=>d("READING"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${c==="READING"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[l.jsx(ss,{className:"w-4 h-4"})," "]}),l.jsxs("button",{onClick:()=>d("REORDER"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${c==="REORDER"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[l.jsx(O2,{className:"w-4 h-4"})," "]})]})]}),l.jsxs("div",{className:"space-y-6",children:[c==="READING"&&l.jsxs("div",{className:"space-y-4 bg-blue-900/20 p-5 rounded-2xl border border-blue-800 mb-6",children:[l.jsxs("h4",{className:"font-bold text-blue-300 flex items-center gap-2 mb-2",children:[l.jsx(xA,{className:"w-5 h-5"})," "]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (General Instruction)"}),l.jsx("input",{type:"text",value:C.generalInstruction,onChange:z=>A("generalInstruction",z.target.value),placeholder:": Read the following text then answer the question",className:"w-full px-4 py-3 rounded-xl border border-blue-700 focus:border-blue-500 outline-none bg-gray-800 text-sm font-medium"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (Passage)"}),l.jsx("textarea",{value:C.passageContent,onChange:z=>A("passageContent",z.target.value),placeholder:"   ... ( Enter   )",className:"w-full px-4 py-3 rounded-xl border border-blue-700 focus:border-blue-500 outline-none bg-gray-800 text-sm font-medium h-40 resize-y whitespace-pre-wrap",style:{direction:"ltr",textAlign:"left"}}),l.jsx("p",{className:"text-[10px] text-blue-500 mt-1",children:"* :        ."})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs font-bold text-blue-300 mb-2 flex items-center gap-2",children:[l.jsx(SA,{className:"w-4 h-4"}),"   (  )"]}),l.jsx("div",{className:"flex gap-3",children:U.map(z=>l.jsx("button",{onClick:()=>A("passageFontSize",z.value),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all border ${C.passageFontSize===z.value?"bg-blue-600 text-white border-blue-600":"bg-gray-800 text-gray-300 border-gray-600 hover:border-blue-400"}`,children:z.label},z.value))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:c==="READING"?"  ":c==="REORDER"?"/ ":" "}),l.jsxs("div",{className:"relative",children:[l.jsx(oa,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4"}),l.jsx("input",{type:"text",value:C.question,onChange:z=>A("question",z.target.value),placeholder:c==="REORDER"?": Rearrange the following sentence":"   ...",className:"w-full px-5 py-4 pr-12 rounded-2xl border-2 border-gray-600 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none font-bold text-lg text-white bg-gray-800 placeholder-gray-400 transition-all"})]})]}),c==="MCQ"||c==="READING"?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.options.map((z,ee)=>l.jsxs("div",{className:`relative group transition-all duration-300 ${C.correctAnswer===ee?"scale-[1.02]":""}`,children:[l.jsxs("label",{className:"flex items-center justify-between mb-2 px-1",children:[l.jsxs("span",{className:`text-xs font-bold ${C.correctAnswer===ee?"text-blue-400":"text-gray-400"}`,children:[" ",ee+1]}),l.jsx("button",{onClick:()=>A("correctAnswer",ee),className:`text-[10px] px-2 py-1 rounded-md transition-colors font-bold ${C.correctAnswer===ee?"bg-blue-900/30 text-blue-300":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:C.correctAnswer===ee?" ":" "})]}),l.jsx("input",{type:"text",value:z,onChange:ve=>O(ee,ve.target.value),placeholder:`  ${ee+1}`,className:`w-full px-4 py-3 rounded-xl border-2 outline-none transition-all font-medium ${ee===C.correctAnswer?"border-blue-500 bg-blue-900/20 text-white shadow-sm ring-2 ring-blue-900/30":"border-gray-600 bg-gray-700 focus:border-blue-400 text-gray-200"}`})]},ee))}):c==="REORDER"?l.jsxs("div",{className:"space-y-4",children:[l.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-1",children:"  (   )"}),l.jsx("input",{type:"text",dir:"ltr",value:J,onChange:z=>B(z.target.value),placeholder:"e.g. The sun rises in the east",className:"w-full px-5 py-4 rounded-2xl border-2 border-emerald-800 focus:border-emerald-500 outline-none text-lg font-medium text-white bg-emerald-900/10 text-left"}),J&&l.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:J.split(" ").filter(z=>z.trim()).map((z,ee)=>l.jsx("span",{className:"bg-gray-700 px-3 py-1 rounded-lg text-sm font-bold text-gray-300",children:z},ee))}),l.jsx("p",{className:"text-xs text-gray-500",children:"      ."})]}):l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("button",{onClick:()=>A("correctAnswer",0),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${C.correctAnswer===0?"border-blue-500 bg-blue-900/30 text-blue-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[C.correctAnswer===0&&l.jsx(bn,{className:"w-6 h-6"})," (True)"]}),l.jsxs("button",{onClick:()=>A("correctAnswer",1),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${C.correctAnswer===1?"border-red-500 bg-red-900/30 text-red-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[C.correctAnswer===1&&l.jsx(bn,{className:"w-6 h-6"})," (False)"]})]}),l.jsxs("div",{className:"bg-yellow-900/10 p-4 rounded-2xl border border-yellow-900/30",children:[l.jsxs("label",{className:"block text-sm font-bold text-yellow-500 mb-2 flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),"  ()"]}),l.jsx("textarea",{value:C.explanation,onChange:z=>A("explanation",z.target.value),placeholder:"        ...",className:"w-full px-4 py-3 rounded-xl border border-yellow-800/50 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-900/30 outline-none text-gray-200 bg-gray-800 h-20 resize-none placeholder-gray-400 text-sm",dir:"auto"})]}),l.jsxs("div",{className:"flex gap-3",children:[w&&l.jsxs("button",{onClick:de,className:"flex-1 bg-gray-700 text-gray-300 py-4 rounded-2xl font-bold hover:bg-gray-600 transition-all flex items-center justify-center gap-2",children:[l.jsx(M2,{className:"w-5 h-5"})," "]}),l.jsx("button",{onClick:D,className:`flex-1 bg-gray-800 text-white py-4 rounded-2xl font-bold hover:bg-gray-900 transition-all shadow-none flex items-center justify-center gap-2 transform hover:-translate-y-1 border border-gray-700 ${w?"bg-blue-600 hover:bg-blue-700 border-blue-600":""}`,children:w?l.jsxs(l.Fragment,{children:[l.jsx(gi,{className:"w-5 h-5"})," "]}):l.jsxs(l.Fragment,{children:[l.jsx(uw,{className:"w-5 h-5"}),"  "]})})]})]})]})]}),l.jsx("div",{className:"lg:col-span-1",children:l.jsxs("div",{className:"sticky top-24 space-y-6",children:[l.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6",children:[l.jsxs("h3",{className:"text-lg font-black text-white mb-6 flex items-center gap-2",children:[l.jsx(gi,{className:"w-5 h-5 text-blue-400"})," "]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"p-5 bg-gray-800 rounded-2xl border border-gray-600 flex flex-col gap-3",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-gray-400 font-medium",children:" "}),l.jsx("span",{className:"font-black text-white bg-gray-600 px-3 py-0.5 rounded-md shadow-sm",children:x.length})]}),l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-gray-400 font-medium",children:" "}),l.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:f.category})]}),l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-gray-400 font-medium",children:" "}),l.jsxs("span",{className:"font-bold text-white",children:[f.duration," "]})]}),l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-gray-400 font-medium",children:" "}),s?l.jsx("span",{className:"text-emerald-400 font-bold bg-emerald-900/30 px-2 py-0.5 rounded-md",children:""}):l.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:""})]})]}),l.jsxs("button",{onClick:F,disabled:e||x.length===0,className:`w-full py-4 rounded-2xl font-black text-white shadow-lg transition-all flex items-center justify-center gap-2 transform ${e||x.length===0?"bg-gray-600 cursor-not-allowed shadow-none":"bg-blue-600 hover:bg-blue-700 shadow-none hover:-translate-y-1"}`,children:[e?l.jsx(bt,{className:"w-5 h-5 animate-spin"}):s?l.jsx(am,{className:"w-5 h-5"}):l.jsx(bn,{className:"w-5 h-5"}),e?" ...":s?" ":"  "]})]})]}),x.length>0&&l.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 animate-fade-in-up",children:[l.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[l.jsx("span",{className:"bg-blue-900/30 p-1.5 rounded-lg",children:l.jsx(dw,{className:"w-4 h-4 text-blue-400"})}),"  (",x.length,")"]}),l.jsx("div",{className:"space-y-3 max-h-[calc(100vh-400px)] overflow-y-auto pr-2 custom-scrollbar",children:x.map((z,ee)=>l.jsxs("div",{className:`p-3 rounded-xl border transition-all group relative ${w===z.id?"bg-blue-900/20 border-blue-500 ring-1 ring-blue-500":"bg-gray-700/50 border-gray-600 hover:border-blue-300"}`,children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"bg-gray-600 text-gray-300 font-bold w-6 h-6 flex items-center justify-center rounded-lg text-xs shrink-0 shadow-sm",children:ee+1}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-bold text-gray-200 text-sm line-clamp-2 mb-1.5",children:z.question}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("span",{className:"text-[10px] bg-gray-600 text-gray-300 px-2 py-0.5 rounded border border-gray-500",children:z.type==="REORDER"?"":z.options.length===2?"/":z.passageContent?"":""})})]})]}),l.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-600/50 justify-end",children:[l.jsxs("button",{onClick:()=>I(z.id),className:"flex items-center gap-1 text-xs font-bold text-blue-400 hover:bg-blue-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[l.jsx(wp,{className:"w-3.5 h-3.5"}),""]}),l.jsx("div",{className:"w-px h-3 bg-gray-600"}),l.jsxs("button",{onClick:()=>ge(z.id),className:"flex items-center gap-1 text-xs font-bold text-red-500 hover:bg-red-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[l.jsx(wi,{className:"w-3.5 h-3.5"}),""]})]}),z.explanation&&l.jsxs("div",{className:"mt-2 bg-yellow-900/10 p-2 rounded-lg border border-yellow-900/20 text-xs text-yellow-500/80 line-clamp-1",children:[": ",z.explanation]})]},z.id))})]})]})})]})}),he&&l.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-3xl max-h-[85vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden",children:[l.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:l.jsx(gp,{className:"w-6 h-6 text-emerald-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-black text-white",children:" "}),l.jsx("p",{className:"text-sm text-gray-400",children:"    "})]})]}),l.jsx("button",{onClick:()=>oe(!1),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:l.jsx(ps,{className:"w-6 h-6"})})]}),l.jsx("div",{className:"p-4 bg-gray-800 border-b border-gray-700",children:l.jsxs("div",{className:"relative",children:[l.jsx(Us,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-4 pointer-events-none"}),l.jsx("input",{type:"text",placeholder:"   ...",value:S,onChange:z=>j(z.target.value),className:"w-full px-12 py-3 rounded-xl border border-gray-700 focus:border-emerald-500 outline-none bg-gray-700 font-bold text-white transition-all"})]})}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-900 custom-scrollbar",children:me?l.jsx("div",{className:"flex justify-center py-10",children:l.jsx(bt,{className:"w-8 h-8 animate-spin text-emerald-600"})}):k.length===0?l.jsx("div",{className:"text-center py-10 text-gray-400",children:"   "}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:k.map(z=>l.jsxs("div",{onClick:()=>Se(z),className:"bg-gray-800 p-4 rounded-2xl border border-gray-700 cursor-pointer hover:border-emerald-500 hover:shadow-lg transition-all group",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsx("span",{className:"bg-blue-900/30 text-blue-300 text-[10px] font-bold px-2 py-0.5 rounded-md",children:z.subject}),l.jsx("span",{className:"text-xs text-gray-400",children:z.grade})]}),l.jsx("h4",{className:"font-bold text-white mb-2 line-clamp-1 group-hover:text-emerald-400 transition-colors",children:z.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[l.jsx(oa,{className:"w-3 h-3"}),z.questions.length," "]})]},z.id))})})]})})]})},dp=[{minLevel:1,title:" ",color:"bg-gray-100 text-gray-600 border-gray-200",icon:lx},{minLevel:5,title:" ",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:ns},{minLevel:10,title:" ",color:"bg-blue-100 text-blue-700 border-blue-200",icon:Us},{minLevel:15,title:" ",color:"bg-indigo-100 text-indigo-700 border-indigo-200",icon:od},{minLevel:20,title:" ",color:"bg-purple-100 text-purple-700 border-purple-200",icon:lm},{minLevel:30,title:" ",color:"bg-amber-100 text-amber-700 border-amber-200",icon:ic}],XD=[{id:"first_step",title:" ",desc:"   ",icon:lx,color:"text-emerald-500",bg:"bg-emerald-500/10",condition:r=>r.quizzesCompleted>=1},{id:"perfect_score",title:" ",desc:"  100%   ",icon:vl,color:"text-yellow-500",bg:"bg-yellow-500/10",condition:r=>r.hasPerfectScore},{id:"dedicated",title:" ",desc:" 5  ",icon:ns,color:"text-blue-500",bg:"bg-blue-500/10",condition:r=>r.quizzesCompleted>=5},{id:"high_level",title:" ",desc:"  5",icon:lm,color:"text-orange-500",bg:"bg-orange-500/10",condition:r=>r.level>=5},{id:"expert",title:" ",desc:" 10 ",icon:Mo,color:"text-purple-500",bg:"bg-purple-500/10",condition:r=>r.quizzesCompleted>=10},{id:"scholar",title:" ",desc:" 1000   (XP)",icon:Us,color:"text-cyan-500",bg:"bg-cyan-500/10",condition:r=>r.totalXP>=1e3},{id:"sharpshooter",title:"",desc:"    3 ",icon:ux,color:"text-red-500",bg:"bg-red-500/10",condition:r=>r.perfectScoresCount>=3},{id:"veteran",title:"",desc:" 20 ",icon:V2,color:"text-indigo-500",bg:"bg-indigo-500/10",condition:r=>r.quizzesCompleted>=20},{id:"rocket",title:"",desc:"  15",icon:Z5,color:"text-pink-500",bg:"bg-pink-500/10",condition:r=>r.level>=15},{id:"master",title:"",desc:"  30",icon:ic,color:"text-amber-500",bg:"bg-amber-500/10",condition:r=>r.level>=30}],YD=[{url:"https://lh3.googleusercontent.com/d/1ufUwP7M3wdxWBW60s2xdpZC6W7jfpXv4",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1AqS4xhkK53MwCO-LFRdmtYBQsYSH6vz1",minLevel:1},{url:"https://lh3.googleusercontent.com/d/198SBde0OI07puyVx53mi9MpZ7F-iKltI",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1E--pczIn4ZCSWpWYhKZutLX8lfhtmCrp",minLevel:5},{url:"https://lh3.googleusercontent.com/d/1ep_ggXFs0rCkGJ212WkY5DuRbLNkyLyr",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1siamCZMGjbXH6L9bop_dN1UPSSwfyIwc",minLevel:15},{url:"https://lh3.googleusercontent.com/d/1seg3JDYcNsDBtTY4gU9N5empajSAT_-E",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1QnacjkYXRr-N4yhmt44LubRxbRnzNgqH",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1h5uzg3mZaeaozqEkzwItA14xqDq7kbMb",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1qKn7YfQr7VaDPXB8EjUvlCW-qt3v5E0u",minLevel:15}],hp=[{id:"nature_1",url:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",name:" ",minLevel:1},{id:"nature_2",url:"https://lh3.googleusercontent.com/d/1tBjHedpcXQiEjXro--zG3iWDokgrDbgZ",name:" ",minLevel:5},{id:"nature_3",url:"https://lh3.googleusercontent.com/d/1Chp7z63_XfLlt4ZC0MRmKwNsSTlCWwOa",name:" ",minLevel:10},{id:"nature_4",url:"https://lh3.googleusercontent.com/d/12RHK_FCMJt8D24AB3UV7nHxbD50EF4MX",name:" ",minLevel:15},{id:"nature_5",url:"https://lh3.googleusercontent.com/d/1We4c8009ObQB9ZDrpQ8ssUuos4V_4b9w",name:" ",minLevel:20}],N2=({options:r,value:e,onChange:t,placeholder:s,disabled:i})=>{const[c,d]=V.useState(!1),f=V.useRef(null);V.useEffect(()=>{const x=v=>{f.current&&!f.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return l.jsxs("div",{className:`relative ${c?"z-[100]":"z-0"}`,ref:f,children:[l.jsxs("button",{type:"button",onClick:()=>!i&&d(!c),className:`w-full px-4 py-3 rounded-xl border flex justify-between items-center outline-none transition-all font-bold text-sm
            ${i?"bg-gray-950 border-gray-800 text-gray-600 cursor-not-allowed":c?"bg-gray-950 border-blue-500 ring-2 ring-blue-900 text-white shadow-lg":"bg-gray-950 border-gray-800 hover:border-blue-900 text-white shadow-inner"}
         `,children:[l.jsx("span",{className:`truncate ${g?"":"text-gray-600"}`,children:g?g.label:s}),l.jsx(bl,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-blue-500":""}`})]}),c&&l.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-900 border border-gray-700 rounded-xl shadow-xl max-h-60 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-[100]",children:r.map((x,v)=>{if(x.isHeader)return l.jsx("div",{className:"px-4 py-2 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-800/50 rounded-lg mb-1",children:x.label},v);const w=x.value===e;return l.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-4 py-2.5 rounded-lg font-bold text-xs cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${w?"bg-blue-900/30 text-blue-400":"text-gray-300 hover:bg-gray-800"}
                   `,children:[x.label,w&&l.jsx(ha,{className:"w-3 h-3"})]},v)})})]})},JD=({onNavigate:r})=>{const{user:e,updateUserProfile:t}=rr(),[s,i]=V.useState(!1),[c,d]=V.useState(null),[f,g]=V.useState(!1),[x,v]=V.useState(!1),[w,N]=V.useState(null),[C,M]=V.useState((e==null?void 0:e.avatar)||""),[J,B]=V.useState((e==null?void 0:e.profileBackground)||hp[0].url),[he,oe]=V.useState([]),[le,_e]=V.useState(!0),[me,G]=V.useState(0),[S,j]=V.useState(1),[A,O]=V.useState(dp[0]),[D,L]=V.useState({quizzesCompleted:0,hasPerfectScore:!1,level:1,totalXP:0,perfectScoresCount:0}),[I,de]=V.useState([]),[ge,F]=V.useState(""),[ce,Z]=V.useState(!1),[se,Se]=V.useState("50"),[k,U]=V.useState(null),[z,ee]=V.useState(!1),[ve,Oe]=V.useState(""),[Ue,at]=V.useState(!1),[Re,Nt]=V.useState({firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",age:(e==null?void 0:e.age)||"",grade:(e==null?void 0:e.grade)||"",phone:(e==null?void 0:e.phone)||"",address:(e==null?void 0:e.address)||"",school:(e==null?void 0:e.school)||"",gender:(e==null?void 0:e.gender)||"male",universityName:""});V.useEffect(()=>{e&&(Nt(ie=>({...ie,firstName:e.firstName||ie.firstName,lastName:e.lastName||ie.lastName,gender:e.gender||ie.gender,grade:e.grade||ie.grade,school:e.school||ie.school})),e.avatar&&M(e.avatar),e.profileBackground&&B(e.profileBackground))},[e]),V.useEffect(()=>{(async()=>{if(e){if(e.role==="teacher"){_e(!1),Z(!0);try{const Xe=Ln(it(Le,"users"),In("role","==","student")),Ye=(await rs(Xe)).docs.map(Ut=>({id:Ut.id,...Ut.data()}));de(Ye)}catch(Xe){console.error("Error fetching students:",Xe)}finally{Z(!1)}return}try{const Xe=Ln(it(Le,"quiz_results"),In("userId","==",e.uid)),Be=await rs(Xe),Ye=[];let Ut=0,nt=!1,Lr=0;Be.forEach(ue=>{const we=ue.data();Ye.push({id:ue.id,...ue.data()});let Ie=10+we.percentage*2;we.passed&&(Ie+=50),we.percentage===100&&(Ie+=100,nt=!0,Lr++),Ut+=Math.round(Ie)}),Ye.sort((ue,we)=>{var Pe,Je;const Ie=((Pe=ue.createdAt)==null?void 0:Pe.seconds)||0,ye=((Je=we.createdAt)==null?void 0:Je.seconds)||0;return Ie-ye}),oe(Ye);let zn=Ut;try{const ue=Hn(Le,"users",e.uid),we=await lS(ue);we.exists()&&we.data().totalXP!==void 0?zn=we.data().totalXP:e.totalXP!==void 0&&(zn=e.totalXP)}catch{e.totalXP!==void 0&&(zn=e.totalXP)}G(zn);const lr=Math.floor(zn/500)+1;j(lr);const Gn=[...dp].reverse().find(ue=>lr>=ue.minLevel)||dp[0];O(Gn),L({quizzesCompleted:Ye.length,hasPerfectScore:nt,level:lr,totalXP:zn,perfectScoresCount:Lr})}catch(Xe){console.error(Xe)}finally{_e(!1)}}})()},[e]);const gt=async ie=>{ie.preventDefault(),i(!0),d(null);try{let Xe={...Re};Re.grade==="university"&&Re.universityName&&(Xe.school=Re.universityName),delete Xe.universityName,await t(Xe),d("   !"),setTimeout(()=>d(null),3e3)}catch(Xe){console.error(Xe),alert("   ")}finally{i(!1)}},Rt=async()=>{i(!0);try{await t({avatar:C}),g(!1)}catch(ie){console.error(ie)}finally{i(!1)}},lt=async()=>{i(!0);try{await t({profileBackground:J}),v(!1)}catch(ie){console.error(ie)}finally{i(!1)}},wn=async(ie,Xe)=>{if(!ie)return;const Be=parseInt(se);if(isNaN(Be)||Be<=0){alert("    ");return}if(window.confirm(`     ${Be} XP  ${Xe}`)){i(!0),U(null);try{const Ye=Hn(Le,"users",ie);await Td(Ye,{totalXP:nx(Be)}),de(Ut=>Ut.map(nt=>nt.id===ie?{...nt,totalXP:(nt.totalXP||0)+Be}:nt)),U(`  ${Be} XP  ${Xe} !`),setTimeout(()=>U(null),3e3)}catch(Ye){console.error(Ye),alert("    ")}finally{i(!1)}}},ws=async()=>{if(!ve.trim()){alert("   ");return}at(!0);try{await as(it(Le,"announcements"),{title:ve,teacherName:(e==null?void 0:e.displayName)||"",teacherId:e==null?void 0:e.uid,createdAt:Pn()}),await as(it(Le,"notifications"),{recipientId:"all",title:"  ",message:ve,type:"info",createdAt:Pn(),read:!1}),alert("   "),Oe(""),ee(!1)}catch(ie){console.error(ie),alert("   ")}finally{at(!1)}},_s=I.filter(ie=>{const Xe=(ie.displayName||"").toLowerCase(),Be=(ie.email||"").toLowerCase(),Ye=ge.toLowerCase();return Xe.includes(Ye)||Be.includes(Ye)}),ar=ie=>ie?ie.startsWith("http")?{backgroundImage:`url(${ie})`,backgroundSize:"cover",backgroundPosition:"center"}:{}:{backgroundImage:`url(${hp[0].url})`,backgroundSize:"cover",backgroundPosition:"center"},Vr=ie=>!ie||ie.startsWith("http")?"bg-no-repeat bg-center":ie,Ot=ie=>ie<=3?"border-gray-800":ie<=6?"border-emerald-500 shadow-[0_0_20px_rgba(16,185,129,0.5)]":ie<=9?"border-blue-500 shadow-[0_0_25px_rgba(59,130,246,0.6)]":ie<=12?"border-cyan-400 shadow-[0_0_30px_rgba(34,211,238,0.7)]":ie<=15?"border-indigo-500 shadow-[0_0_35px_rgba(99,102,241,0.7)]":ie<=18?"border-purple-500 shadow-[0_0_40px_rgba(168,85,247,0.7)]":ie<=21?"border-pink-500 shadow-[0_0_45px_rgba(236,72,153,0.8)]":ie<=24?"border-red-500 shadow-[0_0_50px_rgba(239,68,68,0.8)]":ie<=27?"border-amber-500 shadow-[0_0_55px_rgba(245,158,11,0.9)]":ie<=29?"border-white shadow-[0_0_60px_rgba(255,255,255,0.8)] ring-2 ring-white":"border-rose-500 shadow-[0_0_70px_rgba(244,63,94,1)] animate-pulse ring-4 ring-rose-500/30",Mt=ie=>ie<=3?"text-gray-400":ie<=6?"text-emerald-400 font-bold":ie<=9?"text-blue-400 font-bold":ie<=12?"text-cyan-400 font-black":ie<=15?"text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400 font-black":ie<=20?"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500 font-black drop-shadow-sm":ie<=25?"text-transparent bg-clip-text bg-gradient-to-r from-amber-300 to-orange-500 font-black drop-shadow-md":"text-transparent bg-clip-text bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 font-black animate-pulse drop-shadow-lg",fn=he.slice(-10).map(ie=>ie.percentage),_a=fn.length>0?Math.max(...fn):0,Na=fn.length>0?Math.min(...fn):0,Vt=fn.length>0?Math.round(fn.reduce((ie,Xe)=>ie+Xe,0)/fn.length):0,Ns=he.length,ir=(S-1)*500,Pr=Math.min(100,Math.max(0,(me-ir)/500*100)),_n="w-full px-4 py-3 rounded-xl bg-gray-950 border border-gray-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-900 outline-none font-bold text-white transition-all placeholder-gray-600 shadow-inner text-sm",Ea=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(ie=>({label:` ${ie}`,value:ie.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"  ",value:"English Major - QOU"},{label:" ",value:"university"}],Ta=[{label:"",value:"male"},{label:"",value:"female"}];return(e==null?void 0:e.role)==="teacher"?l.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up",children:[l.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 mb-12 p-2",children:[l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden border-4 border-gray-800 shadow-2xl bg-gray-700",children:e.avatar?l.jsx("img",{src:e.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):l.jsx(Zn,{className:"w-full h-full p-4 text-gray-400"})}),l.jsx("div",{className:"absolute bottom-0 right-0 bg-emerald-500 text-white p-1.5 rounded-full border-4 border-gray-900 shadow-sm",children:l.jsx(bn,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"text-center md:text-right space-y-2",children:[l.jsxs("h1",{className:"text-3xl md:text-4xl font-black text-white",children:[" ",e.displayName]}),l.jsxs("p",{className:"text-gray-400 font-medium text-lg flex items-center justify-center md:justify-start gap-2",children:[l.jsx(jr,{className:"w-4 h-4 text-blue-500"}),e.email]}),l.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-blue-900/30 text-blue-300 text-xs font-bold border border-blue-800",children:[l.jsx(fa,{className:"w-3.5 h-3.5"})," "]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4 mb-12",children:[l.jsxs("button",{onClick:()=>r&&r("TEACHER_DASHBOARD"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-blue-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-900/20 text-blue-400 flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-colors",children:l.jsx(o5,{className:"w-6 h-6"})}),l.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),l.jsxs("button",{onClick:()=>r&&r("QUESTION_BANK"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-purple-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-900/20 text-purple-400 flex items-center justify-center group-hover:bg-purple-600 group-hover:text-white transition-colors",children:l.jsx(Fu,{className:"w-6 h-6"})}),l.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),l.jsxs("button",{onClick:()=>r&&r("TEACHER_UPLOAD_FILES"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-emerald-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-2xl bg-emerald-900/20 text-emerald-400 flex items-center justify-center group-hover:bg-emerald-600 group-hover:text-white transition-colors",children:l.jsx(k2,{className:"w-6 h-6"})}),l.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),l.jsxs("button",{onClick:()=>r&&r("TEACHER_EXPLANATIONS"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-orange-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-2xl bg-orange-900/20 text-orange-400 flex items-center justify-center group-hover:bg-orange-600 group-hover:text-white transition-colors",children:l.jsx(Gu,{className:"w-6 h-6"})}),l.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),l.jsxs("button",{onClick:()=>ee(!0),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-red-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-2xl bg-red-900/20 text-red-400 flex items-center justify-center group-hover:bg-red-600 group-hover:text-white transition-colors",children:l.jsx(hw,{className:"w-6 h-6"})}),l.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),l.jsxs("button",{onClick:()=>r&&r("TEACHER_REVIEWS"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-yellow-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-2xl bg-yellow-900/20 text-yellow-400 flex items-center justify-center group-hover:bg-yellow-600 group-hover:text-white transition-colors",children:l.jsx(rm,{className:"w-6 h-6"})}),l.jsx("span",{className:"font-bold text-gray-200 text-sm",children:""})]}),l.jsxs("button",{onClick:()=>r&&r("TEACHER_CORRESPONDENCE"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-cyan-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-2xl bg-cyan-900/20 text-cyan-400 flex items-center justify-center group-hover:bg-cyan-600 group-hover:text-white transition-colors",children:l.jsx(ca,{className:"w-6 h-6"})}),l.jsx("span",{className:"font-bold text-gray-200 text-sm",children:""})]})]}),l.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-sm border border-gray-700 overflow-hidden",children:[l.jsxs("div",{className:"p-8 border-b border-gray-700 bg-gray-800/50 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-black text-white flex items-center gap-2",children:[l.jsx(Mo,{className:"w-6 h-6 text-yellow-500"}),"   (XP)"]}),l.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"      "})]}),k&&l.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 text-green-400 px-4 py-2 rounded-xl text-sm font-bold animate-fade-in flex items-center gap-2",children:[l.jsx(bn,{className:"w-4 h-4"})," ",k]})]}),l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"relative mb-6",children:[l.jsx(Us,{className:"absolute top-3.5 right-4 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"   ...",value:ge,onChange:ie=>F(ie.target.value),className:"w-full px-12 py-3 rounded-xl bg-gray-900 border border-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none font-bold text-white transition-all"})]}),l.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar p-1",children:ce?l.jsx("div",{className:"flex justify-center py-8",children:l.jsx(bt,{className:"w-8 h-8 animate-spin text-blue-500"})}):ge===""?l.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"    ..."}):_s.length===0?l.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"    "}):_s.map(ie=>l.jsxs("div",{className:"flex items-center justify-between bg-gray-900/50 p-4 rounded-2xl border border-gray-700 hover:border-blue-700 transition-all",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center overflow-hidden",children:ie.avatar?l.jsx("img",{src:ie.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):l.jsx(Zn,{className:"w-5 h-5 text-gray-400"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-white text-sm",children:ie.displayName}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[l.jsxs("span",{className:"bg-yellow-500/10 text-yellow-400 px-1.5 rounded font-bold flex items-center gap-0.5",children:[l.jsx(Nf,{className:"w-3 h-3"})," ",ie.totalXP||0]}),l.jsxs("span",{children:[" ",ie.email]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{className:"bg-gray-800 border border-gray-700 text-gray-300 text-xs font-bold rounded-lg px-2 py-2 outline-none",value:se,onChange:Xe=>Se(Xe.target.value),children:[l.jsx("option",{value:"10",children:"+10 XP"}),l.jsx("option",{value:"50",children:"+50 XP"}),l.jsx("option",{value:"100",children:"+100 XP"}),l.jsx("option",{value:"200",children:"+200 XP"}),l.jsx("option",{value:"500",children:"+500 XP"})]}),l.jsx("button",{onClick:()=>wn(ie.id,ie.displayName),className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg transition-colors shadow-lg shadow-blue-500/30",title:" ",children:l.jsx(ca,{className:"w-4 h-4"})})]})]},ie.id))})]})]}),z&&l.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-md shadow-2xl animate-fade-in-up overflow-hidden border border-gray-700",children:[l.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-orange-900/30 p-2 rounded-xl",children:l.jsx(hw,{className:"w-6 h-6 text-orange-400"})}),l.jsx("h2",{className:"text-xl font-black text-white",children:"  "})]}),l.jsx("button",{onClick:()=>ee(!1),className:"p-2 hover:bg-gray-700 rounded-full text-gray-400",children:l.jsx(ps,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"p-6",children:[l.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),l.jsx("input",{type:"text",value:ve,onChange:ie=>Oe(ie.target.value),placeholder:":      ",className:"w-full px-4 py-3 rounded-xl border border-gray-600 bg-gray-800 text-white focus:border-orange-500 outline-none mb-6"}),l.jsxs("button",{onClick:ws,disabled:Ue,className:"w-full bg-orange-600 hover:bg-orange-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors",children:[Ue?l.jsx(bt,{className:"w-5 h-5 animate-spin"}):l.jsx(gi,{className:"w-5 h-5"}),"   "]})]})]})})]}):l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up",children:[f&&l.jsx("div",{className:"fixed inset-0 z-[200] flex items-start justify-center p-4 pt-10 md:pt-16 bg-black/80 backdrop-blur-sm animate-fade-in",children:l.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-sm max-h-[85vh] flex flex-col shadow-2xl border border-gray-700 overflow-hidden relative",children:[l.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center shrink-0",children:[l.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[l.jsx(Zn,{className:"w-5 h-5 text-purple-500"}),"  "]}),l.jsx("button",{onClick:()=>g(!1),className:"p-1.5 hover:bg-gray-800 rounded-full transition-colors",children:l.jsx(ps,{className:"w-5 h-5 text-gray-500"})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:l.jsx("div",{className:"grid grid-cols-3 gap-3",children:YD.map((ie,Xe)=>{const Be=S<ie.minLevel;return l.jsxs("button",{onClick:()=>!Be&&M(ie.url),disabled:Be,className:`relative aspect-square rounded-xl overflow-hidden border-2 transition-all bg-gray-800 ${C===ie.url?"border-emerald-500 shadow-md ring-2 ring-emerald-900/30":"border-transparent hover:border-gray-600"} ${Be?"opacity-60 grayscale":"hover:scale-105 active:scale-95"}`,children:[l.jsx("img",{src:ie.url,alt:`Avatar ${Xe}`,className:"w-full h-full object-cover"}),Be&&l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/50 text-white backdrop-blur-[1px]",children:[l.jsx(li,{className:"w-4 h-4 mb-0.5"}),l.jsxs("span",{className:"text-[10px] font-bold",children:[" ",ie.minLevel]})]}),!Be&&C===ie.url&&l.jsx("div",{className:"absolute top-1 right-1 bg-emerald-500 text-white rounded-full p-0.5 shadow-sm",children:l.jsx(bn,{className:"w-3 h-3"})})]},Xe)})})}),l.jsx("div",{className:"p-4 border-t border-gray-800 shrink-0",children:l.jsxs("button",{onClick:Rt,disabled:s,className:"w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:[s?l.jsx(bt,{className:"w-5 h-5 animate-spin"}):l.jsx(gi,{className:"w-5 h-5"}),"  "]})})]})}),x&&l.jsx("div",{className:"fixed inset-0 z-[200] flex items-start justify-center p-4 pt-10 md:pt-16 bg-black/80 backdrop-blur-sm animate-fade-in",children:l.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl border border-gray-700 overflow-hidden relative",children:[l.jsxs("div",{className:"p-5 border-b border-gray-800 flex justify-between items-center shrink-0",children:[l.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[l.jsx(fw,{className:"w-6 h-6 text-emerald-500"}),"  "]}),l.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:l.jsx(ps,{className:"w-6 h-6 text-gray-500"})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-5 custom-scrollbar",children:l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:hp.map((ie,Xe)=>{const Be=S<ie.minLevel,Ye=J===ie.url;return l.jsxs("button",{onClick:()=>!Be&&B(ie.url),disabled:Be,className:`relative h-28 rounded-2xl overflow-hidden border-4 transition-all duration-300 group ${Ye?"border-emerald-500 scale-[1.02] shadow-md":"border-transparent"} ${Be?"opacity-60 cursor-not-allowed grayscale":"hover:scale-[1.02] cursor-pointer"}`,children:[l.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${ie.url})`}}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Be?l.jsxs("div",{className:"bg-black/60 px-3 py-1.5 rounded-lg backdrop-blur-sm flex items-center gap-1.5",children:[l.jsx(li,{className:"w-4 h-4 text-white"}),l.jsxs("span",{className:"text-xs text-white font-bold",children:[" ",ie.minLevel]})]}):Ye&&l.jsx(bn,{className:"w-8 h-8 text-white drop-shadow-md"})}),l.jsx("div",{className:"absolute bottom-0 w-full bg-gradient-to-t from-black/80 to-transparent p-2 text-center",children:l.jsx("span",{className:"text-xs font-bold text-white drop-shadow-md",children:ie.name})})]},Xe)})})}),l.jsxs("div",{className:"p-5 border-t border-gray-800 shrink-0 flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>v(!1),className:"px-6 py-2.5 rounded-xl font-bold text-gray-500 hover:bg-gray-800 transition-colors",children:""}),l.jsx("button",{onClick:lt,disabled:s,className:"bg-emerald-600 text-white px-8 py-2.5 rounded-xl font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 dark:shadow-none flex items-center gap-2",children:s?l.jsx(bt,{className:"w-5 h-5 animate-spin"}):" "})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[l.jsx("div",{className:"lg:col-span-7 lg:order-1 space-y-8",children:l.jsxs("div",{className:"bg-gray-900 rounded-[3rem] shadow-xl border border-gray-700 relative group",children:[l.jsxs("div",{className:`relative w-full h-48 md:h-64 transition-all duration-500 rounded-t-[3rem] overflow-hidden ${Vr(e==null?void 0:e.profileBackground)}`,style:ar(e==null?void 0:e.profileBackground),children:[l.jsxs("button",{onClick:()=>v(!0),className:"absolute top-4 left-4 bg-black/30 hover:bg-black/50 text-white backdrop-blur-md px-4 py-2 rounded-full text-xs md:text-sm font-bold flex items-center gap-2 transition-all border border-white/20 z-20",children:[l.jsx(fw,{className:"w-4 h-4"}),"  "]}),l.jsxs("div",{className:`absolute top-4 right-4 px-4 py-1.5 rounded-full text-xs font-black flex items-center gap-2 backdrop-blur-md shadow-lg border-2 z-10 ${A.color}`,children:[l.jsx(A.icon,{className:"w-4 h-4"})," ",A.title]})]}),l.jsx("div",{className:"absolute top-32 md:top-44 right-8 md:right-12 z-20",children:l.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>g(!0),children:[l.jsx("div",{className:`w-28 h-28 md:w-36 md:h-36 rounded-full border-[6px] shadow-2xl overflow-hidden bg-gray-700 relative z-10 transition-transform transform group-hover:scale-105 flex items-center justify-center ${Ot(S)}`,children:e!=null&&e.avatar?l.jsx("img",{src:e.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):l.jsx(Zn,{className:"w-16 h-16 text-gray-500"})}),l.jsx("div",{className:"absolute bottom-1 right-1 bg-emerald-500 text-white p-2 rounded-full border-4 border-gray-800 shadow-sm z-20 hover:bg-emerald-600 transition-colors",children:l.jsx(G5,{className:"w-4 h-4"})})]})}),l.jsxs("div",{className:"pt-16 md:pt-20 px-8 pb-8",children:[l.jsxs("div",{className:"flex flex-col items-start",children:[l.jsx("h2",{className:"text-3xl font-black text-white mb-1",children:e==null?void 0:e.displayName}),l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium mb-6",children:[l.jsx("span",{className:"text-gray-400",children:e==null?void 0:e.email}),l.jsx("span",{className:"text-gray-300",children:""}),l.jsxs("span",{className:`flex items-center gap-1 ${Mt(S)}`,children:[l.jsx(Mo,{className:"w-3 h-3"}),"  ",S]})]})]}),l.jsxs("form",{onSubmit:gt,className:"space-y-6 border-t border-gray-700 pt-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[l.jsx("div",{className:"md:col-span-2",children:l.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4",children:[l.jsx(Zn,{className:"w-5 h-5 text-blue-500"}),"  "]})}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),l.jsx("input",{type:"text",value:Re.firstName,onChange:ie=>Nt({...Re,firstName:ie.target.value}),className:_n})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),l.jsx("input",{type:"text",value:Re.lastName,onChange:ie=>Nt({...Re,lastName:ie.target.value}),className:_n})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),l.jsx(N2,{options:Ta,value:Re.gender,onChange:ie=>!(e!=null&&e.genderChanged)&&Nt({...Re,gender:ie}),placeholder:" ",disabled:e==null?void 0:e.genderChanged}),(e==null?void 0:e.genderChanged)&&l.jsxs("p",{className:"text-[10px] text-red-400 mt-1 mr-1 flex items-center gap-1",children:[l.jsx(li,{className:"w-3 h-3"}),"        "]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),l.jsx("input",{type:"text",value:Re.phone,onChange:ie=>Nt({...Re,phone:ie.target.value}),className:_n})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),l.jsx("input",{type:"text",value:Re.address,onChange:ie=>Nt({...Re,address:ie.target.value}),className:_n})]}),l.jsx("div",{className:"md:col-span-2 mt-2",children:l.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4",children:[l.jsx(fa,{className:"w-5 h-5 text-emerald-500"}),"  "]})}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),l.jsx("input",{type:"text",value:Re.school,onChange:ie=>Nt({...Re,school:ie.target.value}),className:_n})]}),l.jsxs("div",{className:"relative",children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),l.jsx(N2,{options:Ea,value:Re.grade,onChange:ie=>Nt({...Re,grade:ie}),placeholder:" "})]}),Re.grade==="university"&&l.jsxs("div",{className:"md:col-span-2 animate-fade-in",children:[l.jsx("label",{className:"text-xs font-bold text-blue-400 mb-1 block",children:"  / "}),l.jsx("input",{type:"text",value:Re.universityName||Re.school,onChange:ie=>Nt({...Re,universityName:ie.target.value}),placeholder:"   ...",className:`${_n} border-blue-500 bg-blue-900/10`})]})]}),l.jsxs("div",{className:"flex items-center justify-end pt-4 gap-4",children:[c&&l.jsxs("span",{className:"text-green-600 font-bold text-sm animate-fade-in flex items-center gap-1",children:[l.jsx(bn,{className:"w-4 h-4"})," ",c]}),l.jsxs("button",{type:"submit",disabled:s,className:"bg-emerald-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-900/20 flex items-center gap-2",children:[s?l.jsx(bt,{className:"w-5 h-5 animate-spin"}):l.jsx(gi,{className:"w-5 h-5"}),"  "]})]})]})]})]})}),l.jsxs("div",{className:"lg:col-span-5 lg:order-2 space-y-6 mt-8 lg:mt-0",children:[l.jsxs("div",{className:"bg-gradient-to-br from-indigo-700 via-purple-700 to-fuchsia-700 rounded-[2.5rem] shadow-2xl p-6 text-white relative overflow-hidden border-4 border-gray-800 ring-4 ring-gray-900",children:[l.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white opacity-10 rounded-full -translate-y-1/2 translate-x-1/2 blur-3xl"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-indigo-500 opacity-20 rounded-full translate-y-1/2 -translate-x-1/2 blur-3xl"}),l.jsx("div",{className:"flex items-center justify-between mb-6 relative z-10",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 bg-yellow-400 blur-md opacity-50 rounded-full"}),l.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-300 to-orange-500 rounded-2xl shadow-lg relative border border-white/30",children:l.jsx(A.icon,{className:"w-8 h-8 text-white"})})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-3xl font-black tracking-tight",children:[" ",S]}),l.jsxs("p",{className:"text-indigo-100 text-sm font-medium flex items-center gap-1.5 mt-0.5 bg-black/20 px-3 py-1 rounded-full w-fit",children:[l.jsx(Nf,{className:"w-3.5 h-3.5 text-orange-400 fill-orange-400"})," ",me,"   (XP)"]})]})]})}),l.jsxs("div",{className:"relative mb-8",children:[l.jsxs("div",{className:"flex justify-between text-xs font-bold text-indigo-200 mb-1 px-1",children:[l.jsx("span",{children:A.title}),l.jsxs("span",{children:["  ",S+1]})]}),l.jsx("div",{className:"w-full bg-black/30 h-3.5 rounded-full relative overflow-hidden backdrop-blur-sm border border-white/10",children:l.jsx("div",{className:"bg-gradient-to-r from-yellow-400 via-orange-400 to-pink-500 h-full rounded-full transition-all duration-1000 ease-out relative shadow-[0_0_10px_rgba(251,191,36,0.5)]",style:{width:`${Pr}%`},children:l.jsx("div",{className:"absolute inset-0 bg-white/30 w-full h-full animate-[pulse_2s_cubic-bezier(0.4,0,0.6,1)_infinite]"})})})]}),l.jsxs("div",{className:"bg-black/20 rounded-2xl p-5 backdrop-blur-md border border-white/10",children:[l.jsxs("h4",{className:"text-sm font-bold text-indigo-100 mb-2 flex items-center gap-2",children:[l.jsx(ic,{className:"w-4 h-4 text-yellow-300"}),"  "]}),l.jsx("div",{className:"text-xl font-black text-white tracking-wide mb-1",children:A.title}),l.jsx("div",{className:"text-xs text-indigo-200",children:"     !"})]})]}),l.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 p-4 md:p-5",children:[l.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2 border-b border-gray-700 pb-3",children:[l.jsx("div",{className:"p-2 bg-yellow-900/30 rounded-lg",children:l.jsx(vp,{className:"w-5 h-5 text-yellow-400"})})," "]}),l.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2",children:XD.map((ie,Xe)=>{const Be=ie.condition(D);return l.jsxs("button",{onClick:()=>N({badge:ie,isUnlocked:Be}),className:`relative p-2 rounded-xl border flex flex-col items-center text-center transition-all hover:scale-105 active:scale-95 ${Be?"bg-gray-700/50 border-gray-600 shadow-sm hover:shadow-md cursor-pointer":"bg-gray-800/50 border-gray-700 opacity-60 grayscale hover:opacity-100 cursor-pointer"}`,children:[l.jsx("div",{className:`w-8 h-8 md:w-9 md:h-9 rounded-full flex items-center justify-center mb-1 ${Be?ie.bg:"bg-gray-700"}`,children:l.jsx(ie.icon,{className:`w-4 h-4 md:w-5 md:h-5 ${Be?ie.color:"text-gray-400"}`})}),l.jsx("h4",{className:"font-bold text-[9px] text-gray-300 leading-tight line-clamp-1",children:ie.title}),!Be&&l.jsx("div",{className:"absolute top-1 right-1",children:l.jsx(li,{className:"w-2.5 h-2.5 text-gray-500"})})]},Xe)})}),w&&l.jsxs("div",{className:"mt-4 bg-gray-800/80 rounded-2xl p-4 border border-gray-700 animate-fade-in flex items-start gap-4 relative",children:[l.jsx("button",{onClick:()=>N(null),className:"absolute top-3 left-3 text-gray-500 hover:text-white transition-colors",children:l.jsx(ps,{className:"w-4 h-4"})}),l.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center shrink-0 ${w.isUnlocked?w.badge.bg:"bg-gray-700"}`,children:l.jsx(w.badge.icon,{className:`w-6 h-6 ${w.isUnlocked?w.badge.color:"text-gray-400"}`})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"text-sm font-bold text-white mb-1",children:w.badge.title}),l.jsxs("div",{className:"text-xs mb-1",children:[l.jsx("span",{className:`font-bold ${w.isUnlocked?"text-emerald-400":"text-gray-400"}`,children:w.isUnlocked?" : ":": "}),l.jsx("span",{className:"text-gray-300",children:w.badge.desc})]}),!w.isUnlocked&&l.jsxs("div",{className:"mt-2 flex items-center gap-1 text-[10px] text-gray-500",children:[l.jsx(li,{className:"w-3 h-3"}),l.jsx("span",{children:"    "})]}),w.isUnlocked&&l.jsxs("div",{className:"mt-2 flex items-center gap-1 text-[10px] text-emerald-500",children:[l.jsx(bn,{className:"w-3 h-3"}),l.jsx("span",{children:" "})]})]})]})]}),l.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 p-6 hover:shadow-md transition-shadow",children:[l.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[l.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:l.jsx(_A,{className:"w-5 h-5 text-emerald-400"})}),"   "]}),le?l.jsx("div",{className:"h-48 flex items-center justify-center",children:l.jsx(bt,{className:"w-6 h-6 animate-spin text-emerald-500"})}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center bg-gray-700/50 p-4 rounded-xl border border-gray-700",children:[l.jsx("span",{className:"text-gray-300 text-sm font-bold",children:" "}),l.jsxs("span",{className:`font-black text-xl ${Vt>=90?"text-emerald-400":"text-blue-400"}`,children:[Vt,"%"]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-emerald-900/30 text-emerald-400",children:l.jsx(Mo,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),l.jsxs("div",{className:"font-black text-lg text-emerald-400",children:[_a,"%"]})]})]}),l.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-red-900/30 text-red-400",children:l.jsx(R2,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),l.jsxs("div",{className:"font-black text-lg text-red-400",children:[Na,"%"]})]})]}),l.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-blue-900/30 text-blue-400",children:l.jsx(i5,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),l.jsx("div",{className:"font-black text-lg text-blue-400",children:Ns})]})]}),l.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-purple-900/30 text-purple-400",children:l.jsx(Q5,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:""}),l.jsxs("div",{className:"font-black text-lg text-purple-400",children:[Vt,"%"]})]})]})]})]})]})]})]})]})},WD=[{id:"All",label:" (All)"},{id:"Language",label:"Language ()"},{id:"Reading",label:"Reading ()"},{id:"Writing",label:"Writing ()"},{id:"Vocabulary",label:"Vocabulary ()"},{id:"General",label:"  (General Quiz)"}],fp=({options:r,value:e,onChange:t,placeholder:s,disabled:i})=>{const[c,d]=V.useState(!1),f=V.useRef(null);V.useEffect(()=>{const x=v=>{f.current&&!f.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return l.jsxs("div",{className:`relative ${c?"z-50":"z-0"}`,ref:f,children:[l.jsxs("button",{type:"button",onClick:()=>!i&&d(!c),className:`w-full px-5 py-4 rounded-2xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all
            ${i?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":c?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-800 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[l.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),l.jsx(bl,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&l.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[r.map((x,v)=>{if(x.isHeader)return l.jsx("div",{className:"px-4 py-2 text-xs font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:x.label},v);const w=x.value===e;return l.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${w?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[x.label,w&&l.jsx(ha,{className:"w-4 h-4"})]},v)}),r.length===0&&l.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},ZD=({onBack:r})=>{const{user:e}=rr(),[t,s]=V.useState("SELECTION"),[i,c]=V.useState(""),[d,f]=V.useState(""),[g,x]=V.useState("All"),[v,w]=V.useState([]),[N,C]=V.useState(!1),[M,J]=V.useState(null),[B,he]=V.useState(0),[oe,le]=V.useState({}),[_e,me]=V.useState(1800),[G,S]=V.useState(null),[j,A]=V.useState(!1),[O,D]=V.useState(0),[L,I]=V.useState({}),[de,ge]=V.useState(!1),[F,ce]=V.useState(null),[Z,se]=V.useState(!1),[Se,k]=V.useState(!1),[U,z]=V.useState(!1),[ee,ve]=V.useState(0),[Oe,Ue]=V.useState(!1),[at,Re]=V.useState(null),[Nt,gt]=V.useState(0),[Rt,lt]=V.useState(""),[wn,ws]=V.useState(!1),[_s,ar]=V.useState(!1);V.useEffect(()=>{window.scrollTo(0,0)},[t]),V.useEffect(()=>{d?Vr():w([])},[d]),V.useEffect(()=>{let ue;return t==="ACTIVE"&&_e>0&&(ue=setInterval(()=>{me(we=>we<=1?(ir(),0):we-1)},1e3)),()=>clearInterval(ue)},[t,_e]),V.useEffect(()=>{let ue;return t==="ACTIVE"&&(M!=null&&M.questionDuration)&&G!==null&&(G>0?ue=setInterval(()=>{S(we=>we!==null&&we>0?we-1:0)},1e3):G===0&&Ns()),()=>clearInterval(ue)},[t,M,G]),V.useEffect(()=>{M!=null&&M.questionDuration?S(M.questionDuration):S(null)},[B,M]),V.useEffect(()=>{if(t!=="ACTIVE")return;const ue=()=>{ve(Pe=>{const Je=Pe+1;return Je===1?k(!0):Je>=2&&(k(!1),z(!0)),Je})},we=()=>{document.hidden&&ue()},Ie=Pe=>{(Pe.key==="PrintScreen"||Pe.ctrlKey&&Pe.key==="p"||Pe.metaKey&&Pe.shiftKey)&&(Pe.preventDefault(),ue())},ye=Pe=>Pe.preventDefault();return document.addEventListener("visibilitychange",we),document.addEventListener("keydown",Ie),document.addEventListener("contextmenu",ye),document.addEventListener("copy",ye),document.addEventListener("paste",ye),document.addEventListener("cut",ye),document.addEventListener("selectstart",ye),()=>{document.removeEventListener("visibilitychange",we),document.removeEventListener("keydown",Ie),document.removeEventListener("contextmenu",ye),document.removeEventListener("copy",ye),document.removeEventListener("paste",ye),document.removeEventListener("cut",ye),document.removeEventListener("selectstart",ye)}},[t]);const Vr=async()=>{C(!0);try{const ue=Ln(it(Le,"quizzes"),In("grade","==",d));let we;try{we=await u8(ue),we.empty&&(we=await d8(ue))}catch{we=await rs(ue)}const Ie=[];we.forEach(ye=>{Ie.push({id:ye.id,...ye.data()})}),w(Ie)}catch(ue){console.error("Error fetching quizzes:",ue)}finally{C(!1)}},Ot=Array.from(new Set(v.map(ue=>ue.subject))),Mt=v.filter(ue=>{const we=i?ue.subject===i:!0,Ie=g&&g!=="All"?ue.category===g:!0;return we&&Ie}),fn=ue=>{ce(ue),ge(!0)},_a=ue=>{if(!ue.questions||ue.questions.length===0){alert("      ");return}const Ie=[...ue.questions].sort(()=>Math.random()-.5).map(At=>{if(At.type==="MCQ"||At.type==="TF"){const ut=At.options.map((mn,ki)=>({opt:mn,originalIndex:ki}));ut.sort(()=>Math.random()-.5);const dt=ut.map(mn=>mn.opt),Bt=ut.findIndex(mn=>mn.originalIndex===At.correctAnswer);return{...At,options:dt,correctAnswer:Bt}}return At}),ye={...ue,questions:Ie},Pe={};Ie.forEach((At,ut)=>{if(At.type==="REORDER"){const dt=At.options.map((Bt,mn)=>mn);for(let Bt=dt.length-1;Bt>0;Bt--){const mn=Math.floor(Math.random()*(Bt+1));[dt[Bt],dt[mn]]=[dt[mn],dt[Bt]]}Pe[ut]=dt}}),I(Pe),J(ye),he(0),le({});const Je=ue.duration?ue.duration*60:1800;me(Je),D(0),ve(0),z(!1),gt(0),lt(""),ar(!1),ge(!1),ce(null),s("ACTIVE")},Na=()=>{F&&_a(F)},Vt=ue=>{le(we=>({...we,[B]:ue}))},Ns=()=>{M&&(S(null),B<M.questions.length-1?he(ue=>ue+1):ir())},ir=async()=>{if(!M||!e){s("RESULT");return}A(!0);const ue=Ea(),we=Math.round(ue/M.questions.length*100);let Ie=0;try{const ye=Ln(it(Le,"quiz_results"),In("userId","==",e.uid),In("quizId","==",M.id));(await rs(ye)).empty?Ie=ue*30:Ie=ue*5}catch(ye){console.error("Error checking previous attempts:",ye),Ie=ue*1}D(Ie);try{await as(it(Le,"quiz_results"),{userId:e.uid,userName:e.displayName,quizId:M.id||"unknown",quizTitle:M.title,subject:M.subject,score:ue,totalQuestions:M.questions.length,percentage:we,passed:we>=50,earnedXP:Ie,createdAt:Pn()});const ye=Hn(Le,"users",e.uid);await Ny(ye,{totalXP:nx(Ie),quizzesCompleted:nx(1),lastQuizDate:Pn(),role:"student",email:e.email,displayName:e.displayName},{merge:!0})}catch(ye){console.error("Error saving quiz result:",ye)}finally{A(!1),s("RESULT")}},Pr=async()=>{if(Nt!==0&&!(!M||!e)){ws(!0);try{await as(it(Le,"reviews"),{type:"quiz",targetId:M.id,targetTitle:M.title,teacherId:M.createdBy||"teacher",teacherName:M.teacherName||"",rating:Nt,comment:Rt,studentId:e.uid,studentName:e.displayName,createdAt:Pn()}),ar(!0)}catch(ue){console.error("Error saving review:",ue),alert("    ")}finally{ws(!1)}}},_n=ue=>{const we=Math.floor(ue/60),Ie=ue%60;return`${we}:${Ie<10?"0":""}${Ie}`},Ea=()=>{if(!M)return 0;let ue=0;return M.questions.forEach((we,Ie)=>{if(we.type==="REORDER"){const ye=oe[Ie];if(ye&&ye.length===we.options.length){let Pe=!0;for(let Je=0;Je<we.options.length;Je++)if(ye[Je]!==Je){Pe=!1;break}Pe&&ue++}}else oe[Ie]===we.correctAnswer&&ue++}),ue},Ta=()=>{se(!0)},ie=()=>{se(!1),s("SELECTION")},Xe=()=>{z(!1),s("SELECTION")},Be=ue=>{Re(ue),Ue(!0)},Ye=()=>{if(Ue(!1),at==="REVIEW")s("REVIEW");else if(at==="RETAKE"){const ue=v.find(we=>we.id===(M==null?void 0:M.id));ue?_a(ue):s("SELECTION")}else at==="LIST"?s("SELECTION"):at==="HOME"&&r();Re(null)},Ut=(ue,we)=>{const Ie=oe[B]||[];Vt(we?[...Ie,ue]:Ie.filter(ye=>ye!==ue))},nt=({title:ue,message:we,onConfirm:Ie,onCancel:ye,icon:Pe=oa,confirmText:Je="",cancelText:At="",confirmColor:ut="emerald"})=>l.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-md transition-opacity",onClick:ye}),l.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] p-8 max-w-sm w-full relative z-10 animate-fade-in-up text-center border border-white/10 shadow-2xl shadow-black/50",children:[l.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg border-4 border-gray-800 ${ut==="red"?"bg-red-500/20":"bg-emerald-500/20"}`,children:l.jsx(Pe,{className:`w-10 h-10 ${ut==="red"?"text-red-500":"text-emerald-500"}`})}),l.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:ue}),l.jsx("p",{className:"text-gray-400 mb-8 text-base font-medium leading-relaxed",children:we}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:Ie,className:`flex-1 py-3.5 rounded-xl font-bold text-white transition-all transform hover:scale-105 active:scale-95 shadow-lg ${ut==="red"?"bg-gradient-to-r from-red-600 to-pink-600 shadow-red-900/30":"bg-gradient-to-r from-emerald-500 to-teal-600 shadow-emerald-900/30"}`,children:Je}),l.jsx("button",{onClick:ye,className:"flex-1 bg-gray-800 text-gray-300 py-3.5 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-gray-700",children:At})]})]})]}),Lr=()=>{const ue=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(ye=>({label:` ${ye}`,value:ye.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"   -   ",value:"English Major - QOU"}],we=[{label:"  ",value:""},...Ot.map(ye=>({label:String(ye),value:String(ye)}))],Ie=WD.map(ye=>({label:ye.label,value:ye.id}));return l.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8 animate-fade-in relative z-10",children:[l.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(156, 163, 175, 0.5);
          border-radius: 20px;
        }
      `}),l.jsxs("div",{className:"mb-8 text-center",children:[l.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white mb-2",children:" "}),l.jsx("p",{className:"text-gray-400 text-sm md:text-base",children:"       "})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-6",children:[l.jsxs("div",{className:"lg:col-span-7 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-30",children:[l.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[l.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:l.jsx(fa,{className:"w-5 h-5 text-emerald-400"})}),"     "]}),l.jsx(fp,{options:ue,value:d,onChange:ye=>{f(ye),c(""),x("All")},placeholder:"--    --"})]}),l.jsxs("div",{className:"lg:col-span-5 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-20",children:[l.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[l.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:l.jsx(ns,{className:"w-5 h-5 text-emerald-400"})})," "]}),l.jsx(fp,{options:we,value:i,onChange:c,placeholder:d?" ":"   ",disabled:!d})]})]}),d&&l.jsx("div",{className:"mb-10 animate-fade-in relative z-10",children:l.jsxs("div",{className:"bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700",children:[l.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[l.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:l.jsx(P2,{className:"w-5 h-5 text-emerald-400"})}),"  ()"]}),l.jsx(fp,{options:Ie,value:g,onChange:x,placeholder:"  "})]})}),d&&l.jsxs("div",{className:"space-y-6 animate-fade-in-up relative z-0",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-100 border-r-4 border-emerald-500 pr-3 flex items-center gap-2",children:[l.jsx(S5,{className:"w-5 h-5"})," "]}),N?l.jsx("div",{className:"flex justify-center py-12",children:l.jsx(bt,{className:"w-8 h-8 animate-spin text-emerald-400"})}):v.length===0?l.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Us,{className:"w-8 h-8 text-gray-500"})}),l.jsx("p",{className:"text-gray-400 font-medium",children:"      "})]}):Mt.length===0?l.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Us,{className:"w-8 h-8 text-gray-500"})}),l.jsx("p",{className:"text-gray-400 font-medium",children:"     "})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Mt.map(ye=>l.jsxs("div",{className:"bg-gray-900 rounded-2xl shadow-sm border border-gray-700 p-5 hover:shadow-md hover:border-emerald-600 transition-all group",children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("span",{className:"bg-emerald-900/50 text-emerald-300 text-[10px] font-bold px-2 py-1 rounded-md w-fit",children:ye.subject}),ye.category&&l.jsx("span",{className:"bg-blue-900/50 text-blue-300 text-[10px] font-bold px-2 py-1 rounded-md w-fit border border-blue-800",children:ye.category==="General"?"General Quiz":ye.category})]}),l.jsxs("div",{className:"flex flex-col items-end gap-1",children:[l.jsxs("span",{className:"text-gray-500 text-xs",children:[ye.questions.length," "]}),l.jsx("span",{className:"text-gray-500 text-xs bg-gray-800 px-1.5 py-0.5 rounded",children:ye.duration?`${ye.duration} `:"30 "})]})]}),l.jsx("h4",{className:"text-base font-bold text-white mb-2 line-clamp-2",children:ye.title}),l.jsxs("div",{className:"flex items-center gap-1 text-gray-400 text-xs mb-5",children:[l.jsx(cx,{className:"w-3 h-3"}),l.jsx("span",{children:ye.grade==="English Major - QOU"?"  ":` ${ye.grade}`})]}),l.jsxs("button",{onClick:()=>fn(ye),className:"w-full bg-emerald-900/30 text-emerald-400 border border-emerald-800 py-2.5 rounded-xl font-bold text-sm group-hover:bg-emerald-600 group-hover:text-white transition-all flex items-center justify-center gap-2",children:[" ",l.jsx(wf,{className:"w-4 h-4"})]})]},ye.id))})]}),de&&l.jsx(nt,{title:"  ",message:`   ${F==null?void 0:F.title} `,onConfirm:Na,onCancel:()=>ge(!1),confirmText:" ",cancelText:"",icon:oa})]})},zn=()=>{if(!M||!M.questions||!M.questions[B])return l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-900 gap-4",children:[l.jsx("div",{className:"text-red-500 font-bold text-lg",children:"    "}),l.jsx("button",{onClick:()=>s("SELECTION"),className:"text-blue-400 underline",children:" "})]});const ue=M.questions[B],we=ue.type==="REORDER";let Ie=!1;if(we){const dt=oe[B];Ie=dt!==void 0&&dt.length===ue.options.length}else Ie=oe[B]!==void 0;const ye=B===M.questions.length-1,Pe=M.subject.toLowerCase().includes("english")||M.subject.includes("")||M.subject.includes(""),Je=Pe?"ltr":"rtl",At=Pe?"text-left":"text-right",ut={sm:"text-sm leading-relaxed",md:"text-base leading-relaxed",lg:"text-xl leading-loose",xl:"text-2xl leading-loose"}[ue.passageFontSize||"md"];return l.jsxs("div",{className:"fixed inset-0 z-[9999] bg-gray-950 overflow-y-auto select-none",onContextMenu:dt=>dt.preventDefault(),style:{WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none",WebkitTouchCallout:"none"},children:[l.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[l.jsx("img",{src:"https://lh3.googleusercontent.com/d/1e-JYkv-JKpi3PBXLAB5qy2E5UG4klP6j",alt:"Active Quiz Background",className:"w-full h-full object-cover opacity-20"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/90 via-gray-900/40 to-gray-950/90"}),l.jsx("div",{className:"absolute inset-0 shadow-[inset_0_0_150px_rgba(0,0,0,0.9)]"})]}),U&&l.jsx(nt,{title:"   ",message:"      .   .",onConfirm:Xe,onCancel:()=>{},confirmText:"",cancelText:"",icon:iA,confirmColor:"red"}),Se&&!U&&l.jsx(nt,{title:" !",message:"     .   .",onConfirm:()=>k(!1),onCancel:()=>{},confirmText:"",cancelText:"",icon:dx,confirmColor:"red"}),Z&&l.jsx(nt,{title:" ",message:"       .",onConfirm:ie,onCancel:()=>se(!1),confirmText:" ",cancelText:"",icon:Tf,confirmColor:"red"}),l.jsxs("div",{className:"bg-gray-950/80 backdrop-blur-md border-b border-gray-700 sticky top-0 z-50 shadow-sm relative",children:[l.jsxs("div",{className:"max-w-4xl mx-auto px-3 h-16 flex justify-between items-center",children:[l.jsxs("button",{onClick:Ta,className:"flex items-center gap-2 text-red-500 hover:bg-red-900/20 px-3 py-1.5 rounded-lg transition-colors font-bold text-sm",children:[l.jsx(Tf,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:""})]}),l.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center gap-1",children:l.jsxs("div",{className:`flex items-center gap-2 px-4 py-1.5 rounded-full font-mono font-bold text-base shadow-inner border border-gray-600 ${_e<300?"bg-red-900/50 text-red-200 animate-pulse":"bg-gray-700 text-emerald-400"}`,children:[l.jsx(ix,{className:"w-4 h-4"}),_n(_e)]})}),l.jsxs("div",{className:"text-xs font-bold text-gray-400",children:[B+1," / ",M.questions.length]})]}),l.jsx("div",{className:"w-full bg-gray-700 h-1",children:l.jsx("div",{className:"bg-emerald-500 h-full transition-all duration-500 ease-out",style:{width:`${(B+1)/M.questions.length*100}%`}})})]}),G!==null&&M.questionDuration&&l.jsxs("div",{className:"max-w-3xl mx-auto px-4 mt-4 relative z-10",children:[l.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full transition-all duration-1000 linear ${G<10?"bg-red-500":"bg-blue-500"}`,style:{width:`${G/M.questionDuration*100}%`}})}),l.jsxs("div",{className:"text-center mt-1 text-xs font-bold text-gray-500",children:[" : ",G," "]})]}),l.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 relative z-10",children:[l.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden animate-fade-in-up",dir:Je,children:[l.jsxs("div",{className:"bg-gray-800/50 border-b border-gray-700 p-4 flex items-center justify-between",children:[l.jsx("h2",{className:"font-bold text-gray-200 text-sm md:text-base",children:M.title}),l.jsx("div",{className:"bg-gray-700 p-1.5 rounded-lg shadow-sm",children:we?l.jsx(O2,{className:"w-4 h-4 text-emerald-500"}):l.jsx(li,{className:"w-4 h-4 text-gray-300"})})]}),l.jsxs("div",{className:"p-6 md:p-8",children:[ue.passageContent&&l.jsxs("div",{className:"mb-8",children:[ue.generalInstruction&&l.jsx("div",{className:`text-gray-400 font-bold mb-3 text-sm bg-gray-800/50 px-4 py-2.5 rounded-xl border-l-4 border-emerald-500 ${At}`,children:ue.generalInstruction}),l.jsx("div",{className:`bg-blue-900/20 p-5 rounded-2xl border border-blue-800 ${At}`,children:l.jsx("div",{className:`text-gray-200 whitespace-pre-wrap font-medium ${ut}`,children:ue.passageContent})})]}),l.jsx("h3",{className:`text-lg md:text-2xl font-black text-white leading-relaxed mb-8 ${At}`,children:ue.question}),we?l.jsxs("div",{className:"space-y-6",dir:"ltr",children:[l.jsxs("div",{className:"min-h-[120px] p-4 bg-gray-950/50 rounded-2xl border-2 border-dashed border-gray-600 flex flex-wrap gap-2 items-start content-start transition-all",children:[(oe[B]||[]).map((dt,Bt)=>l.jsx("button",{onClick:()=>Ut(dt,!1),className:"bg-emerald-600 text-white px-4 py-2 rounded-xl font-bold shadow-md hover:bg-red-500 transition-colors animate-fade-in",children:ue.options[dt]},`ans-${Bt}`)),(!oe[B]||oe[B].length===0)&&l.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm font-medium italic",children:"      "})]}),l.jsx("div",{className:"flex flex-wrap gap-3 justify-center bg-gray-900 p-4 rounded-2xl border border-gray-700",children:(L[B]||[]).filter(dt=>!(oe[B]||[]).includes(dt)).map((dt,Bt)=>l.jsx("button",{onClick:()=>Ut(dt,!0),className:"bg-gray-800 border-2 border-gray-700 text-gray-200 px-4 py-2 rounded-xl font-bold shadow-sm hover:border-emerald-500 hover:text-emerald-400 transition-all transform hover:scale-105 active:scale-95",children:ue.options[dt]},`bank-${Bt}`))}),l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{onClick:()=>Vt([]),className:"text-xs font-bold text-gray-400 hover:text-red-500 flex items-center gap-1",children:[l.jsx(M2,{className:"w-3 h-3"})," "]})})]}):l.jsx("div",{className:"space-y-3",children:ue.options.map((dt,Bt)=>l.jsxs("button",{onClick:()=>Vt(Bt),className:`w-full ${At} p-4 rounded-xl border-2 transition-all flex items-center justify-between group hover:scale-[1.01] active:scale-[0.99] duration-200 ${oe[B]===Bt?"border-emerald-500 bg-emerald-900/30 shadow-md ring-2 ring-emerald-900":"border-gray-700 bg-gray-900 hover:bg-gray-800 hover:border-gray-600 shadow-sm"}`,children:[l.jsx("span",{className:`text-base font-bold ${oe[B]===Bt?"text-emerald-300":"text-gray-300"}`,children:dt}),l.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center shrink-0 ml-2 transition-colors ${oe[B]===Bt?"border-emerald-600 bg-emerald-600":"border-gray-600 group-hover:border-emerald-400"}`,children:oe[B]===Bt&&l.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})})]},Bt))})]})]}),l.jsx("div",{className:"mt-8 flex justify-end",children:l.jsx("button",{onClick:Ns,disabled:!Ie||j,className:`w-full sm:w-auto px-10 py-4 rounded-2xl font-bold text-lg flex items-center justify-center gap-2 shadow-xl transition-all ${!Ie||j?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-emerald-600 text-white hover:bg-emerald-700 hover:shadow-emerald-500/20 active:scale-95"}`,children:j?l.jsxs(l.Fragment,{children:["  ",l.jsx(bt,{className:"w-5 h-5 animate-spin"})]}):l.jsxs(l.Fragment,{children:[ye?" ":" ",Je==="rtl"?l.jsx(wf,{className:"w-5 h-5"}):l.jsx(qt,{className:"w-5 h-5"})]})})})]})]})},lr=()=>{if(!M)return null;const ue=Ea(),we=M.questions.length,Ie=Math.round(ue/we*100);let ye="text-red-500",Pe=Y4,Je=" ";Ie>=90?(ye="text-emerald-500",Pe=ic,Je="!"):Ie>=75?(ye="text-blue-500",Pe=od,Je="!"):Ie>=50&&(ye="text-yellow-500",Pe=ha,Je=" ");const At=Pe;return l.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center p-4 animate-fade-in overflow-y-auto",children:[l.jsxs("div",{className:"w-full max-w-xs bg-gray-900 rounded-[2rem] border border-gray-800 p-5 relative overflow-hidden text-center",children:[l.jsxs("div",{className:"flex flex-col items-center mb-4",children:[l.jsx(At,{className:`w-14 h-14 ${ye} mb-2 drop-shadow-md`}),l.jsx("h2",{className:"text-xl font-black text-white mb-1",children:Je}),l.jsx("p",{className:"text-gray-400 font-medium text-xs mb-2",children:M.title}),l.jsxs("div",{className:"inline-flex items-center gap-1 bg-gray-800 px-2 py-0.5 rounded-full border border-gray-700",children:[l.jsx(Nf,{className:"w-3 h-3 text-yellow-400 fill-yellow-400"}),l.jsxs("span",{className:"font-bold text-white text-xs",children:["+",O," XP"]})]})]}),l.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-4 text-center mb-5 border border-gray-800",children:[l.jsx("div",{className:"text-xs text-gray-500 font-bold uppercase tracking-wider mb-1",children:" "}),l.jsxs("span",{className:`text-5xl font-black ${ye}`,children:[Ie,"%"]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:()=>Be("REVIEW"),className:"w-full py-3 bg-white text-gray-900 font-black text-sm rounded-xl hover:bg-gray-100 transition-all flex items-center justify-center gap-2 active:scale-95 shadow-md",children:[l.jsx(pp,{className:"w-4 h-4"}),"  "]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{onClick:()=>Be("HOME"),className:"py-3 bg-emerald-600 text-white font-bold rounded-xl hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 text-xs shadow-lg shadow-emerald-900/20",children:[l.jsx(Ef,{className:"w-4 h-4"})," "]}),l.jsxs("button",{onClick:()=>Be("RETAKE"),className:"py-3 bg-emerald-600 text-white font-bold rounded-xl hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 text-xs shadow-lg shadow-emerald-900/20",children:[l.jsx(am,{className:"w-4 h-4"}),"  "]})]})]})]}),l.jsx("div",{className:"w-full max-w-xs bg-gray-900 rounded-[2rem] border border-gray-800 p-6 text-center relative mt-4",children:_s?l.jsxs("div",{className:"py-4",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-400 mb-1",children:[l.jsx(ha,{className:"w-5 h-5"}),l.jsx("h3",{className:"font-bold text-sm",children:" !"})]}),l.jsx("p",{className:"text-gray-500 text-xs",children:"   ."})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3 text-white",children:[l.jsx(rm,{className:"w-4 h-4 text-yellow-400"}),l.jsx("h3",{className:"font-bold text-sm",children:"  "})]}),l.jsx("div",{className:"flex justify-center gap-1.5 mb-3 flex-wrap",children:[1,2,3,4,5,6,7,8,9,10].map(ut=>l.jsx("button",{onClick:()=>gt(ut),className:`w-8 h-8 rounded-lg text-sm font-bold transition-all ${Nt===ut?"bg-yellow-500 text-gray-900 scale-110":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:ut},ut))}),l.jsx("textarea",{value:Rt,onChange:ut=>lt(ut.target.value),placeholder:"  ()...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl p-3 text-xs text-white outline-none focus:border-yellow-500 mb-3 min-h-[60px] resize-none"}),l.jsxs("button",{onClick:Pr,disabled:wn||Nt===0,className:`w-full py-2.5 rounded-xl font-bold text-xs flex items-center justify-center gap-2 transition-all ${Nt===0?"bg-gray-800 text-gray-600 cursor-not-allowed":"bg-yellow-600 text-white hover:bg-yellow-700"}`,children:[wn?l.jsx(bt,{className:"w-3 h-3 animate-spin"}):l.jsx(ca,{className:"w-3 h-3"}),""]})]})})]})},Gn=()=>l.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 animate-fade-in text-gray-100",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[l.jsx(pp,{className:"w-5 h-5 text-emerald-400"})," "]}),l.jsxs("button",{onClick:()=>s("RESULT"),className:"text-gray-400 hover:text-white font-medium flex items-center gap-1 text-sm",children:[l.jsx(qt,{className:"w-4 h-4"})," "]})]}),l.jsx("div",{className:"space-y-6",children:M==null?void 0:M.questions.map((ue,we)=>{const Ie=ue.type==="REORDER";let ye=!1,Pe=null;if(Ie){const Je=oe[we];Je?(Pe=Je.map(At=>ue.options[At]).join(" "),ye=Je.length===ue.options.length&&Je.every((At,ut)=>At===ut)):(Pe="  ",ye=!1)}else{const Je=oe[we];ye=Je===ue.correctAnswer,Pe=Je!==void 0?ue.options[Je]:"  "}return l.jsxs("div",{className:`bg-gray-900 rounded-2xl shadow-sm border p-5 ${ye?"border-gray-700":"border-red-900/50"}`,children:[l.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[l.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0 mt-0.5 ${ye?"bg-emerald-900 text-emerald-300":"bg-red-900 text-red-300"}`,children:we+1}),l.jsx("h3",{className:"text-base font-bold text-white leading-relaxed",children:ue.question})]}),l.jsxs("div",{className:`p-3 rounded-xl border text-sm ${ye?"bg-emerald-900/20 border-emerald-500":"bg-red-900/20 border-red-500"}`,children:[l.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:":"}),l.jsx("span",{className:"font-bold",children:Pe})]}),!ye&&l.jsxs("div",{className:"mt-2 p-3 rounded-xl border bg-gray-800 border-gray-700 text-sm",children:[l.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:" :"}),l.jsx("span",{className:"font-bold text-emerald-400",children:Ie?ue.options.join(" "):ue.options[ue.correctAnswer]})]}),ue.explanation&&l.jsxs("div",{className:"mt-3 p-3 bg-yellow-900/20 border border-yellow-800 rounded-xl text-sm text-yellow-200 animate-fade-in",children:[l.jsxs("span",{className:"font-bold block mb-1 flex items-center gap-1",children:[l.jsx(oa,{className:"w-3 h-3"}),":"]}),l.jsx("p",{className:"leading-relaxed opacity-90",dir:"auto",children:ue.explanation})]})]},ue.id)})})]});return l.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 text-gray-100",children:[t==="SELECTION"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[l.jsx("img",{src:"https://lh3.googleusercontent.com/d/1NKy8h05zQTNaEJ9C35Rzwys5QXFUxFHD",alt:"Background",className:"w-full h-full object-cover opacity-25"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/80 via-gray-900/20 to-gray-950"}),l.jsx("div",{className:"absolute inset-0 shadow-[inset_0_0_150px_rgba(0,0,0,0.9)]"})]}),l.jsx("div",{className:"bg-gray-950/80 backdrop-blur-md border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm relative",children:l.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[l.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:l.jsx(qt,{className:"w-5 h-5"})}),l.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),l.jsx("span",{className:"text-gray-600",children:"/"}),l.jsx("span",{className:"font-bold text-white",children:" "})]})}),Lr()]}),t==="ACTIVE"&&zn(),t==="RESULT"&&lr(),t==="REVIEW"&&Gn(),Oe&&l.jsx(nt,{title:"  ",message:at==="REVIEW"?"   ":at==="RETAKE"?"     ":at==="LIST"?"    ":"    ",onConfirm:Ye,onCancel:()=>Ue(!1),confirmText:"",cancelText:"",icon:q5})]})},eO=({className:r})=>l.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),tO=({className:r})=>l.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),nO=({onBack:r})=>{const e=[{name:".   ",image:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",title:"  ",school:"  ",location:" ",color:"emerald",bio:"         .              .",skills:["  ","  "],social:{facebook:"https://www.facebook.com/yazanabokaheal2?locale=ms_MY",whatsapp:"https://wa.me/972568401548",telegram:"https://t.me/yazan1342"}},{name:".   ",image:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",title:"  ",school:"  ",location:" ",color:"blue",bio:"       .                .",skills:[" "],social:{facebook:"#",whatsapp:"#",telegram:"#"}}];return l.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[l.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:l.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[l.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:l.jsx(qt,{className:"w-5 h-5"})}),l.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),l.jsx("span",{className:"text-gray-600",children:"/"}),l.jsx("span",{className:"font-bold text-white",children:" "})]})}),l.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[l.jsxs("div",{className:"text-center mb-16",children:[l.jsx("h1",{className:"text-4xl font-black text-white mb-4",children:"  "}),l.jsx("p",{className:"text-xl text-gray-400",children:"       "})]}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:e.map((t,s)=>l.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-lg border border-white/5 flex flex-col hover:shadow-2xl transition-all duration-300 p-8 hover:border-emerald-500/20",children:[l.jsx("div",{className:"flex justify-center mb-8",children:l.jsx("div",{className:"w-48 h-48 rounded-full p-1 bg-gray-800 shadow-md border border-white/5",children:l.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full rounded-full object-cover"})})}),l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:t.name}),l.jsx("p",{className:`text-${t.color}-400 font-bold text-lg mb-4`,children:t.title}),l.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-gray-400 text-sm font-medium",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(O4,{className:"w-4 h-4"}),t.school]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(bp,{className:"w-4 h-4"}),t.location]})]})]}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"mb-8 text-center",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[l.jsx(vl,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),l.jsx("h3",{className:"font-bold text-white",children:" "})]}),l.jsx("p",{className:"text-gray-300 leading-relaxed text-sm",children:t.bio})]}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center justify-center gap-2",children:[l.jsx(od,{className:`w-5 h-5 text-${t.color}-400`})," "]}),l.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:t.skills.map((i,c)=>l.jsx("span",{className:`bg-${t.color}-900/20 text-${t.color}-300 px-4 py-2 rounded-xl text-sm font-bold border border-${t.color}-900/30`,children:i},c))})]})]}),l.jsx("div",{className:"pt-6 border-t border-white/5",children:l.jsxs("div",{className:"flex justify-center gap-4",children:[l.jsx("a",{href:t.social.facebook,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-blue-900/20 text-blue-400 flex items-center justify-center hover:bg-blue-600 hover:text-white transition-all border border-blue-900/30",children:l.jsx(xp,{className:"w-5 h-5"})}),l.jsx("a",{href:t.social.whatsapp,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-green-900/20 text-green-400 flex items-center justify-center hover:bg-green-600 hover:text-white transition-all border border-green-900/30",children:l.jsx(eO,{className:"w-5 h-5"})}),l.jsx("a",{href:t.social.telegram,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-sky-900/20 text-sky-400 flex items-center justify-center hover:bg-sky-600 hover:text-white transition-all border border-sky-900/30",children:l.jsx(tO,{className:"w-5 h-5"})})]})})]},s))})]})]})},sO=({onBack:r})=>l.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[l.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:l.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[l.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:l.jsx(qt,{className:"w-5 h-5"})}),l.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),l.jsx("span",{className:"text-gray-600",children:"/"}),l.jsx("span",{className:"font-bold text-white",children:" "})]})}),l.jsx("div",{className:"relative bg-emerald-900/20 py-20 overflow-hidden border-b border-white/5",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 relative z-10 text-center",children:[l.jsx("span",{className:"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30 px-4 py-1 rounded-full text-sm font-medium mb-6 inline-block backdrop-blur-sm",children:"    "}),l.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-6 leading-tight",children:["   ",l.jsx("br",{}),"   "]}),l.jsx("p",{className:"text-gray-300 text-xl max-w-2xl mx-auto leading-relaxed",children:"                    ."})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-20",children:[l.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[l.jsx("div",{className:"w-16 h-16 bg-blue-900/30 rounded-2xl flex items-center justify-center mb-6 border border-blue-500/20",children:l.jsx(pp,{className:"w-8 h-8 text-blue-400"})}),l.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),l.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                   ."})]}),l.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[l.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-2xl flex items-center justify-center mb-6 border border-emerald-500/20",children:l.jsx(ux,{className:"w-8 h-8 text-emerald-400"})}),l.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),l.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                  ."})]})]}),l.jsxs("div",{className:"mb-20",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"   "}),l.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{icon:V2,title:" ",desc:"       ."},{icon:p5,title:" ",desc:"           ."},{icon:R2,title:" ",desc:"         ."},{icon:im,title:" ",desc:"          ."}].map((e,t)=>l.jsxs("div",{className:"bg-gray-900 p-6 rounded-2xl border border-white/5 text-center hover:border-emerald-500/30 transition-all group hover:-translate-y-1",children:[l.jsx("div",{className:"w-14 h-14 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-emerald-900/30 transition-colors border border-white/5",children:l.jsx(e.icon,{className:"w-7 h-7 text-gray-300 group-hover:text-emerald-400"})}),l.jsx("h3",{className:"font-bold text-white text-lg mb-2",children:e.title}),l.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:e.desc})]},t))})]})]})]}),E2=({options:r,value:e,onChange:t,placeholder:s,disabled:i})=>{const[c,d]=V.useState(!1),f=V.useRef(null);V.useEffect(()=>{const x=v=>{f.current&&!f.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return l.jsxs("div",{className:`relative ${c?"z-50":"z-0"}`,ref:f,children:[l.jsxs("button",{type:"button",onClick:()=>!i&&d(!c),className:`w-full px-5 py-4 rounded-2xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all
            ${i?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":c?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-700 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[l.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),l.jsx(bl,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&l.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[r.map((x,v)=>{if(x.isHeader)return l.jsx("div",{className:"px-4 py-2 text-xs font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:x.label},v);const w=x.value===e;return l.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${w?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[x.label,w&&l.jsx(ha,{className:"w-4 h-4"})]},v)}),r.length===0&&l.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},rO=({onBack:r})=>{const[e,t]=V.useState(""),[s,i]=V.useState(""),[c,d]=V.useState("SELECTION"),[f,g]=V.useState(["handouts"]),[x,v]=V.useState([]),[w,N]=V.useState(!1);V.useEffect(()=>{c==="CONTENT"&&s&&e&&C()},[c,s,e]);const C=async()=>{N(!0);try{const me=Ln(it(Le,"study_materials"),In("grade","==",s),In("subject","==",e)),G=await rs(me),S=[];G.forEach(j=>{S.push({id:j.id,...j.data()})}),S.sort((j,A)=>{var L,I;const O=((L=j.createdAt)==null?void 0:L.seconds)||0;return(((I=A.createdAt)==null?void 0:I.seconds)||0)-O}),v(S)}catch(me){console.error("Error fetching materials:",me)}finally{N(!1)}},M=()=>{e&&s&&d("CONTENT")},J=me=>{g(G=>G.includes(me)?G.filter(S=>S!==me):[...G,me])},B=()=>{const me=x.filter(j=>j.category==="handouts"),G=x.filter(j=>j.category==="worksheets"),S=x.filter(j=>j.category==="exams");return[{id:"handouts",title:" ",files:me},{id:"worksheets",title:" ",files:G},{id:"exams",title:" ",files:S}]},he=me=>me?(me.toDate?me.toDate():new Date(me.seconds*1e3)).toLocaleDateString("ar-EG"):"",oe=B(),le=()=>{const me=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(S=>({label:` ${S}`,value:S.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"   -   ",value:"English Major - QOU"}],G=[{label:"  (English)",value:"English"},{label:"",value:"Math"},{label:"",value:"Science"}];return l.jsxs("div",{className:"w-full animate-fade-in pb-20 bg-gray-950 min-h-screen text-gray-100",children:[l.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(156, 163, 175, 0.5);
          border-radius: 20px;
        }
      `}),l.jsxs("div",{className:"relative pt-32 pb-56 px-4 overflow-hidden rounded-b-[3.5rem] shadow-2xl shadow-gray-900/50 mb-20 border-b border-white/5",children:[l.jsxs("div",{className:"absolute inset-0 z-0",children:[l.jsx("img",{src:"https://lh3.googleusercontent.com/d/1gSDH-0a3cWa8m8APr5qXGkKxINXZcSid",alt:"Background",className:"w-full h-full object-cover object-center scale-105 opacity-50"}),l.jsx("div",{className:"absolute inset-0 bg-emerald-900/80 mix-blend-multiply"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/90"})]}),l.jsxs("div",{className:"max-w-4xl mx-auto text-center relative z-10",children:[l.jsx("div",{className:"inline-flex items-center justify-center p-5 bg-white/10 backdrop-blur-md rounded-3xl mb-6 border border-white/20 shadow-inner ring-1 ring-white/30 animate-fade-in-up",children:l.jsx(Do,{className:"w-10 h-10 text-white drop-shadow-md"})}),l.jsx("h2",{className:"text-5xl md:text-7xl font-black text-white mb-6 tracking-tight drop-shadow-2xl animate-fade-in-up delay-100",children:"  "}),l.jsx("p",{className:"text-white/95 text-xl md:text-2xl max-w-3xl mx-auto font-medium leading-relaxed drop-shadow-lg mb-8 animate-fade-in-up delay-200",children:"         PDF.      ."})]})]}),l.jsx("div",{className:"max-w-4xl mx-auto px-6 -mt-40 relative z-20 animate-fade-in-up delay-300",children:l.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-2xl border border-white/5 p-8 md:p-12 backdrop-blur-xl",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-10",children:[l.jsxs("div",{className:"group relative z-20",children:[l.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2 group-hover:text-emerald-400 transition-colors",children:[l.jsx("div",{className:"p-2 bg-emerald-900/20 rounded-lg group-hover:bg-emerald-900/40 transition-colors",children:l.jsx(ns,{className:"w-5 h-5 text-emerald-400"})})," "]}),l.jsx(E2,{options:G,value:e,onChange:t,placeholder:" "})]}),l.jsxs("div",{className:"group relative z-10",children:[l.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2 group-hover:text-teal-400 transition-colors",children:[l.jsx("div",{className:"p-2 bg-teal-900/20 rounded-lg group-hover:bg-teal-900/40 transition-colors",children:l.jsx(fa,{className:"w-5 h-5 text-teal-400"})})," "]}),l.jsx(E2,{options:me,value:s,onChange:i,placeholder:" "})]})]}),l.jsxs("button",{onClick:M,disabled:!e||!s,className:`w-full py-5 rounded-2xl font-bold text-xl flex items-center justify-center gap-3 transition-all shadow-lg ${!e||!s?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-gradient-to-r from-emerald-600 to-teal-600 text-white hover:from-emerald-700 hover:to-teal-700 hover:shadow-emerald-900/50 hover:-translate-y-1"}`,children:[l.jsx(Us,{className:"w-6 h-6"})," "]})]})})]})},_e=()=>l.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8 animate-fade-in-up min-h-screen",children:[l.jsxs("div",{className:"text-center mb-8 bg-gray-900 p-6 rounded-3xl shadow-sm border border-white/5 relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 to-teal-500"}),l.jsx("div",{className:"w-16 h-16 bg-emerald-900/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:l.jsx(ss,{className:"w-8 h-8 text-emerald-400"})}),l.jsxs("h2",{className:"text-2xl font-black text-white mb-2",children:[" ",e]}),l.jsxs("p",{className:"text-gray-400 font-medium text-sm md:text-base",children:["        ",l.jsx("span",{className:"font-bold text-emerald-400",children:s==="English Major - QOU"?"  ":s})]})]}),l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("button",{onClick:()=>d("SELECTION"),className:"flex items-center gap-2 bg-gray-800 text-gray-200 px-5 py-3 rounded-xl font-bold shadow-sm border border-gray-700 hover:border-emerald-600 hover:text-emerald-400 transition-all hover:-translate-y-0.5",children:[l.jsx(qt,{className:"w-5 h-5"})," "]}),l.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-xs font-bold text-gray-400 bg-gray-800 px-3 py-1.5 rounded-lg border border-gray-700",children:[l.jsx(Do,{className:"w-3.5 h-3.5"}),oe.reduce((me,G)=>me+G.files.length,0)," "]})]}),w?l.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[l.jsx(bt,{className:"w-10 h-10 animate-spin text-emerald-400"}),l.jsx("p",{className:"text-gray-400 font-bold",children:"  ..."})]}):l.jsx("div",{className:"space-y-4",children:oe.map(me=>{const G=f.includes(me.id);return l.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700 overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[l.jsxs("button",{onClick:()=>J(me.id),className:`w-full flex items-center justify-between p-5 transition-colors ${G?"bg-gray-700/30":"hover:bg-gray-700/30"}`,children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:`p-2.5 rounded-xl ${G?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-400"}`,children:l.jsx(Do,{className:"w-6 h-6"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("span",{className:"font-bold text-base text-white block",children:me.title}),l.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:[me.files.length," "]})]})]}),l.jsx("div",{className:`transition-transform duration-300 ${G?"rotate-180":""}`,children:l.jsx(bl,{className:"w-5 h-5 text-gray-400"})})]}),G&&l.jsx("div",{className:"bg-gray-900 border-t border-gray-700",children:me.files.length===0?l.jsxs("div",{className:"p-8 text-center flex flex-col items-center justify-center text-gray-400",children:[l.jsx(Do,{className:"w-10 h-10 mb-2 opacity-20"}),l.jsx("p",{className:"text-sm font-medium",children:"       "})]}):l.jsx("div",{className:"divide-y divide-gray-700/50",children:me.files.map((S,j)=>l.jsxs("div",{onClick:()=>S.url&&window.open(S.url,"_blank"),className:"flex items-center justify-between p-4 hover:bg-emerald-900/10 transition-colors group cursor-pointer",children:[l.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-900/20 flex items-center justify-center shrink-0 text-red-500",children:l.jsx(ss,{className:"w-5 h-5"})}),l.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[l.jsx("span",{className:"text-sm font-bold text-gray-200 group-hover:text-emerald-300 transition-colors whitespace-normal break-words",children:S.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-0.5",children:[l.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:S.size}),l.jsx("span",{children:""}),l.jsx("span",{children:he(S.createdAt)})]})]})]}),l.jsx("button",{className:"p-2.5 rounded-full bg-gray-700 text-gray-400 group-hover:bg-emerald-900/30 group-hover:text-emerald-400 transition-all shrink-0 ml-3",children:l.jsx(gp,{className:"w-5 h-5"})})]},j))})})]},me.id)})}),l.jsxs("div",{className:"mt-8 flex items-center gap-3 justify-center text-xs text-gray-400 bg-gray-800 p-4 rounded-2xl border border-dashed border-gray-700",children:[l.jsx(_f,{className:"w-4 h-4 text-emerald-500 shrink-0"}),l.jsx("span",{children:"      PDF  "})]})]});return l.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 transition-colors duration-300",children:[l.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:l.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[l.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-700 rounded-full transition-colors group text-gray-400 hover:text-emerald-400",children:l.jsx(qt,{className:"w-5 h-5"})}),l.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-emerald-400 cursor-pointer transition-colors",children:""}),l.jsx("span",{className:"text-gray-600",children:"/"}),l.jsx("span",{className:"font-bold text-white",children:" "})]})}),c==="SELECTION"?le():_e()]})},aO=({className:r})=>l.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),iO=[{id:"yazan",name:".   ",image:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",role:"English Teacher",phone:"972568401548",color:"emerald"},{id:"majd",name:".   ",image:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",role:"English Teacher",phone:"972568401548",color:"blue"}],lO=[{id:"inquiry",label:" ",icon:cx,message:"",color:"text-orange-400",bg:"bg-orange-900/20"},{id:"question",label:"  ",icon:oa,message:"",color:"text-blue-400",bg:"bg-blue-900/20"},{id:"review",label:" ",icon:u5,message:"",color:"text-purple-400",bg:"bg-purple-900/20"},{id:"message",label:" ",icon:Hu,message:"",color:"text-emerald-400",bg:"bg-emerald-900/20"}],oO=({onBack:r})=>{const[e,t]=V.useState(null),s=i=>{if(!e)return;const c=i||" ",d=`https://wa.me/${e.phone}?text=${encodeURIComponent(c)}`;window.open(d,"_blank"),t(null)};return l.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in pb-20 transition-colors duration-300 text-gray-100",children:[l.jsxs("div",{className:"relative pt-32 pb-48 px-4 overflow-hidden rounded-b-[3.5rem] shadow-2xl shadow-gray-900/50 mb-16 bg-gray-900 border-b border-white/5",children:[l.jsxs("div",{className:"absolute top-6 right-6 z-30 md:top-10 md:right-10 flex items-center gap-2 md:gap-4",children:[l.jsxs("button",{onClick:r,className:"flex items-center gap-2 bg-white/10 backdrop-blur-md text-white px-4 md:px-5 py-2.5 rounded-full font-bold hover:bg-white/20 transition-all border border-white/20 shadow-lg group",children:[l.jsx(qt,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),l.jsx("span",{className:"hidden sm:inline",children:""})]}),l.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-black/40 backdrop-blur-md text-white px-4 py-2 rounded-full font-bold border border-white/10 shadow-md",children:[l.jsx("span",{className:"text-gray-300",children:""}),l.jsx("span",{className:"text-gray-500",children:"/"}),l.jsx("span",{className:"text-emerald-400",children:"  "})]})]}),l.jsxs("div",{className:"absolute inset-0 z-0 bg-gray-900",children:[l.jsxs("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover opacity-80",poster:"https://images.unsplash.com/photo-1524178232363-1fb2b075b655?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",children:[l.jsx("source",{src:"https://drive.google.com/uc?export=download&id=1gfQre4TEqHyomoSblHjn-abxK_cduc8t",type:"video/mp4"}),l.jsx("source",{src:"https://assets.mixkit.co/videos/preview/mixkit-online-learning-man-student-on-laptop-4612-large.mp4",type:"video/mp4"})]}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-900/70 via-emerald-900/40 to-gray-900/90"})]}),l.jsxs("div",{className:"relative z-10 text-center max-w-4xl mx-auto text-white",children:[l.jsx("h1",{className:"text-4xl md:text-6xl font-black mb-6 leading-tight animate-fade-in-up delay-100 drop-shadow-2xl text-emerald-400",children:"  "}),l.jsx("p",{className:"text-xl md:text-2xl text-emerald-200 font-bold max-w-2xl mx-auto leading-relaxed animate-fade-in-up delay-200 drop-shadow-lg",children:"         "})]})]}),l.jsx("div",{className:"max-w-5xl mx-auto px-4 -mt-32 relative z-20",children:l.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-xl rounded-[3rem] border border-white/10 p-8 md:p-12 shadow-2xl",children:[l.jsxs("div",{className:"text-center mb-10",children:[l.jsx("span",{className:"bg-emerald-900/30 text-emerald-400 px-4 py-1.5 rounded-full text-sm font-bold border border-emerald-500/20 mb-4 inline-block",children:"English Department"}),l.jsx("h2",{className:"text-3xl font-black text-white",children:"  "})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-3xl mx-auto",children:iO.map(i=>l.jsxs("div",{className:"bg-gray-800/50 rounded-[2rem] p-6 border border-gray-700 hover:border-emerald-500/50 transition-all hover:bg-gray-800 group flex flex-col items-center text-center shadow-lg hover:shadow-emerald-900/20 hover:-translate-y-1",children:[l.jsx("div",{className:"w-40 h-40 rounded-full p-1 bg-gradient-to-br from-gray-700 to-gray-800 shadow-xl mb-5 group-hover:from-emerald-500 group-hover:to-teal-500 transition-all",children:l.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full rounded-full object-cover border-4 border-gray-900"})}),l.jsx("h3",{className:"text-2xl font-black text-white mb-1",children:i.name}),l.jsx("p",{className:"text-gray-400 font-medium text-sm mb-6",children:"English Language Teacher"}),l.jsxs("button",{onClick:()=>t(i),className:"w-full bg-gradient-to-r from-emerald-600 to-teal-600 text-white py-3.5 rounded-xl font-bold flex items-center justify-center gap-2 hover:shadow-lg hover:shadow-emerald-900/40 transition-all active:scale-95",children:[l.jsx(ca,{className:"w-4 h-4"})," "]})]},i.id))})]})}),e&&l.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm transition-opacity",onClick:()=>t(null)}),l.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] w-full max-w-md relative z-10 animate-fade-in-up shadow-2xl border border-white/10 overflow-hidden",children:[l.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 p-6 border-b border-white/5 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-emerald-500/30",children:l.jsx("img",{src:e.image,alt:"",className:"w-full h-full object-cover"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-400 font-bold",children:" "}),l.jsx("h3",{className:"text-lg font-black text-white",children:e.name})]})]}),l.jsx("button",{onClick:()=>t(null),className:"p-2 bg-white/5 hover:bg-white/10 rounded-full text-gray-400 hover:text-white transition-colors",children:l.jsx(ps,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"p-6 space-y-3",children:[l.jsx("p",{className:"text-center text-gray-400 text-sm mb-4 font-medium",children:"     :"}),lO.map(i=>l.jsxs("button",{onClick:()=>s(i.message),className:"w-full flex items-center gap-4 p-4 rounded-2xl bg-gray-800/50 border border-gray-700 hover:border-emerald-500/50 hover:bg-gray-800 transition-all group",children:[l.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${i.bg} ${i.color} group-hover:scale-110 transition-transform`,children:l.jsx(i.icon,{className:"w-6 h-6"})}),l.jsxs("div",{className:"text-right flex-1",children:[l.jsx("h4",{className:"font-bold text-white group-hover:text-emerald-400 transition-colors",children:i.label}),i.message&&l.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5 truncate max-w-[200px]",children:i.message})]}),l.jsx(ra,{className:"w-5 h-5 text-gray-600 group-hover:text-emerald-500 group-hover:-translate-x-1 transition-all"})]},i.id))]}),l.jsx("div",{className:"p-4 bg-black/20 text-center",children:l.jsxs("p",{className:"text-[10px] text-gray-500 flex items-center justify-center gap-1",children:[l.jsx(aO,{className:"w-3 h-3 text-green-500"}),"    "]})})]})]})]})},T2=[{minLevel:1,title:" ",icon:lx,color:"text-gray-400",border:"border-gray-400",gradient:"from-gray-500 to-gray-700"},{minLevel:5,title:" ",icon:ns,color:"text-emerald-400",border:"border-emerald-400",gradient:"from-emerald-500 to-teal-600"},{minLevel:10,title:"",icon:Us,color:"text-blue-400",border:"border-blue-400",gradient:"from-blue-500 to-indigo-600"},{minLevel:15,title:" ",icon:od,color:"text-indigo-400",border:"border-indigo-400",gradient:"from-indigo-500 to-purple-600"},{minLevel:20,title:"",icon:lm,color:"text-purple-400",border:"border-purple-400",gradient:"from-purple-500 to-fuchsia-600"},{minLevel:30,title:"",icon:ic,color:"text-amber-400",border:"border-amber-400",gradient:"from-amber-400 to-orange-600"}],cO=({onLoginClick:r})=>{const[e,t]=V.useState([]),[s,i]=V.useState(!0),[c,d]=V.useState(null);V.useEffect(()=>{(async()=>{i(!0);const v="etqan_leaderboard_cache_v1",w=1440*60*1e3,N=localStorage.getItem(v),C=Date.now();let M=[],J=!1;if(N)try{const B=JSON.parse(N);C-B.timestamp<w&&(M=B.data,J=!0)}catch(B){console.error("Cache parse error",B)}if(J)t(M);else try{const B=Ln(it(Le,"users"),Ed("totalXP","desc"),rS(10)),oe=(await rs(B)).docs.map(le=>({...le.data(),uid:le.id}));t(oe),localStorage.setItem(v,JSON.stringify({timestamp:C,data:oe}))}catch(B){console.error("Error fetching leaderboard:",B)}i(!1)})()},[]);const f=x=>{switch(x){case 0:return l.jsx(ic,{className:"w-5 h-5 md:w-6 md:h-6 text-yellow-400 fill-yellow-400"});case 1:return l.jsx(vp,{className:"w-5 h-5 md:w-6 md:h-6 text-gray-300 fill-gray-300"});case 2:return l.jsx(vp,{className:"w-5 h-5 md:w-6 md:h-6 text-amber-600 fill-amber-600"});default:return l.jsx(Mo,{className:"w-4 h-4 md:w-5 md:h-5 text-emerald-600/50"})}},g=x=>{const v=Math.floor((x||0)/500)+1;return[...T2].reverse().find(w=>v>=w.minLevel)||T2[0]};return l.jsxs("section",{className:"py-12 md:py-20 relative overflow-hidden bg-gray-950",id:"achievements",children:[l.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[l.jsx("div",{className:"absolute top-1/4 -right-20 w-72 h-72 bg-emerald-900/10 rounded-full blur-[80px]"}),l.jsx("div",{className:"absolute bottom-1/4 -left-20 w-72 h-72 bg-blue-900/10 rounded-full blur-[80px]"})]}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[l.jsxs("div",{className:"text-center mb-8 md:mb-12",children:[l.jsxs("h2",{className:"text-3xl md:text-5xl font-black text-white mb-3 drop-shadow-lg flex items-center justify-center gap-2",children:[l.jsx(Mo,{className:"w-8 h-8 md:w-10 md:h-10 text-yellow-500"})," "]}),l.jsx("p",{className:"text-gray-400 text-sm md:text-lg",children:"   "})]}),l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"w-full max-w-3xl",children:l.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm rounded-[2rem] border border-white/10 p-4 md:p-8 shadow-2xl relative",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6 px-2",children:[l.jsxs("h3",{className:"text-lg md:text-xl font-bold text-white flex items-center gap-2",children:[l.jsx(Nf,{className:"w-5 h-5 text-orange-500"})," "]}),l.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium bg-gray-800 text-gray-400 px-3 py-1.5 rounded-full border border-gray-700",children:[l.jsx(D2,{className:"w-3 h-3 md:w-3.5 md:h-3.5 text-blue-400"}),"   "]})]}),s?l.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[l.jsx(bt,{className:"w-8 h-8 animate-spin text-emerald-500 mb-2"}),l.jsx("p",{className:"text-gray-500 text-xs font-bold",children:"  ..."})]}):e.length===0?l.jsx("div",{className:"text-center py-12 text-gray-500 text-sm",children:l.jsx("p",{children:"      !"})}):l.jsx("div",{className:"space-y-2 md:space-y-3",children:e.map((x,v)=>l.jsxs("div",{onClick:()=>d(x),className:`relative flex items-center justify-between p-3 md:p-4 rounded-2xl border transition-all active:scale-98 cursor-pointer
                                        ${v===0?"bg-gradient-to-r from-yellow-900/20 to-gray-900 border-yellow-500/30 shadow-lg shadow-yellow-900/10":v===1?"bg-gray-800/60 border-gray-600/50":v===2?"bg-gray-800/40 border-amber-800/40":"bg-gray-900 border-gray-800 hover:bg-gray-800"}`,children:[l.jsxs("div",{className:"flex items-center gap-3 md:gap-4 overflow-hidden",children:[l.jsx("div",{className:`flex items-center justify-center w-6 md:w-8 font-black text-base md:text-lg ${v<3?"text-white":"text-gray-600"}`,children:v<3?f(v):v+1}),l.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gray-800 border-2 border-gray-700 overflow-hidden shrink-0",children:x.avatar?l.jsx("img",{src:x.avatar,alt:x.displayName,className:"w-full h-full object-cover"}):l.jsx(Zn,{className:"w-full h-full p-2 text-gray-400"})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("h4",{className:"font-bold text-white text-sm md:text-base truncate",children:x.displayName}),l.jsxs("div",{className:"flex items-center gap-1 text-[10px] md:text-xs text-gray-400 truncate",children:[l.jsx(fa,{className:"w-3 h-3"}),x.school||" "]})]})]}),l.jsxs("div",{className:"shrink-0 flex items-center gap-1 md:gap-2 bg-black/30 px-2 md:px-3 py-1 rounded-lg border border-white/5",children:[l.jsx("span",{className:"font-black text-emerald-400 text-sm md:text-base",children:x.totalXP||0}),l.jsx("span",{className:"text-[10px] text-gray-500 font-bold",children:"XP"})]}),v===0&&l.jsx("div",{className:"absolute -top-1 -right-1 pointer-events-none",children:l.jsxs("span",{className:"flex h-3 w-3",children:[l.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"}),l.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-yellow-500"})]})})]},v))})]})})})]}),c&&l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/80 backdrop-blur-md animate-fade-in",children:l.jsxs("div",{className:"bg-gray-900 w-full max-w-sm rounded-[2.5rem] overflow-hidden border border-gray-700 shadow-2xl relative animate-fade-in-up",children:[l.jsx("button",{onClick:()=>d(null),className:"absolute top-4 right-4 p-2 bg-black/20 hover:bg-black/40 text-white rounded-full transition-colors z-20",children:l.jsx(ps,{className:"w-5 h-5"})}),l.jsx("div",{className:`h-32 bg-gradient-to-br ${g(c.totalXP||0).gradient} relative`,children:l.jsx("div",{className:"absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"})}),l.jsxs("div",{className:"px-6 pb-8 -mt-16 text-center relative z-10",children:[l.jsx("div",{className:`w-32 h-32 mx-auto rounded-full border-4 bg-gray-800 overflow-hidden shadow-xl mb-4 ${g(c.totalXP||0).border}`,children:c.avatar?l.jsx("img",{src:c.avatar,alt:c.displayName,className:"w-full h-full object-cover"}):l.jsx(Zn,{className:"w-full h-full p-6 text-gray-500"})}),l.jsx("h2",{className:"text-2xl font-black text-white mb-1",children:c.displayName}),l.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm mb-4",children:[l.jsx(cx,{className:"w-3 h-3"}),c.school||" "]}),l.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-gray-800 border border-gray-700 mb-6 shadow-sm",children:[ax.createElement(g(c.totalXP||0).icon,{className:`w-4 h-4 ${g(c.totalXP||0).color}`}),l.jsx("span",{className:`text-sm font-bold ${g(c.totalXP||0).color}`,children:g(c.totalXP||0).title})]}),l.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-2xl border border-gray-700/50 mb-6 relative",children:[l.jsx(Y5,{className:"w-6 h-6 text-gray-600 absolute -top-3 right-4 bg-gray-900 px-1"}),l.jsx("p",{className:"text-gray-300 text-sm font-medium leading-relaxed italic",children:'"        .           ."'})]}),l.jsx("div",{className:"pt-4 border-t border-gray-800",children:l.jsxs("div",{className:"flex justify-between items-center px-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-xl md:text-2xl text-emerald-500",style:{fontFamily:"'Great Vibes', cursive"},children:"Yazan Abu Kahil"}),l.jsx("div",{className:"text-[9px] text-gray-600 mt-1 font-bold",children:".   "})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-xl md:text-2xl text-blue-500",style:{fontFamily:"'Great Vibes', cursive"},children:"Majd Al-Din"}),l.jsx("div",{className:"text-[9px] text-gray-600 mt-1 font-bold",children:".   "})]})]})})]})]})})]})},uO=()=>{const[r,e]=V.useState({students:0,quizzes:0,files:0,explanations:0});V.useEffect(()=>{(async()=>{const i="etqan_impact_stats_v3",d=localStorage.getItem(i),f=Date.now();if(d)try{const{data:g,timestamp:x}=JSON.parse(d);if(f-x<144e5){e(g);return}}catch(g){console.error("Cache parsing error",g)}try{const g=await sf(Ln(it(Le,"users"),In("role","==","student"))),x=await sf(it(Le,"quizzes")),v=await sf(it(Le,"study_materials")),w=await sf(it(Le,"explanations")),N={students:g.data().count,quizzes:x.data().count,files:v.data().count,explanations:w.data().count};e(N),localStorage.setItem(i,JSON.stringify({data:N,timestamp:f}))}catch(g){console.error("Error fetching impact stats:",g)}})()},[]);const t=[{id:1,label:" ",value:`${r.students}`,icon:im,color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/20"},{id:2,label:" ",value:`${r.quizzes}`,icon:cw,color:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/20"},{id:3,label:" ",value:`${r.files}`,icon:ss,color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/20"},{id:4,label:" ",value:`${r.explanations}`,icon:Gu,color:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/20"}];return l.jsxs("section",{className:"py-12 bg-gray-950 relative overflow-hidden border-t border-white/5",children:[l.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[200px] bg-emerald-900/10 rounded-full blur-[100px] pointer-events-none"}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[l.jsxs("div",{className:"text-center mb-10",children:[l.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1 rounded-full bg-emerald-900/20 border border-emerald-500/20 text-emerald-400 text-xs font-bold mb-4",children:[l.jsx(cw,{className:"w-4 h-4"}),l.jsx("span",{children:" "})]}),l.jsxs("h2",{className:"text-3xl font-black text-white",children:[" ",l.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-400",children:""})]})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6",children:t.map(s=>l.jsxs("div",{className:`bg-gray-900/50 backdrop-blur-md p-6 rounded-3xl border ${s.border} text-center group hover:-translate-y-1 transition-all duration-300 hover:bg-gray-800`,children:[l.jsx("div",{className:`w-12 h-12 mx-auto rounded-2xl flex items-center justify-center mb-4 ${s.bg} ${s.color} shadow-lg group-hover:scale-110 transition-transform`,children:l.jsx(s.icon,{className:"w-6 h-6"})}),l.jsx("div",{className:"text-2xl md:text-3xl font-black text-white mb-1",children:s.value}),l.jsx("div",{className:"text-gray-400 font-bold text-xs md:text-sm",children:s.label})]},s.id))})]})]})},dO=({onBack:r})=>{const[e,t]=V.useState([]),[s,i]=V.useState(!0),[c,d]=V.useState(""),[f,g]=V.useState(null),[x,v]=V.useState(!1);V.useEffect(()=>{w()},[]);const w=async()=>{i(!0);try{const G=Ln(it(Le,"quizzes"),Ed("createdAt","desc")),j=(await rs(G)).docs.map(A=>({id:A.id,...A.data()}));t(j)}catch(G){console.error("Error fetching quizzes:",G)}finally{i(!1)}},N=G=>{g({category:"Language",...G})},C=async(G,S)=>{if(G.stopPropagation(),!S){alert(":   ");return}if(window.confirm("  "))try{await Lm(Hn(Le,"quizzes",S)),t(j=>j.filter(A=>A.id!==S))}catch(j){console.error("Error deleting quiz:",j),alert("   : "+j.message)}},M=(G,S)=>{f&&g({...f,[G]:S})},J=(G,S,j)=>{if(!f)return;const A=[...f.questions];A[G]={...A[G],[S]:j},g({...f,questions:A})},B=(G,S,j)=>{if(!f)return;const A=[...f.questions],O=[...A[G].options];O[S]=j,A[G]={...A[G],options:O},g({...f,questions:A})},he=G=>{if(f&&window.confirm("      ")){const S=f.questions.filter((j,A)=>A!==G);g({...f,questions:S})}},oe=async()=>{if(!(!f||!f.id)){if(f.questions.length===0){alert("     !");return}v(!0);try{const G=Hn(Le,"quizzes",f.id);await Td(G,{title:f.title,subject:f.subject,grade:f.grade,category:f.category,questions:f.questions}),t(S=>S.map(j=>j.id===f.id?f:j)),g(null),alert("   ")}catch(G){console.error("Error updating quiz:",G),alert("   ")}finally{v(!1)}}},le=e.filter(G=>(G.title?G.title.toLowerCase().includes(c.toLowerCase()):!1)||G.teacherName&&G.teacherName.toLowerCase().includes(c.toLowerCase())),_e=G=>G?(G.toDate?G.toDate():new Date(G.seconds*1e3)).toLocaleDateString("ar-EG"):"",me="w-full p-3 rounded-xl border-2 border-gray-600 focus:border-blue-400 outline-none font-bold text-white bg-gray-700 shadow-sm transition-colors placeholder-gray-400";return l.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in relative transition-colors duration-300 text-gray-100",children:[l.jsx("style",{children:`
        .custom-scrollbar {
          scrollbar-width: thin;
          scrollbar-color: #475569 transparent;
        }
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
          height: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #475569;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #94a3b8;
        }
      `}),l.jsx("div",{className:"bg-gray-950 border-b border-white/5 pt-8 pb-20 px-4 shadow-sm relative overflow-hidden",children:l.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[l.jsxs("div",{className:"flex items-center gap-3 text-sm md:text-base mb-6",children:[l.jsx("button",{onClick:r,className:"bg-gray-800 hover:bg-gray-700 p-2 rounded-full transition-colors text-gray-300",children:l.jsx(qt,{className:"w-5 h-5"})}),l.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),l.jsx("span",{className:"text-gray-600",children:"/"}),l.jsx("span",{className:"font-bold text-white",children:" "})]}),l.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end justify-between gap-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-4xl font-black text-white mb-2 tracking-tight",children:"  "}),l.jsx("p",{className:"text-gray-400 font-medium",children:"      "})]}),l.jsxs("div",{className:"w-full md:w-auto bg-gray-800 p-2 rounded-2xl shadow-lg border border-gray-600 flex items-center gap-2",children:[l.jsx(Us,{className:"w-5 h-5 text-gray-300 mr-2"}),l.jsx("input",{type:"text",placeholder:"    ...",value:c,onChange:G=>d(G.target.value),className:"w-full md:w-64 outline-none text-sm font-bold text-gray-200 placeholder-gray-500 bg-transparent"})]})]})]})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 -mt-12 relative z-20",children:s?l.jsx("div",{className:"flex justify-center items-center py-20",children:l.jsx(bt,{className:"w-10 h-10 animate-spin text-blue-400"})}):le.length===0?l.jsxs("div",{className:"bg-gray-800 rounded-3xl shadow-sm border border-white/5 p-12 text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Fu,{className:"w-8 h-8 text-gray-500"})}),l.jsx("h3",{className:"text-xl font-bold text-white",children:"  "}),l.jsx("p",{className:"text-gray-400 mt-1",children:"       ."})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:le.map(G=>l.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm hover:shadow-xl transition-all duration-300 border border-white/5 overflow-hidden group flex flex-col",children:[l.jsxs("div",{className:"p-6 flex-1",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsx("span",{className:"bg-blue-900/30 text-blue-300 px-3 py-1 rounded-lg text-xs font-bold",children:G.subject}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>N(G),className:"bg-emerald-900/20 text-emerald-400 p-1.5 rounded-lg hover:bg-emerald-900/40 transition-colors",title:" ",children:l.jsx(wp,{className:"w-4 h-4"})}),l.jsx("button",{onClick:S=>C(S,G.id),className:"bg-red-900/20 text-red-400 p-1.5 rounded-lg hover:bg-red-900/40 transition-colors",title:" ",children:l.jsx(wi,{className:"w-4 h-4"})})]})]}),l.jsx("h3",{className:"text-xl font-black text-white mb-2 line-clamp-2 group-hover:text-blue-400 transition-colors",children:G.title}),G.category&&l.jsx("span",{className:"inline-block mb-4 bg-amber-900/20 text-amber-400 text-[10px] font-bold px-2 py-1 rounded-md border border-amber-800/50",children:G.category}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-6",children:[l.jsxs("span",{className:"bg-gray-700 px-2 py-0.5 rounded border border-gray-600 font-bold",children:[" ",G.grade]}),l.jsx("span",{className:"text-gray-600",children:"|"}),l.jsxs("span",{className:"bg-gray-700/50 text-gray-400 px-2 py-0.5 rounded-lg text-xs font-bold flex items-center gap-1",children:[l.jsx(qu,{className:"w-3 h-3"}),_e(G.createdAt)]})]})]}),l.jsxs("div",{className:"bg-gray-900/50 p-4 border-t border-white/5 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full border border-gray-600 flex items-center justify-center shadow-sm text-gray-300",children:l.jsx(Zn,{className:"w-4 h-4"})}),l.jsx("p",{className:"text-sm font-bold text-gray-300",children:G.teacherName||""})]}),l.jsxs("span",{className:"flex items-center gap-1 text-xs font-bold text-gray-400 bg-gray-700 px-2 py-1 rounded-md border border-gray-600",children:[l.jsx(oa,{className:"w-3 h-3"}),G.questions.length," "]})]})]},G.id))})}),f&&l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden border border-gray-700",children:[l.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0 sticky top-0 z-10",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:l.jsx(wp,{className:"w-6 h-6 text-emerald-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-black text-white",children:" "}),l.jsx("p",{className:"text-sm text-gray-400",children:"     "})]})]}),l.jsx("button",{onClick:()=>g(null),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:l.jsx(ps,{className:"w-6 h-6"})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-900 custom-scrollbar",children:[l.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 mb-8",children:[l.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[l.jsx(Fu,{className:"w-5 h-5 text-blue-400"})," "]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:" "}),l.jsx("input",{type:"text",value:f.title,onChange:G=>M("title",G.target.value),className:me})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:""}),l.jsx("input",{type:"text",value:f.subject,onChange:G=>M("subject",G.target.value),className:me})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:""}),l.jsx("select",{value:f.grade,onChange:G=>M("grade",G.target.value),className:me,children:[5,6,7,8,9,10,11,12].map(G=>l.jsxs("option",{value:G,children:[" ",G]},G))})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:"  (Category)"}),l.jsxs("select",{value:f.category||"Language",onChange:G=>M("category",G.target.value),className:me,children:[l.jsx("option",{value:"Language",children:"Language ()"}),l.jsx("option",{value:"Reading",children:"Reading ()"}),l.jsx("option",{value:"Writing",children:"Writing ()"}),l.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"})]})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("h3",{className:"font-bold text-white flex items-center justify-between",children:[l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(oa,{className:"w-5 h-5 text-blue-400"})," (",f.questions.length,")"]}),l.jsx("span",{className:"text-xs bg-yellow-900/30 text-yellow-300 px-2 py-1 rounded-lg",children:"*        "})]}),f.questions.map((G,S)=>l.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 relative group",children:[l.jsx("button",{onClick:()=>he(S),className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-red-900/20 hover:text-red-400 rounded-lg transition-colors",title:" ",children:l.jsx(wi,{className:"w-5 h-5"})}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("label",{className:"block text-xs font-bold text-gray-400 mb-1.5",children:["  ",S+1]}),l.jsx("input",{type:"text",dir:"ltr",value:G.question,onChange:j=>J(S,"question",j.target.value),className:"w-full p-3 rounded-xl border-2 border-gray-600 focus:border-emerald-500 outline-none font-bold text-white bg-gray-700 shadow-sm text-lg transition-colors placeholder-gray-400 text-left"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:G.options.map((j,A)=>l.jsxs("div",{className:"relative",children:[l.jsxs("label",{className:"flex items-center justify-between text-xs font-bold text-gray-400 mb-1 px-1",children:[l.jsxs("span",{children:[" ",A+1]}),l.jsxs("button",{onClick:()=>J(S,"correctAnswer",A),className:`flex items-center gap-1 px-2 py-0.5 rounded cursor-pointer transition-colors ${G.correctAnswer===A?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:[G.correctAnswer===A?l.jsx(bn,{className:"w-3 h-3"}):l.jsx("div",{className:"w-3 h-3 border border-gray-400 rounded-full"}),G.correctAnswer===A?" ":" "]})]}),l.jsx("input",{type:"text",dir:"ltr",value:j,onChange:O=>B(S,A,O.target.value),className:`w-full p-3 rounded-xl border-2 outline-none font-bold transition-colors shadow-sm text-left ${G.correctAnswer===A?"border-emerald-500 bg-emerald-900/20 text-emerald-300":"border-gray-600 focus:border-blue-400 text-white bg-gray-700"}`})]},A))}),l.jsxs("div",{className:"bg-yellow-900/20 p-4 rounded-xl border border-yellow-800",children:[l.jsx("label",{className:"block text-xs font-bold text-yellow-200 mb-1",children:" "}),l.jsx("textarea",{value:G.explanation||"",onChange:j=>J(S,"explanation",j.target.value),className:"w-full p-3 rounded-lg border border-yellow-700 focus:border-yellow-500 outline-none text-gray-200 bg-gray-800 text-sm h-20 resize-none shadow-sm custom-scrollbar text-left",placeholder:"  ...",dir:"ltr"})]})]},S))]})]}),l.jsxs("div",{className:"p-6 bg-gray-800 border-t border-gray-700 flex justify-end gap-3 shrink-0 sticky bottom-0 z-10",children:[l.jsx("button",{onClick:()=>g(null),className:"px-6 py-3 rounded-xl font-bold text-gray-300 bg-gray-700 hover:bg-gray-600 transition-colors",children:""}),l.jsxs("button",{onClick:oe,disabled:x,className:"px-8 py-3 rounded-xl font-bold text-white bg-emerald-600 hover:bg-emerald-700 transition-colors flex items-center gap-2 shadow-lg shadow-none",children:[x?l.jsx(bt,{className:"w-5 h-5 animate-spin"}):l.jsx(gi,{className:"w-5 h-5"})," "]})]})]})})]})},hO=[{id:"grammar",title:" (Grammar)",icon:Fu,desc:"   ",color:"bg-blue-900/20 text-blue-400"},{id:"reading",title:" (Reading)",icon:ns,desc:"    ",color:"bg-emerald-900/20 text-emerald-400"},{id:"vocabulary",title:" (Vocabulary)",icon:sm,desc:"   ",color:"bg-purple-900/20 text-purple-400"},{id:"writing",title:" (Writing)",icon:ox,desc:"   ",color:"bg-orange-900/20 text-orange-400"}],fO=[{id:"English",title:" ",icon:sm,color:"text-purple-400",bg:"bg-purple-900/20"}],mO=({onBack:r})=>{const{user:e}=rr(),[t,s]=V.useState("INTRO"),[i,c]=V.useState(""),[d,f]=V.useState(""),[g,x]=V.useState(null),[v,w]=V.useState([]),[N,C]=V.useState(!1),[M,J]=V.useState(null),[B,he]=V.useState(0),[oe,le]=V.useState(""),[_e,me]=V.useState(!1),[G,S]=V.useState(!1);V.useEffect(()=>{window.scrollTo(0,0)},[t]);const j=()=>s("SUBJECTS"),A=U=>{c(U),s("GRADES")},O=U=>{f(U),s("CATEGORIES")},D=U=>{x(U),s("TOPICS")},L=U=>{J(U),he(0),le(""),S(!1),s("DETAILS")};V.useEffect(()=>{t==="TOPICS"&&d&&g&&i&&I()},[t,d,g,i]);const I=async()=>{C(!0);try{const U=Ln(it(Le,"explanations"),In("subject","==",i),In("grade","==",d),In("category","==",g==null?void 0:g.id)),z=await rs(U),ee=[];z.forEach(ve=>{ee.push({id:ve.id,...ve.data()})}),ee.sort((ve,Oe)=>{var Re,Nt;const Ue=((Re=ve.createdAt)==null?void 0:Re.seconds)||0;return(((Nt=Oe.createdAt)==null?void 0:Nt.seconds)||0)-Ue}),w(ee)}catch(U){console.error("Error fetching explanations:",U)}finally{C(!1)}},de=async()=>{if(B!==0&&!(!M||!e)){me(!0);try{await as(it(Le,"reviews"),{type:"explanation",targetId:M.id,targetTitle:M.title,teacherId:M.teacherName||"",teacherName:M.teacherName||"",rating:B,comment:oe,studentId:e.uid,studentName:e.displayName,createdAt:Pn()}),S(!0)}catch(U){console.error("Error saving review:",U),alert("    ")}finally{me(!1)}}},ge=U=>U?(U.toDate?U.toDate():new Date(U.seconds*1e3)).toLocaleDateString("ar-EG"):"",F=()=>l.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in flex flex-col relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 z-0",children:[l.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",poster:"https://images.unsplash.com/photo-1497633762265-9d179a990aa6?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",className:"w-full h-full object-cover",children:l.jsx("source",{src:"https://drive.google.com/uc?export=download&id=1wHw0wEWltdWfMqblwZLRgLKZ_ah3lCKm",type:"video/mp4"})}),l.jsx("div",{className:"absolute inset-0 bg-gray-950/70"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/80"})]}),l.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center flex-1 px-6 text-center pt-10",children:[l.jsx("span",{className:"inline-block px-6 py-2 rounded-full bg-white/10 backdrop-blur-md text-emerald-300 font-bold text-sm mb-6 border border-white/20 shadow-lg animate-fade-in-up",children:"  "}),l.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-white mb-6 leading-tight drop-shadow-2xl animate-fade-in-up delay-100",children:[" ",l.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-400",children:" "})]}),l.jsx("p",{className:"text-gray-200 text-lg md:text-2xl max-w-2xl mx-auto mb-12 leading-relaxed font-medium drop-shadow-md animate-fade-in-up delay-200",children:"         ."}),l.jsxs("button",{onClick:j,className:"w-full md:w-auto bg-white text-gray-900 text-xl font-black px-12 py-5 rounded-2xl hover:scale-105 hover:bg-emerald-50 transition-all shadow-[0_0_30px_rgba(255,255,255,0.3)] flex items-center justify-center gap-3 animate-fade-in-up delay-300",children:[" ",l.jsx(qt,{className:"w-6 h-6"})]})]}),l.jsx("div",{className:"p-6 text-center relative z-10",children:l.jsxs("button",{onClick:r,className:"text-white/70 font-bold hover:text-white transition-colors flex items-center justify-center gap-2 mx-auto",children:[l.jsx(Ef,{className:"w-4 h-4"})," "]})})]}),ce=()=>l.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[l.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:l.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[l.jsx("button",{onClick:()=>s("INTRO"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:l.jsx(qt,{className:"w-5 h-5"})}),l.jsx("span",{onClick:()=>s("INTRO"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),l.jsx("span",{className:"text-gray-600",children:"/"}),l.jsx("span",{className:"font-bold text-white",children:" "})]})}),l.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:fO.map(U=>l.jsxs("button",{onClick:()=>A(U.id),className:"bg-gray-900 p-8 rounded-[2.5rem] shadow-sm border border-gray-700 hover:border-emerald-500 hover:shadow-xl hover:-translate-y-2 transition-all group flex flex-col items-center gap-4",children:[l.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center ${U.bg} ${U.color} group-hover:scale-110 transition-transform`,children:l.jsx(U.icon,{className:"w-10 h-10"})}),l.jsx("span",{className:"font-black text-xl text-gray-200 group-hover:text-white",children:U.title})]},U.id))})})]}),Z=()=>l.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[l.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:l.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[l.jsx("button",{onClick:()=>s("SUBJECTS"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:l.jsx(qt,{className:"w-5 h-5"})}),l.jsx("span",{onClick:()=>s("SUBJECTS"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),l.jsx("span",{className:"text-gray-600",children:"/"}),l.jsx("span",{className:"font-bold text-white",children:" "})]})}),l.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4",children:[[5,6,7,8,9,10,11,12].map(U=>l.jsxs("button",{onClick:()=>O(U.toString()),className:"bg-gray-900 p-4 rounded-2xl shadow-sm border border-gray-700 hover:border-emerald-500 hover:shadow-none hover:-translate-y-1 transition-all group flex flex-col items-center gap-2",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 flex items-center justify-center group-hover:bg-emerald-500 transition-colors",children:l.jsx("span",{className:"font-black text-xl text-gray-300 group-hover:text-white",children:U})}),l.jsxs("span",{className:"font-bold text-gray-300 group-hover:text-emerald-400 text-sm md:text-base",children:[" ",U]})]},U)),l.jsxs("button",{onClick:()=>O("English Major - QOU"),className:"col-span-2 md:col-span-3 lg:col-span-4 bg-gradient-to-r from-emerald-600 to-teal-600 p-4 rounded-2xl shadow-lg text-white hover:shadow-xl hover:-translate-y-1 transition-all flex items-center justify-center gap-4",children:[l.jsx("div",{className:"bg-white/20 p-2 rounded-xl",children:l.jsx(fa,{className:"w-6 h-6 text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("span",{className:"block font-black text-base md:text-lg",children:"  "}),l.jsx("span",{className:"text-emerald-100 text-xs md:text-sm",children:"  "})]})]})]})})]}),se=()=>l.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[l.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:l.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[l.jsx("button",{onClick:()=>s("GRADES"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:l.jsx(qt,{className:"w-5 h-5"})}),l.jsx("span",{onClick:()=>s("GRADES"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),l.jsx("span",{className:"text-gray-600",children:"/"}),l.jsx("span",{className:"font-bold text-white",children:" "})]})}),l.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:hO.map(U=>l.jsx("button",{onClick:()=>D(U),className:"bg-gray-900 rounded-3xl p-5 shadow-sm border border-gray-700 hover:shadow-xl hover:border-emerald-800 transition-all group text-right relative overflow-hidden",children:l.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[l.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center shrink-0 ${U.color} group-hover:scale-110 transition-transform`,children:l.jsx(U.icon,{className:"w-7 h-7"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-lg font-black text-white mb-1",children:U.title}),l.jsx("p",{className:"text-gray-400 text-xs font-medium",children:U.desc})]}),l.jsx("div",{className:"absolute top-1/2 -left-4 -translate-y-1/2 bg-gray-700 p-2 rounded-full opacity-0 group-hover:opacity-100 group-hover:translate-x-2 transition-all",children:l.jsx(ra,{className:"w-5 h-5 text-gray-400"})})]})},U.id))})})]}),Se=()=>l.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[l.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:l.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[l.jsx("button",{onClick:()=>s("CATEGORIES"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:l.jsx(qt,{className:"w-5 h-5"})}),l.jsx("span",{onClick:()=>s("CATEGORIES"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),l.jsx("span",{className:"text-gray-600",children:"/"}),l.jsx("span",{className:"font-bold text-white",children:g==null?void 0:g.title})]})}),l.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:N?l.jsx("div",{className:"flex justify-center py-12",children:l.jsx(bt,{className:"w-8 h-8 animate-spin text-emerald-400"})}):v.length===0?l.jsx("div",{className:"flex flex-col items-center justify-center text-center",children:l.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-gray-700 max-w-md w-full",children:[l.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:"   "}),l.jsxs("p",{className:"text-gray-400 font-medium leading-relaxed mb-6",children:["      ",l.jsx("span",{className:"text-emerald-600 font-bold",children:g==null?void 0:g.title}),"    ."]}),l.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs font-bold text-gray-400 bg-gray-700 py-2 px-4 rounded-full",children:[l.jsx(Bu,{className:"w-4 h-4"}),"     "]})]})}):l.jsx("div",{className:"grid grid-cols-1 gap-4",children:v.map(U=>l.jsxs("button",{onClick:()=>L(U),className:"bg-gray-900 p-5 rounded-2xl shadow-sm border border-gray-700 hover:border-emerald-700 hover:shadow-md transition-all group text-right flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"p-3 rounded-xl bg-gray-700 group-hover:bg-emerald-900/20 transition-colors",children:l.jsx(ss,{className:"w-6 h-6 text-gray-500 group-hover:text-emerald-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-white mb-1 group-hover:text-emerald-400 transition-colors",children:U.title}),l.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 font-medium",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(qu,{className:"w-3 h-3"}),ge(U.createdAt)]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Zn,{className:"w-3 h-3"}),U.teacherName]})]})]})]}),l.jsx(ra,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500 group-hover:-translate-x-1 transition-all"})]},U.id))})})]}),k=()=>M?l.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100 pb-20",children:[l.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:l.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[l.jsx("button",{onClick:()=>s("TOPICS"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:l.jsx(qt,{className:"w-5 h-5"})}),l.jsx("span",{onClick:()=>s("TOPICS"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:g==null?void 0:g.title}),l.jsx("span",{className:"text-gray-600",children:"/"}),l.jsx("span",{className:"font-bold text-white truncate",children:M.title})]})}),l.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[l.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden mb-8",children:[l.jsxs("div",{className:"p-6 md:p-8",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-6 text-sm text-gray-400 border-b border-gray-700 pb-4",children:[l.jsx("span",{className:"bg-gray-700 px-2 py-1 rounded font-bold",children:d==="English Major - QOU"?"":` ${d}`}),l.jsx(ra,{className:"w-4 h-4"}),l.jsx("span",{className:"bg-gray-700 px-2 py-1 rounded font-bold",children:g==null?void 0:g.title})]}),l.jsx("h1",{className:"text-2xl md:text-3xl font-black text-white mb-6 leading-relaxed",dir:"auto",children:M.title}),l.jsx("div",{className:"prose dark:prose-invert max-w-none text-gray-200 whitespace-pre-wrap leading-loose text-lg",dir:"auto",children:M.content})]}),l.jsxs("div",{className:"bg-gray-900/50 p-4 border-t border-gray-700 flex justify-between items-center text-sm text-gray-400",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Zn,{className:"w-4 h-4"}),l.jsxs("span",{children:[": ",l.jsx("span",{className:"font-bold",children:M.teacherName})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(qu,{className:"w-4 h-4"}),l.jsx("span",{children:ge(M.createdAt)})]})]})]}),e&&l.jsx("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 text-center relative",children:G?l.jsxs("div",{className:"py-6",children:[l.jsx("div",{className:"w-12 h-12 bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-2 text-green-400 border border-green-900",children:l.jsx(ha,{className:"w-6 h-6"})}),l.jsx("h3",{className:"text-white font-bold",children:" !"}),l.jsx("p",{className:"text-gray-400 text-sm",children:"   ."})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3 text-white",children:[l.jsx(rm,{className:"w-5 h-5 text-blue-400"}),l.jsx("h3",{className:"font-bold text-lg",children:"    "})]}),l.jsx("p",{className:"text-gray-400 text-xs mb-4",children:"   10 ()"}),l.jsx("div",{className:"flex justify-center gap-1 mb-4 flex-wrap",children:[1,2,3,4,5,6,7,8,9,10].map(U=>l.jsx("button",{onClick:()=>he(U),className:`w-8 h-8 rounded-lg text-xs font-bold transition-all ${B===U?"bg-blue-500 text-white scale-110":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:U},U))}),l.jsx("textarea",{value:oe,onChange:U=>le(U.target.value),placeholder:"   ()...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl p-3 text-sm text-white outline-none focus:border-blue-500 mb-4 min-h-[80px] resize-none"}),l.jsxs("button",{onClick:de,disabled:_e||B===0,className:`w-full py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all ${B===0?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[_e?l.jsx(bt,{className:"w-4 h-4 animate-spin"}):l.jsx(ca,{className:"w-4 h-4"})," "]})]})})]})]}):null;return l.jsxs(l.Fragment,{children:[t==="INTRO"&&F(),t==="SUBJECTS"&&ce(),t==="GRADES"&&Z(),t==="CATEGORIES"&&se(),t==="TOPICS"&&Se(),t==="DETAILS"&&k()]})},S2=[{id:"grammar",title:" (Grammar)",icon:Fu},{id:"reading",title:" (Reading)",icon:ns},{id:"vocabulary",title:" (Vocabulary)",icon:sm},{id:"writing",title:" (Writing)",icon:ox}],j2=[{id:"English",title:"  (English)",icon:sm}],gO=({onBack:r,onNavigate:e})=>{const{user:t}=rr(),[s,i]=V.useState(""),[c,d]=V.useState(""),[f,g]=V.useState(""),[x,v]=V.useState(""),[w,N]=V.useState(""),[C,M]=V.useState(!1),[J,B]=V.useState(!1),[he,oe]=V.useState(""),[le,_e]=V.useState([]),[me,G]=V.useState(!1),[S,j]=V.useState(!1),[A,O]=V.useState(null),[D,L]=V.useState(!1),I=async()=>{var se;if(!s||!c||!f||!x||!w){alert("    ");return}M(!0);try{await as(it(Le,"explanations"),{subject:s,grade:c,category:f,title:x,content:w,teacherName:(t==null?void 0:t.displayName)||"",teacherId:t==null?void 0:t.uid,createdAt:Pn()}),await as(it(Le,"notifications"),{recipientId:"all",title:" ",message:`    : ${x}  ${(se=j2.find(Se=>Se.id===s))==null?void 0:se.title}`,type:"explanation",createdAt:Pn(),read:!1}),B(!0),setTimeout(()=>{B(!1),v(""),N("")},2e3)}catch(Se){console.error("Error saving explanation:",Se),alert("   ")}finally{M(!1)}},de=async()=>{if(he.trim()&&t!=null&&t.uid){G(!0),j(!0),_e([]);try{const se=Ln(it(Le,"explanations"),In("title",">=",he),In("title","<=",he+"")),Se=await rs(se),k=[];Se.forEach(U=>{const z=U.data();z.teacherId===t.uid&&k.push({id:U.id,...z})}),_e(k)}catch(se){console.error("Error searching explanations:",se)}finally{G(!1)}}},ge=async()=>{if(A){L(!0);try{await Lm(Hn(Le,"explanations",A)),_e(se=>se.filter(Se=>Se.id!==A)),O(null)}catch(se){console.error(se),alert("   ")}finally{L(!1)}}},F=()=>{r?r():e("HOME")},ce=se=>se?(se.toDate?se.toDate():new Date(se.seconds*1e3)).toLocaleDateString("ar-EG"):"",Z=se=>{const Se=S2.find(k=>k.id===se);return Se?Se.title:se};return l.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[l.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:l.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[l.jsx("button",{onClick:F,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:l.jsx(qt,{className:"w-5 h-5"})}),l.jsx("span",{onClick:F,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),l.jsx("span",{className:"text-gray-600",children:"/"}),l.jsx("span",{className:"font-bold text-white",children:"  "})]})}),l.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[l.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8 mb-12",children:[l.jsxs("h2",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[l.jsx(Gu,{className:"w-6 h-6 text-purple-500"}),"  "]}),J?l.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[l.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:l.jsx(bn,{className:"w-10 h-10 text-green-400"})}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),l.jsx("p",{className:"text-gray-400 mb-6",children:"      ."}),l.jsx("button",{onClick:()=>B(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"1.   "}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:j2.map(se=>l.jsxs("button",{onClick:()=>i(se.id),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all ${s===se.id?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:[l.jsx(se.icon,{className:"w-6 h-6"}),l.jsx("span",{children:se.title})]},se.id))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"2.   "}),l.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[[5,6,7,8,9,10,11,12].map(se=>l.jsxs("button",{onClick:()=>d(se.toString()),className:`py-3 rounded-xl font-bold transition-all border-2 ${c===se.toString()?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:[" ",se]},se)),l.jsx("button",{onClick:()=>d("English Major - QOU"),className:`col-span-2 sm:col-span-4 py-3 rounded-xl font-bold transition-all border-2 ${c==="English Major - QOU"?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:"  "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"3.   ()"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:S2.map(se=>l.jsxs("button",{onClick:()=>g(se.id),className:`flex items-center gap-3 p-4 rounded-xl border-2 transition-all text-right ${f===se.id?"bg-purple-900/20 border-purple-500 text-purple-300":"bg-gray-800 border-gray-700 text-gray-300 hover:border-purple-500/50"}`,children:[l.jsx("div",{className:`p-2 rounded-lg ${f===se.id?"bg-purple-800":"bg-gray-700"}`,children:l.jsx(se.icon,{className:"w-5 h-5"})}),l.jsx("span",{className:"font-bold",children:se.title})]},se.id))})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  / "}),l.jsx("input",{type:"text",value:x,onChange:se=>v(se.target.value),placeholder:":   Present Simple",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-purple-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),l.jsx("textarea",{value:w,onChange:se=>N(se.target.value),placeholder:"  ...",className:"w-full h-64 px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-purple-500 outline-none font-medium text-white bg-gray-800 transition-all resize-none leading-relaxed",dir:"auto"}),l.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"          ."})]})]}),l.jsx("div",{className:"pt-4 border-t border-white/5 flex justify-end",children:l.jsxs("button",{onClick:I,disabled:C,className:"bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center gap-2 transform hover:-translate-y-1",children:[C?l.jsx(bt,{className:"w-5 h-5 animate-spin"}):l.jsx(gi,{className:"w-5 h-5"}),"  "]})})]})]}),l.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:[l.jsxs("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[l.jsx(wi,{className:"w-6 h-6 text-red-500"}),"  ()"]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",placeholder:"    ...",value:he,onChange:se=>oe(se.target.value),onKeyDown:se=>se.key==="Enter"&&de(),className:"w-full px-5 py-3 pl-12 rounded-xl bg-gray-800 border border-gray-700 focus:border-red-500 outline-none text-white font-bold"}),l.jsx("button",{onClick:de,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-700 hover:bg-gray-600 p-2 rounded-lg text-gray-300 transition-colors",children:me?l.jsx(bt,{className:"w-4 h-4 animate-spin"}):l.jsx(Us,{className:"w-4 h-4"})})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-2 mr-1",children:"      .        ."})]}),le.length>0?l.jsx("div",{className:"space-y-3 animate-fade-in",children:le.map(se=>l.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl border border-gray-700 flex items-center justify-between group hover:border-red-500/50 transition-all",children:[l.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-900/20 flex items-center justify-center text-purple-400 shrink-0",children:l.jsx(ss,{className:"w-5 h-5"})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("h4",{className:"font-bold text-white truncate mb-1",children:se.title}),l.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[l.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:se.subject||"English"}),l.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:Z(se.category)}),l.jsx("span",{children:se.grade==="English Major - QOU"?"":` ${se.grade}`}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(qu,{className:"w-3 h-3"})," ",ce(se.createdAt)]})]})]})]}),l.jsx("button",{onClick:()=>se.id&&O(se.id),className:"p-2 bg-red-900/20 text-red-400 rounded-lg hover:bg-red-600 hover:text-white transition-colors",title:" ",children:l.jsx(wi,{className:"w-4 h-4"})})]},se.id))}):S&&!me&&l.jsxs("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:[l.jsx(Gu,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),l.jsx("p",{children:"      "})]})]})]}),A&&l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:l.jsxs("div",{className:"bg-gray-900 rounded-3xl p-8 max-w-sm w-full border border-gray-700 shadow-2xl text-center transform scale-100",children:[l.jsx("div",{className:"w-16 h-16 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-red-500/20",children:l.jsx(dx,{className:"w-8 h-8 text-red-500"})}),l.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),l.jsx("p",{className:"text-gray-400 mb-8 text-sm",children:"            ."}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:ge,disabled:D,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:D?l.jsx(bt,{className:"w-4 h-4 animate-spin"}):" "}),l.jsx("button",{onClick:()=>O(null),disabled:D,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-colors",children:""})]})]})})]})},pO=[{id:"handouts",title:" ",icon:ss,color:"text-blue-400",bg:"bg-blue-900/20"},{id:"worksheets",title:" ",icon:Do,color:"text-emerald-400",bg:"bg-emerald-900/20"},{id:"exams",title:"  ",icon:ns,color:"text-purple-400",bg:"bg-purple-900/20"}],xO=[{id:"English",title:"  (English)"},{id:"Math",title:""},{id:"Science",title:""}],yO=({onBack:r,onNavigate:e})=>{const{user:t}=rr(),[s,i]=V.useState(""),[c,d]=V.useState(""),[f,g]=V.useState(""),[x,v]=V.useState(""),[w,N]=V.useState(""),[C,M]=V.useState(!1),[J,B]=V.useState(!1),[he,oe]=V.useState(""),[le,_e]=V.useState([]),[me,G]=V.useState(!1),[S,j]=V.useState(!1),[A,O]=V.useState(null),[D,L]=V.useState(!1),I=async()=>{if(!s||!c||!f||!x||!w){alert("    ");return}if(!w.startsWith("http")){alert("        http  https");return}M(!0);try{await as(it(Le,"study_materials"),{grade:s,subject:c,category:f,title:x,url:w,size:"Drive Link",teacherName:(t==null?void 0:t.displayName)||"",teacherId:t==null?void 0:t.uid,createdAt:Pn()}),await as(it(Le,"notifications"),{recipientId:"all",title:"  ",message:`   : ${x}  ${s}`,type:"file",createdAt:Pn(),read:!1}),B(!0),setTimeout(()=>{B(!1),v(""),N("")},2e3)}catch(Z){console.error("Error saving file:",Z),alert("   ")}finally{M(!1)}},de=async()=>{if(he.trim()&&t!=null&&t.uid){G(!0),j(!0),_e([]);try{const Z=Ln(it(Le,"study_materials"),In("title",">=",he),In("title","<=",he+"")),se=await rs(Z),Se=[];se.forEach(k=>{const U=k.data();U.teacherId===t.uid&&Se.push({id:k.id,...U})}),_e(Se)}catch(Z){console.error("Error searching files:",Z)}finally{G(!1)}}},ge=async()=>{if(A){L(!0);try{await Lm(Hn(Le,"study_materials",A)),_e(Z=>Z.filter(se=>se.id!==A)),O(null)}catch(Z){console.error(Z),alert("   ")}finally{L(!1)}}},F=()=>{r?r():e("PROFILE")},ce=Z=>Z?(Z.toDate?Z.toDate():new Date(Z.seconds*1e3)).toLocaleDateString("ar-EG"):"";return l.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[l.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:l.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[l.jsx("button",{onClick:F,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:l.jsx(qt,{className:"w-5 h-5"})}),l.jsx("span",{onClick:F,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),l.jsx("span",{className:"text-gray-600",children:"/"}),l.jsx("span",{className:"font-bold text-white",children:"  "})]})}),l.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[l.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8 mb-12",children:[l.jsxs("h2",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[l.jsx(k2,{className:"w-6 h-6 text-blue-500"}),"  "]}),J?l.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[l.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:l.jsx(bn,{className:"w-10 h-10 text-green-400"})}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),l.jsx("p",{className:"text-gray-400 mb-6",children:"       ."}),l.jsx("button",{onClick:()=>B(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[l.jsx(fa,{className:"w-4 h-4 text-blue-500"})," "]}),l.jsxs("select",{value:s,onChange:Z=>i(Z.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[l.jsx("option",{value:"",children:" "}),[5,6,7,8,9,10,11,12].map(Z=>l.jsxs("option",{value:Z.toString(),children:[" ",Z]},Z)),l.jsx("option",{value:"English Major - QOU",children:"  "})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[l.jsx(ns,{className:"w-4 h-4 text-blue-500"}),""]}),l.jsxs("select",{value:c,onChange:Z=>d(Z.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[l.jsx("option",{value:"",children:" "}),xO.map(Z=>l.jsx("option",{value:Z.id,children:Z.title},Z.id))]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"  ()"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:pO.map(Z=>l.jsxs("button",{onClick:()=>g(Z.id),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all text-center h-full ${f===Z.id?"bg-blue-900/30 border-blue-500 text-blue-300 ring-1 ring-blue-500":"bg-gray-800 border-gray-700 text-gray-300 hover:border-blue-500/50"}`,children:[l.jsx("div",{className:`p-2 rounded-lg ${Z.bg}`,children:l.jsx(Z.icon,{className:`w-6 h-6 ${Z.color}`})}),l.jsx("span",{className:"font-bold text-sm",children:Z.title})]},Z.id))})]}),l.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),l.jsx("input",{type:"text",value:x,onChange:Z=>v(Z.target.value),placeholder:":    -  ",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[l.jsx(E5,{className:"w-4 h-4 text-blue-500"}),"  (Google Drive Link)"]}),l.jsx("input",{type:"url",value:w,onChange:Z=>N(Z.target.value),placeholder:"https://drive.google.com/file/d/...",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-medium text-blue-400 bg-gray-800 transition-all text-left",dir:"ltr"}),l.jsx("p",{className:"text-xs text-gray-500 mt-2",children:'    " " (Anyone with the link)    .'})]})]}),l.jsx("div",{className:"pt-4 flex justify-end",children:l.jsxs("button",{onClick:I,disabled:C,className:"w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white px-10 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2 transform hover:-translate-y-1",children:[C?l.jsx(bt,{className:"w-5 h-5 animate-spin"}):l.jsx(gi,{className:"w-5 h-5"}),"  "]})})]})]}),l.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:[l.jsxs("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[l.jsx(wi,{className:"w-6 h-6 text-red-500"}),"  ()"]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",placeholder:"    ...",value:he,onChange:Z=>oe(Z.target.value),onKeyDown:Z=>Z.key==="Enter"&&de(),className:"w-full px-5 py-3 pl-12 rounded-xl bg-gray-800 border border-gray-700 focus:border-red-500 outline-none text-white font-bold"}),l.jsx("button",{onClick:de,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-700 hover:bg-gray-600 p-2 rounded-lg text-gray-300 transition-colors",children:me?l.jsx(bt,{className:"w-4 h-4 animate-spin"}):l.jsx(Us,{className:"w-4 h-4"})})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-2 mr-1",children:"      .        ."})]}),le.length>0?l.jsx("div",{className:"space-y-3 animate-fade-in",children:le.map(Z=>l.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl border border-gray-700 flex items-center justify-between group hover:border-red-500/50 transition-all",children:[l.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-900/20 flex items-center justify-center text-blue-400 shrink-0",children:l.jsx(ss,{className:"w-5 h-5"})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("h4",{className:"font-bold text-white truncate mb-1",children:Z.title}),l.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[l.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:Z.subject}),l.jsx("span",{children:Z.grade==="English Major - QOU"?"":` ${Z.grade}`}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(qu,{className:"w-3 h-3"})," ",ce(Z.createdAt)]})]})]})]}),l.jsx("button",{onClick:()=>Z.id&&O(Z.id),className:"p-2 bg-red-900/20 text-red-400 rounded-lg hover:bg-red-600 hover:text-white transition-colors",title:" ",children:l.jsx(wi,{className:"w-4 h-4"})})]},Z.id))}):S&&!me&&l.jsxs("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:[l.jsx(ss,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),l.jsx("p",{children:"      "})]})]})]}),A&&l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:l.jsxs("div",{className:"bg-gray-900 rounded-3xl p-8 max-w-sm w-full border border-gray-700 shadow-2xl text-center transform scale-100",children:[l.jsx("div",{className:"w-16 h-16 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-red-500/20",children:l.jsx(dx,{className:"w-8 h-8 text-red-500"})}),l.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),l.jsx("p",{className:"text-gray-400 mb-8 text-sm",children:"            ."}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:ge,disabled:D,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:D?l.jsx(bt,{className:"w-4 h-4 animate-spin"}):" "}),l.jsx("button",{onClick:()=>O(null),disabled:D,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-colors",children:""})]})]})})]})},mp=({title:r,subtitle:e,description:t,icon:s,secondaryIcon:i,buttonText:c,onClick:d,theme:f,direction:g,isLast:x=!1})=>{const w={emerald:{gradient:"from-emerald-500/20 to-teal-500/20",border:"border-emerald-500/20",text:"text-emerald-400",bgIcon:"bg-emerald-500/10",button:"bg-gradient-to-r from-emerald-600 to-teal-600 shadow-emerald-500/20",glow:"bg-emerald-500/30",divider:"from-transparent via-emerald-500 to-transparent"},violet:{gradient:"from-violet-500/20 to-purple-500/20",border:"border-violet-500/20",text:"text-violet-400",bgIcon:"bg-violet-500/10",button:"bg-gradient-to-r from-violet-600 to-purple-600 shadow-violet-500/20",glow:"bg-violet-500/30",divider:"from-transparent via-violet-500 to-transparent"},sky:{gradient:"from-sky-500/20 to-blue-500/20",border:"border-sky-500/20",text:"text-sky-400",bgIcon:"bg-sky-500/10",button:"bg-gradient-to-r from-sky-600 to-blue-600 shadow-sky-500/20",glow:"bg-sky-500/30",divider:"from-transparent via-sky-500 to-transparent"}}[f],N=g==="rtl"?"md:flex-row":"md:flex-row-reverse",C=g==="rtl"?"md:text-right":"md:text-left";return l.jsxs("div",{className:"relative py-16 md:py-28 overflow-hidden group",children:[l.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-12 relative z-10",children:l.jsxs("div",{className:`flex flex-col items-center gap-10 md:gap-20 ${N}`,children:[l.jsxs("div",{className:"w-full md:w-1/2 flex justify-center relative",children:[l.jsx("div",{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 md:w-96 md:h-96 rounded-full blur-[60px] md:blur-[100px] opacity-40 animate-pulse ${w.glow}`}),l.jsxs("div",{className:`relative w-72 h-72 md:w-full md:max-w-md md:aspect-square rounded-[2.5rem] md:rounded-[3rem] border ${w.border} bg-gray-900/60 backdrop-blur-xl shadow-2xl flex items-center justify-center overflow-hidden group-hover:scale-[1.02] transition-transform duration-700`,children:[l.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"}),l.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-6",children:[l.jsx("div",{className:`p-6 md:p-8 rounded-3xl ${w.bgIcon} border ${w.border} shadow-[0_0_50px_rgba(0,0,0,0.5)] backdrop-blur-sm transform rotate-3 group-hover:rotate-0 transition-all duration-500`,children:l.jsx(s,{className:`w-20 h-20 md:w-32 md:h-32 ${w.text} drop-shadow-lg`,strokeWidth:1.5})}),l.jsx("div",{className:`absolute -bottom-10 -right-10 md:-bottom-12 md:-right-12 p-4 md:p-5 rounded-2xl bg-gray-800/80 border ${w.border} shadow-xl backdrop-blur-md transform -rotate-6 group-hover:rotate-0 transition-all duration-700 delay-100`,children:l.jsx(i,{className:`w-8 h-8 md:w-10 md:h-10 ${w.text}`})})]})]})]}),l.jsxs("div",{className:`w-full md:w-1/2 text-center ${C} space-y-6 md:space-y-8`,children:[l.jsxs("div",{className:"space-y-3 md:space-y-4",children:[l.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 md:px-4 md:py-1.5 rounded-full bg-gray-900/50 border ${w.border} ${w.text} text-xs md:text-sm font-bold shadow-sm backdrop-blur-md`,children:[l.jsx(i,{className:"w-3.5 h-3.5 md:w-4 md:h-4"}),l.jsx("span",{children:e})]}),l.jsx("h2",{className:"text-3xl md:text-5xl lg:text-6xl font-black text-white leading-tight drop-shadow-xl",children:r})]}),l.jsx("p",{className:"text-base md:text-xl text-gray-300 leading-relaxed md:leading-loose font-medium opacity-90 max-w-xl mx-auto md:mx-0",children:t}),l.jsx("div",{className:"pt-2 md:pt-4",children:l.jsxs("button",{onClick:d,className:`w-full md:w-auto inline-flex justify-center items-center gap-3 ${w.button} text-white text-base md:text-lg font-bold px-8 py-4 rounded-2xl shadow-lg hover:shadow-2xl transition-all transform hover:-translate-y-1 active:scale-95 border-t border-white/10`,children:[c,l.jsx(qt,{className:`w-5 h-5 ${g==="rtl"?"rotate-180":""}`})]})})]})]})}),!x&&l.jsxs("div",{className:"absolute bottom-0 left-0 w-full flex justify-center items-center",children:[l.jsx("div",{className:`w-full h-px bg-gradient-to-r ${w.divider} opacity-30`}),l.jsx("div",{className:`absolute w-3/4 h-1 bg-gradient-to-r ${w.divider} blur-sm opacity-50`}),l.jsx("div",{className:"absolute w-1/2 h-0.5 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_20px_rgba(16,185,129,0.8)] opacity-80"})]})]})},bO=({onNavigate:r})=>l.jsxs("div",{className:"bg-gray-950 relative z-10",children:[l.jsx(mp,{theme:"emerald",direction:"rtl",title:" ..  ",subtitle:"  ",description:"       !              .           .",icon:C2,secondaryIcon:bn,buttonText:"  ",onClick:()=>r("QUIZZES")}),l.jsx(mp,{theme:"violet",direction:"ltr",title:"   ",subtitle:" ",description:"         .                     .",icon:Bu,secondaryIcon:H4,buttonText:" ",onClick:()=>r("LESSONS_EXPLANATIONS")}),l.jsx(mp,{theme:"sky",direction:"rtl",title:"  ",subtitle:"   ",description:"    .               .            .",icon:Do,secondaryIcon:Z4,buttonText:" ",onClick:()=>r("LESSONS"),isLast:!0})]}),vO=()=>l.jsx("section",{className:"relative w-full overflow-hidden bg-gray-950",children:l.jsxs("div",{className:"w-full h-[650px] md:h-[900px] relative group",children:[l.jsxs("div",{className:"absolute inset-0 z-0",children:[l.jsx("img",{src:"https://lh3.googleusercontent.com/d/11PvY6sdTvurXqkNuWjoEpYTcM8FUHOB0",alt:".    -  ",className:"w-full h-full object-cover object-top transition-transform duration-1000 group-hover:scale-105"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-gray-900/40 to-transparent"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/90 via-transparent to-gray-950/90"})]}),l.jsx("div",{className:"absolute bottom-0 left-0 w-full p-8 md:p-24 flex flex-col items-center text-center z-20",children:l.jsxs("div",{className:"max-w-5xl mx-auto transform translate-y-0 transition-all duration-700",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h2",{className:"text-5xl md:text-8xl font-black text-white mb-6 drop-shadow-2xl tracking-tight",children:".   "}),l.jsx("div",{className:"h-2 w-40 bg-emerald-500 rounded-full mx-auto mb-8 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),l.jsx("p",{className:"text-2xl md:text-4xl text-emerald-400 font-bold drop-shadow-lg tracking-wide",children:"   "})]}),l.jsx("div",{className:"relative",children:l.jsx("p",{className:"text-gray-200 text-xl md:text-3xl leading-loose font-medium relative z-10 px-4 max-w-4xl mx-auto drop-shadow-md",children:"          .              ."})})]})})]})}),wO=({onLoginClick:r})=>l.jsxs("section",{className:"py-32 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950 via-emerald-950/40 to-gray-950"}),l.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"}),l.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-emerald-500/50 to-transparent"}),l.jsxs("div",{className:"max-w-5xl mx-auto px-6 relative z-10 text-center",children:[l.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-sm font-bold mb-8 animate-pulse",children:[l.jsx(dA,{className:"w-4 h-4"}),l.jsx("span",{children:"  "})]}),l.jsxs("h2",{className:"text-5xl md:text-7xl font-black text-white mb-8 leading-tight tracking-tight drop-shadow-2xl",children:["  ",l.jsx("br",{}),l.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400",children:" "})]}),l.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto mb-12 leading-relaxed font-medium",children:"      .         ."}),l.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:l.jsxs("button",{onClick:r,className:"w-full sm:w-auto bg-white text-emerald-950 px-10 py-5 rounded-2xl font-black text-xl hover:bg-emerald-50 transition-all shadow-[0_0_40px_rgba(255,255,255,0.2)] hover:shadow-[0_0_60px_rgba(16,185,129,0.4)] transform hover:-translate-y-1 flex items-center justify-center gap-3",children:["  ",l.jsx(qt,{className:"w-6 h-6"})]})})]})]}),_O=()=>l.jsxs("section",{className:"relative w-full min-h-[800px] flex items-center bg-gray-950 overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 z-0",children:[l.jsx("img",{src:"https://lh3.googleusercontent.com/d/1ZcMqKedYcXUq7RPYqUGCRr2RsEA6F6JN",alt:"  ",className:"w-full h-full object-cover object-center opacity-30"}),l.jsx("div",{className:"absolute top-0 left-0 w-full h-64 bg-gradient-to-b from-gray-950 via-gray-950/80 to-transparent"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-full h-64 bg-gradient-to-t from-gray-950 via-gray-950/80 to-transparent"}),l.jsx("div",{className:"absolute inset-0 bg-gray-950/50"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/80 via-transparent to-gray-950/80"})]}),l.jsx("div",{className:"relative z-10 w-full py-24 px-6 md:px-12 flex flex-col justify-center h-full",children:l.jsxs("div",{className:"max-w-4xl mx-auto text-center transform translate-y-0 transition-all duration-700 animate-fade-in-up",children:[l.jsx("h2",{className:"text-4xl md:text-7xl font-black text-white mb-8 drop-shadow-2xl tracking-tight",children:" "}),l.jsx("div",{className:"h-1.5 w-32 bg-emerald-500 rounded-full mx-auto mb-12 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),l.jsxs("div",{className:"space-y-8 text-gray-100 font-medium leading-relaxed drop-shadow-lg",children:[l.jsx("p",{className:"text-2xl md:text-4xl font-black text-emerald-400 mb-6",children:" :   "}),l.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"            .                    ."}),l.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                         .        ."}),l.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                                      ."})]})]})})]}),Ry=()=>{const r=V.useRef(null);return V.useEffect(()=>{const e=r.current;if(!e)return;const t=e.getContext("2d");if(!t)return;let s,i=window.innerWidth,c=window.innerHeight;const d=i<768?150:400,f=.1,g=["255, 255, 255","50, 150, 255","255, 80, 80","80, 255, 120","255, 215, 0"];e.width=i,e.height=c;const x=[];for(let N=0;N<d;N++)x.push({x:Math.random()*i,y:Math.random()*c,z:Math.random()*i,size:Math.random()*2,color:g[Math.floor(Math.random()*g.length)],alpha:Math.random()});const v=()=>{i=window.innerWidth,c=window.innerHeight,e.width=i,e.height=c};window.addEventListener("resize",v);const w=()=>{t.clearRect(0,0,i,c),x.forEach(N=>{Math.random()>.99&&(N.alpha=Math.random()),N.y-=f*(N.size*.5),N.y<0&&(N.y=c,N.x=Math.random()*i),t.beginPath(),t.fillStyle=`rgba(${N.color}, ${N.alpha})`,t.arc(N.x,N.y,N.size,0,Math.PI*2),t.fill()}),s=requestAnimationFrame(w)};return w(),()=>{window.removeEventListener("resize",v),cancelAnimationFrame(s)}},[]),l.jsx("canvas",{ref:r,className:"fixed inset-0 pointer-events-none z-0",style:{opacity:1}})},NO=({onBack:r})=>{const e=[{icon:C2,title:" ",desc:"              ."},{icon:cA,title:" 24/7",desc:"                 ."},{icon:lm,title:"  (XP)",desc:"  !    (XP)         ."},{icon:ss,title:" ",desc:"           ."}];return l.jsxs("div",{className:"min-h-screen bg-gray-950 relative overflow-hidden text-gray-100",children:[l.jsxs("div",{className:"absolute inset-0 z-0",children:[l.jsx(Ry,{}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/90 via-gray-900/60 to-gray-950 pointer-events-none"}),l.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-20"})]}),l.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[l.jsx("div",{className:"border-b border-white/10 py-6 px-4 sticky top-0 z-30 backdrop-blur-md bg-gray-950/30",children:l.jsxs("div",{className:"max-w-3xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[l.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:l.jsx(qt,{className:"w-5 h-5"})}),l.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),l.jsx("span",{className:"text-gray-600",children:"/"}),l.jsx("span",{className:"font-bold text-white",children:" "})]})}),l.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-12 pb-20",children:[l.jsxs("div",{className:"text-center mb-16 animate-fade-in-up",children:[l.jsxs("div",{className:"inline-flex items-center justify-center p-5 bg-emerald-500/10 backdrop-blur-xl rounded-full mb-8 border border-emerald-500/30 shadow-[0_0_40px_rgba(16,185,129,0.3)] relative group",children:[l.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 rounded-full blur-xl group-hover:blur-2xl transition-all"}),l.jsx(vl,{className:"w-12 h-12 text-emerald-400 fill-emerald-400 animate-pulse relative z-10"})]}),l.jsxs("h1",{className:"text-5xl md:text-6xl font-black text-white mb-6 leading-tight drop-shadow-2xl",children:["   ",l.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-300",children:""}),""]}),l.jsx("p",{className:"text-xl text-gray-200 leading-relaxed max-w-2xl mx-auto font-medium drop-shadow-md",children:"                     ."})]}),l.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 shadow-2xl border border-white/10 mb-16 relative overflow-hidden group hover:bg-white/10 transition-all duration-500",children:[l.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-600/20 rounded-full blur-[80px] -mr-16 -mt-16 pointer-events-none"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-purple-600/20 rounded-full blur-[80px] -ml-16 -mb-16 pointer-events-none"}),l.jsxs("h2",{className:"text-3xl font-black text-white mb-8 flex items-center gap-3 relative z-10",children:[l.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl border border-blue-500/30",children:l.jsx(ux,{className:"w-8 h-8 text-blue-400"})})," "]}),l.jsxs("div",{className:"space-y-6 text-gray-200 font-medium leading-loose text-lg relative z-10",children:[l.jsx("p",{children:'  ""         .                    .'}),l.jsxs("p",{children:["       ",l.jsx("span",{className:"text-white font-bold border-b-2 border-emerald-500 shadow-[0_4px_20px_-5px_rgba(16,185,129,0.5)]",children:"  "}),".                ."]})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-16",children:e.map((t,s)=>l.jsxs("div",{className:"bg-gray-900/40 backdrop-blur-md p-6 rounded-3xl border border-white/10 flex flex-col gap-4 hover:border-emerald-500/40 hover:bg-gray-900/60 transition-all group hover:-translate-y-2 shadow-lg",children:[l.jsx("div",{className:"bg-gray-800/50 p-4 rounded-2xl w-fit group-hover:bg-emerald-900/30 transition-colors border border-white/5 group-hover:border-emerald-500/20",children:l.jsx(t.icon,{className:"w-8 h-8 text-gray-300 group-hover:text-emerald-400 transition-colors"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-emerald-300 transition-colors",children:t.title}),l.jsx("p",{className:"text-gray-400 text-sm leading-relaxed group-hover:text-gray-300",children:t.desc})]})]},s))}),l.jsxs("div",{className:"bg-gradient-to-br from-emerald-900/40 to-gray-900/40 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 border border-emerald-500/20 text-center shadow-2xl relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"}),l.jsx("h2",{className:"text-3xl font-black text-white mb-8 relative z-10",children:"  "}),l.jsxs("div",{className:"flex flex-col gap-4 relative z-10",children:[l.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[l.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:l.jsx(bn,{className:"w-6 h-6 text-emerald-400"})}),l.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"      ."})]}),l.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[l.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:l.jsx(bn,{className:"w-6 h-6 text-emerald-400"})}),l.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:" ."})]}),l.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[l.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:l.jsx(bn,{className:"w-6 h-6 text-emerald-400"})}),l.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"       ."})]})]})]}),l.jsx("div",{className:"mt-16 text-center",children:l.jsxs("p",{className:"text-gray-400 text-sm font-medium bg-gray-900/50 inline-block px-6 py-3 rounded-full border border-white/5 backdrop-blur-sm",children:["  ",l.jsx("span",{className:"text-emerald-400 font-black",children:"   "})]})})]})]})]})},EO=({onNavigate:r})=>l.jsxs("div",{className:"relative w-full py-20 overflow-hidden bg-gray-950 border-t border-white/5 border-b border-white/5",children:[l.jsx("div",{className:"absolute inset-0 z-0 opacity-100",children:l.jsx(Ry,{})}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950 via-transparent to-gray-950 z-0 pointer-events-none"}),l.jsxs("div",{className:"relative z-10 max-w-5xl mx-auto px-6 text-center",children:[l.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white/5 rounded-full mb-6 shadow-[0_0_30px_rgba(255,255,255,0.1)] border border-white/10 animate-pulse",children:l.jsx(vl,{className:"w-8 h-8 text-emerald-400 fill-emerald-400"})}),l.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-white mb-6 drop-shadow-2xl leading-tight",children:["   ",l.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300",children:""}),""]}),l.jsx("p",{className:"text-gray-300 text-xl md:text-2xl max-w-3xl mx-auto mb-10 leading-relaxed font-medium drop-shadow-md",children:"                ."}),l.jsxs("button",{onClick:r,className:"inline-flex items-center gap-3 bg-emerald-600 hover:bg-emerald-500 text-white text-lg font-bold px-10 py-4 rounded-2xl shadow-lg hover:shadow-[0_0_25px_rgba(16,185,129,0.5)] transition-all transform hover:-translate-y-1 border-b-4 border-emerald-800 hover:border-emerald-700 active:border-b-0 active:translate-y-1",children:[l.jsx("span",{children:" "}),l.jsx(qt,{className:"w-5 h-5"})]})]})]}),TO=({onBack:r,onNavigate:e})=>{const{user:t}=rr(),[s,i]=V.useState("INBOX"),[c,d]=V.useState([]),[f,g]=V.useState(""),[x,v]=V.useState(""),[w,N]=V.useState(""),[C,M]=V.useState(!1),[J,B]=V.useState(!1),[he,oe]=V.useState(""),[le,_e]=V.useState([]),[me,G]=V.useState(!1);V.useEffect(()=>{s==="COMPOSE"?S():j()},[s,t]);const S=async()=>{B(!0);try{const de=Ln(it(Le,"users"),In("role","==","student")),F=(await rs(de)).docs.map(ce=>({id:ce.id,...ce.data()}));d(F)}catch(de){console.error("Error fetching students",de)}finally{B(!1)}},j=async()=>{if(t){G(!0);try{const de=Ln(it(Le,"contact_messages"),In("teacherId","==",t.uid)),F=(await rs(de)).docs.map(ce=>({id:ce.id,...ce.data()}));F.sort((ce,Z)=>{var k,U;const se=((k=ce.createdAt)==null?void 0:k.seconds)||0;return(((U=Z.createdAt)==null?void 0:U.seconds)||0)-se}),_e(F)}catch(de){console.error("Error fetching inbox",de)}finally{G(!1)}}},A=async()=>{if(!x||!w){alert("    ");return}if(!f){alert("  ");return}M(!0);try{await as(it(Le,"notifications"),{recipientId:f,title:x,message:w,type:"message",senderName:(t==null?void 0:t.displayName)||"",senderId:t==null?void 0:t.uid,createdAt:Pn(),read:!1}),alert("   !"),v(""),N(""),g(""),oe("")}catch(de){console.error("Error sending message",de),alert("   ")}finally{M(!1)}},O=async de=>{if(window.confirm("      "))try{await Lm(Hn(Le,"contact_messages",de)),_e(ge=>ge.filter(F=>F.id!==de))}catch(ge){console.error(ge)}},D=async de=>{try{await Td(Hn(Le,"contact_messages",de),{read:!0}),_e(ge=>ge.map(F=>F.id===de?{...F,read:!0}:F))}catch(ge){console.error(ge)}},L=c.filter(de=>{const ge=de.displayName?de.displayName.toLowerCase():"",F=de.email?de.email.toLowerCase():"",ce=he.toLowerCase();return ge.includes(ce)||F.includes(ce)}),I=de=>de?(de.toDate?de.toDate():new Date(de.seconds*1e3)).toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(",",""):"";return l.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[l.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:l.jsxs("div",{className:"max-w-5xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[l.jsx("button",{onClick:()=>e("PROFILE"),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:l.jsx(qt,{className:"w-5 h-5"})}),l.jsx("span",{onClick:()=>e("PROFILE"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),l.jsx("span",{className:"text-gray-600",children:"/"}),l.jsx("span",{className:"font-bold text-white",children:""})]})}),l.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:l.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-xl border border-gray-700 overflow-hidden min-h-[600px] flex flex-col md:flex-row",children:[l.jsxs("div",{className:"w-full md:w-64 bg-gray-800/50 border-l border-gray-700 p-4 flex flex-col gap-2",children:[l.jsxs("button",{onClick:()=>i("INBOX"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${s==="INBOX"?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:[l.jsx(jr,{className:"w-5 h-5"})," ",le.some(de=>!de.read)&&l.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"})]}),l.jsxs("button",{onClick:()=>i("COMPOSE"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${s==="COMPOSE"?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:[l.jsx(ca,{className:"w-5 h-5"})," "]})]}),l.jsx("div",{className:"flex-1 p-6 md:p-8 overflow-y-auto",children:s==="COMPOSE"?l.jsxs("div",{className:"max-w-2xl mx-auto",children:[l.jsxs("h2",{className:"text-2xl font-black text-white mb-6 flex items-center gap-2",children:[l.jsx(ca,{className:"w-6 h-6 text-emerald-400"}),"  "]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:":"}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"flex gap-4",children:l.jsxs("label",{className:`flex items-center gap-2 cursor-pointer bg-gray-800 px-4 py-3 rounded-xl border transition-colors flex-1 ${f==="all"?"border-emerald-500 bg-emerald-900/20":"border-gray-700 hover:border-emerald-500"}`,children:[l.jsx("input",{type:"radio",name:"recipient",checked:f==="all",onChange:()=>g("all"),className:"w-4 h-4 accent-emerald-500"}),l.jsx("span",{className:"font-bold text-sm text-white",children:" "}),l.jsx(im,{className:"w-4 h-4 text-emerald-400 mr-auto"})]})}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:l.jsx(Us,{className:"h-4 w-4 text-gray-500"})}),l.jsx("input",{type:"text",placeholder:"    ...",value:he,onChange:de=>{oe(de.target.value),f==="all"&&g("")},className:"block w-full pr-10 pl-3 py-3 border border-gray-700 rounded-xl leading-5 bg-gray-800 text-gray-300 placeholder-gray-500 focus:outline-none focus:bg-gray-900 focus:border-emerald-500 transition duration-150 ease-in-out sm:text-sm font-bold"})]}),he&&l.jsx("div",{className:"max-h-40 overflow-y-auto bg-gray-800 border border-gray-700 rounded-xl custom-scrollbar",children:L.map(de=>l.jsxs("div",{onClick:()=>{g(de.id),oe(de.displayName)},className:`p-3 cursor-pointer flex items-center gap-3 hover:bg-gray-700 transition-colors ${f===de.id?"bg-emerald-900/20":""}`,children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center",children:de.avatar?l.jsx("img",{src:de.avatar,className:"w-full h-full rounded-full object-cover"}):l.jsx(Zn,{className:"w-4 h-4"})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-bold text-white",children:de.displayName}),l.jsx("div",{className:"text-xs text-gray-400",children:de.email})]}),f===de.id&&l.jsx(bn,{className:"w-4 h-4 text-emerald-500 mr-auto"})]},de.id))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:" "}),l.jsx("input",{type:"text",value:x,onChange:de=>v(de.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-700 bg-gray-800 text-white focus:border-emerald-500 outline-none font-bold",placeholder:":    "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:" "}),l.jsx("textarea",{value:w,onChange:de=>N(de.target.value),className:"w-full h-32 px-4 py-3 rounded-xl border border-gray-700 bg-gray-800 text-white focus:border-emerald-500 outline-none resize-none leading-relaxed",placeholder:"  ..."})]}),l.jsxs("button",{onClick:A,disabled:C,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2",children:[C?l.jsx(bt,{className:"w-5 h-5 animate-spin"}):l.jsx(ca,{className:"w-5 h-5"})," "]})]})]}):l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-2",children:[l.jsx(jr,{className:"w-6 h-6 text-emerald-400"})," "]}),l.jsx("button",{onClick:j,className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:l.jsx(am,{className:"w-5 h-5 text-gray-400"})})]}),me?l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsx(bt,{className:"w-8 h-8 animate-spin text-emerald-500"})}):le.length===0?l.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-500",children:[l.jsx(jr,{className:"w-16 h-16 mb-4 opacity-20"}),l.jsx("p",{children:"   "})]}):l.jsx("div",{className:"space-y-4 flex-1 overflow-y-auto custom-scrollbar pr-2",children:le.map(de=>l.jsxs("div",{className:`bg-gray-800 p-5 rounded-2xl border transition-all hover:border-emerald-500/30 relative overflow-hidden ${de.read?"border-gray-700":"border-emerald-500/50 bg-emerald-900/5"}`,children:[l.jsxs("div",{className:"flex flex-row items-start gap-4 relative z-10",children:[l.jsx("div",{className:`w-10 h-10 rounded-full shrink-0 flex items-center justify-center text-base font-bold shadow-md border-2 ${de.read?"bg-gray-700 border-gray-600 text-gray-400":"bg-emerald-600 border-emerald-500 text-white"}`,children:de.studentName?de.studentName.charAt(0).toUpperCase():l.jsx(Zn,{className:"w-5 h-5"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsxs("div",{children:[l.jsx("h4",{className:`font-bold text-base leading-tight ${de.read?"text-gray-300":"text-white"}`,children:de.studentName||""}),l.jsx("p",{className:"text-xs text-gray-500 font-mono mt-0.5",children:de.studentEmail})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-gray-900/50 px-3 py-1 rounded-full border border-gray-700/50",children:[l.jsx(ix,{className:"w-3 h-3 text-gray-500"}),l.jsx("span",{className:"text-[10px] font-bold text-gray-400 dir-ltr",children:I(de.createdAt)})]})]}),l.jsx("div",{className:"p-3 bg-gray-900/50 rounded-xl border border-gray-700/30 text-sm text-gray-300 leading-relaxed whitespace-pre-wrap",children:de.message}),l.jsxs("div",{className:"flex justify-end gap-3 mt-3",children:[!de.read&&l.jsxs("button",{onClick:()=>D(de.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20 text-xs font-bold transition-colors",children:[l.jsx(bn,{className:"w-3.5 h-3.5"})," "]}),l.jsxs("button",{onClick:()=>O(de.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-red-500/10 text-red-400 hover:bg-red-500/20 text-xs font-bold transition-colors",children:[l.jsx(wi,{className:"w-3.5 h-3.5"}),""]})]})]}),l.jsx("div",{className:"flex flex-col items-center justify-center gap-1 self-center opacity-30",children:l.jsx("div",{className:"w-8 h-10 border-2 border-gray-500 rounded-lg flex items-center justify-center",children:l.jsx(jr,{className:"w-4 h-4 text-gray-500"})})})]}),!de.read&&l.jsx("div",{className:"absolute top-0 right-0 w-1.5 h-full bg-emerald-500"})]},de.id))})]})})]})})]})},SO=({onBack:r,onNavigate:e})=>{const[t,s]=V.useState([]),[i,c]=V.useState(!0),[d,f]=V.useState("ALL");V.useEffect(()=>{g()},[]);const g=async()=>{c(!0);try{const N=Ln(it(Le,"reviews"),Ed("createdAt","desc")),M=(await rs(N)).docs.map(J=>({id:J.id,...J.data()}));s(M)}catch(N){console.error("Error fetching reviews:",N)}finally{c(!1)}},x=t.filter(N=>d==="ALL"?!0:d==="QUIZ"?N.type==="quiz":d==="EXPLANATION"?N.type==="explanation":!0),v=N=>N?(N.toDate?N.toDate():new Date(N.seconds*1e3)).toLocaleDateString("ar-EG"):"",w=t.length>0?(t.reduce((N,C)=>N+C.rating,0)/t.length).toFixed(1):"0.0";return l.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[l.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:l.jsxs("div",{className:"max-w-5xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[l.jsx("button",{onClick:()=>e("PROFILE"),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:l.jsx(qt,{className:"w-5 h-5"})}),l.jsx("span",{onClick:()=>e("PROFILE"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),l.jsx("span",{className:"text-gray-600",children:"/"}),l.jsx("span",{className:"font-bold text-white",children:" "})]})}),l.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[l.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-xl border border-gray-700 p-8 mb-8 flex flex-col md:flex-row items-center justify-between gap-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-16 h-16 bg-yellow-900/20 rounded-2xl flex items-center justify-center border border-yellow-500/20 text-yellow-400",children:l.jsx(vl,{className:"w-8 h-8 fill-yellow-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-black text-white",children:w}),l.jsx("p",{className:"text-gray-400 text-sm font-bold",children:"  "})]})]}),l.jsx("div",{className:"flex items-center gap-4",children:l.jsxs("div",{className:"text-center px-6 py-3 bg-gray-800 rounded-xl border border-gray-700",children:[l.jsx("span",{className:"block text-2xl font-bold text-white",children:t.length}),l.jsx("span",{className:"text-xs text-gray-400",children:" "})]})})]}),l.jsxs("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[l.jsx("button",{onClick:()=>f("ALL"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="ALL"?"bg-white text-gray-900":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:""}),l.jsx("button",{onClick:()=>f("QUIZ"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="QUIZ"?"bg-blue-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:" "}),l.jsx("button",{onClick:()=>f("EXPLANATION"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="EXPLANATION"?"bg-purple-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:" "})]}),l.jsx("div",{className:"bg-gray-900 rounded-3xl border border-gray-700 min-h-[400px] p-6 relative",children:i?l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx(bt,{className:"w-10 h-10 animate-spin text-emerald-500"})}):x.length===0?l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-500",children:[l.jsx(rm,{className:"w-16 h-16 mb-4 opacity-20"}),l.jsx("p",{className:"text-lg font-bold",children:"     "})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(N=>l.jsxs("div",{className:"bg-gray-800 p-5 rounded-2xl border border-gray-700 hover:border-gray-600 transition-all",children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsxs("div",{children:[l.jsxs("h4",{className:"font-bold text-white text-lg flex items-center gap-2",children:[N.studentName,l.jsx("span",{className:"text-xs font-normal text-gray-500 bg-gray-900 px-2 py-0.5 rounded-md border border-gray-700",children:v(N.createdAt)})]}),l.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[[...Array(5)].map((C,M)=>l.jsx(vl,{className:`w-3 h-3 ${M<Math.round(N.rating/2)?"text-yellow-400 fill-yellow-400":"text-gray-600"}`},M)),l.jsxs("span",{className:"text-xs text-yellow-500 font-bold mr-1",children:["(",N.rating,"/10)"]})]})]}),l.jsx("span",{className:`px-2 py-1 rounded-lg text-[10px] font-bold ${N.type==="quiz"?"bg-blue-900/30 text-blue-300 border border-blue-900":"bg-purple-900/30 text-purple-300 border border-purple-900"}`,children:N.type==="quiz"?"":""})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:" :"}),l.jsx("p",{className:"text-emerald-400 font-bold text-sm line-clamp-1",children:N.targetTitle})]}),N.comment?l.jsx("div",{className:"bg-gray-900/50 p-3 rounded-xl border border-gray-700/50",children:l.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:['"',N.comment,'"']})}):l.jsx("p",{className:"text-gray-600 text-xs italic",children:"   "})]},N.id))})})]})]})};function jO(){const[r,e]=V.useState("HOME"),[t,s]=V.useState(!1),[i,c]=V.useState(!1),d=V.useRef({}),f=V.useRef(!1),{logout:g}=rr();V.useEffect(()=>{"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.scrollTo(0,0),window.history.replaceState({view:"HOME"},"","");const w=N=>{N.state&&N.state.view?(f.current=!0,e(N.state.view)):(f.current=!0,e("HOME"))};return window.addEventListener("popstate",w),()=>window.removeEventListener("popstate",w)},[]),V.useEffect(()=>{if(f.current){const w=d.current[r]||0;setTimeout(()=>window.scrollTo(0,w),10)}else window.scrollTo(0,0)},[r]);const x=(w,N=!1)=>{if(w===r){w==="HOME"&&window.scrollTo({top:0,behavior:"smooth"});return}d.current[r]=window.scrollY,f.current=N,window.history.pushState({view:w},"",""),e(w)},v=async()=>{c(!0),setTimeout(async()=>{await g(),c(!1),x("HOME")},1e3)};return l.jsxs("div",{className:"min-h-screen flex flex-col relative transition-colors duration-500 bg-gray-950 text-gray-100 selection:bg-emerald-500/30",children:[r==="HOME"&&l.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden bg-gray-950",children:[l.jsx(Ry,{}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/20 via-transparent to-gray-950/40"}),l.jsx("div",{className:"absolute inset-0 opacity-[0.03] bg-[url('https://www.transparenttextures.com/patterns/noise.png')]"})]}),i&&l.jsx("div",{className:"fixed inset-0 z-[200] bg-emerald-900/90 backdrop-blur-sm flex items-center justify-center animate-fade-in",children:l.jsx("div",{className:"text-white text-2xl font-bold animate-bounce",children:"  ..."})}),l.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[l.jsx(FD,{onLoginClick:()=>s(!0),onNavigate:w=>x(w),onLogoutClick:v}),l.jsxs("main",{className:`flex-grow ${r!=="HOME"?"pt-24":""}`,children:[r==="HOME"&&l.jsxs(l.Fragment,{children:[l.jsx(HD,{onStartQuiz:()=>x("QUIZZES"),onLoginClick:()=>s(!0),onNavigate:w=>x(w)}),l.jsx($D,{onNavigate:w=>x(w)}),l.jsx(cO,{onLoginClick:()=>s(!0)}),l.jsx(uO,{}),l.jsx(EO,{onNavigate:()=>x("PLATFORM_DEFINITION")}),l.jsxs("div",{className:"relative w-full h-px bg-gray-800/50 my-0 overflow-visible z-20",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-emerald-500 to-transparent h-[1px] opacity-60"}),l.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-1/2 h-[3px] bg-gradient-to-r from-transparent via-emerald-400 to-transparent blur-[2px] opacity-80"})]}),l.jsx(vO,{}),l.jsx(wO,{onLoginClick:()=>s(!0)}),l.jsx("div",{className:"w-full h-1 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_35px_rgba(16,185,129,1)] relative z-20 opacity-100"}),l.jsx(_O,{}),l.jsx("div",{className:"w-full h-0.5 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_30px_rgba(16,185,129,1)] relative z-20 opacity-80"}),l.jsx(bO,{onNavigate:w=>x(w)})]}),r==="ABOUT_PLATFORM"&&l.jsx(sO,{onBack:()=>x("HOME",!0)}),r==="PLATFORM_DEFINITION"&&l.jsx(NO,{onBack:()=>x("HOME",!0)}),r==="TEACHER_CV"&&l.jsx(nO,{onBack:()=>x("HOME",!0)}),r==="PROFILE"&&l.jsx(JD,{onNavigate:w=>x(w)}),r==="TEACHER_DASHBOARD"&&l.jsx(QD,{}),r==="QUESTION_BANK"&&l.jsx(dO,{onBack:()=>x("HOME",!0)}),r==="TEACHER_EXPLANATIONS"&&l.jsx(gO,{onNavigate:w=>x(w),onBack:()=>x("PROFILE",!0)}),r==="TEACHER_UPLOAD_FILES"&&l.jsx(yO,{onNavigate:w=>x(w),onBack:()=>x("PROFILE",!0)}),r==="QUIZZES"&&l.jsx(ZD,{onBack:()=>x("HOME",!0)}),r==="LESSONS"&&l.jsx(rO,{onBack:()=>x("HOME",!0)}),r==="LESSONS_EXPLANATIONS"&&l.jsx(mO,{onBack:()=>x("HOME",!0)}),r==="CONTACT_TEACHER"&&l.jsx(oO,{onBack:()=>x("HOME",!0)}),r==="TEACHER_CORRESPONDENCE"&&l.jsx(TO,{onNavigate:w=>x(w)}),r==="TEACHER_REVIEWS"&&l.jsx(SO,{onNavigate:w=>x(w)})]}),l.jsx(KD,{isOpen:t,onClose:()=>s(!1)}),l.jsx("footer",{className:"bg-gray-950 border-t border-white/5 py-12 relative z-20",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[l.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[l.jsx("div",{className:"w-10 h-10 bg-white/5 rounded-full flex items-center justify-center border border-white/10",children:l.jsx("img",{src:"https://lh3.googleusercontent.com/d/13x8Gorb7y4H2qcQ1LVJtHY9-RoUhxg2z",alt:"Logo",className:"w-6 h-6 rounded-full"})}),l.jsx("span",{className:"text-xl font-black text-white",children:" "})]}),l.jsxs("p",{className:"text-gray-500 text-sm",children:[" ",new Date().getFullYear(),"   .     ."]})]})})]})]})}class AO extends ax.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){return this.state.hasError?l.jsx(CS,{}):this.props.children}}const kS=document.getElementById("root");if(!kS)throw new Error("Could not find root element to mount to");const IO=b4.createRoot(kS);IO.render(l.jsx(ax.StrictMode,{children:l.jsx(AO,{children:l.jsx(qD,{children:l.jsx(jO,{})})})}));
