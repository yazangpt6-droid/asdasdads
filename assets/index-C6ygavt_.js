(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function L1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Hm={exports:{}},fc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rb;function EE(){if(Rb)return fc;Rb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:r,type:a,key:f,ref:o!==void 0?o:null,props:u}}return fc.Fragment=e,fc.jsx=n,fc.jsxs=n,fc}var kb;function jE(){return kb||(kb=1,Hm.exports=EE()),Hm.exports}var i=jE(),Fm={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Db;function TE(){if(Db)return Pe;Db=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),E=Symbol.iterator;function O(D){return D===null||typeof D!="object"?null:(D=E&&D[E]||D["@@iterator"],typeof D=="function"?D:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ne=Object.assign,Q={};function ce(D,Y,P){this.props=D,this.context=Y,this.refs=Q,this.updater=P||z}ce.prototype.isReactComponent={},ce.prototype.setState=function(D,Y){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,Y,"setState")},ce.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function fe(){}fe.prototype=ce.prototype;function oe(D,Y,P){this.props=D,this.context=Y,this.refs=Q,this.updater=P||z}var we=oe.prototype=new fe;we.constructor=oe,ne(we,ce.prototype),we.isPureReactComponent=!0;var he=Array.isArray;function B(){}var S={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function A(D,Y,P){var W=P.ref;return{$$typeof:r,type:D,key:Y,ref:W!==void 0?W:null,props:P}}function R(D,Y){return A(D.type,Y,D.props)}function I(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function L(D){var Y={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(P){return Y[P]})}var C=/\/+/g;function ie(D,Y){return typeof D=="object"&&D!==null&&D.key!=null?L(""+D.key):Y.toString(36)}function de(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(B,B):(D.status="pending",D.then(function(Y){D.status==="pending"&&(D.status="fulfilled",D.value=Y)},function(Y){D.status==="pending"&&(D.status="rejected",D.reason=Y)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function q(D,Y,P,W,xe){var Ae=typeof D;(Ae==="undefined"||Ae==="boolean")&&(D=null);var Ue=!1;if(D===null)Ue=!0;else switch(Ae){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(D.$$typeof){case r:case e:Ue=!0;break;case _:return Ue=D._init,q(Ue(D._payload),Y,P,W,xe)}}if(Ue)return xe=xe(D),Ue=W===""?"."+ie(D,0):W,he(xe)?(P="",Ue!=null&&(P=Ue.replace(C,"$&/")+"/"),q(xe,Y,P,"",function(Et){return Et})):xe!=null&&(I(xe)&&(xe=R(xe,P+(xe.key==null||D&&D.key===xe.key?"":(""+xe.key).replace(C,"$&/")+"/")+Ue)),Y.push(xe)),1;Ue=0;var rt=W===""?".":W+":";if(he(D))for(var Ce=0;Ce<D.length;Ce++)W=D[Ce],Ae=rt+ie(W,Ce),Ue+=q(W,Y,P,Ae,xe);else if(Ce=O(D),typeof Ce=="function")for(D=Ce.call(D),Ce=0;!(W=D.next()).done;)W=W.value,Ae=rt+ie(W,Ce++),Ue+=q(W,Y,P,Ae,xe);else if(Ae==="object"){if(typeof D.then=="function")return q(de(D),Y,P,W,xe);throw Y=String(D),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function le(D,Y,P){if(D==null)return D;var W=[],xe=0;return q(D,W,"","",function(Ae){return Y.call(P,Ae,xe++)}),W}function Z(D){if(D._status===-1){var Y=D._result;Y=Y(),Y.then(function(P){(D._status===0||D._status===-1)&&(D._status=1,D._result=P)},function(P){(D._status===0||D._status===-1)&&(D._status=2,D._result=P)}),D._status===-1&&(D._status=0,D._result=Y)}if(D._status===1)return D._result.default;throw D._result}var Ee=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},Ie={map:le,forEach:function(D,Y,P){le(D,function(){Y.apply(this,arguments)},P)},count:function(D){var Y=0;return le(D,function(){Y++}),Y},toArray:function(D){return le(D,function(Y){return Y})||[]},only:function(D){if(!I(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Pe.Activity=w,Pe.Children=Ie,Pe.Component=ce,Pe.Fragment=n,Pe.Profiler=o,Pe.PureComponent=oe,Pe.StrictMode=a,Pe.Suspense=x,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(D){return S.H.useMemoCache(D)}},Pe.cache=function(D){return function(){return D.apply(null,arguments)}},Pe.cacheSignal=function(){return null},Pe.cloneElement=function(D,Y,P){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var W=ne({},D.props),xe=D.key;if(Y!=null)for(Ae in Y.key!==void 0&&(xe=""+Y.key),Y)!T.call(Y,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&Y.ref===void 0||(W[Ae]=Y[Ae]);var Ae=arguments.length-2;if(Ae===1)W.children=P;else if(1<Ae){for(var Ue=Array(Ae),rt=0;rt<Ae;rt++)Ue[rt]=arguments[rt+2];W.children=Ue}return A(D.type,xe,W)},Pe.createContext=function(D){return D={$$typeof:f,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:u,_context:D},D},Pe.createElement=function(D,Y,P){var W,xe={},Ae=null;if(Y!=null)for(W in Y.key!==void 0&&(Ae=""+Y.key),Y)T.call(Y,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(xe[W]=Y[W]);var Ue=arguments.length-2;if(Ue===1)xe.children=P;else if(1<Ue){for(var rt=Array(Ue),Ce=0;Ce<Ue;Ce++)rt[Ce]=arguments[Ce+2];xe.children=rt}if(D&&D.defaultProps)for(W in Ue=D.defaultProps,Ue)xe[W]===void 0&&(xe[W]=Ue[W]);return A(D,Ae,xe)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(D){return{$$typeof:g,render:D}},Pe.isValidElement=I,Pe.lazy=function(D){return{$$typeof:_,_payload:{_status:-1,_result:D},_init:Z}},Pe.memo=function(D,Y){return{$$typeof:p,type:D,compare:Y===void 0?null:Y}},Pe.startTransition=function(D){var Y=S.T,P={};S.T=P;try{var W=D(),xe=S.S;xe!==null&&xe(P,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(B,Ee)}catch(Ae){Ee(Ae)}finally{Y!==null&&P.types!==null&&(Y.types=P.types),S.T=Y}},Pe.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Pe.use=function(D){return S.H.use(D)},Pe.useActionState=function(D,Y,P){return S.H.useActionState(D,Y,P)},Pe.useCallback=function(D,Y){return S.H.useCallback(D,Y)},Pe.useContext=function(D){return S.H.useContext(D)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(D,Y){return S.H.useDeferredValue(D,Y)},Pe.useEffect=function(D,Y){return S.H.useEffect(D,Y)},Pe.useEffectEvent=function(D){return S.H.useEffectEvent(D)},Pe.useId=function(){return S.H.useId()},Pe.useImperativeHandle=function(D,Y,P){return S.H.useImperativeHandle(D,Y,P)},Pe.useInsertionEffect=function(D,Y){return S.H.useInsertionEffect(D,Y)},Pe.useLayoutEffect=function(D,Y){return S.H.useLayoutEffect(D,Y)},Pe.useMemo=function(D,Y){return S.H.useMemo(D,Y)},Pe.useOptimistic=function(D,Y){return S.H.useOptimistic(D,Y)},Pe.useReducer=function(D,Y,P){return S.H.useReducer(D,Y,P)},Pe.useRef=function(D){return S.H.useRef(D)},Pe.useState=function(D){return S.H.useState(D)},Pe.useSyncExternalStore=function(D,Y,P){return S.H.useSyncExternalStore(D,Y,P)},Pe.useTransition=function(){return S.H.useTransition()},Pe.version="19.2.0",Pe}var Ob;function J0(){return Ob||(Ob=1,Fm.exports=TE()),Fm.exports}var M=J0();const P1=L1(M);var Gm={exports:{}},mc={},$m={exports:{}},Qm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mb;function SE(){return Mb||(Mb=1,(function(r){function e(q,le){var Z=q.length;q.push(le);e:for(;0<Z;){var Ee=Z-1>>>1,Ie=q[Ee];if(0<o(Ie,le))q[Ee]=le,q[Z]=Ie,Z=Ee;else break e}}function n(q){return q.length===0?null:q[0]}function a(q){if(q.length===0)return null;var le=q[0],Z=q.pop();if(Z!==le){q[0]=Z;e:for(var Ee=0,Ie=q.length,D=Ie>>>1;Ee<D;){var Y=2*(Ee+1)-1,P=q[Y],W=Y+1,xe=q[W];if(0>o(P,Z))W<Ie&&0>o(xe,P)?(q[Ee]=xe,q[W]=Z,Ee=W):(q[Ee]=P,q[Y]=Z,Ee=Y);else if(W<Ie&&0>o(xe,Z))q[Ee]=xe,q[W]=Z,Ee=W;else break e}}return le}function o(q,le){var Z=q.sortIndex-le.sortIndex;return Z!==0?Z:q.id-le.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,g=f.now();r.unstable_now=function(){return f.now()-g}}var x=[],p=[],_=1,w=null,E=3,O=!1,z=!1,ne=!1,Q=!1,ce=typeof setTimeout=="function"?setTimeout:null,fe=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;function we(q){for(var le=n(p);le!==null;){if(le.callback===null)a(p);else if(le.startTime<=q)a(p),le.sortIndex=le.expirationTime,e(x,le);else break;le=n(p)}}function he(q){if(ne=!1,we(q),!z)if(n(x)!==null)z=!0,B||(B=!0,L());else{var le=n(p);le!==null&&de(he,le.startTime-q)}}var B=!1,S=-1,T=5,A=-1;function R(){return Q?!0:!(r.unstable_now()-A<T)}function I(){if(Q=!1,B){var q=r.unstable_now();A=q;var le=!0;try{e:{z=!1,ne&&(ne=!1,fe(S),S=-1),O=!0;var Z=E;try{t:{for(we(q),w=n(x);w!==null&&!(w.expirationTime>q&&R());){var Ee=w.callback;if(typeof Ee=="function"){w.callback=null,E=w.priorityLevel;var Ie=Ee(w.expirationTime<=q);if(q=r.unstable_now(),typeof Ie=="function"){w.callback=Ie,we(q),le=!0;break t}w===n(x)&&a(x),we(q)}else a(x);w=n(x)}if(w!==null)le=!0;else{var D=n(p);D!==null&&de(he,D.startTime-q),le=!1}}break e}finally{w=null,E=Z,O=!1}le=void 0}}finally{le?L():B=!1}}}var L;if(typeof oe=="function")L=function(){oe(I)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,ie=C.port2;C.port1.onmessage=I,L=function(){ie.postMessage(null)}}else L=function(){ce(I,0)};function de(q,le){S=ce(function(){q(r.unstable_now())},le)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(q){q.callback=null},r.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<q?Math.floor(1e3/q):5},r.unstable_getCurrentPriorityLevel=function(){return E},r.unstable_next=function(q){switch(E){case 1:case 2:case 3:var le=3;break;default:le=E}var Z=E;E=le;try{return q()}finally{E=Z}},r.unstable_requestPaint=function(){Q=!0},r.unstable_runWithPriority=function(q,le){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Z=E;E=q;try{return le()}finally{E=Z}},r.unstable_scheduleCallback=function(q,le,Z){var Ee=r.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?Ee+Z:Ee):Z=Ee,q){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=Z+Ie,q={id:_++,callback:le,priorityLevel:q,startTime:Z,expirationTime:Ie,sortIndex:-1},Z>Ee?(q.sortIndex=Z,e(p,q),n(x)===null&&q===n(p)&&(ne?(fe(S),S=-1):ne=!0,de(he,Z-Ee))):(q.sortIndex=Ie,e(x,q),z||O||(z=!0,B||(B=!0,L()))),q},r.unstable_shouldYield=R,r.unstable_wrapCallback=function(q){var le=E;return function(){var Z=E;E=le;try{return q.apply(this,arguments)}finally{E=Z}}}})(Qm)),Qm}var Vb;function AE(){return Vb||(Vb=1,$m.exports=SE()),$m.exports}var Km={exports:{}},jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lb;function CE(){if(Lb)return jn;Lb=1;var r=J0();function e(x){var p="https://react.dev/errors/"+x;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+x+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(x,p,_){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:x,containerInfo:p,implementation:_}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(x,p){if(x==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,jn.createPortal=function(x,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(x,p,null,_)},jn.flushSync=function(x){var p=f.T,_=a.p;try{if(f.T=null,a.p=2,x)return x()}finally{f.T=p,a.p=_,a.d.f()}},jn.preconnect=function(x,p){typeof x=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(x,p))},jn.prefetchDNS=function(x){typeof x=="string"&&a.d.D(x)},jn.preinit=function(x,p){if(typeof x=="string"&&p&&typeof p.as=="string"){var _=p.as,w=g(_,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,O=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?a.d.S(x,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:w,integrity:E,fetchPriority:O}):_==="script"&&a.d.X(x,{crossOrigin:w,integrity:E,fetchPriority:O,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},jn.preinitModule=function(x,p){if(typeof x=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=g(p.as,p.crossOrigin);a.d.M(x,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(x)},jn.preload=function(x,p){if(typeof x=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,w=g(_,p.crossOrigin);a.d.L(x,_,{crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},jn.preloadModule=function(x,p){if(typeof x=="string")if(p){var _=g(p.as,p.crossOrigin);a.d.m(x,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(x)},jn.requestFormReset=function(x){a.d.r(x)},jn.unstable_batchedUpdates=function(x,p){return x(p)},jn.useFormState=function(x,p,_){return f.H.useFormState(x,p,_)},jn.useFormStatus=function(){return f.H.useHostTransitionStatus()},jn.version="19.2.0",jn}var Pb;function IE(){if(Pb)return Km.exports;Pb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Km.exports=CE(),Km.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zb;function RE(){if(zb)return mc;zb=1;var r=AE(),e=J0(),n=IE();function a(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var s=t,l=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(l=s.return),t=s.return;while(t)}return s.tag===3?l:null}function f(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function x(t){if(u(t)!==t)throw Error(a(188))}function p(t){var s=t.alternate;if(!s){if(s=u(t),s===null)throw Error(a(188));return s!==t?null:t}for(var l=t,c=s;;){var h=l.return;if(h===null)break;var m=h.alternate;if(m===null){if(c=h.return,c!==null){l=c;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===l)return x(h),t;if(m===c)return x(h),s;m=m.sibling}throw Error(a(188))}if(l.return!==c.return)l=h,c=m;else{for(var b=!1,N=h.child;N;){if(N===l){b=!0,l=h,c=m;break}if(N===c){b=!0,c=h,l=m;break}N=N.sibling}if(!b){for(N=m.child;N;){if(N===l){b=!0,l=m,c=h;break}if(N===c){b=!0,c=m,l=h;break}N=N.sibling}if(!b)throw Error(a(189))}}if(l.alternate!==c)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?t:s}function _(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=_(t),s!==null)return s;t=t.sibling}return null}var w=Object.assign,E=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),ne=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),ce=Symbol.for("react.profiler"),fe=Symbol.for("react.consumer"),oe=Symbol.for("react.context"),we=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=I&&t[I]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function ie(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ne:return"Fragment";case ce:return"Profiler";case Q:return"StrictMode";case he:return"Suspense";case B:return"SuspenseList";case A:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case z:return"Portal";case oe:return t.displayName||"Context";case fe:return(t._context.displayName||"Context")+".Consumer";case we:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case S:return s=t.displayName||null,s!==null?s:ie(t.type)||"Memo";case T:s=t._payload,t=t._init;try{return ie(t(s))}catch{}}return null}var de=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},Ee=[],Ie=-1;function D(t){return{current:t}}function Y(t){0>Ie||(t.current=Ee[Ie],Ee[Ie]=null,Ie--)}function P(t,s){Ie++,Ee[Ie]=t.current,t.current=s}var W=D(null),xe=D(null),Ae=D(null),Ue=D(null);function rt(t,s){switch(P(Ae,s),P(xe,t),P(W,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?eb(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=eb(s),t=tb(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Y(W),P(W,t)}function Ce(){Y(W),Y(xe),Y(Ae)}function Et(t){t.memoizedState!==null&&P(Ue,t);var s=W.current,l=tb(s,t.type);s!==l&&(P(xe,t),P(W,l))}function ft(t){xe.current===t&&(Y(W),Y(xe)),Ue.current===t&&(Y(Ue),cc._currentValue=Z)}var jt,at;function mn(t){if(jt===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);jt=s&&s[1]||"",at=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+jt+t+at}var os=!1;function cs(t,s){if(!t||os)return"";os=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(X){var $=X}Reflect.construct(t,[],se)}else{try{se.call()}catch(X){$=X}t.call(se.prototype)}}else{try{throw Error()}catch(X){$=X}(se=t())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(X){if(X&&$&&typeof X.stack=="string")return[X.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),b=m[0],N=m[1];if(b&&N){var k=b.split(`
`),G=N.split(`
`);for(h=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;if(c===k.length||h===G.length)for(c=k.length-1,h=G.length-1;1<=c&&0<=h&&k[c]!==G[h];)h--;for(;1<=c&&0<=h;c--,h--)if(k[c]!==G[h]){if(c!==1||h!==1)do if(c--,h--,0>h||k[c]!==G[h]){var J=`
`+k[c].replace(" at new "," at ");return t.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",t.displayName)),J}while(1<=c&&0<=h);break}}}finally{os=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?mn(l):""}function Gs(t,s){switch(t.tag){case 26:case 27:case 5:return mn(t.type);case 16:return mn("Lazy");case 13:return t.child!==s&&s!==null?mn("Suspense Fallback"):mn("Suspense");case 19:return mn("SuspenseList");case 0:case 15:return cs(t.type,!1);case 11:return cs(t.type.render,!1);case 1:return cs(t.type,!0);case 31:return mn("Activity");default:return""}}function _r(t){try{var s="",l=null;do s+=Gs(t,l),l=t,t=t.return;while(t);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var It=Object.prototype.hasOwnProperty,Rt=r.unstable_scheduleCallback,on=r.unstable_cancelCallback,ra=r.unstable_shouldYield,aa=r.unstable_requestPaint,kt=r.unstable_now,us=r.unstable_getCurrentPriorityLevel,$s=r.unstable_ImmediatePriority,Nr=r.unstable_UserBlockingPriority,gn=r.unstable_NormalPriority,ia=r.unstable_LowPriority,la=r.unstable_IdlePriority,re=r.log,$e=r.unstable_setDisableYieldValue,Le=null,Qe=null;function Mt(t){if(typeof re=="function"&&$e(t),Qe&&typeof Qe.setStrictMode=="function")try{Qe.setStrictMode(Le,t)}catch{}}var et=Math.clz32?Math.clz32:Qs,Er=Math.log,kn=Math.LN2;function Qs(t){return t>>>=0,t===0?32:31-(Er(t)/kn|0)|0}var Ln=256,ue=262144,ye=4194304;function je(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ge(t,s,l){var c=t.pendingLanes;if(c===0)return 0;var h=0,m=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var N=c&134217727;return N!==0?(c=N&~m,c!==0?h=je(c):(b&=N,b!==0?h=je(b):l||(l=N&~t,l!==0&&(h=je(l))))):(N=c&~m,N!==0?h=je(N):b!==0?h=je(b):l||(l=c&~t,l!==0&&(h=je(l)))),h===0?0:s!==0&&s!==h&&(s&m)===0&&(m=h&-h,l=s&-s,m>=l||m===32&&(l&4194048)!==0)?s:h}function Oe(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Ke(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wt(){var t=ye;return ye<<=1,(ye&62914560)===0&&(ye=4194304),t}function ot(t){for(var s=[],l=0;31>l;l++)s.push(t);return s}function ct(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Vt(t,s,l,c,h,m){var b=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var N=t.entanglements,k=t.expirationTimes,G=t.hiddenUpdates;for(l=b&~l;0<l;){var J=31-et(l),se=1<<J;N[J]=0,k[J]=-1;var $=G[J];if($!==null)for(G[J]=null,J=0;J<$.length;J++){var X=$[J];X!==null&&(X.lane&=-536870913)}l&=~se}c!==0&&cn(t,c,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(b&~s))}function cn(t,s,l){t.pendingLanes|=s,t.suspendedLanes&=~s;var c=31-et(s);t.entangledLanes|=s,t.entanglements[c]=t.entanglements[c]|1073741824|l&261930}function hi(t,s){var l=t.entangledLanes|=s;for(t=t.entanglements;l;){var c=31-et(l),h=1<<c;h&s|t[c]&s&&(t[c]|=s),l&=~h}}function go(t,s){var l=s&-s;return l=(l&42)!==0?1:fi(l),(l&(t.suspendedLanes|s))!==0?0:l}function fi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function jr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ru(){var t=le.p;return t!==0?t:(t=window.event,t===void 0?32:Eb(t.type))}function Is(t,s){var l=le.p;try{return le.p=t,s()}finally{le.p=l}}var Rs=Math.random().toString(36).slice(2),Kt="__reactFiber$"+Rs,un="__reactProps$"+Rs,Ks="__reactContainer$"+Rs,el="__reactEvents$"+Rs,Kh="__reactListeners$"+Rs,au="__reactHandles$"+Rs,iu="__reactResources$"+Rs,Xs="__reactMarker$"+Rs;function tl(t){delete t[Kt],delete t[un],delete t[el],delete t[Kh],delete t[au]}function Ys(t){var s=t[Kt];if(s)return s;for(var l=t.parentNode;l;){if(s=l[Ks]||l[Kt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(t=ob(t);t!==null;){if(l=t[Kt])return l;t=ob(t)}return s}t=l,l=t.parentNode}return null}function ds(t){if(t=t[Kt]||t[Ks]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function Xn(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(a(33))}function Ws(t){var s=t[iu];return s||(s=t[iu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Xt(t){t[Xs]=!0}var po=new Set,xo={};function Zs(t,s){Js(t,s),Js(t+"Capture",s)}function Js(t,s){for(xo[t]=s,t=0;t<s.length;t++)po.add(s[t])}var yo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bo={},vo={};function lu(t){return It.call(vo,t)?!0:It.call(bo,t)?!1:yo.test(t)?vo[t]=!0:(bo[t]=!0,!1)}function nl(t,s,l){if(lu(s))if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+l)}}function Yn(t,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+l)}}function Yt(t,s,l,c){if(c===null)t.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(s,l,""+c)}}function dn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function oa(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function wo(t,s,l){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var h=c.get,m=c.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return h.call(this)},set:function(b){l=""+b,m.call(this,b)}}),Object.defineProperty(t,s,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function mt(t){if(!t._valueTracker){var s=oa(t)?"checked":"value";t._valueTracker=wo(t,s,""+t[s])}}function mi(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var l=s.getValue(),c="";return t&&(c=oa(t)?t.checked?"true":"false":t.value),t=c,t!==l?(s.setValue(t),!0):!1}function er(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var gi=/[\n"\\]/g;function Pn(t){return t.replace(gi,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function sl(t,s,l,c,h,m,b,N){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),s!=null?b==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+dn(s)):t.value!==""+dn(s)&&(t.value=""+dn(s)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),s!=null?_o(t,b,dn(s)):l!=null?_o(t,b,dn(l)):c!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?t.name=""+dn(N):t.removeAttribute("name")}function ou(t,s,l,c,h,m,b,N){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||l!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){mt(t);return}l=l!=null?""+dn(l):"",s=s!=null?""+dn(s):l,N||s===t.value||(t.value=s),t.defaultValue=s}c=c??h,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=N?t.checked:!!c,t.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),mt(t)}function _o(t,s,l){s==="number"&&er(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function ca(t,s,l,c){if(t=t.options,s){s={};for(var h=0;h<l.length;h++)s["$"+l[h]]=!0;for(l=0;l<t.length;l++)h=s.hasOwnProperty("$"+t[l].value),t[l].selected!==h&&(t[l].selected=h),h&&c&&(t[l].defaultSelected=!0)}else{for(l=""+dn(l),s=null,h=0;h<t.length;h++){if(t[h].value===l){t[h].selected=!0,c&&(t[h].defaultSelected=!0);return}s!==null||t[h].disabled||(s=t[h])}s!==null&&(s.selected=!0)}}function cu(t,s,l){if(s!=null&&(s=""+dn(s),s!==t.value&&(t.value=s),l==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=l!=null?""+dn(l):""}function ua(t,s,l,c){if(s==null){if(c!=null){if(l!=null)throw Error(a(92));if(de(c)){if(1<c.length)throw Error(a(93));c=c[0]}l=c}l==null&&(l=""),s=l}l=dn(s),t.defaultValue=l,c=t.textContent,c===l&&c!==""&&c!==null&&(t.value=c),mt(t)}function zn(t,s){if(s){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=s;return}}t.textContent=s}var uu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function No(t,s,l){var c=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":c?t.setProperty(s,l):typeof l!="number"||l===0||uu.has(s)?s==="float"?t.cssFloat=l:t[s]=(""+l).trim():t[s]=l+"px"}function Eo(t,s,l){if(s!=null&&typeof s!="object")throw Error(a(62));if(t=t.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var h in s)c=s[h],s.hasOwnProperty(h)&&l[h]!==c&&No(t,h,c)}else for(var m in s)s.hasOwnProperty(m)&&No(t,m,s[m])}function rl(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var du=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),da=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function al(t){return da.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ks(){}var jo=null;function hs(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ha=null,tr=null;function pi(t){var s=ds(t);if(s&&(t=s.stateNode)){var l=t[un]||null;e:switch(t=s.stateNode,s.type){case"input":if(sl(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Pn(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var c=l[s];if(c!==t&&c.form===t.form){var h=c[un]||null;if(!h)throw Error(a(90));sl(c,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<l.length;s++)c=l[s],c.form===t.form&&mi(c)}break e;case"textarea":cu(t,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&ca(t,!!l.multiple,s,!1)}}}var il=!1;function fa(t,s,l){if(il)return t(s,l);il=!0;try{var c=t(s);return c}finally{if(il=!1,(ha!==null||tr!==null)&&(rd(),ha&&(s=ha,t=tr,tr=ha=null,pi(s),t)))for(s=0;s<t.length;s++)pi(t[s])}}function Ds(t,s){var l=t.stateNode;if(l===null)return null;var c=l[un]||null;if(c===null)return null;l=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(a(231,s,typeof l));return l}var fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xi=!1;if(fs)try{var xt={};Object.defineProperty(xt,"passive",{get:function(){xi=!0}}),window.addEventListener("test",xt,xt),window.removeEventListener("test",xt,xt)}catch{xi=!1}var nr=null,To=null,yi=null;function So(){if(yi)return yi;var t,s=To,l=s.length,c,h="value"in nr?nr.value:nr.textContent,m=h.length;for(t=0;t<l&&s[t]===h[t];t++);var b=l-t;for(c=1;c<=b&&s[l-c]===h[m-c];c++);return yi=h.slice(t,1<c?1-c:void 0)}function bi(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Tr(){return!0}function Os(){return!1}function pn(t){function s(l,c,h,m,b){this._reactName=l,this._targetInst=h,this.type=c,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var N in t)t.hasOwnProperty(N)&&(l=t[N],this[N]=l?l(m):m[N]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Tr:Os,this.isPropagationStopped=Os,this}return w(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Tr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Tr)},persist:function(){},isPersistent:Tr}),s}var Sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sr=pn(Sr),ma=w({},Sr,{view:0,detail:0}),Ao=pn(ma),ga,ll,rr,ol=w({},ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pa,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==rr&&(rr&&t.type==="mousemove"?(ga=t.screenX-rr.screenX,ll=t.screenY-rr.screenY):ll=ga=0,rr=t),ga)},movementY:function(t){return"movementY"in t?t.movementY:ll}}),Co=pn(ol),vi=w({},ol,{dataTransfer:0}),hu=pn(vi),fu=w({},ma,{relatedTarget:0}),wi=pn(fu),Io=w({},Sr,{animationName:0,elapsedTime:0,pseudoElement:0}),mu=pn(Io),cl=w({},Sr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gu=pn(cl),pu=w({},Sr,{data:0}),ar=pn(pu),xu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vu(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=bu[t])?!!s[t]:!1}function pa(){return vu}var Dn=w({},ma,{key:function(t){if(t.key){var s=xu[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=bi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pa,charCode:function(t){return t.type==="keypress"?bi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wu=pn(Dn),_u=w({},ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ar=pn(_u),d=w({},ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pa}),y=pn(d),v=w({},Sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),j=pn(v),H=w({},ol,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),K=pn(H),pe=w({},Sr,{newState:0,oldState:0}),qe=pn(pe),Bt=[9,13,27,32],ut=fs&&"CompositionEvent"in window,Dt=null;fs&&"documentMode"in document&&(Dt=document.documentMode);var ms=fs&&"TextEvent"in window&&!Dt,ir=fs&&(!ut||Dt&&8<Dt&&11>=Dt),Ms=" ",Vs=!1;function _i(t,s){switch(t){case"keyup":return Bt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ul(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var dl=!1;function K_(t,s){switch(t){case"compositionend":return ul(s);case"keypress":return s.which!==32?null:(Vs=!0,Ms);case"textInput":return t=s.data,t===Ms&&Vs?null:t;default:return null}}function X_(t,s){if(dl)return t==="compositionend"||!ut&&_i(t,s)?(t=So(),yi=To=nr=null,dl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ir&&s.locale!=="ko"?null:s.data;default:return null}}var Y_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dp(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Y_[t.type]:s==="textarea"}function hp(t,s,l,c){ha?tr?tr.push(c):tr=[c]:ha=c,s=dd(s,"onChange"),0<s.length&&(l=new sr("onChange","change",null,l,c),t.push({event:l,listeners:s}))}var Ro=null,ko=null;function W_(t){Ky(t,0)}function Nu(t){var s=Xn(t);if(mi(s))return t}function fp(t,s){if(t==="change")return s}var mp=!1;if(fs){var Xh;if(fs){var Yh="oninput"in document;if(!Yh){var gp=document.createElement("div");gp.setAttribute("oninput","return;"),Yh=typeof gp.oninput=="function"}Xh=Yh}else Xh=!1;mp=Xh&&(!document.documentMode||9<document.documentMode)}function pp(){Ro&&(Ro.detachEvent("onpropertychange",xp),ko=Ro=null)}function xp(t){if(t.propertyName==="value"&&Nu(ko)){var s=[];hp(s,ko,t,hs(t)),fa(W_,s)}}function Z_(t,s,l){t==="focusin"?(pp(),Ro=s,ko=l,Ro.attachEvent("onpropertychange",xp)):t==="focusout"&&pp()}function J_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nu(ko)}function eN(t,s){if(t==="click")return Nu(s)}function tN(t,s){if(t==="input"||t==="change")return Nu(s)}function nN(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Wn=typeof Object.is=="function"?Object.is:nN;function Do(t,s){if(Wn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var l=Object.keys(t),c=Object.keys(s);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var h=l[c];if(!It.call(s,h)||!Wn(t[h],s[h]))return!1}return!0}function yp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bp(t,s){var l=yp(t);t=0;for(var c;l;){if(l.nodeType===3){if(c=t+l.textContent.length,t<=s&&c>=s)return{node:l,offset:s-t};t=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=yp(l)}}function vp(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?vp(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function wp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=er(t.document);s instanceof t.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)t=s.contentWindow;else break;s=er(t.document)}return s}function Wh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var sN=fs&&"documentMode"in document&&11>=document.documentMode,hl=null,Zh=null,Oo=null,Jh=!1;function _p(t,s,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Jh||hl==null||hl!==er(c)||(c=hl,"selectionStart"in c&&Wh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Oo&&Do(Oo,c)||(Oo=c,c=dd(Zh,"onSelect"),0<c.length&&(s=new sr("onSelect","select",null,s,l),t.push({event:s,listeners:c}),s.target=hl)))}function Ni(t,s){var l={};return l[t.toLowerCase()]=s.toLowerCase(),l["Webkit"+t]="webkit"+s,l["Moz"+t]="moz"+s,l}var fl={animationend:Ni("Animation","AnimationEnd"),animationiteration:Ni("Animation","AnimationIteration"),animationstart:Ni("Animation","AnimationStart"),transitionrun:Ni("Transition","TransitionRun"),transitionstart:Ni("Transition","TransitionStart"),transitioncancel:Ni("Transition","TransitionCancel"),transitionend:Ni("Transition","TransitionEnd")},ef={},Np={};fs&&(Np=document.createElement("div").style,"AnimationEvent"in window||(delete fl.animationend.animation,delete fl.animationiteration.animation,delete fl.animationstart.animation),"TransitionEvent"in window||delete fl.transitionend.transition);function Ei(t){if(ef[t])return ef[t];if(!fl[t])return t;var s=fl[t],l;for(l in s)if(s.hasOwnProperty(l)&&l in Np)return ef[t]=s[l];return t}var Ep=Ei("animationend"),jp=Ei("animationiteration"),Tp=Ei("animationstart"),rN=Ei("transitionrun"),aN=Ei("transitionstart"),iN=Ei("transitioncancel"),Sp=Ei("transitionend"),Ap=new Map,tf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tf.push("scrollEnd");function Ls(t,s){Ap.set(t,s),Zs(s,[t])}var Eu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},gs=[],ml=0,nf=0;function ju(){for(var t=ml,s=nf=ml=0;s<t;){var l=gs[s];gs[s++]=null;var c=gs[s];gs[s++]=null;var h=gs[s];gs[s++]=null;var m=gs[s];if(gs[s++]=null,c!==null&&h!==null){var b=c.pending;b===null?h.next=h:(h.next=b.next,b.next=h),c.pending=h}m!==0&&Cp(l,h,m)}}function Tu(t,s,l,c){gs[ml++]=t,gs[ml++]=s,gs[ml++]=l,gs[ml++]=c,nf|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function sf(t,s,l,c){return Tu(t,s,l,c),Su(t)}function ji(t,s){return Tu(t,null,null,s),Su(t)}function Cp(t,s,l){t.lanes|=l;var c=t.alternate;c!==null&&(c.lanes|=l);for(var h=!1,m=t.return;m!==null;)m.childLanes|=l,c=m.alternate,c!==null&&(c.childLanes|=l),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&s!==null&&(h=31-et(l),t=m.hiddenUpdates,c=t[h],c===null?t[h]=[s]:c.push(s),s.lane=l|536870912),m):null}function Su(t){if(50<nc)throw nc=0,fm=null,Error(a(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var gl={};function lN(t,s,l,c){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(t,s,l,c){return new lN(t,s,l,c)}function rf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Cr(t,s){var l=t.alternate;return l===null?(l=Zn(t.tag,s,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=s,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,s=t.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function Ip(t,s){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,s=l.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Au(t,s,l,c,h,m){var b=0;if(c=t,typeof t=="function")rf(t)&&(b=1);else if(typeof t=="string")b=hE(t,l,W.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case A:return t=Zn(31,l,s,h),t.elementType=A,t.lanes=m,t;case ne:return Ti(l.children,h,m,s);case Q:b=8,h|=24;break;case ce:return t=Zn(12,l,s,h|2),t.elementType=ce,t.lanes=m,t;case he:return t=Zn(13,l,s,h),t.elementType=he,t.lanes=m,t;case B:return t=Zn(19,l,s,h),t.elementType=B,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case oe:b=10;break e;case fe:b=9;break e;case we:b=11;break e;case S:b=14;break e;case T:b=16,c=null;break e}b=29,l=Error(a(130,t===null?"null":typeof t,"")),c=null}return s=Zn(b,l,s,h),s.elementType=t,s.type=c,s.lanes=m,s}function Ti(t,s,l,c){return t=Zn(7,t,c,s),t.lanes=l,t}function af(t,s,l){return t=Zn(6,t,null,s),t.lanes=l,t}function Rp(t){var s=Zn(18,null,null,0);return s.stateNode=t,s}function lf(t,s,l){return s=Zn(4,t.children!==null?t.children:[],t.key,s),s.lanes=l,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var kp=new WeakMap;function ps(t,s){if(typeof t=="object"&&t!==null){var l=kp.get(t);return l!==void 0?l:(s={value:t,source:s,stack:_r(s)},kp.set(t,s),s)}return{value:t,source:s,stack:_r(s)}}var pl=[],xl=0,Cu=null,Mo=0,xs=[],ys=0,xa=null,lr=1,or="";function Ir(t,s){pl[xl++]=Mo,pl[xl++]=Cu,Cu=t,Mo=s}function Dp(t,s,l){xs[ys++]=lr,xs[ys++]=or,xs[ys++]=xa,xa=t;var c=lr;t=or;var h=32-et(c)-1;c&=~(1<<h),l+=1;var m=32-et(s)+h;if(30<m){var b=h-h%5;m=(c&(1<<b)-1).toString(32),c>>=b,h-=b,lr=1<<32-et(s)+h|l<<h|c,or=m+t}else lr=1<<m|l<<h|c,or=t}function of(t){t.return!==null&&(Ir(t,1),Dp(t,1,0))}function cf(t){for(;t===Cu;)Cu=pl[--xl],pl[xl]=null,Mo=pl[--xl],pl[xl]=null;for(;t===xa;)xa=xs[--ys],xs[ys]=null,or=xs[--ys],xs[ys]=null,lr=xs[--ys],xs[ys]=null}function Op(t,s){xs[ys++]=lr,xs[ys++]=or,xs[ys++]=xa,lr=s.id,or=s.overflow,xa=t}var xn=null,Tt=null,tt=!1,ya=null,bs=!1,uf=Error(a(519));function ba(t){var s=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Vo(ps(s,t)),uf}function Mp(t){var s=t.stateNode,l=t.type,c=t.memoizedProps;switch(s[Kt]=t,s[un]=c,l){case"dialog":Ge("cancel",s),Ge("close",s);break;case"iframe":case"object":case"embed":Ge("load",s);break;case"video":case"audio":for(l=0;l<rc.length;l++)Ge(rc[l],s);break;case"source":Ge("error",s);break;case"img":case"image":case"link":Ge("error",s),Ge("load",s);break;case"details":Ge("toggle",s);break;case"input":Ge("invalid",s),ou(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ge("invalid",s);break;case"textarea":Ge("invalid",s),ua(s,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||c.suppressHydrationWarning===!0||Zy(s.textContent,l)?(c.popover!=null&&(Ge("beforetoggle",s),Ge("toggle",s)),c.onScroll!=null&&Ge("scroll",s),c.onScrollEnd!=null&&Ge("scrollend",s),c.onClick!=null&&(s.onclick=ks),s=!0):s=!1,s||ba(t,!0)}function Vp(t){for(xn=t.return;xn;)switch(xn.tag){case 5:case 31:case 13:bs=!1;return;case 27:case 3:bs=!0;return;default:xn=xn.return}}function yl(t){if(t!==xn)return!1;if(!tt)return Vp(t),tt=!0,!1;var s=t.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||Am(t.type,t.memoizedProps)),l=!l),l&&Tt&&ba(t),Vp(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Tt=lb(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Tt=lb(t)}else s===27?(s=Tt,Da(t.type)?(t=Dm,Dm=null,Tt=t):Tt=s):Tt=xn?ws(t.stateNode.nextSibling):null;return!0}function Si(){Tt=xn=null,tt=!1}function df(){var t=ya;return t!==null&&(Hn===null?Hn=t:Hn.push.apply(Hn,t),ya=null),t}function Vo(t){ya===null?ya=[t]:ya.push(t)}var hf=D(null),Ai=null,Rr=null;function va(t,s,l){P(hf,s._currentValue),s._currentValue=l}function kr(t){t._currentValue=hf.current,Y(hf)}function ff(t,s,l){for(;t!==null;){var c=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),t===l)break;t=t.return}}function mf(t,s,l,c){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var b=h.child;m=m.firstContext;e:for(;m!==null;){var N=m;m=h;for(var k=0;k<s.length;k++)if(N.context===s[k]){m.lanes|=l,N=m.alternate,N!==null&&(N.lanes|=l),ff(m.return,l,t),c||(b=null);break e}m=N.next}}else if(h.tag===18){if(b=h.return,b===null)throw Error(a(341));b.lanes|=l,m=b.alternate,m!==null&&(m.lanes|=l),ff(b,l,t),b=null}else b=h.child;if(b!==null)b.return=h;else for(b=h;b!==null;){if(b===t){b=null;break}if(h=b.sibling,h!==null){h.return=b.return,b=h;break}b=b.return}h=b}}function bl(t,s,l,c){t=null;for(var h=s,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var b=h.alternate;if(b===null)throw Error(a(387));if(b=b.memoizedProps,b!==null){var N=h.type;Wn(h.pendingProps.value,b.value)||(t!==null?t.push(N):t=[N])}}else if(h===Ue.current){if(b=h.alternate,b===null)throw Error(a(387));b.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(cc):t=[cc])}h=h.return}t!==null&&mf(s,t,l,c),s.flags|=262144}function Iu(t){for(t=t.firstContext;t!==null;){if(!Wn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ci(t){Ai=t,Rr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function yn(t){return Lp(Ai,t)}function Ru(t,s){return Ai===null&&Ci(t),Lp(t,s)}function Lp(t,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},Rr===null){if(t===null)throw Error(a(308));Rr=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else Rr=Rr.next=s;return l}var oN=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(l,c){t.push(c)}};this.abort=function(){s.aborted=!0,t.forEach(function(l){return l()})}},cN=r.unstable_scheduleCallback,uN=r.unstable_NormalPriority,Wt={$$typeof:oe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gf(){return{controller:new oN,data:new Map,refCount:0}}function Lo(t){t.refCount--,t.refCount===0&&cN(uN,function(){t.controller.abort()})}var Po=null,pf=0,vl=0,wl=null;function dN(t,s){if(Po===null){var l=Po=[];pf=0,vl=bm(),wl={status:"pending",value:void 0,then:function(c){l.push(c)}}}return pf++,s.then(Pp,Pp),s}function Pp(){if(--pf===0&&Po!==null){wl!==null&&(wl.status="fulfilled");var t=Po;Po=null,vl=0,wl=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function hN(t,s){var l=[],c={status:"pending",value:null,reason:null,then:function(h){l.push(h)}};return t.then(function(){c.status="fulfilled",c.value=s;for(var h=0;h<l.length;h++)(0,l[h])(s)},function(h){for(c.status="rejected",c.reason=h,h=0;h<l.length;h++)(0,l[h])(void 0)}),c}var zp=q.S;q.S=function(t,s){_y=kt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&dN(t,s),zp!==null&&zp(t,s)};var Ii=D(null);function xf(){var t=Ii.current;return t!==null?t:_t.pooledCache}function ku(t,s){s===null?P(Ii,Ii.current):P(Ii,s.pool)}function Up(){var t=xf();return t===null?null:{parent:Wt._currentValue,pool:t}}var _l=Error(a(460)),yf=Error(a(474)),Du=Error(a(542)),Ou={then:function(){}};function qp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Bp(t,s,l){switch(l=t[l],l===void 0?t.push(s):l!==s&&(s.then(ks,ks),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Fp(t),t;default:if(typeof s.status=="string")s.then(ks,ks);else{if(t=_t,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=s,t.status="pending",t.then(function(c){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=c}},function(c){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Fp(t),t}throw ki=s,_l}}function Ri(t){try{var s=t._init;return s(t._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(ki=l,_l):l}}var ki=null;function Hp(){if(ki===null)throw Error(a(459));var t=ki;return ki=null,t}function Fp(t){if(t===_l||t===Du)throw Error(a(483))}var Nl=null,zo=0;function Mu(t){var s=zo;return zo+=1,Nl===null&&(Nl=[]),Bp(Nl,t,s)}function Uo(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Vu(t,s){throw s.$$typeof===E?Error(a(525)):(t=Object.prototype.toString.call(s),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Gp(t){function s(U,V){if(t){var F=U.deletions;F===null?(U.deletions=[V],U.flags|=16):F.push(V)}}function l(U,V){if(!t)return null;for(;V!==null;)s(U,V),V=V.sibling;return null}function c(U){for(var V=new Map;U!==null;)U.key!==null?V.set(U.key,U):V.set(U.index,U),U=U.sibling;return V}function h(U,V){return U=Cr(U,V),U.index=0,U.sibling=null,U}function m(U,V,F){return U.index=F,t?(F=U.alternate,F!==null?(F=F.index,F<V?(U.flags|=67108866,V):F):(U.flags|=67108866,V)):(U.flags|=1048576,V)}function b(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function N(U,V,F,ee){return V===null||V.tag!==6?(V=af(F,U.mode,ee),V.return=U,V):(V=h(V,F),V.return=U,V)}function k(U,V,F,ee){var Te=F.type;return Te===ne?J(U,V,F.props.children,ee,F.key):V!==null&&(V.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===T&&Ri(Te)===V.type)?(V=h(V,F.props),Uo(V,F),V.return=U,V):(V=Au(F.type,F.key,F.props,null,U.mode,ee),Uo(V,F),V.return=U,V)}function G(U,V,F,ee){return V===null||V.tag!==4||V.stateNode.containerInfo!==F.containerInfo||V.stateNode.implementation!==F.implementation?(V=lf(F,U.mode,ee),V.return=U,V):(V=h(V,F.children||[]),V.return=U,V)}function J(U,V,F,ee,Te){return V===null||V.tag!==7?(V=Ti(F,U.mode,ee,Te),V.return=U,V):(V=h(V,F),V.return=U,V)}function se(U,V,F){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=af(""+V,U.mode,F),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case O:return F=Au(V.type,V.key,V.props,null,U.mode,F),Uo(F,V),F.return=U,F;case z:return V=lf(V,U.mode,F),V.return=U,V;case T:return V=Ri(V),se(U,V,F)}if(de(V)||L(V))return V=Ti(V,U.mode,F,null),V.return=U,V;if(typeof V.then=="function")return se(U,Mu(V),F);if(V.$$typeof===oe)return se(U,Ru(U,V),F);Vu(U,V)}return null}function $(U,V,F,ee){var Te=V!==null?V.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return Te!==null?null:N(U,V,""+F,ee);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case O:return F.key===Te?k(U,V,F,ee):null;case z:return F.key===Te?G(U,V,F,ee):null;case T:return F=Ri(F),$(U,V,F,ee)}if(de(F)||L(F))return Te!==null?null:J(U,V,F,ee,null);if(typeof F.then=="function")return $(U,V,Mu(F),ee);if(F.$$typeof===oe)return $(U,V,Ru(U,F),ee);Vu(U,F)}return null}function X(U,V,F,ee,Te){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return U=U.get(F)||null,N(V,U,""+ee,Te);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case O:return U=U.get(ee.key===null?F:ee.key)||null,k(V,U,ee,Te);case z:return U=U.get(ee.key===null?F:ee.key)||null,G(V,U,ee,Te);case T:return ee=Ri(ee),X(U,V,F,ee,Te)}if(de(ee)||L(ee))return U=U.get(F)||null,J(V,U,ee,Te,null);if(typeof ee.then=="function")return X(U,V,F,Mu(ee),Te);if(ee.$$typeof===oe)return X(U,V,F,Ru(V,ee),Te);Vu(V,ee)}return null}function _e(U,V,F,ee){for(var Te=null,it=null,Ne=V,He=V=0,Ye=null;Ne!==null&&He<F.length;He++){Ne.index>He?(Ye=Ne,Ne=null):Ye=Ne.sibling;var lt=$(U,Ne,F[He],ee);if(lt===null){Ne===null&&(Ne=Ye);break}t&&Ne&&lt.alternate===null&&s(U,Ne),V=m(lt,V,He),it===null?Te=lt:it.sibling=lt,it=lt,Ne=Ye}if(He===F.length)return l(U,Ne),tt&&Ir(U,He),Te;if(Ne===null){for(;He<F.length;He++)Ne=se(U,F[He],ee),Ne!==null&&(V=m(Ne,V,He),it===null?Te=Ne:it.sibling=Ne,it=Ne);return tt&&Ir(U,He),Te}for(Ne=c(Ne);He<F.length;He++)Ye=X(Ne,U,He,F[He],ee),Ye!==null&&(t&&Ye.alternate!==null&&Ne.delete(Ye.key===null?He:Ye.key),V=m(Ye,V,He),it===null?Te=Ye:it.sibling=Ye,it=Ye);return t&&Ne.forEach(function(Pa){return s(U,Pa)}),tt&&Ir(U,He),Te}function Re(U,V,F,ee){if(F==null)throw Error(a(151));for(var Te=null,it=null,Ne=V,He=V=0,Ye=null,lt=F.next();Ne!==null&&!lt.done;He++,lt=F.next()){Ne.index>He?(Ye=Ne,Ne=null):Ye=Ne.sibling;var Pa=$(U,Ne,lt.value,ee);if(Pa===null){Ne===null&&(Ne=Ye);break}t&&Ne&&Pa.alternate===null&&s(U,Ne),V=m(Pa,V,He),it===null?Te=Pa:it.sibling=Pa,it=Pa,Ne=Ye}if(lt.done)return l(U,Ne),tt&&Ir(U,He),Te;if(Ne===null){for(;!lt.done;He++,lt=F.next())lt=se(U,lt.value,ee),lt!==null&&(V=m(lt,V,He),it===null?Te=lt:it.sibling=lt,it=lt);return tt&&Ir(U,He),Te}for(Ne=c(Ne);!lt.done;He++,lt=F.next())lt=X(Ne,U,He,lt.value,ee),lt!==null&&(t&&lt.alternate!==null&&Ne.delete(lt.key===null?He:lt.key),V=m(lt,V,He),it===null?Te=lt:it.sibling=lt,it=lt);return t&&Ne.forEach(function(NE){return s(U,NE)}),tt&&Ir(U,He),Te}function vt(U,V,F,ee){if(typeof F=="object"&&F!==null&&F.type===ne&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case O:e:{for(var Te=F.key;V!==null;){if(V.key===Te){if(Te=F.type,Te===ne){if(V.tag===7){l(U,V.sibling),ee=h(V,F.props.children),ee.return=U,U=ee;break e}}else if(V.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===T&&Ri(Te)===V.type){l(U,V.sibling),ee=h(V,F.props),Uo(ee,F),ee.return=U,U=ee;break e}l(U,V);break}else s(U,V);V=V.sibling}F.type===ne?(ee=Ti(F.props.children,U.mode,ee,F.key),ee.return=U,U=ee):(ee=Au(F.type,F.key,F.props,null,U.mode,ee),Uo(ee,F),ee.return=U,U=ee)}return b(U);case z:e:{for(Te=F.key;V!==null;){if(V.key===Te)if(V.tag===4&&V.stateNode.containerInfo===F.containerInfo&&V.stateNode.implementation===F.implementation){l(U,V.sibling),ee=h(V,F.children||[]),ee.return=U,U=ee;break e}else{l(U,V);break}else s(U,V);V=V.sibling}ee=lf(F,U.mode,ee),ee.return=U,U=ee}return b(U);case T:return F=Ri(F),vt(U,V,F,ee)}if(de(F))return _e(U,V,F,ee);if(L(F)){if(Te=L(F),typeof Te!="function")throw Error(a(150));return F=Te.call(F),Re(U,V,F,ee)}if(typeof F.then=="function")return vt(U,V,Mu(F),ee);if(F.$$typeof===oe)return vt(U,V,Ru(U,F),ee);Vu(U,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,V!==null&&V.tag===6?(l(U,V.sibling),ee=h(V,F),ee.return=U,U=ee):(l(U,V),ee=af(F,U.mode,ee),ee.return=U,U=ee),b(U)):l(U,V)}return function(U,V,F,ee){try{zo=0;var Te=vt(U,V,F,ee);return Nl=null,Te}catch(Ne){if(Ne===_l||Ne===Du)throw Ne;var it=Zn(29,Ne,null,U.mode);return it.lanes=ee,it.return=U,it}finally{}}}var Di=Gp(!0),$p=Gp(!1),wa=!1;function bf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vf(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function _a(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Na(t,s,l){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(dt&2)!==0){var h=c.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),c.pending=s,s=Su(t),Cp(t,null,l),s}return Tu(t,c,s,l),Su(t)}function qo(t,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var c=s.lanes;c&=t.pendingLanes,l|=c,s.lanes=l,hi(t,l)}}function wf(t,s){var l=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var h=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var b={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};m===null?h=m=b:m=m.next=b,l=l.next}while(l!==null);m===null?h=m=s:m=m.next=s}else h=m=s;l={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=s:t.next=s,l.lastBaseUpdate=s}var _f=!1;function Bo(){if(_f){var t=wl;if(t!==null)throw t}}function Ho(t,s,l,c){_f=!1;var h=t.updateQueue;wa=!1;var m=h.firstBaseUpdate,b=h.lastBaseUpdate,N=h.shared.pending;if(N!==null){h.shared.pending=null;var k=N,G=k.next;k.next=null,b===null?m=G:b.next=G,b=k;var J=t.alternate;J!==null&&(J=J.updateQueue,N=J.lastBaseUpdate,N!==b&&(N===null?J.firstBaseUpdate=G:N.next=G,J.lastBaseUpdate=k))}if(m!==null){var se=h.baseState;b=0,J=G=k=null,N=m;do{var $=N.lane&-536870913,X=$!==N.lane;if(X?(Xe&$)===$:(c&$)===$){$!==0&&$===vl&&(_f=!0),J!==null&&(J=J.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var _e=t,Re=N;$=s;var vt=l;switch(Re.tag){case 1:if(_e=Re.payload,typeof _e=="function"){se=_e.call(vt,se,$);break e}se=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Re.payload,$=typeof _e=="function"?_e.call(vt,se,$):_e,$==null)break e;se=w({},se,$);break e;case 2:wa=!0}}$=N.callback,$!==null&&(t.flags|=64,X&&(t.flags|=8192),X=h.callbacks,X===null?h.callbacks=[$]:X.push($))}else X={lane:$,tag:N.tag,payload:N.payload,callback:N.callback,next:null},J===null?(G=J=X,k=se):J=J.next=X,b|=$;if(N=N.next,N===null){if(N=h.shared.pending,N===null)break;X=N,N=X.next,X.next=null,h.lastBaseUpdate=X,h.shared.pending=null}}while(!0);J===null&&(k=se),h.baseState=k,h.firstBaseUpdate=G,h.lastBaseUpdate=J,m===null&&(h.shared.lanes=0),Aa|=b,t.lanes=b,t.memoizedState=se}}function Qp(t,s){if(typeof t!="function")throw Error(a(191,t));t.call(s)}function Kp(t,s){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)Qp(l[t],s)}var El=D(null),Lu=D(0);function Xp(t,s){t=qr,P(Lu,t),P(El,s),qr=t|s.baseLanes}function Nf(){P(Lu,qr),P(El,El.current)}function Ef(){qr=Lu.current,Y(El),Y(Lu)}var Jn=D(null),vs=null;function Ea(t){var s=t.alternate;P(Ht,Ht.current&1),P(Jn,t),vs===null&&(s===null||El.current!==null||s.memoizedState!==null)&&(vs=t)}function jf(t){P(Ht,Ht.current),P(Jn,t),vs===null&&(vs=t)}function Yp(t){t.tag===22?(P(Ht,Ht.current),P(Jn,t),vs===null&&(vs=t)):ja()}function ja(){P(Ht,Ht.current),P(Jn,Jn.current)}function es(t){Y(Jn),vs===t&&(vs=null),Y(Ht)}var Ht=D(0);function Pu(t){for(var s=t;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Rm(l)||km(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Dr=0,Be=null,yt=null,Zt=null,zu=!1,jl=!1,Oi=!1,Uu=0,Fo=0,Tl=null,fN=0;function Pt(){throw Error(a(321))}function Tf(t,s){if(s===null)return!1;for(var l=0;l<s.length&&l<t.length;l++)if(!Wn(t[l],s[l]))return!1;return!0}function Sf(t,s,l,c,h,m){return Dr=m,Be=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,q.H=t===null||t.memoizedState===null?Dx:Bf,Oi=!1,m=l(c,h),Oi=!1,jl&&(m=Zp(s,l,c,h)),Wp(t),m}function Wp(t){q.H=Qo;var s=yt!==null&&yt.next!==null;if(Dr=0,Zt=yt=Be=null,zu=!1,Fo=0,Tl=null,s)throw Error(a(300));t===null||Jt||(t=t.dependencies,t!==null&&Iu(t)&&(Jt=!0))}function Zp(t,s,l,c){Be=t;var h=0;do{if(jl&&(Tl=null),Fo=0,jl=!1,25<=h)throw Error(a(301));if(h+=1,Zt=yt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}q.H=Ox,m=s(l,c)}while(jl);return m}function mN(){var t=q.H,s=t.useState()[0];return s=typeof s.then=="function"?Go(s):s,t=t.useState()[0],(yt!==null?yt.memoizedState:null)!==t&&(Be.flags|=1024),s}function Af(){var t=Uu!==0;return Uu=0,t}function Cf(t,s,l){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~l}function If(t){if(zu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}zu=!1}Dr=0,Zt=yt=Be=null,jl=!1,Fo=Uu=0,Tl=null}function On(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?Be.memoizedState=Zt=t:Zt=Zt.next=t,Zt}function Ft(){if(yt===null){var t=Be.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var s=Zt===null?Be.memoizedState:Zt.next;if(s!==null)Zt=s,yt=t;else{if(t===null)throw Be.alternate===null?Error(a(467)):Error(a(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Zt===null?Be.memoizedState=Zt=t:Zt=Zt.next=t}return Zt}function qu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Go(t){var s=Fo;return Fo+=1,Tl===null&&(Tl=[]),t=Bp(Tl,t,s),s=Be,(Zt===null?s.memoizedState:Zt.next)===null&&(s=s.alternate,q.H=s===null||s.memoizedState===null?Dx:Bf),t}function Bu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Go(t);if(t.$$typeof===oe)return yn(t)}throw Error(a(438,String(t)))}function Rf(t){var s=null,l=Be.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var c=Be.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=qu(),Be.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(t),c=0;c<t;c++)l[c]=R;return s.index++,l}function Or(t,s){return typeof s=="function"?s(t):s}function Hu(t){var s=Ft();return kf(s,yt,t)}function kf(t,s,l){var c=t.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=l;var h=t.baseQueue,m=c.pending;if(m!==null){if(h!==null){var b=h.next;h.next=m.next,m.next=b}s.baseQueue=h=m,c.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{s=h.next;var N=b=null,k=null,G=s,J=!1;do{var se=G.lane&-536870913;if(se!==G.lane?(Xe&se)===se:(Dr&se)===se){var $=G.revertLane;if($===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),se===vl&&(J=!0);else if((Dr&$)===$){G=G.next,$===vl&&(J=!0);continue}else se={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},k===null?(N=k=se,b=m):k=k.next=se,Be.lanes|=$,Aa|=$;se=G.action,Oi&&l(m,se),m=G.hasEagerState?G.eagerState:l(m,se)}else $={lane:se,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},k===null?(N=k=$,b=m):k=k.next=$,Be.lanes|=se,Aa|=se;G=G.next}while(G!==null&&G!==s);if(k===null?b=m:k.next=N,!Wn(m,t.memoizedState)&&(Jt=!0,J&&(l=wl,l!==null)))throw l;t.memoizedState=m,t.baseState=b,t.baseQueue=k,c.lastRenderedState=m}return h===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function Df(t){var s=Ft(),l=s.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=t;var c=l.dispatch,h=l.pending,m=s.memoizedState;if(h!==null){l.pending=null;var b=h=h.next;do m=t(m,b.action),b=b.next;while(b!==h);Wn(m,s.memoizedState)||(Jt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),l.lastRenderedState=m}return[m,c]}function Jp(t,s,l){var c=Be,h=Ft(),m=tt;if(m){if(l===void 0)throw Error(a(407));l=l()}else l=s();var b=!Wn((yt||h).memoizedState,l);if(b&&(h.memoizedState=l,Jt=!0),h=h.queue,Vf(nx.bind(null,c,h,t),[t]),h.getSnapshot!==s||b||Zt!==null&&Zt.memoizedState.tag&1){if(c.flags|=2048,Sl(9,{destroy:void 0},tx.bind(null,c,h,l,s),null),_t===null)throw Error(a(349));m||(Dr&127)!==0||ex(c,s,l)}return l}function ex(t,s,l){t.flags|=16384,t={getSnapshot:s,value:l},s=Be.updateQueue,s===null?(s=qu(),Be.updateQueue=s,s.stores=[t]):(l=s.stores,l===null?s.stores=[t]:l.push(t))}function tx(t,s,l,c){s.value=l,s.getSnapshot=c,sx(s)&&rx(t)}function nx(t,s,l){return l(function(){sx(s)&&rx(t)})}function sx(t){var s=t.getSnapshot;t=t.value;try{var l=s();return!Wn(t,l)}catch{return!0}}function rx(t){var s=ji(t,2);s!==null&&Fn(s,t,2)}function Of(t){var s=On();if(typeof t=="function"){var l=t;if(t=l(),Oi){Mt(!0);try{l()}finally{Mt(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:t},s}function ax(t,s,l,c){return t.baseState=l,kf(t,yt,typeof c=="function"?c:Or)}function gN(t,s,l,c,h){if($u(t))throw Error(a(485));if(t=s.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};q.T!==null?l(!0):m.isTransition=!1,c(m),l=s.pending,l===null?(m.next=s.pending=m,ix(s,m)):(m.next=l.next,s.pending=l.next=m)}}function ix(t,s){var l=s.action,c=s.payload,h=t.state;if(s.isTransition){var m=q.T,b={};q.T=b;try{var N=l(h,c),k=q.S;k!==null&&k(b,N),lx(t,s,N)}catch(G){Mf(t,s,G)}finally{m!==null&&b.types!==null&&(m.types=b.types),q.T=m}}else try{m=l(h,c),lx(t,s,m)}catch(G){Mf(t,s,G)}}function lx(t,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){ox(t,s,c)},function(c){return Mf(t,s,c)}):ox(t,s,l)}function ox(t,s,l){s.status="fulfilled",s.value=l,cx(s),t.state=l,s=t.pending,s!==null&&(l=s.next,l===s?t.pending=null:(l=l.next,s.next=l,ix(t,l)))}function Mf(t,s,l){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=l,cx(s),s=s.next;while(s!==c)}t.action=null}function cx(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function ux(t,s){return s}function dx(t,s){if(tt){var l=_t.formState;if(l!==null){e:{var c=Be;if(tt){if(Tt){t:{for(var h=Tt,m=bs;h.nodeType!==8;){if(!m){h=null;break t}if(h=ws(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){Tt=ws(h.nextSibling),c=h.data==="F!";break e}}ba(c)}c=!1}c&&(s=l[0])}}return l=On(),l.memoizedState=l.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ux,lastRenderedState:s},l.queue=c,l=Ix.bind(null,Be,c),c.dispatch=l,c=Of(!1),m=qf.bind(null,Be,!1,c.queue),c=On(),h={state:s,dispatch:null,action:t,pending:null},c.queue=h,l=gN.bind(null,Be,h,m,l),h.dispatch=l,c.memoizedState=t,[s,l,!1]}function hx(t){var s=Ft();return fx(s,yt,t)}function fx(t,s,l){if(s=kf(t,s,ux)[0],t=Hu(Or)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Go(s)}catch(b){throw b===_l?Du:b}else c=s;s=Ft();var h=s.queue,m=h.dispatch;return l!==s.memoizedState&&(Be.flags|=2048,Sl(9,{destroy:void 0},pN.bind(null,h,l),null)),[c,m,t]}function pN(t,s){t.action=s}function mx(t){var s=Ft(),l=yt;if(l!==null)return fx(s,l,t);Ft(),s=s.memoizedState,l=Ft();var c=l.queue.dispatch;return l.memoizedState=t,[s,c,!1]}function Sl(t,s,l,c){return t={tag:t,create:l,deps:c,inst:s,next:null},s=Be.updateQueue,s===null&&(s=qu(),Be.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=t.next=t:(c=l.next,l.next=t,t.next=c,s.lastEffect=t),t}function gx(){return Ft().memoizedState}function Fu(t,s,l,c){var h=On();Be.flags|=t,h.memoizedState=Sl(1|s,{destroy:void 0},l,c===void 0?null:c)}function Gu(t,s,l,c){var h=Ft();c=c===void 0?null:c;var m=h.memoizedState.inst;yt!==null&&c!==null&&Tf(c,yt.memoizedState.deps)?h.memoizedState=Sl(s,m,l,c):(Be.flags|=t,h.memoizedState=Sl(1|s,m,l,c))}function px(t,s){Fu(8390656,8,t,s)}function Vf(t,s){Gu(2048,8,t,s)}function xN(t){Be.flags|=4;var s=Be.updateQueue;if(s===null)s=qu(),Be.updateQueue=s,s.events=[t];else{var l=s.events;l===null?s.events=[t]:l.push(t)}}function xx(t){var s=Ft().memoizedState;return xN({ref:s,nextImpl:t}),function(){if((dt&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}function yx(t,s){return Gu(4,2,t,s)}function bx(t,s){return Gu(4,4,t,s)}function vx(t,s){if(typeof s=="function"){t=t();var l=s(t);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function wx(t,s,l){l=l!=null?l.concat([t]):null,Gu(4,4,vx.bind(null,s,t),l)}function Lf(){}function _x(t,s){var l=Ft();s=s===void 0?null:s;var c=l.memoizedState;return s!==null&&Tf(s,c[1])?c[0]:(l.memoizedState=[t,s],t)}function Nx(t,s){var l=Ft();s=s===void 0?null:s;var c=l.memoizedState;if(s!==null&&Tf(s,c[1]))return c[0];if(c=t(),Oi){Mt(!0);try{t()}finally{Mt(!1)}}return l.memoizedState=[c,s],c}function Pf(t,s,l){return l===void 0||(Dr&1073741824)!==0&&(Xe&261930)===0?t.memoizedState=s:(t.memoizedState=l,t=Ey(),Be.lanes|=t,Aa|=t,l)}function Ex(t,s,l,c){return Wn(l,s)?l:El.current!==null?(t=Pf(t,l,c),Wn(t,s)||(Jt=!0),t):(Dr&42)===0||(Dr&1073741824)!==0&&(Xe&261930)===0?(Jt=!0,t.memoizedState=l):(t=Ey(),Be.lanes|=t,Aa|=t,s)}function jx(t,s,l,c,h){var m=le.p;le.p=m!==0&&8>m?m:8;var b=q.T,N={};q.T=N,qf(t,!1,s,l);try{var k=h(),G=q.S;if(G!==null&&G(N,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var J=hN(k,c);$o(t,s,J,ss(t))}else $o(t,s,c,ss(t))}catch(se){$o(t,s,{then:function(){},status:"rejected",reason:se},ss())}finally{le.p=m,b!==null&&N.types!==null&&(b.types=N.types),q.T=b}}function yN(){}function zf(t,s,l,c){if(t.tag!==5)throw Error(a(476));var h=Tx(t).queue;jx(t,h,s,Z,l===null?yN:function(){return Sx(t),l(c)})}function Tx(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:Z},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:l},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Sx(t){var s=Tx(t);s.next===null&&(s=t.alternate.memoizedState),$o(t,s.next.queue,{},ss())}function Uf(){return yn(cc)}function Ax(){return Ft().memoizedState}function Cx(){return Ft().memoizedState}function bN(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var l=ss();t=_a(l);var c=Na(s,t,l);c!==null&&(Fn(c,s,l),qo(c,s,l)),s={cache:gf()},t.payload=s;return}s=s.return}}function vN(t,s,l){var c=ss();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},$u(t)?Rx(s,l):(l=sf(t,s,l,c),l!==null&&(Fn(l,t,c),kx(l,s,c)))}function Ix(t,s,l){var c=ss();$o(t,s,l,c)}function $o(t,s,l,c){var h={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if($u(t))Rx(s,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var b=s.lastRenderedState,N=m(b,l);if(h.hasEagerState=!0,h.eagerState=N,Wn(N,b))return Tu(t,s,h,0),_t===null&&ju(),!1}catch{}finally{}if(l=sf(t,s,h,c),l!==null)return Fn(l,t,c),kx(l,s,c),!0}return!1}function qf(t,s,l,c){if(c={lane:2,revertLane:bm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},$u(t)){if(s)throw Error(a(479))}else s=sf(t,l,c,2),s!==null&&Fn(s,t,2)}function $u(t){var s=t.alternate;return t===Be||s!==null&&s===Be}function Rx(t,s){jl=zu=!0;var l=t.pending;l===null?s.next=s:(s.next=l.next,l.next=s),t.pending=s}function kx(t,s,l){if((l&4194048)!==0){var c=s.lanes;c&=t.pendingLanes,l|=c,s.lanes=l,hi(t,l)}}var Qo={readContext:yn,use:Bu,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useLayoutEffect:Pt,useInsertionEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useSyncExternalStore:Pt,useId:Pt,useHostTransitionStatus:Pt,useFormState:Pt,useActionState:Pt,useOptimistic:Pt,useMemoCache:Pt,useCacheRefresh:Pt};Qo.useEffectEvent=Pt;var Dx={readContext:yn,use:Bu,useCallback:function(t,s){return On().memoizedState=[t,s===void 0?null:s],t},useContext:yn,useEffect:px,useImperativeHandle:function(t,s,l){l=l!=null?l.concat([t]):null,Fu(4194308,4,vx.bind(null,s,t),l)},useLayoutEffect:function(t,s){return Fu(4194308,4,t,s)},useInsertionEffect:function(t,s){Fu(4,2,t,s)},useMemo:function(t,s){var l=On();s=s===void 0?null:s;var c=t();if(Oi){Mt(!0);try{t()}finally{Mt(!1)}}return l.memoizedState=[c,s],c},useReducer:function(t,s,l){var c=On();if(l!==void 0){var h=l(s);if(Oi){Mt(!0);try{l(s)}finally{Mt(!1)}}}else h=s;return c.memoizedState=c.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},c.queue=t,t=t.dispatch=vN.bind(null,Be,t),[c.memoizedState,t]},useRef:function(t){var s=On();return t={current:t},s.memoizedState=t},useState:function(t){t=Of(t);var s=t.queue,l=Ix.bind(null,Be,s);return s.dispatch=l,[t.memoizedState,l]},useDebugValue:Lf,useDeferredValue:function(t,s){var l=On();return Pf(l,t,s)},useTransition:function(){var t=Of(!1);return t=jx.bind(null,Be,t.queue,!0,!1),On().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,l){var c=Be,h=On();if(tt){if(l===void 0)throw Error(a(407));l=l()}else{if(l=s(),_t===null)throw Error(a(349));(Xe&127)!==0||ex(c,s,l)}h.memoizedState=l;var m={value:l,getSnapshot:s};return h.queue=m,px(nx.bind(null,c,m,t),[t]),c.flags|=2048,Sl(9,{destroy:void 0},tx.bind(null,c,m,l,s),null),l},useId:function(){var t=On(),s=_t.identifierPrefix;if(tt){var l=or,c=lr;l=(c&~(1<<32-et(c)-1)).toString(32)+l,s="_"+s+"R_"+l,l=Uu++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=fN++,s="_"+s+"r_"+l.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Uf,useFormState:dx,useActionState:dx,useOptimistic:function(t){var s=On();s.memoizedState=s.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=qf.bind(null,Be,!0,l),l.dispatch=s,[t,s]},useMemoCache:Rf,useCacheRefresh:function(){return On().memoizedState=bN.bind(null,Be)},useEffectEvent:function(t){var s=On(),l={impl:t};return s.memoizedState=l,function(){if((dt&2)!==0)throw Error(a(440));return l.impl.apply(void 0,arguments)}}},Bf={readContext:yn,use:Bu,useCallback:_x,useContext:yn,useEffect:Vf,useImperativeHandle:wx,useInsertionEffect:yx,useLayoutEffect:bx,useMemo:Nx,useReducer:Hu,useRef:gx,useState:function(){return Hu(Or)},useDebugValue:Lf,useDeferredValue:function(t,s){var l=Ft();return Ex(l,yt.memoizedState,t,s)},useTransition:function(){var t=Hu(Or)[0],s=Ft().memoizedState;return[typeof t=="boolean"?t:Go(t),s]},useSyncExternalStore:Jp,useId:Ax,useHostTransitionStatus:Uf,useFormState:hx,useActionState:hx,useOptimistic:function(t,s){var l=Ft();return ax(l,yt,t,s)},useMemoCache:Rf,useCacheRefresh:Cx};Bf.useEffectEvent=xx;var Ox={readContext:yn,use:Bu,useCallback:_x,useContext:yn,useEffect:Vf,useImperativeHandle:wx,useInsertionEffect:yx,useLayoutEffect:bx,useMemo:Nx,useReducer:Df,useRef:gx,useState:function(){return Df(Or)},useDebugValue:Lf,useDeferredValue:function(t,s){var l=Ft();return yt===null?Pf(l,t,s):Ex(l,yt.memoizedState,t,s)},useTransition:function(){var t=Df(Or)[0],s=Ft().memoizedState;return[typeof t=="boolean"?t:Go(t),s]},useSyncExternalStore:Jp,useId:Ax,useHostTransitionStatus:Uf,useFormState:mx,useActionState:mx,useOptimistic:function(t,s){var l=Ft();return yt!==null?ax(l,yt,t,s):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:Rf,useCacheRefresh:Cx};Ox.useEffectEvent=xx;function Hf(t,s,l,c){s=t.memoizedState,l=l(c,s),l=l==null?s:w({},s,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var Ff={enqueueSetState:function(t,s,l){t=t._reactInternals;var c=ss(),h=_a(c);h.payload=s,l!=null&&(h.callback=l),s=Na(t,h,c),s!==null&&(Fn(s,t,c),qo(s,t,c))},enqueueReplaceState:function(t,s,l){t=t._reactInternals;var c=ss(),h=_a(c);h.tag=1,h.payload=s,l!=null&&(h.callback=l),s=Na(t,h,c),s!==null&&(Fn(s,t,c),qo(s,t,c))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var l=ss(),c=_a(l);c.tag=2,s!=null&&(c.callback=s),s=Na(t,c,l),s!==null&&(Fn(s,t,l),qo(s,t,l))}};function Mx(t,s,l,c,h,m,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,m,b):s.prototype&&s.prototype.isPureReactComponent?!Do(l,c)||!Do(h,m):!0}function Vx(t,s,l,c){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,c),s.state!==t&&Ff.enqueueReplaceState(s,s.state,null)}function Mi(t,s){var l=s;if("ref"in s){l={};for(var c in s)c!=="ref"&&(l[c]=s[c])}if(t=t.defaultProps){l===s&&(l=w({},l));for(var h in t)l[h]===void 0&&(l[h]=t[h])}return l}function Lx(t){Eu(t)}function Px(t){console.error(t)}function zx(t){Eu(t)}function Qu(t,s){try{var l=t.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function Ux(t,s,l){try{var c=t.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Gf(t,s,l){return l=_a(l),l.tag=3,l.payload={element:null},l.callback=function(){Qu(t,s)},l}function qx(t){return t=_a(t),t.tag=3,t}function Bx(t,s,l,c){var h=l.type.getDerivedStateFromError;if(typeof h=="function"){var m=c.value;t.payload=function(){return h(m)},t.callback=function(){Ux(s,l,c)}}var b=l.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){Ux(s,l,c),typeof h!="function"&&(Ca===null?Ca=new Set([this]):Ca.add(this));var N=c.stack;this.componentDidCatch(c.value,{componentStack:N!==null?N:""})})}function wN(t,s,l,c,h){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=l.alternate,s!==null&&bl(s,l,h,!0),l=Jn.current,l!==null){switch(l.tag){case 31:case 13:return vs===null?ad():l.alternate===null&&zt===0&&(zt=3),l.flags&=-257,l.flags|=65536,l.lanes=h,c===Ou?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([c]):s.add(c),pm(t,c,h)),!1;case 22:return l.flags|=65536,c===Ou?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([c]):l.add(c)),pm(t,c,h)),!1}throw Error(a(435,l.tag))}return pm(t,c,h),ad(),!1}if(tt)return s=Jn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,c!==uf&&(t=Error(a(422),{cause:c}),Vo(ps(t,l)))):(c!==uf&&(s=Error(a(423),{cause:c}),Vo(ps(s,l))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,c=ps(c,l),h=Gf(t.stateNode,c,h),wf(t,h),zt!==4&&(zt=2)),!1;var m=Error(a(520),{cause:c});if(m=ps(m,l),tc===null?tc=[m]:tc.push(m),zt!==4&&(zt=2),s===null)return!0;c=ps(c,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,t=h&-h,l.lanes|=t,t=Gf(l.stateNode,c,t),wf(l,t),!1;case 1:if(s=l.type,m=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ca===null||!Ca.has(m))))return l.flags|=65536,h&=-h,l.lanes|=h,h=qx(h),Bx(h,t,l,c),wf(l,h),!1}l=l.return}while(l!==null);return!1}var $f=Error(a(461)),Jt=!1;function bn(t,s,l,c){s.child=t===null?$p(s,null,l,c):Di(s,t.child,l,c)}function Hx(t,s,l,c,h){l=l.render;var m=s.ref;if("ref"in c){var b={};for(var N in c)N!=="ref"&&(b[N]=c[N])}else b=c;return Ci(s),c=Sf(t,s,l,b,m,h),N=Af(),t!==null&&!Jt?(Cf(t,s,h),Mr(t,s,h)):(tt&&N&&of(s),s.flags|=1,bn(t,s,c,h),s.child)}function Fx(t,s,l,c,h){if(t===null){var m=l.type;return typeof m=="function"&&!rf(m)&&m.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=m,Gx(t,s,m,c,h)):(t=Au(l.type,null,c,s,s.mode,h),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!em(t,h)){var b=m.memoizedProps;if(l=l.compare,l=l!==null?l:Do,l(b,c)&&t.ref===s.ref)return Mr(t,s,h)}return s.flags|=1,t=Cr(m,c),t.ref=s.ref,t.return=s,s.child=t}function Gx(t,s,l,c,h){if(t!==null){var m=t.memoizedProps;if(Do(m,c)&&t.ref===s.ref)if(Jt=!1,s.pendingProps=c=m,em(t,h))(t.flags&131072)!==0&&(Jt=!0);else return s.lanes=t.lanes,Mr(t,s,h)}return Qf(t,s,l,c,h)}function $x(t,s,l,c){var h=c.children,m=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|l:l,t!==null){for(c=s.child=t.child,h=0;c!==null;)h=h|c.lanes|c.childLanes,c=c.sibling;c=h&~m}else c=0,s.child=null;return Qx(t,s,m,l,c)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&ku(s,m!==null?m.cachePool:null),m!==null?Xp(s,m):Nf(),Yp(s);else return c=s.lanes=536870912,Qx(t,s,m!==null?m.baseLanes|l:l,l,c)}else m!==null?(ku(s,m.cachePool),Xp(s,m),ja(),s.memoizedState=null):(t!==null&&ku(s,null),Nf(),ja());return bn(t,s,h,l),s.child}function Ko(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Qx(t,s,l,c,h){var m=xf();return m=m===null?null:{parent:Wt._currentValue,pool:m},s.memoizedState={baseLanes:l,cachePool:m},t!==null&&ku(s,null),Nf(),Yp(s),t!==null&&bl(t,s,c,!0),s.childLanes=h,null}function Ku(t,s){return s=Yu({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function Kx(t,s,l){return Di(s,t.child,null,l),t=Ku(s,s.pendingProps),t.flags|=2,es(s),s.memoizedState=null,t}function _N(t,s,l){var c=s.pendingProps,h=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(tt){if(c.mode==="hidden")return t=Ku(s,c),s.lanes=536870912,Ko(null,t);if(jf(s),(t=Tt)?(t=ib(t,bs),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:xa!==null?{id:lr,overflow:or}:null,retryLane:536870912,hydrationErrors:null},l=Rp(t),l.return=s,s.child=l,xn=s,Tt=null)):t=null,t===null)throw ba(s);return s.lanes=536870912,null}return Ku(s,c)}var m=t.memoizedState;if(m!==null){var b=m.dehydrated;if(jf(s),h)if(s.flags&256)s.flags&=-257,s=Kx(t,s,l);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(a(558));else if(Jt||bl(t,s,l,!1),h=(l&t.childLanes)!==0,Jt||h){if(c=_t,c!==null&&(b=go(c,l),b!==0&&b!==m.retryLane))throw m.retryLane=b,ji(t,b),Fn(c,t,b),$f;ad(),s=Kx(t,s,l)}else t=m.treeContext,Tt=ws(b.nextSibling),xn=s,tt=!0,ya=null,bs=!1,t!==null&&Op(s,t),s=Ku(s,c),s.flags|=4096;return s}return t=Cr(t.child,{mode:c.mode,children:c.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Xu(t,s){var l=s.ref;if(l===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(a(284));(t===null||t.ref!==l)&&(s.flags|=4194816)}}function Qf(t,s,l,c,h){return Ci(s),l=Sf(t,s,l,c,void 0,h),c=Af(),t!==null&&!Jt?(Cf(t,s,h),Mr(t,s,h)):(tt&&c&&of(s),s.flags|=1,bn(t,s,l,h),s.child)}function Xx(t,s,l,c,h,m){return Ci(s),s.updateQueue=null,l=Zp(s,c,l,h),Wp(t),c=Af(),t!==null&&!Jt?(Cf(t,s,m),Mr(t,s,m)):(tt&&c&&of(s),s.flags|=1,bn(t,s,l,m),s.child)}function Yx(t,s,l,c,h){if(Ci(s),s.stateNode===null){var m=gl,b=l.contextType;typeof b=="object"&&b!==null&&(m=yn(b)),m=new l(c,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Ff,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=c,m.state=s.memoizedState,m.refs={},bf(s),b=l.contextType,m.context=typeof b=="object"&&b!==null?yn(b):gl,m.state=s.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(Hf(s,l,b,c),m.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&Ff.enqueueReplaceState(m,m.state,null),Ho(s,c,m,h),Bo(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(t===null){m=s.stateNode;var N=s.memoizedProps,k=Mi(l,N);m.props=k;var G=m.context,J=l.contextType;b=gl,typeof J=="object"&&J!==null&&(b=yn(J));var se=l.getDerivedStateFromProps;J=typeof se=="function"||typeof m.getSnapshotBeforeUpdate=="function",N=s.pendingProps!==N,J||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(N||G!==b)&&Vx(s,m,c,b),wa=!1;var $=s.memoizedState;m.state=$,Ho(s,c,m,h),Bo(),G=s.memoizedState,N||$!==G||wa?(typeof se=="function"&&(Hf(s,l,se,c),G=s.memoizedState),(k=wa||Mx(s,l,k,c,$,G,b))?(J||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=G),m.props=c,m.state=G,m.context=b,c=k):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{m=s.stateNode,vf(t,s),b=s.memoizedProps,J=Mi(l,b),m.props=J,se=s.pendingProps,$=m.context,G=l.contextType,k=gl,typeof G=="object"&&G!==null&&(k=yn(G)),N=l.getDerivedStateFromProps,(G=typeof N=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==se||$!==k)&&Vx(s,m,c,k),wa=!1,$=s.memoizedState,m.state=$,Ho(s,c,m,h),Bo();var X=s.memoizedState;b!==se||$!==X||wa||t!==null&&t.dependencies!==null&&Iu(t.dependencies)?(typeof N=="function"&&(Hf(s,l,N,c),X=s.memoizedState),(J=wa||Mx(s,l,J,c,$,X,k)||t!==null&&t.dependencies!==null&&Iu(t.dependencies))?(G||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,X,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,X,k)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&$===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&$===t.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=X),m.props=c,m.state=X,m.context=k,c=J):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&$===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&$===t.memoizedState||(s.flags|=1024),c=!1)}return m=c,Xu(t,s),c=(s.flags&128)!==0,m||c?(m=s.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&c?(s.child=Di(s,t.child,null,h),s.child=Di(s,null,l,h)):bn(t,s,l,h),s.memoizedState=m.state,t=s.child):t=Mr(t,s,h),t}function Wx(t,s,l,c){return Si(),s.flags|=256,bn(t,s,l,c),s.child}var Kf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xf(t){return{baseLanes:t,cachePool:Up()}}function Yf(t,s,l){return t=t!==null?t.childLanes&~l:0,s&&(t|=ns),t}function Zx(t,s,l){var c=s.pendingProps,h=!1,m=(s.flags&128)!==0,b;if((b=m)||(b=t!==null&&t.memoizedState===null?!1:(Ht.current&2)!==0),b&&(h=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,t===null){if(tt){if(h?Ea(s):ja(),(t=Tt)?(t=ib(t,bs),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:xa!==null?{id:lr,overflow:or}:null,retryLane:536870912,hydrationErrors:null},l=Rp(t),l.return=s,s.child=l,xn=s,Tt=null)):t=null,t===null)throw ba(s);return km(t)?s.lanes=32:s.lanes=536870912,null}var N=c.children;return c=c.fallback,h?(ja(),h=s.mode,N=Yu({mode:"hidden",children:N},h),c=Ti(c,h,l,null),N.return=s,c.return=s,N.sibling=c,s.child=N,c=s.child,c.memoizedState=Xf(l),c.childLanes=Yf(t,b,l),s.memoizedState=Kf,Ko(null,c)):(Ea(s),Wf(s,N))}var k=t.memoizedState;if(k!==null&&(N=k.dehydrated,N!==null)){if(m)s.flags&256?(Ea(s),s.flags&=-257,s=Zf(t,s,l)):s.memoizedState!==null?(ja(),s.child=t.child,s.flags|=128,s=null):(ja(),N=c.fallback,h=s.mode,c=Yu({mode:"visible",children:c.children},h),N=Ti(N,h,l,null),N.flags|=2,c.return=s,N.return=s,c.sibling=N,s.child=c,Di(s,t.child,null,l),c=s.child,c.memoizedState=Xf(l),c.childLanes=Yf(t,b,l),s.memoizedState=Kf,s=Ko(null,c));else if(Ea(s),km(N)){if(b=N.nextSibling&&N.nextSibling.dataset,b)var G=b.dgst;b=G,c=Error(a(419)),c.stack="",c.digest=b,Vo({value:c,source:null,stack:null}),s=Zf(t,s,l)}else if(Jt||bl(t,s,l,!1),b=(l&t.childLanes)!==0,Jt||b){if(b=_t,b!==null&&(c=go(b,l),c!==0&&c!==k.retryLane))throw k.retryLane=c,ji(t,c),Fn(b,t,c),$f;Rm(N)||ad(),s=Zf(t,s,l)}else Rm(N)?(s.flags|=192,s.child=t.child,s=null):(t=k.treeContext,Tt=ws(N.nextSibling),xn=s,tt=!0,ya=null,bs=!1,t!==null&&Op(s,t),s=Wf(s,c.children),s.flags|=4096);return s}return h?(ja(),N=c.fallback,h=s.mode,k=t.child,G=k.sibling,c=Cr(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&65011712,G!==null?N=Cr(G,N):(N=Ti(N,h,l,null),N.flags|=2),N.return=s,c.return=s,c.sibling=N,s.child=c,Ko(null,c),c=s.child,N=t.child.memoizedState,N===null?N=Xf(l):(h=N.cachePool,h!==null?(k=Wt._currentValue,h=h.parent!==k?{parent:k,pool:k}:h):h=Up(),N={baseLanes:N.baseLanes|l,cachePool:h}),c.memoizedState=N,c.childLanes=Yf(t,b,l),s.memoizedState=Kf,Ko(t.child,c)):(Ea(s),l=t.child,t=l.sibling,l=Cr(l,{mode:"visible",children:c.children}),l.return=s,l.sibling=null,t!==null&&(b=s.deletions,b===null?(s.deletions=[t],s.flags|=16):b.push(t)),s.child=l,s.memoizedState=null,l)}function Wf(t,s){return s=Yu({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Yu(t,s){return t=Zn(22,t,null,s),t.lanes=0,t}function Zf(t,s,l){return Di(s,t.child,null,l),t=Wf(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Jx(t,s,l){t.lanes|=s;var c=t.alternate;c!==null&&(c.lanes|=s),ff(t.return,s,l)}function Jf(t,s,l,c,h,m){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:h,treeForkCount:m}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=c,b.tail=l,b.tailMode=h,b.treeForkCount=m)}function ey(t,s,l){var c=s.pendingProps,h=c.revealOrder,m=c.tail;c=c.children;var b=Ht.current,N=(b&2)!==0;if(N?(b=b&1|2,s.flags|=128):b&=1,P(Ht,b),bn(t,s,c,l),c=tt?Mo:0,!N&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Jx(t,l,s);else if(t.tag===19)Jx(t,l,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(l=s.child,h=null;l!==null;)t=l.alternate,t!==null&&Pu(t)===null&&(h=l),l=l.sibling;l=h,l===null?(h=s.child,s.child=null):(h=l.sibling,l.sibling=null),Jf(s,!1,h,l,m,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,h=s.child,s.child=null;h!==null;){if(t=h.alternate,t!==null&&Pu(t)===null){s.child=h;break}t=h.sibling,h.sibling=l,l=h,h=t}Jf(s,!0,l,null,m,c);break;case"together":Jf(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function Mr(t,s,l){if(t!==null&&(s.dependencies=t.dependencies),Aa|=s.lanes,(l&s.childLanes)===0)if(t!==null){if(bl(t,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(a(153));if(s.child!==null){for(t=s.child,l=Cr(t,t.pendingProps),s.child=l,l.return=s;t.sibling!==null;)t=t.sibling,l=l.sibling=Cr(t,t.pendingProps),l.return=s;l.sibling=null}return s.child}function em(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Iu(t)))}function NN(t,s,l){switch(s.tag){case 3:rt(s,s.stateNode.containerInfo),va(s,Wt,t.memoizedState.cache),Si();break;case 27:case 5:Et(s);break;case 4:rt(s,s.stateNode.containerInfo);break;case 10:va(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,jf(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Ea(s),s.flags|=128,null):(l&s.child.childLanes)!==0?Zx(t,s,l):(Ea(s),t=Mr(t,s,l),t!==null?t.sibling:null);Ea(s);break;case 19:var h=(t.flags&128)!==0;if(c=(l&s.childLanes)!==0,c||(bl(t,s,l,!1),c=(l&s.childLanes)!==0),h){if(c)return ey(t,s,l);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),P(Ht,Ht.current),c)break;return null;case 22:return s.lanes=0,$x(t,s,l,s.pendingProps);case 24:va(s,Wt,t.memoizedState.cache)}return Mr(t,s,l)}function ty(t,s,l){if(t!==null)if(t.memoizedProps!==s.pendingProps)Jt=!0;else{if(!em(t,l)&&(s.flags&128)===0)return Jt=!1,NN(t,s,l);Jt=(t.flags&131072)!==0}else Jt=!1,tt&&(s.flags&1048576)!==0&&Dp(s,Mo,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(t=Ri(s.elementType),s.type=t,typeof t=="function")rf(t)?(c=Mi(t,c),s.tag=1,s=Yx(null,s,t,c,l)):(s.tag=0,s=Qf(null,s,t,c,l));else{if(t!=null){var h=t.$$typeof;if(h===we){s.tag=11,s=Hx(null,s,t,c,l);break e}else if(h===S){s.tag=14,s=Fx(null,s,t,c,l);break e}}throw s=ie(t)||t,Error(a(306,s,""))}}return s;case 0:return Qf(t,s,s.type,s.pendingProps,l);case 1:return c=s.type,h=Mi(c,s.pendingProps),Yx(t,s,c,h,l);case 3:e:{if(rt(s,s.stateNode.containerInfo),t===null)throw Error(a(387));c=s.pendingProps;var m=s.memoizedState;h=m.element,vf(t,s),Ho(s,c,null,l);var b=s.memoizedState;if(c=b.cache,va(s,Wt,c),c!==m.cache&&mf(s,[Wt],l,!0),Bo(),c=b.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Wx(t,s,c,l);break e}else if(c!==h){h=ps(Error(a(424)),s),Vo(h),s=Wx(t,s,c,l);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Tt=ws(t.firstChild),xn=s,tt=!0,ya=null,bs=!0,l=$p(s,null,c,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Si(),c===h){s=Mr(t,s,l);break e}bn(t,s,c,l)}s=s.child}return s;case 26:return Xu(t,s),t===null?(l=hb(s.type,null,s.pendingProps,null))?s.memoizedState=l:tt||(l=s.type,t=s.pendingProps,c=hd(Ae.current).createElement(l),c[Kt]=s,c[un]=t,vn(c,l,t),Xt(c),s.stateNode=c):s.memoizedState=hb(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Et(s),t===null&&tt&&(c=s.stateNode=cb(s.type,s.pendingProps,Ae.current),xn=s,bs=!0,h=Tt,Da(s.type)?(Dm=h,Tt=ws(c.firstChild)):Tt=h),bn(t,s,s.pendingProps.children,l),Xu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&tt&&((h=c=Tt)&&(c=JN(c,s.type,s.pendingProps,bs),c!==null?(s.stateNode=c,xn=s,Tt=ws(c.firstChild),bs=!1,h=!0):h=!1),h||ba(s)),Et(s),h=s.type,m=s.pendingProps,b=t!==null?t.memoizedProps:null,c=m.children,Am(h,m)?c=null:b!==null&&Am(h,b)&&(s.flags|=32),s.memoizedState!==null&&(h=Sf(t,s,mN,null,null,l),cc._currentValue=h),Xu(t,s),bn(t,s,c,l),s.child;case 6:return t===null&&tt&&((t=l=Tt)&&(l=eE(l,s.pendingProps,bs),l!==null?(s.stateNode=l,xn=s,Tt=null,t=!0):t=!1),t||ba(s)),null;case 13:return Zx(t,s,l);case 4:return rt(s,s.stateNode.containerInfo),c=s.pendingProps,t===null?s.child=Di(s,null,c,l):bn(t,s,c,l),s.child;case 11:return Hx(t,s,s.type,s.pendingProps,l);case 7:return bn(t,s,s.pendingProps,l),s.child;case 8:return bn(t,s,s.pendingProps.children,l),s.child;case 12:return bn(t,s,s.pendingProps.children,l),s.child;case 10:return c=s.pendingProps,va(s,s.type,c.value),bn(t,s,c.children,l),s.child;case 9:return h=s.type._context,c=s.pendingProps.children,Ci(s),h=yn(h),c=c(h),s.flags|=1,bn(t,s,c,l),s.child;case 14:return Fx(t,s,s.type,s.pendingProps,l);case 15:return Gx(t,s,s.type,s.pendingProps,l);case 19:return ey(t,s,l);case 31:return _N(t,s,l);case 22:return $x(t,s,l,s.pendingProps);case 24:return Ci(s),c=yn(Wt),t===null?(h=xf(),h===null&&(h=_t,m=gf(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=l),h=m),s.memoizedState={parent:c,cache:h},bf(s),va(s,Wt,h)):((t.lanes&l)!==0&&(vf(t,s),Ho(s,null,null,l),Bo()),h=t.memoizedState,m=s.memoizedState,h.parent!==c?(h={parent:c,cache:c},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),va(s,Wt,c)):(c=m.cache,va(s,Wt,c),c!==h.cache&&mf(s,[Wt],l,!0))),bn(t,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}function Vr(t){t.flags|=4}function tm(t,s,l,c,h){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(Ay())t.flags|=8192;else throw ki=Ou,yf}else t.flags&=-16777217}function ny(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!xb(s))if(Ay())t.flags|=8192;else throw ki=Ou,yf}function Wu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?wt():536870912,t.lanes|=s,Rl|=s)}function Xo(t,s){if(!tt)switch(t.tailMode){case"hidden":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function St(t){var s=t.alternate!==null&&t.alternate.child===t.child,l=0,c=0;if(s)for(var h=t.child;h!==null;)l|=h.lanes|h.childLanes,c|=h.subtreeFlags&65011712,c|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)l|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=c,t.childLanes=l,s}function EN(t,s,l){var c=s.pendingProps;switch(cf(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(s),null;case 1:return St(s),null;case 3:return l=s.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),kr(Wt),Ce(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(yl(s)?Vr(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,df())),St(s),null;case 26:var h=s.type,m=s.memoizedState;return t===null?(Vr(s),m!==null?(St(s),ny(s,m)):(St(s),tm(s,h,null,c,l))):m?m!==t.memoizedState?(Vr(s),St(s),ny(s,m)):(St(s),s.flags&=-16777217):(t=t.memoizedProps,t!==c&&Vr(s),St(s),tm(s,h,t,c,l)),null;case 27:if(ft(s),l=Ae.current,h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==c&&Vr(s);else{if(!c){if(s.stateNode===null)throw Error(a(166));return St(s),null}t=W.current,yl(s)?Mp(s):(t=cb(h,c,l),s.stateNode=t,Vr(s))}return St(s),null;case 5:if(ft(s),h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==c&&Vr(s);else{if(!c){if(s.stateNode===null)throw Error(a(166));return St(s),null}if(m=W.current,yl(s))Mp(s);else{var b=hd(Ae.current);switch(m){case 1:m=b.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=b.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=b.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=b.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=b.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?b.createElement("select",{is:c.is}):b.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?b.createElement(h,{is:c.is}):b.createElement(h)}}m[Kt]=s,m[un]=c;e:for(b=s.child;b!==null;){if(b.tag===5||b.tag===6)m.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===s)break e;for(;b.sibling===null;){if(b.return===null||b.return===s)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}s.stateNode=m;e:switch(vn(m,h,c),h){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Vr(s)}}return St(s),tm(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,l),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==c&&Vr(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(a(166));if(t=Ae.current,yl(s)){if(t=s.stateNode,l=s.memoizedProps,c=null,h=xn,h!==null)switch(h.tag){case 27:case 5:c=h.memoizedProps}t[Kt]=s,t=!!(t.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||Zy(t.nodeValue,l)),t||ba(s,!0)}else t=hd(t).createTextNode(c),t[Kt]=s,s.stateNode=t}return St(s),null;case 31:if(l=s.memoizedState,t===null||t.memoizedState!==null){if(c=yl(s),l!==null){if(t===null){if(!c)throw Error(a(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[Kt]=s}else Si(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;St(s),t=!1}else l=df(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),t=!0;if(!t)return s.flags&256?(es(s),s):(es(s),null);if((s.flags&128)!==0)throw Error(a(558))}return St(s),null;case 13:if(c=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=yl(s),c!==null&&c.dehydrated!==null){if(t===null){if(!h)throw Error(a(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[Kt]=s}else Si(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;St(s),h=!1}else h=df(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(es(s),s):(es(s),null)}return es(s),(s.flags&128)!==0?(s.lanes=l,s):(l=c!==null,t=t!==null&&t.memoizedState!==null,l&&(c=s.child,h=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(h=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==h&&(c.flags|=2048)),l!==t&&l&&(s.child.flags|=8192),Wu(s,s.updateQueue),St(s),null);case 4:return Ce(),t===null&&Nm(s.stateNode.containerInfo),St(s),null;case 10:return kr(s.type),St(s),null;case 19:if(Y(Ht),c=s.memoizedState,c===null)return St(s),null;if(h=(s.flags&128)!==0,m=c.rendering,m===null)if(h)Xo(c,!1);else{if(zt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=Pu(t),m!==null){for(s.flags|=128,Xo(c,!1),t=m.updateQueue,s.updateQueue=t,Wu(s,t),s.subtreeFlags=0,t=l,l=s.child;l!==null;)Ip(l,t),l=l.sibling;return P(Ht,Ht.current&1|2),tt&&Ir(s,c.treeForkCount),s.child}t=t.sibling}c.tail!==null&&kt()>nd&&(s.flags|=128,h=!0,Xo(c,!1),s.lanes=4194304)}else{if(!h)if(t=Pu(m),t!==null){if(s.flags|=128,h=!0,t=t.updateQueue,s.updateQueue=t,Wu(s,t),Xo(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!tt)return St(s),null}else 2*kt()-c.renderingStartTime>nd&&l!==536870912&&(s.flags|=128,h=!0,Xo(c,!1),s.lanes=4194304);c.isBackwards?(m.sibling=s.child,s.child=m):(t=c.last,t!==null?t.sibling=m:s.child=m,c.last=m)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=kt(),t.sibling=null,l=Ht.current,P(Ht,h?l&1|2:l&1),tt&&Ir(s,c.treeForkCount),t):(St(s),null);case 22:case 23:return es(s),Ef(),c=s.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(l&536870912)!==0&&(s.flags&128)===0&&(St(s),s.subtreeFlags&6&&(s.flags|=8192)):St(s),l=s.updateQueue,l!==null&&Wu(s,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==l&&(s.flags|=2048),t!==null&&Y(Ii),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),kr(Wt),St(s),null;case 25:return null;case 30:return null}throw Error(a(156,s.tag))}function jN(t,s){switch(cf(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return kr(Wt),Ce(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return ft(s),null;case 31:if(s.memoizedState!==null){if(es(s),s.alternate===null)throw Error(a(340));Si()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(es(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(a(340));Si()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Y(Ht),null;case 4:return Ce(),null;case 10:return kr(s.type),null;case 22:case 23:return es(s),Ef(),t!==null&&Y(Ii),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return kr(Wt),null;case 25:return null;default:return null}}function sy(t,s){switch(cf(s),s.tag){case 3:kr(Wt),Ce();break;case 26:case 27:case 5:ft(s);break;case 4:Ce();break;case 31:s.memoizedState!==null&&es(s);break;case 13:es(s);break;case 19:Y(Ht);break;case 10:kr(s.type);break;case 22:case 23:es(s),Ef(),t!==null&&Y(Ii);break;case 24:kr(Wt)}}function Yo(t,s){try{var l=s.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var h=c.next;l=h;do{if((l.tag&t)===t){c=void 0;var m=l.create,b=l.inst;c=m(),b.destroy=c}l=l.next}while(l!==h)}}catch(N){pt(s,s.return,N)}}function Ta(t,s,l){try{var c=s.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var m=h.next;c=m;do{if((c.tag&t)===t){var b=c.inst,N=b.destroy;if(N!==void 0){b.destroy=void 0,h=s;var k=l,G=N;try{G()}catch(J){pt(h,k,J)}}}c=c.next}while(c!==m)}}catch(J){pt(s,s.return,J)}}function ry(t){var s=t.updateQueue;if(s!==null){var l=t.stateNode;try{Kp(s,l)}catch(c){pt(t,t.return,c)}}}function ay(t,s,l){l.props=Mi(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(c){pt(t,s,c)}}function Wo(t,s){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof l=="function"?t.refCleanup=l(c):l.current=c}}catch(h){pt(t,s,h)}}function cr(t,s){var l=t.ref,c=t.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(h){pt(t,s,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(h){pt(t,s,h)}else l.current=null}function iy(t){var s=t.type,l=t.memoizedProps,c=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(h){pt(t,t.return,h)}}function nm(t,s,l){try{var c=t.stateNode;QN(c,t.type,l,s),c[un]=s}catch(h){pt(t,t.return,h)}}function ly(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Da(t.type)||t.tag===4}function sm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ly(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Da(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rm(t,s,l){var c=t.tag;if(c===5||c===6)t=t.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(t),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=ks));else if(c!==4&&(c===27&&Da(t.type)&&(l=t.stateNode,s=null),t=t.child,t!==null))for(rm(t,s,l),t=t.sibling;t!==null;)rm(t,s,l),t=t.sibling}function Zu(t,s,l){var c=t.tag;if(c===5||c===6)t=t.stateNode,s?l.insertBefore(t,s):l.appendChild(t);else if(c!==4&&(c===27&&Da(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(Zu(t,s,l),t=t.sibling;t!==null;)Zu(t,s,l),t=t.sibling}function oy(t){var s=t.stateNode,l=t.memoizedProps;try{for(var c=t.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);vn(s,c,l),s[Kt]=t,s[un]=l}catch(m){pt(t,t.return,m)}}var Lr=!1,en=!1,am=!1,cy=typeof WeakSet=="function"?WeakSet:Set,hn=null;function TN(t,s){if(t=t.containerInfo,Tm=bd,t=wp(t),Wh(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var h=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var b=0,N=-1,k=-1,G=0,J=0,se=t,$=null;t:for(;;){for(var X;se!==l||h!==0&&se.nodeType!==3||(N=b+h),se!==m||c!==0&&se.nodeType!==3||(k=b+c),se.nodeType===3&&(b+=se.nodeValue.length),(X=se.firstChild)!==null;)$=se,se=X;for(;;){if(se===t)break t;if($===l&&++G===h&&(N=b),$===m&&++J===c&&(k=b),(X=se.nextSibling)!==null)break;se=$,$=se.parentNode}se=X}l=N===-1||k===-1?null:{start:N,end:k}}else l=null}l=l||{start:0,end:0}}else l=null;for(Sm={focusedElem:t,selectionRange:l},bd=!1,hn=s;hn!==null;)if(s=hn,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,hn=t;else for(;hn!==null;){switch(s=hn,m=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(l=0;l<t.length;l++)h=t[l],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,l=s,h=m.memoizedProps,m=m.memoizedState,c=l.stateNode;try{var _e=Mi(l.type,h);t=c.getSnapshotBeforeUpdate(_e,m),c.__reactInternalSnapshotBeforeUpdate=t}catch(Re){pt(l,l.return,Re)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,l=t.nodeType,l===9)Im(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Im(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=s.sibling,t!==null){t.return=s.return,hn=t;break}hn=s.return}}function uy(t,s,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:zr(t,l),c&4&&Yo(5,l);break;case 1:if(zr(t,l),c&4)if(t=l.stateNode,s===null)try{t.componentDidMount()}catch(b){pt(l,l.return,b)}else{var h=Mi(l.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(h,s,t.__reactInternalSnapshotBeforeUpdate)}catch(b){pt(l,l.return,b)}}c&64&&ry(l),c&512&&Wo(l,l.return);break;case 3:if(zr(t,l),c&64&&(t=l.updateQueue,t!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{Kp(t,s)}catch(b){pt(l,l.return,b)}}break;case 27:s===null&&c&4&&oy(l);case 26:case 5:zr(t,l),s===null&&c&4&&iy(l),c&512&&Wo(l,l.return);break;case 12:zr(t,l);break;case 31:zr(t,l),c&4&&fy(t,l);break;case 13:zr(t,l),c&4&&my(t,l),c&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=MN.bind(null,l),tE(t,l))));break;case 22:if(c=l.memoizedState!==null||Lr,!c){s=s!==null&&s.memoizedState!==null||en,h=Lr;var m=en;Lr=c,(en=s)&&!m?Ur(t,l,(l.subtreeFlags&8772)!==0):zr(t,l),Lr=h,en=m}break;case 30:break;default:zr(t,l)}}function dy(t){var s=t.alternate;s!==null&&(t.alternate=null,dy(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&tl(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ot=null,Un=!1;function Pr(t,s,l){for(l=l.child;l!==null;)hy(t,s,l),l=l.sibling}function hy(t,s,l){if(Qe&&typeof Qe.onCommitFiberUnmount=="function")try{Qe.onCommitFiberUnmount(Le,l)}catch{}switch(l.tag){case 26:en||cr(l,s),Pr(t,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:en||cr(l,s);var c=Ot,h=Un;Da(l.type)&&(Ot=l.stateNode,Un=!1),Pr(t,s,l),ic(l.stateNode),Ot=c,Un=h;break;case 5:en||cr(l,s);case 6:if(c=Ot,h=Un,Ot=null,Pr(t,s,l),Ot=c,Un=h,Ot!==null)if(Un)try{(Ot.nodeType===9?Ot.body:Ot.nodeName==="HTML"?Ot.ownerDocument.body:Ot).removeChild(l.stateNode)}catch(m){pt(l,s,m)}else try{Ot.removeChild(l.stateNode)}catch(m){pt(l,s,m)}break;case 18:Ot!==null&&(Un?(t=Ot,rb(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),zl(t)):rb(Ot,l.stateNode));break;case 4:c=Ot,h=Un,Ot=l.stateNode.containerInfo,Un=!0,Pr(t,s,l),Ot=c,Un=h;break;case 0:case 11:case 14:case 15:Ta(2,l,s),en||Ta(4,l,s),Pr(t,s,l);break;case 1:en||(cr(l,s),c=l.stateNode,typeof c.componentWillUnmount=="function"&&ay(l,s,c)),Pr(t,s,l);break;case 21:Pr(t,s,l);break;case 22:en=(c=en)||l.memoizedState!==null,Pr(t,s,l),en=c;break;default:Pr(t,s,l)}}function fy(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{zl(t)}catch(l){pt(s,s.return,l)}}}function my(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{zl(t)}catch(l){pt(s,s.return,l)}}function SN(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new cy),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new cy),s;default:throw Error(a(435,t.tag))}}function Ju(t,s){var l=SN(t);s.forEach(function(c){if(!l.has(c)){l.add(c);var h=VN.bind(null,t,c);c.then(h,h)}})}function qn(t,s){var l=s.deletions;if(l!==null)for(var c=0;c<l.length;c++){var h=l[c],m=t,b=s,N=b;e:for(;N!==null;){switch(N.tag){case 27:if(Da(N.type)){Ot=N.stateNode,Un=!1;break e}break;case 5:Ot=N.stateNode,Un=!1;break e;case 3:case 4:Ot=N.stateNode.containerInfo,Un=!0;break e}N=N.return}if(Ot===null)throw Error(a(160));hy(m,b,h),Ot=null,Un=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)gy(s,t),s=s.sibling}var Ps=null;function gy(t,s){var l=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:qn(s,t),Bn(t),c&4&&(Ta(3,t,t.return),Yo(3,t),Ta(5,t,t.return));break;case 1:qn(s,t),Bn(t),c&512&&(en||l===null||cr(l,l.return)),c&64&&Lr&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var h=Ps;if(qn(s,t),Bn(t),c&512&&(en||l===null||cr(l,l.return)),c&4){var m=l!==null?l.memoizedState:null;if(c=t.memoizedState,l===null)if(c===null)if(t.stateNode===null){e:{c=t.type,l=t.memoizedProps,h=h.ownerDocument||h;t:switch(c){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Xs]||m[Kt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(c),h.head.insertBefore(m,h.querySelector("head > title"))),vn(m,c,l),m[Kt]=t,Xt(m),c=m;break e;case"link":var b=gb("link","href",h).get(c+(l.href||""));if(b){for(var N=0;N<b.length;N++)if(m=b[N],m.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&m.getAttribute("rel")===(l.rel==null?null:l.rel)&&m.getAttribute("title")===(l.title==null?null:l.title)&&m.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){b.splice(N,1);break t}}m=h.createElement(c),vn(m,c,l),h.head.appendChild(m);break;case"meta":if(b=gb("meta","content",h).get(c+(l.content||""))){for(N=0;N<b.length;N++)if(m=b[N],m.getAttribute("content")===(l.content==null?null:""+l.content)&&m.getAttribute("name")===(l.name==null?null:l.name)&&m.getAttribute("property")===(l.property==null?null:l.property)&&m.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&m.getAttribute("charset")===(l.charSet==null?null:l.charSet)){b.splice(N,1);break t}}m=h.createElement(c),vn(m,c,l),h.head.appendChild(m);break;default:throw Error(a(468,c))}m[Kt]=t,Xt(m),c=m}t.stateNode=c}else pb(h,t.type,t.stateNode);else t.stateNode=mb(h,c,t.memoizedProps);else m!==c?(m===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):m.count--,c===null?pb(h,t.type,t.stateNode):mb(h,c,t.memoizedProps)):c===null&&t.stateNode!==null&&nm(t,t.memoizedProps,l.memoizedProps)}break;case 27:qn(s,t),Bn(t),c&512&&(en||l===null||cr(l,l.return)),l!==null&&c&4&&nm(t,t.memoizedProps,l.memoizedProps);break;case 5:if(qn(s,t),Bn(t),c&512&&(en||l===null||cr(l,l.return)),t.flags&32){h=t.stateNode;try{zn(h,"")}catch(_e){pt(t,t.return,_e)}}c&4&&t.stateNode!=null&&(h=t.memoizedProps,nm(t,h,l!==null?l.memoizedProps:h)),c&1024&&(am=!0);break;case 6:if(qn(s,t),Bn(t),c&4){if(t.stateNode===null)throw Error(a(162));c=t.memoizedProps,l=t.stateNode;try{l.nodeValue=c}catch(_e){pt(t,t.return,_e)}}break;case 3:if(gd=null,h=Ps,Ps=fd(s.containerInfo),qn(s,t),Ps=h,Bn(t),c&4&&l!==null&&l.memoizedState.isDehydrated)try{zl(s.containerInfo)}catch(_e){pt(t,t.return,_e)}am&&(am=!1,py(t));break;case 4:c=Ps,Ps=fd(t.stateNode.containerInfo),qn(s,t),Bn(t),Ps=c;break;case 12:qn(s,t),Bn(t);break;case 31:qn(s,t),Bn(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Ju(t,c)));break;case 13:qn(s,t),Bn(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(td=kt()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Ju(t,c)));break;case 22:h=t.memoizedState!==null;var k=l!==null&&l.memoizedState!==null,G=Lr,J=en;if(Lr=G||h,en=J||k,qn(s,t),en=J,Lr=G,Bn(t),c&8192)e:for(s=t.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(l===null||k||Lr||en||Vi(t)),l=null,s=t;;){if(s.tag===5||s.tag===26){if(l===null){k=l=s;try{if(m=k.stateNode,h)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{N=k.stateNode;var se=k.memoizedProps.style,$=se!=null&&se.hasOwnProperty("display")?se.display:null;N.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(_e){pt(k,k.return,_e)}}}else if(s.tag===6){if(l===null){k=s;try{k.stateNode.nodeValue=h?"":k.memoizedProps}catch(_e){pt(k,k.return,_e)}}}else if(s.tag===18){if(l===null){k=s;try{var X=k.stateNode;h?ab(X,!0):ab(k.stateNode,!1)}catch(_e){pt(k,k.return,_e)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=t.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Ju(t,l))));break;case 19:qn(s,t),Bn(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Ju(t,c)));break;case 30:break;case 21:break;default:qn(s,t),Bn(t)}}function Bn(t){var s=t.flags;if(s&2){try{for(var l,c=t.return;c!==null;){if(ly(c)){l=c;break}c=c.return}if(l==null)throw Error(a(160));switch(l.tag){case 27:var h=l.stateNode,m=sm(t);Zu(t,m,h);break;case 5:var b=l.stateNode;l.flags&32&&(zn(b,""),l.flags&=-33);var N=sm(t);Zu(t,N,b);break;case 3:case 4:var k=l.stateNode.containerInfo,G=sm(t);rm(t,G,k);break;default:throw Error(a(161))}}catch(J){pt(t,t.return,J)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function py(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;py(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function zr(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)uy(t,s.alternate,s),s=s.sibling}function Vi(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Ta(4,s,s.return),Vi(s);break;case 1:cr(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&ay(s,s.return,l),Vi(s);break;case 27:ic(s.stateNode);case 26:case 5:cr(s,s.return),Vi(s);break;case 22:s.memoizedState===null&&Vi(s);break;case 30:Vi(s);break;default:Vi(s)}t=t.sibling}}function Ur(t,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,h=t,m=s,b=m.flags;switch(m.tag){case 0:case 11:case 15:Ur(h,m,l),Yo(4,m);break;case 1:if(Ur(h,m,l),c=m,h=c.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(G){pt(c,c.return,G)}if(c=m,h=c.updateQueue,h!==null){var N=c.stateNode;try{var k=h.shared.hiddenCallbacks;if(k!==null)for(h.shared.hiddenCallbacks=null,h=0;h<k.length;h++)Qp(k[h],N)}catch(G){pt(c,c.return,G)}}l&&b&64&&ry(m),Wo(m,m.return);break;case 27:oy(m);case 26:case 5:Ur(h,m,l),l&&c===null&&b&4&&iy(m),Wo(m,m.return);break;case 12:Ur(h,m,l);break;case 31:Ur(h,m,l),l&&b&4&&fy(h,m);break;case 13:Ur(h,m,l),l&&b&4&&my(h,m);break;case 22:m.memoizedState===null&&Ur(h,m,l),Wo(m,m.return);break;case 30:break;default:Ur(h,m,l)}s=s.sibling}}function im(t,s){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&Lo(l))}function lm(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Lo(t))}function zs(t,s,l,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)xy(t,s,l,c),s=s.sibling}function xy(t,s,l,c){var h=s.flags;switch(s.tag){case 0:case 11:case 15:zs(t,s,l,c),h&2048&&Yo(9,s);break;case 1:zs(t,s,l,c);break;case 3:zs(t,s,l,c),h&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Lo(t)));break;case 12:if(h&2048){zs(t,s,l,c),t=s.stateNode;try{var m=s.memoizedProps,b=m.id,N=m.onPostCommit;typeof N=="function"&&N(b,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(k){pt(s,s.return,k)}}else zs(t,s,l,c);break;case 31:zs(t,s,l,c);break;case 13:zs(t,s,l,c);break;case 23:break;case 22:m=s.stateNode,b=s.alternate,s.memoizedState!==null?m._visibility&2?zs(t,s,l,c):Zo(t,s):m._visibility&2?zs(t,s,l,c):(m._visibility|=2,Al(t,s,l,c,(s.subtreeFlags&10256)!==0||!1)),h&2048&&im(b,s);break;case 24:zs(t,s,l,c),h&2048&&lm(s.alternate,s);break;default:zs(t,s,l,c)}}function Al(t,s,l,c,h){for(h=h&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=t,b=s,N=l,k=c,G=b.flags;switch(b.tag){case 0:case 11:case 15:Al(m,b,N,k,h),Yo(8,b);break;case 23:break;case 22:var J=b.stateNode;b.memoizedState!==null?J._visibility&2?Al(m,b,N,k,h):Zo(m,b):(J._visibility|=2,Al(m,b,N,k,h)),h&&G&2048&&im(b.alternate,b);break;case 24:Al(m,b,N,k,h),h&&G&2048&&lm(b.alternate,b);break;default:Al(m,b,N,k,h)}s=s.sibling}}function Zo(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=t,c=s,h=c.flags;switch(c.tag){case 22:Zo(l,c),h&2048&&im(c.alternate,c);break;case 24:Zo(l,c),h&2048&&lm(c.alternate,c);break;default:Zo(l,c)}s=s.sibling}}var Jo=8192;function Cl(t,s,l){if(t.subtreeFlags&Jo)for(t=t.child;t!==null;)yy(t,s,l),t=t.sibling}function yy(t,s,l){switch(t.tag){case 26:Cl(t,s,l),t.flags&Jo&&t.memoizedState!==null&&fE(l,Ps,t.memoizedState,t.memoizedProps);break;case 5:Cl(t,s,l);break;case 3:case 4:var c=Ps;Ps=fd(t.stateNode.containerInfo),Cl(t,s,l),Ps=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=Jo,Jo=16777216,Cl(t,s,l),Jo=c):Cl(t,s,l));break;default:Cl(t,s,l)}}function by(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function ec(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];hn=c,wy(c,t)}by(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)vy(t),t=t.sibling}function vy(t){switch(t.tag){case 0:case 11:case 15:ec(t),t.flags&2048&&Ta(9,t,t.return);break;case 3:ec(t);break;case 12:ec(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,ed(t)):ec(t);break;default:ec(t)}}function ed(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];hn=c,wy(c,t)}by(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Ta(8,s,s.return),ed(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,ed(s));break;default:ed(s)}t=t.sibling}}function wy(t,s){for(;hn!==null;){var l=hn;switch(l.tag){case 0:case 11:case 15:Ta(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Lo(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,hn=c;else e:for(l=t;hn!==null;){c=hn;var h=c.sibling,m=c.return;if(dy(c),c===l){hn=null;break e}if(h!==null){h.return=m,hn=h;break e}hn=m}}}var AN={getCacheForType:function(t){var s=yn(Wt),l=s.data.get(t);return l===void 0&&(l=t(),s.data.set(t,l)),l},cacheSignal:function(){return yn(Wt).controller.signal}},CN=typeof WeakMap=="function"?WeakMap:Map,dt=0,_t=null,Fe=null,Xe=0,gt=0,ts=null,Sa=!1,Il=!1,om=!1,qr=0,zt=0,Aa=0,Li=0,cm=0,ns=0,Rl=0,tc=null,Hn=null,um=!1,td=0,_y=0,nd=1/0,sd=null,Ca=null,rn=0,Ia=null,kl=null,Br=0,dm=0,hm=null,Ny=null,nc=0,fm=null;function ss(){return(dt&2)!==0&&Xe!==0?Xe&-Xe:q.T!==null?bm():ru()}function Ey(){if(ns===0)if((Xe&536870912)===0||tt){var t=ue;ue<<=1,(ue&3932160)===0&&(ue=262144),ns=t}else ns=536870912;return t=Jn.current,t!==null&&(t.flags|=32),ns}function Fn(t,s,l){(t===_t&&(gt===2||gt===9)||t.cancelPendingCommit!==null)&&(Dl(t,0),Ra(t,Xe,ns,!1)),ct(t,l),((dt&2)===0||t!==_t)&&(t===_t&&((dt&2)===0&&(Li|=l),zt===4&&Ra(t,Xe,ns,!1)),ur(t))}function jy(t,s,l){if((dt&6)!==0)throw Error(a(327));var c=!l&&(s&127)===0&&(s&t.expiredLanes)===0||Oe(t,s),h=c?kN(t,s):gm(t,s,!0),m=c;do{if(h===0){Il&&!c&&Ra(t,s,0,!1);break}else{if(l=t.current.alternate,m&&!IN(l)){h=gm(t,s,!1),m=!1;continue}if(h===2){if(m=s,t.errorRecoveryDisabledLanes&m)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;e:{var N=t;h=tc;var k=N.current.memoizedState.isDehydrated;if(k&&(Dl(N,b).flags|=256),b=gm(N,b,!1),b!==2){if(om&&!k){N.errorRecoveryDisabledLanes|=m,Li|=m,h=4;break e}m=Hn,Hn=h,m!==null&&(Hn===null?Hn=m:Hn.push.apply(Hn,m))}h=b}if(m=!1,h!==2)continue}}if(h===1){Dl(t,0),Ra(t,s,0,!0);break}e:{switch(c=t,m=h,m){case 0:case 1:throw Error(a(345));case 4:if((s&4194048)!==s)break;case 6:Ra(c,s,ns,!Sa);break e;case 2:Hn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((s&62914560)===s&&(h=td+300-kt(),10<h)){if(Ra(c,s,ns,!Sa),ge(c,0,!0)!==0)break e;Br=s,c.timeoutHandle=nb(Ty.bind(null,c,l,Hn,sd,um,s,ns,Li,Rl,Sa,m,"Throttled",-0,0),h);break e}Ty(c,l,Hn,sd,um,s,ns,Li,Rl,Sa,m,null,-0,0)}}break}while(!0);ur(t)}function Ty(t,s,l,c,h,m,b,N,k,G,J,se,$,X){if(t.timeoutHandle=-1,se=s.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ks},yy(s,m,se);var _e=(m&62914560)===m?td-kt():(m&4194048)===m?_y-kt():0;if(_e=mE(se,_e),_e!==null){Br=m,t.cancelPendingCommit=_e(Oy.bind(null,t,s,m,l,c,h,b,N,k,J,se,null,$,X)),Ra(t,m,b,!G);return}}Oy(t,s,m,l,c,h,b,N,k)}function IN(t){for(var s=t;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var h=l[c],m=h.getSnapshot;h=h.value;try{if(!Wn(m(),h))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ra(t,s,l,c){s&=~cm,s&=~Li,t.suspendedLanes|=s,t.pingedLanes&=~s,c&&(t.warmLanes|=s),c=t.expirationTimes;for(var h=s;0<h;){var m=31-et(h),b=1<<m;c[m]=-1,h&=~b}l!==0&&cn(t,l,s)}function rd(){return(dt&6)===0?(sc(0),!1):!0}function mm(){if(Fe!==null){if(gt===0)var t=Fe.return;else t=Fe,Rr=Ai=null,If(t),Nl=null,zo=0,t=Fe;for(;t!==null;)sy(t.alternate,t),t=t.return;Fe=null}}function Dl(t,s){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,YN(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),Br=0,mm(),_t=t,Fe=l=Cr(t.current,null),Xe=s,gt=0,ts=null,Sa=!1,Il=Oe(t,s),om=!1,Rl=ns=cm=Li=Aa=zt=0,Hn=tc=null,um=!1,(s&8)!==0&&(s|=s&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=s;0<c;){var h=31-et(c),m=1<<h;s|=t[h],c&=~m}return qr=s,ju(),l}function Sy(t,s){Be=null,q.H=Qo,s===_l||s===Du?(s=Hp(),gt=3):s===yf?(s=Hp(),gt=4):gt=s===$f?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ts=s,Fe===null&&(zt=1,Qu(t,ps(s,t.current)))}function Ay(){var t=Jn.current;return t===null?!0:(Xe&4194048)===Xe?vs===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?t===vs:!1}function Cy(){var t=q.H;return q.H=Qo,t===null?Qo:t}function Iy(){var t=q.A;return q.A=AN,t}function ad(){zt=4,Sa||(Xe&4194048)!==Xe&&Jn.current!==null||(Il=!0),(Aa&134217727)===0&&(Li&134217727)===0||_t===null||Ra(_t,Xe,ns,!1)}function gm(t,s,l){var c=dt;dt|=2;var h=Cy(),m=Iy();(_t!==t||Xe!==s)&&(sd=null,Dl(t,s)),s=!1;var b=zt;e:do try{if(gt!==0&&Fe!==null){var N=Fe,k=ts;switch(gt){case 8:mm(),b=6;break e;case 3:case 2:case 9:case 6:Jn.current===null&&(s=!0);var G=gt;if(gt=0,ts=null,Ol(t,N,k,G),l&&Il){b=0;break e}break;default:G=gt,gt=0,ts=null,Ol(t,N,k,G)}}RN(),b=zt;break}catch(J){Sy(t,J)}while(!0);return s&&t.shellSuspendCounter++,Rr=Ai=null,dt=c,q.H=h,q.A=m,Fe===null&&(_t=null,Xe=0,ju()),b}function RN(){for(;Fe!==null;)Ry(Fe)}function kN(t,s){var l=dt;dt|=2;var c=Cy(),h=Iy();_t!==t||Xe!==s?(sd=null,nd=kt()+500,Dl(t,s)):Il=Oe(t,s);e:do try{if(gt!==0&&Fe!==null){s=Fe;var m=ts;t:switch(gt){case 1:gt=0,ts=null,Ol(t,s,m,1);break;case 2:case 9:if(qp(m)){gt=0,ts=null,ky(s);break}s=function(){gt!==2&&gt!==9||_t!==t||(gt=7),ur(t)},m.then(s,s);break e;case 3:gt=7;break e;case 4:gt=5;break e;case 7:qp(m)?(gt=0,ts=null,ky(s)):(gt=0,ts=null,Ol(t,s,m,7));break;case 5:var b=null;switch(Fe.tag){case 26:b=Fe.memoizedState;case 5:case 27:var N=Fe;if(b?xb(b):N.stateNode.complete){gt=0,ts=null;var k=N.sibling;if(k!==null)Fe=k;else{var G=N.return;G!==null?(Fe=G,id(G)):Fe=null}break t}}gt=0,ts=null,Ol(t,s,m,5);break;case 6:gt=0,ts=null,Ol(t,s,m,6);break;case 8:mm(),zt=6;break e;default:throw Error(a(462))}}DN();break}catch(J){Sy(t,J)}while(!0);return Rr=Ai=null,q.H=c,q.A=h,dt=l,Fe!==null?0:(_t=null,Xe=0,ju(),zt)}function DN(){for(;Fe!==null&&!ra();)Ry(Fe)}function Ry(t){var s=ty(t.alternate,t,qr);t.memoizedProps=t.pendingProps,s===null?id(t):Fe=s}function ky(t){var s=t,l=s.alternate;switch(s.tag){case 15:case 0:s=Xx(l,s,s.pendingProps,s.type,void 0,Xe);break;case 11:s=Xx(l,s,s.pendingProps,s.type.render,s.ref,Xe);break;case 5:If(s);default:sy(l,s),s=Fe=Ip(s,qr),s=ty(l,s,qr)}t.memoizedProps=t.pendingProps,s===null?id(t):Fe=s}function Ol(t,s,l,c){Rr=Ai=null,If(s),Nl=null,zo=0;var h=s.return;try{if(wN(t,h,s,l,Xe)){zt=1,Qu(t,ps(l,t.current)),Fe=null;return}}catch(m){if(h!==null)throw Fe=h,m;zt=1,Qu(t,ps(l,t.current)),Fe=null;return}s.flags&32768?(tt||c===1?t=!0:Il||(Xe&536870912)!==0?t=!1:(Sa=t=!0,(c===2||c===9||c===3||c===6)&&(c=Jn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Dy(s,t)):id(s)}function id(t){var s=t;do{if((s.flags&32768)!==0){Dy(s,Sa);return}t=s.return;var l=EN(s.alternate,s,qr);if(l!==null){Fe=l;return}if(s=s.sibling,s!==null){Fe=s;return}Fe=s=t}while(s!==null);zt===0&&(zt=5)}function Dy(t,s){do{var l=jN(t.alternate,t);if(l!==null){l.flags&=32767,Fe=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(t=t.sibling,t!==null)){Fe=t;return}Fe=t=l}while(t!==null);zt=6,Fe=null}function Oy(t,s,l,c,h,m,b,N,k){t.cancelPendingCommit=null;do ld();while(rn!==0);if((dt&6)!==0)throw Error(a(327));if(s!==null){if(s===t.current)throw Error(a(177));if(m=s.lanes|s.childLanes,m|=nf,Vt(t,l,m,b,N,k),t===_t&&(Fe=_t=null,Xe=0),kl=s,Ia=t,Br=l,dm=m,hm=h,Ny=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,LN(gn,function(){return zy(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=q.T,q.T=null,h=le.p,le.p=2,b=dt,dt|=4;try{TN(t,s,l)}finally{dt=b,le.p=h,q.T=c}}rn=1,My(),Vy(),Ly()}}function My(){if(rn===1){rn=0;var t=Ia,s=kl,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=q.T,q.T=null;var c=le.p;le.p=2;var h=dt;dt|=4;try{gy(s,t);var m=Sm,b=wp(t.containerInfo),N=m.focusedElem,k=m.selectionRange;if(b!==N&&N&&N.ownerDocument&&vp(N.ownerDocument.documentElement,N)){if(k!==null&&Wh(N)){var G=k.start,J=k.end;if(J===void 0&&(J=G),"selectionStart"in N)N.selectionStart=G,N.selectionEnd=Math.min(J,N.value.length);else{var se=N.ownerDocument||document,$=se&&se.defaultView||window;if($.getSelection){var X=$.getSelection(),_e=N.textContent.length,Re=Math.min(k.start,_e),vt=k.end===void 0?Re:Math.min(k.end,_e);!X.extend&&Re>vt&&(b=vt,vt=Re,Re=b);var U=bp(N,Re),V=bp(N,vt);if(U&&V&&(X.rangeCount!==1||X.anchorNode!==U.node||X.anchorOffset!==U.offset||X.focusNode!==V.node||X.focusOffset!==V.offset)){var F=se.createRange();F.setStart(U.node,U.offset),X.removeAllRanges(),Re>vt?(X.addRange(F),X.extend(V.node,V.offset)):(F.setEnd(V.node,V.offset),X.addRange(F))}}}}for(se=[],X=N;X=X.parentNode;)X.nodeType===1&&se.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<se.length;N++){var ee=se[N];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}bd=!!Tm,Sm=Tm=null}finally{dt=h,le.p=c,q.T=l}}t.current=s,rn=2}}function Vy(){if(rn===2){rn=0;var t=Ia,s=kl,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=q.T,q.T=null;var c=le.p;le.p=2;var h=dt;dt|=4;try{uy(t,s.alternate,s)}finally{dt=h,le.p=c,q.T=l}}rn=3}}function Ly(){if(rn===4||rn===3){rn=0,aa();var t=Ia,s=kl,l=Br,c=Ny;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?rn=5:(rn=0,kl=Ia=null,Py(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Ca=null),jr(l),s=s.stateNode,Qe&&typeof Qe.onCommitFiberRoot=="function")try{Qe.onCommitFiberRoot(Le,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=q.T,h=le.p,le.p=2,q.T=null;try{for(var m=t.onRecoverableError,b=0;b<c.length;b++){var N=c[b];m(N.value,{componentStack:N.stack})}}finally{q.T=s,le.p=h}}(Br&3)!==0&&ld(),ur(t),h=t.pendingLanes,(l&261930)!==0&&(h&42)!==0?t===fm?nc++:(nc=0,fm=t):nc=0,sc(0)}}function Py(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Lo(s)))}function ld(){return My(),Vy(),Ly(),zy()}function zy(){if(rn!==5)return!1;var t=Ia,s=dm;dm=0;var l=jr(Br),c=q.T,h=le.p;try{le.p=32>l?32:l,q.T=null,l=hm,hm=null;var m=Ia,b=Br;if(rn=0,kl=Ia=null,Br=0,(dt&6)!==0)throw Error(a(331));var N=dt;if(dt|=4,vy(m.current),xy(m,m.current,b,l),dt=N,sc(0,!1),Qe&&typeof Qe.onPostCommitFiberRoot=="function")try{Qe.onPostCommitFiberRoot(Le,m)}catch{}return!0}finally{le.p=h,q.T=c,Py(t,s)}}function Uy(t,s,l){s=ps(l,s),s=Gf(t.stateNode,s,2),t=Na(t,s,2),t!==null&&(ct(t,2),ur(t))}function pt(t,s,l){if(t.tag===3)Uy(t,t,l);else for(;s!==null;){if(s.tag===3){Uy(s,t,l);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ca===null||!Ca.has(c))){t=ps(l,t),l=qx(2),c=Na(s,l,2),c!==null&&(Bx(l,c,s,t),ct(c,2),ur(c));break}}s=s.return}}function pm(t,s,l){var c=t.pingCache;if(c===null){c=t.pingCache=new CN;var h=new Set;c.set(s,h)}else h=c.get(s),h===void 0&&(h=new Set,c.set(s,h));h.has(l)||(om=!0,h.add(l),t=ON.bind(null,t,s,l),s.then(t,t))}function ON(t,s,l){var c=t.pingCache;c!==null&&c.delete(s),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,_t===t&&(Xe&l)===l&&(zt===4||zt===3&&(Xe&62914560)===Xe&&300>kt()-td?(dt&2)===0&&Dl(t,0):cm|=l,Rl===Xe&&(Rl=0)),ur(t)}function qy(t,s){s===0&&(s=wt()),t=ji(t,s),t!==null&&(ct(t,s),ur(t))}function MN(t){var s=t.memoizedState,l=0;s!==null&&(l=s.retryLane),qy(t,l)}function VN(t,s){var l=0;switch(t.tag){case 31:case 13:var c=t.stateNode,h=t.memoizedState;h!==null&&(l=h.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(a(314))}c!==null&&c.delete(s),qy(t,l)}function LN(t,s){return Rt(t,s)}var od=null,Ml=null,xm=!1,cd=!1,ym=!1,ka=0;function ur(t){t!==Ml&&t.next===null&&(Ml===null?od=Ml=t:Ml=Ml.next=t),cd=!0,xm||(xm=!0,zN())}function sc(t,s){if(!ym&&cd){ym=!0;do for(var l=!1,c=od;c!==null;){if(t!==0){var h=c.pendingLanes;if(h===0)var m=0;else{var b=c.suspendedLanes,N=c.pingedLanes;m=(1<<31-et(42|t)+1)-1,m&=h&~(b&~N),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(l=!0,Gy(c,m))}else m=Xe,m=ge(c,c===_t?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Oe(c,m)||(l=!0,Gy(c,m));c=c.next}while(l);ym=!1}}function PN(){By()}function By(){cd=xm=!1;var t=0;ka!==0&&XN()&&(t=ka);for(var s=kt(),l=null,c=od;c!==null;){var h=c.next,m=Hy(c,s);m===0?(c.next=null,l===null?od=h:l.next=h,h===null&&(Ml=l)):(l=c,(t!==0||(m&3)!==0)&&(cd=!0)),c=h}rn!==0&&rn!==5||sc(t),ka!==0&&(ka=0)}function Hy(t,s){for(var l=t.suspendedLanes,c=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var b=31-et(m),N=1<<b,k=h[b];k===-1?((N&l)===0||(N&c)!==0)&&(h[b]=Ke(N,s)):k<=s&&(t.expiredLanes|=N),m&=~N}if(s=_t,l=Xe,l=ge(t,t===s?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,l===0||t===s&&(gt===2||gt===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&on(c),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||Oe(t,l)){if(s=l&-l,s===t.callbackPriority)return s;switch(c!==null&&on(c),jr(l)){case 2:case 8:l=Nr;break;case 32:l=gn;break;case 268435456:l=la;break;default:l=gn}return c=Fy.bind(null,t),l=Rt(l,c),t.callbackPriority=s,t.callbackNode=l,s}return c!==null&&c!==null&&on(c),t.callbackPriority=2,t.callbackNode=null,2}function Fy(t,s){if(rn!==0&&rn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(ld()&&t.callbackNode!==l)return null;var c=Xe;return c=ge(t,t===_t?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(jy(t,c,s),Hy(t,kt()),t.callbackNode!=null&&t.callbackNode===l?Fy.bind(null,t):null)}function Gy(t,s){if(ld())return null;jy(t,s,!0)}function zN(){WN(function(){(dt&6)!==0?Rt($s,PN):By()})}function bm(){if(ka===0){var t=vl;t===0&&(t=Ln,Ln<<=1,(Ln&261888)===0&&(Ln=256)),ka=t}return ka}function $y(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:al(""+t)}function Qy(t,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,t.id&&l.setAttribute("form",t.id),s.parentNode.insertBefore(l,s),t=new FormData(t),l.parentNode.removeChild(l),t}function UN(t,s,l,c,h){if(s==="submit"&&l&&l.stateNode===h){var m=$y((h[un]||null).action),b=c.submitter;b&&(s=(s=b[un]||null)?$y(s.formAction):b.getAttribute("formAction"),s!==null&&(m=s,b=null));var N=new sr("action","action",null,c,h);t.push({event:N,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ka!==0){var k=b?Qy(h,b):new FormData(h);zf(l,{pending:!0,data:k,method:h.method,action:m},null,k)}}else typeof m=="function"&&(N.preventDefault(),k=b?Qy(h,b):new FormData(h),zf(l,{pending:!0,data:k,method:h.method,action:m},m,k))},currentTarget:h}]})}}for(var vm=0;vm<tf.length;vm++){var wm=tf[vm],qN=wm.toLowerCase(),BN=wm[0].toUpperCase()+wm.slice(1);Ls(qN,"on"+BN)}Ls(Ep,"onAnimationEnd"),Ls(jp,"onAnimationIteration"),Ls(Tp,"onAnimationStart"),Ls("dblclick","onDoubleClick"),Ls("focusin","onFocus"),Ls("focusout","onBlur"),Ls(rN,"onTransitionRun"),Ls(aN,"onTransitionStart"),Ls(iN,"onTransitionCancel"),Ls(Sp,"onTransitionEnd"),Js("onMouseEnter",["mouseout","mouseover"]),Js("onMouseLeave",["mouseout","mouseover"]),Js("onPointerEnter",["pointerout","pointerover"]),Js("onPointerLeave",["pointerout","pointerover"]),Zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rc));function Ky(t,s){s=(s&4)!==0;for(var l=0;l<t.length;l++){var c=t[l],h=c.event;c=c.listeners;e:{var m=void 0;if(s)for(var b=c.length-1;0<=b;b--){var N=c[b],k=N.instance,G=N.currentTarget;if(N=N.listener,k!==m&&h.isPropagationStopped())break e;m=N,h.currentTarget=G;try{m(h)}catch(J){Eu(J)}h.currentTarget=null,m=k}else for(b=0;b<c.length;b++){if(N=c[b],k=N.instance,G=N.currentTarget,N=N.listener,k!==m&&h.isPropagationStopped())break e;m=N,h.currentTarget=G;try{m(h)}catch(J){Eu(J)}h.currentTarget=null,m=k}}}}function Ge(t,s){var l=s[el];l===void 0&&(l=s[el]=new Set);var c=t+"__bubble";l.has(c)||(Xy(s,t,2,!1),l.add(c))}function _m(t,s,l){var c=0;s&&(c|=4),Xy(l,t,c,s)}var ud="_reactListening"+Math.random().toString(36).slice(2);function Nm(t){if(!t[ud]){t[ud]=!0,po.forEach(function(l){l!=="selectionchange"&&(HN.has(l)||_m(l,!1,t),_m(l,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[ud]||(s[ud]=!0,_m("selectionchange",!1,s))}}function Xy(t,s,l,c){switch(Eb(s)){case 2:var h=xE;break;case 8:h=yE;break;default:h=Pm}l=h.bind(null,s,l,t),h=void 0,!xi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),c?h!==void 0?t.addEventListener(s,l,{capture:!0,passive:h}):t.addEventListener(s,l,!0):h!==void 0?t.addEventListener(s,l,{passive:h}):t.addEventListener(s,l,!1)}function Em(t,s,l,c,h){var m=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var N=c.stateNode.containerInfo;if(N===h)break;if(b===4)for(b=c.return;b!==null;){var k=b.tag;if((k===3||k===4)&&b.stateNode.containerInfo===h)return;b=b.return}for(;N!==null;){if(b=Ys(N),b===null)return;if(k=b.tag,k===5||k===6||k===26||k===27){c=m=b;continue e}N=N.parentNode}}c=c.return}fa(function(){var G=m,J=hs(l),se=[];e:{var $=Ap.get(t);if($!==void 0){var X=sr,_e=t;switch(t){case"keypress":if(bi(l)===0)break e;case"keydown":case"keyup":X=wu;break;case"focusin":_e="focus",X=wi;break;case"focusout":_e="blur",X=wi;break;case"beforeblur":case"afterblur":X=wi;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Co;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=y;break;case Ep:case jp:case Tp:X=mu;break;case Sp:X=j;break;case"scroll":case"scrollend":X=Ao;break;case"wheel":X=K;break;case"copy":case"cut":case"paste":X=gu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Ar;break;case"toggle":case"beforetoggle":X=qe}var Re=(s&4)!==0,vt=!Re&&(t==="scroll"||t==="scrollend"),U=Re?$!==null?$+"Capture":null:$;Re=[];for(var V=G,F;V!==null;){var ee=V;if(F=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||F===null||U===null||(ee=Ds(V,U),ee!=null&&Re.push(ac(V,ee,F))),vt)break;V=V.return}0<Re.length&&($=new X($,_e,null,l,J),se.push({event:$,listeners:Re}))}}if((s&7)===0){e:{if($=t==="mouseover"||t==="pointerover",X=t==="mouseout"||t==="pointerout",$&&l!==jo&&(_e=l.relatedTarget||l.fromElement)&&(Ys(_e)||_e[Ks]))break e;if((X||$)&&($=J.window===J?J:($=J.ownerDocument)?$.defaultView||$.parentWindow:window,X?(_e=l.relatedTarget||l.toElement,X=G,_e=_e?Ys(_e):null,_e!==null&&(vt=u(_e),Re=_e.tag,_e!==vt||Re!==5&&Re!==27&&Re!==6)&&(_e=null)):(X=null,_e=G),X!==_e)){if(Re=Co,ee="onMouseLeave",U="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(Re=Ar,ee="onPointerLeave",U="onPointerEnter",V="pointer"),vt=X==null?$:Xn(X),F=_e==null?$:Xn(_e),$=new Re(ee,V+"leave",X,l,J),$.target=vt,$.relatedTarget=F,ee=null,Ys(J)===G&&(Re=new Re(U,V+"enter",_e,l,J),Re.target=F,Re.relatedTarget=vt,ee=Re),vt=ee,X&&_e)t:{for(Re=FN,U=X,V=_e,F=0,ee=U;ee;ee=Re(ee))F++;ee=0;for(var Te=V;Te;Te=Re(Te))ee++;for(;0<F-ee;)U=Re(U),F--;for(;0<ee-F;)V=Re(V),ee--;for(;F--;){if(U===V||V!==null&&U===V.alternate){Re=U;break t}U=Re(U),V=Re(V)}Re=null}else Re=null;X!==null&&Yy(se,$,X,Re,!1),_e!==null&&vt!==null&&Yy(se,vt,_e,Re,!0)}}e:{if($=G?Xn(G):window,X=$.nodeName&&$.nodeName.toLowerCase(),X==="select"||X==="input"&&$.type==="file")var it=fp;else if(dp($))if(mp)it=tN;else{it=J_;var Ne=Z_}else X=$.nodeName,!X||X.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?G&&rl(G.elementType)&&(it=fp):it=eN;if(it&&(it=it(t,G))){hp(se,it,l,J);break e}Ne&&Ne(t,$,G),t==="focusout"&&G&&$.type==="number"&&G.memoizedProps.value!=null&&_o($,"number",$.value)}switch(Ne=G?Xn(G):window,t){case"focusin":(dp(Ne)||Ne.contentEditable==="true")&&(hl=Ne,Zh=G,Oo=null);break;case"focusout":Oo=Zh=hl=null;break;case"mousedown":Jh=!0;break;case"contextmenu":case"mouseup":case"dragend":Jh=!1,_p(se,l,J);break;case"selectionchange":if(sN)break;case"keydown":case"keyup":_p(se,l,J)}var He;if(ut)e:{switch(t){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else dl?_i(t,l)&&(Ye="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(Ye="onCompositionStart");Ye&&(ir&&l.locale!=="ko"&&(dl||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&dl&&(He=So()):(nr=J,To="value"in nr?nr.value:nr.textContent,dl=!0)),Ne=dd(G,Ye),0<Ne.length&&(Ye=new ar(Ye,t,null,l,J),se.push({event:Ye,listeners:Ne}),He?Ye.data=He:(He=ul(l),He!==null&&(Ye.data=He)))),(He=ms?K_(t,l):X_(t,l))&&(Ye=dd(G,"onBeforeInput"),0<Ye.length&&(Ne=new ar("onBeforeInput","beforeinput",null,l,J),se.push({event:Ne,listeners:Ye}),Ne.data=He)),UN(se,t,G,l,J)}Ky(se,s)})}function ac(t,s,l){return{instance:t,listener:s,currentTarget:l}}function dd(t,s){for(var l=s+"Capture",c=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=Ds(t,l),h!=null&&c.unshift(ac(t,h,m)),h=Ds(t,s),h!=null&&c.push(ac(t,h,m))),t.tag===3)return c;t=t.return}return[]}function FN(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Yy(t,s,l,c,h){for(var m=s._reactName,b=[];l!==null&&l!==c;){var N=l,k=N.alternate,G=N.stateNode;if(N=N.tag,k!==null&&k===c)break;N!==5&&N!==26&&N!==27||G===null||(k=G,h?(G=Ds(l,m),G!=null&&b.unshift(ac(l,G,k))):h||(G=Ds(l,m),G!=null&&b.push(ac(l,G,k)))),l=l.return}b.length!==0&&t.push({event:s,listeners:b})}var GN=/\r\n?/g,$N=/\u0000|\uFFFD/g;function Wy(t){return(typeof t=="string"?t:""+t).replace(GN,`
`).replace($N,"")}function Zy(t,s){return s=Wy(s),Wy(t)===s}function bt(t,s,l,c,h,m){switch(l){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||zn(t,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&zn(t,""+c);break;case"className":Yn(t,"class",c);break;case"tabIndex":Yn(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Yn(t,l,c);break;case"style":Eo(t,c,m);break;case"data":if(s!=="object"){Yn(t,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||l!=="href")){t.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(l);break}c=al(""+c),t.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(l==="formAction"?(s!=="input"&&bt(t,s,"name",h.name,h,null),bt(t,s,"formEncType",h.formEncType,h,null),bt(t,s,"formMethod",h.formMethod,h,null),bt(t,s,"formTarget",h.formTarget,h,null)):(bt(t,s,"encType",h.encType,h,null),bt(t,s,"method",h.method,h,null),bt(t,s,"target",h.target,h,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(l);break}c=al(""+c),t.setAttribute(l,c);break;case"onClick":c!=null&&(t.onclick=ks);break;case"onScroll":c!=null&&Ge("scroll",t);break;case"onScrollEnd":c!=null&&Ge("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(l=c.__html,l!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=l}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}l=al(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(l,""+c):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":c===!0?t.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(l,c):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(l,c):t.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(l):t.setAttribute(l,c);break;case"popover":Ge("beforetoggle",t),Ge("toggle",t),nl(t,"popover",c);break;case"xlinkActuate":Yt(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Yt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Yt(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Yt(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Yt(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Yt(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":nl(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=du.get(l)||l,nl(t,l,c))}}function jm(t,s,l,c,h,m){switch(l){case"style":Eo(t,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(l=c.__html,l!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=l}}break;case"children":typeof c=="string"?zn(t,c):(typeof c=="number"||typeof c=="bigint")&&zn(t,""+c);break;case"onScroll":c!=null&&Ge("scroll",t);break;case"onScrollEnd":c!=null&&Ge("scrollend",t);break;case"onClick":c!=null&&(t.onclick=ks);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xo.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(h=l.endsWith("Capture"),s=l.slice(2,h?l.length-7:void 0),m=t[un]||null,m=m!=null?m[l]:null,typeof m=="function"&&t.removeEventListener(s,m,h),typeof c=="function")){typeof m!="function"&&m!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(s,c,h);break e}l in t?t[l]=c:c===!0?t.setAttribute(l,""):nl(t,l,c)}}}function vn(t,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",t),Ge("load",t);var c=!1,h=!1,m;for(m in l)if(l.hasOwnProperty(m)){var b=l[m];if(b!=null)switch(m){case"src":c=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:bt(t,s,m,b,l,null)}}h&&bt(t,s,"srcSet",l.srcSet,l,null),c&&bt(t,s,"src",l.src,l,null);return;case"input":Ge("invalid",t);var N=m=b=h=null,k=null,G=null;for(c in l)if(l.hasOwnProperty(c)){var J=l[c];if(J!=null)switch(c){case"name":h=J;break;case"type":b=J;break;case"checked":k=J;break;case"defaultChecked":G=J;break;case"value":m=J;break;case"defaultValue":N=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(a(137,s));break;default:bt(t,s,c,J,l,null)}}ou(t,m,N,k,G,b,h,!1);return;case"select":Ge("invalid",t),c=b=m=null;for(h in l)if(l.hasOwnProperty(h)&&(N=l[h],N!=null))switch(h){case"value":m=N;break;case"defaultValue":b=N;break;case"multiple":c=N;default:bt(t,s,h,N,l,null)}s=m,l=b,t.multiple=!!c,s!=null?ca(t,!!c,s,!1):l!=null&&ca(t,!!c,l,!0);return;case"textarea":Ge("invalid",t),m=h=c=null;for(b in l)if(l.hasOwnProperty(b)&&(N=l[b],N!=null))switch(b){case"value":c=N;break;case"defaultValue":h=N;break;case"children":m=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(a(91));break;default:bt(t,s,b,N,l,null)}ua(t,c,h,m);return;case"option":for(k in l)if(l.hasOwnProperty(k)&&(c=l[k],c!=null))switch(k){case"selected":t.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:bt(t,s,k,c,l,null)}return;case"dialog":Ge("beforetoggle",t),Ge("toggle",t),Ge("cancel",t),Ge("close",t);break;case"iframe":case"object":Ge("load",t);break;case"video":case"audio":for(c=0;c<rc.length;c++)Ge(rc[c],t);break;case"image":Ge("error",t),Ge("load",t);break;case"details":Ge("toggle",t);break;case"embed":case"source":case"link":Ge("error",t),Ge("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in l)if(l.hasOwnProperty(G)&&(c=l[G],c!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:bt(t,s,G,c,l,null)}return;default:if(rl(s)){for(J in l)l.hasOwnProperty(J)&&(c=l[J],c!==void 0&&jm(t,s,J,c,l,void 0));return}}for(N in l)l.hasOwnProperty(N)&&(c=l[N],c!=null&&bt(t,s,N,c,l,null))}function QN(t,s,l,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,b=null,N=null,k=null,G=null,J=null;for(X in l){var se=l[X];if(l.hasOwnProperty(X)&&se!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":k=se;default:c.hasOwnProperty(X)||bt(t,s,X,null,c,se)}}for(var $ in c){var X=c[$];if(se=l[$],c.hasOwnProperty($)&&(X!=null||se!=null))switch($){case"type":m=X;break;case"name":h=X;break;case"checked":G=X;break;case"defaultChecked":J=X;break;case"value":b=X;break;case"defaultValue":N=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(a(137,s));break;default:X!==se&&bt(t,s,$,X,c,se)}}sl(t,b,N,k,G,J,m,h);return;case"select":X=b=N=$=null;for(m in l)if(k=l[m],l.hasOwnProperty(m)&&k!=null)switch(m){case"value":break;case"multiple":X=k;default:c.hasOwnProperty(m)||bt(t,s,m,null,c,k)}for(h in c)if(m=c[h],k=l[h],c.hasOwnProperty(h)&&(m!=null||k!=null))switch(h){case"value":$=m;break;case"defaultValue":N=m;break;case"multiple":b=m;default:m!==k&&bt(t,s,h,m,c,k)}s=N,l=b,c=X,$!=null?ca(t,!!l,$,!1):!!c!=!!l&&(s!=null?ca(t,!!l,s,!0):ca(t,!!l,l?[]:"",!1));return;case"textarea":X=$=null;for(N in l)if(h=l[N],l.hasOwnProperty(N)&&h!=null&&!c.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:bt(t,s,N,null,c,h)}for(b in c)if(h=c[b],m=l[b],c.hasOwnProperty(b)&&(h!=null||m!=null))switch(b){case"value":$=h;break;case"defaultValue":X=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(a(91));break;default:h!==m&&bt(t,s,b,h,c,m)}cu(t,$,X);return;case"option":for(var _e in l)if($=l[_e],l.hasOwnProperty(_e)&&$!=null&&!c.hasOwnProperty(_e))switch(_e){case"selected":t.selected=!1;break;default:bt(t,s,_e,null,c,$)}for(k in c)if($=c[k],X=l[k],c.hasOwnProperty(k)&&$!==X&&($!=null||X!=null))switch(k){case"selected":t.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:bt(t,s,k,$,c,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in l)$=l[Re],l.hasOwnProperty(Re)&&$!=null&&!c.hasOwnProperty(Re)&&bt(t,s,Re,null,c,$);for(G in c)if($=c[G],X=l[G],c.hasOwnProperty(G)&&$!==X&&($!=null||X!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(a(137,s));break;default:bt(t,s,G,$,c,X)}return;default:if(rl(s)){for(var vt in l)$=l[vt],l.hasOwnProperty(vt)&&$!==void 0&&!c.hasOwnProperty(vt)&&jm(t,s,vt,void 0,c,$);for(J in c)$=c[J],X=l[J],!c.hasOwnProperty(J)||$===X||$===void 0&&X===void 0||jm(t,s,J,$,c,X);return}}for(var U in l)$=l[U],l.hasOwnProperty(U)&&$!=null&&!c.hasOwnProperty(U)&&bt(t,s,U,null,c,$);for(se in c)$=c[se],X=l[se],!c.hasOwnProperty(se)||$===X||$==null&&X==null||bt(t,s,se,$,c,X)}function Jy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function KN(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var h=l[c],m=h.transferSize,b=h.initiatorType,N=h.duration;if(m&&N&&Jy(b)){for(b=0,N=h.responseEnd,c+=1;c<l.length;c++){var k=l[c],G=k.startTime;if(G>N)break;var J=k.transferSize,se=k.initiatorType;J&&Jy(se)&&(k=k.responseEnd,b+=J*(k<N?1:(N-G)/(k-G)))}if(--c,s+=8*(m+b)/(h.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Tm=null,Sm=null;function hd(t){return t.nodeType===9?t:t.ownerDocument}function eb(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tb(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Am(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Cm=null;function XN(){var t=window.event;return t&&t.type==="popstate"?t===Cm?!1:(Cm=t,!0):(Cm=null,!1)}var nb=typeof setTimeout=="function"?setTimeout:void 0,YN=typeof clearTimeout=="function"?clearTimeout:void 0,sb=typeof Promise=="function"?Promise:void 0,WN=typeof queueMicrotask=="function"?queueMicrotask:typeof sb<"u"?function(t){return sb.resolve(null).then(t).catch(ZN)}:nb;function ZN(t){setTimeout(function(){throw t})}function Da(t){return t==="head"}function rb(t,s){var l=s,c=0;do{var h=l.nextSibling;if(t.removeChild(l),h&&h.nodeType===8)if(l=h.data,l==="/$"||l==="/&"){if(c===0){t.removeChild(h),zl(s);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")ic(t.ownerDocument.documentElement);else if(l==="head"){l=t.ownerDocument.head,ic(l);for(var m=l.firstChild;m;){var b=m.nextSibling,N=m.nodeName;m[Xs]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&m.rel.toLowerCase()==="stylesheet"||l.removeChild(m),m=b}}else l==="body"&&ic(t.ownerDocument.body);l=h}while(l);zl(s)}function ab(t,s){var l=t;t=0;do{var c=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(t===0)break;t--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||t++;l=c}while(l)}function Im(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Im(l),tl(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function JN(t,s,l,c){for(;t.nodeType===1;){var h=l;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[Xs])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=ws(t.nextSibling),t===null)break}return null}function eE(t,s,l){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=ws(t.nextSibling),t===null))return null;return t}function ib(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=ws(t.nextSibling),t===null))return null;return t}function Rm(t){return t.data==="$?"||t.data==="$~"}function km(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function tE(t,s){var l=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||l.readyState!=="loading")s();else{var c=function(){s(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function ws(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Dm=null;function lb(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"||l==="/&"){if(s===0)return ws(t.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}t=t.nextSibling}return null}function ob(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return t;s--}else l!=="/$"&&l!=="/&"||s++}t=t.previousSibling}return null}function cb(t,s,l){switch(s=hd(l),t){case"html":if(t=s.documentElement,!t)throw Error(a(452));return t;case"head":if(t=s.head,!t)throw Error(a(453));return t;case"body":if(t=s.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function ic(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);tl(t)}var _s=new Map,ub=new Set;function fd(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Hr=le.d;le.d={f:nE,r:sE,D:rE,C:aE,L:iE,m:lE,X:cE,S:oE,M:uE};function nE(){var t=Hr.f(),s=rd();return t||s}function sE(t){var s=ds(t);s!==null&&s.tag===5&&s.type==="form"?Sx(s):Hr.r(t)}var Vl=typeof document>"u"?null:document;function db(t,s,l){var c=Vl;if(c&&typeof s=="string"&&s){var h=Pn(s);h='link[rel="'+t+'"][href="'+h+'"]',typeof l=="string"&&(h+='[crossorigin="'+l+'"]'),ub.has(h)||(ub.add(h),t={rel:t,crossOrigin:l,href:s},c.querySelector(h)===null&&(s=c.createElement("link"),vn(s,"link",t),Xt(s),c.head.appendChild(s)))}}function rE(t){Hr.D(t),db("dns-prefetch",t,null)}function aE(t,s){Hr.C(t,s),db("preconnect",t,s)}function iE(t,s,l){Hr.L(t,s,l);var c=Vl;if(c&&t&&s){var h='link[rel="preload"][as="'+Pn(s)+'"]';s==="image"&&l&&l.imageSrcSet?(h+='[imagesrcset="'+Pn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(h+='[imagesizes="'+Pn(l.imageSizes)+'"]')):h+='[href="'+Pn(t)+'"]';var m=h;switch(s){case"style":m=Ll(t);break;case"script":m=Pl(t)}_s.has(m)||(t=w({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:t,as:s},l),_s.set(m,t),c.querySelector(h)!==null||s==="style"&&c.querySelector(lc(m))||s==="script"&&c.querySelector(oc(m))||(s=c.createElement("link"),vn(s,"link",t),Xt(s),c.head.appendChild(s)))}}function lE(t,s){Hr.m(t,s);var l=Vl;if(l&&t){var c=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Pn(c)+'"][href="'+Pn(t)+'"]',m=h;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Pl(t)}if(!_s.has(m)&&(t=w({rel:"modulepreload",href:t},s),_s.set(m,t),l.querySelector(h)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(oc(m)))return}c=l.createElement("link"),vn(c,"link",t),Xt(c),l.head.appendChild(c)}}}function oE(t,s,l){Hr.S(t,s,l);var c=Vl;if(c&&t){var h=Ws(c).hoistableStyles,m=Ll(t);s=s||"default";var b=h.get(m);if(!b){var N={loading:0,preload:null};if(b=c.querySelector(lc(m)))N.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":s},l),(l=_s.get(m))&&Om(t,l);var k=b=c.createElement("link");Xt(k),vn(k,"link",t),k._p=new Promise(function(G,J){k.onload=G,k.onerror=J}),k.addEventListener("load",function(){N.loading|=1}),k.addEventListener("error",function(){N.loading|=2}),N.loading|=4,md(b,s,c)}b={type:"stylesheet",instance:b,count:1,state:N},h.set(m,b)}}}function cE(t,s){Hr.X(t,s);var l=Vl;if(l&&t){var c=Ws(l).hoistableScripts,h=Pl(t),m=c.get(h);m||(m=l.querySelector(oc(h)),m||(t=w({src:t,async:!0},s),(s=_s.get(h))&&Mm(t,s),m=l.createElement("script"),Xt(m),vn(m,"link",t),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(h,m))}}function uE(t,s){Hr.M(t,s);var l=Vl;if(l&&t){var c=Ws(l).hoistableScripts,h=Pl(t),m=c.get(h);m||(m=l.querySelector(oc(h)),m||(t=w({src:t,async:!0,type:"module"},s),(s=_s.get(h))&&Mm(t,s),m=l.createElement("script"),Xt(m),vn(m,"link",t),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(h,m))}}function hb(t,s,l,c){var h=(h=Ae.current)?fd(h):null;if(!h)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=Ll(l.href),l=Ws(h).hoistableStyles,c=l.get(s),c||(c={type:"style",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=Ll(l.href);var m=Ws(h).hoistableStyles,b=m.get(t);if(b||(h=h.ownerDocument||h,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,b),(m=h.querySelector(lc(t)))&&!m._p&&(b.instance=m,b.state.loading=5),_s.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},_s.set(t,l),m||dE(h,t,l,b.state))),s&&c===null)throw Error(a(528,""));return b}if(s&&c!==null)throw Error(a(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Pl(l),l=Ws(h).hoistableScripts,c=l.get(s),c||(c={type:"script",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function Ll(t){return'href="'+Pn(t)+'"'}function lc(t){return'link[rel="stylesheet"]['+t+"]"}function fb(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function dE(t,s,l,c){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=t.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),vn(s,"link",l),Xt(s),t.head.appendChild(s))}function Pl(t){return'[src="'+Pn(t)+'"]'}function oc(t){return"script[async]"+t}function mb(t,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var c=t.querySelector('style[data-href~="'+Pn(l.href)+'"]');if(c)return s.instance=c,Xt(c),c;var h=w({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),Xt(c),vn(c,"style",h),md(c,l.precedence,t),s.instance=c;case"stylesheet":h=Ll(l.href);var m=t.querySelector(lc(h));if(m)return s.state.loading|=4,s.instance=m,Xt(m),m;c=fb(l),(h=_s.get(h))&&Om(c,h),m=(t.ownerDocument||t).createElement("link"),Xt(m);var b=m;return b._p=new Promise(function(N,k){b.onload=N,b.onerror=k}),vn(m,"link",c),s.state.loading|=4,md(m,l.precedence,t),s.instance=m;case"script":return m=Pl(l.src),(h=t.querySelector(oc(m)))?(s.instance=h,Xt(h),h):(c=l,(h=_s.get(m))&&(c=w({},l),Mm(c,h)),t=t.ownerDocument||t,h=t.createElement("script"),Xt(h),vn(h,"link",c),t.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,md(c,l.precedence,t));return s.instance}function md(t,s,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=c.length?c[c.length-1]:null,m=h,b=0;b<c.length;b++){var N=c[b];if(N.dataset.precedence===s)m=N;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(t,s.firstChild))}function Om(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Mm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var gd=null;function gb(t,s,l){if(gd===null){var c=new Map,h=gd=new Map;h.set(l,c)}else h=gd,c=h.get(l),c||(c=new Map,h.set(l,c));if(c.has(t))return c;for(c.set(t,null),l=l.getElementsByTagName(t),h=0;h<l.length;h++){var m=l[h];if(!(m[Xs]||m[Kt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(s)||"";b=t+b;var N=c.get(b);N?N.push(m):c.set(b,[m])}}return c}function pb(t,s,l){t=t.ownerDocument||t,t.head.insertBefore(l,s==="title"?t.querySelector("head > title"):null)}function hE(t,s,l){if(l===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function xb(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function fE(t,s,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var h=Ll(c.href),m=s.querySelector(lc(h));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=pd.bind(t),s.then(t,t)),l.state.loading|=4,l.instance=m,Xt(m);return}m=s.ownerDocument||s,c=fb(c),(h=_s.get(h))&&Om(c,h),m=m.createElement("link"),Xt(m);var b=m;b._p=new Promise(function(N,k){b.onload=N,b.onerror=k}),vn(m,"link",c),l.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(t.count++,l=pd.bind(t),s.addEventListener("load",l),s.addEventListener("error",l))}}var Vm=0;function mE(t,s){return t.stylesheets&&t.count===0&&yd(t,t.stylesheets),0<t.count||0<t.imgCount?function(l){var c=setTimeout(function(){if(t.stylesheets&&yd(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+s);0<t.imgBytes&&Vm===0&&(Vm=62500*KN());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&yd(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Vm?50:800)+s);return t.unsuspend=l,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(h)}}:null}function pd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)yd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var xd=null;function yd(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,xd=new Map,s.forEach(gE,t),xd=null,pd.call(t))}function gE(t,s){if(!(s.state.loading&4)){var l=xd.get(t);if(l)var c=l.get(null);else{l=new Map,xd.set(t,l);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var b=h[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(l.set(b.dataset.precedence,b),c=b)}c&&l.set(null,c)}h=s.instance,b=h.getAttribute("data-precedence"),m=l.get(b)||c,m===c&&l.set(null,h),l.set(b,h),this.count++,c=pd.bind(this),h.addEventListener("load",c),h.addEventListener("error",c),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),s.state.loading|=4}}var cc={$$typeof:oe,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function pE(t,s,l,c,h,m,b,N,k){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ot(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ot(0),this.hiddenUpdates=ot(null),this.identifierPrefix=c,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function yb(t,s,l,c,h,m,b,N,k,G,J,se){return t=new pE(t,s,l,b,k,G,J,se,N),s=1,m===!0&&(s|=24),m=Zn(3,null,null,s),t.current=m,m.stateNode=t,s=gf(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:c,isDehydrated:l,cache:s},bf(m),t}function bb(t){return t?(t=gl,t):gl}function vb(t,s,l,c,h,m){h=bb(h),c.context===null?c.context=h:c.pendingContext=h,c=_a(s),c.payload={element:l},m=m===void 0?null:m,m!==null&&(c.callback=m),l=Na(t,c,s),l!==null&&(Fn(l,t,s),qo(l,t,s))}function wb(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<s?l:s}}function Lm(t,s){wb(t,s),(t=t.alternate)&&wb(t,s)}function _b(t){if(t.tag===13||t.tag===31){var s=ji(t,67108864);s!==null&&Fn(s,t,67108864),Lm(t,67108864)}}function Nb(t){if(t.tag===13||t.tag===31){var s=ss();s=fi(s);var l=ji(t,s);l!==null&&Fn(l,t,s),Lm(t,s)}}var bd=!0;function xE(t,s,l,c){var h=q.T;q.T=null;var m=le.p;try{le.p=2,Pm(t,s,l,c)}finally{le.p=m,q.T=h}}function yE(t,s,l,c){var h=q.T;q.T=null;var m=le.p;try{le.p=8,Pm(t,s,l,c)}finally{le.p=m,q.T=h}}function Pm(t,s,l,c){if(bd){var h=zm(c);if(h===null)Em(t,s,c,vd,l),jb(t,c);else if(vE(h,t,s,l,c))c.stopPropagation();else if(jb(t,c),s&4&&-1<bE.indexOf(t)){for(;h!==null;){var m=ds(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=je(m.pendingLanes);if(b!==0){var N=m;for(N.pendingLanes|=2,N.entangledLanes|=2;b;){var k=1<<31-et(b);N.entanglements[1]|=k,b&=~k}ur(m),(dt&6)===0&&(nd=kt()+500,sc(0))}}break;case 31:case 13:N=ji(m,2),N!==null&&Fn(N,m,2),rd(),Lm(m,2)}if(m=zm(c),m===null&&Em(t,s,c,vd,l),m===h)break;h=m}h!==null&&c.stopPropagation()}else Em(t,s,c,null,l)}}function zm(t){return t=hs(t),Um(t)}var vd=null;function Um(t){if(vd=null,t=Ys(t),t!==null){var s=u(t);if(s===null)t=null;else{var l=s.tag;if(l===13){if(t=f(s),t!==null)return t;t=null}else if(l===31){if(t=g(s),t!==null)return t;t=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return vd=t,null}function Eb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(us()){case $s:return 2;case Nr:return 8;case gn:case ia:return 32;case la:return 268435456;default:return 32}default:return 32}}var qm=!1,Oa=null,Ma=null,Va=null,uc=new Map,dc=new Map,La=[],bE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jb(t,s){switch(t){case"focusin":case"focusout":Oa=null;break;case"dragenter":case"dragleave":Ma=null;break;case"mouseover":case"mouseout":Va=null;break;case"pointerover":case"pointerout":uc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":dc.delete(s.pointerId)}}function hc(t,s,l,c,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:l,eventSystemFlags:c,nativeEvent:m,targetContainers:[h]},s!==null&&(s=ds(s),s!==null&&_b(s)),t):(t.eventSystemFlags|=c,s=t.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),t)}function vE(t,s,l,c,h){switch(s){case"focusin":return Oa=hc(Oa,t,s,l,c,h),!0;case"dragenter":return Ma=hc(Ma,t,s,l,c,h),!0;case"mouseover":return Va=hc(Va,t,s,l,c,h),!0;case"pointerover":var m=h.pointerId;return uc.set(m,hc(uc.get(m)||null,t,s,l,c,h)),!0;case"gotpointercapture":return m=h.pointerId,dc.set(m,hc(dc.get(m)||null,t,s,l,c,h)),!0}return!1}function Tb(t){var s=Ys(t.target);if(s!==null){var l=u(s);if(l!==null){if(s=l.tag,s===13){if(s=f(l),s!==null){t.blockedOn=s,Is(t.priority,function(){Nb(l)});return}}else if(s===31){if(s=g(l),s!==null){t.blockedOn=s,Is(t.priority,function(){Nb(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wd(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var l=zm(t.nativeEvent);if(l===null){l=t.nativeEvent;var c=new l.constructor(l.type,l);jo=c,l.target.dispatchEvent(c),jo=null}else return s=ds(l),s!==null&&_b(s),t.blockedOn=l,!1;s.shift()}return!0}function Sb(t,s,l){wd(t)&&l.delete(s)}function wE(){qm=!1,Oa!==null&&wd(Oa)&&(Oa=null),Ma!==null&&wd(Ma)&&(Ma=null),Va!==null&&wd(Va)&&(Va=null),uc.forEach(Sb),dc.forEach(Sb)}function _d(t,s){t.blockedOn===s&&(t.blockedOn=null,qm||(qm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,wE)))}var Nd=null;function Ab(t){Nd!==t&&(Nd=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Nd===t&&(Nd=null);for(var s=0;s<t.length;s+=3){var l=t[s],c=t[s+1],h=t[s+2];if(typeof c!="function"){if(Um(c||l)===null)continue;break}var m=ds(l);m!==null&&(t.splice(s,3),s-=3,zf(m,{pending:!0,data:h,method:l.method,action:c},c,h))}}))}function zl(t){function s(k){return _d(k,t)}Oa!==null&&_d(Oa,t),Ma!==null&&_d(Ma,t),Va!==null&&_d(Va,t),uc.forEach(s),dc.forEach(s);for(var l=0;l<La.length;l++){var c=La[l];c.blockedOn===t&&(c.blockedOn=null)}for(;0<La.length&&(l=La[0],l.blockedOn===null);)Tb(l),l.blockedOn===null&&La.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var h=l[c],m=l[c+1],b=h[un]||null;if(typeof m=="function")b||Ab(l);else if(b){var N=null;if(m&&m.hasAttribute("formAction")){if(h=m,b=m[un]||null)N=b.formAction;else if(Um(h)!==null)continue}else N=b.action;typeof N=="function"?l[c+1]=N:(l.splice(c,3),c-=3),Ab(l)}}}function Cb(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(b){return h=b})},focusReset:"manual",scroll:"manual"})}function s(){h!==null&&(h(),h=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),h!==null&&(h(),h=null)}}}function Bm(t){this._internalRoot=t}Ed.prototype.render=Bm.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(a(409));var l=s.current,c=ss();vb(l,c,t,s,null,null)},Ed.prototype.unmount=Bm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;vb(t.current,2,null,t,null,null),rd(),s[Ks]=null}};function Ed(t){this._internalRoot=t}Ed.prototype.unstable_scheduleHydration=function(t){if(t){var s=ru();t={blockedOn:null,target:t,priority:s};for(var l=0;l<La.length&&s!==0&&s<La[l].priority;l++);La.splice(l,0,t),l===0&&Tb(t)}};var Ib=e.version;if(Ib!=="19.2.0")throw Error(a(527,Ib,"19.2.0"));le.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=p(s),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var _E={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jd.isDisabled&&jd.supportsFiber)try{Le=jd.inject(_E),Qe=jd}catch{}}return mc.createRoot=function(t,s){if(!o(t))throw Error(a(299));var l=!1,c="",h=Lx,m=Px,b=zx;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError)),s=yb(t,1,!1,null,null,l,c,null,h,m,b,Cb),t[Ks]=s.current,Nm(t),new Bm(s)},mc.hydrateRoot=function(t,s,l){if(!o(t))throw Error(a(299));var c=!1,h="",m=Lx,b=Px,N=zx,k=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(h=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError),l.formState!==void 0&&(k=l.formState)),s=yb(t,1,!0,s,l??null,c,h,k,m,b,N,Cb),s.context=bb(null),l=s.current,c=ss(),c=fi(c),h=_a(c),h.callback=null,Na(l,h,c),l=c,s.current.lanes=l,ct(s,l),ur(s),t[Ks]=s.current,Nm(t),new Ed(s)},mc.version="19.2.0",mc}var Ub;function kE(){if(Ub)return Gm.exports;Ub=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Gm.exports=RE(),Gm.exports}var DE=kE();const OE=L1(DE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),VE=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,a)=>a?a.toUpperCase():n.toLowerCase()),qb=r=>{const e=VE(r);return e.charAt(0).toUpperCase()+e.slice(1)},z1=(...r)=>r.filter((e,n,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===n).join(" ").trim(),LE=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=M.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:o="",children:u,iconNode:f,...g},x)=>M.createElement("svg",{ref:x,...PE,width:e,height:e,stroke:r,strokeWidth:a?Number(n)*24/Number(e):n,className:z1("lucide",o),...!u&&!LE(g)&&{"aria-hidden":"true"},...g},[...f.map(([p,_])=>M.createElement(p,_)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=(r,e)=>{const n=M.forwardRef(({className:a,...o},u)=>M.createElement(zE,{ref:u,iconNode:e,className:z1(`lucide-${ME(qb(r))}`,`lucide-${r}`,a),...o}));return n.displayName=qb(r),n};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],qE=me("activity",UE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Bd=me("arrow-left",BE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],$t=me("arrow-right",HE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],ro=me("award",FE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],gc=me("bell",GE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Mn=me("book-open",$E);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],y0=me("book",QE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],XE=me("brain",KE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],WE=me("briefcase",YE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],b0=me("calendar",ZE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],U1=me("chart-column",JE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Hi=me("chevron-down",e4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ua=me("chevron-left",t4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Xm=me("chevron-right",n4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Hd=me("circle-alert",s4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Xr=me("circle-check-big",r4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_n=me("circle-check",a4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Bb=me("circle-plus",i4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],$r=me("circle-question-mark",l4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],c4=me("circle-user",o4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],d4=me("circle-x",u4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],eg=me("clock",h4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],m4=me("cloud-upload",f4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],ao=me("crown",g4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],v0=me("download",p4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],w0=me("eye",x4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],_0=me("facebook",y4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],v4=me("file-check",b4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],_4=me("file-plus",w4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],E4=me("file-search",N4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ts=me("file-text",j4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],tg=me("flag",T4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Fd=me("flame",S4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],pc=me("folder-open",A4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],I4=me("globe",C4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],ei=me("graduation-cap",R4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Gd=me("house",k4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],O4=me("info",D4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],q1=me("languages",M4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Wl=me("layers",V4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Hb=me("layout-dashboard",L4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],z4=me("link",P4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],q4=me("list",U4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],At=me("loader-circle",B4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],N0=me("log-in",H4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],qa=me("lock",F4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],$d=me("log-out",G4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],hr=me("mail",$4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],E0=me("map-pin",Q4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],X4=me("medal",K4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],Ec=me("megaphone",Y4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Z4=me("menu",W4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Qd=me("message-circle",J4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],yh=me("message-square",e5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Fc=me("monitor",t5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],B1=me("move-right",n5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],r5=me("octagon-alert",s5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Fb=me("palette",a5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],l5=me("pen-line",i5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],ng=me("pen-tool",o5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],u5=me("percent",c5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],h5=me("quote",d5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],sg=me("refresh-cw",f5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],g5=me("rocket",m5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],H1=me("rotate-ccw",p5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ka=me("save",x5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],Kd=me("school",y5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],br=me("search",b5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Xa=me("send",v5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],_5=me("share-2",w5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],E5=me("shield-alert",N5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],F1=me("shield-check",j5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],S5=me("smartphone",T5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],G1=me("sparkles",A5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],j0=me("square-pen",C5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ti=me("star",I5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],$1=me("tag",R5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],rg=me("target",k5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],O5=me("text-align-start",D5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Q1=me("timer",M5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Xd=me("trash-2",V5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],P5=me("trending-up",L5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],U5=me("triangle-alert",z5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Gl=me("trophy",q5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],H5=me("type",B5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Cn=me("user",F5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ag=me("users",G5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],js=me("x",$5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],bh=me("zap",Q5),K5=()=>{};var Gb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=function(r){const e=[];let n=0;for(let a=0;a<r.length;a++){let o=r.charCodeAt(a);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++a)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},X5=function(r){const e=[];let n=0,a=0;for(;n<r.length;){const o=r[n++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[a++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],g=r[n++],x=((o&7)<<18|(u&63)<<12|(f&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(x>>10)),e[a++]=String.fromCharCode(56320+(x&1023))}else{const u=r[n++],f=r[n++];e[a++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},X1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,g=f?r[o+1]:0,x=o+2<r.length,p=x?r[o+2]:0,_=u>>2,w=(u&3)<<4|g>>4;let E=(g&15)<<2|p>>6,O=p&63;x||(O=64,f||(E=64)),a.push(n[_],n[w],n[E],n[O])}return a.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(K1(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):X5(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],g=o<r.length?n[r.charAt(o)]:0;++o;const p=o<r.length?n[r.charAt(o)]:64;++o;const w=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||g==null||p==null||w==null)throw new Y5;const E=u<<2|g>>4;if(a.push(E),p!==64){const O=g<<4&240|p>>2;if(a.push(O),w!==64){const z=p<<6&192|w;a.push(z)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Y5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const W5=function(r){const e=K1(r);return X1.encodeByteArray(e,!0)},Yd=function(r){return W5(r).replace(/\./g,"")},Y1=function(r){try{return X1.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5=()=>Z5().__FIREBASE_DEFAULTS__,ej=()=>{if(typeof process>"u"||typeof Gb>"u")return;const r=Gb.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},tj=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Y1(r[1]);return e&&JSON.parse(e)},vh=()=>{try{return K5()||J5()||ej()||tj()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},W1=r=>{var e,n;return(n=(e=vh())==null?void 0:e.emulatorHosts)==null?void 0:n[r]},nj=r=>{const e=W1(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},Z1=()=>{var r;return(r=vh())==null?void 0:r.config},J1=r=>{var e;return(e=vh())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ew(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Yd(JSON.stringify(n)),Yd(JSON.stringify(f)),""].join(".")}const jc={};function aj(){const r={prod:[],emulator:[]};for(const e of Object.keys(jc))jc[e]?r.emulator.push(e):r.prod.push(e);return r}function ij(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let $b=!1;function tw(r,e){if(typeof window>"u"||typeof document>"u"||!io(window.location.host)||jc[r]===e||jc[r]||$b)return;jc[r]=e;function n(E){return`__firebase__banner__${E}`}const a="__firebase__banner",u=aj().prod.length>0;function f(){const E=document.getElementById(a);E&&E.remove()}function g(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function x(E,O){E.setAttribute("width","24"),E.setAttribute("id",O),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{$b=!0,f()},E}function _(E,O){E.setAttribute("id",O),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function w(){const E=ij(a),O=n("text"),z=document.getElementById(O)||document.createElement("span"),ne=n("learnmore"),Q=document.getElementById(ne)||document.createElement("a"),ce=n("preprendIcon"),fe=document.getElementById(ce)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const oe=E.element;g(oe),_(Q,ne);const we=p();x(fe,ce),oe.append(fe,z,Q,we),document.body.appendChild(oe)}u?(z.innerText="Preview backend disconnected.",fe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(fe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rn())}function oj(){var e;const r=(e=vh())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nw(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function uj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dj(){const r=Rn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function hj(){return!oj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sw(){try{return typeof indexedDB=="object"}catch{return!1}}function rw(){return new Promise((r,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(a),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}function fj(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj="FirebaseError";class Fs extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=mj,Object.setPrototypeOf(this,Fs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yi.prototype.create)}}class Yi{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?gj(u,a):"Error",g=`${this.serviceName}: ${f} (${o}).`;return new Fs(o,g,a)}}function gj(r,e){return r.replace(pj,(n,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const pj=/\{\$([^}]+)}/g;function xj(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ni(r,e){if(r===e)return!0;const n=Object.keys(r),a=Object.keys(e);for(const o of n){if(!a.includes(o))return!1;const u=r[o],f=e[o];if(Qb(u)&&Qb(f)){if(!ni(u,f))return!1}else if(u!==f)return!1}for(const o of a)if(!n.includes(o))return!1;return!0}function Qb(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(r){const e=[];for(const[n,a]of Object.entries(r))Array.isArray(a)?a.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function xc(r){const e={};return r.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[o,u]=a.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function yc(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function yj(r,e){const n=new bj(r,e);return n.subscribe.bind(n)}class bj{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,a){let o;if(e===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");vj(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:a},o.next===void 0&&(o.next=Ym),o.error===void 0&&(o.error=Ym),o.complete===void 0&&(o.complete=Ym);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vj(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Ym(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=1e3,_j=2,Nj=14400*1e3,Ej=.5;function Kb(r,e=wj,n=_j){const a=e*Math.pow(n,r),o=Math.round(Ej*a*(Math.random()-.5)*2);return Math.min(Nj,a+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(r){return r&&r._delegate?r._delegate:r}class qs{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new sj;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Sj(e))try{this.getOrInitializeService({instanceIdentifier:Pi})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch{}}}}clearInstance(e=Pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pi){return this.instances.has(e)}getOptions(e=Pi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[u,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);a===g&&f.resolve(o)}return o}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const u=this.instances.get(a);return u&&e(u,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const o of a)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:Tj(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Pi){return this.component?this.component.multipleInstances?e:Pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Tj(r){return r===Pi?void 0:r}function Sj(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new jj(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(We||(We={}));const Cj={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},Ij=We.INFO,Rj={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},kj=(r,e,...n)=>{if(e<r.logLevel)return;const a=new Date().toISOString(),o=Rj[e];if(o)console[o](`[${a}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wh{constructor(e){this.name=e,this._logLevel=Ij,this._logHandler=kj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Cj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const Dj=(r,e)=>e.some(n=>r instanceof n);let Xb,Yb;function Oj(){return Xb||(Xb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Mj(){return Yb||(Yb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aw=new WeakMap,T0=new WeakMap,iw=new WeakMap,Wm=new WeakMap,ig=new WeakMap;function Vj(r){const e=new Promise((n,a)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(Ya(r.result)),o()},f=()=>{a(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&aw.set(n,r)}).catch(()=>{}),ig.set(e,r),e}function Lj(r){if(T0.has(r))return;const e=new Promise((n,a)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{a(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});T0.set(r,e)}let S0={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return T0.get(r);if(e==="objectStoreNames")return r.objectStoreNames||iw.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ya(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Pj(r){S0=r(S0)}function zj(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=r.call(Zm(this),e,...n);return iw.set(a,e.sort?e.sort():[e]),Ya(a)}:Mj().includes(r)?function(...e){return r.apply(Zm(this),e),Ya(aw.get(this))}:function(...e){return Ya(r.apply(Zm(this),e))}}function Uj(r){return typeof r=="function"?zj(r):(r instanceof IDBTransaction&&Lj(r),Dj(r,Oj())?new Proxy(r,S0):r)}function Ya(r){if(r instanceof IDBRequest)return Vj(r);if(Wm.has(r))return Wm.get(r);const e=Uj(r);return e!==r&&(Wm.set(r,e),ig.set(e,r)),e}const Zm=r=>ig.get(r);function lw(r,e,{blocked:n,upgrade:a,blocking:o,terminated:u}={}){const f=indexedDB.open(r,e),g=Ya(f);return a&&f.addEventListener("upgradeneeded",x=>{a(Ya(f.result),x.oldVersion,x.newVersion,Ya(f.transaction),x)}),n&&f.addEventListener("blocked",x=>n(x.oldVersion,x.newVersion,x)),g.then(x=>{u&&x.addEventListener("close",()=>u()),o&&x.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),g}const qj=["get","getKey","getAll","getAllKeys","count"],Bj=["put","add","delete","clear"],Jm=new Map;function Wb(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Jm.get(e))return Jm.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,o=Bj.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(o||qj.includes(n)))return;const u=async function(f,...g){const x=this.transaction(f,o?"readwrite":"readonly");let p=x.store;return a&&(p=p.index(g.shift())),(await Promise.all([p[n](...g),o&&x.done]))[0]};return Jm.set(e,u),u}Pj(r=>({...r,get:(e,n,a)=>Wb(e,n)||r.get(e,n,a),has:(e,n)=>!!Wb(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Fj(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function Fj(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const A0="@firebase/app",Zb="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr=new wh("@firebase/app"),Gj="@firebase/app-compat",$j="@firebase/analytics-compat",Qj="@firebase/analytics",Kj="@firebase/app-check-compat",Xj="@firebase/app-check",Yj="@firebase/auth",Wj="@firebase/auth-compat",Zj="@firebase/database",Jj="@firebase/data-connect",eT="@firebase/database-compat",tT="@firebase/functions",nT="@firebase/functions-compat",sT="@firebase/installations",rT="@firebase/installations-compat",aT="@firebase/messaging",iT="@firebase/messaging-compat",lT="@firebase/performance",oT="@firebase/performance-compat",cT="@firebase/remote-config",uT="@firebase/remote-config-compat",dT="@firebase/storage",hT="@firebase/storage-compat",fT="@firebase/firestore",mT="@firebase/ai",gT="@firebase/firestore-compat",pT="firebase",xT="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="[DEFAULT]",yT={[A0]:"fire-core",[Gj]:"fire-core-compat",[Qj]:"fire-analytics",[$j]:"fire-analytics-compat",[Xj]:"fire-app-check",[Kj]:"fire-app-check-compat",[Yj]:"fire-auth",[Wj]:"fire-auth-compat",[Zj]:"fire-rtdb",[Jj]:"fire-data-connect",[eT]:"fire-rtdb-compat",[tT]:"fire-fn",[nT]:"fire-fn-compat",[sT]:"fire-iid",[rT]:"fire-iid-compat",[aT]:"fire-fcm",[iT]:"fire-fcm-compat",[lT]:"fire-perf",[oT]:"fire-perf-compat",[cT]:"fire-rc",[uT]:"fire-rc-compat",[dT]:"fire-gcs",[hT]:"fire-gcs-compat",[fT]:"fire-fst",[gT]:"fire-fst-compat",[mT]:"fire-vertex","fire-js":"fire-js",[pT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd=new Map,bT=new Map,I0=new Map;function Jb(r,e){try{r.container.addComponent(e)}catch(n){Yr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function vr(r){const e=r.name;if(I0.has(e))return Yr.debug(`There were multiple attempts to register component ${e}.`),!1;I0.set(e,r);for(const n of Wd.values())Jb(n,r);for(const n of bT.values())Jb(n,r);return!0}function Wi(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Ns(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wa=new Yi("app","Firebase",vT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=xT;function ow(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const a={name:C0,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw Wa.create("bad-app-name",{appName:String(o)});if(n||(n=Z1()),!n)throw Wa.create("no-options");const u=Wd.get(o);if(u){if(ni(n,u.options)&&ni(a,u.config))return u;throw Wa.create("duplicate-app",{appName:o})}const f=new Aj(o);for(const x of I0.values())f.addComponent(x);const g=new wT(n,a,f);return Wd.set(o,g),g}function lg(r=C0){const e=Wd.get(r);if(!e&&r===C0&&Z1())return ow();if(!e)throw Wa.create("no-app",{appName:r});return e}function Ss(r,e,n){let a=yT[r]??r;n&&(a+=`-${n}`);const o=a.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${a}" with version "${e}":`];o&&f.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yr.warn(f.join(" "));return}vr(new qs(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="firebase-heartbeat-database",NT=1,kc="firebase-heartbeat-store";let e0=null;function cw(){return e0||(e0=lw(_T,NT,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(kc)}catch(n){console.warn(n)}}}}).catch(r=>{throw Wa.create("idb-open",{originalErrorMessage:r.message})})),e0}async function ET(r){try{const n=(await cw()).transaction(kc),a=await n.objectStore(kc).get(uw(r));return await n.done,a}catch(e){if(e instanceof Fs)Yr.warn(e.message);else{const n=Wa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yr.warn(n.message)}}}async function ev(r,e){try{const a=(await cw()).transaction(kc,"readwrite");await a.objectStore(kc).put(e,uw(r)),await a.done}catch(n){if(n instanceof Fs)Yr.warn(n.message);else{const a=Wa.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yr.warn(a.message)}}}function uw(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=1024,TT=30;class ST{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new CT(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=tv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>TT){const f=IT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Yr.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=tv(),{heartbeatsToSend:a,unsentEntries:o}=AT(this._heartbeatsCache.heartbeats),u=Yd(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Yr.warn(n),""}}}function tv(){return new Date().toISOString().substring(0,10)}function AT(r,e=jT){const n=[];let a=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),nv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),nv(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class CT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sw()?rw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ET(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return ev(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return ev(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function nv(r){return Yd(JSON.stringify({version:2,heartbeats:r})).length}function IT(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let a=1;a<r.length;a++)r[a].date<n&&(n=r[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(r){vr(new qs("platform-logger",e=>new Hj(e),"PRIVATE")),vr(new qs("heartbeat",e=>new ST(e),"PRIVATE")),Ss(A0,Zb,r),Ss(A0,Zb,"esm2020"),Ss("fire-js","")}RT("");var kT="firebase",DT="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ss(kT,DT,"app");function dw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OT=dw,hw=new Yi("auth","Firebase",dw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd=new wh("@firebase/auth");function MT(r,...e){Zd.logLevel<=We.WARN&&Zd.warn(`Auth (${lo}): ${r}`,...e)}function kd(r,...e){Zd.logLevel<=We.ERROR&&Zd.error(`Auth (${lo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(r,...e){throw og(r,...e)}function fr(r,...e){return og(r,...e)}function fw(r,e,n){const a={...OT(),[e]:n};return new Yi("auth","Firebase",a).create(e,{appName:r.name})}function Qr(r){return fw(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function og(r,...e){if(typeof r!="string"){const n=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=r.name),r._errorFactory.create(n,...a)}return hw.create(r,...e)}function ke(r,e,...n){if(!r)throw og(e,...n)}function Fr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw kd(e),new Error(e)}function Wr(r,e){r||Fr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function VT(){return sv()==="http:"||sv()==="https:"}function sv(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VT()||nw()||"connection"in navigator)?navigator.onLine:!0}function PT(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wr(n>e,"Short delay should be less than long delay!"),this.isMobile=lj()||uj()}get(){return LT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(r,e){Wr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{static initialize(e,n,a){this.fetchImpl=e,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qT=new $c(3e4,6e4);function ta(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function na(r,e,n,a,o={}){return gw(r,o,async()=>{let u={},f={};a&&(e==="GET"?f=a:u={body:JSON.stringify(a)});const g=Gc({key:r.config.apiKey,...f}).slice(1),x=await r._getAdditionalHeaders();x["Content-Type"]="application/json",r.languageCode&&(x["X-Firebase-Locale"]=r.languageCode);const p={method:e,headers:x,...u};return cj()||(p.referrerPolicy="no-referrer"),r.emulatorConfig&&io(r.emulatorConfig.host)&&(p.credentials="include"),mw.fetch()(await pw(r,r.config.apiHost,n,g),p)})}async function gw(r,e,n){r._canInitEmulator=!1;const a={...zT,...e};try{const o=new HT(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Td(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const g=u.ok?f.errorMessage:f.error.message,[x,p]=g.split(" : ");if(x==="FEDERATED_USER_ID_ALREADY_LINKED")throw Td(r,"credential-already-in-use",f);if(x==="EMAIL_EXISTS")throw Td(r,"email-already-in-use",f);if(x==="USER_DISABLED")throw Td(r,"user-disabled",f);const _=a[x]||x.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw fw(r,_,p);Bs(r,_)}}catch(o){if(o instanceof Fs)throw o;Bs(r,"network-request-failed",{message:String(o)})}}async function Qc(r,e,n,a,o={}){const u=await na(r,e,n,a,o);return"mfaPendingCredential"in u&&Bs(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function pw(r,e,n,a){const o=`${e}${n}?${a}`,u=r,f=u.config.emulator?cg(r.config,o):`${r.config.apiScheme}://${o}`;return UT.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function BT(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class HT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(fr(this.auth,"network-request-failed")),qT.get())})}}function Td(r,e,n){const a={appName:r.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const o=fr(r,e,a);return o.customData._tokenResponse=n,o}function rv(r){return r!==void 0&&r.enterprise!==void 0}class FT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return BT(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function GT(r,e){return na(r,"GET","/v2/recaptchaConfig",ta(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $T(r,e){return na(r,"POST","/v1/accounts:delete",e)}async function Jd(r,e){return na(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QT(r,e=!1){const n=qt(r),a=await n.getIdToken(e),o=ug(a);ke(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:a,authTime:Tc(t0(o.auth_time)),issuedAtTime:Tc(t0(o.iat)),expirationTime:Tc(t0(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function t0(r){return Number(r)*1e3}function ug(r){const[e,n,a]=r.split(".");if(e===void 0||n===void 0||a===void 0)return kd("JWT malformed, contained fewer than 3 sections"),null;try{const o=Y1(n);return o?JSON.parse(o):(kd("Failed to decode base64 JWT payload"),null)}catch(o){return kd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function av(r){const e=ug(r);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dc(r,e,n=!1){if(n)return e;try{return await e}catch(a){throw a instanceof Fs&&KT(a)&&r.auth.currentUser===r&&await r.auth.signOut(),a}}function KT({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tc(this.lastLoginAt),this.creationTime=Tc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eh(r){var w;const e=r.auth,n=await r.getIdToken(),a=await Dc(r,Jd(e,{idToken:n}));ke(a==null?void 0:a.users.length,e,"internal-error");const o=a.users[0];r._notifyReloadListener(o);const u=(w=o.providerUserInfo)!=null&&w.length?xw(o.providerUserInfo):[],f=WT(r.providerData,u),g=r.isAnonymous,x=!(r.email&&o.passwordHash)&&!(f!=null&&f.length),p=g?x:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new k0(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(r,_)}async function YT(r){const e=qt(r);await eh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WT(r,e){return[...r.filter(a=>!e.some(o=>o.providerId===a.providerId)),...e]}function xw(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZT(r,e){const n=await gw(r,{},async()=>{const a=Gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=await pw(r,o,"/v1/token",`key=${u}`),g=await r._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const x={method:"POST",headers:g,body:a};return r.emulatorConfig&&io(r.emulatorConfig.host)&&(x.credentials="include"),mw.fetch()(f,x)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function JT(r,e){return na(r,"POST","/v2/accounts:revokeToken",ta(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):av(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const n=av(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:a,refreshToken:o,expiresIn:u}=await ZT(e,n);this.updateTokensAndExpiration(a,o,Number(u))}updateTokensAndExpiration(e,n,a){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,n){const{refreshToken:a,accessToken:o,expirationTime:u}=n,f=new $l;return a&&(ke(typeof a=="string","internal-error",{appName:e}),f.refreshToken=a),o&&(ke(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(ke(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $l,this.toJSON())}_performRefresh(){return Fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(r,e){ke(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Us{constructor({uid:e,auth:n,stsTokenManager:a,...o}){this.providerId="firebase",this.proactiveRefresh=new XT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new k0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Dc(this,this.stsTokenManager.getToken(this.auth,e));return ke(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return QT(this,e)}reload(){return YT(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Us({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),n&&await eh(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ns(this.auth.app))return Promise.reject(Qr(this.auth));const e=await this.getIdToken();return await Dc(this,$T(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const a=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,g=n.tenantId??void 0,x=n._redirectEventId??void 0,p=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:w,emailVerified:E,isAnonymous:O,providerData:z,stsTokenManager:ne}=n;ke(w&&ne,e,"internal-error");const Q=$l.fromJSON(this.name,ne);ke(typeof w=="string",e,"internal-error"),za(a,e.name),za(o,e.name),ke(typeof E=="boolean",e,"internal-error"),ke(typeof O=="boolean",e,"internal-error"),za(u,e.name),za(f,e.name),za(g,e.name),za(x,e.name),za(p,e.name),za(_,e.name);const ce=new Us({uid:w,auth:e,email:o,emailVerified:E,displayName:a,isAnonymous:O,photoURL:f,phoneNumber:u,tenantId:g,stsTokenManager:Q,createdAt:p,lastLoginAt:_});return z&&Array.isArray(z)&&(ce.providerData=z.map(fe=>({...fe}))),x&&(ce._redirectEventId=x),ce}static async _fromIdTokenResponse(e,n,a=!1){const o=new $l;o.updateFromServerResponse(n);const u=new Us({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:a});return await eh(u),u}static async _fromGetAccountInfoResponse(e,n,a){const o=n.users[0];ke(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?xw(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),g=new $l;g.updateFromIdToken(a);const x=new Us({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:f}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new k0(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(x,p),x}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv=new Map;function Gr(r){Wr(r instanceof Function,"Expected a class definition");let e=iv.get(r);return e?(Wr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,iv.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yw.type="NONE";const lv=yw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(r,e,n){return`firebase:${r}:${e}:${n}`}class Ql{constructor(e,n,a){this.persistence=e,this.auth=n,this.userKey=a;const{config:o,name:u}=this.auth;this.fullUserKey=Dd(this.userKey,o.apiKey,u),this.fullPersistenceKey=Dd("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Jd(this.auth,{idToken:e}).catch(()=>{});return n?Us._fromGetAccountInfoResponse(this.auth,n,e):null}return Us._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,a="authUser"){if(!n.length)return new Ql(Gr(lv),e,a);const o=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||Gr(lv);const f=Dd(a,e.config.apiKey,e.name);let g=null;for(const p of n)try{const _=await p._get(f);if(_){let w;if(typeof _=="string"){const E=await Jd(e,{idToken:_}).catch(()=>{});if(!E)break;w=await Us._fromGetAccountInfoResponse(e,E,_)}else w=Us._fromJSON(e,_);p!==u&&(g=w),u=p;break}}catch{}const x=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!x.length?new Ql(u,e,a):(u=x[0],g&&await u._set(f,g.toJSON()),await Promise.all(n.map(async p=>{if(p!==u)try{await p._remove(f)}catch{}})),new Ql(u,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_w(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ew(e))return"Blackberry";if(jw(e))return"Webos";if(vw(e))return"Safari";if((e.includes("chrome/")||ww(e))&&!e.includes("edge/"))return"Chrome";if(Nw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=r.match(n);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function bw(r=Rn()){return/firefox\//i.test(r)}function vw(r=Rn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ww(r=Rn()){return/crios\//i.test(r)}function _w(r=Rn()){return/iemobile/i.test(r)}function Nw(r=Rn()){return/android/i.test(r)}function Ew(r=Rn()){return/blackberry/i.test(r)}function jw(r=Rn()){return/webos/i.test(r)}function dg(r=Rn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function eS(r=Rn()){var e;return dg(r)&&!!((e=window.navigator)!=null&&e.standalone)}function tS(){return dj()&&document.documentMode===10}function Tw(r=Rn()){return dg(r)||Nw(r)||jw(r)||Ew(r)||/windows phone/i.test(r)||_w(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(r,e=[]){let n;switch(r){case"Browser":n=ov(Rn());break;case"Worker":n=`${ov(Rn())}-${r}`;break;default:n=r}const a=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${lo}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const a=u=>new Promise((f,g)=>{try{const x=e(u);f(x)}catch(x){g(x)}});a.onAbort=n,this.queue.push(a);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const a of this.queue)await a(e),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sS(r,e={}){return na(r,"GET","/v2/passwordPolicy",ta(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=6;class aS{constructor(e){var a;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??rS,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=e.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const a=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=e.length>=a),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let o=0;o<e.length;o++)a=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,n,a,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,n,a,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cv(this),this.idTokenSubscription=new cv(this),this.beforeStateQueue=new nS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gr(n)),this._initializationPromise=this.queue(async()=>{var a,o,u;if(!this._deleted&&(this.persistenceManager=await Ql.create(this,e),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Jd(this,{idToken:e}),a=await Us._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(Ns(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(g,g))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(u=this.redirectUser)==null?void 0:u._redirectEventId,g=a==null?void 0:a._redirectEventId,x=await this.tryRedirectSignIn(e);(!f||f===g)&&(x!=null&&x.user)&&(a=x.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(f){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await eh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ns(this.app))return Promise.reject(Qr(this));const n=e?qt(e):null;return n&&ke(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ns(this.app)?Promise.reject(Qr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ns(this.app)?Promise.reject(Qr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sS(this),n=new aS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yi("auth","Firebase",e())}onAuthStateChanged(e,n,a){return this.registerStateListener(this.authStateSubscription,e,n,a)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,a){return this.registerStateListener(this.idTokenSubscription,e,n,a)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await JT(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const a=await this.getOrInitRedirectPersistenceManager(n);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gr(e)||this._popupRedirectResolver;ke(n,this,"argument-error"),this.redirectPersistenceManager=await Ql.create(this,[Gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,a;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,a,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(g,this,"internal-error"),g.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const x=e.addObserver(n,a,o);return()=>{f=!0,x()}}else{const x=e.addObserver(n);return()=>{f=!0,x()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var n;if(Ns(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&MT(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ci(r){return qt(r)}class cv{constructor(e){this.auth=e,this.observer=null,this.addObserver=yj(n=>this.observer=n)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _h={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lS(r){_h=r}function Aw(r){return _h.loadJS(r)}function oS(){return _h.recaptchaEnterpriseScript}function cS(){return _h.gapiScript}function uS(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class dS{constructor(){this.enterprise=new hS}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class hS{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const fS="recaptcha-enterprise",Cw="NO_RECAPTCHA";class mS{constructor(e){this.type=fS,this.auth=ci(e)}async verify(e="verify",n=!1){async function a(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,g)=>{GT(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(x=>{if(x.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const p=new FT(x);return u.tenantId==null?u._agentRecaptchaConfig=p:u._tenantRecaptchaConfigs[u.tenantId]=p,f(p.siteKey)}}).catch(x=>{g(x)})})}function o(u,f,g){const x=window.grecaptcha;rv(x)?x.enterprise.ready(()=>{x.enterprise.execute(u,{action:e}).then(p=>{f(p)}).catch(()=>{f(Cw)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new dS().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{a(this.auth).then(g=>{if(!n&&rv(window.grecaptcha))o(g,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let x=oS();x.length!==0&&(x+=g),Aw(x).then(()=>{o(g,u,f)}).catch(p=>{f(p)})}}).catch(g=>{f(g)})})}}async function uv(r,e,n,a=!1,o=!1){const u=new mS(r);let f;if(o)f=Cw;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const x=g.phoneEnrollmentInfo.phoneNumber,p=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:x,recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const x=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:x,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return a?Object.assign(g,{captchaResp:f}):Object.assign(g,{captchaResponse:f}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function th(r,e,n,a,o){var u;if((u=r._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await uv(r,e,n,n==="getOobCode");return a(r,f)}else return a(r,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await uv(r,e,n,n==="getOobCode");return a(r,g)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(r,e){const n=Wi(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ni(u,e??{}))return o;Bs(o,"already-initialized")}return n.initialize({options:e})}function pS(r,e){const n=(e==null?void 0:e.persistence)||[],a=(Array.isArray(n)?n:[n]).map(Gr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function xS(r,e,n){const a=ci(r);ke(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const o=!1,u=Iw(e),{host:f,port:g}=yS(e),x=g===null?"":`:${g}`,p={url:`${u}//${f}${x}/`},_=Object.freeze({host:f,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!a._canInitEmulator){ke(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),ke(ni(p,a.config.emulator)&&ni(_,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=p,a.emulatorConfig=_,a.settings.appVerificationDisabledForTesting=!0,io(f)?(ew(`${u}//${f}${x}`),tw("Auth",!0)):bS()}function Iw(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function yS(r){const e=Iw(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(a);if(o){const u=o[1];return{host:u,port:dv(a.substr(u.length+1))}}else{const[u,f]=a.split(":");return{host:u,port:dv(f)}}}function dv(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function bS(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fr("not implemented")}_getIdTokenResponse(e){return Fr("not implemented")}_linkToIdToken(e,n){return Fr("not implemented")}_getReauthenticationResolver(e){return Fr("not implemented")}}async function vS(r,e){return na(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wS(r,e){return Qc(r,"POST","/v1/accounts:signInWithPassword",ta(r,e))}async function _S(r,e){return na(r,"POST","/v1/accounts:sendOobCode",ta(r,e))}async function NS(r,e){return _S(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ES(r,e){return Qc(r,"POST","/v1/accounts:signInWithEmailLink",ta(r,e))}async function jS(r,e){return Qc(r,"POST","/v1/accounts:signInWithEmailLink",ta(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc extends hg{constructor(e,n,a,o=null){super("password",a),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Oc(e,n,"password")}static _fromEmailAndCode(e,n,a=null){return new Oc(e,n,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return th(e,n,"signInWithPassword",wS);case"emailLink":return ES(e,{email:this._email,oobCode:this._password});default:Bs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const a={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return th(e,a,"signUpPassword",vS);case"emailLink":return jS(e,{idToken:n,email:this._email,oobCode:this._password});default:Bs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kl(r,e){return Qc(r,"POST","/v1/accounts:signInWithIdp",ta(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="http://localhost";class Fi extends hg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Fi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:o,...u}=n;if(!a||!o)return null;const f=new Fi(a,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Kl(e,n)}_linkToIdToken(e,n){const a=this.buildRequest();return a.idToken=n,Kl(e,a)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Kl(e,n)}buildRequest(){const e={requestUri:TS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Gc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function AS(r){const e=xc(yc(r)).link,n=e?xc(yc(e)).deep_link_id:null,a=xc(yc(r)).deep_link_id;return(a?xc(yc(a)).link:null)||a||n||e||r}class fg{constructor(e){const n=xc(yc(e)),a=n.apiKey??null,o=n.oobCode??null,u=SS(n.mode??null);ke(a&&o&&u,"argument-error"),this.apiKey=a,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=AS(e);try{return new fg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.providerId=oo.PROVIDER_ID}static credential(e,n){return Oc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const a=fg.parseLink(n);return ke(a,"argument-error"),Oc._fromEmailAndCode(e,a.code,a.tenantId)}}oo.PROVIDER_ID="password";oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends Rw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba extends Kc{constructor(){super("facebook.com")}static credential(e){return Fi._fromParams({providerId:Ba.PROVIDER_ID,signInMethod:Ba.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ba.credentialFromTaggedObject(e)}static credentialFromError(e){return Ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ba.credential(e.oauthAccessToken)}catch{return null}}}Ba.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ba.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha extends Kc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fi._fromParams({providerId:Ha.PROVIDER_ID,signInMethod:Ha.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ha.credentialFromTaggedObject(e)}static credentialFromError(e){return Ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:a}=e;if(!n&&!a)return null;try{return Ha.credential(n,a)}catch{return null}}}Ha.GOOGLE_SIGN_IN_METHOD="google.com";Ha.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa extends Kc{constructor(){super("github.com")}static credential(e){return Fi._fromParams({providerId:Fa.PROVIDER_ID,signInMethod:Fa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fa.credentialFromTaggedObject(e)}static credentialFromError(e){return Fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fa.credential(e.oauthAccessToken)}catch{return null}}}Fa.GITHUB_SIGN_IN_METHOD="github.com";Fa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga extends Kc{constructor(){super("twitter.com")}static credential(e,n){return Fi._fromParams({providerId:Ga.PROVIDER_ID,signInMethod:Ga.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ga.credentialFromTaggedObject(e)}static credentialFromError(e){return Ga.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=e;if(!n||!a)return null;try{return Ga.credential(n,a)}catch{return null}}}Ga.TWITTER_SIGN_IN_METHOD="twitter.com";Ga.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CS(r,e){return Qc(r,"POST","/v1/accounts:signUp",ta(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,a,o=!1){const u=await Us._fromIdTokenResponse(e,a,o),f=hv(a);return new Gi({user:u,providerId:f,_tokenResponse:a,operationType:n})}static async _forOperation(e,n,a){await e._updateTokensIfNecessary(a,!0);const o=hv(a);return new Gi({user:e,providerId:o,_tokenResponse:a,operationType:n})}}function hv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh extends Fs{constructor(e,n,a,o){super(n.code,n.message),this.operationType=a,this.user=o,Object.setPrototypeOf(this,nh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,n,a,o){return new nh(e,n,a,o)}}function kw(r,e,n,a){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?nh._fromErrorAndOperation(r,u,e,a):u})}async function IS(r,e,n=!1){const a=await Dc(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Gi._forOperation(r,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RS(r,e,n=!1){const{auth:a}=r;if(Ns(a.app))return Promise.reject(Qr(a));const o="reauthenticate";try{const u=await Dc(r,kw(a,o,e,r),n);ke(u.idToken,a,"internal-error");const f=ug(u.idToken);ke(f,a,"internal-error");const{sub:g}=f;return ke(r.uid===g,a,"user-mismatch"),Gi._forOperation(r,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Bs(a,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dw(r,e,n=!1){if(Ns(r.app))return Promise.reject(Qr(r));const a="signIn",o=await kw(r,a,e),u=await Gi._fromIdTokenResponse(r,a,o);return n||await r._updateCurrentUser(u.user),u}async function kS(r,e){return Dw(ci(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ow(r){const e=ci(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function DS(r,e,n){const a=ci(r);await th(a,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",NS)}async function OS(r,e,n){if(Ns(r.app))return Promise.reject(Qr(r));const a=ci(r),f=await th(a,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",CS).catch(x=>{throw x.code==="auth/password-does-not-meet-requirements"&&Ow(r),x}),g=await Gi._fromIdTokenResponse(a,"signIn",f);return await a._updateCurrentUser(g.user),g}function MS(r,e,n){return Ns(r.app)?Promise.reject(Qr(r)):kS(qt(r),oo.credential(e,n)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&Ow(r),a})}function VS(r,e,n,a){return qt(r).onIdTokenChanged(e,n,a)}function LS(r,e,n){return qt(r).beforeAuthStateChanged(e,n)}function PS(r,e,n,a){return qt(r).onAuthStateChanged(e,n,a)}function zS(r){return qt(r).signOut()}const sh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sh,"1"),this.storage.removeItem(sh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=1e3,qS=10;class Vw extends Mw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Tw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),o=this.localCache[n];a!==o&&e(n,o,a)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,g,x)=>{this.notifyListeners(f,x)});return}const a=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(a);!n&&this.localCache[a]===f||this.notifyListeners(a,f)},u=this.storage.getItem(a);tS()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,qS):o()}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:a}),!0)})},US)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Vw.type="LOCAL";const BS=Vw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw extends Mw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Lw.type="SESSION";const Pw=Lw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const a=new Nh(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:a,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:o});const g=Array.from(f).map(async p=>p(n.origin,u)),x=await HS(g);n.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:x})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(r="",e=10){let n="";for(let a=0;a<e;a++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,a=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((g,x)=>{const p=mg("",20);o.port1.start();const _=setTimeout(()=>{x(new Error("unsupported_event"))},a);f={messageChannel:o,onMessage(w){const E=w;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{x(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(E.data.response);break;default:clearTimeout(_),clearTimeout(u),x(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(){return window}function GS(r){mr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(){return typeof mr().WorkerGlobalScope<"u"&&typeof mr().importScripts=="function"}async function $S(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function QS(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function KS(){return zw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="firebaseLocalStorageDb",XS=1,rh="firebaseLocalStorage",qw="fbase_key";class Xc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Eh(r,e){return r.transaction([rh],e?"readwrite":"readonly").objectStore(rh)}function YS(){const r=indexedDB.deleteDatabase(Uw);return new Xc(r).toPromise()}function D0(){const r=indexedDB.open(Uw,XS);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const a=r.result;try{a.createObjectStore(rh,{keyPath:qw})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const a=r.result;a.objectStoreNames.contains(rh)?e(a):(a.close(),await YS(),e(await D0()))})})}async function fv(r,e,n){const a=Eh(r,!0).put({[qw]:e,value:n});return new Xc(a).toPromise()}async function WS(r,e){const n=Eh(r,!1).get(e),a=await new Xc(n).toPromise();return a===void 0?null:a.value}function mv(r,e){const n=Eh(r,!0).delete(e);return new Xc(n).toPromise()}const ZS=800,JS=3;class Bw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await D0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(n++>JS)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nh._getInstance(KS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,a;if(this.activeServiceWorker=await $S(),!this.activeServiceWorker)return;this.sender=new FS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(a=e[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||QS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await D0();return await fv(e,sh,"1"),await mv(e,sh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>fv(a,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(a=>WS(a,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>mv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Eh(o,!1).getAll();return new Xc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)a.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!a.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ZS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Bw.type="LOCAL";const eA=Bw;new $c(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(r,e){return e?Gr(e):(ke(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg extends hg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Kl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Kl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function nA(r){return Dw(r.auth,new gg(r),r.bypassAuthState)}function sA(r){const{auth:e,user:n}=r;return ke(n,e,"internal-error"),RS(n,new gg(r),r.bypassAuthState)}async function rA(r){const{auth:e,user:n}=r;return ke(n,e,"internal-error"),IS(n,new gg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,n,a,o,u=!1){this.auth=e,this.resolver=a,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:a,postBody:o,tenantId:u,error:f,type:g}=e;if(f){this.reject(f);return}const x={auth:this.auth,requestUri:n,sessionId:a,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(x))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nA;case"linkViaPopup":case"linkViaRedirect":return rA;case"reauthViaPopup":case"reauthViaRedirect":return sA;default:Bs(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA=new $c(2e3,1e4);class Fl extends Hw{constructor(e,n,a,o,u){super(e,n,o,u),this.provider=a,this.authWindow=null,this.pollId=null,Fl.currentPopupAction&&Fl.currentPopupAction.cancel(),Fl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){Wr(this.filter.length===1,"Popup operations only handle one event");const e=mg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,a;if((a=(n=this.authWindow)==null?void 0:n.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aA.get())};e()}}Fl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="pendingRedirect",Od=new Map;class lA extends Hw{constructor(e,n,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let e=Od.get(this.auth._key());if(!e){try{const a=await oA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(n){e=()=>Promise.reject(n)}Od.set(this.auth._key(),e)}return this.bypassAuthState||Od.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oA(r,e){const n=dA(e),a=uA(r);if(!await a._isAvailable())return!1;const o=await a._get(n)==="true";return await a._remove(n),o}function cA(r,e){Od.set(r._key(),e)}function uA(r){return Gr(r._redirectPersistence)}function dA(r){return Dd(iA,r.config.apiKey,r.name)}async function hA(r,e,n=!1){if(Ns(r.app))return Promise.reject(Qr(r));const a=ci(r),o=tA(a,e),f=await new lA(a,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await a._persistUserIfCurrent(f.user),await a._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=600*1e3;class mA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(n=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var a;if(e.error&&!Fw(e)){const o=((a=e.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";n.onError(fr(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const a=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fA&&this.cachedEventUids.clear(),this.cachedEventUids.has(gv(e))}saveEventToCache(e){this.cachedEventUids.add(gv(e)),this.lastProcessedEventTime=Date.now()}}function gv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Fw({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gA(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fw(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pA(r,e={}){return na(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yA=/^https?/;async function bA(r){if(r.config.emulator)return;const{authorizedDomains:e}=await pA(r);for(const n of e)try{if(vA(n))return}catch{}Bs(r,"unauthorized-domain")}function vA(r){const e=R0(),{protocol:n,hostname:a}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&a===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===a}if(!yA.test(n))return!1;if(xA.test(r))return a===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=new $c(3e4,6e4);function pv(){const r=mr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function _A(r){return new Promise((e,n)=>{var o,u,f;function a(){pv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pv(),n(fr(r,"network-request-failed"))},timeout:wA.get()})}if((u=(o=mr().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((f=mr().gapi)!=null&&f.load)a();else{const g=uS("iframefcb");return mr()[g]=()=>{gapi.load?a():n(fr(r,"network-request-failed"))},Aw(`${cS()}?onload=${g}`).catch(x=>n(x))}}).catch(e=>{throw Md=null,e})}let Md=null;function NA(r){return Md=Md||_A(r),Md}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=new $c(5e3,15e3),jA="__/auth/iframe",TA="emulator/auth/iframe",SA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CA(r){const e=r.config;ke(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?cg(e,TA):`https://${r.config.authDomain}/${jA}`,a={apiKey:e.apiKey,appName:r.name,v:lo},o=AA.get(r.config.apiHost);o&&(a.eid=o);const u=r._getFrameworks();return u.length&&(a.fw=u.join(",")),`${n}?${Gc(a).slice(1)}`}async function IA(r){const e=await NA(r),n=mr().gapi;return ke(n,r,"internal-error"),e.open({where:document.body,url:CA(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SA,dontclear:!0},a=>new Promise(async(o,u)=>{await a.restyle({setHideOnLeave:!1});const f=fr(r,"network-request-failed"),g=mr().setTimeout(()=>{u(f)},EA.get());function x(){mr().clearTimeout(g),o(a)}a.ping(x).then(x,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kA=500,DA=600,OA="_blank",MA="http://localhost";class xv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VA(r,e,n,a=kA,o=DA){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-a)/2,0).toString();let g="";const x={...RA,width:a.toString(),height:o.toString(),top:u,left:f},p=Rn().toLowerCase();n&&(g=ww(p)?OA:n),bw(p)&&(e=e||MA,x.scrollbars="yes");const _=Object.entries(x).reduce((E,[O,z])=>`${E}${O}=${z},`,"");if(eS(p)&&g!=="_self")return LA(e||"",g),new xv(null);const w=window.open(e||"",g,_);ke(w,r,"popup-blocked");try{w.focus()}catch{}return new xv(w)}function LA(r,e){const n=document.createElement("a");n.href=r,n.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="__/auth/handler",zA="emulator/auth/handler",UA=encodeURIComponent("fac");async function yv(r,e,n,a,o,u){ke(r.config.authDomain,r,"auth-domain-config-required"),ke(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:a,v:lo,eventId:o};if(e instanceof Rw){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",xj(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))f[_]=w}if(e instanceof Kc){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(f.scopes=_.join(","))}r.tenantId&&(f.tid=r.tenantId);const g=f;for(const _ of Object.keys(g))g[_]===void 0&&delete g[_];const x=await r._getAppCheckToken(),p=x?`#${UA}=${encodeURIComponent(x)}`:"";return`${qA(r)}?${Gc(g).slice(1)}${p}`}function qA({config:r}){return r.emulator?cg(r,zA):`https://${r.authDomain}/${PA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="webStorageSupport";class BA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pw,this._completeRedirectFn=hA,this._overrideRedirectResult=cA}async _openPopup(e,n,a,o){var f;Wr((f=this.eventManagers[e._key()])==null?void 0:f.manager,"_initialize() not called before _openPopup()");const u=await yv(e,n,a,R0(),o);return VA(e,u,mg())}async _openRedirect(e,n,a,o){await this._originValidation(e);const u=await yv(e,n,a,R0(),o);return GS(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Wr(u,"If manager is not set, promise should be"),u)}const a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(e){const n=await IA(e),a=new mA(e);return n.register("authEvent",o=>(ke(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:a.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=n,a}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(n0,{type:n0},o=>{var f;const u=(f=o==null?void 0:o[0])==null?void 0:f[n0];u!==void 0&&n(!!u),Bs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=bA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Tw()||vw()||dg()}}const HA=BA;var bv="@firebase/auth",vv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $A(r){vr(new qs("auth",(e,{options:n})=>{const a=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:g}=a.options;ke(f&&!f.includes(":"),"invalid-api-key",{appName:a.name});const x={apiKey:f,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sw(r)},p=new iS(a,o,u,x);return pS(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,a)=>{e.getProvider("auth-internal").initialize()})),vr(new qs("auth-internal",e=>{const n=ci(e.getProvider("auth").getImmediate());return(a=>new FA(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ss(bv,vv,GA(r)),Ss(bv,vv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=300,KA=J1("authIdTokenMaxAge")||QA;let wv=null;const XA=r=>async e=>{const n=e&&await e.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>KA)return;const o=n==null?void 0:n.token;wv!==o&&(wv=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function YA(r=lg()){const e=Wi(r,"auth");if(e.isInitialized())return e.getImmediate();const n=gS(r,{popupRedirectResolver:HA,persistence:[eA,BS,Pw]}),a=J1("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(a,location.origin);if(location.origin===u.origin){const f=XA(u.toString());LS(n,f,()=>f(n.currentUser)),VS(n,g=>f(g))}}const o=W1("auth");return o&&xS(n,`http://${o}`),n}function WA(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}lS({loadJS(r){return new Promise((e,n)=>{const a=document.createElement("script");a.setAttribute("src",r),a.onload=e,a.onerror=o=>{const u=fr("internal-error");u.customData=o,n(u)},a.type="text/javascript",a.charset="UTF-8",WA().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$A("Browser");var _v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Za,Gw;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function A(){}A.prototype=T.prototype,S.F=T.prototype,S.prototype=new A,S.prototype.constructor=S,S.D=function(R,I,L){for(var C=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)C[ie-2]=arguments[ie];return T.prototype[I].apply(R,C)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,n),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(S,T,A){A||(A=0);const R=Array(16);if(typeof T=="string")for(var I=0;I<16;++I)R[I]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(I=0;I<16;++I)R[I]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=S.g[0],A=S.g[1],I=S.g[2];let L=S.g[3],C;C=T+(L^A&(I^L))+R[0]+3614090360&4294967295,T=A+(C<<7&4294967295|C>>>25),C=L+(I^T&(A^I))+R[1]+3905402710&4294967295,L=T+(C<<12&4294967295|C>>>20),C=I+(A^L&(T^A))+R[2]+606105819&4294967295,I=L+(C<<17&4294967295|C>>>15),C=A+(T^I&(L^T))+R[3]+3250441966&4294967295,A=I+(C<<22&4294967295|C>>>10),C=T+(L^A&(I^L))+R[4]+4118548399&4294967295,T=A+(C<<7&4294967295|C>>>25),C=L+(I^T&(A^I))+R[5]+1200080426&4294967295,L=T+(C<<12&4294967295|C>>>20),C=I+(A^L&(T^A))+R[6]+2821735955&4294967295,I=L+(C<<17&4294967295|C>>>15),C=A+(T^I&(L^T))+R[7]+4249261313&4294967295,A=I+(C<<22&4294967295|C>>>10),C=T+(L^A&(I^L))+R[8]+1770035416&4294967295,T=A+(C<<7&4294967295|C>>>25),C=L+(I^T&(A^I))+R[9]+2336552879&4294967295,L=T+(C<<12&4294967295|C>>>20),C=I+(A^L&(T^A))+R[10]+4294925233&4294967295,I=L+(C<<17&4294967295|C>>>15),C=A+(T^I&(L^T))+R[11]+2304563134&4294967295,A=I+(C<<22&4294967295|C>>>10),C=T+(L^A&(I^L))+R[12]+1804603682&4294967295,T=A+(C<<7&4294967295|C>>>25),C=L+(I^T&(A^I))+R[13]+4254626195&4294967295,L=T+(C<<12&4294967295|C>>>20),C=I+(A^L&(T^A))+R[14]+2792965006&4294967295,I=L+(C<<17&4294967295|C>>>15),C=A+(T^I&(L^T))+R[15]+1236535329&4294967295,A=I+(C<<22&4294967295|C>>>10),C=T+(I^L&(A^I))+R[1]+4129170786&4294967295,T=A+(C<<5&4294967295|C>>>27),C=L+(A^I&(T^A))+R[6]+3225465664&4294967295,L=T+(C<<9&4294967295|C>>>23),C=I+(T^A&(L^T))+R[11]+643717713&4294967295,I=L+(C<<14&4294967295|C>>>18),C=A+(L^T&(I^L))+R[0]+3921069994&4294967295,A=I+(C<<20&4294967295|C>>>12),C=T+(I^L&(A^I))+R[5]+3593408605&4294967295,T=A+(C<<5&4294967295|C>>>27),C=L+(A^I&(T^A))+R[10]+38016083&4294967295,L=T+(C<<9&4294967295|C>>>23),C=I+(T^A&(L^T))+R[15]+3634488961&4294967295,I=L+(C<<14&4294967295|C>>>18),C=A+(L^T&(I^L))+R[4]+3889429448&4294967295,A=I+(C<<20&4294967295|C>>>12),C=T+(I^L&(A^I))+R[9]+568446438&4294967295,T=A+(C<<5&4294967295|C>>>27),C=L+(A^I&(T^A))+R[14]+3275163606&4294967295,L=T+(C<<9&4294967295|C>>>23),C=I+(T^A&(L^T))+R[3]+4107603335&4294967295,I=L+(C<<14&4294967295|C>>>18),C=A+(L^T&(I^L))+R[8]+1163531501&4294967295,A=I+(C<<20&4294967295|C>>>12),C=T+(I^L&(A^I))+R[13]+2850285829&4294967295,T=A+(C<<5&4294967295|C>>>27),C=L+(A^I&(T^A))+R[2]+4243563512&4294967295,L=T+(C<<9&4294967295|C>>>23),C=I+(T^A&(L^T))+R[7]+1735328473&4294967295,I=L+(C<<14&4294967295|C>>>18),C=A+(L^T&(I^L))+R[12]+2368359562&4294967295,A=I+(C<<20&4294967295|C>>>12),C=T+(A^I^L)+R[5]+4294588738&4294967295,T=A+(C<<4&4294967295|C>>>28),C=L+(T^A^I)+R[8]+2272392833&4294967295,L=T+(C<<11&4294967295|C>>>21),C=I+(L^T^A)+R[11]+1839030562&4294967295,I=L+(C<<16&4294967295|C>>>16),C=A+(I^L^T)+R[14]+4259657740&4294967295,A=I+(C<<23&4294967295|C>>>9),C=T+(A^I^L)+R[1]+2763975236&4294967295,T=A+(C<<4&4294967295|C>>>28),C=L+(T^A^I)+R[4]+1272893353&4294967295,L=T+(C<<11&4294967295|C>>>21),C=I+(L^T^A)+R[7]+4139469664&4294967295,I=L+(C<<16&4294967295|C>>>16),C=A+(I^L^T)+R[10]+3200236656&4294967295,A=I+(C<<23&4294967295|C>>>9),C=T+(A^I^L)+R[13]+681279174&4294967295,T=A+(C<<4&4294967295|C>>>28),C=L+(T^A^I)+R[0]+3936430074&4294967295,L=T+(C<<11&4294967295|C>>>21),C=I+(L^T^A)+R[3]+3572445317&4294967295,I=L+(C<<16&4294967295|C>>>16),C=A+(I^L^T)+R[6]+76029189&4294967295,A=I+(C<<23&4294967295|C>>>9),C=T+(A^I^L)+R[9]+3654602809&4294967295,T=A+(C<<4&4294967295|C>>>28),C=L+(T^A^I)+R[12]+3873151461&4294967295,L=T+(C<<11&4294967295|C>>>21),C=I+(L^T^A)+R[15]+530742520&4294967295,I=L+(C<<16&4294967295|C>>>16),C=A+(I^L^T)+R[2]+3299628645&4294967295,A=I+(C<<23&4294967295|C>>>9),C=T+(I^(A|~L))+R[0]+4096336452&4294967295,T=A+(C<<6&4294967295|C>>>26),C=L+(A^(T|~I))+R[7]+1126891415&4294967295,L=T+(C<<10&4294967295|C>>>22),C=I+(T^(L|~A))+R[14]+2878612391&4294967295,I=L+(C<<15&4294967295|C>>>17),C=A+(L^(I|~T))+R[5]+4237533241&4294967295,A=I+(C<<21&4294967295|C>>>11),C=T+(I^(A|~L))+R[12]+1700485571&4294967295,T=A+(C<<6&4294967295|C>>>26),C=L+(A^(T|~I))+R[3]+2399980690&4294967295,L=T+(C<<10&4294967295|C>>>22),C=I+(T^(L|~A))+R[10]+4293915773&4294967295,I=L+(C<<15&4294967295|C>>>17),C=A+(L^(I|~T))+R[1]+2240044497&4294967295,A=I+(C<<21&4294967295|C>>>11),C=T+(I^(A|~L))+R[8]+1873313359&4294967295,T=A+(C<<6&4294967295|C>>>26),C=L+(A^(T|~I))+R[15]+4264355552&4294967295,L=T+(C<<10&4294967295|C>>>22),C=I+(T^(L|~A))+R[6]+2734768916&4294967295,I=L+(C<<15&4294967295|C>>>17),C=A+(L^(I|~T))+R[13]+1309151649&4294967295,A=I+(C<<21&4294967295|C>>>11),C=T+(I^(A|~L))+R[4]+4149444226&4294967295,T=A+(C<<6&4294967295|C>>>26),C=L+(A^(T|~I))+R[11]+3174756917&4294967295,L=T+(C<<10&4294967295|C>>>22),C=I+(T^(L|~A))+R[2]+718787259&4294967295,I=L+(C<<15&4294967295|C>>>17),C=A+(L^(I|~T))+R[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(I+(C<<21&4294967295|C>>>11))&4294967295,S.g[2]=S.g[2]+I&4294967295,S.g[3]=S.g[3]+L&4294967295}a.prototype.v=function(S,T){T===void 0&&(T=S.length);const A=T-this.blockSize,R=this.C;let I=this.h,L=0;for(;L<T;){if(I==0)for(;L<=A;)o(this,S,L),L+=this.blockSize;if(typeof S=="string"){for(;L<T;)if(R[I++]=S.charCodeAt(L++),I==this.blockSize){o(this,R),I=0;break}}else for(;L<T;)if(R[I++]=S[L++],I==this.blockSize){o(this,R),I=0;break}}this.h=I,this.o+=T},a.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;T=this.o*8;for(var A=S.length-8;A<S.length;++A)S[A]=T&255,T/=256;for(this.v(S),S=Array(16),T=0,A=0;A<4;++A)for(let R=0;R<32;R+=8)S[T++]=this.g[A]>>>R&255;return S};function u(S,T){var A=g;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=T(S)}function f(S,T){this.h=T;const A=[];let R=!0;for(let I=S.length-1;I>=0;I--){const L=S[I]|0;R&&L==T||(A[I]=L,R=!1)}this.g=A}var g={};function x(S){return-128<=S&&S<128?u(S,function(T){return new f([T|0],T<0?-1:0)}):new f([S|0],S<0?-1:0)}function p(S){if(isNaN(S)||!isFinite(S))return w;if(S<0)return Q(p(-S));const T=[];let A=1;for(let R=0;S>=A;R++)T[R]=S/A|0,A*=4294967296;return new f(T,0)}function _(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return Q(_(S.substring(1),T));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=p(Math.pow(T,8));let R=w;for(let L=0;L<S.length;L+=8){var I=Math.min(8,S.length-L);const C=parseInt(S.substring(L,L+I),T);I<8?(I=p(Math.pow(T,I)),R=R.j(I).add(p(C))):(R=R.j(A),R=R.add(p(C)))}return R}var w=x(0),E=x(1),O=x(16777216);r=f.prototype,r.m=function(){if(ne(this))return-Q(this).m();let S=0,T=1;for(let A=0;A<this.g.length;A++){const R=this.i(A);S+=(R>=0?R:4294967296+R)*T,T*=4294967296}return S},r.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(z(this))return"0";if(ne(this))return"-"+Q(this).toString(S);const T=p(Math.pow(S,6));var A=this;let R="";for(;;){const I=we(A,T).g;A=ce(A,I.j(T));let L=((A.g.length>0?A.g[0]:A.h)>>>0).toString(S);if(A=I,z(A))return L+R;for(;L.length<6;)L="0"+L;R=L+R}},r.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function z(S){if(S.h!=0)return!1;for(let T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function ne(S){return S.h==-1}r.l=function(S){return S=ce(this,S),ne(S)?-1:z(S)?0:1};function Q(S){const T=S.g.length,A=[];for(let R=0;R<T;R++)A[R]=~S.g[R];return new f(A,~S.h).add(E)}r.abs=function(){return ne(this)?Q(this):this},r.add=function(S){const T=Math.max(this.g.length,S.g.length),A=[];let R=0;for(let I=0;I<=T;I++){let L=R+(this.i(I)&65535)+(S.i(I)&65535),C=(L>>>16)+(this.i(I)>>>16)+(S.i(I)>>>16);R=C>>>16,L&=65535,C&=65535,A[I]=C<<16|L}return new f(A,A[A.length-1]&-2147483648?-1:0)};function ce(S,T){return S.add(Q(T))}r.j=function(S){if(z(this)||z(S))return w;if(ne(this))return ne(S)?Q(this).j(Q(S)):Q(Q(this).j(S));if(ne(S))return Q(this.j(Q(S)));if(this.l(O)<0&&S.l(O)<0)return p(this.m()*S.m());const T=this.g.length+S.g.length,A=[];for(var R=0;R<2*T;R++)A[R]=0;for(R=0;R<this.g.length;R++)for(let I=0;I<S.g.length;I++){const L=this.i(R)>>>16,C=this.i(R)&65535,ie=S.i(I)>>>16,de=S.i(I)&65535;A[2*R+2*I]+=C*de,fe(A,2*R+2*I),A[2*R+2*I+1]+=L*de,fe(A,2*R+2*I+1),A[2*R+2*I+1]+=C*ie,fe(A,2*R+2*I+1),A[2*R+2*I+2]+=L*ie,fe(A,2*R+2*I+2)}for(S=0;S<T;S++)A[S]=A[2*S+1]<<16|A[2*S];for(S=T;S<2*T;S++)A[S]=0;return new f(A,0)};function fe(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function oe(S,T){this.g=S,this.h=T}function we(S,T){if(z(T))throw Error("division by zero");if(z(S))return new oe(w,w);if(ne(S))return T=we(Q(S),T),new oe(Q(T.g),Q(T.h));if(ne(T))return T=we(S,Q(T)),new oe(Q(T.g),T.h);if(S.g.length>30){if(ne(S)||ne(T))throw Error("slowDivide_ only works with positive integers.");for(var A=E,R=T;R.l(S)<=0;)A=he(A),R=he(R);var I=B(A,1),L=B(R,1);for(R=B(R,2),A=B(A,2);!z(R);){var C=L.add(R);C.l(S)<=0&&(I=I.add(A),L=C),R=B(R,1),A=B(A,1)}return T=ce(S,I.j(T)),new oe(I,T)}for(I=w;S.l(T)>=0;){for(A=Math.max(1,Math.floor(S.m()/T.m())),R=Math.ceil(Math.log(A)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),L=p(A),C=L.j(T);ne(C)||C.l(S)>0;)A-=R,L=p(A),C=L.j(T);z(L)&&(L=E),I=I.add(L),S=ce(S,C)}return new oe(I,S)}r.B=function(S){return we(this,S).h},r.and=function(S){const T=Math.max(this.g.length,S.g.length),A=[];for(let R=0;R<T;R++)A[R]=this.i(R)&S.i(R);return new f(A,this.h&S.h)},r.or=function(S){const T=Math.max(this.g.length,S.g.length),A=[];for(let R=0;R<T;R++)A[R]=this.i(R)|S.i(R);return new f(A,this.h|S.h)},r.xor=function(S){const T=Math.max(this.g.length,S.g.length),A=[];for(let R=0;R<T;R++)A[R]=this.i(R)^S.i(R);return new f(A,this.h^S.h)};function he(S){const T=S.g.length+1,A=[];for(let R=0;R<T;R++)A[R]=S.i(R)<<1|S.i(R-1)>>>31;return new f(A,S.h)}function B(S,T){const A=T>>5;T%=32;const R=S.g.length-A,I=[];for(let L=0;L<R;L++)I[L]=T>0?S.i(L+A)>>>T|S.i(L+A+1)<<32-T:S.i(L+A);return new f(I,S.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,Gw=a,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=p,f.fromString=_,Za=f}).apply(typeof _v<"u"?_v:typeof self<"u"?self:typeof window<"u"?window:{});var Sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $w,bc,Qw,Vd,O0,Kw,Xw,Yw;(function(){var r,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sd=="object"&&Sd];for(var y=0;y<d.length;++y){var v=d[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var a=n(this);function o(d,y){if(y)e:{var v=a;d=d.split(".");for(var j=0;j<d.length-1;j++){var H=d[j];if(!(H in v))break e;v=v[H]}d=d[d.length-1],j=v[d],y=y(j),y!=j&&y!=null&&e(v,d,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(y){var v=[],j;for(j in y)Object.prototype.hasOwnProperty.call(y,j)&&v.push([j,y[j]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function g(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function x(d,y,v){return d.call.apply(d.bind,arguments)}function p(d,y,v){return p=x,p.apply(null,arguments)}function _(d,y){var v=Array.prototype.slice.call(arguments,1);return function(){var j=v.slice();return j.push.apply(j,arguments),d.apply(this,j)}}function w(d,y){function v(){}v.prototype=y.prototype,d.Z=y.prototype,d.prototype=new v,d.prototype.constructor=d,d.Ob=function(j,H,K){for(var pe=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)pe[qe-2]=arguments[qe];return y.prototype[H].apply(j,pe)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function O(d){const y=d.length;if(y>0){const v=Array(y);for(let j=0;j<y;j++)v[j]=d[j];return v}return[]}function z(d,y){for(let j=1;j<arguments.length;j++){const H=arguments[j];var v=typeof H;if(v=v!="object"?v:H?Array.isArray(H)?"array":v:"null",v=="array"||v=="object"&&typeof H.length=="number"){v=d.length||0;const K=H.length||0;d.length=v+K;for(let pe=0;pe<K;pe++)d[v+pe]=H[pe]}else d.push(H)}}class ne{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function Q(d){f.setTimeout(()=>{throw d},0)}function ce(){var d=S;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class fe{constructor(){this.h=this.g=null}add(y,v){const j=oe.get();j.set(y,v),this.h?this.h.next=j:this.g=j,this.h=j}}var oe=new ne(()=>new we,d=>d.reset());class we{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let he,B=!1,S=new fe,T=()=>{const d=Promise.resolve(void 0);he=()=>{d.then(A)}};function A(){for(var d;d=ce();){try{d.h.call(d.g)}catch(v){Q(v)}var y=oe;y.j(d),y.h<100&&(y.h++,d.next=y.g,y.g=d)}B=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const v=()=>{};f.addEventListener("test",v,y),f.removeEventListener("test",v,y)}catch{}return d})();function C(d){return/^[\s\xa0]*$/.test(d)}function ie(d,y){I.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,y)}w(ie,I),ie.prototype.init=function(d,y){const v=this.type=d.type,j=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget,y||(v=="mouseover"?y=d.fromElement:v=="mouseout"&&(y=d.toElement)),this.relatedTarget=y,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&ie.Z.h.call(this)},ie.prototype.h=function(){ie.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var de="closure_listenable_"+(Math.random()*1e6|0),q=0;function le(d,y,v,j,H){this.listener=d,this.proxy=null,this.src=y,this.type=v,this.capture=!!j,this.ha=H,this.key=++q,this.da=this.fa=!1}function Z(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ee(d,y,v){for(const j in d)y.call(v,d[j],j,d)}function Ie(d,y){for(const v in d)y.call(void 0,d[v],v,d)}function D(d){const y={};for(const v in d)y[v]=d[v];return y}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(d,y){let v,j;for(let H=1;H<arguments.length;H++){j=arguments[H];for(v in j)d[v]=j[v];for(let K=0;K<Y.length;K++)v=Y[K],Object.prototype.hasOwnProperty.call(j,v)&&(d[v]=j[v])}}function W(d){this.src=d,this.g={},this.h=0}W.prototype.add=function(d,y,v,j,H){const K=d.toString();d=this.g[K],d||(d=this.g[K]=[],this.h++);const pe=Ae(d,y,j,H);return pe>-1?(y=d[pe],v||(y.fa=!1)):(y=new le(y,this.src,K,!!j,H),y.fa=v,d.push(y)),y};function xe(d,y){const v=y.type;if(v in d.g){var j=d.g[v],H=Array.prototype.indexOf.call(j,y,void 0),K;(K=H>=0)&&Array.prototype.splice.call(j,H,1),K&&(Z(y),d.g[v].length==0&&(delete d.g[v],d.h--))}}function Ae(d,y,v,j){for(let H=0;H<d.length;++H){const K=d[H];if(!K.da&&K.listener==y&&K.capture==!!v&&K.ha==j)return H}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),rt={};function Ce(d,y,v,j,H){if(Array.isArray(y)){for(let K=0;K<y.length;K++)Ce(d,y[K],v,j,H);return null}return v=_r(v),d&&d[de]?d.J(y,v,g(j)?!!j.capture:!1,H):Et(d,y,v,!1,j,H)}function Et(d,y,v,j,H,K){if(!y)throw Error("Invalid event type");const pe=g(H)?!!H.capture:!!H;let qe=cs(d);if(qe||(d[Ue]=qe=new W(d)),v=qe.add(y,v,j,pe,K),v.proxy)return v;if(j=ft(),v.proxy=j,j.src=d,j.listener=v,d.addEventListener)L||(H=pe),H===void 0&&(H=!1),d.addEventListener(y.toString(),j,H);else if(d.attachEvent)d.attachEvent(mn(y.toString()),j);else if(d.addListener&&d.removeListener)d.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return v}function ft(){function d(v){return y.call(d.src,d.listener,v)}const y=os;return d}function jt(d,y,v,j,H){if(Array.isArray(y))for(var K=0;K<y.length;K++)jt(d,y[K],v,j,H);else j=g(j)?!!j.capture:!!j,v=_r(v),d&&d[de]?(d=d.i,K=String(y).toString(),K in d.g&&(y=d.g[K],v=Ae(y,v,j,H),v>-1&&(Z(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete d.g[K],d.h--)))):d&&(d=cs(d))&&(y=d.g[y.toString()],d=-1,y&&(d=Ae(y,v,j,H)),(v=d>-1?y[d]:null)&&at(v))}function at(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[de])xe(y.i,d);else{var v=d.type,j=d.proxy;y.removeEventListener?y.removeEventListener(v,j,d.capture):y.detachEvent?y.detachEvent(mn(v),j):y.addListener&&y.removeListener&&y.removeListener(j),(v=cs(y))?(xe(v,d),v.h==0&&(v.src=null,y[Ue]=null)):Z(d)}}}function mn(d){return d in rt?rt[d]:rt[d]="on"+d}function os(d,y){if(d.da)d=!0;else{y=new ie(y,this);const v=d.listener,j=d.ha||d.src;d.fa&&at(d),d=v.call(j,y)}return d}function cs(d){return d=d[Ue],d instanceof W?d:null}var Gs="__closure_events_fn_"+(Math.random()*1e9>>>0);function _r(d){return typeof d=="function"?d:(d[Gs]||(d[Gs]=function(y){return d.handleEvent(y)}),d[Gs])}function It(){R.call(this),this.i=new W(this),this.M=this,this.G=null}w(It,R),It.prototype[de]=!0,It.prototype.removeEventListener=function(d,y,v,j){jt(this,d,y,v,j)};function Rt(d,y){var v,j=d.G;if(j)for(v=[];j;j=j.G)v.push(j);if(d=d.M,j=y.type||y,typeof y=="string")y=new I(y,d);else if(y instanceof I)y.target=y.target||d;else{var H=y;y=new I(j,d),P(y,H)}H=!0;let K,pe;if(v)for(pe=v.length-1;pe>=0;pe--)K=y.g=v[pe],H=on(K,j,!0,y)&&H;if(K=y.g=d,H=on(K,j,!0,y)&&H,H=on(K,j,!1,y)&&H,v)for(pe=0;pe<v.length;pe++)K=y.g=v[pe],H=on(K,j,!1,y)&&H}It.prototype.N=function(){if(It.Z.N.call(this),this.i){var d=this.i;for(const y in d.g){const v=d.g[y];for(let j=0;j<v.length;j++)Z(v[j]);delete d.g[y],d.h--}}this.G=null},It.prototype.J=function(d,y,v,j){return this.i.add(String(d),y,!1,v,j)},It.prototype.K=function(d,y,v,j){return this.i.add(String(d),y,!0,v,j)};function on(d,y,v,j){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let K=0;K<y.length;++K){const pe=y[K];if(pe&&!pe.da&&pe.capture==v){const qe=pe.listener,Bt=pe.ha||pe.src;pe.fa&&xe(d.i,pe),H=qe.call(Bt,j)!==!1&&H}}return H&&!j.defaultPrevented}function ra(d,y){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:f.setTimeout(d,y||0)}function aa(d){d.g=ra(()=>{d.g=null,d.i&&(d.i=!1,aa(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class kt extends R{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:aa(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function us(d){R.call(this),this.h=d,this.g={}}w(us,R);var $s=[];function Nr(d){Ee(d.g,function(y,v){this.g.hasOwnProperty(v)&&at(y)},d),d.g={}}us.prototype.N=function(){us.Z.N.call(this),Nr(this)},us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gn=f.JSON.stringify,ia=f.JSON.parse,la=class{stringify(d){return f.JSON.stringify(d,void 0)}parse(d){return f.JSON.parse(d,void 0)}};function re(){}function $e(){}var Le={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qe(){I.call(this,"d")}w(Qe,I);function Mt(){I.call(this,"c")}w(Mt,I);var et={},Er=null;function kn(){return Er=Er||new It}et.Ia="serverreachability";function Qs(d){I.call(this,et.Ia,d)}w(Qs,I);function Ln(d){const y=kn();Rt(y,new Qs(y))}et.STAT_EVENT="statevent";function ue(d,y){I.call(this,et.STAT_EVENT,d),this.stat=y}w(ue,I);function ye(d){const y=kn();Rt(y,new ue(y,d))}et.Ja="timingevent";function je(d,y){I.call(this,et.Ja,d),this.size=y}w(je,I);function ge(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){d()},y)}function Oe(){this.g=!0}Oe.prototype.ua=function(){this.g=!1};function Ke(d,y,v,j,H,K){d.info(function(){if(d.g)if(K){var pe="",qe=K.split("&");for(let ut=0;ut<qe.length;ut++){var Bt=qe[ut].split("=");if(Bt.length>1){const Dt=Bt[0];Bt=Bt[1];const ms=Dt.split("_");pe=ms.length>=2&&ms[1]=="type"?pe+(Dt+"="+Bt+"&"):pe+(Dt+"=redacted&")}}}else pe=null;else pe=K;return"XMLHTTP REQ ("+j+") [attempt "+H+"]: "+y+`
`+v+`
`+pe})}function wt(d,y,v,j,H,K,pe){d.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+H+"]: "+y+`
`+v+`
`+K+" "+pe})}function ot(d,y,v,j){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+Vt(d,v)+(j?" "+j:"")})}function ct(d,y){d.info(function(){return"TIMEOUT: "+y})}Oe.prototype.info=function(){};function Vt(d,y){if(!d.g)return y;if(!y)return null;try{const K=JSON.parse(y);if(K){for(d=0;d<K.length;d++)if(Array.isArray(K[d])){var v=K[d];if(!(v.length<2)){var j=v[1];if(Array.isArray(j)&&!(j.length<1)){var H=j[0];if(H!="noop"&&H!="stop"&&H!="close")for(let pe=1;pe<j.length;pe++)j[pe]=""}}}}return gn(K)}catch{return y}}var cn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},hi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},go;function fi(){}w(fi,re),fi.prototype.g=function(){return new XMLHttpRequest},go=new fi;function jr(d){return encodeURIComponent(String(d))}function ru(d){var y=1;d=d.split(":");const v=[];for(;y>0&&d.length;)v.push(d.shift()),y--;return d.length&&v.push(d.join(":")),v}function Is(d,y,v,j){this.j=d,this.i=y,this.l=v,this.S=j||1,this.V=new us(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Rs}function Rs(){this.i=null,this.g="",this.h=!1}var Kt={},un={};function Ks(d,y,v){d.M=1,d.A=mi(Yt(y)),d.u=v,d.R=!0,el(d,null)}function el(d,y){d.F=Date.now(),Xs(d),d.B=Yt(d.A);var v=d.B,j=d.S;Array.isArray(j)||(j=[String(j)]),rl(v.i,"t",j),d.C=0,v=d.j.L,d.h=new Rs,d.g=bu(d.j,v?y:null,!d.u),d.P>0&&(d.O=new kt(p(d.Y,d,d.g),d.P)),y=d.V,v=d.g,j=d.ba;var H="readystatechange";Array.isArray(H)||(H&&($s[0]=H.toString()),H=$s);for(let K=0;K<H.length;K++){const pe=Ce(v,H[K],j||y.handleEvent,!1,y.h||y);if(!pe)break;y.g[pe.key]=pe}y=d.J?D(d.J):{},d.u?(d.v||(d.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,y)):(d.v="GET",d.g.ea(d.B,d.v,null,y)),Ln(),Ke(d.i,d.v,d.B,d.l,d.S,d.u)}Is.prototype.ba=function(d){d=d.target;const y=this.O;y&&Os(d)==3?y.j():this.Y(d)},Is.prototype.Y=function(d){try{if(d==this.g)e:{const qe=Os(this.g),Bt=this.g.ya(),ut=this.g.ca();if(!(qe<3)&&(qe!=3||this.g&&(this.h.h||this.g.la()||pn(this.g)))){this.K||qe!=4||Bt==7||(Bt==8||ut<=0?Ln(3):Ln(2)),Ys(this);var y=this.g.ca();this.X=y;var v=Kh(this);if(this.o=y==200,wt(this.i,this.v,this.B,this.l,this.S,qe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var j,H=this.g;if((j=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(j)){var K=j;break t}}K=null}if(d=K)ot(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ws(this,d);else{this.o=!1,this.m=3,ye(12),Xn(this),ds(this);break e}}if(this.R){d=!0;let Dt;for(;!this.K&&this.C<v.length;)if(Dt=iu(this,v),Dt==un){qe==4&&(this.m=4,ye(14),d=!1),ot(this.i,this.l,null,"[Incomplete Response]");break}else if(Dt==Kt){this.m=4,ye(15),ot(this.i,this.l,v,"[Invalid Chunk]"),d=!1;break}else ot(this.i,this.l,Dt,null),Ws(this,Dt);if(au(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qe!=4||v.length!=0||this.h.h||(this.m=1,ye(16),d=!1),this.o=this.o&&d,!d)ot(this.i,this.l,v,"[Invalid Chunked Response]"),Xn(this),ds(this);else if(v.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Io(pe),pe.P=!0,ye(11))}}else ot(this.i,this.l,v,null),Ws(this,v);qe==4&&Xn(this),this.o&&!this.K&&(qe==4?gu(this.j,this):(this.o=!1,Xs(this)))}else Sr(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,ye(12)):(this.m=0,ye(13)),Xn(this),ds(this)}}}catch{}finally{}};function Kh(d){if(!au(d))return d.g.la();const y=pn(d.g);if(y==="")return"";let v="";const j=y.length,H=Os(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Xn(d),ds(d),"";d.h.i=new f.TextDecoder}for(let K=0;K<j;K++)d.h.h=!0,v+=d.h.i.decode(y[K],{stream:!(H&&K==j-1)});return y.length=0,d.h.g+=v,d.C=0,d.h.g}function au(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function iu(d,y){var v=d.C,j=y.indexOf(`
`,v);return j==-1?un:(v=Number(y.substring(v,j)),isNaN(v)?Kt:(j+=1,j+v>y.length?un:(y=y.slice(j,j+v),d.C=j+v,y)))}Is.prototype.cancel=function(){this.K=!0,Xn(this)};function Xs(d){d.T=Date.now()+d.H,tl(d,d.H)}function tl(d,y){if(d.D!=null)throw Error("WatchDog timer not null");d.D=ge(p(d.aa,d),y)}function Ys(d){d.D&&(f.clearTimeout(d.D),d.D=null)}Is.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(ct(this.i,this.B),this.M!=2&&(Ln(),ye(17)),Xn(this),this.m=2,ds(this)):tl(this,this.T-d)};function ds(d){d.j.I==0||d.K||gu(d.j,d)}function Xn(d){Ys(d);var y=d.O;y&&typeof y.dispose=="function"&&y.dispose(),d.O=null,Nr(d.V),d.g&&(y=d.g,d.g=null,y.abort(),y.dispose())}function Ws(d,y){try{var v=d.j;if(v.I!=0&&(v.g==d||Js(v.h,d))){if(!d.L&&Js(v.h,d)&&v.I==3){try{var j=v.Ba.g.parse(y)}catch{j=null}if(Array.isArray(j)&&j.length==3){var H=j;if(H[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<d.F)cl(v),ga(v);else break e;wi(v),ye(18)}}else v.xa=H[1],0<v.xa-v.K&&H[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=ge(p(v.Va,v),6e3));Zs(v.h)<=1&&v.ta&&(v.ta=void 0)}else ar(v,11)}else if((d.L||v.g==d)&&cl(v),!C(y))for(H=v.Ba.g.parse(y),y=0;y<H.length;y++){let ut=H[y];const Dt=ut[0];if(!(Dt<=v.K))if(v.K=Dt,ut=ut[1],v.I==2)if(ut[0]=="c"){v.M=ut[1],v.ba=ut[2];const ms=ut[3];ms!=null&&(v.ka=ms,v.j.info("VER="+v.ka));const ir=ut[4];ir!=null&&(v.za=ir,v.j.info("SVER="+v.za));const Ms=ut[5];Ms!=null&&typeof Ms=="number"&&Ms>0&&(j=1.5*Ms,v.O=j,v.j.info("backChannelRequestTimeoutMs_="+j)),j=v;const Vs=d.g;if(Vs){const _i=Vs.g?Vs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_i){var K=j.h;K.g||_i.indexOf("spdy")==-1&&_i.indexOf("quic")==-1&&_i.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(yo(K,K.h),K.h=null))}if(j.G){const ul=Vs.g?Vs.g.getResponseHeader("X-HTTP-Session-Id"):null;ul&&(j.wa=ul,mt(j.J,j.G,ul))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-d.F,v.j.info("Handshake RTT: "+v.T+"ms")),j=v;var pe=d;if(j.na=yu(j,j.L?j.ba:null,j.W),pe.L){bo(j.h,pe);var qe=pe,Bt=j.O;Bt&&(qe.H=Bt),qe.D&&(Ys(qe),Xs(qe)),j.g=pe}else fu(j);v.i.length>0&&rr(v)}else ut[0]!="stop"&&ut[0]!="close"||ar(v,7);else v.I==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?ar(v,7):Ao(v):ut[0]!="noop"&&v.l&&v.l.qa(ut),v.A=0)}}Ln(4)}catch{}}var Xt=class{constructor(d,y){this.g=d,this.map=y}};function po(d){this.l=d||10,f.PerformanceNavigationTiming?(d=f.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function xo(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Zs(d){return d.h?1:d.g?d.g.size:0}function Js(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function yo(d,y){d.g?d.g.add(y):d.h=y}function bo(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}po.prototype.cancel=function(){if(this.i=vo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function vo(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const v of d.g.values())y=y.concat(v.G);return y}return O(d.i)}var lu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nl(d,y){if(d){d=d.split("&");for(let v=0;v<d.length;v++){const j=d[v].indexOf("=");let H,K=null;j>=0?(H=d[v].substring(0,j),K=d[v].substring(j+1)):H=d[v],y(H,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Yn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;d instanceof Yn?(this.l=d.l,dn(this,d.j),this.o=d.o,this.g=d.g,oa(this,d.u),this.h=d.h,wo(this,du(d.i)),this.m=d.m):d&&(y=String(d).match(lu))?(this.l=!1,dn(this,y[1]||"",!0),this.o=er(y[2]||""),this.g=er(y[3]||"",!0),oa(this,y[4]),this.h=er(y[5]||"",!0),wo(this,y[6]||"",!0),this.m=er(y[7]||"")):(this.l=!1,this.i=new ua(null,this.l))}Yn.prototype.toString=function(){const d=[];var y=this.j;y&&d.push(gi(y,sl,!0),":");var v=this.g;return(v||y=="file")&&(d.push("//"),(y=this.o)&&d.push(gi(y,sl,!0),"@"),d.push(jr(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&d.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&d.push("/"),d.push(gi(v,v.charAt(0)=="/"?_o:ou,!0))),(v=this.i.toString())&&d.push("?",v),(v=this.m)&&d.push("#",gi(v,cu)),d.join("")},Yn.prototype.resolve=function(d){const y=Yt(this);let v=!!d.j;v?dn(y,d.j):v=!!d.o,v?y.o=d.o:v=!!d.g,v?y.g=d.g:v=d.u!=null;var j=d.h;if(v)oa(y,d.u);else if(v=!!d.h){if(j.charAt(0)!="/")if(this.g&&!this.h)j="/"+j;else{var H=y.h.lastIndexOf("/");H!=-1&&(j=y.h.slice(0,H+1)+j)}if(H=j,H==".."||H==".")j="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){j=H.lastIndexOf("/",0)==0,H=H.split("/");const K=[];for(let pe=0;pe<H.length;){const qe=H[pe++];qe=="."?j&&pe==H.length&&K.push(""):qe==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),j&&pe==H.length&&K.push("")):(K.push(qe),j=!0)}j=K.join("/")}else j=H}return v?y.h=j:v=d.i.toString()!=="",v?wo(y,du(d.i)):v=!!d.m,v&&(y.m=d.m),y};function Yt(d){return new Yn(d)}function dn(d,y,v){d.j=v?er(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function oa(d,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);d.u=y}else d.u=null}function wo(d,y,v){y instanceof ua?(d.i=y,al(d.i,d.l)):(v||(y=gi(y,ca)),d.i=new ua(y,d.l))}function mt(d,y,v){d.i.set(y,v)}function mi(d){return mt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function er(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function gi(d,y,v){return typeof d=="string"?(d=encodeURI(d).replace(y,Pn),v&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Pn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var sl=/[#\/\?@]/g,ou=/[#\?:]/g,_o=/[#\?]/g,ca=/[#\?@]/g,cu=/#/g;function ua(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function zn(d){d.g||(d.g=new Map,d.h=0,d.i&&nl(d.i,function(y,v){d.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}r=ua.prototype,r.add=function(d,y){zn(this),this.i=null,d=da(this,d);let v=this.g.get(d);return v||this.g.set(d,v=[]),v.push(y),this.h+=1,this};function uu(d,y){zn(d),y=da(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function No(d,y){return zn(d),y=da(d,y),d.g.has(y)}r.forEach=function(d,y){zn(this),this.g.forEach(function(v,j){v.forEach(function(H){d.call(y,H,j,this)},this)},this)};function Eo(d,y){zn(d);let v=[];if(typeof y=="string")No(d,y)&&(v=v.concat(d.g.get(da(d,y))));else for(d=Array.from(d.g.values()),y=0;y<d.length;y++)v=v.concat(d[y]);return v}r.set=function(d,y){return zn(this),this.i=null,d=da(this,d),No(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},r.get=function(d,y){return d?(d=Eo(this,d),d.length>0?String(d[0]):y):y};function rl(d,y,v){uu(d,y),v.length>0&&(d.i=null,d.g.set(da(d,y),O(v)),d.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(let j=0;j<y.length;j++){var v=y[j];const H=jr(v);v=Eo(this,v);for(let K=0;K<v.length;K++){let pe=H;v[K]!==""&&(pe+="="+jr(v[K])),d.push(pe)}}return this.i=d.join("&")};function du(d){const y=new ua;return y.i=d.i,d.g&&(y.g=new Map(d.g),y.h=d.h),y}function da(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function al(d,y){y&&!d.j&&(zn(d),d.i=null,d.g.forEach(function(v,j){const H=j.toLowerCase();j!=H&&(uu(this,j),rl(this,H,v))},d)),d.j=y}function ks(d,y){const v=new Oe;if(f.Image){const j=new Image;j.onload=_(hs,v,"TestLoadImage: loaded",!0,y,j),j.onerror=_(hs,v,"TestLoadImage: error",!1,y,j),j.onabort=_(hs,v,"TestLoadImage: abort",!1,y,j),j.ontimeout=_(hs,v,"TestLoadImage: timeout",!1,y,j),f.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=d}else y(!1)}function jo(d,y){const v=new Oe,j=new AbortController,H=setTimeout(()=>{j.abort(),hs(v,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:j.signal}).then(K=>{clearTimeout(H),K.ok?hs(v,"TestPingServer: ok",!0,y):hs(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),hs(v,"TestPingServer: error",!1,y)})}function hs(d,y,v,j,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),j(v)}catch{}}function ha(){this.g=new la}function tr(d){this.i=d.Sb||null,this.h=d.ab||!1}w(tr,re),tr.prototype.g=function(){return new pi(this.i,this.h)};function pi(d,y){It.call(this),this.H=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(pi,It),r=pi.prototype,r.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=y,this.readyState=1,Ds(this)},r.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(y.body=d),(this.H||f).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,fa(this)),this.readyState=0},r.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ds(this)),this.g&&(this.readyState=3,Ds(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;il(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function il(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}r.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?fa(this):Ds(this),this.readyState==3&&il(this)}},r.Oa=function(d){this.g&&(this.response=this.responseText=d,fa(this))},r.Na=function(d){this.g&&(this.response=d,fa(this))},r.ga=function(){this.g&&fa(this)};function fa(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Ds(d)}r.setRequestHeader=function(d,y){this.A.append(d,y)},r.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,d.push(v[0]+": "+v[1]),v=y.next();return d.join(`\r
`)};function Ds(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(pi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function fs(d){let y="";return Ee(d,function(v,j){y+=j,y+=":",y+=v,y+=`\r
`}),y}function xi(d,y,v){e:{for(j in v){var j=!1;break e}j=!0}j||(v=fs(v),typeof d=="string"?v!=null&&jr(v):mt(d,y,v))}function xt(d){It.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(xt,It);var nr=/^https?$/i,To=["POST","PUT"];r=xt.prototype,r.Fa=function(d){this.H=d},r.ea=function(d,y,v,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():go.g(),this.g.onreadystatechange=E(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(K){yi(this,K);return}if(d=v||"",v=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var H in j)v.set(H,j[H]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const K of j.keys())v.set(K,j.get(K));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(v.keys()).find(K=>K.toLowerCase()=="content-type"),H=f.FormData&&d instanceof f.FormData,!(Array.prototype.indexOf.call(To,y,void 0)>=0)||j||H||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,pe]of v)this.g.setRequestHeader(K,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(K){yi(this,K)}};function yi(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.o=5,So(d),Tr(d)}function So(d){d.A||(d.A=!0,Rt(d,"complete"),Rt(d,"error"))}r.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Rt(this,"complete"),Rt(this,"abort"),Tr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tr(this,!0)),xt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?bi(this):this.Xa())},r.Xa=function(){bi(this)};function bi(d){if(d.h&&typeof u<"u"){if(d.v&&Os(d)==4)setTimeout(d.Ca.bind(d),0);else if(Rt(d,"readystatechange"),Os(d)==4){d.h=!1;try{const K=d.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var j;if(j=K===0){let pe=String(d.D).match(lu)[1]||null;!pe&&f.self&&f.self.location&&(pe=f.self.location.protocol.slice(0,-1)),j=!nr.test(pe?pe.toLowerCase():"")}v=j}if(v)Rt(d,"complete"),Rt(d,"success");else{d.o=6;try{var H=Os(d)>2?d.g.statusText:""}catch{H=""}d.l=H+" ["+d.ca()+"]",So(d)}}finally{Tr(d)}}}}function Tr(d,y){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const v=d.g;d.g=null,y||Rt(d,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Os(d){return d.g?d.g.readyState:0}r.ca=function(){try{return Os(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),ia(y)}};function pn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Sr(d){const y={};d=(d.g&&Os(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<d.length;j++){if(C(d[j]))continue;var v=ru(d[j]);const H=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const K=y[H]||[];y[H]=K,K.push(v)}Ie(y,function(j){return j.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function sr(d,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[d]||y}function ma(d){this.za=0,this.i=[],this.j=new Oe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=sr("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=sr("baseRetryDelayMs",5e3,d),this.Za=sr("retryDelaySeedMs",1e4,d),this.Ta=sr("forwardChannelMaxRetries",2,d),this.va=sr("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new po(d&&d.concurrentRequestLimit),this.Ba=new ha,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=ma.prototype,r.ka=8,r.I=1,r.connect=function(d,y,v,j){ye(0),this.W=d,this.H=y||{},v&&j!==void 0&&(this.H.OSID=v,this.H.OAID=j),this.F=this.X,this.J=yu(this,null,this.W),rr(this)};function Ao(d){if(ll(d),d.I==3){var y=d.V++,v=Yt(d.J);if(mt(v,"SID",d.M),mt(v,"RID",y),mt(v,"TYPE","terminate"),vi(d,v),y=new Is(d,d.j,y),y.M=2,y.A=mi(Yt(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&f.Image&&(new Image().src=y.A,v=!0),v||(y.g=bu(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Xs(y)}xu(d)}function ga(d){d.g&&(Io(d),d.g.cancel(),d.g=null)}function ll(d){ga(d),d.v&&(f.clearTimeout(d.v),d.v=null),cl(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&f.clearTimeout(d.m),d.m=null)}function rr(d){if(!xo(d.h)&&!d.m){d.m=!0;var y=d.Ea;he||T(),B||(he(),B=!0),S.add(y,d),d.D=0}}function ol(d,y){return Zs(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=y.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=ge(p(d.Ea,d,y),pu(d,d.D)),d.D++,!0)}r.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const H=new Is(this,this.j,d);let K=this.o;if(this.U&&(K?(K=D(K),P(K,this.U)):K=this.U),this.u!==null||this.R||(H.J=K,K=null),this.S)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var j=this.i[v];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(y+=j,y>4096){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=hu(this,H,y),v=Yt(this.J),mt(v,"RID",d),mt(v,"CVER",22),this.G&&mt(v,"X-HTTP-Session-Id",this.G),vi(this,v),K&&(this.R?y="headers="+jr(fs(K))+"&"+y:this.u&&xi(v,this.u,K)),yo(this.h,H),this.Ra&&mt(v,"TYPE","init"),this.S?(mt(v,"$req",y),mt(v,"SID","null"),H.U=!0,Ks(H,v,null)):Ks(H,v,y),this.I=2}}else this.I==3&&(d?Co(this,d):this.i.length==0||xo(this.h)||Co(this))};function Co(d,y){var v;y?v=y.l:v=d.V++;const j=Yt(d.J);mt(j,"SID",d.M),mt(j,"RID",v),mt(j,"AID",d.K),vi(d,j),d.u&&d.o&&xi(j,d.u,d.o),v=new Is(d,d.j,v,d.D+1),d.u===null&&(v.J=d.o),y&&(d.i=y.G.concat(d.i)),y=hu(d,v,1e3),v.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),yo(d.h,v),Ks(v,j,y)}function vi(d,y){d.H&&Ee(d.H,function(v,j){mt(y,j,v)}),d.l&&Ee({},function(v,j){mt(y,j,v)})}function hu(d,y,v){v=Math.min(d.i.length,v);const j=d.l?p(d.l.Ka,d.l,d):null;e:{var H=d.i;let qe=-1;for(;;){const Bt=["count="+v];qe==-1?v>0?(qe=H[0].g,Bt.push("ofs="+qe)):qe=0:Bt.push("ofs="+qe);let ut=!0;for(let Dt=0;Dt<v;Dt++){var K=H[Dt].g;const ms=H[Dt].map;if(K-=qe,K<0)qe=Math.max(0,H[Dt].g-100),ut=!1;else try{K="req"+K+"_"||"";try{var pe=ms instanceof Map?ms:Object.entries(ms);for(const[ir,Ms]of pe){let Vs=Ms;g(Ms)&&(Vs=gn(Ms)),Bt.push(K+ir+"="+encodeURIComponent(Vs))}}catch(ir){throw Bt.push(K+"type="+encodeURIComponent("_badmap")),ir}}catch{j&&j(ms)}}if(ut){pe=Bt.join("&");break e}}pe=void 0}return d=d.i.splice(0,v),y.G=d,pe}function fu(d){if(!d.g&&!d.v){d.Y=1;var y=d.Da;he||T(),B||(he(),B=!0),S.add(y,d),d.A=0}}function wi(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=ge(p(d.Da,d),pu(d,d.A)),d.A++,!0)}r.Da=function(){if(this.v=null,mu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=ge(p(this.Wa,this),d)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ye(10),ga(this),mu(this))};function Io(d){d.B!=null&&(f.clearTimeout(d.B),d.B=null)}function mu(d){d.g=new Is(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var y=Yt(d.na);mt(y,"RID","rpc"),mt(y,"SID",d.M),mt(y,"AID",d.K),mt(y,"CI",d.F?"0":"1"),!d.F&&d.ia&&mt(y,"TO",d.ia),mt(y,"TYPE","xmlhttp"),vi(d,y),d.u&&d.o&&xi(y,d.u,d.o),d.O&&(d.g.H=d.O);var v=d.g;d=d.ba,v.M=1,v.A=mi(Yt(y)),v.u=null,v.R=!0,el(v,d)}r.Va=function(){this.C!=null&&(this.C=null,ga(this),wi(this),ye(19))};function cl(d){d.C!=null&&(f.clearTimeout(d.C),d.C=null)}function gu(d,y){var v=null;if(d.g==y){cl(d),Io(d),d.g=null;var j=2}else if(Js(d.h,y))v=y.G,bo(d.h,y),j=1;else return;if(d.I!=0){if(y.o)if(j==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var H=d.D;j=kn(),Rt(j,new je(j,v)),rr(d)}else fu(d);else if(H=y.m,H==3||H==0&&y.X>0||!(j==1&&ol(d,y)||j==2&&wi(d)))switch(v&&v.length>0&&(y=d.h,y.i=y.i.concat(v)),H){case 1:ar(d,5);break;case 4:ar(d,10);break;case 3:ar(d,6);break;default:ar(d,2)}}}function pu(d,y){let v=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(v*=2),v*y}function ar(d,y){if(d.j.info("Error code "+y),y==2){var v=p(d.bb,d),j=d.Ua;const H=!j;j=new Yn(j||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||dn(j,"https"),mi(j),H?ks(j.toString(),v):jo(j.toString(),v)}else ye(2);d.I=0,d.l&&d.l.pa(y),xu(d),ll(d)}r.bb=function(d){d?(this.j.info("Successfully pinged google.com"),ye(2)):(this.j.info("Failed to ping google.com"),ye(1))};function xu(d){if(d.I=0,d.ja=[],d.l){const y=vo(d.h);(y.length!=0||d.i.length!=0)&&(z(d.ja,y),z(d.ja,d.i),d.h.i.length=0,O(d.i),d.i.length=0),d.l.oa()}}function yu(d,y,v){var j=v instanceof Yn?Yt(v):new Yn(v);if(j.g!="")y&&(j.g=y+"."+j.g),oa(j,j.u);else{var H=f.location;j=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const K=new Yn(null);j&&dn(K,j),y&&(K.g=y),H&&oa(K,H),v&&(K.h=v),j=K}return v=d.G,y=d.wa,v&&y&&mt(j,v,y),mt(j,"VER",d.ka),vi(d,j),j}function bu(d,y,v){if(y&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Aa&&!d.ma?new xt(new tr({ab:v})):new xt(d.ma),y.Fa(d.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function vu(){}r=vu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function pa(){}pa.prototype.g=function(d,y){return new Dn(d,y)};function Dn(d,y){It.call(this),this.g=new ma(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(d?d["X-WebChannel-Client-Profile"]=y.sa:d={"X-WebChannel-Client-Profile":y.sa}),this.g.U=d,(d=y&&y.Qb)&&!C(d)&&(this.g.u=d),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!C(y)&&(this.g.G=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new Ar(this)}w(Dn,It),Dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){Ao(this.g)},Dn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var v={};v.__data__=d,d=v}else this.v&&(v={},v.__data__=gn(d),d=v);y.i.push(new Xt(y.Ya++,d)),y.I==3&&rr(y)},Dn.prototype.N=function(){this.g.l=null,delete this.j,Ao(this.g),delete this.g,Dn.Z.N.call(this)};function wu(d){Qe.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const v in y){d=v;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}w(wu,Qe);function _u(){Mt.call(this),this.status=1}w(_u,Mt);function Ar(d){this.g=d}w(Ar,vu),Ar.prototype.ra=function(){Rt(this.g,"a")},Ar.prototype.qa=function(d){Rt(this.g,new wu(d))},Ar.prototype.pa=function(d){Rt(this.g,new _u)},Ar.prototype.oa=function(){Rt(this.g,"b")},pa.prototype.createWebChannel=pa.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,Yw=function(){return new pa},Xw=function(){return kn()},Kw=et,O0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},cn.NO_ERROR=0,cn.TIMEOUT=8,cn.HTTP_ERROR=6,Vd=cn,hi.COMPLETE="complete",Qw=hi,$e.EventType=Le,Le.OPEN="a",Le.CLOSE="b",Le.ERROR="c",Le.MESSAGE="d",It.prototype.listen=It.prototype.J,bc=$e,xt.prototype.listenOnce=xt.prototype.K,xt.prototype.getLastError=xt.prototype.Ha,xt.prototype.getLastErrorCode=xt.prototype.ya,xt.prototype.getStatus=xt.prototype.ca,xt.prototype.getResponseJson=xt.prototype.La,xt.prototype.getResponseText=xt.prototype.la,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Fa,$w=xt}).apply(typeof Sd<"u"?Sd:typeof self<"u"?self:typeof window<"u"?window:{});const Nv="@firebase/firestore",Ev="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sn.UNAUTHENTICATED=new Sn(null),Sn.GOOGLE_CREDENTIALS=new Sn("google-credentials-uid"),Sn.FIRST_PARTY=new Sn("first-party-uid"),Sn.MOCK_USER=new Sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let co="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new wh("@firebase/firestore");function Ul(){return $i.logLevel}function ve(r,...e){if($i.logLevel<=We.DEBUG){const n=e.map(pg);$i.debug(`Firestore (${co}): ${r}`,...n)}}function Zr(r,...e){if($i.logLevel<=We.ERROR){const n=e.map(pg);$i.error(`Firestore (${co}): ${r}`,...n)}}function Zl(r,...e){if($i.logLevel<=We.WARN){const n=e.map(pg);$i.warn(`Firestore (${co}): ${r}`,...n)}}function pg(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(r,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,Ww(r,a,n)}function Ww(r,e,n){let a=`FIRESTORE (${co}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw Zr(a),new Error(a)}function ht(r,e,n,a){let o="Unexpected state";typeof n=="string"?o=n:a=n,r||Ww(e,o,a)}function ze(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Fs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Sn.UNAUTHENTICATED)))}shutdown(){}}class JA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class e3{constructor(e){this.t=e,this.currentUser=Sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ht(this.o===void 0,42304);let a=this.i;const o=x=>this.i!==a?(a=this.i,n(x)):Promise.resolve();let u=new Kr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Kr,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const x=u;e.enqueueRetryable((async()=>{await x.promise,await o(this.currentUser)}))},g=x=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((x=>g(x))),setTimeout((()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?g(x):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Kr)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(ht(typeof a.accessToken=="string",31837,{l:a}),new Zw(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ht(e===null||typeof e=="string",2055,{h:e}),new Sn(e)}}class t3{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=Sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class n3{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new t3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class jv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class s3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ns(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ht(this.o===void 0,3512);const a=u=>{u.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,ve("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>a(u)))};const o=u=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new jv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ht(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new jv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<r;a++)n[a]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=r3(40);for(let u=0;u<o.length;++u)a.length<20&&o[u]<n&&(a+=e.charAt(o[u]%62))}return a}}function Ze(r,e){return r<e?-1:r>e?1:0}function M0(r,e){const n=Math.min(r.length,e.length);for(let a=0;a<n;a++){const o=r.charAt(a),u=e.charAt(a);if(o!==u)return s0(o)===s0(u)?Ze(o,u):s0(o)?1:-1}return Ze(r.length,e.length)}const a3=55296,i3=57343;function s0(r){const e=r.charCodeAt(0);return e>=a3&&e<=i3}function Jl(r,e,n){return r.length===e.length&&r.every(((a,o)=>n(a,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="__name__";class dr{constructor(e,n,a){n===void 0?n=0:n>e.length&&De(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&De(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return dr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof dr?e.forEach((a=>{n.push(a)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let o=0;o<a;o++){const u=dr.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Ze(e.length,n.length)}static compareSegments(e,n){const a=dr.isNumericId(e),o=dr.isNumericId(n);return a&&!o?-1:!a&&o?1:a&&o?dr.extractNumericId(e).compare(dr.extractNumericId(n)):M0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Za.fromString(e.substring(4,e.length-2))}}class Nt extends dr{construct(e,n,a){return new Nt(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new be(te.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((o=>o.length>0)))}return new Nt(n)}static emptyPath(){return new Nt([])}}const l3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nn extends dr{construct(e,n,a){return new Nn(e,n,a)}static isValidIdentifier(e){return l3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Tv}static keyField(){return new Nn([Tv])}static fromServerFormat(e){const n=[];let a="",o=0;const u=()=>{if(a.length===0)throw new be(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let f=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new be(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const x=e[o+1];if(x!=="\\"&&x!=="."&&x!=="`")throw new be(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=x,o+=2}else g==="`"?(f=!f,o++):g!=="."||f?(a+=g,o++):(u(),o++)}if(u(),f)throw new be(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nn(n)}static emptyPath(){return new Nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(Nt.fromString(e))}static fromName(e){return new Se(Nt.fromString(e).popFirst(5))}static empty(){return new Se(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new Nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(r,e,n){if(!n)throw new be(te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function o3(r,e,n,a){if(e===!0&&a===!0)throw new be(te.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Sv(r){if(!Se.isDocumentKey(r))throw new be(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Av(r){if(Se.isDocumentKey(r))throw new be(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function e2(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function jh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":De(12329,{type:typeof r})}function Qn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new be(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jh(r);throw new be(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}function c3(r,e){if(e<=0)throw new be(te.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(r,e){const n={typeString:r};return e&&(n.value=e),n}function Yc(r,e){if(!e2(r))throw new be(te.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const o=e[a].typeString,u="value"in e[a]?{value:e[a].value}:void 0;if(!(a in r)){n=`JSON missing required field: '${a}'`;break}const f=r[a];if(o&&typeof f!==o){n=`JSON field '${a}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${a}' field to equal '${u.value}'`;break}}if(n)throw new be(te.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=-62135596800,Iv=1e6;class Ct{static now(){return Ct.fromMillis(Date.now())}static fromDate(e){return Ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*Iv);return new Ct(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new be(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new be(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Cv)throw new be(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Iv}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yc(e,Ct._jsonSchema))return new Ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Cv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ct._jsonSchemaVersion="firestore/timestamp/1.0",Ct._jsonSchema={type:sn("string",Ct._jsonSchemaVersion),seconds:sn("number"),nanoseconds:sn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new Ct(0,0))}static max(){return new Ve(new Ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=-1;function u3(r,e){const n=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,o=Ve.fromTimestamp(a===1e9?new Ct(n+1,0):new Ct(n,a));return new si(o,Se.empty(),e)}function d3(r){return new si(r.readTime,r.key,Mc)}class si{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new si(Ve.min(),Se.empty(),Mc)}static max(){return new si(Ve.max(),Se.empty(),Mc)}}function h3(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Se.comparator(r.documentKey,e.documentKey),n!==0?n:Ze(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class m3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(r){if(r.code!==te.FAILED_PRECONDITION||r.message!==f3)throw r;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ae(((a,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(a,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(a,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ae?n:ae.resolve(n)}catch(n){return ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.reject(n)}static resolve(e){return new ae(((n,a)=>{n(e)}))}static reject(e){return new ae(((n,a)=>{a(e)}))}static waitFor(e){return new ae(((n,a)=>{let o=0,u=0,f=!1;e.forEach((g=>{++o,g.next((()=>{++u,f&&u===o&&n()}),(x=>a(x)))})),f=!0,u===o&&n()}))}static or(e){let n=ae.resolve(!1);for(const a of e)n=n.next((o=>o?ae.resolve(o):a()));return n}static forEach(e,n){const a=[];return e.forEach(((o,u)=>{a.push(n.call(this,o,u))})),this.waitFor(a)}static mapArray(e,n){return new ae(((a,o)=>{const u=e.length,f=new Array(u);let g=0;for(let x=0;x<u;x++){const p=x;n(e[p]).next((_=>{f[p]=_,++g,g===u&&a(f)}),(_=>o(_)))}}))}static doWhile(e,n){return new ae(((a,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):a()};u()}))}}function g3(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ho(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>n.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Th.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg=-1;function Sh(r){return r==null}function ah(r){return r===0&&1/r==-1/0}function p3(r){return typeof r=="number"&&Number.isInteger(r)&&!ah(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="";function x3(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=Rv(e)),e=y3(r.get(n),e);return Rv(e)}function y3(r,e){let n=e;const a=r.length;for(let o=0;o<a;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case t2:n+="";break;default:n+=u}}return n}function Rv(r){return r+t2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function ui(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function n2(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n){this.comparator=e,this.root=n||wn.EMPTY}insert(e,n){return new Lt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return n+a.left.size;o<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,a)=>(e(n,a),!1)))}toString(){const e=[];return this.inorderTraversal(((n,a)=>(e.push(`${n}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ad(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ad(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ad(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ad(this.root,e,this.comparator,!0)}}class Ad{constructor(e,n,a,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?a(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wn{constructor(e,n,a,o,u){this.key=e,this.value=n,this.color=a??wn.RED,this.left=o??wn.EMPTY,this.right=u??wn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,o,u){return new wn(e??this.key,n??this.value,a??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let o=this;const u=a(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,a),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return wn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return wn.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}wn.EMPTY=null,wn.RED=!0,wn.BLACK=!1;wn.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,n,a,o,u){return this}insert(e,n,a){return new wn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,a)=>(e(n),!1)))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dv(this.data.getIterator())}getIteratorFrom(e){return new Dv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((a=>{n=n.add(a)})),n}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ln(this.comparator);return n.data=e,n}}class Dv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this.fields=e,e.sort(Nn.comparator)}static empty(){return new rs([])}unionWith(e){let n=new ln(Nn.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new rs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,((n,a)=>n.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new s2("Invalid base64 string: "+u):u}})(e);return new En(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new En(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}En.EMPTY_BYTE_STRING=new En("");const b3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ri(r){if(ht(!!r,39018),typeof r=="string"){let e=0;const n=b3.exec(r);if(ht(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Gt(r.seconds),nanos:Gt(r.nanos)}}function Gt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ai(r){return typeof r=="string"?En.fromBase64String(r):En.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="server_timestamp",a2="__type__",i2="__previous_value__",l2="__local_write_time__";function bg(r){var n,a;return((a=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[a2])==null?void 0:a.stringValue)===r2}function Ah(r){const e=r.mapValue.fields[i2];return bg(e)?Ah(e):e}function Vc(r){const e=ri(r.mapValue.fields[l2].timestampValue);return new Ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(e,n,a,o,u,f,g,x,p,_){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=x,this.useFetchStreams=p,this.isUsingEmulator=_}}const ih="(default)";class Lc{constructor(e,n){this.projectId=e,this.database=n||ih}static empty(){return new Lc("","")}get isDefaultDatabase(){return this.database===ih}isEqual(e){return e instanceof Lc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2="__type__",w3="__max__",Cd={mapValue:{}},c2="__vector__",lh="value";function ii(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?bg(r)?4:N3(r)?9007199254740991:_3(r)?10:11:De(28295,{value:r})}function wr(r,e){if(r===e)return!0;const n=ii(r);if(n!==ii(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Vc(r).isEqual(Vc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=ri(o.timestampValue),g=ri(u.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return ai(o.bytesValue).isEqual(ai(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return Gt(o.geoPointValue.latitude)===Gt(u.geoPointValue.latitude)&&Gt(o.geoPointValue.longitude)===Gt(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Gt(o.integerValue)===Gt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=Gt(o.doubleValue),g=Gt(u.doubleValue);return f===g?ah(f)===ah(g):isNaN(f)&&isNaN(g)}return!1})(r,e);case 9:return Jl(r.arrayValue.values||[],e.arrayValue.values||[],wr);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},g=u.mapValue.fields||{};if(kv(f)!==kv(g))return!1;for(const x in f)if(f.hasOwnProperty(x)&&(g[x]===void 0||!wr(f[x],g[x])))return!1;return!0})(r,e);default:return De(52216,{left:r})}}function Pc(r,e){return(r.values||[]).find((n=>wr(n,e)))!==void 0}function eo(r,e){if(r===e)return 0;const n=ii(r),a=ii(e);if(n!==a)return Ze(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ze(r.booleanValue,e.booleanValue);case 2:return(function(u,f){const g=Gt(u.integerValue||u.doubleValue),x=Gt(f.integerValue||f.doubleValue);return g<x?-1:g>x?1:g===x?0:isNaN(g)?isNaN(x)?0:-1:1})(r,e);case 3:return Ov(r.timestampValue,e.timestampValue);case 4:return Ov(Vc(r),Vc(e));case 5:return M0(r.stringValue,e.stringValue);case 6:return(function(u,f){const g=ai(u),x=ai(f);return g.compareTo(x)})(r.bytesValue,e.bytesValue);case 7:return(function(u,f){const g=u.split("/"),x=f.split("/");for(let p=0;p<g.length&&p<x.length;p++){const _=Ze(g[p],x[p]);if(_!==0)return _}return Ze(g.length,x.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,f){const g=Ze(Gt(u.latitude),Gt(f.latitude));return g!==0?g:Ze(Gt(u.longitude),Gt(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Mv(r.arrayValue,e.arrayValue);case 10:return(function(u,f){var E,O,z,ne;const g=u.fields||{},x=f.fields||{},p=(E=g[lh])==null?void 0:E.arrayValue,_=(O=x[lh])==null?void 0:O.arrayValue,w=Ze(((z=p==null?void 0:p.values)==null?void 0:z.length)||0,((ne=_==null?void 0:_.values)==null?void 0:ne.length)||0);return w!==0?w:Mv(p,_)})(r.mapValue,e.mapValue);case 11:return(function(u,f){if(u===Cd.mapValue&&f===Cd.mapValue)return 0;if(u===Cd.mapValue)return 1;if(f===Cd.mapValue)return-1;const g=u.fields||{},x=Object.keys(g),p=f.fields||{},_=Object.keys(p);x.sort(),_.sort();for(let w=0;w<x.length&&w<_.length;++w){const E=M0(x[w],_[w]);if(E!==0)return E;const O=eo(g[x[w]],p[_[w]]);if(O!==0)return O}return Ze(x.length,_.length)})(r.mapValue,e.mapValue);default:throw De(23264,{he:n})}}function Ov(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ze(r,e);const n=ri(r),a=ri(e),o=Ze(n.seconds,a.seconds);return o!==0?o:Ze(n.nanos,a.nanos)}function Mv(r,e){const n=r.values||[],a=e.values||[];for(let o=0;o<n.length&&o<a.length;++o){const u=eo(n[o],a[o]);if(u)return u}return Ze(n.length,a.length)}function to(r){return V0(r)}function V0(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const a=ri(n);return`time(${a.seconds},${a.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return ai(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return Se.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let a="[",o=!0;for(const u of n.values||[])o?o=!1:a+=",",a+=V0(u);return a+"]"})(r.arrayValue):"mapValue"in r?(function(n){const a=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of a)u?u=!1:o+=",",o+=`${f}:${V0(n.fields[f])}`;return o+"}"})(r.mapValue):De(61005,{value:r})}function Ld(r){switch(ii(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ah(r);return e?16+Ld(e):16;case 5:return 2*r.stringValue.length;case 6:return ai(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,u)=>o+Ld(u)),0)})(r.arrayValue);case 10:case 11:return(function(a){let o=0;return ui(a.fields,((u,f)=>{o+=u.length+Ld(f)})),o})(r.mapValue);default:throw De(13486,{value:r})}}function Vv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function L0(r){return!!r&&"integerValue"in r}function vg(r){return!!r&&"arrayValue"in r}function Lv(r){return!!r&&"nullValue"in r}function Pv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Pd(r){return!!r&&"mapValue"in r}function _3(r){var n,a;return((a=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[o2])==null?void 0:a.stringValue)===c2}function Sc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return ui(r.mapValue.fields,((n,a)=>e.mapValue.fields[n]=Sc(a))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Sc(r.arrayValue.values[n]);return e}return{...r}}function N3(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===w3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.value=e}static empty(){return new $n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!Pd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sc(n)}setAll(e){let n=Nn.emptyPath(),a={},o=[];e.forEach(((f,g)=>{if(!n.isImmediateParentOf(g)){const x=this.getFieldsMap(n);this.applyChanges(x,a,o),a={},o=[],n=g.popLast()}f?a[g.lastSegment()]=Sc(f):o.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,a,o)}delete(e){const n=this.field(e.popLast());Pd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=n.mapValue.fields[e.get(a)];Pd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,a){ui(n,((o,u)=>e[o]=u));for(const o of a)delete e[o]}clone(){return new $n(Sc(this.value))}}function u2(r){const e=[];return ui(r.fields,((n,a)=>{const o=new Nn([n]);if(Pd(a)){const u=u2(a.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new rs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,n,a,o,u,f,g){this.key=e,this.documentType=n,this.version=a,this.readTime=o,this.createTime=u,this.data=f,this.documentState=g}static newInvalidDocument(e){return new An(e,0,Ve.min(),Ve.min(),Ve.min(),$n.empty(),0)}static newFoundDocument(e,n,a,o){return new An(e,1,n,Ve.min(),a,o,0)}static newNoDocument(e,n){return new An(e,2,n,Ve.min(),Ve.min(),$n.empty(),0)}static newUnknownDocument(e,n){return new An(e,3,n,Ve.min(),Ve.min(),$n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,n){this.position=e,this.inclusive=n}}function zv(r,e,n){let a=0;for(let o=0;o<r.position.length;o++){const u=e[o],f=r.position[o];if(u.field.isKeyField()?a=Se.comparator(Se.fromName(f.referenceValue),n.key):a=eo(f,n.data.field(u.field)),u.dir==="desc"&&(a*=-1),a!==0)break}return a}function Uv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!wr(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n="asc"){this.field=e,this.dir=n}}function E3(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{}class nn extends d2{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,a):new T3(e,n,a):n==="array-contains"?new C3(e,a):n==="in"?new I3(e,a):n==="not-in"?new R3(e,a):n==="array-contains-any"?new k3(e,a):new nn(e,n,a)}static createKeyFieldInFilter(e,n,a){return n==="in"?new S3(e,a):new A3(e,a)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(eo(n,this.value)):n!==null&&ii(this.value)===ii(n)&&this.matchesComparison(eo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hs extends d2{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Hs(e,n)}matches(e){return h2(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function h2(r){return r.op==="and"}function f2(r){return j3(r)&&h2(r)}function j3(r){for(const e of r.filters)if(e instanceof Hs)return!1;return!0}function P0(r){if(r instanceof nn)return r.field.canonicalString()+r.op.toString()+to(r.value);if(f2(r))return r.filters.map((e=>P0(e))).join(",");{const e=r.filters.map((n=>P0(n))).join(",");return`${r.op}(${e})`}}function m2(r,e){return r instanceof nn?(function(a,o){return o instanceof nn&&a.op===o.op&&a.field.isEqual(o.field)&&wr(a.value,o.value)})(r,e):r instanceof Hs?(function(a,o){return o instanceof Hs&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((u,f,g)=>u&&m2(f,o.filters[g])),!0):!1})(r,e):void De(19439)}function g2(r){return r instanceof nn?(function(n){return`${n.field.canonicalString()} ${n.op} ${to(n.value)}`})(r):r instanceof Hs?(function(n){return n.op.toString()+" {"+n.getFilters().map(g2).join(" ,")+"}"})(r):"Filter"}class T3 extends nn{constructor(e,n,a){super(e,n,a),this.key=Se.fromName(a.referenceValue)}matches(e){const n=Se.comparator(e.key,this.key);return this.matchesComparison(n)}}class S3 extends nn{constructor(e,n){super(e,"in",n),this.keys=p2("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class A3 extends nn{constructor(e,n){super(e,"not-in",n),this.keys=p2("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function p2(r,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((a=>Se.fromName(a.referenceValue)))}class C3 extends nn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vg(n)&&Pc(n.arrayValue,this.value)}}class I3 extends nn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Pc(this.value.arrayValue,n)}}class R3 extends nn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Pc(this.value.arrayValue,n)}}class k3 extends nn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((a=>Pc(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e,n=null,a=[],o=[],u=null,f=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=o,this.limit=u,this.startAt=f,this.endAt=g,this.Te=null}}function qv(r,e=null,n=[],a=[],o=null,u=null,f=null){return new D3(r,e,n,a,o,u,f)}function wg(r){const e=ze(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((a=>P0(a))).join(","),n+="|ob:",n+=e.orderBy.map((a=>(function(u){return u.field.canonicalString()+u.dir})(a))).join(","),Sh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((a=>to(a))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((a=>to(a))).join(",")),e.Te=n}return e.Te}function _g(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!E3(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!m2(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Uv(r.startAt,e.startAt)&&Uv(r.endAt,e.endAt)}function z0(r){return Se.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n=null,a=[],o=[],u=null,f="F",g=null,x=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=o,this.limit=u,this.limitType=f,this.startAt=g,this.endAt=x,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function O3(r,e,n,a,o,u,f,g){return new fo(r,e,n,a,o,u,f,g)}function Ch(r){return new fo(r)}function Bv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function x2(r){return r.collectionGroup!==null}function Ac(r){const e=ze(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new ln(Nn.comparator);return f.filters.forEach((x=>{x.getFlattenedFilters().forEach((p=>{p.isInequality()&&(g=g.add(p.field))}))})),g})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new zc(u,a))})),n.has(Nn.keyField().canonicalString())||e.Ie.push(new zc(Nn.keyField(),a))}return e.Ie}function gr(r){const e=ze(r);return e.Ee||(e.Ee=M3(e,Ac(r))),e.Ee}function M3(r,e){if(r.limitType==="F")return qv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new zc(o.field,u)}));const n=r.endAt?new oh(r.endAt.position,r.endAt.inclusive):null,a=r.startAt?new oh(r.startAt.position,r.startAt.inclusive):null;return qv(r.path,r.collectionGroup,e,r.filters,r.limit,n,a)}}function U0(r,e){const n=r.filters.concat([e]);return new fo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function ch(r,e,n){return new fo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Ih(r,e){return _g(gr(r),gr(e))&&r.limitType===e.limitType}function y2(r){return`${wg(gr(r))}|lt:${r.limitType}`}function ql(r){return`Query(target=${(function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map((o=>g2(o))).join(", ")}]`),Sh(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map((o=>to(o))).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map((o=>to(o))).join(",")),`Target(${a})`})(gr(r))}; limitType=${r.limitType})`}function Rh(r,e){return e.isFoundDocument()&&(function(a,o){const u=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(u):Se.isDocumentKey(a.path)?a.path.isEqual(u):a.path.isImmediateParentOf(u)})(r,e)&&(function(a,o){for(const u of Ac(a))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(a,o){for(const u of a.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(a,o){return!(a.startAt&&!(function(f,g,x){const p=zv(f,g,x);return f.inclusive?p<=0:p<0})(a.startAt,Ac(a),o)||a.endAt&&!(function(f,g,x){const p=zv(f,g,x);return f.inclusive?p>=0:p>0})(a.endAt,Ac(a),o))})(r,e)}function V3(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function b2(r){return(e,n)=>{let a=!1;for(const o of Ac(r)){const u=L3(o,e,n);if(u!==0)return u;a=a||o.field.isKeyField()}return 0}}function L3(r,e,n){const a=r.field.isKeyField()?Se.comparator(e.key,n.key):(function(u,f,g){const x=f.data.field(u),p=g.data.field(u);return x!==null&&p!==null?eo(x,p):De(42886)})(r.field,e,n);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return De(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a!==void 0){for(const[o,u]of a)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[n]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ui(this.inner,((n,a)=>{for(const[o,u]of a)e(o,u)}))}isEmpty(){return n2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3=new Lt(Se.comparator);function Jr(){return P3}const v2=new Lt(Se.comparator);function vc(...r){let e=v2;for(const n of r)e=e.insert(n.key,n);return e}function w2(r){let e=v2;return r.forEach(((n,a)=>e=e.insert(n,a.overlayedDocument))),e}function zi(){return Cc()}function _2(){return Cc()}function Cc(){return new Zi((r=>r.toString()),((r,e)=>r.isEqual(e)))}const z3=new Lt(Se.comparator),U3=new ln(Se.comparator);function Je(...r){let e=U3;for(const n of r)e=e.add(n);return e}const q3=new ln(Ze);function B3(){return q3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ah(e)?"-0":e}}function N2(r){return{integerValue:""+r}}function E2(r,e){return p3(e)?N2(e):Ng(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this._=void 0}}function H3(r,e,n){return r instanceof Uc?(function(o,u){const f={fields:{[a2]:{stringValue:r2},[l2]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&bg(u)&&(u=Ah(u)),u&&(f.fields[i2]=u),{mapValue:f}})(n,e):r instanceof qc?T2(r,e):r instanceof Bc?S2(r,e):(function(o,u){const f=j2(o,u),g=Hv(f)+Hv(o.Ae);return L0(f)&&L0(o.Ae)?N2(g):Ng(o.serializer,g)})(r,e)}function F3(r,e,n){return r instanceof qc?T2(r,e):r instanceof Bc?S2(r,e):n}function j2(r,e){return r instanceof Hc?(function(a){return L0(a)||(function(u){return!!u&&"doubleValue"in u})(a)})(e)?e:{integerValue:0}:null}class Uc extends kh{}class qc extends kh{constructor(e){super(),this.elements=e}}function T2(r,e){const n=A2(e);for(const a of r.elements)n.some((o=>wr(o,a)))||n.push(a);return{arrayValue:{values:n}}}class Bc extends kh{constructor(e){super(),this.elements=e}}function S2(r,e){let n=A2(e);for(const a of r.elements)n=n.filter((o=>!wr(o,a)));return{arrayValue:{values:n}}}class Hc extends kh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Hv(r){return Gt(r.integerValue||r.doubleValue)}function A2(r){return vg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n){this.field=e,this.transform=n}}function G3(r,e){return r.field.isEqual(e.field)&&(function(a,o){return a instanceof qc&&o instanceof qc||a instanceof Bc&&o instanceof Bc?Jl(a.elements,o.elements,wr):a instanceof Hc&&o instanceof Hc?wr(a.Ae,o.Ae):a instanceof Uc&&o instanceof Uc})(r.transform,e.transform)}class $3{constructor(e,n){this.version=e,this.transformResults=n}}class As{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new As}static exists(e){return new As(void 0,e)}static updateTime(e){return new As(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zd(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Dh{}function I2(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Eg(r.key,As.none()):new Wc(r.key,r.data,As.none());{const n=r.data,a=$n.empty();let o=new ln(Nn.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?a.delete(u):a.set(u,f),o=o.add(u)}return new di(r.key,a,new rs(o.toArray()),As.none())}}function Q3(r,e,n){r instanceof Wc?(function(o,u,f){const g=o.value.clone(),x=Gv(o.fieldTransforms,u,f.transformResults);g.setAll(x),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(r,e,n):r instanceof di?(function(o,u,f){if(!zd(o.precondition,u))return void u.convertToUnknownDocument(f.version);const g=Gv(o.fieldTransforms,u,f.transformResults),x=u.data;x.setAll(R2(o)),x.setAll(g),u.convertToFoundDocument(f.version,x).setHasCommittedMutations()})(r,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Ic(r,e,n,a){return r instanceof Wc?(function(u,f,g,x){if(!zd(u.precondition,f))return g;const p=u.value.clone(),_=$v(u.fieldTransforms,x,f);return p.setAll(_),f.convertToFoundDocument(f.version,p).setHasLocalMutations(),null})(r,e,n,a):r instanceof di?(function(u,f,g,x){if(!zd(u.precondition,f))return g;const p=$v(u.fieldTransforms,x,f),_=f.data;return _.setAll(R2(u)),_.setAll(p),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((w=>w.field)))})(r,e,n,a):(function(u,f,g){return zd(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g})(r,e,n)}function K3(r,e){let n=null;for(const a of r.fieldTransforms){const o=e.data.field(a.field),u=j2(a.transform,o||null);u!=null&&(n===null&&(n=$n.empty()),n.set(a.field,u))}return n||null}function Fv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&Jl(a,o,((u,f)=>G3(u,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Wc extends Dh{constructor(e,n,a,o=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class di extends Dh{constructor(e,n,a,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function R2(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const a=r.data.field(n);e.set(n,a)}})),e}function Gv(r,e,n){const a=new Map;ht(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,g=e.data.field(u.field);a.set(u.field,F3(f,g,n[o]))}return a}function $v(r,e,n){const a=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);a.set(o.field,H3(u,f,e))}return a}class Eg extends Dh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class X3 extends Dh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e,n,a,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Q3(u,e,a[o])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=Ic(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=Ic(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=_2();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let g=this.applyToLocalView(f,u.mutatedFields);g=n.has(o.key)?null:g;const x=I2(f,g);x!==null&&a.set(o.key,x),f.isValidDocument()||f.convertToNoDocument(Ve.min())})),a}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Je())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,((n,a)=>Fv(n,a)))&&Jl(this.baseMutations,e.baseMutations,((n,a)=>Fv(n,a)))}}class jg{constructor(e,n,a,o){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=o}static from(e,n,a){ht(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return z3})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,a[f].version);return new jg(e,n,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tn,st;function J3(r){switch(r){case te.OK:return De(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return De(15467,{code:r})}}function k2(r){if(r===void 0)return Zr("GRPC error has no .code"),te.UNKNOWN;switch(r){case tn.OK:return te.OK;case tn.CANCELLED:return te.CANCELLED;case tn.UNKNOWN:return te.UNKNOWN;case tn.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case tn.INTERNAL:return te.INTERNAL;case tn.UNAVAILABLE:return te.UNAVAILABLE;case tn.UNAUTHENTICATED:return te.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case tn.NOT_FOUND:return te.NOT_FOUND;case tn.ALREADY_EXISTS:return te.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return te.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case tn.ABORTED:return te.ABORTED;case tn.OUT_OF_RANGE:return te.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return te.UNIMPLEMENTED;case tn.DATA_LOSS:return te.DATA_LOSS;default:return De(39323,{code:r})}}(st=tn||(tn={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6=new Za([4294967295,4294967295],0);function Qv(r){const e=e6().encode(r),n=new Gw;return n.update(e),new Uint8Array(n.digest())}function Kv(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Za([n,a],0),new Za([o,u],0)]}class Tg{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new wc(`Invalid padding: ${n}`);if(a<0)throw new wc(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new wc(`Invalid hash count: ${a}`);if(e.length===0&&n!==0)throw new wc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Za.fromNumber(this.ge)}ye(e,n,a){let o=e.add(n.multiply(Za.fromNumber(a)));return o.compare(t6)===1&&(o=new Za([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Qv(e),[a,o]=Kv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(a,o,u);if(!this.we(f))return!1}return!0}static create(e,n,a){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Tg(u,o,n);return a.forEach((g=>f.insert(g))),f}insert(e){if(this.ge===0)return;const n=Qv(e),[a,o]=Kv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(a,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),a=e%8;this.bitmap[n]|=1<<a}}class wc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n,a,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const o=new Map;return o.set(e,Zc.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new Oh(Ve.min(),o,new Lt(Ze),Jr(),Je())}}class Zc{constructor(e,n,a,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new Zc(a,n,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n,a,o){this.be=e,this.removedTargetIds=n,this.key=a,this.De=o}}class D2{constructor(e,n){this.targetId=e,this.Ce=n}}class O2{constructor(e,n,a=En.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=o}}class Xv{constructor(){this.ve=0,this.Fe=Yv(),this.Me=En.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),n=Je(),a=Je();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:a=a.add(o);break;default:De(38017,{changeType:u})}})),new Zc(this.Me,this.xe,e,n,a)}qe(){this.Oe=!1,this.Fe=Yv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ht(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class n6{constructor(e){this.Ge=e,this.ze=new Map,this.je=Jr(),this.Je=Id(),this.He=Id(),this.Ye=new Lt(Ze)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const a=this.nt(n);switch(e.state){case 0:this.rt(n)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),a.Le(e.resumeToken));break;default:De(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((a,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,a=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(z0(u))if(a===0){const f=new Se(u.path);this.et(n,f,An.newNoDocument(f,Ve.min()))}else ht(a===1,20013,{expectedCount:a});else{const f=this._t(n);if(f!==a){const g=this.ut(e),x=g?this.ct(g,e,f):1;if(x!==0){this.it(n);const p=x===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:u=0}=n;let f,g;try{f=ai(a).toUint8Array()}catch(x){if(x instanceof s2)return Zl("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{g=new Tg(f,o,u)}catch(x){return Zl(x instanceof wc?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return g.ge===0?null:g}ct(e,n,a){return n.Ce.count===a-this.Pt(e,n.targetId)?0:2}Pt(e,n){const a=this.Ge.getRemoteKeysForTarget(n);let o=0;return a.forEach((u=>{const f=this.Ge.ht(),g=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const g=this.ot(f);if(g){if(u.current&&z0(g.target)){const x=new Se(g.target.path);this.It(x).has(f)||this.Et(f,x)||this.et(f,x,An.newNoDocument(x,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let a=Je();this.He.forEach(((u,f)=>{let g=!0;f.forEachWhile((x=>{const p=this.ot(x);return!p||p.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(a=a.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new Oh(e,n,this.Ye,this.je,a);return this.je=Jr(),this.Je=Id(),this.He=Id(),this.Ye=new Lt(Ze),o}Xe(e,n){if(!this.rt(e))return;const a=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,a),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),a&&(this.je=this.je.insert(n,a))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Xv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ln(Ze),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ln(Ze),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Xv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Id(){return new Lt(Se.comparator)}function Yv(){return new Lt(Se.comparator)}const s6={asc:"ASCENDING",desc:"DESCENDING"},r6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},a6={and:"AND",or:"OR"};class i6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function q0(r,e){return r.useProto3Json||Sh(e)?e:{value:e}}function uh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function M2(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function l6(r,e){return uh(r,e.toTimestamp())}function pr(r){return ht(!!r,49232),Ve.fromTimestamp((function(n){const a=ri(n);return new Ct(a.seconds,a.nanos)})(r))}function Sg(r,e){return B0(r,e).canonicalString()}function B0(r,e){const n=(function(o){return new Nt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function V2(r){const e=Nt.fromString(r);return ht(q2(e),10190,{key:e.toString()}),e}function H0(r,e){return Sg(r.databaseId,e.path)}function r0(r,e){const n=V2(e);if(n.get(1)!==r.databaseId.projectId)throw new be(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new be(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Se(P2(n))}function L2(r,e){return Sg(r.databaseId,e)}function o6(r){const e=V2(r);return e.length===4?Nt.emptyPath():P2(e)}function F0(r){return new Nt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function P2(r){return ht(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Wv(r,e,n){return{name:H0(r,e),fields:n.value.mapValue.fields}}function c6(r,e){let n;if("targetChange"in e){e.targetChange;const a=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:De(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,_){return p.useProto3Json?(ht(_===void 0||typeof _=="string",58123),En.fromBase64String(_||"")):(ht(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),En.fromUint8Array(_||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,g=f&&(function(p){const _=p.code===void 0?te.UNKNOWN:k2(p.code);return new be(_,p.message||"")})(f);n=new O2(a,o,u,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=r0(r,a.document.name),u=pr(a.document.updateTime),f=a.document.createTime?pr(a.document.createTime):Ve.min(),g=new $n({mapValue:{fields:a.document.fields}}),x=An.newFoundDocument(o,u,f,g),p=a.targetIds||[],_=a.removedTargetIds||[];n=new Ud(p,_,x.key,x)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=r0(r,a.document),u=a.readTime?pr(a.readTime):Ve.min(),f=An.newNoDocument(o,u),g=a.removedTargetIds||[];n=new Ud([],g,f.key,f)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=r0(r,a.document),u=a.removedTargetIds||[];n=new Ud([],u,o,null)}else{if(!("filter"in e))return De(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:u}=a,f=new Z3(o,u),g=a.targetId;n=new D2(g,f)}}return n}function u6(r,e){let n;if(e instanceof Wc)n={update:Wv(r,e.key,e.value)};else if(e instanceof Eg)n={delete:H0(r,e.key)};else if(e instanceof di)n={update:Wv(r,e.key,e.data),updateMask:b6(e.fieldMask)};else{if(!(e instanceof X3))return De(16599,{Vt:e.type});n={verify:H0(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((a=>(function(u,f){const g=f.transform;if(g instanceof Uc)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof qc)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Bc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Hc)return{fieldPath:f.field.canonicalString(),increment:g.Ae};throw De(20930,{transform:f.transform})})(0,a)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:l6(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:De(27497)})(r,e.precondition)),n}function d6(r,e){return r&&r.length>0?(ht(e!==void 0,14353),r.map((n=>(function(o,u){let f=o.updateTime?pr(o.updateTime):pr(u);return f.isEqual(Ve.min())&&(f=pr(u)),new $3(f,o.transformResults||[])})(n,e)))):[]}function h6(r,e){return{documents:[L2(r,e.path)]}}function f6(r,e){const n={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),n.structuredQuery.from=[{collectionId:a.lastSegment()}]),n.parent=L2(r,o);const u=(function(p){if(p.length!==0)return U2(Hs.create(p,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(p){if(p.length!==0)return p.map((_=>(function(E){return{field:Bl(E.field),direction:p6(E.dir)}})(_)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const g=q0(r,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:o}}function m6(r){let e=o6(r.parent);const n=r.structuredQuery,a=n.from?n.from.length:0;let o=null;if(a>0){ht(a===1,65062);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];n.where&&(u=(function(w){const E=z2(w);return E instanceof Hs&&f2(E)?E.getFilters():[E]})(n.where));let f=[];n.orderBy&&(f=(function(w){return w.map((E=>(function(z){return new zc(Hl(z.field),(function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(E)))})(n.orderBy));let g=null;n.limit&&(g=(function(w){let E;return E=typeof w=="object"?w.value:w,Sh(E)?null:E})(n.limit));let x=null;n.startAt&&(x=(function(w){const E=!!w.before,O=w.values||[];return new oh(O,E)})(n.startAt));let p=null;return n.endAt&&(p=(function(w){const E=!w.before,O=w.values||[];return new oh(O,E)})(n.endAt)),O3(e,o,f,u,g,"F",x,p)}function g6(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function z2(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=Hl(n.unaryFilter.field);return nn.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=Hl(n.unaryFilter.field);return nn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Hl(n.unaryFilter.field);return nn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Hl(n.unaryFilter.field);return nn.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}})(r):r.fieldFilter!==void 0?(function(n){return nn.create(Hl(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Hs.create(n.compositeFilter.filters.map((a=>z2(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return De(1026)}})(n.compositeFilter.op))})(r):De(30097,{filter:r})}function p6(r){return s6[r]}function x6(r){return r6[r]}function y6(r){return a6[r]}function Bl(r){return{fieldPath:r.canonicalString()}}function Hl(r){return Nn.fromServerFormat(r.fieldPath)}function U2(r){return r instanceof nn?(function(n){if(n.op==="=="){if(Pv(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NAN"}};if(Lv(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Pv(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NOT_NAN"}};if(Lv(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bl(n.field),op:x6(n.op),value:n.value}}})(r):r instanceof Hs?(function(n){const a=n.getFilters().map((o=>U2(o)));return a.length===1?a[0]:{compositeFilter:{op:y6(n.op),filters:a}}})(r):De(54877,{filter:r})}function b6(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function q2(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,n,a,o,u=Ve.min(),f=Ve.min(),g=En.EMPTY_BYTE_STRING,x=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=x}withSequenceNumber(e){return new $a(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e){this.yt=e}}function w6(r){const e=m6({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?ch(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(){this.Cn=new N6}addToCollectionParentIndex(e,n){return this.Cn.add(n),ae.resolve()}getCollectionParents(e,n){return ae.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ae.resolve()}deleteFieldIndex(e,n){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,n){return ae.resolve()}getDocumentsMatchingTarget(e,n){return ae.resolve(null)}getIndexType(e,n){return ae.resolve(0)}getFieldIndexes(e,n){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,n){return ae.resolve(si.min())}getMinOffsetFromCollectionGroup(e,n){return ae.resolve(si.min())}updateCollectionGroup(e,n,a){return ae.resolve()}updateIndexEntries(e,n){return ae.resolve()}}class N6{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n]||new ln(Nt.comparator),u=!o.has(a);return this.index[n]=o.add(a),u}has(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n];return o&&o.has(a)}getEntries(e){return(this.index[e]||new ln(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},B2=41943040;class Gn{static withCacheSize(e){return new Gn(e,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gn.DEFAULT_COLLECTION_PERCENTILE=10,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gn.DEFAULT=new Gn(B2,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gn.DISABLED=new Gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new no(0)}static cr(){return new no(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="LruGarbageCollector",E6=1048576;function e1([r,e],[n,a]){const o=Ze(r,n);return o===0?Ze(e,a):o}class j6{constructor(e){this.Ir=e,this.buffer=new ln(e1),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();e1(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class T6{constructor(e,n,a){this.garbageCollector=e,this.asyncQueue=n,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(Jv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ho(n)?ve(Jv,"Ignoring IndexedDB error during garbage collection: ",n):await uo(n)}await this.Vr(3e5)}))}}class S6{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((a=>Math.floor(n/100*a)))}nthSequenceNumber(e,n){if(n===0)return ae.resolve(Th.ce);const a=new j6(n);return this.mr.forEachTarget(e,(o=>a.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>a.Ar(o))))).next((()=>a.maxValue))}removeTargets(e,n,a){return this.mr.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(Zv)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zv):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let a,o,u,f,g,x,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,f=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(a=w,g=Date.now(),this.removeTargets(e,a,n)))).next((w=>(u=w,x=Date.now(),this.removeOrphanedDocuments(e,a)))).next((w=>(p=Date.now(),Ul()<=We.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${o} in `+(g-f)+`ms
	Removed ${u} targets in `+(x-g)+`ms
	Removed ${w} documents in `+(p-x)+`ms
Total Duration: ${p-_}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w}))))}}function A6(r,e){return new S6(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(){this.changes=new Zi((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?ae.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e,n,a,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(a!==null&&Ic(a.mutation,o,rs.empty(),Ct.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.getLocalViewOfDocuments(e,a,Je()).next((()=>a))))}getLocalViewOfDocuments(e,n,a=Je()){const o=zi();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,a).next((u=>{let f=vc();return u.forEach(((g,x)=>{f=f.insert(g,x.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const a=zi();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,Je())))}populateOverlays(e,n,a){const o=[];return a.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,g)=>{n.set(f,g)}))}))}computeViews(e,n,a,o){let u=Jr();const f=Cc(),g=(function(){return Cc()})();return n.forEach(((x,p)=>{const _=a.get(p.key);o.has(p.key)&&(_===void 0||_.mutation instanceof di)?u=u.insert(p.key,p):_!==void 0?(f.set(p.key,_.mutation.getFieldMask()),Ic(_.mutation,p,_.mutation.getFieldMask(),Ct.now())):f.set(p.key,rs.empty())})),this.recalculateAndSaveOverlays(e,u).next((x=>(x.forEach(((p,_)=>f.set(p,_))),n.forEach(((p,_)=>g.set(p,new I6(_,f.get(p)??null)))),g)))}recalculateAndSaveOverlays(e,n){const a=Cc();let o=new Lt(((f,g)=>f-g)),u=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const g of f)g.keys().forEach((x=>{const p=n.get(x);if(p===null)return;let _=a.get(x)||rs.empty();_=g.applyToLocalView(p,_),a.set(x,_);const w=(o.get(g.batchId)||Je()).add(x);o=o.insert(g.batchId,w)}))})).next((()=>{const f=[],g=o.getReverseIterator();for(;g.hasNext();){const x=g.getNext(),p=x.key,_=x.value,w=_2();_.forEach((E=>{if(!u.has(E)){const O=I2(n.get(E),a.get(E));O!==null&&w.set(E,O),u=u.add(E)}})),f.push(this.documentOverlayCache.saveOverlays(e,p,w))}return ae.waitFor(f)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,n,a,o){return(function(f){return Se.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):x2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a,o):this.getDocumentsMatchingCollectionQuery(e,n,a,o)}getNextDocuments(e,n,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,o-u.size):ae.resolve(zi());let g=Mc,x=u;return f.next((p=>ae.forEach(p,((_,w)=>(g<w.largestBatchId&&(g=w.largestBatchId),u.get(_)?ae.resolve():this.remoteDocumentCache.getEntry(e,_).next((E=>{x=x.insert(_,E)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,x,p,Je()))).next((_=>({batchId:g,changes:w2(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Se(n)).next((a=>{let o=vc();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,a,o){const u=n.collectionGroup;let f=vc();return this.indexManager.getCollectionParents(e,u).next((g=>ae.forEach(g,(x=>{const p=(function(w,E){return new fo(E,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,x.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,a,o).next((_=>{_.forEach(((w,E)=>{f=f.insert(w,E)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,a,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,u,o)))).next((f=>{u.forEach(((x,p)=>{const _=p.getKey();f.get(_)===null&&(f=f.insert(_,An.newInvalidDocument(_)))}));let g=vc();return f.forEach(((x,p)=>{const _=u.get(x);_!==void 0&&Ic(_.mutation,p,rs.empty(),Ct.now()),Rh(n,p)&&(g=g.insert(x,p))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ae.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:pr(o.createTime)}})(n)),ae.resolve()}getNamedQuery(e,n){return ae.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:w6(o.bundledQuery),readTime:pr(o.readTime)}})(n)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(){this.overlays=new Lt(Se.comparator),this.qr=new Map}getOverlay(e,n){return ae.resolve(this.overlays.get(n))}getOverlays(e,n){const a=zi();return ae.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&a.set(o,u)})))).next((()=>a))}saveOverlays(e,n,a){return a.forEach(((o,u)=>{this.St(e,n,u)})),ae.resolve()}removeOverlaysForBatchId(e,n,a){const o=this.qr.get(a);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(a)),ae.resolve()}getOverlaysForCollection(e,n,a){const o=zi(),u=n.length+1,f=new Se(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const x=g.getNext().value,p=x.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===u&&x.largestBatchId>a&&o.set(x.getKey(),x)}return ae.resolve(o)}getOverlaysForCollectionGroup(e,n,a,o){let u=new Lt(((p,_)=>p-_));const f=this.overlays.getIterator();for(;f.hasNext();){const p=f.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>a){let _=u.get(p.largestBatchId);_===null&&(_=zi(),u=u.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const g=zi(),x=u.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach(((p,_)=>g.set(p,_))),!(g.size()>=o)););return ae.resolve(g)}St(e,n,a){const o=this.overlays.get(a.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(a.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(a.key,new W3(n,a));let u=this.qr.get(n);u===void 0&&(u=Je(),this.qr.set(n,u)),this.qr.set(n,u.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(){this.sessionToken=En.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(){this.Qr=new ln(fn.$r),this.Ur=new ln(fn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const a=new fn(e,n);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,n){e.forEach((a=>this.addReference(a,n)))}removeReference(e,n){this.Gr(new fn(e,n))}zr(e,n){e.forEach((a=>this.removeReference(a,n)))}jr(e){const n=new Se(new Nt([])),a=new fn(n,e),o=new fn(n,e+1),u=[];return this.Ur.forEachInRange([a,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Se(new Nt([])),a=new fn(n,e),o=new fn(n,e+1);let u=Je();return this.Ur.forEachInRange([a,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new fn(e,0),a=this.Qr.firstAfterOrEqual(n);return a!==null&&e.isEqual(a.key)}}class fn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Se.comparator(e.key,n.key)||Ze(e.Yr,n.Yr)}static Kr(e,n){return Ze(e.Yr,n.Yr)||Se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ln(fn.$r)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,a,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new Y3(u,n,a,o);this.mutationQueue.push(f);for(const g of o)this.Zr=this.Zr.add(new fn(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ae.resolve(f)}lookupMutationBatch(e,n){return ae.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const a=n+1,o=this.ei(a),u=o<0?0:o;return ae.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?yg:this.tr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new fn(n,0),o=new fn(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([a,o],(f=>{const g=this.Xr(f.Yr);u.push(g)})),ae.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new ln(Ze);return n.forEach((o=>{const u=new fn(o,0),f=new fn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(g=>{a=a.add(g.Yr)}))})),ae.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,o=a.length+1;let u=a;Se.isDocumentKey(u)||(u=u.child(""));const f=new fn(new Se(u),0);let g=new ln(Ze);return this.Zr.forEachWhile((x=>{const p=x.key.path;return!!a.isPrefixOf(p)&&(p.length===o&&(g=g.add(x.Yr)),!0)}),f),ae.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((a=>{const o=this.Xr(a);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){ht(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return ae.forEach(n.mutations,(o=>{const u=new fn(o.key,n.batchId);return a=a.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,n){const a=new fn(n,0),o=this.Zr.firstAfterOrEqual(a);return ae.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(e){this.ri=e,this.docs=(function(){return new Lt(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,o=this.docs.get(a),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return ae.resolve(a?a.document.mutableCopy():An.newInvalidDocument(n))}getEntries(e,n){let a=Jr();return n.forEach((o=>{const u=this.docs.get(o);a=a.insert(o,u?u.document.mutableCopy():An.newInvalidDocument(o))})),ae.resolve(a)}getDocumentsMatchingQuery(e,n,a,o){let u=Jr();const f=n.path,g=new Se(f.child("__id-9223372036854775808__")),x=this.docs.getIteratorFrom(g);for(;x.hasNext();){const{key:p,value:{document:_}}=x.getNext();if(!f.isPrefixOf(p.path))break;p.path.length>f.length+1||h3(d3(_),a)<=0||(o.has(_.key)||Rh(n,_))&&(u=u.insert(_.key,_.mutableCopy()))}return ae.resolve(u)}getAllFromCollectionGroup(e,n,a,o){De(9500)}ii(e,n){return ae.forEach(this.docs,(a=>n(a)))}newChangeBuffer(e){return new L6(this)}getSize(e){return ae.resolve(this.size)}}class L6 extends C6{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(a)})),ae.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e){this.persistence=e,this.si=new Zi((n=>wg(n)),_g),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.oi=0,this._i=new Ag,this.targetCount=0,this.ai=no.ur()}forEachTarget(e,n){return this.si.forEach(((a,o)=>n(o))),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.oi&&(this.oi=n),ae.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new no(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ae.resolve()}updateTargetData(e,n){return this.Pr(n),ae.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,n,a){let o=0;const u=[];return this.si.forEach(((f,g)=>{g.sequenceNumber<=n&&a.get(g.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),ae.waitFor(u).next((()=>o))}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,n){const a=this.si.get(n)||null;return ae.resolve(a)}addMatchingKeys(e,n,a){return this._i.Wr(n,a),ae.resolve()}removeMatchingKeys(e,n,a){this._i.zr(n,a);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),ae.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ae.resolve()}getMatchingKeysForTargetId(e,n){const a=this._i.Hr(n);return ae.resolve(a)}containsKey(e,n){return ae.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e,n){this.ui={},this.overlays={},this.ci=new Th(0),this.li=!1,this.li=!0,this.hi=new O6,this.referenceDelegate=e(this),this.Pi=new P6(this),this.indexManager=new _6,this.remoteDocumentCache=(function(o){return new V6(o)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new v6(n),this.Ii=new k6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new D6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this.ui[e.toKey()];return a||(a=new M6(n,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,a){ve("MemoryPersistence","Starting transaction:",e);const o=new z6(this.ci.next());return this.referenceDelegate.Ei(),a(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return ae.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,n))))}}class z6 extends m3{constructor(e){super(),this.currentSequenceNumber=e}}class Cg{constructor(e){this.persistence=e,this.Ri=new Ag,this.Vi=null}static mi(e){return new Cg(e)}get fi(){if(this.Vi)return this.Vi;throw De(60996)}addReference(e,n,a){return this.Ri.addReference(a,n),this.fi.delete(a.toString()),ae.resolve()}removeReference(e,n,a){return this.Ri.removeReference(a,n),this.fi.add(a.toString()),ae.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ae.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>a.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.fi,(a=>{const o=Se.fromPath(a);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Ve.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((a=>{a?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ae.or([()=>ae.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class dh{constructor(e,n){this.persistence=e,this.pi=new Zi((a=>x3(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=A6(this,n)}static mi(e,n){return new dh(e,n)}Ei(){}di(e){return ae.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>n.next((o=>a+o))))}wr(e){let n=0;return this.pr(e,(a=>{n++})).next((()=>n))}pr(e,n){return ae.forEach(this.pi,((a,o)=>this.br(e,a,o).next((u=>u?ae.resolve():n(o)))))}removeTargets(e,n,a){return this.persistence.getTargetCache().removeTargets(e,n,a)}removeOrphanedDocuments(e,n){let a=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,n).next((g=>{g||(a++,u.removeEntry(f,Ve.min()))})))).next((()=>u.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,n,a){return this.pi.set(a,e.currentSequenceNumber),ae.resolve()}removeReference(e,n,a){return this.pi.set(a,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ld(e.data.value)),n}br(e,n,a){return ae.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ae.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,n,a,o){this.targetId=e,this.fromCache=n,this.Es=a,this.ds=o}static As(e,n){let a=Je(),o=Je();for(const u of n.docChanges)switch(u.type){case 0:a=a.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Ig(e,n.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return hj()?8:g3(Rn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,a,o){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,o,a).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new U6;return this.Ss(e,n,f).next((g=>{if(u.result=g,this.Vs)return this.bs(e,n,f,g.size)}))})).next((()=>u.result))}bs(e,n,a,o){return a.documentReadCount<this.fs?(Ul()<=We.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",ql(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ae.resolve()):(Ul()<=We.DEBUG&&ve("QueryEngine","Query:",ql(n),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.gs*o?(Ul()<=We.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",ql(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gr(n))):ae.resolve())}ys(e,n){if(Bv(n))return ae.resolve(null);let a=gr(n);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=ch(n,null,"F"),a=gr(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next((u=>{const f=Je(...u);return this.ps.getDocuments(e,f).next((g=>this.indexManager.getMinOffset(e,a).next((x=>{const p=this.Ds(n,g);return this.Cs(n,p,f,x.readTime)?this.ys(e,ch(n,null,"F")):this.vs(e,p,n,x)}))))})))))}ws(e,n,a,o){return Bv(n)||o.isEqual(Ve.min())?ae.resolve(null):this.ps.getDocuments(e,a).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,a,o)?ae.resolve(null):(Ul()<=We.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ql(n)),this.vs(e,f,n,u3(o,Mc)).next((g=>g)))}))}Ds(e,n){let a=new ln(b2(e));return n.forEach(((o,u)=>{Rh(e,u)&&(a=a.add(u))})),a}Cs(e,n,a,o){if(e.limit===null)return!1;if(a.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,a){return Ul()<=We.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",ql(n)),this.ps.getDocumentsMatchingQuery(e,n,si.min(),a)}vs(e,n,a,o){return this.ps.getDocumentsMatchingQuery(e,a,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg="LocalStore",B6=3e8;class H6{constructor(e,n,a,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new Lt(Ze),this.xs=new Zi((u=>wg(u)),_g),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new R6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function F6(r,e,n,a){return new H6(r,e,n,a)}async function F2(r,e){const n=ze(r);return await n.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return n.mutationQueue.getAllMutationBatches(a).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(a)))).next((u=>{const f=[],g=[];let x=Je();for(const p of o){f.push(p.batchId);for(const _ of p.mutations)x=x.add(_.key)}for(const p of u){g.push(p.batchId);for(const _ of p.mutations)x=x.add(_.key)}return n.localDocuments.getDocuments(a,x).next((p=>({Ls:p,removedBatchIds:f,addedBatchIds:g})))}))}))}function G6(r,e){const n=ze(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,x,p,_){const w=p.batch,E=w.keys();let O=ae.resolve();return E.forEach((z=>{O=O.next((()=>_.getEntry(x,z))).next((ne=>{const Q=p.docVersions.get(z);ht(Q!==null,48541),ne.version.compareTo(Q)<0&&(w.applyToRemoteDocument(ne,p),ne.isValidDocument()&&(ne.setReadTime(p.commitVersion),_.addEntry(ne)))}))})),O.next((()=>g.mutationQueue.removeMutationBatch(x,w)))})(n,a,e,u).next((()=>u.apply(a))).next((()=>n.mutationQueue.performConsistencyCheck(a))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(g){let x=Je();for(let p=0;p<g.mutationResults.length;++p)g.mutationResults[p].transformResults.length>0&&(x=x.add(g.batch.mutations[p].key));return x})(e)))).next((()=>n.localDocuments.getDocuments(a,o)))}))}function G2(r){const e=ze(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function $6(r,e){const n=ze(r),a=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((_,w)=>{const E=o.get(w);if(!E)return;g.push(n.Pi.removeMatchingKeys(u,_.removedDocuments,w).next((()=>n.Pi.addMatchingKeys(u,_.addedDocuments,w))));let O=E.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?O=O.withResumeToken(En.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):_.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(_.resumeToken,a)),o=o.insert(w,O),(function(ne,Q,ce){return ne.resumeToken.approximateByteSize()===0||Q.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=B6?!0:ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0})(E,O,_)&&g.push(n.Pi.updateTargetData(u,O))}));let x=Jr(),p=Je();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,_))})),g.push(Q6(u,f,e.documentUpdates).next((_=>{x=_.ks,p=_.qs}))),!a.isEqual(Ve.min())){const _=n.Pi.getLastRemoteSnapshotVersion(u).next((w=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,a)));g.push(_)}return ae.waitFor(g).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,x,p))).next((()=>x))})).then((u=>(n.Ms=o,u)))}function Q6(r,e,n){let a=Je(),o=Je();return n.forEach((u=>a=a.add(u))),e.getEntries(r,a).next((u=>{let f=Jr();return n.forEach(((g,x)=>{const p=u.get(g);x.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(g)),x.isNoDocument()&&x.version.isEqual(Ve.min())?(e.removeEntry(g,x.readTime),f=f.insert(g,x)):!p.isValidDocument()||x.version.compareTo(p.version)>0||x.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(x),f=f.insert(g,x)):ve(Rg,"Ignoring outdated watch update for ",g,". Current version:",p.version," Watch version:",x.version)})),{ks:f,qs:o}}))}function K6(r,e){const n=ze(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=yg),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function X6(r,e){const n=ze(r);return n.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return n.Pi.getTargetData(a,e).next((u=>u?(o=u,ae.resolve(o)):n.Pi.allocateTargetId(a).next((f=>(o=new $a(e,f,"TargetPurposeListen",a.currentSequenceNumber),n.Pi.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=n.Ms.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(a.targetId,a),n.xs.set(e,a.targetId)),a}))}async function G0(r,e,n){const a=ze(r),o=a.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",u,(f=>a.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!ho(f))throw f;ve(Rg,`Failed to update sequence numbers for target ${e}: ${f}`)}a.Ms=a.Ms.remove(e),a.xs.delete(o.target)}function t1(r,e,n){const a=ze(r);let o=Ve.min(),u=Je();return a.persistence.runTransaction("Execute query","readwrite",(f=>(function(x,p,_){const w=ze(x),E=w.xs.get(_);return E!==void 0?ae.resolve(w.Ms.get(E)):w.Pi.getTargetData(p,_)})(a,f,gr(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(f,g.targetId).next((x=>{u=x}))})).next((()=>a.Fs.getDocumentsMatchingQuery(f,e,n?o:Ve.min(),n?u:Je()))).next((g=>(Y6(a,V3(e),g),{documents:g,Qs:u})))))}function Y6(r,e,n){let a=r.Os.get(e)||Ve.min();n.forEach(((o,u)=>{u.readTime.compareTo(a)>0&&(a=u.readTime)})),r.Os.set(e,a)}class n1{constructor(){this.activeTargetIds=B3()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class W6{constructor(){this.Mo=new n1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,a){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new n1,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="ConnectivityMonitor";class r1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(s1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(s1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rd=null;function $0(){return Rd===null?Rd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Rd++,"0x"+Rd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="RestConnection",J6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${a}/databases/${o}`,this.Wo=this.databaseId.database===ih?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Go(e,n,a,o,u){const f=$0(),g=this.zo(e,n.toUriEncodedString());ve(a0,`Sending RPC '${e}' ${f}:`,g,a);const x={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(x,o,u);const{host:p}=new URL(g),_=io(p);return this.Jo(e,g,x,a,_).then((w=>(ve(a0,`Received RPC '${e}' ${f}: `,w),w)),(w=>{throw Zl(a0,`RPC '${e}' ${f} failed with error: `,w,"url: ",g,"request:",a),w}))}Ho(e,n,a,o,u,f){return this.Go(e,n,a,o,u)}jo(e,n,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+co})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),a&&a.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const a=J6[e];return`${this.Uo}/v1/${n}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn="WebChannelConnection";class nC extends eC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,a,o,u){const f=$0();return new Promise(((g,x)=>{const p=new $w;p.setWithCredentials(!0),p.listenOnce(Qw.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Vd.NO_ERROR:const w=p.getResponseJson();ve(Tn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(w)),g(w);break;case Vd.TIMEOUT:ve(Tn,`RPC '${e}' ${f} timed out`),x(new be(te.DEADLINE_EXCEEDED,"Request time out"));break;case Vd.HTTP_ERROR:const E=p.getStatus();if(ve(Tn,`RPC '${e}' ${f} failed with status:`,E,"response text:",p.getResponseText()),E>0){let O=p.getResponseJson();Array.isArray(O)&&(O=O[0]);const z=O==null?void 0:O.error;if(z&&z.status&&z.message){const ne=(function(ce){const fe=ce.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(fe)>=0?fe:te.UNKNOWN})(z.status);x(new be(ne,z.message))}else x(new be(te.UNKNOWN,"Server responded with status "+p.getStatus()))}else x(new be(te.UNAVAILABLE,"Connection failed."));break;default:De(9055,{l_:e,streamId:f,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ve(Tn,`RPC '${e}' ${f} completed.`)}}));const _=JSON.stringify(o);ve(Tn,`RPC '${e}' ${f} sending request:`,o),p.send(n,"POST",_,a,15)}))}T_(e,n,a){const o=$0(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=Yw(),g=Xw(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(x.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(x.useFetchStreams=!0),this.jo(x.initMessageHeaders,n,a),x.encodeInitMessageHeaders=!0;const _=u.join("");ve(Tn,`Creating RPC '${e}' stream ${o}: ${_}`,x);const w=f.createWebChannel(_,x);this.I_(w);let E=!1,O=!1;const z=new tC({Yo:Q=>{O?ve(Tn,`Not sending because RPC '${e}' stream ${o} is closed:`,Q):(E||(ve(Tn,`Opening RPC '${e}' stream ${o} transport.`),w.open(),E=!0),ve(Tn,`RPC '${e}' stream ${o} sending:`,Q),w.send(Q))},Zo:()=>w.close()}),ne=(Q,ce,fe)=>{Q.listen(ce,(oe=>{try{fe(oe)}catch(we){setTimeout((()=>{throw we}),0)}}))};return ne(w,bc.EventType.OPEN,(()=>{O||(ve(Tn,`RPC '${e}' stream ${o} transport opened.`),z.o_())})),ne(w,bc.EventType.CLOSE,(()=>{O||(O=!0,ve(Tn,`RPC '${e}' stream ${o} transport closed`),z.a_(),this.E_(w))})),ne(w,bc.EventType.ERROR,(Q=>{O||(O=!0,Zl(Tn,`RPC '${e}' stream ${o} transport errored. Name:`,Q.name,"Message:",Q.message),z.a_(new be(te.UNAVAILABLE,"The operation could not be completed")))})),ne(w,bc.EventType.MESSAGE,(Q=>{var ce;if(!O){const fe=Q.data[0];ht(!!fe,16349);const oe=fe,we=(oe==null?void 0:oe.error)||((ce=oe[0])==null?void 0:ce.error);if(we){ve(Tn,`RPC '${e}' stream ${o} received error:`,we);const he=we.status;let B=(function(A){const R=tn[A];if(R!==void 0)return k2(R)})(he),S=we.message;B===void 0&&(B=te.INTERNAL,S="Unknown error status: "+he+" with message "+we.message),O=!0,z.a_(new be(B,S)),w.close()}else ve(Tn,`RPC '${e}' stream ${o} received:`,fe),z.u_(fe)}})),ne(g,Kw.STAT_EVENT,(Q=>{Q.stat===O0.PROXY?ve(Tn,`RPC '${e}' stream ${o} detected buffering proxy`):Q.stat===O0.NOPROXY&&ve(Tn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{z.__()}),0),z}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function i0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(r){return new i6(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n,a=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=a,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-a);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="PersistentStream";class Q2{constructor(e,n,a,o,u,f,g,x){this.Mi=e,this.S_=a,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=x,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $2(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(Zr(n.toString()),Zr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===n&&this.G_(a,o)}),(a=>{e((()=>{const o=new be(te.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,n){const a=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(a1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ve(a1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class sC extends Q2{constructor(e,n,a,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=c6(this.serializer,e),a=(function(u){if(!("targetChange"in u))return Ve.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Ve.min():f.readTime?pr(f.readTime):Ve.min()})(e);return this.listener.H_(n,a)}Y_(e){const n={};n.database=F0(this.serializer),n.addTarget=(function(u,f){let g;const x=f.target;if(g=z0(x)?{documents:h6(u,x)}:{query:f6(u,x).ft},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=M2(u,f.resumeToken);const p=q0(u,f.expectedCount);p!==null&&(g.expectedCount=p)}else if(f.snapshotVersion.compareTo(Ve.min())>0){g.readTime=uh(u,f.snapshotVersion.toTimestamp());const p=q0(u,f.expectedCount);p!==null&&(g.expectedCount=p)}return g})(this.serializer,e);const a=g6(this.serializer,e);a&&(n.labels=a),this.q_(n)}Z_(e){const n={};n.database=F0(this.serializer),n.removeTarget=e,this.q_(n)}}class rC extends Q2{constructor(e,n,a,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ht(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ht(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ht(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=d6(e.writeResults,e.commitTime),a=pr(e.commitTime);return this.listener.na(a,n)}ra(){const e={};e.database=F0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((a=>u6(this.serializer,a)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{}class iC extends aC{constructor(e,n,a,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new be(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,B0(n,a),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new be(te.UNKNOWN,u.toString())}))}Ho(e,n,a,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,g])=>this.connection.Ho(e,B0(n,a),o,f,g,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new be(te.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class lC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Zr(n),this.aa=!1):ve("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi="RemoteStore";class oC{constructor(e,n,a,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{a.enqueueAndForget((async()=>{Ji(this)&&(ve(Qi,"Restarting streams for network reachability change."),await(async function(x){const p=ze(x);p.Ea.add(4),await Jc(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Vh(p)})(this))}))})),this.Ra=new lC(a,o)}}async function Vh(r){if(Ji(r))for(const e of r.da)await e(!0)}async function Jc(r){for(const e of r.da)await e(!1)}function K2(r,e){const n=ze(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Mg(n)?Og(n):mo(n).O_()&&Dg(n,e))}function kg(r,e){const n=ze(r),a=mo(n);n.Ia.delete(e),a.O_()&&X2(n,e),n.Ia.size===0&&(a.O_()?a.L_():Ji(n)&&n.Ra.set("Unknown"))}function Dg(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}mo(r).Y_(e)}function X2(r,e){r.Va.Ue(e),mo(r).Z_(e)}function Og(r){r.Va=new n6({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),mo(r).start(),r.Ra.ua()}function Mg(r){return Ji(r)&&!mo(r).x_()&&r.Ia.size>0}function Ji(r){return ze(r).Ea.size===0}function Y2(r){r.Va=void 0}async function cC(r){r.Ra.set("Online")}async function uC(r){r.Ia.forEach(((e,n)=>{Dg(r,e)}))}async function dC(r,e){Y2(r),Mg(r)?(r.Ra.ha(e),Og(r)):r.Ra.set("Unknown")}async function hC(r,e,n){if(r.Ra.set("Online"),e instanceof O2&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,f),o.Ia.delete(g),o.Va.removeTarget(g))})(r,e)}catch(a){ve(Qi,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await hh(r,a)}else if(e instanceof Ud?r.Va.Ze(e):e instanceof D2?r.Va.st(e):r.Va.tt(e),!n.isEqual(Ve.min()))try{const a=await G2(r.localStore);n.compareTo(a)>=0&&await(function(u,f){const g=u.Va.Tt(f);return g.targetChanges.forEach(((x,p)=>{if(x.resumeToken.approximateByteSize()>0){const _=u.Ia.get(p);_&&u.Ia.set(p,_.withResumeToken(x.resumeToken,f))}})),g.targetMismatches.forEach(((x,p)=>{const _=u.Ia.get(x);if(!_)return;u.Ia.set(x,_.withResumeToken(En.EMPTY_BYTE_STRING,_.snapshotVersion)),X2(u,x);const w=new $a(_.target,x,p,_.sequenceNumber);Dg(u,w)})),u.remoteSyncer.applyRemoteEvent(g)})(r,n)}catch(a){ve(Qi,"Failed to raise snapshot:",a),await hh(r,a)}}async function hh(r,e,n){if(!ho(e))throw e;r.Ea.add(1),await Jc(r),r.Ra.set("Offline"),n||(n=()=>G2(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ve(Qi,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Vh(r)}))}function W2(r,e){return e().catch((n=>hh(r,n,e)))}async function Lh(r){const e=ze(r),n=li(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:yg;for(;fC(e);)try{const o=await K6(e.localStore,a);if(o===null){e.Ta.length===0&&n.L_();break}a=o.batchId,mC(e,o)}catch(o){await hh(e,o)}Z2(e)&&J2(e)}function fC(r){return Ji(r)&&r.Ta.length<10}function mC(r,e){r.Ta.push(e);const n=li(r);n.O_()&&n.X_&&n.ea(e.mutations)}function Z2(r){return Ji(r)&&!li(r).x_()&&r.Ta.length>0}function J2(r){li(r).start()}async function gC(r){li(r).ra()}async function pC(r){const e=li(r);for(const n of r.Ta)e.ea(n.mutations)}async function xC(r,e,n){const a=r.Ta.shift(),o=jg.from(a,e,n);await W2(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Lh(r)}async function yC(r,e){e&&li(r).X_&&await(async function(a,o){if((function(f){return J3(f)&&f!==te.ABORTED})(o.code)){const u=a.Ta.shift();li(a).B_(),await W2(a,(()=>a.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Lh(a)}})(r,e),Z2(r)&&J2(r)}async function i1(r,e){const n=ze(r);n.asyncQueue.verifyOperationInProgress(),ve(Qi,"RemoteStore received new credentials");const a=Ji(n);n.Ea.add(3),await Jc(n),a&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Vh(n)}async function bC(r,e){const n=ze(r);e?(n.Ea.delete(2),await Vh(n)):e||(n.Ea.add(2),await Jc(n),n.Ra.set("Unknown"))}function mo(r){return r.ma||(r.ma=(function(n,a,o){const u=ze(n);return u.sa(),new sC(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:cC.bind(null,r),t_:uC.bind(null,r),r_:dC.bind(null,r),H_:hC.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Mg(r)?Og(r):r.Ra.set("Unknown")):(await r.ma.stop(),Y2(r))}))),r.ma}function li(r){return r.fa||(r.fa=(function(n,a,o){const u=ze(n);return u.sa(),new rC(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:gC.bind(null,r),r_:yC.bind(null,r),ta:pC.bind(null,r),na:xC.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Lh(r)):(await r.fa.stop(),r.Ta.length>0&&(ve(Qi,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,n,a,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=o,this.removalCallback=u,this.deferred=new Kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,o,u){const f=Date.now()+a,g=new Vg(e,n,f,o,u);return g.start(a),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lg(r,e){if(Zr("AsyncQueue",`${e}: ${r}`),ho(r))return new be(te.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{static emptySet(e){return new Xl(e.comparator)}constructor(e){this.comparator=e?(n,a)=>e(n,a)||Se.comparator(n.key,a.key):(n,a)=>Se.comparator(n.key,a.key),this.keyedMap=vc(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,a)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const a=new Xl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(){this.ga=new Lt(Se.comparator)}track(e){const n=e.doc.key,a=this.ga.get(n);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(n,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(n,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(n):e.type===1&&a.type===2?this.ga=this.ga.insert(n,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):De(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,a)=>{e.push(a)})),e}}class so{constructor(e,n,a,o,u,f,g,x,p){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=x,this.hasCachedResults=p}static fromInitialDocuments(e,n,a,o,u){const f=[];return n.forEach((g=>{f.push({type:0,doc:g})})),new so(e,n,Xl.emptySet(n),f,a,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ih(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==a[o].type||!n[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class wC{constructor(){this.queries=o1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,a){const o=ze(n),u=o.queries;o.queries=o1(),u.forEach(((f,g)=>{for(const x of g.Sa)x.onError(a)}))})(this,new be(te.ABORTED,"Firestore shutting down"))}}function o1(){return new Zi((r=>y2(r)),Ih)}async function Pg(r,e){const n=ze(r);let a=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(a=2):(u=new vC,a=e.Da()?0:1);try{switch(a){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const g=Lg(f,`Initialization of query '${ql(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Ug(n)}async function zg(r,e){const n=ze(r),a=e.query;let o=3;const u=n.queries.get(a);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(a),n.onUnlisten(a,!0);case 1:return n.queries.delete(a),n.onUnlisten(a,!1);case 2:return n.onLastRemoteStoreUnlisten(a);default:return}}function _C(r,e){const n=ze(r);let a=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const g of f.Sa)g.Fa(o)&&(a=!0);f.wa=o}}a&&Ug(n)}function NC(r,e,n){const a=ze(r),o=a.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);a.queries.delete(e)}function Ug(r){r.Ca.forEach((e=>{e.next()}))}var Q0,c1;(c1=Q0||(Q0={})).Ma="default",c1.Cache="cache";class qg{constructor(e,n,a){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new so(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const a=n!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=so.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Q0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e){this.key=e}}class t_{constructor(e){this.key=e}}class EC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Je(),this.mutatedKeys=Je(),this.eu=b2(e),this.tu=new Xl(this.eu)}get nu(){return this.Ya}ru(e,n){const a=n?n.iu:new l1,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,g=!1;const x=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,w)=>{const E=o.get(_),O=Rh(this.query,w)?w:null,z=!!E&&this.mutatedKeys.has(E.key),ne=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let Q=!1;E&&O?E.data.isEqual(O.data)?z!==ne&&(a.track({type:3,doc:O}),Q=!0):this.su(E,O)||(a.track({type:2,doc:O}),Q=!0,(x&&this.eu(O,x)>0||p&&this.eu(O,p)<0)&&(g=!0)):!E&&O?(a.track({type:0,doc:O}),Q=!0):E&&!O&&(a.track({type:1,doc:E}),Q=!0,(x||p)&&(g=!0)),Q&&(O?(f=f.add(O),u=ne?u.add(_):u.delete(_)):(f=f.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),u=u.delete(_.key),a.track({type:1,doc:_})}return{tu:f,iu:a,Cs:g,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((_,w)=>(function(O,z){const ne=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Rt:Q})}};return ne(O)-ne(z)})(_.type,w.type)||this.eu(_.doc,w.doc))),this.ou(a),o=o??!1;const g=n&&!o?this._u():[],x=this.Xa.size===0&&this.current&&!o?1:0,p=x!==this.Za;return this.Za=x,f.length!==0||p?{snapshot:new so(this.query,e.tu,u,f,e.mutatedKeys,x===0,p,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new l1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Je(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const n=[];return e.forEach((a=>{this.Xa.has(a)||n.push(new t_(a))})),this.Xa.forEach((a=>{e.has(a)||n.push(new e_(a))})),n}cu(e){this.Ya=e.Qs,this.Xa=Je();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return so.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Bg="SyncEngine";class jC{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class TC{constructor(e){this.key=e,this.hu=!1}}class SC{constructor(e,n,a,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Zi((g=>y2(g)),Ih),this.Iu=new Map,this.Eu=new Set,this.du=new Lt(Se.comparator),this.Au=new Map,this.Ru=new Ag,this.Vu={},this.mu=new Map,this.fu=no.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function AC(r,e,n=!0){const a=l_(r);let o;const u=a.Tu.get(e);return u?(a.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await n_(a,e,n,!0),o}async function CC(r,e){const n=l_(r);await n_(n,e,!0,!1)}async function n_(r,e,n,a){const o=await X6(r.localStore,gr(e)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let g;return a&&(g=await IC(r,e,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&K2(r.remoteStore,o),g}async function IC(r,e,n,a,o){r.pu=(w,E,O)=>(async function(ne,Q,ce,fe){let oe=Q.view.ru(ce);oe.Cs&&(oe=await t1(ne.localStore,Q.query,!1).then((({documents:S})=>Q.view.ru(S,oe))));const we=fe&&fe.targetChanges.get(Q.targetId),he=fe&&fe.targetMismatches.get(Q.targetId)!=null,B=Q.view.applyChanges(oe,ne.isPrimaryClient,we,he);return d1(ne,Q.targetId,B.au),B.snapshot})(r,w,E,O);const u=await t1(r.localStore,e,!0),f=new EC(e,u.Qs),g=f.ru(u.documents),x=Zc.createSynthesizedTargetChangeForCurrentChange(n,a&&r.onlineState!=="Offline",o),p=f.applyChanges(g,r.isPrimaryClient,x);d1(r,n,p.au);const _=new jC(e,n,f);return r.Tu.set(e,_),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),p.snapshot}async function RC(r,e,n){const a=ze(r),o=a.Tu.get(e),u=a.Iu.get(o.targetId);if(u.length>1)return a.Iu.set(o.targetId,u.filter((f=>!Ih(f,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await G0(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),n&&kg(a.remoteStore,o.targetId),K0(a,o.targetId)})).catch(uo)):(K0(a,o.targetId),await G0(a.localStore,o.targetId,!0))}async function kC(r,e){const n=ze(r),a=n.Tu.get(e),o=n.Iu.get(a.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(a.targetId),kg(n.remoteStore,a.targetId))}async function DC(r,e,n){const a=UC(r);try{const o=await(function(f,g){const x=ze(f),p=Ct.now(),_=g.reduce(((O,z)=>O.add(z.key)),Je());let w,E;return x.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let z=Jr(),ne=Je();return x.Ns.getEntries(O,_).next((Q=>{z=Q,z.forEach(((ce,fe)=>{fe.isValidDocument()||(ne=ne.add(ce))}))})).next((()=>x.localDocuments.getOverlayedDocuments(O,z))).next((Q=>{w=Q;const ce=[];for(const fe of g){const oe=K3(fe,w.get(fe.key).overlayedDocument);oe!=null&&ce.push(new di(fe.key,oe,u2(oe.value.mapValue),As.exists(!0)))}return x.mutationQueue.addMutationBatch(O,p,ce,g)})).next((Q=>{E=Q;const ce=Q.applyToLocalDocumentSet(w,ne);return x.documentOverlayCache.saveOverlays(O,Q.batchId,ce)}))})).then((()=>({batchId:E.batchId,changes:w2(w)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(f,g,x){let p=f.Vu[f.currentUser.toKey()];p||(p=new Lt(Ze)),p=p.insert(g,x),f.Vu[f.currentUser.toKey()]=p})(a,o.batchId,n),await eu(a,o.changes),await Lh(a.remoteStore)}catch(o){const u=Lg(o,"Failed to persist write");n.reject(u)}}async function s_(r,e){const n=ze(r);try{const a=await $6(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(ht(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?ht(f.hu,14607):o.removedDocuments.size>0&&(ht(f.hu,42227),f.hu=!1))})),await eu(n,a,e)}catch(a){await uo(a)}}function u1(r,e,n){const a=ze(r);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const o=[];a.Tu.forEach(((u,f)=>{const g=f.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(f,g){const x=ze(f);x.onlineState=g;let p=!1;x.queries.forEach(((_,w)=>{for(const E of w.Sa)E.va(g)&&(p=!0)})),p&&Ug(x)})(a.eventManager,e),o.length&&a.Pu.H_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function OC(r,e,n){const a=ze(r);a.sharedClientState.updateQueryState(e,"rejected",n);const o=a.Au.get(e),u=o&&o.key;if(u){let f=new Lt(Se.comparator);f=f.insert(u,An.newNoDocument(u,Ve.min()));const g=Je().add(u),x=new Oh(Ve.min(),new Map,new Lt(Ze),f,g);await s_(a,x),a.du=a.du.remove(u),a.Au.delete(e),Hg(a)}else await G0(a.localStore,e,!1).then((()=>K0(a,e,n))).catch(uo)}async function MC(r,e){const n=ze(r),a=e.batch.batchId;try{const o=await G6(n.localStore,e);a_(n,a,null),r_(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await eu(n,o)}catch(o){await uo(o)}}async function VC(r,e,n){const a=ze(r);try{const o=await(function(f,g){const x=ze(f);return x.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return x.mutationQueue.lookupMutationBatch(p,g).next((w=>(ht(w!==null,37113),_=w.keys(),x.mutationQueue.removeMutationBatch(p,w)))).next((()=>x.mutationQueue.performConsistencyCheck(p))).next((()=>x.documentOverlayCache.removeOverlaysForBatchId(p,_,g))).next((()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>x.localDocuments.getDocuments(p,_)))}))})(a.localStore,e);a_(a,e,n),r_(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),await eu(a,o)}catch(o){await uo(o)}}function r_(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function a_(r,e,n){const a=ze(r);let o=a.Vu[a.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),a.Vu[a.currentUser.toKey()]=o}}function K0(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const a of r.Iu.get(e))r.Tu.delete(a),n&&r.Pu.yu(a,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((a=>{r.Ru.containsKey(a)||i_(r,a)}))}function i_(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(kg(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),Hg(r))}function d1(r,e,n){for(const a of n)a instanceof e_?(r.Ru.addReference(a.key,e),LC(r,a)):a instanceof t_?(ve(Bg,"Document no longer in limbo: "+a.key),r.Ru.removeReference(a.key,e),r.Ru.containsKey(a.key)||i_(r,a.key)):De(19791,{wu:a})}function LC(r,e){const n=e.key,a=n.path.canonicalString();r.du.get(n)||r.Eu.has(a)||(ve(Bg,"New document in limbo: "+n),r.Eu.add(a),Hg(r))}function Hg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new Se(Nt.fromString(e)),a=r.fu.next();r.Au.set(a,new TC(n)),r.du=r.du.insert(n,a),K2(r.remoteStore,new $a(gr(Ch(n.path)),a,"TargetPurposeLimboResolution",Th.ce))}}async function eu(r,e,n){const a=ze(r),o=[],u=[],f=[];a.Tu.isEmpty()||(a.Tu.forEach(((g,x)=>{f.push(a.pu(x,e,n).then((p=>{var _;if((p||n)&&a.isPrimaryClient){const w=p?!p.fromCache:(_=n==null?void 0:n.targetChanges.get(x.targetId))==null?void 0:_.current;a.sharedClientState.updateQueryState(x.targetId,w?"current":"not-current")}if(p){o.push(p);const w=Ig.As(x.targetId,p);u.push(w)}})))})),await Promise.all(f),a.Pu.H_(o),await(async function(x,p){const _=ze(x);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>ae.forEach(p,(E=>ae.forEach(E.Es,(O=>_.persistence.referenceDelegate.addReference(w,E.targetId,O))).next((()=>ae.forEach(E.ds,(O=>_.persistence.referenceDelegate.removeReference(w,E.targetId,O)))))))))}catch(w){if(!ho(w))throw w;ve(Rg,"Failed to update sequence numbers: "+w)}for(const w of p){const E=w.targetId;if(!w.fromCache){const O=_.Ms.get(E),z=O.snapshotVersion,ne=O.withLastLimboFreeSnapshotVersion(z);_.Ms=_.Ms.insert(E,ne)}}})(a.localStore,u))}async function PC(r,e){const n=ze(r);if(!n.currentUser.isEqual(e)){ve(Bg,"User change. New user:",e.toKey());const a=await F2(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((g=>{g.forEach((x=>{x.reject(new be(te.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await eu(n,a.Ls)}}function zC(r,e){const n=ze(r),a=n.Au.get(e);if(a&&a.hu)return Je().add(a.key);{let o=Je();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const g=n.Tu.get(f);o=o.unionWith(g.view.nu)}return o}}function l_(r){const e=ze(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=s_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OC.bind(null,e),e.Pu.H_=_C.bind(null,e.eventManager),e.Pu.yu=NC.bind(null,e.eventManager),e}function UC(r){const e=ze(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VC.bind(null,e),e}class fh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return F6(this.persistence,new q6,e.initialUser,this.serializer)}Cu(e){return new H2(Cg.mi,this.serializer)}Du(e){return new W6}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fh.provider={build:()=>new fh};class qC extends fh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ht(this.persistence.referenceDelegate instanceof dh,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new T6(a,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Gn.withCacheSize(this.cacheSizeBytes):Gn.DEFAULT;return new H2((a=>dh.mi(a,n)),this.serializer)}}class X0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>u1(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=PC.bind(null,this.syncEngine),await bC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new wC})()}createDatastore(e){const n=Mh(e.databaseInfo.databaseId),a=(function(u){return new nC(u)})(e.databaseInfo);return(function(u,f,g,x){return new iC(u,f,g,x)})(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return(function(a,o,u,f,g){return new oC(a,o,u,f,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>u1(this.syncEngine,n,0)),(function(){return r1.v()?new r1:new Z6})())}createSyncEngine(e,n){return(function(o,u,f,g,x,p,_){const w=new SC(o,u,f,g,x,p);return _&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const u=ze(o);ve(Qi,"RemoteStore shutting down."),u.Ea.add(5),await Jc(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}X0.provider={build:()=>new X0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Zr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="FirestoreClient";class BC{constructor(e,n,a,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this.databaseInfo=o,this.user=Sn.UNAUTHENTICATED,this.clientId=xg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(a,(async f=>{ve(oi,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(a,(f=>(ve(oi,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const a=Lg(n,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function l0(r,e){r.asyncQueue.verifyOperationInProgress(),ve(oi,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let a=n.initialUser;r.setCredentialChangeListener((async o=>{a.isEqual(o)||(await F2(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function h1(r,e){r.asyncQueue.verifyOperationInProgress();const n=await HC(r);ve(oi,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((a=>i1(e.remoteStore,a))),r.setAppCheckTokenChangeListener(((a,o)=>i1(e.remoteStore,o))),r._onlineComponents=e}async function HC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ve(oi,"Using user provided OfflineComponentProvider");try{await l0(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Zl("Error using user provided cache. Falling back to memory cache: "+n),await l0(r,new fh)}}else ve(oi,"Using default OfflineComponentProvider"),await l0(r,new qC(void 0));return r._offlineComponents}async function o_(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ve(oi,"Using user provided OnlineComponentProvider"),await h1(r,r._uninitializedComponentsProvider._online)):(ve(oi,"Using default OnlineComponentProvider"),await h1(r,new X0))),r._onlineComponents}function FC(r){return o_(r).then((e=>e.syncEngine))}async function mh(r){const e=await o_(r),n=e.eventManager;return n.onListen=AC.bind(null,e.syncEngine),n.onUnlisten=RC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=kC.bind(null,e.syncEngine),n}function GC(r,e,n={}){const a=new Kr;return r.asyncQueue.enqueueAndForget((async()=>(function(u,f,g,x,p){const _=new Fg({next:E=>{_.Nu(),f.enqueueAndForget((()=>zg(u,w)));const O=E.docs.has(g);!O&&E.fromCache?p.reject(new be(te.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&E.fromCache&&x&&x.source==="server"?p.reject(new be(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),w=new qg(Ch(g.path),_,{includeMetadataChanges:!0,qa:!0});return Pg(u,w)})(await mh(r),r.asyncQueue,e,n,a))),a.promise}function $C(r,e,n={}){const a=new Kr;return r.asyncQueue.enqueueAndForget((async()=>(function(u,f,g,x,p){const _=new Fg({next:E=>{_.Nu(),f.enqueueAndForget((()=>zg(u,w))),E.fromCache&&x.source==="server"?p.reject(new be(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),w=new qg(g,_,{includeMetadataChanges:!0,qa:!0});return Pg(u,w)})(await mh(r),r.asyncQueue,e,n,a))),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="firestore.googleapis.com",m1=!0;class g1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new be(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=u_,this.ssl=m1}else this.host=e.host,this.ssl=e.ssl??m1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=B2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<E6)throw new be(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}o3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=c_(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new be(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new be(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new be(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ph{constructor(e,n,a,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new g1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new g1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new ZA;switch(a.type){case"firstParty":return new n3(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new be(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=f1.get(n);a&&(ve("ComponentProvider","Removing Datastore"),f1.delete(n),a.terminate())})(this),Promise.resolve()}}function QC(r,e,n,a={}){var p;r=Qn(r,Ph);const o=io(e),u=r._getSettings(),f={...u,emulatorOptions:r._getEmulatorOptions()},g=`${e}:${n}`;o&&(ew(`https://${g}`),tw("Firestore",!0)),u.host!==u_&&u.host!==g&&Zl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const x={...u,host:g,ssl:o,emulatorOptions:a};if(!ni(x,f)&&(r._setSettings(x),a.mockUserToken)){let _,w;if(typeof a.mockUserToken=="string")_=a.mockUserToken,w=Sn.MOCK_USER;else{_=rj(a.mockUserToken,(p=r._app)==null?void 0:p.options.projectId);const E=a.mockUserToken.sub||a.mockUserToken.user_id;if(!E)throw new be(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Sn(E)}r._authCredentials=new JA(new Zw(_,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new sa(this.firestore,e,this._query)}}class Ut{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ja(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}toJSON(){return{type:Ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(Yc(n,Ut._jsonSchema))return new Ut(e,a||null,new Se(Nt.fromString(n.referencePath)))}}Ut._jsonSchemaVersion="firestore/documentReference/1.0",Ut._jsonSchema={type:sn("string",Ut._jsonSchemaVersion),referencePath:sn("string")};class Ja extends sa{constructor(e,n,a){super(e,n,Ch(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new Se(e))}withConverter(e){return new Ja(this.firestore,e,this._path)}}function nt(r,e,...n){if(r=qt(r),Jw("collection","path",e),r instanceof Ph){const a=Nt.fromString(e,...n);return Av(a),new Ja(r,null,a)}{if(!(r instanceof Ut||r instanceof Ja))throw new be(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(Nt.fromString(e,...n));return Av(a),new Ja(r.firestore,null,a)}}function ls(r,e,...n){if(r=qt(r),arguments.length===1&&(e=xg.newId()),Jw("doc","path",e),r instanceof Ph){const a=Nt.fromString(e,...n);return Sv(a),new Ut(r,null,new Se(a))}{if(!(r instanceof Ut||r instanceof Ja))throw new be(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(Nt.fromString(e,...n));return Sv(a),new Ut(r.firestore,r instanceof Ja?r.converter:null,new Se(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="AsyncQueue";class x1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $2(this,"async_queue_retry"),this._c=()=>{const a=i0();a&&ve(p1,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const n=i0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=i0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Kr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ho(e))throw e;ve(p1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,Zr("INTERNAL UNHANDLED ERROR: ",y1(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=n,n}enqueueAfterDelay(e,n,a){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Vg.createAndSchedule(this,e,n,a,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&De(47125,{Pc:y1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function y1(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(r){return(function(n,a){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of a)if(u in o&&typeof o[u]=="function")return!0;return!1})(r,["next","error","complete"])}class ea extends Ph{constructor(e,n,a,o){super(e,n,a,o),this.type="firestore",this._queue=new x1,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new x1(e),this._firestoreClient=void 0,await e}}}function KC(r,e){const n=typeof r=="object"?r:lg(),a=typeof r=="string"?r:ih,o=Wi(n,"firestore").getImmediate({identifier:a});if(!o._initialized){const u=nj("firestore");u&&QC(o,...u)}return o}function zh(r){if(r._terminated)throw new be(te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||XC(r),r._firestoreClient}function XC(r){var a,o,u;const e=r._freezeSettings(),n=(function(g,x,p,_){return new v3(g,x,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,c_(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(r._databaseId,((a=r._app)==null?void 0:a.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new BC(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(g){const x=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(x),_online:x}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Es(En.fromBase64String(e))}catch(n){throw new be(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Es(En.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Es._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yc(e,Es._jsonSchema))return Es.fromBase64String(e.bytes)}}Es._jsonSchemaVersion="firestore/bytes/1.0",Es._jsonSchema={type:sn("string",Es._jsonSchemaVersion),bytes:sn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new be(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new be(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new be(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xr._jsonSchemaVersion}}static fromJSON(e){if(Yc(e,xr._jsonSchema))return new xr(e.latitude,e.longitude)}}xr._jsonSchemaVersion="firestore/geoPoint/1.0",xr._jsonSchema={type:sn("string",xr._jsonSchemaVersion),latitude:sn("number"),longitude:sn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let u=0;u<a.length;++u)if(a[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:yr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yc(e,yr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new yr(e.vectorValues);throw new be(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yr._jsonSchemaVersion="firestore/vectorValue/1.0",yr._jsonSchema={type:sn("string",yr._jsonSchemaVersion),vectorValues:sn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=/^__.*__$/;class WC{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return this.fieldMask!==null?new di(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wc(e,this.data,n,this.fieldTransforms)}}class d_{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return new di(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function h_(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ac:r})}}class Gg{constructor(e,n,a,o,u,f){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Gg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),a=this.Vc({path:n,fc:!1});return a.gc(e),a}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),a=this.Vc({path:n,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return gh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(h_(this.Ac)&&YC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ZC{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||Mh(e)}Cc(e,n,a,o=!1){return new Gg({Ac:e,methodName:n,Dc:a,path:Nn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qh(r){const e=r._freezeSettings(),n=Mh(r._databaseId);return new ZC(r._databaseId,!!e.ignoreUndefinedProperties,n)}function f_(r,e,n,a,o,u={}){const f=r.Cc(u.merge||u.mergeFields?2:0,e,n,o);Kg("Data must be an object, but it was:",f,a);const g=m_(a,f);let x,p;if(u.merge)x=new rs(f.fieldMask),p=f.fieldTransforms;else if(u.mergeFields){const _=[];for(const w of u.mergeFields){const E=Y0(e,w,n);if(!f.contains(E))throw new be(te.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);p_(_,E)||_.push(E)}x=new rs(_),p=f.fieldTransforms.filter((w=>x.covers(w.field)))}else x=null,p=f.fieldTransforms;return new WC(new $n(g),x,p)}class Bh extends tu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bh}}class $g extends tu{_toFieldTransform(e){return new C2(e.path,new Uc)}isEqual(e){return e instanceof $g}}class Qg extends tu{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Hc(e.serializer,E2(e.serializer,this.Fc));return new C2(e.path,n)}isEqual(e){return e instanceof Qg&&this.Fc===e.Fc}}function JC(r,e,n,a){const o=r.Cc(1,e,n);Kg("Data must be an object, but it was:",o,a);const u=[],f=$n.empty();ui(a,((x,p)=>{const _=Xg(e,x,n);p=qt(p);const w=o.yc(_);if(p instanceof Bh)u.push(_);else{const E=nu(p,w);E!=null&&(u.push(_),f.set(_,E))}}));const g=new rs(u);return new d_(f,g,o.fieldTransforms)}function eI(r,e,n,a,o,u){const f=r.Cc(1,e,n),g=[Y0(e,a,n)],x=[o];if(u.length%2!=0)throw new be(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<u.length;E+=2)g.push(Y0(e,u[E])),x.push(u[E+1]);const p=[],_=$n.empty();for(let E=g.length-1;E>=0;--E)if(!p_(p,g[E])){const O=g[E];let z=x[E];z=qt(z);const ne=f.yc(O);if(z instanceof Bh)p.push(O);else{const Q=nu(z,ne);Q!=null&&(p.push(O),_.set(O,Q))}}const w=new rs(p);return new d_(_,w,f.fieldTransforms)}function tI(r,e,n,a=!1){return nu(n,r.Cc(a?4:3,e))}function nu(r,e){if(g_(r=qt(r)))return Kg("Unsupported field value:",e,r),m_(r,e);if(r instanceof tu)return(function(a,o){if(!h_(o.Ac))throw o.Sc(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${a._methodName}() is not currently supported inside arrays`);const u=a._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,o){const u=[];let f=0;for(const g of a){let x=nu(g,o.wc(f));x==null&&(x={nullValue:"NULL_VALUE"}),u.push(x),f++}return{arrayValue:{values:u}}})(r,e)}return(function(a,o){if((a=qt(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return E2(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const u=Ct.fromDate(a);return{timestampValue:uh(o.serializer,u)}}if(a instanceof Ct){const u=new Ct(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:uh(o.serializer,u)}}if(a instanceof xr)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Es)return{bytesValue:M2(o.serializer,a._byteString)};if(a instanceof Ut){const u=o.databaseId,f=a.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Sg(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof yr)return(function(f,g){return{mapValue:{fields:{[o2]:{stringValue:c2},[lh]:{arrayValue:{values:f.toArray().map((p=>{if(typeof p!="number")throw g.Sc("VectorValues must only contain numeric values.");return Ng(g.serializer,p)}))}}}}}})(a,o);throw o.Sc(`Unsupported field value: ${jh(a)}`)})(r,e)}function m_(r,e){const n={};return n2(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ui(r,((a,o)=>{const u=nu(o,e.mc(a));u!=null&&(n[a]=u)})),{mapValue:{fields:n}}}function g_(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ct||r instanceof xr||r instanceof Es||r instanceof Ut||r instanceof tu||r instanceof yr)}function Kg(r,e,n){if(!g_(n)||!e2(n)){const a=jh(n);throw a==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+a)}}function Y0(r,e,n){if((e=qt(e))instanceof Uh)return e._internalPath;if(typeof e=="string")return Xg(r,e);throw gh("Field path arguments must be of type string or ",r,!1,void 0,n)}const nI=new RegExp("[~\\*/\\[\\]]");function Xg(r,e,n){if(e.search(nI)>=0)throw gh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Uh(...e.split("."))._internalPath}catch{throw gh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function gh(r,e,n,a,o){const u=a&&!a.isEmpty(),f=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let x="";return(u||f)&&(x+=" (found",u&&(x+=` in field ${a}`),f&&(x+=` in document ${o}`),x+=")"),new be(te.INVALID_ARGUMENT,g+r+x)}function p_(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,n,a,o,u){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sI extends x_{data(){return super.data()}}function Hh(r,e){return typeof e=="string"?Xg(r,e):e instanceof Uh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new be(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yg{}class Wg extends Yg{}function Qt(r,e,...n){let a=[];e instanceof Yg&&a.push(e),a=a.concat(n),(function(u){const f=u.filter((x=>x instanceof Zg)).length,g=u.filter((x=>x instanceof Fh)).length;if(f>1||f>0&&g>0)throw new be(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const o of a)r=o._apply(r);return r}class Fh extends Wg{constructor(e,n,a){super(),this._field=e,this._op=n,this._value=a,this.type="where"}static _create(e,n,a){return new Fh(e,n,a)}_apply(e){const n=this._parse(e);return b_(e._query,n),new sa(e.firestore,e.converter,U0(e._query,n))}_parse(e){const n=qh(e.firestore);return(function(u,f,g,x,p,_,w){let E;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new be(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){w1(w,_);const z=[];for(const ne of w)z.push(v1(x,u,ne));E={arrayValue:{values:z}}}else E=v1(x,u,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||w1(w,_),E=tI(g,f,w,_==="in"||_==="not-in");return nn.create(p,_,E)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function as(r,e,n){const a=e,o=Hh("where",r);return Fh._create(o,a,n)}class Zg extends Yg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Zg(e,n)}_parse(e){const n=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return n.length===1?n[0]:Hs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let f=o;const g=u.getFlattenedFilters();for(const x of g)b_(f,x),f=U0(f,x)})(e._query,n),new sa(e.firestore,e.converter,U0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Jg extends Wg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Jg(e,n)}_apply(e){const n=(function(o,u,f){if(o.startAt!==null)throw new be(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new be(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zc(u,f)})(e._query,this._field,this._direction);return new sa(e.firestore,e.converter,(function(o,u){const f=o.explicitOrderBy.concat([u]);return new fo(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Qa(r,e="asc"){const n=e,a=Hh("orderBy",r);return Jg._create(a,n)}class ep extends Wg{constructor(e,n,a){super(),this.type=e,this._limit=n,this._limitType=a}static _create(e,n,a){return new ep(e,n,a)}_apply(e){return new sa(e.firestore,e.converter,ch(e._query,this._limit,this._limitType))}}function _c(r){return c3("limit",r),ep._create("limit",r,"F")}function v1(r,e,n){if(typeof(n=qt(n))=="string"){if(n==="")throw new be(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!x2(e)&&n.indexOf("/")!==-1)throw new be(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=e.path.child(Nt.fromString(n));if(!Se.isDocumentKey(a))throw new be(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Vv(r,new Se(a))}if(n instanceof Ut)return Vv(r,n._key);throw new be(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jh(n)}.`)}function w1(r,e){if(!Array.isArray(r)||r.length===0)throw new be(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function b_(r,e){const n=(function(o,u){for(const f of o)for(const g of f.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new be(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class rI{convertValue(e,n="none"){switch(ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return ui(e,((o,u)=>{a[o]=this.convertValue(u,n)})),a}convertVectorValue(e){var a,o,u;const n=(u=(o=(a=e.fields)==null?void 0:a[lh].arrayValue)==null?void 0:o.values)==null?void 0:u.map((f=>Gt(f.doubleValue)));return new yr(n)}convertGeoPoint(e){return new xr(Gt(e.latitude),Gt(e.longitude))}convertArray(e,n){return(e.values||[]).map((a=>this.convertValue(a,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const a=Ah(e);return a==null?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(Vc(e));default:return null}}convertTimestamp(e){const n=ri(e);return new Ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=Nt.fromString(e);ht(q2(a),9688,{name:e});const o=new Lc(a.get(1),a.get(3)),u=new Se(a.popFirst(5));return o.isEqual(n)||Zr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(r,e,n){let a;return a=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,a}class Nc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qi extends x_{constructor(e,n,a,o,u,f){super(e,n,a,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(Hh("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=qi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}qi._jsonSchemaVersion="firestore/documentSnapshot/1.0",qi._jsonSchema={type:sn("string",qi._jsonSchemaVersion),bundleSource:sn("string","DocumentSnapshot"),bundleName:sn("string"),bundle:sn("string")};class qd extends qi{data(e={}){return super.data(e)}}class Bi{constructor(e,n,a,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Nc(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((a=>{e.call(n,new qd(this._firestore,this._userDataWriter,a.key,a,new Nc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new be(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((g=>{const x=new qd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Nc(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:x,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const x=new qd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Nc(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,_=-1;return g.type!==0&&(p=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),_=f.indexOf(g.doc.key)),{type:aI(g.type),doc:x,oldIndex:p,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Bi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),a.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aI(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(r){r=Qn(r,Ut);const e=Qn(r.firestore,ea);return GC(zh(e),r._key).then((n=>E_(e,r,n)))}Bi._jsonSchemaVersion="firestore/querySnapshot/1.0",Bi._jsonSchema={type:sn("string",Bi._jsonSchemaVersion),bundleSource:sn("string","QuerySnapshot"),bundleName:sn("string"),bundle:sn("string")};class tp extends rI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Es(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,n)}}function an(r){r=Qn(r,sa);const e=Qn(r.firestore,ea),n=zh(e),a=new tp(e);return y_(r._query),$C(n,r._query).then((o=>new Bi(e,a,r,o)))}function np(r,e,n){r=Qn(r,Ut);const a=Qn(r.firestore,ea),o=v_(r.converter,e,n);return Gh(a,[f_(qh(a),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,As.none())])}function su(r,e,n,...a){r=Qn(r,Ut);const o=Qn(r.firestore,ea),u=qh(o);let f;return f=typeof(e=qt(e))=="string"||e instanceof Uh?eI(u,"updateDoc",r._key,e,n,a):JC(u,"updateDoc",r._key,e),Gh(o,[f.toMutation(r._key,As.exists(!0))])}function __(r){return Gh(Qn(r.firestore,ea),[new Eg(r._key,As.none())])}function Kn(r,e){const n=Qn(r.firestore,ea),a=ls(r),o=v_(r.converter,e);return Gh(n,[f_(qh(r.firestore),"addDoc",a._key,o,r.converter!==null,{}).toMutation(a._key,As.exists(!1))]).then((()=>a))}function N_(r,...e){var x,p,_;r=qt(r);let n={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||b1(e[a])||(n=e[a++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(b1(e[a])){const w=e[a];e[a]=(x=w.next)==null?void 0:x.bind(w),e[a+1]=(p=w.error)==null?void 0:p.bind(w),e[a+2]=(_=w.complete)==null?void 0:_.bind(w)}let u,f,g;if(r instanceof Ut)f=Qn(r.firestore,ea),g=Ch(r._key.path),u={next:w=>{e[a]&&e[a](E_(f,r,w))},error:e[a+1],complete:e[a+2]};else{const w=Qn(r,sa);f=Qn(w.firestore,ea),g=w._query;const E=new tp(f);u={next:O=>{e[a]&&e[a](new Bi(f,E,w,O))},error:e[a+1],complete:e[a+2]},y_(r._query)}return(function(E,O,z,ne){const Q=new Fg(ne),ce=new qg(O,Q,z);return E.asyncQueue.enqueueAndForget((async()=>Pg(await mh(E),ce))),()=>{Q.Nu(),E.asyncQueue.enqueueAndForget((async()=>zg(await mh(E),ce)))}})(zh(f),g,o,u)}function Gh(r,e){return(function(a,o){const u=new Kr;return a.asyncQueue.enqueueAndForget((async()=>DC(await FC(a),o,u))),u.promise})(zh(r),e)}function E_(r,e,n){const a=n.docs.get(e._key),o=new tp(r);return new qi(r,o,e._key,a,new Nc(n.hasPendingWrites,n.fromCache),e.converter)}function In(){return new $g("serverTimestamp")}function W0(r){return new Qg("increment",r)}(function(e,n=!0){(function(o){co=o})(lo),vr(new qs("firestore",((a,{instanceIdentifier:o,options:u})=>{const f=a.getProvider("app").getImmediate(),g=new ea(new e3(a.getProvider("auth-internal")),new s3(f,a.getProvider("app-check-internal")),(function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new be(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lc(p.options.projectId,_)})(f,o),f);return u={useFetchStreams:n,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),Ss(Nv,Ev,e),Ss(Nv,Ev,"esm2020")})();const j_="@firebase/installations",sp="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=1e4,S_=`w:${sp}`,A_="FIS_v2",iI="https://firebaseinstallations.googleapis.com/v1",lI=3600*1e3,oI="installations",cI="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ki=new Yi(oI,cI,uI);function C_(r){return r instanceof Fs&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_({projectId:r}){return`${iI}/projects/${r}/installations`}function R_(r){return{token:r.token,requestStatus:2,expiresIn:hI(r.expiresIn),creationTime:Date.now()}}async function k_(r,e){const a=(await e.json()).error;return Ki.create("request-failed",{requestName:r,serverCode:a.code,serverMessage:a.message,serverStatus:a.status})}function D_({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function dI(r,{refreshToken:e}){const n=D_(r);return n.append("Authorization",fI(e)),n}async function O_(r){const e=await r();return e.status>=500&&e.status<600?r():e}function hI(r){return Number(r.replace("s","000"))}function fI(r){return`${A_} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mI({appConfig:r,heartbeatServiceProvider:e},{fid:n}){const a=I_(r),o=D_(r),u=e.getImmediate({optional:!0});if(u){const p=await u.getHeartbeatsHeader();p&&o.append("x-firebase-client",p)}const f={fid:n,authVersion:A_,appId:r.appId,sdkVersion:S_},g={method:"POST",headers:o,body:JSON.stringify(f)},x=await O_(()=>fetch(a,g));if(x.ok){const p=await x.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:R_(p.authToken)}}else throw await k_("Create Installation",x)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=/^[cdef][\w-]{21}$/,Z0="";function xI(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const n=yI(r);return pI.test(n)?n:Z0}catch{return Z0}}function yI(r){return gI(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=new Map;function L_(r,e){const n=$h(r);P_(n,e),bI(n,e)}function P_(r,e){const n=V_.get(r);if(n)for(const a of n)a(e)}function bI(r,e){const n=vI();n&&n.postMessage({key:r,fid:e}),wI()}let Ui=null;function vI(){return!Ui&&"BroadcastChannel"in self&&(Ui=new BroadcastChannel("[Firebase] FID Change"),Ui.onmessage=r=>{P_(r.data.key,r.data.fid)}),Ui}function wI(){V_.size===0&&Ui&&(Ui.close(),Ui=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="firebase-installations-database",NI=1,Xi="firebase-installations-store";let o0=null;function rp(){return o0||(o0=lw(_I,NI,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Xi)}}})),o0}async function ph(r,e){const n=$h(r),o=(await rp()).transaction(Xi,"readwrite"),u=o.objectStore(Xi),f=await u.get(n);return await u.put(e,n),await o.done,(!f||f.fid!==e.fid)&&L_(r,e.fid),e}async function z_(r){const e=$h(r),a=(await rp()).transaction(Xi,"readwrite");await a.objectStore(Xi).delete(e),await a.done}async function Qh(r,e){const n=$h(r),o=(await rp()).transaction(Xi,"readwrite"),u=o.objectStore(Xi),f=await u.get(n),g=e(f);return g===void 0?await u.delete(n):await u.put(g,n),await o.done,g&&(!f||f.fid!==g.fid)&&L_(r,g.fid),g}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ap(r){let e;const n=await Qh(r.appConfig,a=>{const o=EI(a),u=jI(r,o);return e=u.registrationPromise,u.installationEntry});return n.fid===Z0?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function EI(r){const e=r||{fid:xI(),registrationStatus:0};return U_(e)}function jI(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Ki.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},a=TI(r,n);return{installationEntry:n,registrationPromise:a}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:SI(r)}:{installationEntry:e}}async function TI(r,e){try{const n=await mI(r,e);return ph(r.appConfig,n)}catch(n){throw C_(n)&&n.customData.serverCode===409?await z_(r.appConfig):await ph(r.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function SI(r){let e=await _1(r.appConfig);for(;e.registrationStatus===1;)await M_(100),e=await _1(r.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:a}=await ap(r);return a||n}return e}function _1(r){return Qh(r,e=>{if(!e)throw Ki.create("installation-not-found");return U_(e)})}function U_(r){return AI(r)?{fid:r.fid,registrationStatus:0}:r}function AI(r){return r.registrationStatus===1&&r.registrationTime+T_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CI({appConfig:r,heartbeatServiceProvider:e},n){const a=II(r,n),o=dI(r,n),u=e.getImmediate({optional:!0});if(u){const p=await u.getHeartbeatsHeader();p&&o.append("x-firebase-client",p)}const f={installation:{sdkVersion:S_,appId:r.appId}},g={method:"POST",headers:o,body:JSON.stringify(f)},x=await O_(()=>fetch(a,g));if(x.ok){const p=await x.json();return R_(p)}else throw await k_("Generate Auth Token",x)}function II(r,{fid:e}){return`${I_(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ip(r,e=!1){let n;const a=await Qh(r.appConfig,u=>{if(!q_(u))throw Ki.create("not-registered");const f=u.authToken;if(!e&&DI(f))return u;if(f.requestStatus===1)return n=RI(r,e),u;{if(!navigator.onLine)throw Ki.create("app-offline");const g=MI(u);return n=kI(r,g),g}});return n?await n:a.authToken}async function RI(r,e){let n=await N1(r.appConfig);for(;n.authToken.requestStatus===1;)await M_(100),n=await N1(r.appConfig);const a=n.authToken;return a.requestStatus===0?ip(r,e):a}function N1(r){return Qh(r,e=>{if(!q_(e))throw Ki.create("not-registered");const n=e.authToken;return VI(n)?{...e,authToken:{requestStatus:0}}:e})}async function kI(r,e){try{const n=await CI(r,e),a={...e,authToken:n};return await ph(r.appConfig,a),n}catch(n){if(C_(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await z_(r.appConfig);else{const a={...e,authToken:{requestStatus:0}};await ph(r.appConfig,a)}throw n}}function q_(r){return r!==void 0&&r.registrationStatus===2}function DI(r){return r.requestStatus===2&&!OI(r)}function OI(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+lI}function MI(r){const e={requestStatus:1,requestTime:Date.now()};return{...r,authToken:e}}function VI(r){return r.requestStatus===1&&r.requestTime+T_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LI(r){const e=r,{installationEntry:n,registrationPromise:a}=await ap(e);return a?a.catch(console.error):ip(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PI(r,e=!1){const n=r;return await zI(n),(await ip(n,e)).token}async function zI(r){const{registrationPromise:e}=await ap(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(r){if(!r||!r.options)throw c0("App Configuration");if(!r.name)throw c0("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!r.options[n])throw c0(n);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function c0(r){return Ki.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="installations",qI="installations-internal",BI=r=>{const e=r.getProvider("app").getImmediate(),n=UI(e),a=Wi(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:a,_delete:()=>Promise.resolve()}},HI=r=>{const e=r.getProvider("app").getImmediate(),n=Wi(e,B_).getImmediate();return{getId:()=>LI(n),getToken:o=>PI(n,o)}};function FI(){vr(new qs(B_,BI,"PUBLIC")),vr(new qs(qI,HI,"PRIVATE"))}FI();Ss(j_,sp);Ss(j_,sp,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh="analytics",GI="firebase_id",$I="origin",QI=60*1e3,KI="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",lp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn=new wh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},is=new Yi("analytics","Analytics",XI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(r){if(!r.startsWith(lp)){const e=is.create("invalid-gtag-resource",{gtagURL:r});return Vn.warn(e.message),""}return r}function H_(r){return Promise.all(r.map(e=>e.catch(n=>n)))}function WI(r,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(r,e)),n}function ZI(r,e){const n=WI("firebase-js-sdk-policy",{createScriptURL:YI}),a=document.createElement("script"),o=`${lp}?l=${r}&id=${e}`;a.src=n?n==null?void 0:n.createScriptURL(o):o,a.async=!0,document.head.appendChild(a)}function JI(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function eR(r,e,n,a,o,u){const f=a[o];try{if(f)await e[f];else{const x=(await H_(n)).find(p=>p.measurementId===o);x&&await e[x.appId]}}catch(g){Vn.error(g)}r("config",o,u)}async function tR(r,e,n,a,o){try{let u=[];if(o&&o.send_to){let f=o.send_to;Array.isArray(f)||(f=[f]);const g=await H_(n);for(const x of f){const p=g.find(w=>w.measurementId===x),_=p&&e[p.appId];if(_)u.push(_);else{u=[];break}}}u.length===0&&(u=Object.values(e)),await Promise.all(u),r("event",a,o||{})}catch(u){Vn.error(u)}}function nR(r,e,n,a){async function o(u,...f){try{if(u==="event"){const[g,x]=f;await tR(r,e,n,g,x)}else if(u==="config"){const[g,x]=f;await eR(r,e,n,a,g,x)}else if(u==="consent"){const[g,x]=f;r("consent",g,x)}else if(u==="get"){const[g,x,p]=f;r("get",g,x,p)}else if(u==="set"){const[g]=f;r("set",g)}else r(u,...f)}catch(g){Vn.error(g)}}return o}function sR(r,e,n,a,o){let u=function(...f){window[a].push(arguments)};return window[o]&&typeof window[o]=="function"&&(u=window[o]),window[o]=nR(u,r,e,n),{gtagCore:u,wrappedGtag:window[o]}}function rR(r){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(lp)&&n.src.includes(r))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=30,iR=1e3;class lR{constructor(e={},n=iR){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const F_=new lR;function oR(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function cR(r){var f;const{appId:e,apiKey:n}=r,a={method:"GET",headers:oR(n)},o=KI.replace("{app-id}",e),u=await fetch(o,a);if(u.status!==200&&u.status!==304){let g="";try{const x=await u.json();(f=x.error)!=null&&f.message&&(g=x.error.message)}catch{}throw is.create("config-fetch-failed",{httpStatus:u.status,responseMessage:g})}return u.json()}async function uR(r,e=F_,n){const{appId:a,apiKey:o,measurementId:u}=r.options;if(!a)throw is.create("no-app-id");if(!o){if(u)return{measurementId:u,appId:a};throw is.create("no-api-key")}const f=e.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},g=new fR;return setTimeout(async()=>{g.abort()},QI),G_({appId:a,apiKey:o,measurementId:u},f,g,e)}async function G_(r,{throttleEndTimeMillis:e,backoffCount:n},a,o=F_){var g;const{appId:u,measurementId:f}=r;try{await dR(a,e)}catch(x){if(f)return Vn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${x==null?void 0:x.message}]`),{appId:u,measurementId:f};throw x}try{const x=await cR(r);return o.deleteThrottleMetadata(u),x}catch(x){const p=x;if(!hR(p)){if(o.deleteThrottleMetadata(u),f)return Vn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:u,measurementId:f};throw x}const _=Number((g=p==null?void 0:p.customData)==null?void 0:g.httpStatus)===503?Kb(n,o.intervalMillis,aR):Kb(n,o.intervalMillis),w={throttleEndTimeMillis:Date.now()+_,backoffCount:n+1};return o.setThrottleMetadata(u,w),Vn.debug(`Calling attemptFetch again in ${_} millis`),G_(r,w,a,o)}}function dR(r,e){return new Promise((n,a)=>{const o=Math.max(e-Date.now(),0),u=setTimeout(n,o);r.addEventListener(()=>{clearTimeout(u),a(is.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function hR(r){if(!(r instanceof Fs)||!r.customData)return!1;const e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}class fR{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function mR(r,e,n,a,o){if(o&&o.global){r("event",n,a);return}else{const u=await e,f={...a,send_to:u};r("event",n,f)}}async function gR(r,e,n,a){if(a&&a.global){const o={};for(const u of Object.keys(n))o[`user_properties.${u}`]=n[u];return r("set",o),Promise.resolve()}else{const o=await e;r("config",o,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(){if(sw())try{await rw()}catch(r){return Vn.warn(is.create("indexeddb-unavailable",{errorInfo:r==null?void 0:r.toString()}).message),!1}else return Vn.warn(is.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function xR(r,e,n,a,o,u,f){const g=uR(r);g.then(E=>{n[E.measurementId]=E.appId,r.options.measurementId&&E.measurementId!==r.options.measurementId&&Vn.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${E.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(E=>Vn.error(E)),e.push(g);const x=pR().then(E=>{if(E)return a.getId()}),[p,_]=await Promise.all([g,x]);rR(u)||ZI(u,p.measurementId),o("js",new Date);const w=(f==null?void 0:f.config)??{};return w[$I]="firebase",w.update=!0,_!=null&&(w[GI]=_),o("config",p.measurementId,w),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.app=e}_delete(){return delete Yl[this.app.options.appId],Promise.resolve()}}let Yl={},E1=[];const j1={};let u0="dataLayer",bR="gtag",T1,op,S1=!1;function vR(){const r=[];if(nw()&&r.push("This is a browser extension environment."),fj()||r.push("Cookies are not available."),r.length>0){const e=r.map((a,o)=>`(${o+1}) ${a}`).join(" "),n=is.create("invalid-analytics-context",{errorInfo:e});Vn.warn(n.message)}}function wR(r,e,n){vR();const a=r.options.appId;if(!a)throw is.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)Vn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw is.create("no-api-key");if(Yl[a]!=null)throw is.create("already-exists",{id:a});if(!S1){JI(u0);const{wrappedGtag:u,gtagCore:f}=sR(Yl,E1,j1,u0,bR);op=u,T1=f,S1=!0}return Yl[a]=xR(r,E1,j1,e,T1,u0,n),new yR(r)}function _R(r=lg()){r=qt(r);const e=Wi(r,xh);return e.isInitialized()?e.getImmediate():NR(r)}function NR(r,e={}){const n=Wi(r,xh);if(n.isInitialized()){const o=n.getImmediate();if(ni(e,n.getOptions()))return o;throw is.create("already-initialized")}return n.initialize({options:e})}function ER(r,e,n){r=qt(r),gR(op,Yl[r.app.options.appId],e,n).catch(a=>Vn.error(a))}function jR(r,e,n,a){r=qt(r),mR(op,Yl[r.app.options.appId],e,n,a).catch(o=>Vn.error(o))}const A1="@firebase/analytics",C1="0.10.19";function TR(){vr(new qs(xh,(e,{options:n})=>{const a=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return wR(a,o,n)},"PUBLIC")),vr(new qs("analytics-internal",r,"PRIVATE")),Ss(A1,C1),Ss(A1,C1,"esm2020");function r(e){try{const n=e.getProvider(xh).getImmediate();return{logEvent:(a,o,u)=>jR(n,a,o,u),setUserProperties:(a,o)=>ER(n,a,o)}}catch(n){throw is.create("interop-component-reg-failed",{reason:n})}}}TR();const SR={apiKey:"AIzaSyBFr--na-wJGHMdev7vUhPufAJHlyP3GNQ",authDomain:"school-9d3db.firebaseapp.com",projectId:"school-9d3db",storageBucket:"school-9d3db.firebasestorage.app",messagingSenderId:"429673694272",appId:"1:429673694272:web:43390c4fdfa5bce4744ba5",measurementId:"G-8YSDYV9VBN"},cp=ow(SR),Rc=YA(cp),Me=KC(cp);_R(cp);const $_=M.createContext(void 0),AR=({children:r})=>{const[e,n]=M.useState(null),[a,o]=M.useState(!0),u=(x,p)=>{const _=`teacher-${p.split("@")[0]}`;let w="https://img.freepik.com/free-vector/teacher-standing-near-blackboard_23-2147517173.jpg";x.includes("")?w="https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P":x.includes("")&&(w="https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj"),n({uid:_,email:p,displayName:x,role:"teacher",avatar:w,gender:"male"}),localStorage.setItem("isTeacher","true"),localStorage.setItem("teacherName",x),localStorage.setItem("teacherEmail",p)},f=async()=>{try{(e==null?void 0:e.role)==="teacher"?(localStorage.removeItem("isTeacher"),localStorage.removeItem("teacherName"),localStorage.removeItem("teacherEmail"),n(null)):await zS(Rc)}catch(x){console.error("Logout error",x)}},g=async x=>{if(e)try{let p={...x};if(x.firstName!==void 0||x.lastName!==void 0){const _=x.firstName!==void 0?x.firstName:e.firstName||"",w=x.lastName!==void 0?x.lastName:e.lastName||"";p.displayName=`${_} ${w}`.trim()}if(n(_=>_?{..._,...p}:null),e.role!=="teacher"){const _=ls(Me,"users",e.uid);await np(_,p,{merge:!0})}}catch(p){throw console.error("Error updating profile:",p),p}};return M.useEffect(()=>{const x=localStorage.getItem("isTeacher")==="true";if(x){const _=localStorage.getItem("teacherName")||"",w=localStorage.getItem("teacherEmail")||"teacher@etqan.edu";u(_,w),o(!1);return}const p=PS(Rc,async _=>{if(_)try{const w=ls(Me,"users",_.uid),E=await w_(w);if(E.exists()){const O=E.data();(_.email==="q@gmail.com"||_.email==="yazan22@gmail.com")&&(O.totalXP=25e3,O.quizzesCompleted=500),n({uid:_.uid,email:_.email||"",displayName:O.displayName||`${O.firstName||""} ${O.lastName||""}`.trim()||"Student",firstName:O.firstName,lastName:O.lastName,age:O.age,role:O.role,grade:O.grade,phone:O.phone,address:O.address,school:O.school,gender:O.gender,avatar:O.avatar,profileBackground:O.profileBackground,genderChanged:O.genderChanged})}else n({uid:_.uid,email:_.email||"",displayName:"User",role:"student"})}catch(w){console.error("Error fetching user profile:",w)}else x||n(null);o(!1)});return()=>p()},[]),i.jsx($_.Provider,{value:{user:e,loading:a,logout:f,setTeacherSession:u,updateUserProfile:g},children:!a&&r})},Cs=()=>{const r=M.useContext($_);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},d0=[{id:"teacher-yazan",name:".   "},{id:"teacher-majd",name:".   "}],CR=({onLoginClick:r,onNavigate:e,onLogoutClick:n})=>{var ie;const[a,o]=M.useState(!1),[u,f]=M.useState(!1),{user:g}=Cs(),[x,p]=M.useState(!1),[_,w]=M.useState([]),[E,O]=M.useState(0),z=M.useRef(null),[ne,Q]=M.useState(!1),[ce,fe]=M.useState(""),[oe,we]=M.useState("teacher-yazan"),[he,B]=M.useState(!1),[S,T]=M.useState(!1);M.useEffect(()=>{const de=()=>{f(window.scrollY>10)};return window.addEventListener("scroll",de),()=>window.removeEventListener("scroll",de)},[]),M.useEffect(()=>{const de=q=>{z.current&&!z.current.contains(q.target)&&p(!1)};return document.addEventListener("mousedown",de),()=>document.removeEventListener("mousedown",de)},[]),M.useEffect(()=>{if(!g){w([]);return}const de=Qt(nt(Me,"notifications"),Qa("createdAt","desc"),_c(50)),q=N_(de,le=>{const Z=[];let Ee=0,Ie=[];try{Ie=JSON.parse(localStorage.getItem(`viewed_notifs_${g.uid}`)||"[]")}catch(D){console.error("Error parsing viewed notifications",D)}le.forEach(D=>{const Y=D.data();if(Y.recipientId==="all"||Y.recipientId===g.uid){let P=!1;Y.recipientId==="all"?P=Ie.includes(D.id):P=Y.read===!0,P||Ee++,Z.push({id:D.id,...Y,read:P,createdAt:Y.createdAt})}}),w(Z),O(Ee)});return()=>q()},[g]);const A=async()=>{if(p(!x),!x&&E>0){const de=_,q=de.filter(Z=>Z.recipientId==="all").map(Z=>Z.id);if(q.length>0)try{const Z=JSON.parse(localStorage.getItem(`viewed_notifs_${g==null?void 0:g.uid}`)||"[]"),Ee=[...new Set([...Z,...q])];localStorage.setItem(`viewed_notifs_${g==null?void 0:g.uid}`,JSON.stringify(Ee))}catch(Z){console.error("Error updating local storage for notifications",Z)}de.filter(Z=>Z.recipientId!=="all"&&!Z.read).forEach(async Z=>{try{const Ee=ls(Me,"notifications",Z.id);await su(Ee,{read:!0})}catch(Ee){console.error("Error marking personal notification read:",Ee)}}),O(0),w(Z=>Z.map(Ee=>({...Ee,read:!0})))}},R=async()=>{if(ce.trim()){B(!0);try{const de=d0.find(q=>q.id===oe);await Kn(nt(Me,"contact_messages"),{studentId:g==null?void 0:g.uid,studentName:(g==null?void 0:g.displayName)||"",studentEmail:g==null?void 0:g.email,message:ce,teacherId:oe,teacherName:de==null?void 0:de.name,createdAt:In(),read:!1}),await Kn(nt(Me,"notifications"),{recipientId:oe,title:`   ${(g==null?void 0:g.displayName)||""}`,message:ce.substring(0,100)+(ce.length>100?"...":""),type:"message",senderName:g==null?void 0:g.displayName,senderId:g==null?void 0:g.uid,createdAt:In(),read:!1}),alert("    !"),fe(""),Q(!1),T(!1)}catch(de){console.error(de),alert("   ")}finally{B(!1)}}},I=de=>{switch(de){case"quiz":return i.jsx(Mn,{className:"w-4 h-4 text-yellow-400"});case"file":return i.jsx(Ts,{className:"w-4 h-4 text-blue-400"});case"explanation":return i.jsx(Fc,{className:"w-4 h-4 text-purple-400"});case"message":return i.jsx(hr,{className:"w-4 h-4 text-emerald-400"});default:return i.jsx(gc,{className:"w-4 h-4 text-gray-400"})}},L=de=>{if(!de)return"";const q=de.toDate?de.toDate():new Date(de.seconds*1e3);return isNaN(q.getTime())?"":q.toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(",","")},C=de=>"cursor-pointer px-4 py-2 rounded-xl transition-all font-bold text-sm flex items-center gap-2 text-gray-300 hover:text-white hover:bg-gray-800";return i.jsxs(i.Fragment,{children:[i.jsxs("nav",{className:`fixed w-full z-50 transition-all duration-300 ${u?"bg-gray-950/90 backdrop-blur-md border-b border-white/5 py-3 shadow-xl":"bg-transparent py-5"}`,children:[i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e("HOME"),children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/13x8Gorb7y4H2qcQ1LVJtHY9-RoUhxg2z",alt:"Logo",className:"w-10 h-10 rounded-full object-cover border-2 border-emerald-500/50"}),i.jsx("span",{className:"text-2xl font-black text-white tracking-tight",children:""})]}),i.jsxs("div",{className:"hidden md:flex items-center bg-gray-900/50 backdrop-blur-sm p-1.5 rounded-2xl border border-white/5",children:[i.jsxs("button",{onClick:()=>e("HOME"),className:C(),children:[i.jsx(Gd,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("QUIZZES"),className:C(),children:[i.jsx(Mn,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("LESSONS"),className:C(),children:[i.jsx(Ts,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("LESSONS_EXPLANATIONS"),className:C(),children:[i.jsx(y0,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("CONTACT_TEACHER"),className:C(),children:[i.jsx(Qd,{className:"w-4 h-4"}),"  "]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[g&&i.jsxs("div",{className:"relative",ref:z,children:[i.jsxs("button",{onClick:A,className:"w-8 h-8 p-1.5 rounded-full bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white transition-all relative border border-gray-700 flex items-center justify-center",children:[i.jsx(gc,{className:`w-4 h-4 ${E>0?"animate-swing":""}`}),E>0&&i.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[9px] font-bold flex items-center justify-center rounded-full border-2 border-gray-900 animate-pulse",children:E>9?"+9":E})]}),x&&i.jsxs("div",{className:"absolute top-full left-0 md:left-auto md:right-0 mt-3 w-80 bg-gray-900 border border-gray-700 rounded-2xl shadow-2xl overflow-hidden animate-fade-in-up origin-top-right z-[60]",children:[i.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-gray-900/50 backdrop-blur-sm",children:[i.jsxs("h3",{className:"font-bold text-white text-sm flex items-center gap-2",children:[i.jsx(gc,{className:"w-4 h-4 text-emerald-400"}),""]}),g.role==="student"&&i.jsxs("button",{onClick:()=>{p(!1),Q(!0)},className:"text-xs bg-emerald-900/30 text-emerald-400 px-3 py-1.5 rounded-lg hover:bg-emerald-900/50 transition-colors font-bold border border-emerald-500/30 flex items-center gap-1",children:[i.jsx(hr,{className:"w-3 h-3"})," "]})]}),i.jsx("div",{className:"max-h-80 overflow-y-auto custom-scrollbar",children:_.length===0?i.jsxs("div",{className:"p-12 text-center text-gray-500 text-sm flex flex-col items-center",children:[i.jsx(gc,{className:"w-10 h-10 mb-3 opacity-20"}),i.jsx("p",{children:"   "})]}):i.jsx("div",{className:"divide-y divide-gray-800",children:_.map(de=>i.jsxs("div",{className:`p-4 hover:bg-gray-800/50 transition-colors relative ${de.read?"":"bg-emerald-900/10"}`,children:[!de.read&&i.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-emerald-500 rounded-full"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"mt-1 shrink-0 bg-gray-800 p-1.5 w-8 h-8 flex items-center justify-center rounded-full border border-gray-700",children:I(de.type)}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:`text-sm font-bold mb-1 ${de.read?"text-gray-400":"text-white"}`,children:de.title}),i.jsx("p",{className:"text-xs text-gray-500 leading-relaxed line-clamp-2",children:de.message}),i.jsx("span",{className:"text-[10px] text-gray-600 mt-2 block flex items-center gap-1",children:L(de.createdAt)})]})]})]},de.id))})})]})]}),g?i.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[i.jsxs("div",{className:"relative group",children:[i.jsxs("button",{onClick:()=>e("PROFILE"),className:"flex items-center gap-2 bg-gray-800 hover:bg-gray-700 text-white pr-1 pl-4 py-1 rounded-full transition-all border border-gray-700 hover:border-gray-600",children:[g.avatar?i.jsx("img",{src:g.avatar,alt:"Avatar",className:"w-8 h-8 rounded-full object-cover border border-gray-600"}):i.jsx("div",{className:"w-8 h-8 bg-emerald-600 rounded-full flex items-center justify-center text-xs font-bold",children:g.displayName.charAt(0)}),i.jsx("span",{className:"text-sm font-bold max-w-[100px] truncate",children:g.displayName})]}),i.jsxs("div",{className:"absolute top-full mt-2 left-1/2 -translate-x-1/2 w-max bg-gray-900 text-emerald-400 text-[10px] font-bold px-3 py-1.5 rounded-lg border border-gray-700 opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none shadow-xl z-50",children:["   ",i.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 border-4 border-transparent border-b-gray-900"})]})]}),i.jsx("button",{onClick:n,className:"p-2 bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white rounded-full transition-all border border-red-500/20",title:" ",children:i.jsx($d,{className:"w-5 h-5"})})]}):i.jsxs("button",{onClick:r,className:"hidden md:flex bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-2.5 rounded-xl font-bold transition-all shadow-lg shadow-emerald-900/20 items-center gap-2",children:[i.jsx(N0,{className:"w-4 h-4"}),""]}),i.jsx("button",{onClick:()=>o(!a),className:"md:hidden p-2.5 text-gray-300 hover:text-white bg-gray-800 rounded-xl hover:bg-gray-700 transition-colors border border-gray-700",children:a?i.jsx(js,{className:"w-6 h-6"}):i.jsx(Z4,{className:"w-6 h-6"})})]})]})}),a&&i.jsx("div",{className:"md:hidden absolute top-full left-0 w-full bg-gray-950 border-b border-white/5 shadow-2xl animate-fade-in-up h-[calc(100vh-70px)] overflow-y-auto",children:i.jsxs("div",{className:"px-4 py-6 space-y-3",children:[g&&i.jsxs("div",{className:"mb-2",children:[i.jsx("p",{className:"text-[10px] text-emerald-500 font-bold px-4 mb-1",children:"   "}),i.jsxs("button",{onClick:()=>{e("PROFILE"),o(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-emerald-400 hover:bg-emerald-900/20 font-bold transition-colors border border-emerald-900/30",children:[i.jsx(c4,{className:"w-5 h-5"})," ",g.displayName]})]}),i.jsxs("button",{onClick:()=>{e("HOME"),o(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(Gd,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("TEACHER_CV"),o(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(ag,{className:"w-5 h-5"}),"   "]}),i.jsxs("button",{onClick:()=>{e("QUIZZES"),o(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(Mn,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("LESSONS"),o(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(Ts,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("LESSONS_EXPLANATIONS"),o(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(y0,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("CONTACT_TEACHER"),o(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(Qd,{className:"w-5 h-5"}),"  "]}),i.jsxs("button",{onClick:()=>{e("PLATFORM_DEFINITION"),o(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(O4,{className:"w-5 h-5"}),"  "]}),i.jsx("div",{className:"border-t border-gray-800 my-2 pt-2",children:g?i.jsxs("button",{onClick:()=>{n(),o(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-400 hover:bg-red-900/20 font-bold transition-colors",children:[i.jsx($d,{className:"w-5 h-5"}),"  "]}):i.jsxs("button",{onClick:()=>{r(),o(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl bg-emerald-600 text-white font-bold justify-center shadow-lg",children:[i.jsx(N0,{className:"w-5 h-5"}),"  "]})})]})})]}),ne&&i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>{Q(!1),T(!1)}}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-md relative shadow-2xl p-6 animate-fade-in-up border border-white/10",children:[i.jsx("button",{onClick:()=>{Q(!1),T(!1)},className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-white",children:i.jsx(js,{className:"w-5 h-5"})}),S?i.jsxs("div",{className:"text-center py-6 animate-fade-in",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-400 border border-emerald-500/20",children:i.jsx($r,{className:"w-8 h-8"})}),i.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),i.jsxs("p",{className:"text-gray-400 text-sm mb-8",children:["        ",i.jsx("span",{className:"text-emerald-400 font-bold",children:(ie=d0.find(de=>de.id===oe))==null?void 0:ie.name}),""]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:R,disabled:he,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all shadow-lg shadow-emerald-900/20",children:he?i.jsx(At,{className:"w-5 h-5 animate-spin"}):" "}),i.jsx("button",{onClick:()=>T(!1),disabled:he,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-all border border-gray-700",children:""})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-400 border border-emerald-500/20",children:i.jsx(hr,{className:"w-8 h-8"})}),i.jsx("h3",{className:"text-xl font-black text-white",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"     "})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-2",children:" "}),i.jsx("div",{className:"space-y-2",children:d0.map(de=>i.jsxs("div",{onClick:()=>we(de.id),className:`p-3 rounded-xl border-2 cursor-pointer transition-all flex items-center justify-between ${oe===de.id?"border-emerald-500 bg-emerald-900/20":"border-gray-700 bg-gray-800 hover:bg-gray-750"}`,children:[i.jsx("span",{className:`text-sm font-bold ${oe===de.id?"text-emerald-400":"text-gray-300"}`,children:de.name}),oe===de.id&&i.jsx(Xr,{className:"w-4 h-4 text-emerald-500"})]},de.id))})]}),i.jsx("textarea",{value:ce,onChange:de=>fe(de.target.value),placeholder:"",className:"w-full h-32 bg-gray-800 border border-gray-700 rounded-xl p-4 text-white outline-none focus:border-emerald-500 mb-4 resize-none focus:ring-2 focus:ring-emerald-500/20 transition-all"}),i.jsxs("button",{onClick:()=>{ce.trim()&&T(!0)},disabled:!ce.trim(),className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-emerald-900/30",children:[i.jsx(Xa,{className:"w-5 h-5"})," "]})]})]})]})]})},IR=({onStartQuiz:r,onLoginClick:e,onNavigate:n})=>{const{user:a}=Cs(),[o,u]=M.useState(!1),f=()=>{u(!0),setTimeout(()=>u(!1),3e3)},g=()=>{a?n("QUIZZES"):f()},x=()=>{a?n("LESSONS"):f()},p=()=>{n("LESSONS_EXPLANATIONS")},_=()=>{n("CONTACT_TEACHER")};return i.jsxs("section",{className:"relative w-full min-h-screen flex items-center justify-center bg-transparent overflow-hidden animate-fade-in transition-colors duration-300 pt-32 md:pt-48",children:[o&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center pointer-events-none px-4",children:i.jsxs("div",{className:"bg-red-900/90 border border-red-800 shadow-xl rounded-xl p-4 flex items-center gap-3 relative w-full max-w-md animate-fade-in-up pointer-events-auto backdrop-blur-md",children:[i.jsx("div",{className:"bg-red-800 p-2 rounded-full shrink-0",children:i.jsx(Hd,{className:"w-6 h-6 text-red-200"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-bold text-white text-sm",children:"  "}),i.jsx("p",{className:"text-gray-300 text-xs mt-1",children:"        ."})]}),i.jsx("button",{onClick:()=>u(!1),className:"absolute top-2 left-2 text-gray-300 hover:text-white",children:i.jsx(js,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>{u(!1),e()},className:"mr-auto bg-red-600 text-white text-xs font-bold px-3 py-1.5 rounded-lg hover:bg-red-700 transition-colors shrink-0",children:""})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 w-full relative z-10 flex flex-col items-center text-center",children:[i.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-black text-white leading-[1.2] lg:leading-[1.15] mb-6 drop-shadow-lg",children:["  ",i.jsx("br",{}),i.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300 inline-block relative pb-2",children:[" ",i.jsx("svg",{className:"absolute w-full h-3 -bottom-1 right-0 text-emerald-900/50 -z-10",viewBox:"0 0 100 10",preserveAspectRatio:"none",children:i.jsx("path",{d:"M0 5 Q 50 10 100 5",stroke:"currentColor",strokeWidth:"8",fill:"none"})})]}),i.jsx("br",{}),"  "]}),i.jsxs("p",{className:"text-lg md:text-xl text-gray-300 leading-relaxed max-w-2xl mx-auto mb-10",children:["      ",i.jsx("span",{className:"text-emerald-400 font-black text-2xl px-1 relative inline-block",children:"   "}),"."]}),i.jsxs("div",{className:"flex flex-col w-full max-w-md gap-3 justify-center",children:[i.jsxs("button",{onClick:g,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(Mn,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:" "})]}),i.jsx(Ua,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsxs("button",{onClick:p,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(Fc,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:" "})]}),i.jsx(Ua,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsxs("button",{onClick:x,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(Ts,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:" "})]}),i.jsx(Ua,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsxs("button",{onClick:_,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(Qd,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:"  "})]}),i.jsx(Ua,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsx("div",{className:"w-full mt-2",children:a?i.jsxs("button",{onClick:()=>n("PROFILE"),className:"w-full bg-gray-800/80 backdrop-blur-sm border-2 border-emerald-900 text-emerald-400 hover:bg-emerald-900/20 text-base font-bold py-3 px-5 rounded-xl transition-all flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:[i.jsx(Cn,{className:"w-5 h-5"})," "]}):i.jsxs("button",{onClick:e,className:"w-full bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-orange-500/40 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-orange-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(N0,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:"  "})]}),i.jsx(Ua,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]})})]})]})]})},h0=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),f0=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),RR=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M12 2C6.48 2 2 6.03 2 11c0 2.87 1.56 5.47 4 7.1V22l3.57-1.96c.78.22 1.6.34 2.43.34 5.52 0 10-4.03 10-9s-4.48-9-10-9zm1.06 12.07l-2.6-2.78-5.07 2.78 5.58-5.93 2.62 2.78 5.05-2.78-5.58 5.93z"})}),I1=[{id:1,name:" ",text:"      . ",platform:"whatsapp",time:"10:30 "},{id:2,name:" ",text:"     . ",platform:"messenger",time:"11:15 "},{id:3,name:" ",text:"    .",platform:"telegram",time:"09:45 "},{id:4,name:" ",text:"      .",platform:"whatsapp",time:"02:20 "},{id:5,name:" ",text:"        .",platform:"messenger",time:"04:10 "},{id:6,name:" ",text:"       . ",platform:"telegram",time:"08:00 "},{id:7,name:"  ",text:"        . ",platform:"whatsapp",time:"01:30 "},{id:8,name:" ",text:"       .",platform:"messenger",time:"06:45 "},{id:9,name:" ",text:"      .",platform:"telegram",time:"03:15 "},{id:10,name:" ",text:"      ! ",platform:"whatsapp",time:"12:00 "},{id:11,name:" ",text:"   .  . ",platform:"messenger",time:"07:30 "},{id:12,name:"  ",text:"       .",platform:"telegram",time:"10:10 "},{id:13,name:" ",text:"     .",platform:"whatsapp",time:"05:50 "},{id:14,name:" ",text:"     . ",platform:"messenger",time:"09:20 "},{id:15,name:" ",text:"      . ",platform:"telegram",time:"08:45 "}],kR=({onNavigate:r})=>{const[e,n]=M.useState([0,1,2]),[a,o]=M.useState(!0);M.useEffect(()=>{const g=setInterval(()=>{o(!1),setTimeout(()=>{const x=[];for(;x.length<3;){const p=Math.floor(Math.random()*I1.length);x.includes(p)||x.push(p)}n(x),o(!0)},500)},5e3);return()=>clearInterval(g)},[]);const u=g=>{switch(g){case"whatsapp":return i.jsx(h0,{className:"w-5 h-5 text-white"});case"messenger":return i.jsx(RR,{className:"w-5 h-5 text-white"});case"telegram":return i.jsx(f0,{className:"w-5 h-5 text-white"});default:return null}},f=g=>{switch(g){case"whatsapp":return"bg-green-500";case"messenger":return"bg-blue-600";case"telegram":return"bg-sky-500";default:return"bg-gray-500"}};return i.jsx("section",{className:"py-20 relative overflow-hidden",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl font-black text-white mb-4 drop-shadow-md",children:" "}),i.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full shadow-[0_0_10px_rgba(16,185,129,0.5)]"}),i.jsx("p",{className:"mt-6 text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"                       ."}),i.jsx("div",{className:"mt-8 flex justify-center animate-fade-in-up delay-200",children:i.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-900/20 border border-emerald-500/30 px-5 py-2.5 rounded-full shadow-lg backdrop-blur-sm",children:[i.jsx(ti,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),i.jsx("span",{className:"text-emerald-300 font-bold text-sm",children:"   "})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl p-6 rounded-[2.5rem] border border-white/10 hover:border-emerald-500/50 transition-all group flex flex-col h-full shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[i.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-white/10 group-hover:border-emerald-500/30 group-hover:scale-105 transition-all",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",alt:".   ",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"text-center sm:text-right flex-1",children:[i.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),i.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),i.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[i.jsx(E0,{className:"w-3.5 h-3.5 text-emerald-500"}),"   - "]})]})]}),i.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[i.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),i.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[i.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(_0,{className:"w-6 h-6"})}),i.jsx("a",{href:"https://wa.me/972568401548",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(h0,{className:"w-6 h-6"})}),i.jsx("a",{href:"https://t.me/yazan1342",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(f0,{className:"w-6 h-6"})})]})]})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl p-6 rounded-[2.5rem] border border-white/10 hover:border-blue-500/50 transition-all group flex flex-col h-full shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[i.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-white/10 group-hover:border-blue-500/30 group-hover:scale-105 transition-all",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",alt:".   ",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"text-center sm:text-right flex-1",children:[i.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),i.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),i.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[i.jsx(E0,{className:"w-3.5 h-3.5 text-blue-500"}),"   - "]})]})]}),i.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[i.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),i.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[i.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(_0,{className:"w-6 h-6"})}),i.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(h0,{className:"w-6 h-6"})}),i.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(f0,{className:"w-6 h-6"})})]})]})]})]}),i.jsx("div",{className:"text-center mb-12",children:i.jsxs("button",{onClick:()=>r("TEACHER_CV"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white text-xl font-bold px-10 py-5 rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(16,185,129,0.4)] transition-all transform hover:-translate-y-1 border border-emerald-500/50",children:[i.jsx(ro,{className:"w-6 h-6"}),"  ",i.jsx(Bd,{className:"w-6 h-6"})]})}),i.jsxs("div",{className:"mb-0 pt-10 border-t border-white/10",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"  "}),i.jsx("p",{className:"text-gray-400",children:"       "})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.map((g,x)=>{const p=I1[g];return i.jsx("div",{className:`transform transition-all duration-500 ${a?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:i.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-3xl p-6 shadow-lg border border-white/5 relative h-full flex flex-col hover:border-white/20 hover:bg-white/10 transition-all",children:[i.jsx("div",{className:"absolute -bottom-2 right-8 w-4 h-4 bg-white/5 border-b border-r border-white/5 transform rotate-45"}),i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-900/50 flex items-center justify-center text-emerald-300 font-bold text-lg border border-emerald-500/20",children:p.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-white",children:p.name}),i.jsx("span",{className:"text-xs text-gray-500 font-medium",children:p.time})]})]}),i.jsx("div",{className:`w-8 h-8 rounded-full ${f(p.platform)} flex items-center justify-center shadow-md ring-2 ring-black/20`,children:u(p.platform)})]}),i.jsxs("p",{className:"text-gray-300 text-base leading-relaxed font-medium",children:['"',p.text,'"']})]})},`${p.id}-${x}`)})})]})]})})},R1=({options:r,value:e,onChange:n,placeholder:a,disabled:o})=>{const[u,f]=M.useState(!1),g=M.useRef(null);M.useEffect(()=>{const p=_=>{g.current&&!g.current.contains(_.target)&&f(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const x=r.find(p=>p.value===e&&!p.isHeader);return i.jsxs("div",{className:`relative ${u?"z-[100]":"z-0"}`,ref:g,children:[i.jsxs("button",{type:"button",onClick:()=>!o&&f(!u),className:`w-full px-3 py-2.5 rounded-lg border flex justify-between items-center outline-none transition-all font-bold text-sm
            ${o?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-500 cursor-not-allowed":u?"bg-white dark:bg-gray-800 border-emerald-500 ring-1 ring-emerald-500/20 text-gray-800 dark:text-white shadow-sm":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-emerald-500 text-gray-800 dark:text-white"}
         `,children:[i.jsx("span",{className:`truncate ${x?"":"text-gray-500"}`,children:x?x.label:a}),i.jsx(Hi,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${u?"rotate-180 text-emerald-500":""}`})]}),u&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar animate-fade-in p-1 z-[100]",children:r.map((p,_)=>{if(p.isHeader)return i.jsx("div",{className:"px-3 py-1.5 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-1 first:mt-0 bg-gray-100 dark:bg-gray-800 rounded-md mb-1",children:p.label},_);const w=p.value===e;return i.jsxs("div",{onClick:()=>{n(p.value),f(!1)},className:`px-3 py-2 rounded-md font-bold text-xs cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${w?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}
                   `,children:[p.label,w&&i.jsx(Xr,{className:"w-3 h-3"})]},_)})})]})},DR=({isOpen:r,onClose:e})=>{const[n,a]=M.useState("ROLE_SELECTION"),[o,u]=M.useState(!1),[f,g]=M.useState(null),[x,p]=M.useState(null),{setTeacherSession:_}=Cs(),[w,E]=M.useState(""),[O,z]=M.useState(""),[ne,Q]=M.useState(""),[ce,fe]=M.useState(""),[oe,we]=M.useState(""),[he,B]=M.useState(""),[S,T]=M.useState(""),[A,R]=M.useState(""),[I,L]=M.useState(""),[C,ie]=M.useState("male"),[de,q]=M.useState(""),[le,Z]=M.useState("");if(!r)return null;const Ee=()=>{a("ROLE_SELECTION"),g(null),p(null),E(""),z(""),Q(""),fe(""),we(""),B(""),T(""),R(""),L(""),ie("male"),Z(""),q(""),u(!1)},Ie=()=>{Ee(),e()},D=ft=>{ft.preventDefault(),g(null),u(!0),setTimeout(()=>{w==="2001"?(_(".   ","yazan@etqan.edu"),p("   !"),setTimeout(()=>Ie(),1500)):w==="2003"?(_(".   ","majd@etqan.edu"),p("    !"),setTimeout(()=>Ie(),1500)):(g("   "),u(!1))},800)},Y=async ft=>{ft.preventDefault(),g(null),u(!0);try{await MS(Rc,O.trim(),ne),p("   !"),setTimeout(()=>Ie(),1500)}catch(jt){console.error(jt),g("      "),u(!1)}},P=async ft=>{ft.preventDefault(),g(null),u(!0);try{const at=(await OS(Rc,A.trim(),I)).user,mn="",os=S==="university"&&de?de:"";await np(ls(Me,"users",at.uid),{firstName:ce,lastName:oe,age:he,grade:S,gender:C,school:os,avatar:mn,profileBackground:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",email:A.trim(),role:"student",totalXP:0,quizzesCompleted:0,createdAt:new Date}),p("   !"),setTimeout(()=>Ie(),1500)}catch(jt){console.error(jt),jt.code==="auth/email-already-in-use"?g("   "):jt.code==="auth/weak-password"?g("   "):g("    .    ."),u(!1)}},W=async ft=>{ft.preventDefault(),g(null),u(!0);try{await DS(Rc,le.trim()),p("   !")}catch(jt){console.error(jt),jt.code==="auth/user-not-found"?g("    "):jt.code==="auth/invalid-email"?g("    "):jt.code==="auth/too-many-requests"?g("           ."):g("          .")}finally{u(!1)}},xe=()=>{switch(n){case"TEACHER_LOGIN":return"    ...";case"STUDENT_LOGIN":return"  ...";case"STUDENT_SIGNUP":return"   ...";case"FORGOT_PASSWORD":return"   ...";default:return" ..."}},Ae=()=>i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsx("h3",{className:"text-xl font-bold text-center mb-6 text-gray-800 dark:text-white",children:"   "}),i.jsxs("button",{onClick:()=>a("STUDENT_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-all",children:[i.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900 p-3 rounded-full ml-4 group-hover:bg-emerald-200 dark:group-hover:bg-emerald-800 transition-colors",children:i.jsx(Cn,{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),i.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"    "})]}),i.jsx(Xm,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500"})]}),i.jsxs("button",{onClick:()=>a("TEACHER_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-3 rounded-full ml-4 group-hover:bg-blue-200 dark:group-hover:bg-blue-800 transition-colors",children:i.jsx(ei,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),i.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"   "})]}),i.jsx(Xm,{className:"w-5 h-5 text-gray-300 group-hover:text-blue-500"})]})]}),Ue=()=>i.jsxs("form",{onSubmit:D,className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(qa,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:" "}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"     "})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsx("input",{type:"password",value:w,onChange:ft=>E(ft.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 dark:focus:ring-blue-900 outline-none transition-all text-center text-lg tracking-widest bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0})]}),i.jsx("button",{type:"submit",className:"mt-4 w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 dark:shadow-none",children:""})]}),rt=()=>i.jsxs("form",{onSubmit:Y,className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:" !   "})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"email",value:O,onChange:ft=>z(ft.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),i.jsx(hr,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"password",value:ne,onChange:ft=>Q(ft.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0}),i.jsx(qa,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]}),i.jsx("div",{className:"text-left",children:i.jsx("button",{type:"button",onClick:()=>a("FORGOT_PASSWORD"),className:"text-xs text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})})]}),i.jsx("button",{type:"submit",disabled:o,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:" "}),i.jsx("div",{className:"mt-4 text-center",children:i.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:["   "," ",i.jsx("button",{type:"button",onClick:()=>a("STUDENT_SIGNUP"),className:"text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})]})})]}),Ce=()=>{const ft=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(at=>({label:` ${at}`,value:at.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"  ",value:"English Major - QOU"},{label:" ",value:"university"}],jt=[{label:"",value:"male"},{label:"",value:"female"}];return i.jsxs("form",{onSubmit:P,className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"   "}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"   "})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"text",value:ce,onChange:at=>fe(at.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"text",value:oe,onChange:at=>we(at.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),i.jsx("input",{type:"number",value:he,onChange:at=>B(at.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),i.jsx(R1,{options:jt,value:C,onChange:at=>ie(at),placeholder:" "})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 block mb-1",children:" "}),i.jsx(R1,{options:ft,value:S,onChange:at=>T(at),placeholder:"  / "})]}),S==="university"&&i.jsxs("div",{className:"space-y-1 animate-fade-in",children:[i.jsx("label",{className:"text-xs font-bold text-blue-400 block mb-1",children:"  / "}),i.jsx("input",{type:"text",value:de,onChange:at=>q(at.target.value),placeholder:":   - ",className:"w-full px-3 py-2 rounded-lg border border-blue-500/50 focus:border-blue-500 outline-none bg-blue-50 dark:bg-blue-900/10 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"email",value:A,onChange:at=>R(at.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"password",value:I,onChange:at=>L(at.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0,minLength:6})]}),i.jsx("button",{type:"submit",disabled:o,className:"mt-2 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:" "}),i.jsx("div",{className:"text-center mt-2",children:i.jsx("button",{type:"button",onClick:()=>a("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors",children:"    "})})]})},Et=()=>i.jsxs("form",{onSubmit:W,className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),i.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:["     ",i.jsx("strong",{children:""}),"  "]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"email",value:le,onChange:ft=>Z(ft.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),i.jsx(hr,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),i.jsx("button",{type:"submit",disabled:o,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:"  "}),i.jsx("div",{className:"text-center mt-4",children:i.jsxs("button",{type:"button",onClick:()=>a("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors flex items-center justify-center gap-1 mx-auto",children:[i.jsx(Bd,{className:"w-4 h-4"}),"  "]})})]});return i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300",onClick:Ie}),i.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl w-full max-w-md relative shadow-2xl overflow-visible animate-fade-in-up p-6 min-h-[400px] flex flex-col border border-gray-100 dark:border-gray-800",children:[o&&!x&&i.jsxs("div",{className:"absolute inset-0 bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm z-50 flex flex-col items-center justify-center animate-fade-in rounded-3xl",children:[i.jsxs("div",{className:"relative mb-6",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-200 dark:bg-emerald-900 rounded-full animate-ping opacity-30 duration-1000"}),i.jsx("div",{className:"relative w-20 h-20 bg-emerald-50 dark:bg-emerald-900/50 rounded-full flex items-center justify-center border border-emerald-100 dark:border-emerald-800 shadow-inner",children:i.jsx(At,{className:"w-10 h-10 text-emerald-600 dark:text-emerald-400 animate-spin"})})]}),i.jsx("h4",{className:"text-lg font-black text-gray-800 dark:text-white mb-2 tracking-tight animate-pulse",children:xe()}),i.jsx("p",{className:"text-gray-400 text-xs font-medium",children:"   "})]}),i.jsx("button",{onClick:Ie,disabled:o,className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 disabled:opacity-50",children:i.jsx(js,{className:"w-5 h-5"})}),n!=="ROLE_SELECTION"&&!x&&n!=="FORGOT_PASSWORD"&&i.jsxs("button",{onClick:()=>a("ROLE_SELECTION"),disabled:o,className:"absolute top-4 right-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 flex items-center gap-1 disabled:opacity-50",children:[i.jsx(Xm,{className:"w-5 h-5"}),i.jsx("span",{className:"text-xs font-bold",children:""})]}),i.jsx("div",{className:"mt-6 flex-1 flex flex-col justify-center",children:x?i.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mb-2 animate-[bounce_1s_infinite]",children:i.jsx(Xr,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),i.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white leading-relaxed px-4 whitespace-pre-line",children:x}),n==="FORGOT_PASSWORD"&&i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-900 rounded-xl p-4 mx-4 text-sm text-yellow-800 dark:text-yellow-200 text-right shadow-sm mt-4",children:[i.jsxs("p",{className:"font-bold flex items-center gap-2 mb-2 text-yellow-900 dark:text-yellow-100",children:[i.jsx(Hd,{className:"w-5 h-5"}),"  :"]}),i.jsxs("p",{className:"leading-relaxed",children:["         ",i.jsx("strong",{children:"    (Spam)"}),"  (Junk)."]})]}),i.jsx("button",{onClick:()=>{n==="FORGOT_PASSWORD"?(a("STUDENT_LOGIN"),p(null)):Ie()},className:"mt-8 bg-emerald-600 text-white px-10 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none transform hover:scale-105 duration-200",children:n==="FORGOT_PASSWORD"?"  ":""})]}):i.jsxs(i.Fragment,{children:[n==="ROLE_SELECTION"&&Ae(),n==="TEACHER_LOGIN"&&Ue(),n==="STUDENT_LOGIN"&&rt(),n==="STUDENT_SIGNUP"&&Ce(),n==="FORGOT_PASSWORD"&&Et(),f&&i.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 rounded-lg flex items-start gap-2 text-red-600 dark:text-red-400 text-sm animate-fade-in",children:[i.jsx(Hd,{className:"w-5 h-5 shrink-0 mt-0.5"}),i.jsx("span",{className:"font-medium",children:f})]})]})})]})]})},OR=()=>{const{user:r}=Cs(),[e,n]=M.useState(!1),[a,o]=M.useState(null),[u,f]=M.useState("MCQ"),[g,x]=M.useState({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),[p,_]=M.useState([]),[w,E]=M.useState(null),[O,z]=M.useState({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:"",generalInstruction:"",passageFontSize:"md"}),[ne,Q]=M.useState(""),[ce,fe]=M.useState(!1),[oe,we]=M.useState([]),[he,B]=M.useState(!1),[S,T]=M.useState(""),A=(P,W)=>{z(xe=>({...xe,[P]:W}))},R=(P,W)=>{const xe=[...O.options];xe[P]=W,z(Ae=>({...Ae,options:xe}))},I=()=>{if(!O.question.trim()){alert("   ");return}if((u==="MCQ"||u==="READING")&&O.options.some(xe=>!xe.trim())){alert("   ");return}if(u==="READING"&&!O.passageContent.trim()){alert("   ");return}if(u==="REORDER"&&!ne.trim()){alert("    ");return}let P=[];if(u==="TF")P=["",""];else if(u==="REORDER"){if(P=ne.split(" ").filter(xe=>xe.trim().length>0),P.length<2){alert("       ");return}}else P=O.options;const W={id:w||Date.now(),question:O.question,options:P,correctAnswer:O.correctAnswer,explanation:O.explanation||"",type:u};u==="READING"&&(W.passageContent=O.passageContent,W.generalInstruction=O.generalInstruction,W.passageFontSize=O.passageFontSize),w?(_(p.map(xe=>xe.id===w?W:xe)),E(null)):_([...p,W]),L()},L=()=>{z({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:"",generalInstruction:"",passageFontSize:"md"}),Q(""),E(null),f("MCQ")},C=P=>{const W=p.find(xe=>xe.id===P);W&&(E(P),f(W.type||"MCQ"),W.type==="REORDER"?(Q(W.options.join(" ")),z({question:W.question,options:["","","",""],correctAnswer:W.correctAnswer,explanation:W.explanation||"",passageContent:W.passageContent||"",generalInstruction:W.generalInstruction||"",passageFontSize:W.passageFontSize||"md"})):(z({question:W.question,options:W.type==="TF"?["","","",""]:W.options.length>=4?W.options:[...W.options,...Array(4-W.options.length).fill("")],correctAnswer:W.correctAnswer,explanation:W.explanation||"",passageContent:W.passageContent||"",generalInstruction:W.generalInstruction||"",passageFontSize:W.passageFontSize||"md"}),Q("")),window.scrollTo({top:0,behavior:"smooth"}))},ie=()=>{L()},de=P=>{window.confirm("      ")&&(_(p.filter(W=>W.id!==P)),w===P&&L())},q=async()=>{if(!g.title||!g.grade){alert("     ");return}if(p.length===0){alert("     ");return}n(!0);try{const P={title:g.title,subject:g.subject,grade:g.grade,category:g.category,questions:p,createdBy:(r==null?void 0:r.uid)||"teacher",teacherName:(r==null?void 0:r.displayName)||"",description:g.description||"",duration:parseInt(g.duration)||30,questionDuration:g.questionDuration?parseInt(g.questionDuration):void 0};if(a){const W=ls(Me,"quizzes",a);await su(W,{...P,updatedAt:In()}),alert("    !")}else await Kn(nt(Me,"quizzes"),{...P,createdAt:In()}),await Kn(nt(Me,"notifications"),{recipientId:"all",title:" ",message:`   : ${g.title}  ${g.grade}`,type:"quiz",createdAt:In(),read:!1}),alert("    !");x({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),_([]),o(null),L()}catch(P){console.error("Error saving quiz:",P),alert("   ")}finally{n(!1)}},le=()=>{window.confirm("        .")&&(x({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),_([]),o(null),L())},Z=async()=>{B(!0);try{const P=Qt(nt(Me,"quizzes"),Qa("createdAt","desc")),W=await an(P);we(W.docs.map(xe=>({id:xe.id,...xe.data()})))}catch(P){console.error(P)}B(!1)},Ee=()=>{Z(),fe(!0)},Ie=P=>{p.length>0&&!window.confirm("         .")||(o(P.id||null),x({title:P.title,subject:P.subject,grade:P.grade,category:P.category||"Language",description:P.description||"",duration:P.duration?P.duration.toString():"30",questionDuration:P.questionDuration?P.questionDuration.toString():""}),_(P.questions),fe(!1),L(),window.scrollTo({top:0,behavior:"smooth"}))},D=oe.filter(P=>(P.title?P.title.toLowerCase().includes(S.toLowerCase()):!1)||(P.grade?P.grade.includes(S):!1)),Y=[{value:"sm",label:""},{value:"md",label:""},{value:"lg",label:""},{value:"xl",label:" "}];return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 pt-10 pb-28 px-4 border-b border-white/5 shadow-sm relative overflow-hidden",children:i.jsx("div",{className:"max-w-6xl mx-auto relative z-10",children:i.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsx("div",{className:"p-4 bg-blue-900/30 rounded-3xl shadow-inner border border-blue-800",children:i.jsx(Hb,{className:"w-10 h-10 text-blue-400"})}),i.jsxs("div",{className:"text-center md:text-right",children:[i.jsx("h1",{className:"text-3xl md:text-5xl font-black tracking-tight text-white mb-2",children:" "}),i.jsxs("p",{className:"text-blue-400 font-bold text-lg",children:["  ",r==null?void 0:r.displayName]})]})]}),i.jsx("div",{className:"flex gap-3",children:i.jsxs("button",{onClick:Ee,className:"bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-emerald-700 transition-colors shadow-lg",children:[i.jsx(v0,{className:"w-5 h-5"})," "]})})]})})}),i.jsx("div",{className:"max-w-6xl mx-auto px-4 -mt-16 relative z-20",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[i.jsxs("div",{className:`bg-gray-900 rounded-[2rem] shadow-xl border p-6 md:p-8 transition-all ${a?"border-blue-500 ring-2 ring-blue-900":"border-gray-700"}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-8 border-b border-gray-700 pb-4",children:[i.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[i.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:i.jsx(Mn,{className:"w-5 h-5 text-blue-400"})}),a?"  ":"  "]}),a&&i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"bg-blue-900 text-blue-300 px-3 py-1 rounded-full text-xs font-bold animate-pulse",children:" "}),i.jsx("button",{onClick:le,className:"text-red-500 hover:bg-red-900/20 px-2 rounded",children:i.jsx(js,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("input",{type:"text",value:g.title,onChange:P=>x({...g,title:P.target.value}),placeholder:":    - ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white placeholder-gray-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx(ng,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),i.jsxs("select",{value:g.subject,onChange:P=>x({...g,subject:P.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"English",children:"English"}),i.jsx("option",{value:"Science",children:""}),i.jsx("option",{value:"Math",children:""})]})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"    "}),i.jsxs("div",{className:"relative",children:[i.jsx(ei,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),i.jsxs("select",{value:g.grade,onChange:P=>x({...g,grade:P.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"",className:"text-gray-400",children:" "}),i.jsx("optgroup",{label:" ",children:[5,6,7,8,9,10,11,12].map(P=>i.jsxs("option",{value:P.toString(),children:[" ",P]},P))}),i.jsx("optgroup",{label:" ",children:i.jsx("option",{value:"English Major - QOU",children:"   -   "})})]}),i.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:i.jsx(Hi,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"col-span-2 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  /  (Category)"}),i.jsxs("div",{className:"relative",children:[i.jsx($1,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),i.jsxs("select",{value:g.category,onChange:P=>x({...g,category:P.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"Language",children:"Language ()"}),i.jsx("option",{value:"Reading",children:"Reading ()"}),i.jsx("option",{value:"Writing",children:"Writing ()"}),i.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"}),i.jsx("option",{value:"General",children:"  (General Quiz)"})]}),i.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:i.jsx(Hi,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[i.jsx(eg,{className:"w-4 h-4 text-blue-600"}),"  ()"]}),i.jsx("input",{type:"number",min:"1",value:g.duration,onChange:P=>x({...g,duration:P.target.value}),placeholder:": 30",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[i.jsx(Q1,{className:"w-4 h-4 text-blue-600"}),"   ()"]}),i.jsx("input",{type:"number",min:"5",value:g.questionDuration,onChange:P=>x({...g,questionDuration:P.target.value}),placeholder:"   ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"}),i.jsx("p",{className:"text-[10px] text-gray-500 mt-1 mr-1",children:":         ."})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  ()"}),i.jsx("textarea",{value:g.description,onChange:P=>x({...g,description:P.target.value}),className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-medium text-white h-24 resize-none placeholder-gray-500",placeholder:"    ..."})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 md:p-8",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8 border-b border-gray-700 pb-4",children:[i.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[i.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:i.jsx(Bb,{className:"w-5 h-5 text-blue-400"})}),w?" ":" "]}),i.jsxs("div",{className:"flex flex-wrap gap-2 bg-gray-800 p-1.5 rounded-xl self-start",children:[i.jsx("button",{onClick:()=>f("MCQ"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${u==="MCQ"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:"  "}),i.jsx("button",{onClick:()=>f("TF"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${u==="TF"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:"  "}),i.jsxs("button",{onClick:()=>f("READING"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${u==="READING"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[i.jsx(Ts,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>f("REORDER"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${u==="REORDER"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[i.jsx(B1,{className:"w-4 h-4"})," "]})]})]}),i.jsxs("div",{className:"space-y-6",children:[u==="READING"&&i.jsxs("div",{className:"space-y-4 bg-blue-900/20 p-5 rounded-2xl border border-blue-800 mb-6",children:[i.jsxs("h4",{className:"font-bold text-blue-300 flex items-center gap-2 mb-2",children:[i.jsx(O5,{className:"w-5 h-5"})," "]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (General Instruction)"}),i.jsx("input",{type:"text",value:O.generalInstruction,onChange:P=>A("generalInstruction",P.target.value),placeholder:": Read the following text then answer the question",className:"w-full px-4 py-3 rounded-xl border border-blue-700 focus:border-blue-500 outline-none bg-gray-800 text-sm font-medium"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (Passage)"}),i.jsx("textarea",{value:O.passageContent,onChange:P=>A("passageContent",P.target.value),placeholder:"   ... ( Enter   )",className:"w-full px-4 py-3 rounded-xl border border-blue-700 focus:border-blue-500 outline-none bg-gray-800 text-sm font-medium h-40 resize-y whitespace-pre-wrap",style:{direction:"ltr",textAlign:"left"}}),i.jsx("p",{className:"text-[10px] text-blue-500 mt-1",children:"* :        ."})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-xs font-bold text-blue-300 mb-2 flex items-center gap-2",children:[i.jsx(H5,{className:"w-4 h-4"}),"   (  )"]}),i.jsx("div",{className:"flex gap-3",children:Y.map(P=>i.jsx("button",{onClick:()=>A("passageFontSize",P.value),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all border ${O.passageFontSize===P.value?"bg-blue-600 text-white border-blue-600":"bg-gray-800 text-gray-300 border-gray-600 hover:border-blue-400"}`,children:P.label},P.value))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:u==="READING"?"  ":u==="REORDER"?"/ ":" "}),i.jsxs("div",{className:"relative",children:[i.jsx($r,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4"}),i.jsx("input",{type:"text",value:O.question,onChange:P=>A("question",P.target.value),placeholder:u==="REORDER"?": Rearrange the following sentence":"   ...",className:"w-full px-5 py-4 pr-12 rounded-2xl border-2 border-gray-600 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none font-bold text-lg text-white bg-gray-800 placeholder-gray-400 transition-all"})]})]}),u==="MCQ"||u==="READING"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:O.options.map((P,W)=>i.jsxs("div",{className:`relative group transition-all duration-300 ${O.correctAnswer===W?"scale-[1.02]":""}`,children:[i.jsxs("label",{className:"flex items-center justify-between mb-2 px-1",children:[i.jsxs("span",{className:`text-xs font-bold ${O.correctAnswer===W?"text-blue-400":"text-gray-400"}`,children:[" ",W+1]}),i.jsx("button",{onClick:()=>A("correctAnswer",W),className:`text-[10px] px-2 py-1 rounded-md transition-colors font-bold ${O.correctAnswer===W?"bg-blue-900/30 text-blue-300":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:O.correctAnswer===W?" ":" "})]}),i.jsx("input",{type:"text",value:P,onChange:xe=>R(W,xe.target.value),placeholder:`  ${W+1}`,className:`w-full px-4 py-3 rounded-xl border-2 outline-none transition-all font-medium ${W===O.correctAnswer?"border-blue-500 bg-blue-900/20 text-white shadow-sm ring-2 ring-blue-900/30":"border-gray-600 bg-gray-700 focus:border-blue-400 text-gray-200"}`})]},W))}):u==="REORDER"?i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-1",children:"  (   )"}),i.jsx("input",{type:"text",dir:"ltr",value:ne,onChange:P=>Q(P.target.value),placeholder:"e.g. The sun rises in the east",className:"w-full px-5 py-4 rounded-2xl border-2 border-emerald-800 focus:border-emerald-500 outline-none text-lg font-medium text-white bg-emerald-900/10 text-left"}),ne&&i.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:ne.split(" ").filter(P=>P.trim()).map((P,W)=>i.jsx("span",{className:"bg-gray-700 px-3 py-1 rounded-lg text-sm font-bold text-gray-300",children:P},W))}),i.jsx("p",{className:"text-xs text-gray-500",children:"      ."})]}):i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("button",{onClick:()=>A("correctAnswer",0),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${O.correctAnswer===0?"border-blue-500 bg-blue-900/30 text-blue-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[O.correctAnswer===0&&i.jsx(_n,{className:"w-6 h-6"})," (True)"]}),i.jsxs("button",{onClick:()=>A("correctAnswer",1),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${O.correctAnswer===1?"border-red-500 bg-red-900/30 text-red-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[O.correctAnswer===1&&i.jsx(_n,{className:"w-6 h-6"})," (False)"]})]}),i.jsxs("div",{className:"bg-yellow-900/10 p-4 rounded-2xl border border-yellow-900/30",children:[i.jsxs("label",{className:"block text-sm font-bold text-yellow-500 mb-2 flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),"  ()"]}),i.jsx("textarea",{value:O.explanation,onChange:P=>A("explanation",P.target.value),placeholder:"        ...",className:"w-full px-4 py-3 rounded-xl border border-yellow-800/50 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-900/30 outline-none text-gray-200 bg-gray-800 h-20 resize-none placeholder-gray-400 text-sm"})]}),i.jsxs("div",{className:"flex gap-3",children:[w&&i.jsxs("button",{onClick:ie,className:"flex-1 bg-gray-700 text-gray-300 py-4 rounded-2xl font-bold hover:bg-gray-600 transition-all flex items-center justify-center gap-2",children:[i.jsx(H1,{className:"w-5 h-5"})," "]}),i.jsx("button",{onClick:I,className:`flex-1 bg-gray-800 text-white py-4 rounded-2xl font-bold hover:bg-gray-900 transition-all shadow-none flex items-center justify-center gap-2 transform hover:-translate-y-1 border border-gray-700 ${w?"bg-blue-600 hover:bg-blue-700 border-blue-600":""}`,children:w?i.jsxs(i.Fragment,{children:[i.jsx(Ka,{className:"w-5 h-5"})," "]}):i.jsxs(i.Fragment,{children:[i.jsx(Bb,{className:"w-5 h-5"}),"  "]})})]})]})]})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"sticky top-24 space-y-6",children:[i.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6",children:[i.jsxs("h3",{className:"text-lg font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(Ka,{className:"w-5 h-5 text-blue-400"})," "]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-5 bg-gray-800 rounded-2xl border border-gray-600 flex flex-col gap-3",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),i.jsx("span",{className:"font-black text-white bg-gray-600 px-3 py-0.5 rounded-md shadow-sm",children:p.length})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),i.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:g.category})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),i.jsxs("span",{className:"font-bold text-white",children:[g.duration," "]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),a?i.jsx("span",{className:"text-emerald-400 font-bold bg-emerald-900/30 px-2 py-0.5 rounded-md",children:""}):i.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:""})]})]}),i.jsxs("button",{onClick:q,disabled:e||p.length===0,className:`w-full py-4 rounded-2xl font-black text-white shadow-lg transition-all flex items-center justify-center gap-2 transform ${e||p.length===0?"bg-gray-600 cursor-not-allowed shadow-none":"bg-blue-600 hover:bg-blue-700 shadow-none hover:-translate-y-1"}`,children:[e?i.jsx(At,{className:"w-5 h-5 animate-spin"}):a?i.jsx(sg,{className:"w-5 h-5"}):i.jsx(_n,{className:"w-5 h-5"}),e?" ...":a?" ":"  "]})]})]}),p.length>0&&i.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 animate-fade-in-up",children:[i.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"bg-blue-900/30 p-1.5 rounded-lg",children:i.jsx(Hb,{className:"w-4 h-4 text-blue-400"})}),"  (",p.length,")"]}),i.jsx("div",{className:"space-y-3 max-h-[calc(100vh-400px)] overflow-y-auto pr-2 custom-scrollbar",children:p.map((P,W)=>i.jsxs("div",{className:`p-3 rounded-xl border transition-all group relative ${w===P.id?"bg-blue-900/20 border-blue-500 ring-1 ring-blue-500":"bg-gray-700/50 border-gray-600 hover:border-blue-300"}`,children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"bg-gray-600 text-gray-300 font-bold w-6 h-6 flex items-center justify-center rounded-lg text-xs shrink-0 shadow-sm",children:W+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-bold text-gray-200 text-sm line-clamp-2 mb-1.5",children:P.question}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{className:"text-[10px] bg-gray-600 text-gray-300 px-2 py-0.5 rounded border border-gray-500",children:P.type==="REORDER"?"":P.options.length===2?"/":P.passageContent?"":""})})]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-600/50 justify-end",children:[i.jsxs("button",{onClick:()=>C(P.id),className:"flex items-center gap-1 text-xs font-bold text-blue-400 hover:bg-blue-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[i.jsx(j0,{className:"w-3.5 h-3.5"}),""]}),i.jsx("div",{className:"w-px h-3 bg-gray-600"}),i.jsxs("button",{onClick:()=>de(P.id),className:"flex items-center gap-1 text-xs font-bold text-red-500 hover:bg-red-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[i.jsx(Xd,{className:"w-3.5 h-3.5"}),""]})]})]},P.id))})]})]})})]})}),ce&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-3xl max-h-[85vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden",children:[i.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:i.jsx(v0,{className:"w-6 h-6 text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-black text-white",children:" "}),i.jsx("p",{className:"text-sm text-gray-400",children:"    "})]})]}),i.jsx("button",{onClick:()=>fe(!1),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:i.jsx(js,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"p-4 bg-gray-800 border-b border-gray-700",children:i.jsxs("div",{className:"relative",children:[i.jsx(br,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-4 pointer-events-none"}),i.jsx("input",{type:"text",placeholder:"   ...",value:S,onChange:P=>T(P.target.value),className:"w-full px-12 py-3 rounded-xl border border-gray-700 focus:border-emerald-500 outline-none bg-gray-700 font-bold text-white transition-all"})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-900 custom-scrollbar",children:he?i.jsx("div",{className:"flex justify-center py-10",children:i.jsx(At,{className:"w-8 h-8 animate-spin text-emerald-600"})}):D.length===0?i.jsx("div",{className:"text-center py-10 text-gray-400",children:"   "}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:D.map(P=>i.jsxs("div",{onClick:()=>Ie(P),className:"bg-gray-800 p-4 rounded-2xl border border-gray-700 cursor-pointer hover:border-emerald-500 hover:shadow-lg transition-all group",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("span",{className:"bg-blue-900/30 text-blue-300 text-[10px] font-bold px-2 py-0.5 rounded-md",children:P.subject}),i.jsx("span",{className:"text-xs text-gray-400",children:P.grade})]}),i.jsx("h4",{className:"font-bold text-white mb-2 line-clamp-1 group-hover:text-emerald-400 transition-colors",children:P.title}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[i.jsx($r,{className:"w-3 h-3"}),P.questions.length," "]})]},P.id))})})]})})]})},m0=[{minLevel:1,title:" ",color:"bg-gray-100 text-gray-600 border-gray-200",icon:tg},{minLevel:5,title:" ",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:Mn},{minLevel:10,title:" ",color:"bg-blue-100 text-blue-700 border-blue-200",icon:br},{minLevel:15,title:" ",color:"bg-indigo-100 text-indigo-700 border-indigo-200",icon:ro},{minLevel:20,title:" ",color:"bg-purple-100 text-purple-700 border-purple-200",icon:bh},{minLevel:30,title:" ",color:"bg-amber-100 text-amber-700 border-amber-200",icon:ao}],MR=[{id:"first_step",title:" ",desc:"   ",icon:tg,color:"text-emerald-500",bg:"bg-emerald-500/10",condition:r=>r.quizzesCompleted>=1},{id:"perfect_score",title:" ",desc:"  100%   ",icon:ti,color:"text-yellow-500",bg:"bg-yellow-500/10",condition:r=>r.hasPerfectScore},{id:"dedicated",title:" ",desc:" 5  ",icon:Mn,color:"text-blue-500",bg:"bg-blue-500/10",condition:r=>r.quizzesCompleted>=5},{id:"high_level",title:" ",desc:"  5",icon:bh,color:"text-orange-500",bg:"bg-orange-500/10",condition:r=>r.level>=5},{id:"expert",title:" ",desc:" 10 ",icon:Gl,color:"text-purple-500",bg:"bg-purple-500/10",condition:r=>r.quizzesCompleted>=10},{id:"scholar",title:" ",desc:" 1000   (XP)",icon:br,color:"text-cyan-500",bg:"bg-cyan-500/10",condition:r=>r.totalXP>=1e3},{id:"sharpshooter",title:"",desc:"    3 ",icon:rg,color:"text-red-500",bg:"bg-red-500/10",condition:r=>r.perfectScoresCount>=3},{id:"veteran",title:"",desc:" 20 ",icon:F1,color:"text-indigo-500",bg:"bg-indigo-500/10",condition:r=>r.quizzesCompleted>=20},{id:"rocket",title:"",desc:"  15",icon:g5,color:"text-pink-500",bg:"bg-pink-500/10",condition:r=>r.level>=15},{id:"master",title:"",desc:"  30",icon:ao,color:"text-amber-500",bg:"bg-amber-500/10",condition:r=>r.level>=30}],VR=[{url:"https://lh3.googleusercontent.com/d/1ufUwP7M3wdxWBW60s2xdpZC6W7jfpXv4",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1AqS4xhkK53MwCO-LFRdmtYBQsYSH6vz1",minLevel:1},{url:"https://lh3.googleusercontent.com/d/198SBde0OI07puyVx53mi9MpZ7F-iKltI",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1E--pczIn4ZCSWpWYhKZutLX8lfhtmCrp",minLevel:5},{url:"https://lh3.googleusercontent.com/d/1ep_ggXFs0rCkGJ212WkY5DuRbLNkyLyr",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1siamCZMGjbXH6L9bop_dN1UPSSwfyIwc",minLevel:15},{url:"https://lh3.googleusercontent.com/d/1seg3JDYcNsDBtTY4gU9N5empajSAT_-E",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1QnacjkYXRr-N4yhmt44LubRxbRnzNgqH",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1h5uzg3mZaeaozqEkzwItA14xqDq7kbMb",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1qKn7YfQr7VaDPXB8EjUvlCW-qt3v5E0u",minLevel:15}],g0=[{id:"nature_1",url:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",name:" ",minLevel:1},{id:"nature_2",url:"https://lh3.googleusercontent.com/d/1tBjHedpcXQiEjXro--zG3iWDokgrDbgZ",name:" ",minLevel:5},{id:"nature_3",url:"https://lh3.googleusercontent.com/d/1Chp7z63_XfLlt4ZC0MRmKwNsSTlCWwOa",name:" ",minLevel:10},{id:"nature_4",url:"https://lh3.googleusercontent.com/d/12RHK_FCMJt8D24AB3UV7nHxbD50EF4MX",name:" ",minLevel:15},{id:"nature_5",url:"https://lh3.googleusercontent.com/d/1We4c8009ObQB9ZDrpQ8ssUuos4V_4b9w",name:" ",minLevel:20}],k1=({options:r,value:e,onChange:n,placeholder:a,disabled:o})=>{const[u,f]=M.useState(!1),g=M.useRef(null);M.useEffect(()=>{const p=_=>{g.current&&!g.current.contains(_.target)&&f(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const x=r.find(p=>p.value===e&&!p.isHeader);return i.jsxs("div",{className:`relative ${u?"z-[100]":"z-0"}`,ref:g,children:[i.jsxs("button",{type:"button",onClick:()=>!o&&f(!u),className:`w-full px-4 py-3 rounded-xl border flex justify-between items-center outline-none transition-all font-bold text-sm
            ${o?"bg-gray-950 border-gray-800 text-gray-600 cursor-not-allowed":u?"bg-gray-950 border-blue-500 ring-2 ring-blue-900 text-white shadow-lg":"bg-gray-950 border-gray-800 hover:border-blue-900 text-white shadow-inner"}
         `,children:[i.jsx("span",{className:`truncate ${x?"":"text-gray-600"}`,children:x?x.label:a}),i.jsx(Hi,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${u?"rotate-180 text-blue-500":""}`})]}),u&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-900 border border-gray-700 rounded-xl shadow-xl max-h-60 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-[100]",children:r.map((p,_)=>{if(p.isHeader)return i.jsx("div",{className:"px-4 py-2 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-800/50 rounded-lg mb-1",children:p.label},_);const w=p.value===e;return i.jsxs("div",{onClick:()=>{n(p.value),f(!1)},className:`px-4 py-2.5 rounded-lg font-bold text-xs cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${w?"bg-blue-900/30 text-blue-400":"text-gray-300 hover:bg-gray-800"}
                   `,children:[p.label,w&&i.jsx(Xr,{className:"w-3 h-3"})]},_)})})]})},LR=({onNavigate:r})=>{const{user:e,updateUserProfile:n}=Cs(),[a,o]=M.useState(!1),[u,f]=M.useState(null),[g,x]=M.useState(!1),[p,_]=M.useState(!1),[w,E]=M.useState(null),[O,z]=M.useState((e==null?void 0:e.avatar)||""),[ne,Q]=M.useState((e==null?void 0:e.profileBackground)||g0[0].url),[ce,fe]=M.useState([]),[oe,we]=M.useState(!0),[he,B]=M.useState(0),[S,T]=M.useState(1),[A,R]=M.useState(m0[0]),[I,L]=M.useState({quizzesCompleted:0,hasPerfectScore:!1,level:1,totalXP:0,perfectScoresCount:0}),[C,ie]=M.useState([]),[de,q]=M.useState(""),[le,Z]=M.useState(!1),[Ee,Ie]=M.useState("50"),[D,Y]=M.useState(null),[P,W]=M.useState(!1),[xe,Ae]=M.useState(""),[Ue,rt]=M.useState(!1),[Ce,Et]=M.useState({firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",age:(e==null?void 0:e.age)||"",grade:(e==null?void 0:e.grade)||"",phone:(e==null?void 0:e.phone)||"",address:(e==null?void 0:e.address)||"",school:(e==null?void 0:e.school)||"",gender:(e==null?void 0:e.gender)||"male",universityName:""});M.useEffect(()=>{e&&(Et(re=>({...re,firstName:e.firstName||re.firstName,lastName:e.lastName||re.lastName,gender:e.gender||re.gender,grade:e.grade||re.grade,school:e.school||re.school})),e.avatar&&z(e.avatar),e.profileBackground&&Q(e.profileBackground))},[e]),M.useEffect(()=>{(async()=>{if(e){if(e.role==="teacher"){we(!1),Z(!0);try{const $e=Qt(nt(Me,"users"),as("role","student")),Qe=(await an($e)).docs.map(Mt=>({id:Mt.id,...Mt.data()}));ie(Qe)}catch($e){console.error("Error fetching students:",$e)}finally{Z(!1)}return}try{const $e=Qt(nt(Me,"quiz_results"),as("userId","==",e.uid)),Le=await an($e),Qe=[];let Mt=0,et=!1,Er=0;Le.forEach(ue=>{const ye=ue.data();Qe.push({id:ue.id,...ue.data()});let je=10+ye.percentage*2;ye.passed&&(je+=50),ye.percentage===100&&(je+=100,et=!0,Er++),Mt+=Math.round(je)}),Qe.sort((ue,ye)=>{var Oe,Ke;const je=((Oe=ue.createdAt)==null?void 0:Oe.seconds)||0,ge=((Ke=ye.createdAt)==null?void 0:Ke.seconds)||0;return je-ge}),fe(Qe);let kn=Mt;try{const ue=ls(Me,"users",e.uid),ye=await w_(ue);ye.exists()&&ye.data().totalXP!==void 0?kn=ye.data().totalXP:e.totalXP!==void 0&&(kn=e.totalXP)}catch{e.totalXP!==void 0&&(kn=e.totalXP)}B(kn);const Qs=Math.floor(kn/500)+1;T(Qs);const Ln=[...m0].reverse().find(ue=>Qs>=ue.minLevel)||m0[0];R(Ln),L({quizzesCompleted:Qe.length,hasPerfectScore:et,level:Qs,totalXP:kn,perfectScoresCount:Er})}catch($e){console.error($e)}finally{we(!1)}}})()},[e]);const ft=async re=>{re.preventDefault(),o(!0),f(null);try{let $e={...Ce};Ce.grade==="university"&&Ce.universityName&&($e.school=Ce.universityName),delete $e.universityName,await n($e),f("   !"),setTimeout(()=>f(null),3e3)}catch($e){console.error($e),alert("   ")}finally{o(!1)}},jt=async()=>{o(!0);try{await n({avatar:O}),x(!1)}catch(re){console.error(re)}finally{o(!1)}},at=async()=>{o(!0);try{await n({profileBackground:ne}),_(!1)}catch(re){console.error(re)}finally{o(!1)}},mn=async(re,$e)=>{if(!re)return;const Le=parseInt(Ee);if(isNaN(Le)||Le<=0){alert("    ");return}if(window.confirm(`     ${Le} XP  ${$e}`)){o(!0),Y(null);try{const Qe=ls(Me,"users",re);await su(Qe,{totalXP:W0(Le)}),ie(Mt=>Mt.map(et=>et.id===re?{...et,totalXP:(et.totalXP||0)+Le}:et)),Y(`  ${Le} XP  ${$e} !`),setTimeout(()=>Y(null),3e3)}catch(Qe){console.error(Qe),alert("    ")}finally{o(!1)}}},os=async()=>{if(!xe.trim()){alert("   ");return}rt(!0);try{await Kn(nt(Me,"announcements"),{title:xe,teacherName:(e==null?void 0:e.displayName)||"",teacherId:e==null?void 0:e.uid,createdAt:In()}),await Kn(nt(Me,"notifications"),{recipientId:"all",title:"  ",message:xe,type:"info",createdAt:In(),read:!1}),alert("   "),Ae(""),W(!1)}catch(re){console.error(re),alert("   ")}finally{rt(!1)}},cs=C.filter(re=>{const $e=(re.displayName||"").toLowerCase(),Le=(re.email||"").toLowerCase(),Qe=de.toLowerCase();return $e.includes(Qe)||Le.includes(Qe)}),Gs=re=>re?re.startsWith("http")?{backgroundImage:`url(${re})`,backgroundSize:"cover",backgroundPosition:"center"}:{}:{backgroundImage:`url(${g0[0].url})`,backgroundSize:"cover",backgroundPosition:"center"},_r=re=>!re||re.startsWith("http")?"bg-no-repeat bg-center":re,It=re=>re<=3?"border-gray-800":re<=6?"border-emerald-500 shadow-[0_0_20px_rgba(16,185,129,0.5)]":re<=9?"border-blue-500 shadow-[0_0_25px_rgba(59,130,246,0.6)]":re<=12?"border-cyan-400 shadow-[0_0_30px_rgba(34,211,238,0.7)]":re<=15?"border-indigo-500 shadow-[0_0_35px_rgba(99,102,241,0.7)]":re<=18?"border-purple-500 shadow-[0_0_40px_rgba(168,85,247,0.7)]":re<=21?"border-pink-500 shadow-[0_0_45px_rgba(236,72,153,0.8)]":re<=24?"border-red-500 shadow-[0_0_50px_rgba(239,68,68,0.8)]":re<=27?"border-amber-500 shadow-[0_0_55px_rgba(245,158,11,0.9)]":re<=29?"border-white shadow-[0_0_60px_rgba(255,255,255,0.8)] ring-2 ring-white":"border-rose-500 shadow-[0_0_70px_rgba(244,63,94,1)] animate-pulse ring-4 ring-rose-500/30",Rt=re=>re<=3?"text-gray-400":re<=6?"text-emerald-400 font-bold":re<=9?"text-blue-400 font-bold":re<=12?"text-cyan-400 font-black":re<=15?"text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400 font-black":re<=20?"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500 font-black drop-shadow-sm":re<=25?"text-transparent bg-clip-text bg-gradient-to-r from-amber-300 to-orange-500 font-black drop-shadow-md":"text-transparent bg-clip-text bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 font-black animate-pulse drop-shadow-lg",on=ce.slice(-10).map(re=>re.percentage),ra=on.length>0?Math.max(...on):0,aa=on.length>0?Math.min(...on):0,kt=on.length>0?Math.round(on.reduce((re,$e)=>re+$e,0)/on.length):0,us=ce.length,$s=(S-1)*500,Nr=Math.min(100,Math.max(0,(he-$s)/500*100)),gn="w-full px-4 py-3 rounded-xl bg-gray-950 border border-gray-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-900 outline-none font-bold text-white transition-all placeholder-gray-600 shadow-inner text-sm",ia=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(re=>({label:` ${re}`,value:re.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"  ",value:"English Major - QOU"},{label:" ",value:"university"}],la=[{label:"",value:"male"},{label:"",value:"female"}];return(e==null?void 0:e.role)==="teacher"?i.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up",children:[i.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 mb-12 p-2",children:[i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden border-4 border-gray-800 shadow-2xl bg-gray-700",children:e.avatar?i.jsx("img",{src:e.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx(Cn,{className:"w-full h-full p-4 text-gray-400"})}),i.jsx("div",{className:"absolute bottom-0 right-0 bg-emerald-500 text-white p-1.5 rounded-full border-4 border-gray-900 shadow-sm",children:i.jsx(_n,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"text-center md:text-right space-y-2",children:[i.jsxs("h1",{className:"text-3xl md:text-4xl font-black text-white",children:[" ",e.displayName]}),i.jsxs("p",{className:"text-gray-400 font-medium text-lg flex items-center justify-center md:justify-start gap-2",children:[i.jsx(hr,{className:"w-4 h-4 text-blue-500"}),e.email]}),i.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-blue-900/30 text-blue-300 text-xs font-bold border border-blue-800",children:[i.jsx(ei,{className:"w-3.5 h-3.5"})," "]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4 mb-12",children:[i.jsxs("button",{onClick:()=>r&&r("TEACHER_DASHBOARD"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-blue-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-900/20 text-blue-400 flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-colors",children:i.jsx(_4,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("QUESTION_BANK"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-purple-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-900/20 text-purple-400 flex items-center justify-center group-hover:bg-purple-600 group-hover:text-white transition-colors",children:i.jsx(Wl,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_UPLOAD_FILES"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-emerald-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-emerald-900/20 text-emerald-400 flex items-center justify-center group-hover:bg-emerald-600 group-hover:text-white transition-colors",children:i.jsx(m4,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_EXPLANATIONS"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-orange-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-orange-900/20 text-orange-400 flex items-center justify-center group-hover:bg-orange-600 group-hover:text-white transition-colors",children:i.jsx(Fc,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>W(!0),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-red-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-red-900/20 text-red-400 flex items-center justify-center group-hover:bg-red-600 group-hover:text-white transition-colors",children:i.jsx(Ec,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_REVIEWS"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-yellow-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-yellow-900/20 text-yellow-400 flex items-center justify-center group-hover:bg-yellow-600 group-hover:text-white transition-colors",children:i.jsx(yh,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:""})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_CORRESPONDENCE"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-cyan-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-cyan-900/20 text-cyan-400 flex items-center justify-center group-hover:bg-cyan-600 group-hover:text-white transition-colors",children:i.jsx(Xa,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:""})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-sm border border-gray-700 overflow-hidden",children:[i.jsxs("div",{className:"p-8 border-b border-gray-700 bg-gray-800/50 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-black text-white flex items-center gap-2",children:[i.jsx(Gl,{className:"w-6 h-6 text-yellow-500"}),"   (XP)"]}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"      "})]}),D&&i.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 text-green-400 px-4 py-2 rounded-xl text-sm font-bold animate-fade-in flex items-center gap-2",children:[i.jsx(_n,{className:"w-4 h-4"})," ",D]})]}),i.jsxs("div",{className:"p-8",children:[i.jsxs("div",{className:"relative mb-6",children:[i.jsx(br,{className:"absolute top-3.5 right-4 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"   ...",value:de,onChange:re=>q(re.target.value),className:"w-full px-12 py-3 rounded-xl bg-gray-900 border border-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none font-bold text-white transition-all"})]}),i.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar p-1",children:le?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(At,{className:"w-8 h-8 animate-spin text-blue-500"})}):de===""?i.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"    ..."}):cs.length===0?i.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"    "}):cs.map(re=>i.jsxs("div",{className:"flex items-center justify-between bg-gray-900/50 p-4 rounded-2xl border border-gray-700 hover:border-blue-700 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center overflow-hidden",children:re.avatar?i.jsx("img",{src:re.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx(Cn,{className:"w-5 h-5 text-gray-400"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-white text-sm",children:re.displayName}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[i.jsxs("span",{className:"bg-yellow-500/10 text-yellow-400 px-1.5 rounded font-bold flex items-center gap-0.5",children:[i.jsx(Fd,{className:"w-3 h-3"})," ",re.totalXP||0]}),i.jsxs("span",{children:[" ",re.email]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("select",{className:"bg-gray-800 border border-gray-700 text-gray-300 text-xs font-bold rounded-lg px-2 py-2 outline-none",value:Ee,onChange:$e=>Ie($e.target.value),children:[i.jsx("option",{value:"10",children:"+10 XP"}),i.jsx("option",{value:"50",children:"+50 XP"}),i.jsx("option",{value:"100",children:"+100 XP"}),i.jsx("option",{value:"200",children:"+200 XP"}),i.jsx("option",{value:"500",children:"+500 XP"})]}),i.jsx("button",{onClick:()=>mn(re.id,re.displayName),className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg transition-colors shadow-lg shadow-blue-500/30",title:" ",children:i.jsx(Xa,{className:"w-4 h-4"})})]})]},re.id))})]})]}),P&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-md shadow-2xl animate-fade-in-up overflow-hidden border border-gray-700",children:[i.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-orange-900/30 p-2 rounded-xl",children:i.jsx(Ec,{className:"w-6 h-6 text-orange-400"})}),i.jsx("h2",{className:"text-xl font-black text-white",children:"  "})]}),i.jsx("button",{onClick:()=>W(!1),className:"p-2 hover:bg-gray-700 rounded-full text-gray-400",children:i.jsx(js,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-6",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("input",{type:"text",value:xe,onChange:re=>Ae(re.target.value),placeholder:":      ",className:"w-full px-4 py-3 rounded-xl border border-gray-600 bg-gray-800 text-white focus:border-orange-500 outline-none mb-6"}),i.jsxs("button",{onClick:os,disabled:Ue,className:"w-full bg-orange-600 hover:bg-orange-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors",children:[Ue?i.jsx(At,{className:"w-5 h-5 animate-spin"}):i.jsx(Ka,{className:"w-5 h-5"}),"   "]})]})]})})]}):i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up",children:[g&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-start justify-center p-4 pt-10 md:pt-16 bg-black/80 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-sm max-h-[85vh] flex flex-col shadow-2xl border border-gray-700 overflow-hidden relative",children:[i.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center shrink-0",children:[i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[i.jsx(Cn,{className:"w-5 h-5 text-purple-500"}),"  "]}),i.jsx("button",{onClick:()=>x(!1),className:"p-1.5 hover:bg-gray-800 rounded-full transition-colors",children:i.jsx(js,{className:"w-5 h-5 text-gray-500"})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:i.jsx("div",{className:"grid grid-cols-3 gap-3",children:VR.map((re,$e)=>{const Le=S<re.minLevel;return i.jsxs("button",{onClick:()=>!Le&&z(re.url),disabled:Le,className:`relative aspect-square rounded-xl overflow-hidden border-2 transition-all bg-gray-800 ${O===re.url?"border-emerald-500 shadow-md ring-2 ring-emerald-900/30":"border-transparent hover:border-gray-600"} ${Le?"opacity-60 grayscale":"hover:scale-105 active:scale-95"}`,children:[i.jsx("img",{src:re.url,alt:`Avatar ${$e}`,className:"w-full h-full object-cover"}),Le&&i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/50 text-white backdrop-blur-[1px]",children:[i.jsx(qa,{className:"w-4 h-4 mb-0.5"}),i.jsxs("span",{className:"text-[10px] font-bold",children:[" ",re.minLevel]})]}),!Le&&O===re.url&&i.jsx("div",{className:"absolute top-1 right-1 bg-emerald-500 text-white rounded-full p-0.5 shadow-sm",children:i.jsx(_n,{className:"w-3 h-3"})})]},$e)})})}),i.jsx("div",{className:"p-4 border-t border-gray-800 shrink-0",children:i.jsxs("button",{onClick:jt,disabled:a,className:"w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:[a?i.jsx(At,{className:"w-5 h-5 animate-spin"}):i.jsx(Ka,{className:"w-5 h-5"}),"  "]})})]})}),p&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-start justify-center p-4 pt-10 md:pt-16 bg-black/80 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl border border-gray-700 overflow-hidden relative",children:[i.jsxs("div",{className:"p-5 border-b border-gray-800 flex justify-between items-center shrink-0",children:[i.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(Fb,{className:"w-6 h-6 text-emerald-500"}),"  "]}),i.jsx("button",{onClick:()=>_(!1),className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:i.jsx(js,{className:"w-6 h-6 text-gray-500"})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-5 custom-scrollbar",children:i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:g0.map((re,$e)=>{const Le=S<re.minLevel,Qe=ne===re.url;return i.jsxs("button",{onClick:()=>!Le&&Q(re.url),disabled:Le,className:`relative h-28 rounded-2xl overflow-hidden border-4 transition-all duration-300 group ${Qe?"border-emerald-500 scale-[1.02] shadow-md":"border-transparent"} ${Le?"opacity-60 cursor-not-allowed grayscale":"hover:scale-[1.02] cursor-pointer"}`,children:[i.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${re.url})`}}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Le?i.jsxs("div",{className:"bg-black/60 px-3 py-1.5 rounded-lg backdrop-blur-sm flex items-center gap-1.5",children:[i.jsx(qa,{className:"w-4 h-4 text-white"}),i.jsxs("span",{className:"text-xs text-white font-bold",children:[" ",re.minLevel]})]}):Qe&&i.jsx(_n,{className:"w-8 h-8 text-white drop-shadow-md"})}),i.jsx("div",{className:"absolute bottom-0 w-full bg-gradient-to-t from-black/80 to-transparent p-2 text-center",children:i.jsx("span",{className:"text-xs font-bold text-white drop-shadow-md",children:re.name})})]},$e)})})}),i.jsxs("div",{className:"p-5 border-t border-gray-800 shrink-0 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>_(!1),className:"px-6 py-2.5 rounded-xl font-bold text-gray-500 hover:bg-gray-800 transition-colors",children:""}),i.jsx("button",{onClick:at,disabled:a,className:"bg-emerald-600 text-white px-8 py-2.5 rounded-xl font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 dark:shadow-none flex items-center gap-2",children:a?i.jsx(At,{className:"w-5 h-5 animate-spin"}):" "})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[i.jsx("div",{className:"lg:col-span-7 lg:order-1 space-y-8",children:i.jsxs("div",{className:"bg-gray-900 rounded-[3rem] shadow-xl border border-gray-700 relative group",children:[i.jsxs("div",{className:`relative w-full h-48 md:h-64 transition-all duration-500 rounded-t-[3rem] overflow-hidden ${_r(e==null?void 0:e.profileBackground)}`,style:Gs(e==null?void 0:e.profileBackground),children:[i.jsxs("button",{onClick:()=>_(!0),className:"absolute top-4 left-4 bg-black/30 hover:bg-black/50 text-white backdrop-blur-md px-4 py-2 rounded-full text-xs md:text-sm font-bold flex items-center gap-2 transition-all border border-white/20 z-20",children:[i.jsx(Fb,{className:"w-4 h-4"}),"  "]}),i.jsxs("div",{className:`absolute top-4 right-4 px-4 py-1.5 rounded-full text-xs font-black flex items-center gap-2 backdrop-blur-md shadow-lg border-2 z-10 ${A.color}`,children:[i.jsx(A.icon,{className:"w-4 h-4"})," ",A.title]})]}),i.jsx("div",{className:"absolute top-32 md:top-44 right-8 md:right-12 z-20",children:i.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>x(!0),children:[i.jsx("div",{className:`w-28 h-28 md:w-36 md:h-36 rounded-full border-[6px] shadow-2xl overflow-hidden bg-gray-700 relative z-10 transition-transform transform group-hover:scale-105 flex items-center justify-center ${It(S)}`,children:e!=null&&e.avatar?i.jsx("img",{src:e.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx(Cn,{className:"w-16 h-16 text-gray-500"})}),i.jsx("div",{className:"absolute bottom-1 right-1 bg-emerald-500 text-white p-2 rounded-full border-4 border-gray-800 shadow-sm z-20 hover:bg-emerald-600 transition-colors",children:i.jsx(l5,{className:"w-4 h-4"})})]})}),i.jsxs("div",{className:"pt-16 md:pt-20 px-8 pb-8",children:[i.jsxs("div",{className:"flex flex-col items-start",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-1",children:e==null?void 0:e.displayName}),i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium mb-6",children:[i.jsx("span",{className:"text-gray-400",children:e==null?void 0:e.email}),i.jsx("span",{className:"text-gray-300",children:""}),i.jsxs("span",{className:`flex items-center gap-1 ${Rt(S)}`,children:[i.jsx(Gl,{className:"w-3 h-3"}),"  ",S]})]})]}),i.jsxs("form",{onSubmit:ft,className:"space-y-6 border-t border-gray-700 pt-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[i.jsx("div",{className:"md:col-span-2",children:i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4",children:[i.jsx(Cn,{className:"w-5 h-5 text-blue-500"}),"  "]})}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx("input",{type:"text",value:Ce.firstName,onChange:re=>Et({...Ce,firstName:re.target.value}),className:gn})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx("input",{type:"text",value:Ce.lastName,onChange:re=>Et({...Ce,lastName:re.target.value}),className:gn})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),i.jsx(k1,{options:la,value:Ce.gender,onChange:re=>!(e!=null&&e.genderChanged)&&Et({...Ce,gender:re}),placeholder:" ",disabled:e==null?void 0:e.genderChanged}),(e==null?void 0:e.genderChanged)&&i.jsxs("p",{className:"text-[10px] text-red-400 mt-1 mr-1 flex items-center gap-1",children:[i.jsx(qa,{className:"w-3 h-3"}),"        "]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx("input",{type:"text",value:Ce.phone,onChange:re=>Et({...Ce,phone:re.target.value}),className:gn})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),i.jsx("input",{type:"text",value:Ce.address,onChange:re=>Et({...Ce,address:re.target.value}),className:gn})]}),i.jsx("div",{className:"md:col-span-2 mt-2",children:i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4",children:[i.jsx(ei,{className:"w-5 h-5 text-emerald-500"}),"  "]})}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),i.jsx("input",{type:"text",value:Ce.school,onChange:re=>Et({...Ce,school:re.target.value}),className:gn})]}),i.jsxs("div",{className:"relative",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx(k1,{options:ia,value:Ce.grade,onChange:re=>Et({...Ce,grade:re}),placeholder:" "})]}),Ce.grade==="university"&&i.jsxs("div",{className:"md:col-span-2 animate-fade-in",children:[i.jsx("label",{className:"text-xs font-bold text-blue-400 mb-1 block",children:"  / "}),i.jsx("input",{type:"text",value:Ce.universityName||Ce.school,onChange:re=>Et({...Ce,universityName:re.target.value}),placeholder:"   ...",className:`${gn} border-blue-500 bg-blue-900/10`})]})]}),i.jsxs("div",{className:"flex items-center justify-end pt-4 gap-4",children:[u&&i.jsxs("span",{className:"text-green-600 font-bold text-sm animate-fade-in flex items-center gap-1",children:[i.jsx(_n,{className:"w-4 h-4"})," ",u]}),i.jsxs("button",{type:"submit",disabled:a,className:"bg-emerald-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-900/20 flex items-center gap-2",children:[a?i.jsx(At,{className:"w-5 h-5 animate-spin"}):i.jsx(Ka,{className:"w-5 h-5"}),"  "]})]})]})]})]})}),i.jsxs("div",{className:"lg:col-span-5 lg:order-2 space-y-6 mt-8 lg:mt-0",children:[i.jsxs("div",{className:"bg-gradient-to-br from-indigo-700 via-purple-700 to-fuchsia-700 rounded-[2.5rem] shadow-2xl p-6 text-white relative overflow-hidden border-4 border-gray-800 ring-4 ring-gray-900",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white opacity-10 rounded-full -translate-y-1/2 translate-x-1/2 blur-3xl"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-indigo-500 opacity-20 rounded-full translate-y-1/2 -translate-x-1/2 blur-3xl"}),i.jsx("div",{className:"flex items-center justify-between mb-6 relative z-10",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 bg-yellow-400 blur-md opacity-50 rounded-full"}),i.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-300 to-orange-500 rounded-2xl shadow-lg relative border border-white/30",children:i.jsx(A.icon,{className:"w-8 h-8 text-white"})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-3xl font-black tracking-tight",children:[" ",S]}),i.jsxs("p",{className:"text-indigo-100 text-sm font-medium flex items-center gap-1.5 mt-0.5 bg-black/20 px-3 py-1 rounded-full w-fit",children:[i.jsx(Fd,{className:"w-3.5 h-3.5 text-orange-400 fill-orange-400"})," ",he,"   (XP)"]})]})]})}),i.jsxs("div",{className:"relative mb-8",children:[i.jsxs("div",{className:"flex justify-between text-xs font-bold text-indigo-200 mb-1 px-1",children:[i.jsx("span",{children:A.title}),i.jsxs("span",{children:["  ",S+1]})]}),i.jsx("div",{className:"w-full bg-black/30 h-3.5 rounded-full relative overflow-hidden backdrop-blur-sm border border-white/10",children:i.jsx("div",{className:"bg-gradient-to-r from-yellow-400 via-orange-400 to-pink-500 h-full rounded-full transition-all duration-1000 ease-out relative shadow-[0_0_10px_rgba(251,191,36,0.5)]",style:{width:`${Nr}%`},children:i.jsx("div",{className:"absolute inset-0 bg-white/30 w-full h-full animate-[pulse_2s_cubic-bezier(0.4,0,0.6,1)_infinite]"})})})]}),i.jsxs("div",{className:"bg-black/20 rounded-2xl p-5 backdrop-blur-md border border-white/10",children:[i.jsxs("h4",{className:"text-sm font-bold text-indigo-100 mb-2 flex items-center gap-2",children:[i.jsx(ao,{className:"w-4 h-4 text-yellow-300"}),"  "]}),i.jsx("div",{className:"text-xl font-black text-white tracking-wide mb-1",children:A.title}),i.jsx("div",{className:"text-xs text-indigo-200",children:"     !"})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 p-4 md:p-5",children:[i.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2 border-b border-gray-700 pb-3",children:[i.jsx("div",{className:"p-2 bg-yellow-900/30 rounded-lg",children:i.jsx(X4,{className:"w-5 h-5 text-yellow-400"})})," "]}),i.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2",children:MR.map((re,$e)=>{const Le=re.condition(I);return i.jsxs("button",{onClick:()=>E({badge:re,isUnlocked:Le}),className:`relative p-2 rounded-xl border flex flex-col items-center text-center transition-all hover:scale-105 active:scale-95 ${Le?"bg-gray-700/50 border-gray-600 shadow-sm hover:shadow-md cursor-pointer":"bg-gray-800/50 border-gray-700 opacity-60 grayscale hover:opacity-100 cursor-pointer"}`,children:[i.jsx("div",{className:`w-8 h-8 md:w-9 md:h-9 rounded-full flex items-center justify-center mb-1 ${Le?re.bg:"bg-gray-700"}`,children:i.jsx(re.icon,{className:`w-4 h-4 md:w-5 md:h-5 ${Le?re.color:"text-gray-400"}`})}),i.jsx("h4",{className:"font-bold text-[9px] text-gray-300 leading-tight line-clamp-1",children:re.title}),!Le&&i.jsx("div",{className:"absolute top-1 right-1",children:i.jsx(qa,{className:"w-2.5 h-2.5 text-gray-500"})})]},$e)})}),w&&i.jsxs("div",{className:"mt-4 bg-gray-800/80 rounded-2xl p-4 border border-gray-700 animate-fade-in flex items-start gap-4 relative",children:[i.jsx("button",{onClick:()=>E(null),className:"absolute top-3 left-3 text-gray-500 hover:text-white transition-colors",children:i.jsx(js,{className:"w-4 h-4"})}),i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center shrink-0 ${w.isUnlocked?w.badge.bg:"bg-gray-700"}`,children:i.jsx(w.badge.icon,{className:`w-6 h-6 ${w.isUnlocked?w.badge.color:"text-gray-400"}`})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-sm font-bold text-white mb-1",children:w.badge.title}),i.jsxs("div",{className:"text-xs mb-1",children:[i.jsx("span",{className:`font-bold ${w.isUnlocked?"text-emerald-400":"text-gray-400"}`,children:w.isUnlocked?" : ":": "}),i.jsx("span",{className:"text-gray-300",children:w.badge.desc})]}),!w.isUnlocked&&i.jsxs("div",{className:"mt-2 flex items-center gap-1 text-[10px] text-gray-500",children:[i.jsx(qa,{className:"w-3 h-3"}),i.jsx("span",{children:"    "})]}),w.isUnlocked&&i.jsxs("div",{className:"mt-2 flex items-center gap-1 text-[10px] text-emerald-500",children:[i.jsx(_n,{className:"w-3 h-3"}),i.jsx("span",{children:" "})]})]})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 p-6 hover:shadow-md transition-shadow",children:[i.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(P5,{className:"w-5 h-5 text-emerald-400"})}),"   "]}),oe?i.jsx("div",{className:"h-48 flex items-center justify-center",children:i.jsx(At,{className:"w-6 h-6 animate-spin text-emerald-500"})}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center bg-gray-700/50 p-4 rounded-xl border border-gray-700",children:[i.jsx("span",{className:"text-gray-300 text-sm font-bold",children:" "}),i.jsxs("span",{className:`font-black text-xl ${kt>=90?"text-emerald-400":"text-blue-400"}`,children:[kt,"%"]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-emerald-900/30 text-emerald-400",children:i.jsx(Gl,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),i.jsxs("div",{className:"font-black text-lg text-emerald-400",children:[ra,"%"]})]})]}),i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-red-900/30 text-red-400",children:i.jsx(U1,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),i.jsxs("div",{className:"font-black text-lg text-red-400",children:[aa,"%"]})]})]}),i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-blue-900/30 text-blue-400",children:i.jsx(v4,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),i.jsx("div",{className:"font-black text-lg text-blue-400",children:us})]})]}),i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-purple-900/30 text-purple-400",children:i.jsx(u5,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:""}),i.jsxs("div",{className:"font-black text-lg text-purple-400",children:[kt,"%"]})]})]})]})]})]})]})]})]})},PR=[{id:"All",label:" (All)"},{id:"Language",label:"Language ()"},{id:"Reading",label:"Reading ()"},{id:"Writing",label:"Writing ()"},{id:"Vocabulary",label:"Vocabulary ()"},{id:"General",label:"  (General Quiz)"}],p0=({options:r,value:e,onChange:n,placeholder:a,disabled:o})=>{const[u,f]=M.useState(!1),g=M.useRef(null);M.useEffect(()=>{const p=_=>{g.current&&!g.current.contains(_.target)&&f(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const x=r.find(p=>p.value===e&&!p.isHeader);return i.jsxs("div",{className:`relative ${u?"z-50":"z-0"}`,ref:g,children:[i.jsxs("button",{type:"button",onClick:()=>!o&&f(!u),className:`w-full px-5 py-4 rounded-2xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all
            ${o?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":u?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-800 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[i.jsx("span",{className:`truncate ${x?"":"text-gray-500"}`,children:x?x.label:a}),i.jsx(Hi,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${u?"rotate-180 text-emerald-500":""}`})]}),u&&i.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[r.map((p,_)=>{if(p.isHeader)return i.jsx("div",{className:"px-4 py-2 text-xs font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:p.label},_);const w=p.value===e;return i.jsxs("div",{onClick:()=>{n(p.value),f(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${w?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[p.label,w&&i.jsx(Xr,{className:"w-4 h-4"})]},_)}),r.length===0&&i.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},zR=({onBack:r})=>{const{user:e}=Cs(),[n,a]=M.useState("SELECTION"),[o,u]=M.useState(""),[f,g]=M.useState(""),[x,p]=M.useState("All"),[_,w]=M.useState([]),[E,O]=M.useState(!1),[z,ne]=M.useState(null),[Q,ce]=M.useState(0),[fe,oe]=M.useState({}),[we,he]=M.useState(1800),[B,S]=M.useState(null),[T,A]=M.useState(!1),[R,I]=M.useState(0),[L,C]=M.useState({}),[ie,de]=M.useState(!1),[q,le]=M.useState(null),[Z,Ee]=M.useState(!1),[Ie,D]=M.useState(!1),[Y,P]=M.useState(!1),[W,xe]=M.useState(0),[Ae,Ue]=M.useState(!1),[rt,Ce]=M.useState(null),[Et,ft]=M.useState(0),[jt,at]=M.useState(""),[mn,os]=M.useState(!1),[cs,Gs]=M.useState(!1);M.useEffect(()=>{window.scrollTo(0,0)},[n]),M.useEffect(()=>{f?_r():w([])},[f]),M.useEffect(()=>{let ue;return n==="ACTIVE"&&we>0&&(ue=setInterval(()=>{he(ye=>ye<=1?($s(),0):ye-1)},1e3)),()=>clearInterval(ue)},[n,we]),M.useEffect(()=>{let ue;return n==="ACTIVE"&&(z!=null&&z.questionDuration)&&B!==null&&(B>0?ue=setInterval(()=>{S(ye=>ye!==null&&ye>0?ye-1:0)},1e3):B===0&&us()),()=>clearInterval(ue)},[n,z,B]),M.useEffect(()=>{z!=null&&z.questionDuration?S(z.questionDuration):S(null)},[Q,z]),M.useEffect(()=>{if(n!=="ACTIVE")return;const ue=()=>{xe(Oe=>{const Ke=Oe+1;return Ke===1?D(!0):Ke>=2&&(D(!1),P(!0)),Ke})},ye=()=>{document.hidden&&ue()},je=Oe=>{(Oe.key==="PrintScreen"||Oe.ctrlKey&&Oe.key==="p"||Oe.metaKey&&Oe.shiftKey)&&(Oe.preventDefault(),ue())},ge=Oe=>Oe.preventDefault();return document.addEventListener("visibilitychange",ye),document.addEventListener("keydown",je),document.addEventListener("contextmenu",ge),document.addEventListener("copy",ge),document.addEventListener("paste",ge),document.addEventListener("cut",ge),document.addEventListener("selectstart",ge),()=>{document.removeEventListener("visibilitychange",ye),document.removeEventListener("keydown",je),document.removeEventListener("contextmenu",ge),document.removeEventListener("copy",ge),document.removeEventListener("paste",ge),document.removeEventListener("cut",ge),document.removeEventListener("selectstart",ge)}},[n]);const _r=async()=>{O(!0);try{const ue=Qt(nt(Me,"quizzes"),as("grade","==",f)),ye=await an(ue),je=[];ye.forEach(ge=>{je.push({id:ge.id,...ge.data()})}),w(je)}catch(ue){console.error("Error fetching quizzes:",ue)}finally{O(!1)}},It=Array.from(new Set(_.map(ue=>ue.subject))),Rt=_.filter(ue=>{const ye=o?ue.subject===o:!0,je=x&&x!=="All"?ue.category===x:!0;return ye&&je}),on=ue=>{le(ue),de(!0)},ra=ue=>{if(!ue.questions||ue.questions.length===0){alert("      ");return}const je=[...ue.questions].sort(()=>Math.random()-.5).map(wt=>{if(wt.type==="MCQ"||wt.type==="TF"){const ot=wt.options.map((cn,hi)=>({opt:cn,originalIndex:hi}));ot.sort(()=>Math.random()-.5);const ct=ot.map(cn=>cn.opt),Vt=ot.findIndex(cn=>cn.originalIndex===wt.correctAnswer);return{...wt,options:ct,correctAnswer:Vt}}return wt}),ge={...ue,questions:je},Oe={};je.forEach((wt,ot)=>{if(wt.type==="REORDER"){const ct=wt.options.map((Vt,cn)=>cn);for(let Vt=ct.length-1;Vt>0;Vt--){const cn=Math.floor(Math.random()*(Vt+1));[ct[Vt],ct[cn]]=[ct[cn],ct[Vt]]}Oe[ot]=ct}}),C(Oe),ne(ge),ce(0),oe({});const Ke=ue.duration?ue.duration*60:1800;he(Ke),I(0),xe(0),P(!1),ft(0),at(""),Gs(!1),de(!1),le(null),a("ACTIVE")},aa=()=>{q&&ra(q)},kt=ue=>{oe(ye=>({...ye,[Q]:ue}))},us=()=>{z&&(S(null),Q<z.questions.length-1?ce(ue=>ue+1):$s())},$s=async()=>{if(!z||!e){a("RESULT");return}A(!0);const ue=ia(),ye=Math.round(ue/z.questions.length*100);let je=0;try{const ge=Qt(nt(Me,"quiz_results"),as("userId","==",e.uid),as("quizId","==",z.id));(await an(ge)).empty?je=ue*30:je=ue*5}catch(ge){console.error("Error checking previous attempts:",ge),je=ue*1}I(je);try{await Kn(nt(Me,"quiz_results"),{userId:e.uid,userName:e.displayName,quizId:z.id||"unknown",quizTitle:z.title,subject:z.subject,score:ue,totalQuestions:z.questions.length,percentage:ye,passed:ye>=50,earnedXP:je,createdAt:In()});const ge=ls(Me,"users",e.uid);await np(ge,{totalXP:W0(je),quizzesCompleted:W0(1),lastQuizDate:In(),role:"student",email:e.email,displayName:e.displayName},{merge:!0})}catch(ge){console.error("Error saving quiz result:",ge)}finally{A(!1),a("RESULT")}},Nr=async()=>{if(Et!==0&&!(!z||!e)){os(!0);try{await Kn(nt(Me,"reviews"),{type:"quiz",targetId:z.id,targetTitle:z.title,teacherId:z.createdBy||"teacher",teacherName:z.teacherName||"",rating:Et,comment:jt,studentId:e.uid,studentName:e.displayName,createdAt:In()}),Gs(!0)}catch(ue){console.error("Error saving review:",ue),alert("    ")}finally{os(!1)}}},gn=ue=>{const ye=Math.floor(ue/60),je=ue%60;return`${ye}:${je<10?"0":""}${je}`},ia=()=>{if(!z)return 0;let ue=0;return z.questions.forEach((ye,je)=>{if(ye.type==="REORDER"){const ge=fe[je];if(ge&&ge.length===ye.options.length){let Oe=!0;for(let Ke=0;Ke<ye.options.length;Ke++)if(ge[Ke]!==Ke){Oe=!1;break}Oe&&ue++}}else fe[je]===ye.correctAnswer&&ue++}),ue},la=()=>{Ee(!0)},re=()=>{Ee(!1),a("SELECTION")},$e=()=>{P(!1),a("SELECTION")},Le=ue=>{Ce(ue),Ue(!0)},Qe=()=>{if(Ue(!1),rt==="REVIEW")a("REVIEW");else if(rt==="RETAKE"){const ue=_.find(ye=>ye.id===(z==null?void 0:z.id));ue?ra(ue):a("SELECTION")}else rt==="LIST"?a("SELECTION"):rt==="HOME"&&r();Ce(null)},Mt=(ue,ye)=>{const je=fe[Q]||[];kt(ye?[...je,ue]:je.filter(ge=>ge!==ue))},et=({title:ue,message:ye,onConfirm:je,onCancel:ge,icon:Oe=$r,confirmText:Ke="",cancelText:wt="",confirmColor:ot="emerald"})=>i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-md transition-opacity",onClick:ge}),i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] p-8 max-w-sm w-full relative z-10 animate-fade-in-up text-center border border-white/10 shadow-2xl shadow-black/50",children:[i.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg border-4 border-gray-800 ${ot==="red"?"bg-red-500/20":"bg-emerald-500/20"}`,children:i.jsx(Oe,{className:`w-10 h-10 ${ot==="red"?"text-red-500":"text-emerald-500"}`})}),i.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:ue}),i.jsx("p",{className:"text-gray-400 mb-8 text-base font-medium leading-relaxed",children:ye}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:je,className:`flex-1 py-3.5 rounded-xl font-bold text-white transition-all transform hover:scale-105 active:scale-95 shadow-lg ${ot==="red"?"bg-gradient-to-r from-red-600 to-pink-600 shadow-red-900/30":"bg-gradient-to-r from-emerald-500 to-teal-600 shadow-emerald-900/30"}`,children:Ke}),i.jsx("button",{onClick:ge,className:"flex-1 bg-gray-800 text-gray-300 py-3.5 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-gray-700",children:wt})]})]})]}),Er=()=>{const ue=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(ge=>({label:` ${ge}`,value:ge.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"   -   ",value:"English Major - QOU"}],ye=[{label:"  ",value:""},...It.map(ge=>({label:String(ge),value:String(ge)}))],je=PR.map(ge=>({label:ge.label,value:ge.id}));return i.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8 animate-fade-in relative z-10",children:[i.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(156, 163, 175, 0.5);
          border-radius: 20px;
        }
      `}),i.jsxs("div",{className:"mb-8 text-center",children:[i.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm md:text-base",children:"       "})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-6",children:[i.jsxs("div",{className:"lg:col-span-7 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-30",children:[i.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(ei,{className:"w-5 h-5 text-emerald-400"})}),"     "]}),i.jsx(p0,{options:ue,value:f,onChange:ge=>{g(ge),u(""),p("All")},placeholder:"--    --"})]}),i.jsxs("div",{className:"lg:col-span-5 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-20",children:[i.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(Mn,{className:"w-5 h-5 text-emerald-400"})})," "]}),i.jsx(p0,{options:ye,value:o,onChange:u,placeholder:f?" ":"   ",disabled:!f})]})]}),f&&i.jsx("div",{className:"mb-10 animate-fade-in relative z-10",children:i.jsxs("div",{className:"bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700",children:[i.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx($1,{className:"w-5 h-5 text-emerald-400"})}),"  ()"]}),i.jsx(p0,{options:je,value:x,onChange:p,placeholder:"  "})]})}),f&&i.jsxs("div",{className:"space-y-6 animate-fade-in-up relative z-0",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-100 border-r-4 border-emerald-500 pr-3 flex items-center gap-2",children:[i.jsx(q4,{className:"w-5 h-5"})," "]}),E?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(At,{className:"w-8 h-8 animate-spin text-emerald-400"})}):_.length===0?i.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(br,{className:"w-8 h-8 text-gray-500"})}),i.jsx("p",{className:"text-gray-400 font-medium",children:"      "})]}):Rt.length===0?i.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(br,{className:"w-8 h-8 text-gray-500"})}),i.jsx("p",{className:"text-gray-400 font-medium",children:"     "})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Rt.map(ge=>i.jsxs("div",{className:"bg-gray-900 rounded-2xl shadow-sm border border-gray-700 p-5 hover:shadow-md hover:border-emerald-600 transition-all group",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("span",{className:"bg-emerald-900/50 text-emerald-300 text-[10px] font-bold px-2 py-1 rounded-md w-fit",children:ge.subject}),ge.category&&i.jsx("span",{className:"bg-blue-900/50 text-blue-300 text-[10px] font-bold px-2 py-1 rounded-md w-fit border border-blue-800",children:ge.category==="General"?"General Quiz":ge.category})]}),i.jsxs("div",{className:"flex flex-col items-end gap-1",children:[i.jsxs("span",{className:"text-gray-500 text-xs",children:[ge.questions.length," "]}),i.jsx("span",{className:"text-gray-500 text-xs bg-gray-800 px-1.5 py-0.5 rounded",children:ge.duration?`${ge.duration} `:"30 "})]})]}),i.jsx("h4",{className:"text-base font-bold text-white mb-2 line-clamp-2",children:ge.title}),i.jsxs("div",{className:"flex items-center gap-1 text-gray-400 text-xs mb-5",children:[i.jsx(Kd,{className:"w-3 h-3"}),i.jsx("span",{children:ge.grade==="English Major - QOU"?"  ":` ${ge.grade}`})]}),i.jsxs("button",{onClick:()=>on(ge),className:"w-full bg-emerald-900/30 text-emerald-400 border border-emerald-800 py-2.5 rounded-xl font-bold text-sm group-hover:bg-emerald-600 group-hover:text-white transition-all flex items-center justify-center gap-2",children:[" ",i.jsx(Bd,{className:"w-4 h-4"})]})]},ge.id))})]}),ie&&i.jsx(et,{title:"  ",message:`   ${q==null?void 0:q.title} `,onConfirm:aa,onCancel:()=>de(!1),confirmText:" ",cancelText:"",icon:$r})]})},kn=()=>{if(!z||!z.questions||!z.questions[Q])return i.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-900 gap-4",children:[i.jsx("div",{className:"text-red-500 font-bold text-lg",children:"    "}),i.jsx("button",{onClick:()=>a("SELECTION"),className:"text-blue-400 underline",children:" "})]});const ue=z.questions[Q],ye=ue.type==="REORDER";let je=!1;if(ye){const ct=fe[Q];je=ct!==void 0&&ct.length===ue.options.length}else je=fe[Q]!==void 0;const ge=Q===z.questions.length-1,Oe=z.subject.toLowerCase().includes("english")||z.subject.includes("")||z.subject.includes(""),Ke=Oe?"ltr":"rtl",wt=Oe?"text-left":"text-right",ot={sm:"text-sm leading-relaxed",md:"text-base leading-relaxed",lg:"text-xl leading-loose",xl:"text-2xl leading-loose"}[ue.passageFontSize||"md"];return i.jsxs("div",{className:"fixed inset-0 z-[9999] bg-gray-950 overflow-y-auto select-none",onContextMenu:ct=>ct.preventDefault(),style:{WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none",WebkitTouchCallout:"none"},children:[i.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1e-JYkv-JKpi3PBXLAB5qy2E5UG4klP6j",alt:"Active Quiz Background",className:"w-full h-full object-cover opacity-20"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/90 via-gray-900/40 to-gray-950/90"}),i.jsx("div",{className:"absolute inset-0 shadow-[inset_0_0_150px_rgba(0,0,0,0.9)]"})]}),Y&&i.jsx(et,{title:"   ",message:"      .   .",onConfirm:$e,onCancel:()=>{},confirmText:"",cancelText:"",icon:E5,confirmColor:"red"}),Ie&&!Y&&i.jsx(et,{title:" !",message:"     .   .",onConfirm:()=>D(!1),onCancel:()=>{},confirmText:"",cancelText:"",icon:U5,confirmColor:"red"}),Z&&i.jsx(et,{title:" ",message:"       .",onConfirm:re,onCancel:()=>Ee(!1),confirmText:" ",cancelText:"",icon:$d,confirmColor:"red"}),i.jsxs("div",{className:"bg-gray-950/80 backdrop-blur-md border-b border-gray-700 sticky top-0 z-50 shadow-sm relative",children:[i.jsxs("div",{className:"max-w-4xl mx-auto px-3 h-16 flex justify-between items-center",children:[i.jsxs("button",{onClick:la,className:"flex items-center gap-2 text-red-500 hover:bg-red-900/20 px-3 py-1.5 rounded-lg transition-colors font-bold text-sm",children:[i.jsx($d,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:""})]}),i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center gap-1",children:i.jsxs("div",{className:`flex items-center gap-2 px-4 py-1.5 rounded-full font-mono font-bold text-base shadow-inner border border-gray-600 ${we<300?"bg-red-900/50 text-red-200 animate-pulse":"bg-gray-700 text-emerald-400"}`,children:[i.jsx(eg,{className:"w-4 h-4"}),gn(we)]})}),i.jsxs("div",{className:"text-xs font-bold text-gray-400",children:[Q+1," / ",z.questions.length]})]}),i.jsx("div",{className:"w-full bg-gray-700 h-1",children:i.jsx("div",{className:"bg-emerald-500 h-full transition-all duration-500 ease-out",style:{width:`${(Q+1)/z.questions.length*100}%`}})})]}),B!==null&&z.questionDuration&&i.jsxs("div",{className:"max-w-3xl mx-auto px-4 mt-4 relative z-10",children:[i.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full transition-all duration-1000 linear ${B<10?"bg-red-500":"bg-blue-500"}`,style:{width:`${B/z.questionDuration*100}%`}})}),i.jsxs("div",{className:"text-center mt-1 text-xs font-bold text-gray-500",children:[" : ",B," "]})]}),i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 relative z-10",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden animate-fade-in-up",dir:Ke,children:[i.jsxs("div",{className:"bg-gray-800/50 border-b border-gray-700 p-4 flex items-center justify-between",children:[i.jsx("h2",{className:"font-bold text-gray-200 text-sm md:text-base",children:z.title}),i.jsx("div",{className:"bg-gray-700 p-1.5 rounded-lg shadow-sm",children:ye?i.jsx(B1,{className:"w-4 h-4 text-emerald-500"}):i.jsx(qa,{className:"w-4 h-4 text-gray-300"})})]}),i.jsxs("div",{className:"p-6 md:p-8",children:[ue.passageContent&&i.jsxs("div",{className:"mb-8",children:[ue.generalInstruction&&i.jsx("div",{className:`text-gray-400 font-bold mb-3 text-sm bg-gray-800/50 px-4 py-2.5 rounded-xl border-l-4 border-emerald-500 ${wt}`,children:ue.generalInstruction}),i.jsx("div",{className:`bg-blue-900/20 p-5 rounded-2xl border border-blue-800 ${wt}`,children:i.jsx("div",{className:`text-gray-200 whitespace-pre-wrap font-medium ${ot}`,children:ue.passageContent})})]}),i.jsx("h3",{className:`text-lg md:text-2xl font-black text-white leading-relaxed mb-8 ${wt}`,children:ue.question}),ye?i.jsxs("div",{className:"space-y-6",dir:"ltr",children:[i.jsxs("div",{className:"min-h-[120px] p-4 bg-gray-950/50 rounded-2xl border-2 border-dashed border-gray-600 flex flex-wrap gap-2 items-start content-start transition-all",children:[(fe[Q]||[]).map((ct,Vt)=>i.jsx("button",{onClick:()=>Mt(ct,!1),className:"bg-emerald-600 text-white px-4 py-2 rounded-xl font-bold shadow-md hover:bg-red-500 transition-colors animate-fade-in",children:ue.options[ct]},`ans-${Vt}`)),(!fe[Q]||fe[Q].length===0)&&i.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm font-medium italic",children:"      "})]}),i.jsx("div",{className:"flex flex-wrap gap-3 justify-center bg-gray-900 p-4 rounded-2xl border border-gray-700",children:(L[Q]||[]).filter(ct=>!(fe[Q]||[]).includes(ct)).map((ct,Vt)=>i.jsx("button",{onClick:()=>Mt(ct,!0),className:"bg-gray-800 border-2 border-gray-700 text-gray-200 px-4 py-2 rounded-xl font-bold shadow-sm hover:border-emerald-500 hover:text-emerald-400 transition-all transform hover:scale-105 active:scale-95",children:ue.options[ct]},`bank-${Vt}`))}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:()=>kt([]),className:"text-xs font-bold text-gray-400 hover:text-red-500 flex items-center gap-1",children:[i.jsx(H1,{className:"w-3 h-3"})," "]})})]}):i.jsx("div",{className:"space-y-3",children:ue.options.map((ct,Vt)=>i.jsxs("button",{onClick:()=>kt(Vt),className:`w-full ${wt} p-4 rounded-xl border-2 transition-all flex items-center justify-between group hover:scale-[1.01] active:scale-[0.99] duration-200 ${fe[Q]===Vt?"border-emerald-500 bg-emerald-900/30 shadow-md ring-2 ring-emerald-900":"border-gray-700 bg-gray-900 hover:bg-gray-800 hover:border-gray-600 shadow-sm"}`,children:[i.jsx("span",{className:`text-base font-bold ${fe[Q]===Vt?"text-emerald-300":"text-gray-300"}`,children:ct}),i.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center shrink-0 ml-2 transition-colors ${fe[Q]===Vt?"border-emerald-600 bg-emerald-600":"border-gray-600 group-hover:border-emerald-400"}`,children:fe[Q]===Vt&&i.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})})]},Vt))})]})]}),i.jsx("div",{className:"mt-8 flex justify-end",children:i.jsx("button",{onClick:us,disabled:!je||T,className:`w-full sm:w-auto px-10 py-4 rounded-2xl font-bold text-lg flex items-center justify-center gap-2 shadow-xl transition-all ${!je||T?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-emerald-600 text-white hover:bg-emerald-700 hover:shadow-emerald-500/20 active:scale-95"}`,children:T?i.jsxs(i.Fragment,{children:["  ",i.jsx(At,{className:"w-5 h-5 animate-spin"})]}):i.jsxs(i.Fragment,{children:[ge?" ":" ",Ke==="rtl"?i.jsx(Bd,{className:"w-5 h-5"}):i.jsx($t,{className:"w-5 h-5"})]})})})]})]})},Qs=()=>{if(!z)return null;const ue=ia(),ye=z.questions.length,je=Math.round(ue/ye*100);let ge="text-red-500",Oe=d4,Ke=" ";je>=90?(ge="text-emerald-500",Oe=ao,Ke="!"):je>=75?(ge="text-blue-500",Oe=ro,Ke="!"):je>=50&&(ge="text-yellow-500",Oe=Xr,Ke=" ");const wt=Oe;return i.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center p-4 animate-fade-in overflow-y-auto",children:[i.jsxs("div",{className:"w-full max-w-xs bg-gray-900 rounded-[2rem] border border-gray-800 p-5 relative overflow-hidden text-center",children:[i.jsxs("div",{className:"flex flex-col items-center mb-4",children:[i.jsx(wt,{className:`w-14 h-14 ${ge} mb-2 drop-shadow-md`}),i.jsx("h2",{className:"text-xl font-black text-white mb-1",children:Ke}),i.jsx("p",{className:"text-gray-400 font-medium text-xs mb-2",children:z.title}),i.jsxs("div",{className:"inline-flex items-center gap-1 bg-gray-800 px-2 py-0.5 rounded-full border border-gray-700",children:[i.jsx(Fd,{className:"w-3 h-3 text-yellow-400 fill-yellow-400"}),i.jsxs("span",{className:"font-bold text-white text-xs",children:["+",R," XP"]})]})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-4 text-center mb-5 border border-gray-800",children:[i.jsx("div",{className:"text-xs text-gray-500 font-bold uppercase tracking-wider mb-1",children:" "}),i.jsxs("span",{className:`text-5xl font-black ${ge}`,children:[je,"%"]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:()=>Le("REVIEW"),className:"w-full py-3 bg-white text-gray-900 font-black text-sm rounded-xl hover:bg-gray-100 transition-all flex items-center justify-center gap-2 active:scale-95 shadow-md",children:[i.jsx(w0,{className:"w-4 h-4"}),"  "]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("button",{onClick:()=>Le("HOME"),className:"py-3 bg-emerald-600 text-white font-bold rounded-xl hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 text-xs shadow-lg shadow-emerald-900/20",children:[i.jsx(Gd,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>Le("RETAKE"),className:"py-3 bg-emerald-600 text-white font-bold rounded-xl hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 text-xs shadow-lg shadow-emerald-900/20",children:[i.jsx(sg,{className:"w-4 h-4"}),"  "]})]})]})]}),i.jsx("div",{className:"w-full max-w-xs bg-gray-900 rounded-[2rem] border border-gray-800 p-6 text-center relative mt-4",children:cs?i.jsxs("div",{className:"py-4",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-400 mb-1",children:[i.jsx(Xr,{className:"w-5 h-5"}),i.jsx("h3",{className:"font-bold text-sm",children:" !"})]}),i.jsx("p",{className:"text-gray-500 text-xs",children:"   ."})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3 text-white",children:[i.jsx(yh,{className:"w-4 h-4 text-yellow-400"}),i.jsx("h3",{className:"font-bold text-sm",children:"  "})]}),i.jsx("div",{className:"flex justify-center gap-1.5 mb-3 flex-wrap",children:[1,2,3,4,5,6,7,8,9,10].map(ot=>i.jsx("button",{onClick:()=>ft(ot),className:`w-8 h-8 rounded-lg text-sm font-bold transition-all ${Et===ot?"bg-yellow-500 text-gray-900 scale-110":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:ot},ot))}),i.jsx("textarea",{value:jt,onChange:ot=>at(ot.target.value),placeholder:"  ()...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl p-3 text-xs text-white outline-none focus:border-yellow-500 mb-3 min-h-[60px] resize-none"}),i.jsxs("button",{onClick:Nr,disabled:mn||Et===0,className:`w-full py-2.5 rounded-xl font-bold text-xs flex items-center justify-center gap-2 transition-all ${Et===0?"bg-gray-800 text-gray-600 cursor-not-allowed":"bg-yellow-600 text-white hover:bg-yellow-700"}`,children:[mn?i.jsx(At,{className:"w-3 h-3 animate-spin"}):i.jsx(Xa,{className:"w-3 h-3"}),""]})]})})]})},Ln=()=>i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 animate-fade-in text-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(w0,{className:"w-5 h-5 text-emerald-400"})," "]}),i.jsxs("button",{onClick:()=>a("RESULT"),className:"text-gray-400 hover:text-white font-medium flex items-center gap-1 text-sm",children:[i.jsx($t,{className:"w-4 h-4"})," "]})]}),i.jsx("div",{className:"space-y-6",children:z==null?void 0:z.questions.map((ue,ye)=>{const je=ue.type==="REORDER";let ge=!1,Oe=null;if(je){const Ke=fe[ye];Ke?(Oe=Ke.map(wt=>ue.options[wt]).join(" "),ge=Ke.length===ue.options.length&&Ke.every((wt,ot)=>wt===ot)):(Oe="  ",ge=!1)}else{const Ke=fe[ye];ge=Ke===ue.correctAnswer,Oe=Ke!==void 0?ue.options[Ke]:"  "}return i.jsxs("div",{className:`bg-gray-900 rounded-2xl shadow-sm border p-5 ${ge?"border-gray-700":"border-red-900/50"}`,children:[i.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[i.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0 mt-0.5 ${ge?"bg-emerald-900 text-emerald-300":"bg-red-900 text-red-300"}`,children:ye+1}),i.jsx("h3",{className:"text-base font-bold text-white leading-relaxed",children:ue.question})]}),i.jsxs("div",{className:`p-3 rounded-xl border text-sm ${ge?"bg-emerald-900/20 border-emerald-500":"bg-red-900/20 border-red-500"}`,children:[i.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:":"}),i.jsx("span",{className:"font-bold",children:Oe})]}),!ge&&i.jsxs("div",{className:"mt-2 p-3 rounded-xl border bg-gray-800 border-gray-700 text-sm",children:[i.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:" :"}),i.jsx("span",{className:"font-bold text-emerald-400",children:je?ue.options.join(" "):ue.options[ue.correctAnswer]})]}),ue.explanation&&i.jsxs("div",{className:"mt-3 p-3 bg-yellow-900/20 border border-yellow-800 rounded-xl text-sm text-yellow-200 animate-fade-in",children:[i.jsxs("span",{className:"font-bold block mb-1 flex items-center gap-1",children:[i.jsx($r,{className:"w-3 h-3"}),":"]}),i.jsx("p",{className:"leading-relaxed opacity-90",children:ue.explanation})]})]},ue.id)})})]});return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 text-gray-100",children:[n==="SELECTION"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1NKy8h05zQTNaEJ9C35Rzwys5QXFUxFHD",alt:"Background",className:"w-full h-full object-cover opacity-25"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/80 via-gray-900/20 to-gray-950"}),i.jsx("div",{className:"absolute inset-0 shadow-[inset_0_0_150px_rgba(0,0,0,0.9)]"})]}),i.jsx("div",{className:"bg-gray-950/80 backdrop-blur-md border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm relative",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx($t,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),Er()]}),n==="ACTIVE"&&kn(),n==="RESULT"&&Qs(),n==="REVIEW"&&Ln(),Ae&&i.jsx(et,{title:"  ",message:rt==="REVIEW"?"   ":rt==="RETAKE"?"     ":rt==="LIST"?"    ":"    ",onConfirm:Qe,onCancel:()=>Ue(!1),confirmText:"",cancelText:"",icon:r5})]})},UR=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),qR=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),BR=({onBack:r})=>{const e=[{name:".   ",image:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",title:"  ",school:"  ",location:" ",color:"emerald",bio:"         .              .",skills:["  ","  "],social:{facebook:"#",whatsapp:"https://wa.me/972568401548",telegram:"https://t.me/yazan1342"}},{name:".   ",image:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",title:"  ",school:"  ",location:" ",color:"blue",bio:"       .                .",skills:[" "],social:{facebook:"#",whatsapp:"#",telegram:"#"}}];return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx($t,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h1",{className:"text-4xl font-black text-white mb-4",children:"  "}),i.jsx("p",{className:"text-xl text-gray-400",children:"       "})]}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:e.map((n,a)=>i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-lg border border-white/5 flex flex-col hover:shadow-2xl transition-all duration-300 p-8 hover:border-emerald-500/20",children:[i.jsx("div",{className:"flex justify-center mb-8",children:i.jsx("div",{className:"w-48 h-48 rounded-full p-1 bg-gray-800 shadow-md border border-white/5",children:i.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full rounded-full object-cover"})})}),i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:n.name}),i.jsx("p",{className:`text-${n.color}-400 font-bold text-lg mb-4`,children:n.title}),i.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-gray-400 text-sm font-medium",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(WE,{className:"w-4 h-4"}),n.school]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(E0,{className:"w-4 h-4"}),n.location]})]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"mb-8 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[i.jsx(ti,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),i.jsx("h3",{className:"font-bold text-white",children:" "})]}),i.jsx("p",{className:"text-gray-300 leading-relaxed text-sm",children:n.bio})]}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center justify-center gap-2",children:[i.jsx(ro,{className:`w-5 h-5 text-${n.color}-400`})," "]}),i.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:n.skills.map((o,u)=>i.jsx("span",{className:`bg-${n.color}-900/20 text-${n.color}-300 px-4 py-2 rounded-xl text-sm font-bold border border-${n.color}-900/30`,children:o},u))})]})]}),i.jsx("div",{className:"pt-6 border-t border-white/5",children:i.jsxs("div",{className:"flex justify-center gap-4",children:[i.jsx("a",{href:n.social.facebook,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-blue-900/20 text-blue-400 flex items-center justify-center hover:bg-blue-600 hover:text-white transition-all border border-blue-900/30",children:i.jsx(_0,{className:"w-5 h-5"})}),i.jsx("a",{href:n.social.whatsapp,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-green-900/20 text-green-400 flex items-center justify-center hover:bg-green-600 hover:text-white transition-all border border-green-900/30",children:i.jsx(UR,{className:"w-5 h-5"})}),i.jsx("a",{href:n.social.telegram,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-sky-900/20 text-sky-400 flex items-center justify-center hover:bg-sky-600 hover:text-white transition-all border border-sky-900/30",children:i.jsx(qR,{className:"w-5 h-5"})})]})})]},a))})]})]})},HR=({onBack:r})=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx($t,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"relative bg-emerald-900/20 py-20 overflow-hidden border-b border-white/5",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 relative z-10 text-center",children:[i.jsx("span",{className:"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30 px-4 py-1 rounded-full text-sm font-medium mb-6 inline-block backdrop-blur-sm",children:"    "}),i.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-6 leading-tight",children:["   ",i.jsx("br",{}),"   "]}),i.jsx("p",{className:"text-gray-300 text-xl max-w-2xl mx-auto leading-relaxed",children:"                    ."})]})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-20",children:[i.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-900/30 rounded-2xl flex items-center justify-center mb-6 border border-blue-500/20",children:i.jsx(w0,{className:"w-8 h-8 text-blue-400"})}),i.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),i.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                   ."})]}),i.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-2xl flex items-center justify-center mb-6 border border-emerald-500/20",children:i.jsx(rg,{className:"w-8 h-8 text-emerald-400"})}),i.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),i.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                  ."})]})]}),i.jsxs("div",{className:"mb-20",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"   "}),i.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{icon:F1,title:" ",desc:"       ."},{icon:I4,title:" ",desc:"           ."},{icon:U1,title:" ",desc:"         ."},{icon:ag,title:" ",desc:"          ."}].map((e,n)=>i.jsxs("div",{className:"bg-gray-900 p-6 rounded-2xl border border-white/5 text-center hover:border-emerald-500/30 transition-all group hover:-translate-y-1",children:[i.jsx("div",{className:"w-14 h-14 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-emerald-900/30 transition-colors border border-white/5",children:i.jsx(e.icon,{className:"w-7 h-7 text-gray-300 group-hover:text-emerald-400"})}),i.jsx("h3",{className:"font-bold text-white text-lg mb-2",children:e.title}),i.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:e.desc})]},n))})]})]})]}),D1=({options:r,value:e,onChange:n,placeholder:a,disabled:o})=>{const[u,f]=M.useState(!1),g=M.useRef(null);M.useEffect(()=>{const p=_=>{g.current&&!g.current.contains(_.target)&&f(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const x=r.find(p=>p.value===e&&!p.isHeader);return i.jsxs("div",{className:`relative ${u?"z-50":"z-0"}`,ref:g,children:[i.jsxs("button",{type:"button",onClick:()=>!o&&f(!u),className:`w-full px-5 py-4 rounded-2xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all
            ${o?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":u?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-700 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[i.jsx("span",{className:`truncate ${x?"":"text-gray-500"}`,children:x?x.label:a}),i.jsx(Hi,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${u?"rotate-180 text-emerald-500":""}`})]}),u&&i.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[r.map((p,_)=>{if(p.isHeader)return i.jsx("div",{className:"px-4 py-2 text-xs font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:p.label},_);const w=p.value===e;return i.jsxs("div",{onClick:()=>{n(p.value),f(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${w?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[p.label,w&&i.jsx(Xr,{className:"w-4 h-4"})]},_)}),r.length===0&&i.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},FR=({onBack:r})=>{const[e,n]=M.useState(""),[a,o]=M.useState(""),[u,f]=M.useState("SELECTION"),[g,x]=M.useState(["handouts"]),[p,_]=M.useState([]),[w,E]=M.useState(!1);M.useEffect(()=>{u==="CONTENT"&&a&&e&&O()},[u,a,e]);const O=async()=>{E(!0);try{const he=Qt(nt(Me,"study_materials"),as("grade","==",a),as("subject","==",e)),B=await an(he),S=[];B.forEach(T=>{S.push({id:T.id,...T.data()})}),S.sort((T,A)=>{var L,C;const R=((L=T.createdAt)==null?void 0:L.seconds)||0;return(((C=A.createdAt)==null?void 0:C.seconds)||0)-R}),_(S)}catch(he){console.error("Error fetching materials:",he)}finally{E(!1)}},z=()=>{e&&a&&f("CONTENT")},ne=he=>{x(B=>B.includes(he)?B.filter(S=>S!==he):[...B,he])},Q=()=>{const he=p.filter(T=>T.category==="handouts"),B=p.filter(T=>T.category==="worksheets"),S=p.filter(T=>T.category==="exams");return[{id:"handouts",title:" ",files:he},{id:"worksheets",title:" ",files:B},{id:"exams",title:" ",files:S}]},ce=he=>he?(he.toDate?he.toDate():new Date(he.seconds*1e3)).toLocaleDateString("ar-EG"):"",fe=Q(),oe=()=>{const he=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(S=>({label:` ${S}`,value:S.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"   -   ",value:"English Major - QOU"}],B=[{label:"  (English)",value:"English"},{label:"",value:"Math"},{label:"",value:"Science"}];return i.jsxs("div",{className:"w-full animate-fade-in pb-20 bg-gray-950 min-h-screen text-gray-100",children:[i.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(156, 163, 175, 0.5);
          border-radius: 20px;
        }
      `}),i.jsxs("div",{className:"relative pt-32 pb-56 px-4 overflow-hidden rounded-b-[3.5rem] shadow-2xl shadow-gray-900/50 mb-20 border-b border-white/5",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1gSDH-0a3cWa8m8APr5qXGkKxINXZcSid",alt:"Background",className:"w-full h-full object-cover object-center scale-105 opacity-50"}),i.jsx("div",{className:"absolute inset-0 bg-emerald-900/80 mix-blend-multiply"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/90"})]}),i.jsxs("div",{className:"max-w-4xl mx-auto text-center relative z-10",children:[i.jsx("div",{className:"inline-flex items-center justify-center p-5 bg-white/10 backdrop-blur-md rounded-3xl mb-6 border border-white/20 shadow-inner ring-1 ring-white/30 animate-fade-in-up",children:i.jsx(pc,{className:"w-10 h-10 text-white drop-shadow-md"})}),i.jsx("h2",{className:"text-5xl md:text-7xl font-black text-white mb-6 tracking-tight drop-shadow-2xl animate-fade-in-up delay-100",children:"  "}),i.jsx("p",{className:"text-white/95 text-xl md:text-2xl max-w-3xl mx-auto font-medium leading-relaxed drop-shadow-lg mb-8 animate-fade-in-up delay-200",children:"         PDF.      ."})]})]}),i.jsx("div",{className:"max-w-4xl mx-auto px-6 -mt-40 relative z-20 animate-fade-in-up delay-300",children:i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-2xl border border-white/5 p-8 md:p-12 backdrop-blur-xl",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-10",children:[i.jsxs("div",{className:"group relative z-20",children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2 group-hover:text-emerald-400 transition-colors",children:[i.jsx("div",{className:"p-2 bg-emerald-900/20 rounded-lg group-hover:bg-emerald-900/40 transition-colors",children:i.jsx(Mn,{className:"w-5 h-5 text-emerald-400"})})," "]}),i.jsx(D1,{options:B,value:e,onChange:n,placeholder:" "})]}),i.jsxs("div",{className:"group relative z-10",children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2 group-hover:text-teal-400 transition-colors",children:[i.jsx("div",{className:"p-2 bg-teal-900/20 rounded-lg group-hover:bg-teal-900/40 transition-colors",children:i.jsx(ei,{className:"w-5 h-5 text-teal-400"})})," "]}),i.jsx(D1,{options:he,value:a,onChange:o,placeholder:" "})]})]}),i.jsxs("button",{onClick:z,disabled:!e||!a,className:`w-full py-5 rounded-2xl font-bold text-xl flex items-center justify-center gap-3 transition-all shadow-lg ${!e||!a?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-gradient-to-r from-emerald-600 to-teal-600 text-white hover:from-emerald-700 hover:to-teal-700 hover:shadow-emerald-900/50 hover:-translate-y-1"}`,children:[i.jsx(br,{className:"w-6 h-6"})," "]})]})})]})},we=()=>i.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8 animate-fade-in-up min-h-screen",children:[i.jsxs("div",{className:"text-center mb-8 bg-gray-900 p-6 rounded-3xl shadow-sm border border-white/5 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 to-teal-500"}),i.jsx("div",{className:"w-16 h-16 bg-emerald-900/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx(Ts,{className:"w-8 h-8 text-emerald-400"})}),i.jsxs("h2",{className:"text-2xl font-black text-white mb-2",children:[" ",e]}),i.jsxs("p",{className:"text-gray-400 font-medium text-sm md:text-base",children:["        ",i.jsx("span",{className:"font-bold text-emerald-400",children:a==="English Major - QOU"?"  ":a})]})]}),i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("button",{onClick:()=>f("SELECTION"),className:"flex items-center gap-2 bg-gray-800 text-gray-200 px-5 py-3 rounded-xl font-bold shadow-sm border border-gray-700 hover:border-emerald-600 hover:text-emerald-400 transition-all hover:-translate-y-0.5",children:[i.jsx($t,{className:"w-5 h-5"})," "]}),i.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-xs font-bold text-gray-400 bg-gray-800 px-3 py-1.5 rounded-lg border border-gray-700",children:[i.jsx(pc,{className:"w-3.5 h-3.5"}),fe.reduce((he,B)=>he+B.files.length,0)," "]})]}),w?i.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[i.jsx(At,{className:"w-10 h-10 animate-spin text-emerald-400"}),i.jsx("p",{className:"text-gray-400 font-bold",children:"  ..."})]}):i.jsx("div",{className:"space-y-4",children:fe.map(he=>{const B=g.includes(he.id);return i.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700 overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("button",{onClick:()=>ne(he.id),className:`w-full flex items-center justify-between p-5 transition-colors ${B?"bg-gray-700/30":"hover:bg-gray-700/30"}`,children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`p-2.5 rounded-xl ${B?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-400"}`,children:i.jsx(pc,{className:"w-6 h-6"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"font-bold text-base text-white block",children:he.title}),i.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:[he.files.length," "]})]})]}),i.jsx("div",{className:`transition-transform duration-300 ${B?"rotate-180":""}`,children:i.jsx(Hi,{className:"w-5 h-5 text-gray-400"})})]}),B&&i.jsx("div",{className:"bg-gray-900 border-t border-gray-700",children:he.files.length===0?i.jsxs("div",{className:"p-8 text-center flex flex-col items-center justify-center text-gray-400",children:[i.jsx(pc,{className:"w-10 h-10 mb-2 opacity-20"}),i.jsx("p",{className:"text-sm font-medium",children:"       "})]}):i.jsx("div",{className:"divide-y divide-gray-700/50",children:he.files.map((S,T)=>i.jsxs("div",{onClick:()=>S.url&&window.open(S.url,"_blank"),className:"flex items-center justify-between p-4 hover:bg-emerald-900/10 transition-colors group cursor-pointer",children:[i.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-900/20 flex items-center justify-center shrink-0 text-red-500",children:i.jsx(Ts,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[i.jsx("span",{className:"text-sm font-bold text-gray-200 group-hover:text-emerald-300 transition-colors whitespace-normal break-words",children:S.title}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-0.5",children:[i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:S.size}),i.jsx("span",{children:""}),i.jsx("span",{children:ce(S.createdAt)})]})]})]}),i.jsx("button",{className:"p-2.5 rounded-full bg-gray-700 text-gray-400 group-hover:bg-emerald-900/30 group-hover:text-emerald-400 transition-all shrink-0 ml-3",children:i.jsx(v0,{className:"w-5 h-5"})})]},T))})})]},he.id)})}),i.jsxs("div",{className:"mt-8 flex items-center gap-3 justify-center text-xs text-gray-400 bg-gray-800 p-4 rounded-2xl border border-dashed border-gray-700",children:[i.jsx(Hd,{className:"w-4 h-4 text-emerald-500 shrink-0"}),i.jsx("span",{children:"      PDF  "})]})]});return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 transition-colors duration-300",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-700 rounded-full transition-colors group text-gray-400 hover:text-emerald-400",children:i.jsx($t,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-emerald-400 cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),u==="SELECTION"?oe():we()]})},O1=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),M1=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),GR=({onBack:r})=>{const e=n=>{let a="";switch(n){case"message":a="       .";break;case"question":a="       ...";break;case"review":a="      .";break;case"inquiry":a="    .";break;default:a="  ."}const o=`https://wa.me/972568401548?text=${encodeURIComponent(a)}`;window.open(o,"_blank")};return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in pb-20 transition-colors duration-300 text-gray-100",children:[i.jsxs("div",{className:"relative pt-32 pb-48 px-4 overflow-hidden rounded-b-[3.5rem] shadow-2xl shadow-gray-900/50 mb-16 bg-gray-900 border-b border-white/5",children:[i.jsxs("div",{className:"absolute top-6 left-6 z-30 md:top-10 md:left-10 flex items-center gap-2 md:gap-4",children:[i.jsxs("button",{onClick:r,className:"flex items-center gap-2 bg-white/10 backdrop-blur-md text-white px-4 md:px-5 py-2.5 rounded-full font-bold hover:bg-white/20 transition-all border border-white/20 shadow-lg group",children:[i.jsx($t,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),i.jsx("span",{className:"hidden sm:inline",children:""})]}),i.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-black/40 backdrop-blur-md text-white px-4 py-2 rounded-full font-bold border border-white/10 shadow-md",children:[i.jsx("span",{className:"text-gray-300",children:""}),i.jsx("span",{className:"text-gray-500",children:"/"}),i.jsx("span",{className:"text-emerald-400",children:"  "})]})]}),i.jsxs("div",{className:"absolute inset-0 z-0 bg-gray-900",children:[i.jsxs("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover opacity-80",poster:"https://images.unsplash.com/photo-1524178232363-1fb2b075b655?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",children:[i.jsx("source",{src:"https://drive.google.com/uc?export=download&id=1gfQre4TEqHyomoSblHjn-abxK_cduc8t",type:"video/mp4"}),i.jsx("source",{src:"https://assets.mixkit.co/videos/preview/mixkit-online-learning-man-student-on-laptop-4612-large.mp4",type:"video/mp4"})]}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-900/70 via-emerald-900/40 to-gray-900/90"})]}),i.jsxs("div",{className:"relative z-10 text-center max-w-4xl mx-auto text-white",children:[i.jsx("h1",{className:"text-4xl md:text-6xl font-black mb-6 leading-tight animate-fade-in-up delay-100 drop-shadow-2xl text-emerald-400",children:"  "}),i.jsx("p",{className:"text-xl md:text-2xl text-emerald-200 font-bold max-w-2xl mx-auto leading-relaxed animate-fade-in-up delay-200 drop-shadow-lg",children:"  .             ."})]})]}),i.jsxs("div",{className:"max-w-5xl mx-auto px-4 -mt-32 relative z-20",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-12",children:[i.jsxs("button",{onClick:()=>e("message"),className:"group bg-gray-900 p-6 rounded-[2rem] shadow-xl border border-gray-700 hover:border-emerald-500 transition-all duration-300 hover:-translate-y-2 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-400 to-teal-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left"}),i.jsxs("div",{className:"flex items-center gap-5",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-900/20 rounded-2xl flex items-center justify-center text-emerald-400 group-hover:scale-110 transition-transform duration-300",children:i.jsx(Qd,{className:"w-8 h-8"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("h3",{className:"text-xl font-black text-white mb-1 group-hover:text-emerald-400 transition-colors",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"   "})]})]})]}),i.jsxs("button",{onClick:()=>e("question"),className:"group bg-gray-900 p-6 rounded-[2rem] shadow-xl border border-gray-700 hover:border-blue-500 transition-all duration-300 hover:-translate-y-2 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-400 to-indigo-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left"}),i.jsxs("div",{className:"flex items-center gap-5",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-900/20 rounded-2xl flex items-center justify-center text-blue-400 group-hover:scale-110 transition-transform duration-300",children:i.jsx($r,{className:"w-8 h-8"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("h3",{className:"text-xl font-black text-white mb-1 group-hover:text-blue-400 transition-colors",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"    "})]})]})]}),i.jsxs("button",{onClick:()=>e("review"),className:"group bg-gray-900 p-6 rounded-[2rem] shadow-xl border border-gray-700 hover:border-purple-500 transition-all duration-300 hover:-translate-y-2 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-purple-400 to-pink-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left"}),i.jsxs("div",{className:"flex items-center gap-5",children:[i.jsx("div",{className:"w-16 h-16 bg-purple-900/20 rounded-2xl flex items-center justify-center text-purple-400 group-hover:scale-110 transition-transform duration-300",children:i.jsx(E4,{className:"w-8 h-8"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("h3",{className:"text-xl font-black text-white mb-1 group-hover:text-purple-400 transition-colors",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"    "})]})]})]}),i.jsxs("button",{onClick:()=>e("inquiry"),className:"group bg-gray-900 p-6 rounded-[2rem] shadow-xl border border-gray-700 hover:border-orange-500 transition-all duration-300 hover:-translate-y-2 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-orange-400 to-amber-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left"}),i.jsxs("div",{className:"flex items-center gap-5",children:[i.jsx("div",{className:"w-16 h-16 bg-orange-900/20 rounded-2xl flex items-center justify-center text-orange-400 group-hover:scale-110 transition-transform duration-300",children:i.jsx(Kd,{className:"w-8 h-8"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("h3",{className:"text-xl font-black text-white mb-1 group-hover:text-orange-400 transition-colors",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"    "})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-gray-900/90 backdrop-blur-xl rounded-[2.5rem] p-8 shadow-2xl border border-gray-700 flex flex-col items-center text-center relative overflow-hidden group hover:shadow-xl transition-shadow",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-emerald-900/20 rounded-full blur-3xl opacity-50 -mr-10 -mt-10 pointer-events-none"}),i.jsxs("div",{className:"relative shrink-0 mb-6",children:[i.jsx("div",{className:"w-56 h-56 md:w-72 md:h-72 rounded-full p-2 bg-gradient-to-br from-emerald-400 to-teal-600 shadow-lg",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",alt:".   ",className:"w-full h-full rounded-full object-cover border-4 border-gray-800 bg-gray-700"})}),i.jsx("div",{className:"absolute -bottom-1 -right-1 bg-gray-800 p-2 rounded-full shadow-md",children:i.jsx("div",{className:"bg-green-500 w-5 h-5 rounded-full border-2 border-gray-800 animate-pulse"})})]}),i.jsxs("div",{className:"z-10",children:[i.jsx("span",{className:"text-emerald-400 font-bold tracking-wider uppercase text-sm mb-2 block",children:" "}),i.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:".   "}),i.jsx("p",{className:"text-gray-400 mb-8 font-medium text-base",children:"     ."}),i.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[i.jsxs("a",{href:"https://wa.me/972568401548",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-[#25D366] hover:bg-[#20BD5C] text-white px-6 py-3 rounded-xl font-bold text-sm transition-all shadow-md hover:-translate-y-1",children:[i.jsx(O1,{className:"w-5 h-5"}),""]}),i.jsxs("a",{href:"https://t.me/yazan1342",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-[#0088cc] hover:bg-[#0077b5] text-white px-6 py-3 rounded-xl font-bold text-sm transition-all shadow-md hover:-translate-y-1",children:[i.jsx(M1,{className:"w-5 h-5"}),""]})]})]})]}),i.jsxs("div",{className:"bg-gray-900/90 backdrop-blur-xl rounded-[2.5rem] p-8 shadow-2xl border border-gray-700 flex flex-col items-center text-center relative overflow-hidden group hover:shadow-xl transition-shadow",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-900/20 rounded-full blur-3xl opacity-50 -mr-10 -mt-10 pointer-events-none"}),i.jsxs("div",{className:"relative shrink-0 mb-6",children:[i.jsx("div",{className:"w-56 h-56 md:w-72 md:h-72 rounded-full p-2 bg-gradient-to-br from-blue-400 to-indigo-600 shadow-lg",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",alt:".   ",className:"w-full h-full rounded-full object-cover border-4 border-gray-800 bg-gray-700"})}),i.jsx("div",{className:"absolute -bottom-1 -right-1 bg-gray-800 p-2 rounded-full shadow-md",children:i.jsx("div",{className:"bg-green-500 w-5 h-5 rounded-full border-2 border-gray-800 animate-pulse"})})]}),i.jsxs("div",{className:"z-10",children:[i.jsx("span",{className:"text-blue-400 font-bold tracking-wider uppercase text-sm mb-2 block",children:" "}),i.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:".   "}),i.jsx("p",{className:"text-gray-400 mb-8 font-medium text-base",children:"      ."}),i.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[i.jsxs("button",{className:"flex items-center gap-2 bg-[#25D366] hover:bg-[#20BD5C] text-white px-6 py-3 rounded-xl font-bold text-sm transition-all shadow-md hover:-translate-y-1 opacity-80 cursor-not-allowed",disabled:!0,children:[i.jsx(O1,{className:"w-5 h-5"}),""]}),i.jsxs("button",{className:"flex items-center gap-2 bg-[#0088cc] hover:bg-[#0077b5] text-white px-6 py-3 rounded-xl font-bold text-sm transition-all shadow-md hover:-translate-y-1 opacity-80 cursor-not-allowed",disabled:!0,children:[i.jsx(M1,{className:"w-5 h-5"}),""]})]})]})]})]})]})]})},V1=[{minLevel:1,title:" ",icon:tg},{minLevel:5,title:" ",icon:Mn},{minLevel:10,title:"",icon:br},{minLevel:15,title:" ",icon:ro},{minLevel:20,title:"",icon:bh},{minLevel:30,title:"",icon:ao}],$R=({onLoginClick:r})=>{const[e,n]=M.useState([]),[a,o]=M.useState(!0),{user:u}=Cs(),[f,g]=M.useState(0),[x,p]=M.useState(0),[_,w]=M.useState(0),[E,O]=M.useState(null),[z,ne]=M.useState(null),[Q,ce]=M.useState(!1);M.useEffect(()=>{const R=Qt(nt(Me,"users"),as("role","==","student")),I=N_(R,C=>{const ie=[];C.forEach(de=>{const q=de.data();ie.push({uid:de.id,...q})}),ie.sort((de,q)=>(Number(q.totalXP)||0)-(Number(de.totalXP)||0)),n(ie.slice(0,10)),o(!1)},C=>{console.error("Error fetching leaderboard:",C),o(!1)});return(async()=>{try{const C=Qt(nt(Me,"quizzes")),ie=Qt(nt(Me,"study_materials")),de=Qt(nt(Me,"explanations")),[q,le,Z]=await Promise.all([an(C),an(ie),an(de)]);g(q.size),p(le.size),w(Z.size)}catch(C){console.error("Error fetching stats count:",C)}})(),()=>I()},[]);const fe=async R=>{O(R),ce(!0),ne(null);try{const I=Qt(nt(Me,"quiz_results"),as("userId","==",R.uid)),L=await an(I);let C=0,ie=0;L.forEach(q=>{const le=q.data();le.percentage!==void 0&&(C+=le.percentage,ie++)});const de=ie>0?Math.round(C/ie):0;ne({average:de,totalQuizzes:ie})}catch(I){console.error("Error fetching student stats",I)}finally{ce(!1)}},oe=R=>{switch(R){case 0:return"bg-gradient-to-b from-yellow-400 to-yellow-600 text-white shadow-md shadow-yellow-500/20 border border-yellow-300/80 scale-105";case 1:return"bg-gradient-to-b from-slate-300 to-slate-500 text-white shadow-sm border border-slate-300/80";case 2:return"bg-gradient-to-b from-orange-400 to-orange-600 text-white shadow-sm border border-orange-300/80";case 9:return"bg-gray-800 text-gray-400 border border-gray-700";default:return"bg-gray-700 text-gray-200 border border-gray-600"}},we=R=>i.jsx("span",{className:"font-black text-sm font-mono",children:R+1}),he=R=>{const I=Math.floor(R/500)+1,L=[...V1].reverse().find(C=>I>=C.minLevel)||V1[0];return{level:I,rank:L}},B=R=>{const I=Math.floor(R/500)+1;return I<=3?"border-gray-700":I<=6?"border-emerald-500/50 shadow-[0_0_5px_rgba(16,185,129,0.2)]":I<=9?"border-blue-500/50 shadow-[0_0_6px_rgba(59,130,246,0.25)]":I<=12?"border-cyan-400/50 shadow-[0_0_8px_rgba(34,211,238,0.3)]":I<=15?"border-indigo-500/50 shadow-[0_0_10px_rgba(99,102,241,0.3)]":I<=18?"border-purple-500/50 shadow-[0_0_12px_rgba(168,85,247,0.3)]":I<=21?"border-pink-500/50 shadow-[0_0_15px_rgba(236,72,153,0.35)]":I<=24?"border-red-500/50 shadow-[0_0_18px_rgba(239,68,68,0.35)]":I<=27?"border-amber-500/50 shadow-[0_0_20px_rgba(245,158,11,0.4)]":I<=29?"border-white/50 shadow-[0_0_22px_rgba(255,255,255,0.4)]":"border-rose-500/80 shadow-[0_0_25px_rgba(244,63,94,0.5)] ring-1 ring-rose-500/20"},S=R=>{switch(R){case 0:return"text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 via-amber-200 to-yellow-400 font-black drop-shadow-[0_0_8px_rgba(234,179,8,0.6)]";case 1:return"text-transparent bg-clip-text bg-gradient-to-r from-gray-300 via-gray-100 to-gray-400 font-black drop-shadow-[0_0_5px_rgba(229,231,235,0.5)]";case 2:return"text-transparent bg-clip-text bg-gradient-to-r from-orange-400 via-orange-200 to-orange-500 font-black drop-shadow-[0_0_5px_rgba(249,115,22,0.5)]";default:return"text-white font-bold"}},T=e.reduce((R,I)=>R+(I.quizzesCompleted||0),0),A=T*8;return i.jsxs("section",{className:"py-12 md:py-16 relative overflow-hidden",children:[E&&i.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>O(null)}),i.jsxs("div",{className:"bg-slate-900 rounded-[2.5rem] w-full max-w-md relative shadow-2xl animate-fade-in-up overflow-hidden border border-slate-700/50",children:[i.jsx("button",{onClick:()=>O(null),className:"absolute top-4 right-4 p-2 bg-black/30 hover:bg-black/50 rounded-full text-white z-20 transition-colors backdrop-blur-md border border-white/10",children:i.jsx(js,{className:"w-5 h-5"})}),i.jsx("div",{className:"h-36 bg-slate-800 relative bg-cover bg-center",style:{backgroundImage:E.profileBackground?`url(${E.profileBackground})`:void 0},children:i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/20 to-slate-900"})}),i.jsx("div",{className:"px-8 pb-8 -mt-16 relative z-10",children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-32 h-32 rounded-full p-1 bg-slate-900 shadow-2xl mb-3 ring-4 ring-slate-900",children:i.jsx("div",{className:`w-full h-full rounded-full overflow-hidden border-4 bg-slate-800 ${B(E.totalXP||0)}`,children:E.avatar?i.jsx("img",{src:E.avatar,alt:E.displayName,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-slate-800 flex items-center justify-center",children:i.jsx(Cn,{className:"w-12 h-12 text-slate-500"})})})}),i.jsx("h3",{className:"text-2xl font-black text-white mb-1",children:E.displayName}),i.jsxs("p",{className:"text-slate-400 font-medium text-sm flex items-center justify-center gap-1 mb-6",children:[i.jsx(Kd,{className:"w-4 h-4"}),E.school||" "]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6 w-full",children:[i.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-2xl border border-slate-700 flex flex-col items-center hover:border-blue-500/30 transition-colors",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[P1.createElement(he(E.totalXP||0).rank.icon,{className:"w-5 h-5 text-blue-400"}),i.jsx("span",{className:"text-xs font-bold text-blue-400 uppercase",children:""})]}),i.jsx("div",{className:"font-black text-white text-sm",children:he(E.totalXP||0).rank.title}),i.jsxs("div",{className:"text-[10px] text-slate-400 mt-1",children:[" ",he(E.totalXP||0).level]})]}),i.jsx("div",{className:"bg-slate-800/50 p-4 rounded-2xl border border-slate-700 flex flex-col items-center hover:border-emerald-500/30 transition-colors",children:Q?i.jsx("div",{className:"flex justify-center py-2",children:i.jsx(At,{className:"w-5 h-5 animate-spin text-emerald-500"})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[i.jsx(ti,{className:"w-5 h-5 text-emerald-400 fill-emerald-400"}),i.jsx("span",{className:"text-xs font-bold text-emerald-400 uppercase",children:" "})]}),i.jsxs("div",{className:"font-black text-white text-xl",children:[(z==null?void 0:z.average)||0,"%"]}),i.jsxs("div",{className:"text-[10px] text-slate-400 mt-1",children:[(z==null?void 0:z.totalQuizzes)||0," "]})]})})]}),i.jsxs("div",{className:"w-full bg-blue-950/20 border border-blue-900/30 rounded-2xl p-5 relative overflow-hidden",children:[i.jsxs("div",{className:"text-xs font-medium text-slate-300 leading-relaxed mb-4 relative z-10 font-serif italic",children:['"      ',i.jsx("span",{className:"text-blue-400 font-bold not-italic text-sm",children:E.displayName}),'             ."']}),i.jsxs("div",{className:"flex justify-around items-center pt-3 border-t border-blue-900/20 relative z-10",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-['Great_Vibes'] text-xl text-yellow-500 transform -rotate-6",children:"Yazan A.K"}),i.jsx("div",{className:"text-[8px] text-slate-500 uppercase tracking-widest font-bold mt-1",children:".   "})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-['Great_Vibes'] text-xl text-yellow-500 transform -rotate-3",children:"Majd Al-Hajj"}),i.jsx("div",{className:"text-[8px] text-slate-500 uppercase tracking-widest font-bold mt-1",children:".   "})]})]})]})]})})]})]}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 mb-16 relative z-10",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white/5 backdrop-blur-md rounded-3xl shadow-lg border border-white/10 mb-5 transform -rotate-3 hover:rotate-0 transition-transform duration-300",children:i.jsx(Gl,{className:"w-8 h-8 text-indigo-400"})}),i.jsx("h2",{className:"text-4xl font-black text-white mb-3 tracking-tight drop-shadow-lg",children:" "}),i.jsx("p",{className:"text-gray-400 text-base font-medium max-w-md mx-auto",children:"        "})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-2xl rounded-[2.5rem] border border-white/10 shadow-2xl p-4 md:p-8 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-2/3 h-1 bg-gradient-to-r from-transparent via-indigo-500 to-transparent opacity-50 blur-sm"}),a?i.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 bg-indigo-900 rounded-full blur-xl opacity-50 animate-pulse"}),i.jsx(At,{className:"w-12 h-12 animate-spin text-indigo-400 relative z-10"})]}),i.jsx("p",{className:"text-gray-400 font-bold mt-6 text-sm animate-pulse",children:"  ..."})]}):e.length===0?i.jsxs("div",{className:"text-center py-20",children:[i.jsx("div",{className:"w-24 h-24 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6 border-4 border-gray-700 shadow-xl",children:i.jsx(ro,{className:"w-10 h-10 text-gray-500"})}),i.jsx("h3",{className:"text-2xl font-black text-gray-300 mb-3",children:"  "}),i.jsx("p",{className:"text-gray-500 font-medium mb-8 text-sm",children:"       !"}),!u&&i.jsxs("button",{onClick:r,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-8 py-3.5 rounded-2xl font-bold text-sm hover:bg-indigo-700 transition-all hover:shadow-[0_0_20px_rgba(99,102,241,0.4)] transform hover:-translate-y-1",children:[i.jsx(G1,{className:"w-4 h-4"}),"  "]})]}):i.jsx("div",{className:"space-y-3",children:e.map((R,I)=>i.jsxs("div",{onClick:()=>fe(R),className:`flex items-center p-3 rounded-2xl transition-all duration-300 cursor-pointer group border ${(u==null?void 0:u.uid)===R.uid?"bg-indigo-900/30 border-indigo-500/50 shadow-[0_0_15px_rgba(99,102,241,0.2)] z-10 relative":"bg-white/5 border-white/5 hover:bg-white/10 hover:border-white/20"}`,children:[i.jsx("div",{className:"w-10 flex justify-center shrink-0",children:i.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shadow-sm transition-transform group-hover:scale-110 ${oe(I)}`,children:we(I)})}),i.jsxs("div",{className:`w-10 h-10 md:w-12 md:h-12 rounded-full overflow-hidden border-2 shadow-sm shrink-0 mx-3 transition-colors bg-gray-800 relative ${B(R.totalXP||0)}`,children:[R.avatar?i.jsx("img",{src:R.avatar,alt:R.displayName,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsx(Cn,{className:"w-5 h-5 text-gray-500"})}),I===0&&i.jsx("div",{className:"absolute -top-2 -right-2 text-yellow-500 drop-shadow-sm",children:i.jsx(ao,{className:"w-4 h-4 fill-yellow-500"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:`text-sm md:text-base truncate group-hover:brightness-110 transition-colors ${S(I)}`,children:R.displayName}),i.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500 mt-0.5",children:[i.jsx(Kd,{className:"w-3 h-3 shrink-0"}),i.jsx("span",{className:"truncate max-w-[120px] md:max-w-xs",children:R.school||" "})]})]}),i.jsx("div",{className:"shrink-0 pl-2",children:i.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg border shrink-0 transition-all ${I===0?"bg-yellow-500/10 border-yellow-500/20":"bg-black/20 border-white/5 group-hover:bg-indigo-900/20"}`,children:[i.jsx("span",{className:`font-black text-xs md:text-sm ${I===0?"text-yellow-200":"text-white"}`,children:R.totalXP||0}),i.jsx(Fd,{className:`w-3 h-3 md:w-3.5 md:h-3.5 ${I===0?"text-yellow-400 fill-yellow-400":I<3?"text-orange-500 fill-orange-500":"text-gray-600"}`})]})})]},R.uid))})]})]}),i.jsx("div",{className:"max-w-6xl mx-auto px-4 mb-24 relative z-10",children:i.jsx("div",{className:"relative overflow-hidden rounded-[3rem] bg-gray-900/30 backdrop-blur-md shadow-2xl border border-white/10 group",children:i.jsx("div",{className:"relative z-10 p-8 md:p-10",children:i.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-8",children:[i.jsxs("div",{className:"text-center lg:text-right max-w-md",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-emerald-900/30 border border-emerald-500/30 text-emerald-400 text-xs font-bold mb-4 backdrop-blur-sm shadow-sm",children:[i.jsx(qE,{className:"w-3 h-3"}),i.jsx("span",{children:" "})]}),i.jsxs("h2",{className:"text-3xl md:text-4xl font-black text-white mb-4 leading-tight",children:[" ",i.jsx("span",{className:"text-emerald-400",children:""})," !"]}),i.jsx("p",{className:"text-emerald-100/80 text-sm leading-relaxed font-medium",children:"        ."})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 w-full lg:w-auto",children:[i.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/20 p-4 rounded-2xl text-center hover:bg-blue-900/30 transition-all group/stat backdrop-blur-sm",children:[i.jsx("div",{className:"inline-flex p-2 bg-blue-500/20 rounded-xl mb-2 text-blue-400 group-hover/stat:text-blue-300 transition-colors",children:i.jsx(Wl,{className:"w-5 h-5"})}),i.jsx("div",{className:"text-xl font-black text-white mb-0.5 tracking-tight",children:f.toLocaleString()}),i.jsx("div",{className:"text-[10px] font-bold text-blue-200/70 uppercase tracking-wider",children:" "})]}),i.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/20 p-4 rounded-2xl text-center hover:bg-purple-900/30 transition-all group/stat backdrop-blur-sm",children:[i.jsx("div",{className:"inline-flex p-2 bg-purple-500/20 rounded-xl mb-2 text-purple-400 group-hover/stat:text-purple-300 transition-colors",children:i.jsx(Ts,{className:"w-5 h-5"})}),i.jsx("div",{className:"text-xl font-black text-white mb-0.5 tracking-tight",children:x.toLocaleString()}),i.jsx("div",{className:"text-[10px] font-bold text-purple-200/70 uppercase tracking-wider",children:" "})]}),i.jsxs("div",{className:"bg-amber-900/20 border border-amber-500/20 p-4 rounded-2xl text-center hover:bg-amber-900/30 transition-all group/stat backdrop-blur-sm",children:[i.jsx("div",{className:"inline-flex p-2 bg-amber-500/20 rounded-xl mb-2 text-amber-400 group-hover/stat:text-amber-300 transition-colors",children:i.jsx(Fc,{className:"w-5 h-5"})}),i.jsx("div",{className:"text-xl font-black text-white mb-0.5 tracking-tight",children:_.toLocaleString()}),i.jsx("div",{className:"text-[10px] font-bold text-amber-200/70 uppercase tracking-wider",children:" "})]}),i.jsxs("div",{className:"bg-emerald-900/20 border border-emerald-500/20 p-4 rounded-2xl text-center hover:bg-emerald-900/30 transition-all group/stat backdrop-blur-sm",children:[i.jsx("div",{className:"inline-flex p-2 bg-emerald-500/20 rounded-xl mb-2 text-emerald-400 group-hover/stat:text-emerald-300 transition-colors",children:i.jsx(Gl,{className:"w-5 h-5"})}),i.jsx("div",{className:"text-xl font-black text-white mb-0.5 tracking-tight",children:T.toLocaleString()}),i.jsx("div",{className:"text-[10px] font-bold text-emerald-200/70 uppercase tracking-wider",children:" "})]}),i.jsxs("div",{className:"bg-rose-900/20 border border-rose-500/20 p-4 rounded-2xl text-center hover:bg-rose-900/30 transition-all group/stat backdrop-blur-sm",children:[i.jsx("div",{className:"inline-flex p-2 bg-rose-500/20 rounded-xl mb-2 text-rose-400 group-hover/stat:text-rose-300 transition-colors",children:i.jsx(Q1,{className:"w-5 h-5"})}),i.jsx("div",{className:"text-xl font-black text-white mb-0.5 tracking-tight",children:A.toLocaleString()}),i.jsx("div",{className:"text-[10px] font-bold text-rose-200/70 uppercase tracking-wider",children:" "})]})]})]})})})})]})},QR=({onBack:r})=>{const[e,n]=M.useState([]),[a,o]=M.useState(!0),[u,f]=M.useState(""),[g,x]=M.useState(null),[p,_]=M.useState(!1);M.useEffect(()=>{w()},[]);const w=async()=>{o(!0);try{const B=Qt(nt(Me,"quizzes"),Qa("createdAt","desc")),T=(await an(B)).docs.map(A=>({id:A.id,...A.data()}));n(T)}catch(B){console.error("Error fetching quizzes:",B)}finally{o(!1)}},E=B=>{x({category:"Language",...B})},O=async(B,S)=>{if(B.stopPropagation(),!S){alert(":   ");return}if(window.confirm("  "))try{await __(ls(Me,"quizzes",S)),n(T=>T.filter(A=>A.id!==S))}catch(T){console.error("Error deleting quiz:",T),alert("   : "+T.message)}},z=(B,S)=>{g&&x({...g,[B]:S})},ne=(B,S,T)=>{if(!g)return;const A=[...g.questions];A[B]={...A[B],[S]:T},x({...g,questions:A})},Q=(B,S,T)=>{if(!g)return;const A=[...g.questions],R=[...A[B].options];R[S]=T,A[B]={...A[B],options:R},x({...g,questions:A})},ce=B=>{if(g&&window.confirm("      ")){const S=g.questions.filter((T,A)=>A!==B);x({...g,questions:S})}},fe=async()=>{if(!(!g||!g.id)){if(g.questions.length===0){alert("     !");return}_(!0);try{const B=ls(Me,"quizzes",g.id);await su(B,{title:g.title,subject:g.subject,grade:g.grade,category:g.category,questions:g.questions}),n(S=>S.map(T=>T.id===g.id?g:T)),x(null),alert("   ")}catch(B){console.error("Error updating quiz:",B),alert("   ")}finally{_(!1)}}},oe=e.filter(B=>(B.title?B.title.toLowerCase().includes(u.toLowerCase()):!1)||B.teacherName&&B.teacherName.toLowerCase().includes(u.toLowerCase())),we=B=>B?(B.toDate?B.toDate():new Date(B.seconds*1e3)).toLocaleDateString("ar-EG"):"",he="w-full p-3 rounded-xl border-2 border-gray-600 focus:border-blue-400 outline-none font-bold text-white bg-gray-700 shadow-sm transition-colors placeholder-gray-400";return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in relative transition-colors duration-300 text-gray-100",children:[i.jsx("style",{children:`
        .custom-scrollbar {
          scrollbar-width: thin;
          scrollbar-color: #475569 transparent;
        }
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
          height: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #475569;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #94a3b8;
        }
      `}),i.jsx("div",{className:"bg-gray-950 border-b border-white/5 pt-8 pb-20 px-4 shadow-sm relative overflow-hidden",children:i.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-3 text-sm md:text-base mb-6",children:[i.jsx("button",{onClick:r,className:"bg-gray-800 hover:bg-gray-700 p-2 rounded-full transition-colors text-gray-300",children:i.jsx($t,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]}),i.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end justify-between gap-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-4xl font-black text-white mb-2 tracking-tight",children:"  "}),i.jsx("p",{className:"text-gray-400 font-medium",children:"      "})]}),i.jsxs("div",{className:"w-full md:w-auto bg-gray-800 p-2 rounded-2xl shadow-lg border border-gray-600 flex items-center gap-2",children:[i.jsx(br,{className:"w-5 h-5 text-gray-300 mr-2"}),i.jsx("input",{type:"text",placeholder:"    ...",value:u,onChange:B=>f(B.target.value),className:"w-full md:w-64 outline-none text-sm font-bold text-gray-200 placeholder-gray-500 bg-transparent"})]})]})]})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 -mt-12 relative z-20",children:a?i.jsx("div",{className:"flex justify-center items-center py-20",children:i.jsx(At,{className:"w-10 h-10 animate-spin text-blue-400"})}):oe.length===0?i.jsxs("div",{className:"bg-gray-800 rounded-3xl shadow-sm border border-white/5 p-12 text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Wl,{className:"w-8 h-8 text-gray-500"})}),i.jsx("h3",{className:"text-xl font-bold text-white",children:"  "}),i.jsx("p",{className:"text-gray-400 mt-1",children:"       ."})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:oe.map(B=>i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm hover:shadow-xl transition-all duration-300 border border-white/5 overflow-hidden group flex flex-col",children:[i.jsxs("div",{className:"p-6 flex-1",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("span",{className:"bg-blue-900/30 text-blue-300 px-3 py-1 rounded-lg text-xs font-bold",children:B.subject}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>E(B),className:"bg-emerald-900/20 text-emerald-400 p-1.5 rounded-lg hover:bg-emerald-900/40 transition-colors",title:" ",children:i.jsx(j0,{className:"w-4 h-4"})}),i.jsx("button",{onClick:S=>O(S,B.id),className:"bg-red-900/20 text-red-400 p-1.5 rounded-lg hover:bg-red-900/40 transition-colors",title:" ",children:i.jsx(Xd,{className:"w-4 h-4"})})]})]}),i.jsx("h3",{className:"text-xl font-black text-white mb-2 line-clamp-2 group-hover:text-blue-400 transition-colors",children:B.title}),B.category&&i.jsx("span",{className:"inline-block mb-4 bg-amber-900/20 text-amber-400 text-[10px] font-bold px-2 py-1 rounded-md border border-amber-800/50",children:B.category}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-6",children:[i.jsxs("span",{className:"bg-gray-700 px-2 py-0.5 rounded border border-gray-600 font-bold",children:[" ",B.grade]}),i.jsx("span",{className:"text-gray-600",children:"|"}),i.jsxs("span",{className:"bg-gray-700/50 text-gray-400 px-2 py-0.5 rounded-lg text-xs font-bold flex items-center gap-1",children:[i.jsx(b0,{className:"w-3 h-3"}),we(B.createdAt)]})]})]}),i.jsxs("div",{className:"bg-gray-900/50 p-4 border-t border-white/5 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full border border-gray-600 flex items-center justify-center shadow-sm text-gray-300",children:i.jsx(Cn,{className:"w-4 h-4"})}),i.jsx("p",{className:"text-sm font-bold text-gray-300",children:B.teacherName||""})]}),i.jsxs("span",{className:"flex items-center gap-1 text-xs font-bold text-gray-400 bg-gray-700 px-2 py-1 rounded-md border border-gray-600",children:[i.jsx($r,{className:"w-3 h-3"}),B.questions.length," "]})]})]},B.id))})}),g&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden border border-gray-700",children:[i.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0 sticky top-0 z-10",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:i.jsx(j0,{className:"w-6 h-6 text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-black text-white",children:" "}),i.jsx("p",{className:"text-sm text-gray-400",children:"     "})]})]}),i.jsx("button",{onClick:()=>x(null),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:i.jsx(js,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-900 custom-scrollbar",children:[i.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 mb-8",children:[i.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx(Wl,{className:"w-5 h-5 text-blue-400"})," "]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:" "}),i.jsx("input",{type:"text",value:g.title,onChange:B=>z("title",B.target.value),className:he})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:""}),i.jsx("input",{type:"text",value:g.subject,onChange:B=>z("subject",B.target.value),className:he})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:""}),i.jsx("select",{value:g.grade,onChange:B=>z("grade",B.target.value),className:he,children:[5,6,7,8,9,10,11,12].map(B=>i.jsxs("option",{value:B,children:[" ",B]},B))})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:"  (Category)"}),i.jsxs("select",{value:g.category||"Language",onChange:B=>z("category",B.target.value),className:he,children:[i.jsx("option",{value:"Language",children:"Language ()"}),i.jsx("option",{value:"Reading",children:"Reading ()"}),i.jsx("option",{value:"Writing",children:"Writing ()"}),i.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"})]})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("h3",{className:"font-bold text-white flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx($r,{className:"w-5 h-5 text-blue-400"})," (",g.questions.length,")"]}),i.jsx("span",{className:"text-xs bg-yellow-900/30 text-yellow-300 px-2 py-1 rounded-lg",children:"*        "})]}),g.questions.map((B,S)=>i.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 relative group",children:[i.jsx("button",{onClick:()=>ce(S),className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-red-900/20 hover:text-red-400 rounded-lg transition-colors",title:" ",children:i.jsx(Xd,{className:"w-5 h-5"})}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("label",{className:"block text-xs font-bold text-gray-400 mb-1.5",children:["  ",S+1]}),i.jsx("input",{type:"text",dir:"ltr",value:B.question,onChange:T=>ne(S,"question",T.target.value),className:"w-full p-3 rounded-xl border-2 border-gray-600 focus:border-emerald-500 outline-none font-bold text-white bg-gray-700 shadow-sm text-lg transition-colors placeholder-gray-400 text-left"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:B.options.map((T,A)=>i.jsxs("div",{className:"relative",children:[i.jsxs("label",{className:"flex items-center justify-between text-xs font-bold text-gray-400 mb-1 px-1",children:[i.jsxs("span",{children:[" ",A+1]}),i.jsxs("button",{onClick:()=>ne(S,"correctAnswer",A),className:`flex items-center gap-1 px-2 py-0.5 rounded cursor-pointer transition-colors ${B.correctAnswer===A?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:[B.correctAnswer===A?i.jsx(_n,{className:"w-3 h-3"}):i.jsx("div",{className:"w-3 h-3 border border-gray-400 rounded-full"}),B.correctAnswer===A?" ":" "]})]}),i.jsx("input",{type:"text",dir:"ltr",value:T,onChange:R=>Q(S,A,R.target.value),className:`w-full p-3 rounded-xl border-2 outline-none font-bold transition-colors shadow-sm text-left ${B.correctAnswer===A?"border-emerald-500 bg-emerald-900/20 text-emerald-300":"border-gray-600 focus:border-blue-400 text-white bg-gray-700"}`})]},A))}),i.jsxs("div",{className:"bg-yellow-900/20 p-4 rounded-xl border border-yellow-800",children:[i.jsx("label",{className:"block text-xs font-bold text-yellow-200 mb-1",children:" "}),i.jsx("textarea",{value:B.explanation||"",onChange:T=>ne(S,"explanation",T.target.value),className:"w-full p-3 rounded-lg border border-yellow-700 focus:border-yellow-500 outline-none text-gray-200 bg-gray-800 text-sm h-20 resize-none shadow-sm custom-scrollbar text-left",placeholder:"  ...",dir:"ltr"})]})]},S))]})]}),i.jsxs("div",{className:"p-6 bg-gray-800 border-t border-gray-700 flex justify-end gap-3 shrink-0 sticky bottom-0 z-10",children:[i.jsx("button",{onClick:()=>x(null),className:"px-6 py-3 rounded-xl font-bold text-gray-300 bg-gray-700 hover:bg-gray-600 transition-colors",children:""}),i.jsxs("button",{onClick:fe,disabled:p,className:"px-8 py-3 rounded-xl font-bold text-white bg-emerald-600 hover:bg-emerald-700 transition-colors flex items-center gap-2 shadow-lg shadow-none",children:[p?i.jsx(At,{className:"w-5 h-5 animate-spin"}):i.jsx(Ka,{className:"w-5 h-5"})," "]})]})]})})]})},KR=[{id:"grammar",title:" (Grammar)",icon:Wl,desc:"   ",color:"bg-blue-900/20 text-blue-400"},{id:"reading",title:" (Reading)",icon:Mn,desc:"    ",color:"bg-emerald-900/20 text-emerald-400"},{id:"vocabulary",title:" (Vocabulary)",icon:q1,desc:"   ",color:"bg-purple-900/20 text-purple-400"},{id:"writing",title:" (Writing)",icon:ng,desc:"   ",color:"bg-orange-900/20 text-orange-400"}],XR=({onBack:r})=>{const{user:e}=Cs(),[n,a]=M.useState("INTRO"),[o,u]=M.useState(""),[f,g]=M.useState(null),[x,p]=M.useState([]),[_,w]=M.useState(!1),[E,O]=M.useState(null),[z,ne]=M.useState(0),[Q,ce]=M.useState(""),[fe,oe]=M.useState(!1),[we,he]=M.useState(!1);M.useEffect(()=>{window.scrollTo(0,0)},[n]);const B=()=>a("GRADES"),S=Z=>{u(Z),a("CATEGORIES")},T=Z=>{g(Z),a("TOPICS")},A=Z=>{O(Z),ne(0),ce(""),he(!1),a("DETAILS")};M.useEffect(()=>{n==="TOPICS"&&o&&f&&R()},[n,o,f]);const R=async()=>{w(!0);try{const Z=Qt(nt(Me,"explanations"),as("grade","==",o),as("category","==",f==null?void 0:f.id)),Ee=await an(Z),Ie=[];Ee.forEach(D=>{Ie.push({id:D.id,...D.data()})}),Ie.sort((D,Y)=>{var xe,Ae;const P=((xe=D.createdAt)==null?void 0:xe.seconds)||0;return(((Ae=Y.createdAt)==null?void 0:Ae.seconds)||0)-P}),p(Ie)}catch(Z){console.error("Error fetching explanations:",Z)}finally{w(!1)}},I=async()=>{if(z!==0&&!(!E||!e)){oe(!0);try{await Kn(nt(Me,"reviews"),{type:"explanation",targetId:E.id,targetTitle:E.title,teacherId:E.teacherName||"",teacherName:E.teacherName||"",rating:z,comment:Q,studentId:e.uid,studentName:e.displayName,createdAt:In()}),he(!0)}catch(Z){console.error("Error saving review:",Z),alert("    ")}finally{oe(!1)}}},L=Z=>Z?(Z.toDate?Z.toDate():new Date(Z.seconds*1e3)).toLocaleDateString("ar-EG"):"",C=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in flex flex-col relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",poster:"https://images.unsplash.com/photo-1497633762265-9d179a990aa6?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",className:"w-full h-full object-cover",children:i.jsx("source",{src:"https://drive.google.com/uc?export=download&id=1wHw0wEWltdWfMqblwZLRgLKZ_ah3lCKm",type:"video/mp4"})}),i.jsx("div",{className:"absolute inset-0 bg-gray-950/70"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/80"})]}),i.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center flex-1 px-6 text-center pt-10",children:[i.jsx("span",{className:"inline-block px-6 py-2 rounded-full bg-white/10 backdrop-blur-md text-emerald-300 font-bold text-sm mb-6 border border-white/20 shadow-lg animate-fade-in-up",children:"  "}),i.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-white mb-6 leading-tight drop-shadow-2xl animate-fade-in-up delay-100",children:[" ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-400",children:" "})]}),i.jsx("p",{className:"text-gray-200 text-lg md:text-2xl max-w-2xl mx-auto mb-12 leading-relaxed font-medium drop-shadow-md animate-fade-in-up delay-200",children:"         ."}),i.jsxs("button",{onClick:B,className:"w-full md:w-auto bg-white text-gray-900 text-xl font-black px-12 py-5 rounded-2xl hover:scale-105 hover:bg-emerald-50 transition-all shadow-[0_0_30px_rgba(255,255,255,0.3)] flex items-center justify-center gap-3 animate-fade-in-up delay-300",children:[" ",i.jsx($t,{className:"w-6 h-6"})]})]}),i.jsx("div",{className:"p-6 text-center relative z-10",children:i.jsxs("button",{onClick:r,className:"text-white/70 font-bold hover:text-white transition-colors flex items-center justify-center gap-2 mx-auto",children:[i.jsx(Gd,{className:"w-4 h-4"})," "]})})]}),ie=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>a("INTRO"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx($t,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>a("INTRO"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4",children:[[5,6,7,8,9,10,11,12].map(Z=>i.jsxs("button",{onClick:()=>S(Z.toString()),className:"bg-gray-900 p-4 rounded-2xl shadow-sm border border-gray-700 hover:border-emerald-500 hover:shadow-none hover:-translate-y-1 transition-all group flex flex-col items-center gap-2",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 flex items-center justify-center group-hover:bg-emerald-500 transition-colors",children:i.jsx("span",{className:"font-black text-xl text-gray-300 group-hover:text-white",children:Z})}),i.jsxs("span",{className:"font-bold text-gray-300 group-hover:text-emerald-400 text-sm md:text-base",children:[" ",Z]})]},Z)),i.jsxs("button",{onClick:()=>S("English Major - QOU"),className:"col-span-2 md:col-span-3 lg:col-span-4 bg-gradient-to-r from-emerald-600 to-teal-600 p-4 rounded-2xl shadow-lg text-white hover:shadow-xl hover:-translate-y-1 transition-all flex items-center justify-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-2 rounded-xl",children:i.jsx(ei,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"block font-black text-base md:text-lg",children:"  "}),i.jsx("span",{className:"text-emerald-100 text-xs md:text-sm",children:"  "})]})]})]})})]}),de=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>a("GRADES"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx($t,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>a("GRADES"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:" "}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:KR.map(Z=>i.jsx("button",{onClick:()=>T(Z),className:"bg-gray-900 rounded-3xl p-5 shadow-sm border border-gray-700 hover:shadow-xl hover:border-emerald-800 transition-all group text-right relative overflow-hidden",children:i.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[i.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center shrink-0 ${Z.color} group-hover:scale-110 transition-transform`,children:i.jsx(Z.icon,{className:"w-7 h-7"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-black text-white mb-1",children:Z.title}),i.jsx("p",{className:"text-gray-400 text-xs font-medium",children:Z.desc})]}),i.jsx("div",{className:"absolute top-1/2 -left-4 -translate-y-1/2 bg-gray-700 p-2 rounded-full opacity-0 group-hover:opacity-100 group-hover:translate-x-2 transition-all",children:i.jsx(Ua,{className:"w-5 h-5 text-gray-400"})})]})},Z.id))})})]}),q=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>a("CATEGORIES"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx($t,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>a("CATEGORIES"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:f==null?void 0:f.title})]})}),i.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:_?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(At,{className:"w-8 h-8 animate-spin text-emerald-400"})}):x.length===0?i.jsx("div",{className:"flex flex-col items-center justify-center text-center",children:i.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-gray-700 max-w-md w-full",children:[i.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:"   "}),i.jsxs("p",{className:"text-gray-400 font-medium leading-relaxed mb-6",children:["      ",i.jsx("span",{className:"text-emerald-600 font-bold",children:f==null?void 0:f.title}),"    ."]}),i.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs font-bold text-gray-400 bg-gray-700 py-2 px-4 rounded-full",children:[i.jsx(y0,{className:"w-4 h-4"}),"     "]})]})}):i.jsx("div",{className:"grid grid-cols-1 gap-4",children:x.map(Z=>i.jsxs("button",{onClick:()=>A(Z),className:"bg-gray-900 p-5 rounded-2xl shadow-sm border border-gray-700 hover:border-emerald-700 hover:shadow-md transition-all group text-right flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 rounded-xl bg-gray-700 group-hover:bg-emerald-900/20 transition-colors",children:i.jsx(Ts,{className:"w-6 h-6 text-gray-500 group-hover:text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-white mb-1 group-hover:text-emerald-400 transition-colors",children:Z.title}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 font-medium",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(b0,{className:"w-3 h-3"}),L(Z.createdAt)]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Cn,{className:"w-3 h-3"}),Z.teacherName]})]})]})]}),i.jsx(Ua,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500 group-hover:-translate-x-1 transition-all"})]},Z.id))})})]}),le=()=>E?i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100 pb-20",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>a("TOPICS"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx($t,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>a("TOPICS"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:f==null?void 0:f.title}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white truncate",children:E.title})]})}),i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden mb-8",children:[i.jsxs("div",{className:"p-6 md:p-8",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6 text-sm text-gray-400 border-b border-gray-700 pb-4",children:[i.jsx("span",{className:"bg-gray-700 px-2 py-1 rounded font-bold",children:o==="English Major - QOU"?"":` ${o}`}),i.jsx(Ua,{className:"w-4 h-4"}),i.jsx("span",{className:"bg-gray-700 px-2 py-1 rounded font-bold",children:f==null?void 0:f.title})]}),i.jsx("h1",{className:"text-2xl md:text-3xl font-black text-white mb-6 leading-relaxed",children:E.title}),i.jsx("div",{className:"prose dark:prose-invert max-w-none text-gray-200 whitespace-pre-wrap leading-loose text-lg",children:E.content})]}),i.jsxs("div",{className:"bg-gray-900/50 p-4 border-t border-gray-700 flex justify-between items-center text-sm text-gray-400",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Cn,{className:"w-4 h-4"}),i.jsxs("span",{children:[": ",i.jsx("span",{className:"font-bold",children:E.teacherName})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(b0,{className:"w-4 h-4"}),i.jsx("span",{children:L(E.createdAt)})]})]})]}),e&&i.jsx("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 text-center relative",children:we?i.jsxs("div",{className:"py-6",children:[i.jsx("div",{className:"w-12 h-12 bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-2 text-green-400 border border-green-900",children:i.jsx(Xr,{className:"w-6 h-6"})}),i.jsx("h3",{className:"text-white font-bold",children:" !"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"   ."})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3 text-white",children:[i.jsx(yh,{className:"w-5 h-5 text-blue-400"}),i.jsx("h3",{className:"font-bold text-lg",children:"    "})]}),i.jsx("p",{className:"text-gray-400 text-xs mb-4",children:"   10 ()"}),i.jsx("div",{className:"flex justify-center gap-1 mb-4 flex-wrap",children:[1,2,3,4,5,6,7,8,9,10].map(Z=>i.jsx("button",{onClick:()=>ne(Z),className:`w-8 h-8 rounded-lg text-xs font-bold transition-all ${z===Z?"bg-blue-500 text-white scale-110":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:Z},Z))}),i.jsx("textarea",{value:Q,onChange:Z=>ce(Z.target.value),placeholder:"   ()...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl p-3 text-sm text-white outline-none focus:border-blue-500 mb-4 min-h-[80px] resize-none"}),i.jsxs("button",{onClick:I,disabled:fe||z===0,className:`w-full py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all ${z===0?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[fe?i.jsx(At,{className:"w-4 h-4 animate-spin"}):i.jsx(Xa,{className:"w-4 h-4"})," "]})]})})]})]}):null;return i.jsxs(i.Fragment,{children:[n==="INTRO"&&C(),n==="GRADES"&&ie(),n==="CATEGORIES"&&de(),n==="TOPICS"&&q(),n==="DETAILS"&&le()]})},YR=[{id:"grammar",title:" (Grammar)",icon:Wl},{id:"reading",title:" (Reading)",icon:Mn},{id:"vocabulary",title:" (Vocabulary)",icon:q1},{id:"writing",title:" (Writing)",icon:ng}],WR=({onBack:r,onNavigate:e})=>{const{user:n}=Cs(),[a,o]=M.useState(""),[u,f]=M.useState(""),[g,x]=M.useState(""),[p,_]=M.useState(""),[w,E]=M.useState(!1),[O,z]=M.useState(!1),ne=async()=>{if(!a||!u||!g||!p){alert("    ");return}E(!0);try{await Kn(nt(Me,"explanations"),{grade:a,category:u,subject:"English",title:g,content:p,teacherName:(n==null?void 0:n.displayName)||"",teacherId:n==null?void 0:n.uid,createdAt:In()}),await Kn(nt(Me,"notifications"),{recipientId:"all",title:" ",message:`    : ${g}  ${a}`,type:"explanation",createdAt:In(),read:!1}),z(!0),setTimeout(()=>{z(!1),x(""),_("")},2e3)}catch(ce){console.error("Error saving explanation:",ce),alert("   ")}finally{E(!1)}},Q=()=>{r?r():e("HOME")};return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:Q,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx($t,{className:"w-5 h-5"})}),i.jsx("span",{onClick:Q,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:"  "})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsx("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:O?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[i.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:i.jsx(_n,{className:"w-10 h-10 text-green-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"      ."}),i.jsx("button",{onClick:()=>z(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"1.   "}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[[5,6,7,8,9,10,11,12].map(ce=>i.jsxs("button",{onClick:()=>o(ce.toString()),className:`py-3 rounded-xl font-bold transition-all border-2 ${a===ce.toString()?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:[" ",ce]},ce)),i.jsx("button",{onClick:()=>o("English Major - QOU"),className:`col-span-2 sm:col-span-4 py-3 rounded-xl font-bold transition-all border-2 ${a==="English Major - QOU"?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:"  "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"2.   ()"}),i.jsx("div",{className:"grid grid-cols-2 gap-4",children:YR.map(ce=>i.jsxs("button",{onClick:()=>f(ce.id),className:`flex items-center gap-3 p-4 rounded-xl border-2 transition-all text-right ${u===ce.id?"bg-purple-900/20 border-purple-500 text-purple-300":"bg-gray-800 border-gray-700 text-gray-300 hover:border-purple-500/50"}`,children:[i.jsx("div",{className:`p-2 rounded-lg ${u===ce.id?"bg-purple-800":"bg-gray-700"}`,children:i.jsx(ce.icon,{className:"w-5 h-5"})}),i.jsx("span",{className:"font-bold",children:ce.title})]},ce.id))})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  / "}),i.jsx("input",{type:"text",value:g,onChange:ce=>x(ce.target.value),placeholder:":   Present Simple",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-purple-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("textarea",{value:p,onChange:ce=>_(ce.target.value),placeholder:"  ...",className:"w-full h-64 px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-purple-500 outline-none font-medium text-white bg-gray-800 transition-all resize-none leading-relaxed"}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"          ."})]})]}),i.jsx("div",{className:"pt-4 border-t border-white/5 flex justify-end",children:i.jsxs("button",{onClick:ne,disabled:w,className:"bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center gap-2 transform hover:-translate-y-1",children:[w?i.jsx(At,{className:"w-5 h-5 animate-spin"}):i.jsx(Ka,{className:"w-5 h-5"}),"  "]})})]})})})]})},ZR=[{id:"handouts",title:" ",icon:Ts,color:"text-blue-400",bg:"bg-blue-900/20"},{id:"worksheets",title:" ",icon:pc,color:"text-emerald-400",bg:"bg-emerald-900/20"},{id:"exams",title:"  ",icon:Mn,color:"text-purple-400",bg:"bg-purple-900/20"}],JR=[{id:"English",title:"  (English)"},{id:"Math",title:""},{id:"Science",title:""}],ek=({onBack:r,onNavigate:e})=>{const{user:n}=Cs(),[a,o]=M.useState(""),[u,f]=M.useState(""),[g,x]=M.useState(""),[p,_]=M.useState(""),[w,E]=M.useState(""),[O,z]=M.useState(!1),[ne,Q]=M.useState(!1),ce=async()=>{if(!a||!u||!g||!p||!w){alert("    ");return}if(!w.startsWith("http")){alert("        http  https");return}z(!0);try{await Kn(nt(Me,"study_materials"),{grade:a,subject:u,category:g,title:p,url:w,size:"Drive Link",teacherName:(n==null?void 0:n.displayName)||"",teacherId:n==null?void 0:n.uid,createdAt:In()}),await Kn(nt(Me,"notifications"),{recipientId:"all",title:"  ",message:`   : ${p}  ${a}`,type:"file",createdAt:In(),read:!1}),Q(!0),setTimeout(()=>{Q(!1),_(""),E("")},2e3)}catch(oe){console.error("Error saving file:",oe),alert("   ")}finally{z(!1)}},fe=()=>{r?r():e("PROFILE")};return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:fe,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx($t,{className:"w-5 h-5"})}),i.jsx("span",{onClick:fe,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:"  "})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsx("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:ne?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[i.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:i.jsx(_n,{className:"w-10 h-10 text-green-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"       ."}),i.jsx("button",{onClick:()=>Q(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[i.jsx(ei,{className:"w-4 h-4 text-blue-500"})," "]}),i.jsxs("select",{value:a,onChange:oe=>o(oe.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"",children:" "}),[5,6,7,8,9,10,11,12].map(oe=>i.jsxs("option",{value:oe.toString(),children:[" ",oe]},oe)),i.jsx("option",{value:"English Major - QOU",children:"  "})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[i.jsx(Mn,{className:"w-4 h-4 text-blue-500"}),""]}),i.jsxs("select",{value:u,onChange:oe=>f(oe.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"",children:" "}),JR.map(oe=>i.jsx("option",{value:oe.id,children:oe.title},oe.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"  ()"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:ZR.map(oe=>i.jsxs("button",{onClick:()=>x(oe.id),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all text-center h-full ${g===oe.id?"bg-blue-900/30 border-blue-500 text-blue-300 ring-1 ring-blue-500":"bg-gray-800 border-gray-700 text-gray-300 hover:border-blue-500/50"}`,children:[i.jsx("div",{className:`p-2 rounded-lg ${oe.bg}`,children:i.jsx(oe.icon,{className:`w-6 h-6 ${oe.color}`})}),i.jsx("span",{className:"font-bold text-sm",children:oe.title})]},oe.id))})]}),i.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("input",{type:"text",value:p,onChange:oe=>_(oe.target.value),placeholder:":    -  ",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[i.jsx(z4,{className:"w-4 h-4 text-blue-500"}),"  (Google Drive Link)"]}),i.jsx("input",{type:"url",value:w,onChange:oe=>E(oe.target.value),placeholder:"https://drive.google.com/file/d/...",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-medium text-blue-400 bg-gray-800 transition-all text-left",dir:"ltr"}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:'    " " (Anyone with the link)    .'})]})]}),i.jsx("div",{className:"pt-4 flex justify-end",children:i.jsxs("button",{onClick:ce,disabled:O,className:"w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white px-10 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2 transform hover:-translate-y-1",children:[O?i.jsx(At,{className:"w-5 h-5 animate-spin"}):i.jsx(Ka,{className:"w-5 h-5"}),"  "]})})]})})})]})},x0=[{text:"            .",author:" ",color:"from-emerald-400 to-teal-500",bg:"bg-emerald-500"},{text:"               .",author:"",color:"from-blue-400 to-indigo-500",bg:"bg-blue-500"},{text:"        .",author:" ",color:"from-yellow-400 to-amber-500",bg:"bg-amber-500"},{text:"     .",author:" ",color:"from-rose-400 to-pink-500",bg:"bg-rose-500"},{text:"          .",author:" ",color:"from-purple-400 to-violet-500",bg:"bg-purple-500"},{text:"     .",author:" ",color:"from-cyan-400 to-sky-500",bg:"bg-cyan-500"},{text:"     .",author:" ",color:"from-red-400 to-orange-500",bg:"bg-red-500"},{text:"     .",author:" ",color:"from-orange-400 to-yellow-500",bg:"bg-orange-500"},{text:"     .",author:" ",color:"from-teal-400 to-emerald-500",bg:"bg-teal-500"},{text:"    .",author:" ",color:"from-indigo-400 to-blue-500",bg:"bg-indigo-500"}],tk=()=>{const[r,e]=M.useState(0),[n,a]=M.useState(!0);M.useEffect(()=>{const f=setInterval(()=>{a(!1),setTimeout(()=>{e(g=>(g+1)%x0.length),a(!0)},500)},1e4);return()=>clearInterval(f)},[]);const o=x0[r],u=()=>{navigator.clipboard.writeText(`"${o.text}" - ${o.author}`),alert("  !")};return i.jsxs("div",{className:"py-20 bg-gradient-to-b from-slate-900 to-gray-950 relative overflow-hidden border-t border-gray-800",children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-10 left-1/4 w-1 h-1 bg-white rounded-full animate-[ping_3s_infinite]"}),i.jsx("div",{className:"absolute bottom-20 right-1/3 w-1.5 h-1.5 bg-yellow-400 rounded-full animate-[ping_5s_infinite]"}),i.jsx("div",{className:"absolute top-1/2 left-10 w-2 h-2 bg-blue-400 rounded-full animate-[bounce_4s_infinite] opacity-20"}),i.jsx("div",{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] rounded-full bg-gradient-to-r ${o.color} blur-[150px] opacity-10 transition-colors duration-1000`})]}),i.jsx("div",{className:"max-w-4xl mx-auto px-6 relative z-10",children:i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-[3rem] p-8 md:p-12 text-center relative group hover:bg-white/10 transition-all duration-500 shadow-2xl",children:[i.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2",children:i.jsx("div",{className:`w-12 h-12 rounded-2xl bg-gradient-to-br ${o.color} flex items-center justify-center shadow-lg transform rotate-3 group-hover:rotate-0 transition-transform`,children:i.jsx(h5,{className:"w-6 h-6 text-white fill-white"})})}),i.jsxs("div",{className:`transition-all duration-500 ease-in-out transform ${n?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[i.jsxs("h2",{className:`text-2xl md:text-4xl font-black leading-relaxed tracking-wide bg-clip-text text-transparent bg-gradient-to-r ${o.color} mb-6 drop-shadow-sm`,children:['"',o.text,'"']}),i.jsxs("p",{className:"text-gray-400 font-bold text-lg flex items-center justify-center gap-2",children:[i.jsx("span",{className:`w-8 h-0.5 bg-gradient-to-r ${o.color} rounded-full`}),o.author,i.jsx("span",{className:`w-8 h-0.5 bg-gradient-to-r ${o.color} rounded-full`})]})]}),i.jsx("button",{onClick:u,className:"absolute top-6 right-6 p-2 text-gray-500 hover:text-white hover:bg-white/10 rounded-full transition-colors opacity-0 group-hover:opacity-100",title:" ",children:i.jsx(_5,{className:"w-5 h-5"})}),i.jsx("div",{className:"flex justify-center gap-2 mt-10",children:x0.map((f,g)=>i.jsx("button",{onClick:()=>{a(!1),setTimeout(()=>{e(g),a(!0)},300)},className:`h-1.5 rounded-full transition-all duration-700 ${g===r?`w-8 ${f.bg}`:"w-1.5 bg-gray-700 hover:bg-gray-500"}`},g))})]})})]})},nk=()=>i.jsx("section",{className:"relative w-full overflow-hidden bg-gray-950",children:i.jsxs("div",{className:"w-full h-[650px] md:h-[900px] relative group",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/11PvY6sdTvurXqkNuWjoEpYTcM8FUHOB0",alt:".    -  ",className:"w-full h-full object-cover object-top transition-transform duration-1000 group-hover:scale-105"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-gray-900/40 to-transparent"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/90 via-transparent to-gray-950/90"})]}),i.jsx("div",{className:"absolute bottom-0 left-0 w-full p-8 md:p-24 flex flex-col items-center text-center z-20",children:i.jsxs("div",{className:"max-w-5xl mx-auto transform translate-y-0 transition-all duration-700",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-5xl md:text-8xl font-black text-white mb-6 drop-shadow-2xl tracking-tight",children:".   "}),i.jsx("div",{className:"h-2 w-40 bg-emerald-500 rounded-full mx-auto mb-8 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),i.jsx("p",{className:"text-2xl md:text-4xl text-emerald-400 font-bold drop-shadow-lg tracking-wide",children:"   "})]}),i.jsx("div",{className:"relative",children:i.jsx("p",{className:"text-gray-200 text-xl md:text-3xl leading-loose font-medium relative z-10 px-4 max-w-4xl mx-auto drop-shadow-md",children:"          .              ."})})]})})]})}),sk=({onLoginClick:r})=>i.jsxs("section",{className:"py-32 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950 via-emerald-950/40 to-gray-950"}),i.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"}),i.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-emerald-500/50 to-transparent"}),i.jsxs("div",{className:"max-w-5xl mx-auto px-6 relative z-10 text-center",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-sm font-bold mb-8 animate-pulse",children:[i.jsx(G1,{className:"w-4 h-4"}),i.jsx("span",{children:"  "})]}),i.jsxs("h2",{className:"text-5xl md:text-7xl font-black text-white mb-8 leading-tight tracking-tight drop-shadow-2xl",children:["  ",i.jsx("br",{}),i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400",children:" "})]}),i.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto mb-12 leading-relaxed font-medium",children:"      .         ."}),i.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:i.jsxs("button",{onClick:r,className:"w-full sm:w-auto bg-white text-emerald-950 px-10 py-5 rounded-2xl font-black text-xl hover:bg-emerald-50 transition-all shadow-[0_0_40px_rgba(255,255,255,0.2)] hover:shadow-[0_0_60px_rgba(16,185,129,0.4)] transform hover:-translate-y-1 flex items-center justify-center gap-3",children:["  ",i.jsx($t,{className:"w-6 h-6"})]})})]})]}),rk=()=>i.jsxs("section",{className:"relative w-full min-h-[800px] flex items-center bg-gray-950 overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1ZcMqKedYcXUq7RPYqUGCRr2RsEA6F6JN",alt:"  ",className:"w-full h-full object-cover object-center opacity-30"}),i.jsx("div",{className:"absolute top-0 left-0 w-full h-64 bg-gradient-to-b from-gray-950 via-gray-950/80 to-transparent"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-full h-64 bg-gradient-to-t from-gray-950 via-gray-950/80 to-transparent"}),i.jsx("div",{className:"absolute inset-0 bg-gray-950/50"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/80 via-transparent to-gray-950/80"})]}),i.jsx("div",{className:"relative z-10 w-full py-24 px-6 md:px-12 flex flex-col justify-center h-full",children:i.jsxs("div",{className:"max-w-4xl mx-auto text-center transform translate-y-0 transition-all duration-700 animate-fade-in-up",children:[i.jsx("h2",{className:"text-4xl md:text-7xl font-black text-white mb-8 drop-shadow-2xl tracking-tight",children:" "}),i.jsx("div",{className:"h-1.5 w-32 bg-emerald-500 rounded-full mx-auto mb-12 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),i.jsxs("div",{className:"space-y-8 text-gray-100 font-medium leading-relaxed drop-shadow-lg",children:[i.jsx("p",{className:"text-2xl md:text-4xl font-black text-emerald-400 mb-6",children:" :   "}),i.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"            .                    ."}),i.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                         .        ."}),i.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                                      ."})]})]})})]}),ak=()=>{const[r,e]=M.useState([]),[n,a]=M.useState(!0),[o,u]=M.useState(0);M.useEffect(()=>{(async()=>{try{const E=Qt(nt(Me,"quizzes"),Qa("createdAt","desc"),_c(3)),O=Qt(nt(Me,"study_materials"),Qa("createdAt","desc"),_c(3)),z=Qt(nt(Me,"explanations"),Qa("createdAt","desc"),_c(3)),ne=Qt(nt(Me,"announcements"),Qa("createdAt","desc"),_c(3)),[Q,ce,fe,oe]=await Promise.all([an(E),an(O),an(z),an(ne)]),we=[];oe.forEach(he=>{const B=he.data();we.push({id:he.id,type:"general",title:B.title,teacherName:B.teacherName||"",date:B.createdAt})}),Q.forEach(he=>{const B=he.data();we.push({id:he.id,type:"quiz",title:B.title,teacherName:B.teacherName||"",date:B.createdAt})}),ce.forEach(he=>{const B=he.data();we.push({id:he.id,type:"file",title:B.title,teacherName:B.teacherName||"",date:B.createdAt})}),fe.forEach(he=>{const B=he.data();we.push({id:he.id,type:"explanation",title:B.title,teacherName:B.teacherName||"",date:B.createdAt})}),we.sort((he,B)=>{var A,R;const S=((A=he.date)==null?void 0:A.seconds)||0;return(((R=B.date)==null?void 0:R.seconds)||0)-S}),e(we.slice(0,10))}catch(E){console.error("Error fetching announcements:",E)}finally{a(!1)}})()},[]),M.useEffect(()=>{if(r.length<=1)return;const w=setInterval(()=>{u(E=>(E+1)%r.length)},4e3);return()=>clearInterval(w)},[r.length]);const f=w=>w?(w.toDate?w.toDate():new Date(w.seconds*1e3)).toLocaleDateString("en-GB",{month:"2-digit",day:"2-digit"}):"",g=w=>{switch(w){case"quiz":return i.jsx(Mn,{className:"w-3 h-3 text-yellow-400"});case"file":return i.jsx(Ts,{className:"w-3 h-3 text-blue-400"});case"explanation":return i.jsx(Fc,{className:"w-3 h-3 text-purple-400"});case"general":return i.jsx(gc,{className:"w-3 h-3 text-red-400"});default:return i.jsx(Ec,{className:"w-3 h-3 text-emerald-400"})}},x=w=>{switch(w){case"quiz":return"";case"file":return"";case"explanation":return"";case"general":return"";default:return""}};if(n||r.length===0)return null;const p=r[o],_=[...r,...r,...r];return i.jsxs("div",{className:"w-full bg-gray-900 border-t border-b border-emerald-900/30 relative overflow-hidden py-2",dir:"rtl",children:[i.jsxs("div",{className:"md:hidden flex items-center gap-2 px-4 h-10 w-full",children:[i.jsxs("div",{className:"flex items-center gap-1.5 bg-emerald-900/20 text-emerald-400 px-2 py-1 rounded-lg text-[10px] font-bold border border-emerald-500/20 shrink-0",children:[i.jsx(Ec,{className:"w-3 h-3"}),i.jsx("span",{children:""})]}),i.jsx("div",{className:"flex-1 min-w-0 overflow-hidden relative h-full flex items-center",children:i.jsxs("div",{className:"flex items-center gap-2 animate-fade-in w-full min-w-0",children:[i.jsx("div",{className:"shrink-0",children:g(p.type)}),i.jsx("span",{className:"text-[11px] font-bold text-gray-300 truncate flex-1",children:p.title}),i.jsxs("span",{className:"text-[9px] text-gray-500 whitespace-nowrap flex items-center gap-1 bg-black/20 px-1.5 py-0.5 rounded shrink-0",children:[i.jsx(Cn,{className:"w-2 h-2"}),i.jsx("span",{className:"max-w-[60px] truncate",children:p.teacherName})]})]},p.id)})]}),i.jsxs("div",{className:"hidden md:flex items-center relative z-10 h-10",children:[i.jsx("div",{className:"absolute right-0 z-20 h-full flex items-center pr-4 pl-6 bg-gradient-to-l from-gray-900 via-gray-900 to-transparent",children:i.jsxs("div",{className:"flex items-center gap-2 bg-emerald-600 text-white px-3 py-1.5 rounded-lg text-xs font-bold shadow-sm",children:[i.jsx(Ec,{className:"w-4 h-4"}),i.jsx("span",{children:" "})]})}),i.jsx("div",{className:"flex-1 overflow-hidden relative h-full flex items-center",children:i.jsx("div",{className:"whitespace-nowrap flex items-center animate-ticker pr-32 will-change-transform",children:_.map((w,E)=>i.jsxs("div",{className:"inline-flex items-center bg-gray-800 border border-gray-700 rounded-full pl-4 pr-2 py-1 gap-3 mx-3 hover:bg-gray-750 transition-colors cursor-default",children:[i.jsxs("div",{className:"bg-gray-700 rounded-full px-2 py-0.5 flex items-center gap-1.5",children:[g(w.type),i.jsx("span",{className:"text-[10px] font-bold text-emerald-400",children:x(w.type)})]}),i.jsx("span",{className:"text-xs text-gray-200 font-bold",children:w.title}),i.jsxs("div",{className:"flex items-center gap-2 border-r border-gray-600 pr-2 mr-1",children:[i.jsxs("span",{className:"text-[10px] text-gray-400 flex items-center gap-1",children:[i.jsx(Cn,{className:"w-3 h-3"})," ",w.teacherName]}),i.jsx("span",{className:"text-[10px] text-gray-500 font-mono",children:f(w.date)})]})]},`${w.id}-${E}`))})})]}),i.jsx("style",{children:`
            .animate-ticker {
                animation: ticker 80s linear infinite;
            }
            @keyframes ticker {
                0% { transform: translateX(0); }
                100% { transform: translateX(50%); } 
            }
            .animate-ticker:hover {
                animation-play-state: paused;
            }
        `})]})},up=()=>{const r=M.useRef(null);return M.useEffect(()=>{const e=r.current;if(!e)return;const n=e.getContext("2d");if(!n)return;let a,o=window.innerWidth,u=window.innerHeight;const f=o<768?150:400,g=.1,x=["255, 255, 255","50, 150, 255","255, 80, 80","80, 255, 120","255, 215, 0"];e.width=o,e.height=u;const p=[];for(let E=0;E<f;E++)p.push({x:Math.random()*o,y:Math.random()*u,z:Math.random()*o,size:Math.random()*2,color:x[Math.floor(Math.random()*x.length)],alpha:Math.random()});const _=()=>{o=window.innerWidth,u=window.innerHeight,e.width=o,e.height=u};window.addEventListener("resize",_);const w=()=>{n.clearRect(0,0,o,u),p.forEach(E=>{Math.random()>.99&&(E.alpha=Math.random()),E.y-=g*(E.size*.5),E.y<0&&(E.y=u,E.x=Math.random()*o),n.beginPath(),n.fillStyle=`rgba(${E.color}, ${E.alpha})`,n.arc(E.x,E.y,E.size,0,Math.PI*2),n.fill()}),a=requestAnimationFrame(w)};return w(),()=>{window.removeEventListener("resize",_),cancelAnimationFrame(a)}},[]),i.jsx("canvas",{ref:r,className:"fixed inset-0 pointer-events-none z-0",style:{opacity:1}})},ik=({onBack:r})=>{const e=[{icon:XE,title:" ",desc:"              ."},{icon:S5,title:" 24/7",desc:"                 ."},{icon:bh,title:"  (XP)",desc:"  !    (XP)         ."},{icon:Ts,title:" ",desc:"           ."}];return i.jsxs("div",{className:"min-h-screen bg-gray-950 relative overflow-hidden text-gray-100",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx(up,{}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/90 via-gray-900/60 to-gray-950 pointer-events-none"}),i.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-20"})]}),i.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[i.jsx("div",{className:"border-b border-white/10 py-6 px-4 sticky top-0 z-30 backdrop-blur-md bg-gray-950/30",children:i.jsxs("div",{className:"max-w-3xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx($t,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-12 pb-20",children:[i.jsxs("div",{className:"text-center mb-16 animate-fade-in-up",children:[i.jsxs("div",{className:"inline-flex items-center justify-center p-5 bg-emerald-500/10 backdrop-blur-xl rounded-full mb-8 border border-emerald-500/30 shadow-[0_0_40px_rgba(16,185,129,0.3)] relative group",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 rounded-full blur-xl group-hover:blur-2xl transition-all"}),i.jsx(ti,{className:"w-12 h-12 text-emerald-400 fill-emerald-400 animate-pulse relative z-10"})]}),i.jsxs("h1",{className:"text-5xl md:text-6xl font-black text-white mb-6 leading-tight drop-shadow-2xl",children:["   ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-300",children:""}),""]}),i.jsx("p",{className:"text-xl text-gray-200 leading-relaxed max-w-2xl mx-auto font-medium drop-shadow-md",children:"                     ."})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 shadow-2xl border border-white/10 mb-16 relative overflow-hidden group hover:bg-white/10 transition-all duration-500",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-600/20 rounded-full blur-[80px] -mr-16 -mt-16 pointer-events-none"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-purple-600/20 rounded-full blur-[80px] -ml-16 -mb-16 pointer-events-none"}),i.jsxs("h2",{className:"text-3xl font-black text-white mb-8 flex items-center gap-3 relative z-10",children:[i.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl border border-blue-500/30",children:i.jsx(rg,{className:"w-8 h-8 text-blue-400"})})," "]}),i.jsxs("div",{className:"space-y-6 text-gray-200 font-medium leading-loose text-lg relative z-10",children:[i.jsx("p",{children:'  ""         .                    .'}),i.jsxs("p",{children:["       ",i.jsx("span",{className:"text-white font-bold border-b-2 border-emerald-500 shadow-[0_4px_20px_-5px_rgba(16,185,129,0.5)]",children:"  "}),".                ."]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-16",children:e.map((n,a)=>i.jsxs("div",{className:"bg-gray-900/40 backdrop-blur-md p-6 rounded-3xl border border-white/10 flex flex-col gap-4 hover:border-emerald-500/40 hover:bg-gray-900/60 transition-all group hover:-translate-y-2 shadow-lg",children:[i.jsx("div",{className:"bg-gray-800/50 p-4 rounded-2xl w-fit group-hover:bg-emerald-900/30 transition-colors border border-white/5 group-hover:border-emerald-500/20",children:i.jsx(n.icon,{className:"w-8 h-8 text-gray-300 group-hover:text-emerald-400 transition-colors"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-emerald-300 transition-colors",children:n.title}),i.jsx("p",{className:"text-gray-400 text-sm leading-relaxed group-hover:text-gray-300",children:n.desc})]})]},a))}),i.jsxs("div",{className:"bg-gradient-to-br from-emerald-900/40 to-gray-900/40 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 border border-emerald-500/20 text-center shadow-2xl relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"}),i.jsx("h2",{className:"text-3xl font-black text-white mb-8 relative z-10",children:"  "}),i.jsxs("div",{className:"flex flex-col gap-4 relative z-10",children:[i.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[i.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:i.jsx(_n,{className:"w-6 h-6 text-emerald-400"})}),i.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"      ."})]}),i.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[i.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:i.jsx(_n,{className:"w-6 h-6 text-emerald-400"})}),i.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:" ."})]}),i.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[i.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:i.jsx(_n,{className:"w-6 h-6 text-emerald-400"})}),i.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"       ."})]})]})]}),i.jsx("div",{className:"mt-16 text-center",children:i.jsxs("p",{className:"text-gray-400 text-sm font-medium bg-gray-900/50 inline-block px-6 py-3 rounded-full border border-white/5 backdrop-blur-sm",children:["  ",i.jsx("span",{className:"text-emerald-400 font-black",children:"   "})]})})]})]})]})},lk=({onNavigate:r})=>i.jsxs("div",{className:"relative w-full py-20 overflow-hidden bg-gray-950 border-t border-white/5 border-b border-white/5",children:[i.jsx("div",{className:"absolute inset-0 z-0 opacity-100",children:i.jsx(up,{})}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950 via-transparent to-gray-950 z-0 pointer-events-none"}),i.jsxs("div",{className:"relative z-10 max-w-5xl mx-auto px-6 text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white/5 rounded-full mb-6 shadow-[0_0_30px_rgba(255,255,255,0.1)] border border-white/10 animate-pulse",children:i.jsx(ti,{className:"w-8 h-8 text-emerald-400 fill-emerald-400"})}),i.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-white mb-6 drop-shadow-2xl leading-tight",children:["   ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300",children:""}),""]}),i.jsx("p",{className:"text-gray-300 text-xl md:text-2xl max-w-3xl mx-auto mb-10 leading-relaxed font-medium drop-shadow-md",children:"                ."}),i.jsxs("button",{onClick:r,className:"inline-flex items-center gap-3 bg-emerald-600 hover:bg-emerald-500 text-white text-lg font-bold px-10 py-4 rounded-2xl shadow-lg hover:shadow-[0_0_25px_rgba(16,185,129,0.5)] transition-all transform hover:-translate-y-1 border-b-4 border-emerald-800 hover:border-emerald-700 active:border-b-0 active:translate-y-1",children:[i.jsx("span",{children:" "}),i.jsx($t,{className:"w-5 h-5"})]})]})]}),ok=({onBack:r,onNavigate:e})=>{const{user:n}=Cs(),[a,o]=M.useState("INBOX"),[u,f]=M.useState([]),[g,x]=M.useState(""),[p,_]=M.useState(""),[w,E]=M.useState(""),[O,z]=M.useState(!1),[ne,Q]=M.useState(!1),[ce,fe]=M.useState(""),[oe,we]=M.useState([]),[he,B]=M.useState(!1);M.useEffect(()=>{a==="COMPOSE"?S():T()},[a,n]);const S=async()=>{Q(!0);try{const ie=Qt(nt(Me,"users"),as("role","==","student")),q=(await an(ie)).docs.map(le=>({id:le.id,...le.data()}));f(q)}catch(ie){console.error("Error fetching students",ie)}finally{Q(!1)}},T=async()=>{if(n){B(!0);try{const ie=Qt(nt(Me,"contact_messages"),as("teacherId","==",n.uid)),q=(await an(ie)).docs.map(le=>({id:le.id,...le.data()}));q.sort((le,Z)=>{var D,Y;const Ee=((D=le.createdAt)==null?void 0:D.seconds)||0;return(((Y=Z.createdAt)==null?void 0:Y.seconds)||0)-Ee}),we(q)}catch(ie){console.error("Error fetching inbox",ie)}finally{B(!1)}}},A=async()=>{if(!p||!w){alert("    ");return}if(!g){alert("  ");return}z(!0);try{await Kn(nt(Me,"notifications"),{recipientId:g,title:p,message:w,type:"message",senderName:(n==null?void 0:n.displayName)||"",senderId:n==null?void 0:n.uid,createdAt:In(),read:!1}),alert("   !"),_(""),E(""),x(""),fe("")}catch(ie){console.error("Error sending message",ie),alert("   ")}finally{z(!1)}},R=async ie=>{if(window.confirm("      "))try{await __(ls(Me,"contact_messages",ie)),we(de=>de.filter(q=>q.id!==ie))}catch(de){console.error(de)}},I=async ie=>{try{await su(ls(Me,"contact_messages",ie),{read:!0}),we(de=>de.map(q=>q.id===ie?{...q,read:!0}:q))}catch(de){console.error(de)}},L=u.filter(ie=>{const de=ie.displayName?ie.displayName.toLowerCase():"",q=ie.email?ie.email.toLowerCase():"",le=ce.toLowerCase();return de.includes(le)||q.includes(le)}),C=ie=>ie?(ie.toDate?ie.toDate():new Date(ie.seconds*1e3)).toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(",",""):"";return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-5xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>e("PROFILE"),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx($t,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>e("PROFILE"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:""})]})}),i.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-xl border border-gray-700 overflow-hidden min-h-[600px] flex flex-col md:flex-row",children:[i.jsxs("div",{className:"w-full md:w-64 bg-gray-800/50 border-l border-gray-700 p-4 flex flex-col gap-2",children:[i.jsxs("button",{onClick:()=>o("INBOX"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${a==="INBOX"?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:[i.jsx(hr,{className:"w-5 h-5"})," ",oe.some(ie=>!ie.read)&&i.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"})]}),i.jsxs("button",{onClick:()=>o("COMPOSE"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${a==="COMPOSE"?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:[i.jsx(Xa,{className:"w-5 h-5"})," "]})]}),i.jsx("div",{className:"flex-1 p-6 md:p-8 overflow-y-auto",children:a==="COMPOSE"?i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("h2",{className:"text-2xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(Xa,{className:"w-6 h-6 text-emerald-400"}),"  "]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:":"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"flex gap-4",children:i.jsxs("label",{className:`flex items-center gap-2 cursor-pointer bg-gray-800 px-4 py-3 rounded-xl border transition-colors flex-1 ${g==="all"?"border-emerald-500 bg-emerald-900/20":"border-gray-700 hover:border-emerald-500"}`,children:[i.jsx("input",{type:"radio",name:"recipient",checked:g==="all",onChange:()=>x("all"),className:"w-4 h-4 accent-emerald-500"}),i.jsx("span",{className:"font-bold text-sm text-white",children:" "}),i.jsx(ag,{className:"w-4 h-4 text-emerald-400 mr-auto"})]})}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:i.jsx(br,{className:"h-4 w-4 text-gray-500"})}),i.jsx("input",{type:"text",placeholder:"    ...",value:ce,onChange:ie=>{fe(ie.target.value),g==="all"&&x("")},className:"block w-full pr-10 pl-3 py-3 border border-gray-700 rounded-xl leading-5 bg-gray-800 text-gray-300 placeholder-gray-500 focus:outline-none focus:bg-gray-900 focus:border-emerald-500 transition duration-150 ease-in-out sm:text-sm font-bold"})]}),ce&&i.jsx("div",{className:"max-h-40 overflow-y-auto bg-gray-800 border border-gray-700 rounded-xl custom-scrollbar",children:L.map(ie=>i.jsxs("div",{onClick:()=>{x(ie.id),fe(ie.displayName)},className:`p-3 cursor-pointer flex items-center gap-3 hover:bg-gray-700 transition-colors ${g===ie.id?"bg-emerald-900/20":""}`,children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center",children:ie.avatar?i.jsx("img",{src:ie.avatar,className:"w-full h-full rounded-full object-cover"}):i.jsx(Cn,{className:"w-4 h-4"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-bold text-white",children:ie.displayName}),i.jsx("div",{className:"text-xs text-gray-400",children:ie.email})]}),g===ie.id&&i.jsx(_n,{className:"w-4 h-4 text-emerald-500 mr-auto"})]},ie.id))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:" "}),i.jsx("input",{type:"text",value:p,onChange:ie=>_(ie.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-700 bg-gray-800 text-white focus:border-emerald-500 outline-none font-bold",placeholder:":    "})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:" "}),i.jsx("textarea",{value:w,onChange:ie=>E(ie.target.value),className:"w-full h-32 px-4 py-3 rounded-xl border border-gray-700 bg-gray-800 text-white focus:border-emerald-500 outline-none resize-none leading-relaxed",placeholder:"  ..."})]}),i.jsxs("button",{onClick:A,disabled:O,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2",children:[O?i.jsx(At,{className:"w-5 h-5 animate-spin"}):i.jsx(Xa,{className:"w-5 h-5"})," "]})]})]}):i.jsxs("div",{className:"h-full flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-2",children:[i.jsx(hr,{className:"w-6 h-6 text-emerald-400"})," "]}),i.jsx("button",{onClick:T,className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:i.jsx(sg,{className:"w-5 h-5 text-gray-400"})})]}),he?i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsx(At,{className:"w-8 h-8 animate-spin text-emerald-500"})}):oe.length===0?i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-500",children:[i.jsx(hr,{className:"w-16 h-16 mb-4 opacity-20"}),i.jsx("p",{children:"   "})]}):i.jsx("div",{className:"space-y-4 flex-1 overflow-y-auto custom-scrollbar pr-2",children:oe.map(ie=>i.jsxs("div",{className:`bg-gray-800 p-5 rounded-2xl border transition-all hover:border-emerald-500/30 relative overflow-hidden ${ie.read?"border-gray-700":"border-emerald-500/50 bg-emerald-900/5"}`,children:[i.jsxs("div",{className:"flex flex-row items-start gap-4 relative z-10",children:[i.jsx("div",{className:`w-10 h-10 rounded-full shrink-0 flex items-center justify-center text-base font-bold shadow-md border-2 ${ie.read?"bg-gray-700 border-gray-600 text-gray-400":"bg-emerald-600 border-emerald-500 text-white"}`,children:ie.studentName?ie.studentName.charAt(0).toUpperCase():i.jsx(Cn,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("div",{children:[i.jsx("h4",{className:`font-bold text-base leading-tight ${ie.read?"text-gray-300":"text-white"}`,children:ie.studentName||""}),i.jsx("p",{className:"text-xs text-gray-500 font-mono mt-0.5",children:ie.studentEmail})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-gray-900/50 px-3 py-1 rounded-full border border-gray-700/50",children:[i.jsx(eg,{className:"w-3 h-3 text-gray-500"}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 dir-ltr",children:C(ie.createdAt)})]})]}),i.jsx("div",{className:"p-3 bg-gray-900/50 rounded-xl border border-gray-700/30 text-sm text-gray-300 leading-relaxed whitespace-pre-wrap",children:ie.message}),i.jsxs("div",{className:"flex justify-end gap-3 mt-3",children:[!ie.read&&i.jsxs("button",{onClick:()=>I(ie.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20 text-xs font-bold transition-colors",children:[i.jsx(_n,{className:"w-3.5 h-3.5"})," "]}),i.jsxs("button",{onClick:()=>R(ie.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-red-500/10 text-red-400 hover:bg-red-500/20 text-xs font-bold transition-colors",children:[i.jsx(Xd,{className:"w-3.5 h-3.5"}),""]})]})]}),i.jsx("div",{className:"flex flex-col items-center justify-center gap-1 self-center opacity-30",children:i.jsx("div",{className:"w-8 h-10 border-2 border-gray-500 rounded-lg flex items-center justify-center",children:i.jsx(hr,{className:"w-4 h-4 text-gray-500"})})})]}),!ie.read&&i.jsx("div",{className:"absolute top-0 right-0 w-1.5 h-full bg-emerald-500"})]},ie.id))})]})})]})})]})},ck=({onBack:r,onNavigate:e})=>{const[n,a]=M.useState([]),[o,u]=M.useState(!0),[f,g]=M.useState("ALL");M.useEffect(()=>{x()},[]);const x=async()=>{u(!0);try{const E=Qt(nt(Me,"reviews"),Qa("createdAt","desc")),z=(await an(E)).docs.map(ne=>({id:ne.id,...ne.data()}));a(z)}catch(E){console.error("Error fetching reviews:",E)}finally{u(!1)}},p=n.filter(E=>f==="ALL"?!0:f==="QUIZ"?E.type==="quiz":f==="EXPLANATION"?E.type==="explanation":!0),_=E=>E?(E.toDate?E.toDate():new Date(E.seconds*1e3)).toLocaleDateString("ar-EG"):"",w=n.length>0?(n.reduce((E,O)=>E+O.rating,0)/n.length).toFixed(1):"0.0";return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-5xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>e("PROFILE"),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx($t,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>e("PROFILE"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-xl border border-gray-700 p-8 mb-8 flex flex-col md:flex-row items-center justify-between gap-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-yellow-900/20 rounded-2xl flex items-center justify-center border border-yellow-500/20 text-yellow-400",children:i.jsx(ti,{className:"w-8 h-8 fill-yellow-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-black text-white",children:w}),i.jsx("p",{className:"text-gray-400 text-sm font-bold",children:"  "})]})]}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"text-center px-6 py-3 bg-gray-800 rounded-xl border border-gray-700",children:[i.jsx("span",{className:"block text-2xl font-bold text-white",children:n.length}),i.jsx("span",{className:"text-xs text-gray-400",children:" "})]})})]}),i.jsxs("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[i.jsx("button",{onClick:()=>g("ALL"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${f==="ALL"?"bg-white text-gray-900":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:""}),i.jsx("button",{onClick:()=>g("QUIZ"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${f==="QUIZ"?"bg-blue-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:" "}),i.jsx("button",{onClick:()=>g("EXPLANATION"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${f==="EXPLANATION"?"bg-purple-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:" "})]}),i.jsx("div",{className:"bg-gray-900 rounded-3xl border border-gray-700 min-h-[400px] p-6 relative",children:o?i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(At,{className:"w-10 h-10 animate-spin text-emerald-500"})}):p.length===0?i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-500",children:[i.jsx(yh,{className:"w-16 h-16 mb-4 opacity-20"}),i.jsx("p",{className:"text-lg font-bold",children:"     "})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(E=>i.jsxs("div",{className:"bg-gray-800 p-5 rounded-2xl border border-gray-700 hover:border-gray-600 transition-all",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-bold text-white text-lg flex items-center gap-2",children:[E.studentName,i.jsx("span",{className:"text-xs font-normal text-gray-500 bg-gray-900 px-2 py-0.5 rounded-md border border-gray-700",children:_(E.createdAt)})]}),i.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[[...Array(5)].map((O,z)=>i.jsx(ti,{className:`w-3 h-3 ${z<Math.round(E.rating/2)?"text-yellow-400 fill-yellow-400":"text-gray-600"}`},z)),i.jsxs("span",{className:"text-xs text-yellow-500 font-bold mr-1",children:["(",E.rating,"/10)"]})]})]}),i.jsx("span",{className:`px-2 py-1 rounded-lg text-[10px] font-bold ${E.type==="quiz"?"bg-blue-900/30 text-blue-300 border border-blue-900":"bg-purple-900/30 text-purple-300 border border-purple-900"}`,children:E.type==="quiz"?"":""})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:" :"}),i.jsx("p",{className:"text-emerald-400 font-bold text-sm line-clamp-1",children:E.targetTitle})]}),E.comment?i.jsx("div",{className:"bg-gray-900/50 p-3 rounded-xl border border-gray-700/50",children:i.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:['"',E.comment,'"']})}):i.jsx("p",{className:"text-gray-600 text-xs italic",children:"   "})]},E.id))})})]})]})};function uk(){const[r,e]=M.useState("HOME"),[n,a]=M.useState(!1),[o,u]=M.useState(!1),f=M.useRef({}),g=M.useRef(!1),{logout:x}=Cs();M.useEffect(()=>{"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.scrollTo(0,0),window.history.replaceState({view:"HOME"},"","");const w=E=>{E.state&&E.state.view?(g.current=!0,e(E.state.view)):(g.current=!0,e("HOME"))};return window.addEventListener("popstate",w),()=>window.removeEventListener("popstate",w)},[]),M.useEffect(()=>{if(g.current){const w=f.current[r]||0;setTimeout(()=>window.scrollTo(0,w),10)}else window.scrollTo(0,0)},[r]);const p=(w,E=!1)=>{if(w===r){w==="HOME"&&window.scrollTo({top:0,behavior:"smooth"});return}f.current[r]=window.scrollY,g.current=E,window.history.pushState({view:w},"",""),e(w)},_=async()=>{u(!0),setTimeout(async()=>{await x(),u(!1),p("HOME")},1e3)};return i.jsxs("div",{className:"min-h-screen flex flex-col relative transition-colors duration-500 bg-gray-950 text-gray-100 selection:bg-emerald-500/30",children:[r==="HOME"&&i.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden bg-gray-950",children:[i.jsx(up,{}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/20 via-transparent to-gray-950/40"}),i.jsx("div",{className:"absolute inset-0 opacity-[0.03] bg-[url('https://www.transparenttextures.com/patterns/noise.png')]"})]}),o&&i.jsx("div",{className:"fixed inset-0 z-[200] bg-emerald-900/90 backdrop-blur-sm flex items-center justify-center animate-fade-in",children:i.jsx("div",{className:"text-white text-2xl font-bold animate-bounce",children:"  ..."})}),i.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[i.jsx(CR,{onLoginClick:()=>a(!0),onNavigate:w=>p(w),onLogoutClick:_}),i.jsxs("main",{className:`flex-grow ${r!=="HOME"?"pt-24":""}`,children:[r==="HOME"&&i.jsxs(i.Fragment,{children:[i.jsx(IR,{onStartQuiz:()=>p("QUIZZES"),onLoginClick:()=>a(!0),onNavigate:w=>p(w)}),i.jsx(kR,{onNavigate:w=>p(w)}),i.jsx(ak,{}),i.jsx($R,{onLoginClick:()=>a(!0)}),i.jsx(lk,{onNavigate:()=>p("PLATFORM_DEFINITION")}),i.jsxs("div",{className:"relative w-full h-px bg-gray-800/50 my-0 overflow-visible z-20",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-emerald-500 to-transparent h-[1px] opacity-60"}),i.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-1/2 h-[3px] bg-gradient-to-r from-transparent via-emerald-400 to-transparent blur-[2px] opacity-80"})]}),i.jsx(nk,{}),i.jsx(sk,{onLoginClick:()=>a(!0)}),i.jsx("div",{className:"w-full h-1 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_35px_rgba(16,185,129,1)] relative z-20 opacity-100"}),i.jsx(rk,{}),i.jsx("div",{className:"w-full h-0.5 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_30px_rgba(16,185,129,1)] relative z-20 opacity-80"}),i.jsx(tk,{})]}),r==="ABOUT_PLATFORM"&&i.jsx(HR,{onBack:()=>p("HOME",!0)}),r==="PLATFORM_DEFINITION"&&i.jsx(ik,{onBack:()=>p("HOME",!0)}),r==="TEACHER_CV"&&i.jsx(BR,{onBack:()=>p("HOME",!0)}),r==="PROFILE"&&i.jsx(LR,{onNavigate:w=>p(w)}),r==="TEACHER_DASHBOARD"&&i.jsx(OR,{}),r==="QUESTION_BANK"&&i.jsx(QR,{onBack:()=>p("HOME",!0)}),r==="TEACHER_EXPLANATIONS"&&i.jsx(WR,{onNavigate:w=>p(w),onBack:()=>p("PROFILE",!0)}),r==="TEACHER_UPLOAD_FILES"&&i.jsx(ek,{onNavigate:w=>p(w),onBack:()=>p("PROFILE",!0)}),r==="QUIZZES"&&i.jsx(zR,{onBack:()=>p("HOME",!0)}),r==="LESSONS"&&i.jsx(FR,{onBack:()=>p("HOME",!0)}),r==="LESSONS_EXPLANATIONS"&&i.jsx(XR,{onBack:()=>p("HOME",!0)}),r==="CONTACT_TEACHER"&&i.jsx(GR,{onBack:()=>p("HOME",!0)}),r==="TEACHER_CORRESPONDENCE"&&i.jsx(ok,{onNavigate:w=>p(w)}),r==="TEACHER_REVIEWS"&&i.jsx(ck,{onNavigate:w=>p(w)})]}),i.jsx(DR,{isOpen:n,onClose:()=>a(!1)}),i.jsx("footer",{className:"bg-gray-950 border-t border-white/5 py-12 relative z-20",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 bg-white/5 rounded-full flex items-center justify-center border border-white/10",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/13x8Gorb7y4H2qcQ1LVJtHY9-RoUhxg2z",alt:"Logo",className:"w-6 h-6 rounded-full"})}),i.jsx("span",{className:"text-xl font-black text-white",children:" "})]}),i.jsxs("p",{className:"text-gray-500 text-sm",children:[" ",new Date().getFullYear(),"   .     ."]})]})})]})]})}const Q_=document.getElementById("root");if(!Q_)throw new Error("Could not find root element to mount to");const dk=OE.createRoot(Q_);dk.render(i.jsx(P1.StrictMode,{children:i.jsx(AR,{children:i.jsx(uk,{})})}));
