(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=t(l);fetch(l.href,c)}})();function w2(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Mg={exports:{}},mu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K1;function a4(){if(K1)return mu;K1=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var f in l)f!=="key"&&(c[f]=l[f])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return mu.Fragment=e,mu.jsx=t,mu.jsxs=t,mu}var Q1;function i4(){return Q1||(Q1=1,Mg.exports=a4()),Mg.exports}var i=i4(),Vg={exports:{}},Be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X1;function l4(){if(X1)return Be;X1=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),N=Symbol.iterator;function C(R){return R===null||typeof R!="object"?null:(R=N&&R[N]||R["@@iterator"],typeof R=="function"?R:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,B={};function me(R,U,z){this.props=R,this.context=U,this.refs=B,this.updater=z||M}me.prototype.isReactComponent={},me.prototype.setState=function(R,U){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,U,"setState")},me.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function ce(){}ce.prototype=me.prototype;function le(R,U,z){this.props=R,this.context=U,this.refs=B,this.updater=z||M}var _e=le.prototype=new ce;_e.constructor=le,Z(_e,me.prototype),_e.isPureReactComponent=!0;var ge=Array.isArray;function G(){}var S={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function A(R,U,z){var ee=z.ref;return{$$typeof:r,type:R,key:U,ref:ee!==void 0?ee:null,props:z}}function O(R,U){return A(R.type,U,R.props)}function D(R){return typeof R=="object"&&R!==null&&R.$$typeof===r}function L(R){var U={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(z){return U[z]})}var I=/\/+/g;function de(R,U){return typeof R=="object"&&R!==null&&R.key!=null?L(""+R.key):U.toString(36)}function he(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(G,G):(R.status="pending",R.then(function(U){R.status==="pending"&&(R.status="fulfilled",R.value=U)},function(U){R.status==="pending"&&(R.status="rejected",R.reason=U)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function F(R,U,z,ee,xe){var Se=typeof R;(Se==="undefined"||Se==="boolean")&&(R=null);var Me=!1;if(R===null)Me=!0;else switch(Se){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(R.$$typeof){case r:case e:Me=!0;break;case v:return Me=R._init,F(Me(R._payload),U,z,ee,xe)}}if(Me)return xe=xe(R),Me=ee===""?"."+de(R,0):ee,ge(xe)?(z="",Me!=null&&(z=Me.replace(I,"$&/")+"/"),F(xe,U,z,"",function(Nt){return Nt})):xe!=null&&(D(xe)&&(xe=O(xe,z+(xe.key==null||R&&R.key===xe.key?"":(""+xe.key).replace(I,"$&/")+"/")+Me)),U.push(xe)),1;Me=0;var Ke=ee===""?".":ee+":";if(ge(R))for(var ke=0;ke<R.length;ke++)ee=R[ke],Se=Ke+de(ee,ke),Me+=F(ee,U,z,Se,xe);else if(ke=C(R),typeof ke=="function")for(R=ke.call(R),ke=0;!(ee=R.next()).done;)ee=ee.value,Se=Ke+de(ee,ke++),Me+=F(ee,U,z,Se,xe);else if(Se==="object"){if(typeof R.then=="function")return F(he(R),U,z,ee,xe);throw U=String(R),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return Me}function oe(R,U,z){if(R==null)return R;var ee=[],xe=0;return F(R,ee,"","",function(Se){return U.call(z,Se,xe++)}),ee}function Y(R){if(R._status===-1){var U=R._result;U=U(),U.then(function(z){(R._status===0||R._status===-1)&&(R._status=1,R._result=z)},function(z){(R._status===0||R._status===-1)&&(R._status=2,R._result=z)}),R._status===-1&&(R._status=0,R._result=U)}if(R._status===1)return R._result.default;throw R._result}var re=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},ve={map:oe,forEach:function(R,U,z){oe(R,function(){U.apply(this,arguments)},z)},count:function(R){var U=0;return oe(R,function(){U++}),U},toArray:function(R){return oe(R,function(U){return U})||[]},only:function(R){if(!D(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return Be.Activity=w,Be.Children=ve,Be.Component=me,Be.Fragment=t,Be.Profiler=l,Be.PureComponent=le,Be.StrictMode=s,Be.Suspense=g,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Be.__COMPILER_RUNTIME={__proto__:null,c:function(R){return S.H.useMemoCache(R)}},Be.cache=function(R){return function(){return R.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(R,U,z){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var ee=Z({},R.props),xe=R.key;if(U!=null)for(Se in U.key!==void 0&&(xe=""+U.key),U)!j.call(U,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&U.ref===void 0||(ee[Se]=U[Se]);var Se=arguments.length-2;if(Se===1)ee.children=z;else if(1<Se){for(var Me=Array(Se),Ke=0;Ke<Se;Ke++)Me[Ke]=arguments[Ke+2];ee.children=Me}return A(R.type,xe,ee)},Be.createContext=function(R){return R={$$typeof:d,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:c,_context:R},R},Be.createElement=function(R,U,z){var ee,xe={},Se=null;if(U!=null)for(ee in U.key!==void 0&&(Se=""+U.key),U)j.call(U,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(xe[ee]=U[ee]);var Me=arguments.length-2;if(Me===1)xe.children=z;else if(1<Me){for(var Ke=Array(Me),ke=0;ke<Me;ke++)Ke[ke]=arguments[ke+2];xe.children=Ke}if(R&&R.defaultProps)for(ee in Me=R.defaultProps,Me)xe[ee]===void 0&&(xe[ee]=Me[ee]);return A(R,Se,xe)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(R){return{$$typeof:f,render:R}},Be.isValidElement=D,Be.lazy=function(R){return{$$typeof:v,_payload:{_status:-1,_result:R},_init:Y}},Be.memo=function(R,U){return{$$typeof:x,type:R,compare:U===void 0?null:U}},Be.startTransition=function(R){var U=S.T,z={};S.T=z;try{var ee=R(),xe=S.S;xe!==null&&xe(z,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(G,re)}catch(Se){re(Se)}finally{U!==null&&z.types!==null&&(U.types=z.types),S.T=U}},Be.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Be.use=function(R){return S.H.use(R)},Be.useActionState=function(R,U,z){return S.H.useActionState(R,U,z)},Be.useCallback=function(R,U){return S.H.useCallback(R,U)},Be.useContext=function(R){return S.H.useContext(R)},Be.useDebugValue=function(){},Be.useDeferredValue=function(R,U){return S.H.useDeferredValue(R,U)},Be.useEffect=function(R,U){return S.H.useEffect(R,U)},Be.useEffectEvent=function(R){return S.H.useEffectEvent(R)},Be.useId=function(){return S.H.useId()},Be.useImperativeHandle=function(R,U,z){return S.H.useImperativeHandle(R,U,z)},Be.useInsertionEffect=function(R,U){return S.H.useInsertionEffect(R,U)},Be.useLayoutEffect=function(R,U){return S.H.useLayoutEffect(R,U)},Be.useMemo=function(R,U){return S.H.useMemo(R,U)},Be.useOptimistic=function(R,U){return S.H.useOptimistic(R,U)},Be.useReducer=function(R,U,z){return S.H.useReducer(R,U,z)},Be.useRef=function(R){return S.H.useRef(R)},Be.useState=function(R){return S.H.useState(R)},Be.useSyncExternalStore=function(R,U,z){return S.H.useSyncExternalStore(R,U,z)},Be.useTransition=function(){return S.H.useTransition()},Be.version="19.2.0",Be}var Y1;function sx(){return Y1||(Y1=1,Vg.exports=l4()),Vg.exports}var V=sx();const rx=w2(V);var Pg={exports:{}},gu={},Lg={exports:{}},zg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J1;function o4(){return J1||(J1=1,(function(r){function e(F,oe){var Y=F.length;F.push(oe);e:for(;0<Y;){var re=Y-1>>>1,ve=F[re];if(0<l(ve,oe))F[re]=oe,F[Y]=ve,Y=re;else break e}}function t(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var oe=F[0],Y=F.pop();if(Y!==oe){F[0]=Y;e:for(var re=0,ve=F.length,R=ve>>>1;re<R;){var U=2*(re+1)-1,z=F[U],ee=U+1,xe=F[ee];if(0>l(z,Y))ee<ve&&0>l(xe,z)?(F[re]=xe,F[ee]=Y,re=ee):(F[re]=z,F[U]=Y,re=U);else if(ee<ve&&0>l(xe,Y))F[re]=xe,F[ee]=Y,re=ee;else break e}}return oe}function l(F,oe){var Y=F.sortIndex-oe.sortIndex;return Y!==0?Y:F.id-oe.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();r.unstable_now=function(){return d.now()-f}}var g=[],x=[],v=1,w=null,N=3,C=!1,M=!1,Z=!1,B=!1,me=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,le=typeof setImmediate<"u"?setImmediate:null;function _e(F){for(var oe=t(x);oe!==null;){if(oe.callback===null)s(x);else if(oe.startTime<=F)s(x),oe.sortIndex=oe.expirationTime,e(g,oe);else break;oe=t(x)}}function ge(F){if(Z=!1,_e(F),!M)if(t(g)!==null)M=!0,G||(G=!0,L());else{var oe=t(x);oe!==null&&he(ge,oe.startTime-F)}}var G=!1,S=-1,j=5,A=-1;function O(){return B?!0:!(r.unstable_now()-A<j)}function D(){if(B=!1,G){var F=r.unstable_now();A=F;var oe=!0;try{e:{M=!1,Z&&(Z=!1,ce(S),S=-1),C=!0;var Y=N;try{t:{for(_e(F),w=t(g);w!==null&&!(w.expirationTime>F&&O());){var re=w.callback;if(typeof re=="function"){w.callback=null,N=w.priorityLevel;var ve=re(w.expirationTime<=F);if(F=r.unstable_now(),typeof ve=="function"){w.callback=ve,_e(F),oe=!0;break t}w===t(g)&&s(g),_e(F)}else s(g);w=t(g)}if(w!==null)oe=!0;else{var R=t(x);R!==null&&he(ge,R.startTime-F),oe=!1}}break e}finally{w=null,N=Y,C=!1}oe=void 0}}finally{oe?L():G=!1}}}var L;if(typeof le=="function")L=function(){le(D)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,de=I.port2;I.port1.onmessage=D,L=function(){de.postMessage(null)}}else L=function(){me(D,0)};function he(F,oe){S=me(function(){F(r.unstable_now())},oe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(F){F.callback=null},r.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<F?Math.floor(1e3/F):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_next=function(F){switch(N){case 1:case 2:case 3:var oe=3;break;default:oe=N}var Y=N;N=oe;try{return F()}finally{N=Y}},r.unstable_requestPaint=function(){B=!0},r.unstable_runWithPriority=function(F,oe){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Y=N;N=F;try{return oe()}finally{N=Y}},r.unstable_scheduleCallback=function(F,oe,Y){var re=r.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?re+Y:re):Y=re,F){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=Y+ve,F={id:v++,callback:oe,priorityLevel:F,startTime:Y,expirationTime:ve,sortIndex:-1},Y>re?(F.sortIndex=Y,e(x,F),t(g)===null&&F===t(x)&&(Z?(ce(S),S=-1):Z=!0,he(ge,Y-re))):(F.sortIndex=ve,e(g,F),M||C||(M=!0,G||(G=!0,L()))),F},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(F){var oe=N;return function(){var Y=N;N=oe;try{return F.apply(this,arguments)}finally{N=Y}}}})(zg)),zg}var W1;function c4(){return W1||(W1=1,Lg.exports=o4()),Lg.exports}var Ug={exports:{}},In={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z1;function u4(){if(Z1)return In;Z1=1;var r=sx();function e(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)x+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,x,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:g,containerInfo:x,implementation:v}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return In.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,In.createPortal=function(g,x){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return c(g,x,null,v)},In.flushSync=function(g){var x=d.T,v=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=x,s.p=v,s.d.f()}},In.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,s.d.C(g,x))},In.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},In.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var v=x.as,w=f(v,x.crossOrigin),N=typeof x.integrity=="string"?x.integrity:void 0,C=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;v==="style"?s.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:w,integrity:N,fetchPriority:C}):v==="script"&&s.d.X(g,{crossOrigin:w,integrity:N,fetchPriority:C,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},In.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var v=f(x.as,x.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&s.d.M(g)},In.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var v=x.as,w=f(v,x.crossOrigin);s.d.L(g,v,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},In.preloadModule=function(g,x){if(typeof g=="string")if(x){var v=f(x.as,x.crossOrigin);s.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else s.d.m(g)},In.requestFormReset=function(g){s.d.r(g)},In.unstable_batchedUpdates=function(g,x){return g(x)},In.useFormState=function(g,x,v){return d.H.useFormState(g,x,v)},In.useFormStatus=function(){return d.H.useHostTransitionStatus()},In.version="19.2.0",In}var ew;function d4(){if(ew)return Ug.exports;ew=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ug.exports=u4(),Ug.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tw;function h4(){if(tw)return gu;tw=1;var r=c4(),e=sx(),t=d4();function s(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var a=n,o=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(o=a.return),n=a.return;while(n)}return a.tag===3?o:null}function d(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function f(n){if(n.tag===31){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function g(n){if(c(n)!==n)throw Error(s(188))}function x(n){var a=n.alternate;if(!a){if(a=c(n),a===null)throw Error(s(188));return a!==n?null:n}for(var o=n,u=a;;){var m=o.return;if(m===null)break;var p=m.alternate;if(p===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===p.child){for(p=m.child;p;){if(p===o)return g(m),n;if(p===u)return g(m),a;p=p.sibling}throw Error(s(188))}if(o.return!==u.return)o=m,u=p;else{for(var b=!1,E=m.child;E;){if(E===o){b=!0,o=m,u=p;break}if(E===u){b=!0,u=m,o=p;break}E=E.sibling}if(!b){for(E=p.child;E;){if(E===o){b=!0,o=p,u=m;break}if(E===u){b=!0,u=p,o=m;break}E=E.sibling}if(!b)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?n:a}function v(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=v(n),a!==null)return a;n=n.sibling}return null}var w=Object.assign,N=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),me=Symbol.for("react.profiler"),ce=Symbol.for("react.consumer"),le=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function L(n){return n===null||typeof n!="object"?null:(n=D&&n[D]||n["@@iterator"],typeof n=="function"?n:null)}var I=Symbol.for("react.client.reference");function de(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===I?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Z:return"Fragment";case me:return"Profiler";case B:return"StrictMode";case ge:return"Suspense";case G:return"SuspenseList";case A:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case M:return"Portal";case le:return n.displayName||"Context";case ce:return(n._context.displayName||"Context")+".Consumer";case _e:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case S:return a=n.displayName||null,a!==null?a:de(n.type)||"Memo";case j:a=n._payload,n=n._init;try{return de(n(a))}catch{}}return null}var he=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},re=[],ve=-1;function R(n){return{current:n}}function U(n){0>ve||(n.current=re[ve],re[ve]=null,ve--)}function z(n,a){ve++,re[ve]=n.current,n.current=a}var ee=R(null),xe=R(null),Se=R(null),Me=R(null);function Ke(n,a){switch(z(Se,a),z(xe,n),z(ee,null),a.nodeType){case 9:case 11:n=(n=a.documentElement)&&(n=n.namespaceURI)?p1(n):0;break;default:if(n=a.tagName,a=a.namespaceURI)a=p1(a),n=x1(a,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}U(ee),z(ee,n)}function ke(){U(ee),U(xe),U(Se)}function Nt(n){n.memoizedState!==null&&z(Me,n);var a=ee.current,o=x1(a,n.type);a!==o&&(z(xe,n),z(ee,o))}function gt(n){xe.current===n&&(U(ee),U(xe)),Me.current===n&&(U(Me),uu._currentValue=Y)}var Rt,it;function vn(n){if(Rt===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);Rt=a&&a[1]||"",it=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rt+n+it}var vs=!1;function ws(n,a){if(!n||vs)return"";vs=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(W){var X=W}Reflect.construct(n,[],ae)}else{try{ae.call()}catch(W){X=W}n.call(ae.prototype)}}else{try{throw Error()}catch(W){X=W}(ae=n())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(W){if(W&&X&&typeof W.stack=="string")return[W.stack,X.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),b=p[0],E=p[1];if(b&&E){var k=b.split(`
`),Q=E.split(`
`);for(m=u=0;u<k.length&&!k[u].includes("DetermineComponentFrameRoot");)u++;for(;m<Q.length&&!Q[m].includes("DetermineComponentFrameRoot");)m++;if(u===k.length||m===Q.length)for(u=k.length-1,m=Q.length-1;1<=u&&0<=m&&k[u]!==Q[m];)m--;for(;1<=u&&0<=m;u--,m--)if(k[u]!==Q[m]){if(u!==1||m!==1)do if(u--,m--,0>m||k[u]!==Q[m]){var ne=`
`+k[u].replace(" at new "," at ");return n.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",n.displayName)),ne}while(1<=u&&0<=m);break}}}finally{vs=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?vn(o):""}function sr(n,a){switch(n.tag){case 26:case 27:case 5:return vn(n.type);case 16:return vn("Lazy");case 13:return n.child!==a&&a!==null?vn("Suspense Fallback"):vn("Suspense");case 19:return vn("SuspenseList");case 0:case 15:return ws(n.type,!1);case 11:return ws(n.type.render,!1);case 1:return ws(n.type,!0);case 31:return vn("Activity");default:return""}}function Vr(n){try{var a="",o=null;do a+=sr(n,o),o=n,n=n.return;while(n);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ot=Object.prototype.hasOwnProperty,Mt=r.unstable_scheduleCallback,fn=r.unstable_cancelCallback,wa=r.unstable_shouldYield,_a=r.unstable_requestPaint,Vt=r.unstable_now,_s=r.unstable_getCurrentPriorityLevel,rr=r.unstable_ImmediatePriority,Pr=r.unstable_UserBlockingPriority,wn=r.unstable_NormalPriority,Na=r.unstable_LowPriority,Ea=r.unstable_IdlePriority,ie=r.log,Ye=r.unstable_setDisableYieldValue,Ue=null,Je=null;function Ut(n){if(typeof ie=="function"&&Ye(n),Je&&typeof Je.setStrictMode=="function")try{Je.setStrictMode(Ue,n)}catch{}}var st=Math.clz32?Math.clz32:ar,Lr=Math.log,Pn=Math.LN2;function ar(n){return n>>>=0,n===0?32:31-(Lr(n)/Pn|0)|0}var Gn=256,ue=262144,Ne=4194304;function Ce(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function be(n,a,o){var u=n.pendingLanes;if(u===0)return 0;var m=0,p=n.suspendedLanes,b=n.pingedLanes;n=n.warmLanes;var E=u&134217727;return E!==0?(u=E&~p,u!==0?m=Ce(u):(b&=E,b!==0?m=Ce(b):o||(o=E&~n,o!==0&&(m=Ce(o))))):(E=u&~p,E!==0?m=Ce(E):b!==0?m=Ce(b):o||(o=u&~n,o!==0&&(m=Ce(o)))),m===0?0:a!==0&&a!==m&&(a&p)===0&&(p=m&-m,o=a&-a,p>=o||p===32&&(o&4194048)!==0)?a:m}function Le(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function We(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function At(){var n=Ne;return Ne<<=1,(Ne&62914560)===0&&(Ne=4194304),n}function ct(n){for(var a=[],o=0;31>o;o++)a.push(n);return a}function ut(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Bt(n,a,o,u,m,p){var b=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var E=n.entanglements,k=n.expirationTimes,Q=n.hiddenUpdates;for(o=b&~o;0<o;){var ne=31-st(o),ae=1<<ne;E[ne]=0,k[ne]=-1;var X=Q[ne];if(X!==null)for(Q[ne]=null,ne=0;ne<X.length;ne++){var W=X[ne];W!==null&&(W.lane&=-536870913)}o&=~ae}u!==0&&mn(n,u,0),p!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=p&~(b&~a))}function mn(n,a,o){n.pendingLanes|=a,n.suspendedLanes&=~a;var u=31-st(a);n.entangledLanes|=a,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function ki(n,a){var o=n.entangledLanes|=a;for(n=n.entanglements;o;){var u=31-st(o),m=1<<u;m&a|n[u]&a&&(n[u]|=a),o&=~m}}function pc(n,a){var o=a&-a;return o=(o&42)!==0?1:Di(o),(o&(n.suspendedLanes|a))!==0?0:o}function Di(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function zr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Td(){var n=oe.p;return n!==0?n:(n=window.event,n===void 0?32:U1(n.type))}function Us(n,a){var o=oe.p;try{return oe.p=n,a()}finally{oe.p=o}}var Bs=Math.random().toString(36).slice(2),en="__reactFiber$"+Bs,gn="__reactProps$"+Bs,ir="__reactContainer$"+Bs,Ml="__reactEvents$"+Bs,Bm="__reactListeners$"+Bs,Sd="__reactHandles$"+Bs,jd="__reactResources$"+Bs,lr="__reactMarker$"+Bs;function Vl(n){delete n[en],delete n[gn],delete n[Ml],delete n[Bm],delete n[Sd]}function or(n){var a=n[en];if(a)return a;for(var o=n.parentNode;o;){if(a=o[ir]||o[en]){if(o=a.alternate,a.child!==null||o!==null&&o.child!==null)for(n=E1(n);n!==null;){if(o=n[en])return o;n=E1(n)}return a}n=o,o=n.parentNode}return null}function Ns(n){if(n=n[en]||n[ir]){var a=n.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return n}return null}function rs(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(s(33))}function cr(n){var a=n[jd];return a||(a=n[jd]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function tn(n){n[lr]=!0}var xc=new Set,yc={};function ur(n,a){dr(n,a),dr(n+"Capture",a)}function dr(n,a){for(yc[n]=a,n=0;n<a.length;n++)xc.add(a[n])}var bc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vc={},wc={};function Ad(n){return Ot.call(wc,n)?!0:Ot.call(vc,n)?!1:bc.test(n)?wc[n]=!0:(vc[n]=!0,!1)}function Pl(n,a,o){if(Ad(a))if(o===null)n.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+o)}}function as(n,a,o){if(o===null)n.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+o)}}function nn(n,a,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(a,o,""+u)}}function pn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ta(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function _c(n,a,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,a);if(!n.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,p=u.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return m.call(this)},set:function(b){o=""+b,p.call(this,b)}}),Object.defineProperty(n,a,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function pt(n){if(!n._valueTracker){var a=Ta(n)?"checked":"value";n._valueTracker=_c(n,a,""+n[a])}}function Oi(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var o=a.getValue(),u="";return n&&(u=Ta(n)?n.checked?"true":"false":n.value),n=u,n!==o?(a.setValue(n),!0):!1}function hr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Mi=/[\n"\\]/g;function $n(n){return n.replace(Mi,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ll(n,a,o,u,m,p,b,E){n.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.type=b:n.removeAttribute("type"),a!=null?b==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+pn(a)):n.value!==""+pn(a)&&(n.value=""+pn(a)):b!=="submit"&&b!=="reset"||n.removeAttribute("value"),a!=null?Nc(n,b,pn(a)):o!=null?Nc(n,b,pn(o)):u!=null&&n.removeAttribute("value"),m==null&&p!=null&&(n.defaultChecked=!!p),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+pn(E):n.removeAttribute("name")}function Id(n,a,o,u,m,p,b,E){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),a!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||a!=null)){pt(n);return}o=o!=null?""+pn(o):"",a=a!=null?""+pn(a):o,E||a===n.value||(n.value=a),n.defaultValue=a}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=E?n.checked:!!u,n.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.name=b),pt(n)}function Nc(n,a,o){a==="number"&&hr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Sa(n,a,o,u){if(n=n.options,a){a={};for(var m=0;m<o.length;m++)a["$"+o[m]]=!0;for(o=0;o<n.length;o++)m=a.hasOwnProperty("$"+n[o].value),n[o].selected!==m&&(n[o].selected=m),m&&u&&(n[o].defaultSelected=!0)}else{for(o=""+pn(o),a=null,m=0;m<n.length;m++){if(n[m].value===o){n[m].selected=!0,u&&(n[m].defaultSelected=!0);return}a!==null||n[m].disabled||(a=n[m])}a!==null&&(a.selected=!0)}}function Cd(n,a,o){if(a!=null&&(a=""+pn(a),a!==n.value&&(n.value=a),o==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=o!=null?""+pn(o):""}function ja(n,a,o,u){if(a==null){if(u!=null){if(o!=null)throw Error(s(92));if(he(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),a=o}o=pn(a),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),pt(n)}function Kn(n,a){if(a){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=a;return}}n.textContent=a}var Rd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ec(n,a,o){var u=a.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":u?n.setProperty(a,o):typeof o!="number"||o===0||Rd.has(a)?a==="float"?n.cssFloat=o:n[a]=(""+o).trim():n[a]=o+"px"}function Tc(n,a,o){if(a!=null&&typeof a!="object")throw Error(s(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var m in a)u=a[m],a.hasOwnProperty(m)&&o[m]!==u&&Ec(n,m,u)}else for(var p in a)a.hasOwnProperty(p)&&Ec(n,p,a[p])}function zl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Aa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ul(n){return Aa.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function qs(){}var Sc=null;function Es(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ia=null,fr=null;function Vi(n){var a=Ns(n);if(a&&(n=a.stateNode)){var o=n[gn]||null;e:switch(n=a.stateNode,a.type){case"input":if(Ll(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),a=o.name,o.type==="radio"&&a!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+$n(""+a)+'"][type="radio"]'),a=0;a<o.length;a++){var u=o[a];if(u!==n&&u.form===n.form){var m=u[gn]||null;if(!m)throw Error(s(90));Ll(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<o.length;a++)u=o[a],u.form===n.form&&Oi(u)}break e;case"textarea":Cd(n,o.value,o.defaultValue);break e;case"select":a=o.value,a!=null&&Sa(n,!!o.multiple,a,!1)}}}var Bl=!1;function Ca(n,a,o){if(Bl)return n(a,o);Bl=!0;try{var u=n(a);return u}finally{if(Bl=!1,(Ia!==null||fr!==null)&&(Th(),Ia&&(a=Ia,n=fr,fr=Ia=null,Vi(a),n)))for(a=0;a<n.length;a++)Vi(n[a])}}function Fs(n,a){var o=n.stateNode;if(o===null)return null;var u=o[gn]||null;if(u===null)return null;o=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(s(231,a,typeof o));return o}var Ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pi=!1;if(Ts)try{var Et={};Object.defineProperty(Et,"passive",{get:function(){Pi=!0}}),window.addEventListener("test",Et,Et),window.removeEventListener("test",Et,Et)}catch{Pi=!1}var mr=null,jc=null,Li=null;function Ac(){if(Li)return Li;var n,a=jc,o=a.length,u,m="value"in mr?mr.value:mr.textContent,p=m.length;for(n=0;n<o&&a[n]===m[n];n++);var b=o-n;for(u=1;u<=b&&a[o-u]===m[p-u];u++);return Li=m.slice(n,1<u?1-u:void 0)}function zi(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function Ur(){return!0}function Hs(){return!1}function _n(n){function a(o,u,m,p,b){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=p,this.target=b,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(o=n[E],this[E]=o?o(p):p[E]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ur:Hs,this.isPropagationStopped=Hs,this}return w(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ur)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ur)},persist:function(){},isPersistent:Ur}),a}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gr=_n(Br),Ra=w({},Br,{view:0,detail:0}),Ic=_n(Ra),ka,ql,pr,Fl=w({},Ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Da,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==pr&&(pr&&n.type==="mousemove"?(ka=n.screenX-pr.screenX,ql=n.screenY-pr.screenY):ql=ka=0,pr=n),ka)},movementY:function(n){return"movementY"in n?n.movementY:ql}}),Cc=_n(Fl),Ui=w({},Fl,{dataTransfer:0}),Dd=_n(Ui),Od=w({},Ra,{relatedTarget:0}),Bi=_n(Od),Rc=w({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),Md=_n(Rc),Hl=w({},Br,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Vd=_n(Hl),Pd=w({},Br,{data:0}),xr=_n(Pd),Ld={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ud={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bd(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=Ud[n])?!!a[n]:!1}function Da(){return Bd}var Ln=w({},Ra,{key:function(n){if(n.key){var a=Ld[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=zi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?zd[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Da,charCode:function(n){return n.type==="keypress"?zi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?zi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),qd=_n(Ln),Fd=w({},Fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qr=_n(Fd),h=w({},Ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Da}),y=_n(h),_=w({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),T=_n(_),$=w({},Fl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),J=_n($),we=w({},Br,{newState:0,oldState:0}),Fe=_n(we),Kt=[9,13,27,32],dt=Ts&&"CompositionEvent"in window,Pt=null;Ts&&"documentMode"in document&&(Pt=document.documentMode);var Ss=Ts&&"TextEvent"in window&&!Pt,yr=Ts&&(!dt||Pt&&8<Pt&&11>=Pt),Gs=" ",$s=!1;function qi(n,a){switch(n){case"keyup":return Kt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var $l=!1;function IS(n,a){switch(n){case"compositionend":return Gl(a);case"keypress":return a.which!==32?null:($s=!0,Gs);case"textInput":return n=a.data,n===Gs&&$s?null:n;default:return null}}function CS(n,a){if($l)return n==="compositionend"||!dt&&qi(n,a)?(n=Ac(),Li=jc=mr=null,$l=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return yr&&a.locale!=="ko"?null:a.data;default:return null}}var RS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jy(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!RS[n.type]:a==="textarea"}function Ay(n,a,o,u){Ia?fr?fr.push(u):fr=[u]:Ia=u,a=kh(a,"onChange"),0<a.length&&(o=new gr("onChange","change",null,o,u),n.push({event:o,listeners:a}))}var kc=null,Dc=null;function kS(n){u1(n,0)}function Hd(n){var a=rs(n);if(Oi(a))return n}function Iy(n,a){if(n==="change")return a}var Cy=!1;if(Ts){var qm;if(Ts){var Fm="oninput"in document;if(!Fm){var Ry=document.createElement("div");Ry.setAttribute("oninput","return;"),Fm=typeof Ry.oninput=="function"}qm=Fm}else qm=!1;Cy=qm&&(!document.documentMode||9<document.documentMode)}function ky(){kc&&(kc.detachEvent("onpropertychange",Dy),Dc=kc=null)}function Dy(n){if(n.propertyName==="value"&&Hd(Dc)){var a=[];Ay(a,Dc,n,Es(n)),Ca(kS,a)}}function DS(n,a,o){n==="focusin"?(ky(),kc=a,Dc=o,kc.attachEvent("onpropertychange",Dy)):n==="focusout"&&ky()}function OS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Hd(Dc)}function MS(n,a){if(n==="click")return Hd(a)}function VS(n,a){if(n==="input"||n==="change")return Hd(a)}function PS(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var is=typeof Object.is=="function"?Object.is:PS;function Oc(n,a){if(is(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var o=Object.keys(n),u=Object.keys(a);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!Ot.call(a,m)||!is(n[m],a[m]))return!1}return!0}function Oy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function My(n,a){var o=Oy(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=a&&u>=a)return{node:o,offset:a-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Oy(o)}}function Vy(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?Vy(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function Py(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=hr(n.document);a instanceof n.HTMLIFrameElement;){try{var o=typeof a.contentWindow.location.href=="string"}catch{o=!1}if(o)n=a.contentWindow;else break;a=hr(n.document)}return a}function Hm(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}var LS=Ts&&"documentMode"in document&&11>=document.documentMode,Kl=null,Gm=null,Mc=null,$m=!1;function Ly(n,a,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;$m||Kl==null||Kl!==hr(u)||(u=Kl,"selectionStart"in u&&Hm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Mc&&Oc(Mc,u)||(Mc=u,u=kh(Gm,"onSelect"),0<u.length&&(a=new gr("onSelect","select",null,a,o),n.push({event:a,listeners:u}),a.target=Kl)))}function Fi(n,a){var o={};return o[n.toLowerCase()]=a.toLowerCase(),o["Webkit"+n]="webkit"+a,o["Moz"+n]="moz"+a,o}var Ql={animationend:Fi("Animation","AnimationEnd"),animationiteration:Fi("Animation","AnimationIteration"),animationstart:Fi("Animation","AnimationStart"),transitionrun:Fi("Transition","TransitionRun"),transitionstart:Fi("Transition","TransitionStart"),transitioncancel:Fi("Transition","TransitionCancel"),transitionend:Fi("Transition","TransitionEnd")},Km={},zy={};Ts&&(zy=document.createElement("div").style,"AnimationEvent"in window||(delete Ql.animationend.animation,delete Ql.animationiteration.animation,delete Ql.animationstart.animation),"TransitionEvent"in window||delete Ql.transitionend.transition);function Hi(n){if(Km[n])return Km[n];if(!Ql[n])return n;var a=Ql[n],o;for(o in a)if(a.hasOwnProperty(o)&&o in zy)return Km[n]=a[o];return n}var Uy=Hi("animationend"),By=Hi("animationiteration"),qy=Hi("animationstart"),zS=Hi("transitionrun"),US=Hi("transitionstart"),BS=Hi("transitioncancel"),Fy=Hi("transitionend"),Hy=new Map,Qm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qm.push("scrollEnd");function Ks(n,a){Hy.set(n,a),ur(a,[n])}var Gd=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},js=[],Xl=0,Xm=0;function $d(){for(var n=Xl,a=Xm=Xl=0;a<n;){var o=js[a];js[a++]=null;var u=js[a];js[a++]=null;var m=js[a];js[a++]=null;var p=js[a];if(js[a++]=null,u!==null&&m!==null){var b=u.pending;b===null?m.next=m:(m.next=b.next,b.next=m),u.pending=m}p!==0&&Gy(o,m,p)}}function Kd(n,a,o,u){js[Xl++]=n,js[Xl++]=a,js[Xl++]=o,js[Xl++]=u,Xm|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Ym(n,a,o,u){return Kd(n,a,o,u),Qd(n)}function Gi(n,a){return Kd(n,null,null,a),Qd(n)}function Gy(n,a,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var m=!1,p=n.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(m=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,m&&a!==null&&(m=31-st(o),n=p.hiddenUpdates,u=n[m],u===null?n[m]=[a]:u.push(a),a.lane=o|536870912),p):null}function Qd(n){if(50<su)throw su=0,ag=null,Error(s(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var Yl={};function qS(n,a,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ls(n,a,o,u){return new qS(n,a,o,u)}function Jm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Fr(n,a){var o=n.alternate;return o===null?(o=ls(n.tag,a,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=a,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,a=n.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function $y(n,a){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,a=o.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function Xd(n,a,o,u,m,p){var b=0;if(u=n,typeof n=="function")Jm(n)&&(b=1);else if(typeof n=="string")b=Kj(n,o,ee.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case A:return n=ls(31,o,a,m),n.elementType=A,n.lanes=p,n;case Z:return $i(o.children,m,p,a);case B:b=8,m|=24;break;case me:return n=ls(12,o,a,m|2),n.elementType=me,n.lanes=p,n;case ge:return n=ls(13,o,a,m),n.elementType=ge,n.lanes=p,n;case G:return n=ls(19,o,a,m),n.elementType=G,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case le:b=10;break e;case ce:b=9;break e;case _e:b=11;break e;case S:b=14;break e;case j:b=16,u=null;break e}b=29,o=Error(s(130,n===null?"null":typeof n,"")),u=null}return a=ls(b,o,a,m),a.elementType=n,a.type=u,a.lanes=p,a}function $i(n,a,o,u){return n=ls(7,n,u,a),n.lanes=o,n}function Wm(n,a,o){return n=ls(6,n,null,a),n.lanes=o,n}function Ky(n){var a=ls(18,null,null,0);return a.stateNode=n,a}function Zm(n,a,o){return a=ls(4,n.children!==null?n.children:[],n.key,a),a.lanes=o,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}var Qy=new WeakMap;function As(n,a){if(typeof n=="object"&&n!==null){var o=Qy.get(n);return o!==void 0?o:(a={value:n,source:a,stack:Vr(a)},Qy.set(n,a),a)}return{value:n,source:a,stack:Vr(a)}}var Jl=[],Wl=0,Yd=null,Vc=0,Is=[],Cs=0,Oa=null,br=1,vr="";function Hr(n,a){Jl[Wl++]=Vc,Jl[Wl++]=Yd,Yd=n,Vc=a}function Xy(n,a,o){Is[Cs++]=br,Is[Cs++]=vr,Is[Cs++]=Oa,Oa=n;var u=br;n=vr;var m=32-st(u)-1;u&=~(1<<m),o+=1;var p=32-st(a)+m;if(30<p){var b=m-m%5;p=(u&(1<<b)-1).toString(32),u>>=b,m-=b,br=1<<32-st(a)+m|o<<m|u,vr=p+n}else br=1<<p|o<<m|u,vr=n}function e0(n){n.return!==null&&(Hr(n,1),Xy(n,1,0))}function t0(n){for(;n===Yd;)Yd=Jl[--Wl],Jl[Wl]=null,Vc=Jl[--Wl],Jl[Wl]=null;for(;n===Oa;)Oa=Is[--Cs],Is[Cs]=null,vr=Is[--Cs],Is[Cs]=null,br=Is[--Cs],Is[Cs]=null}function Yy(n,a){Is[Cs++]=br,Is[Cs++]=vr,Is[Cs++]=Oa,br=a.id,vr=a.overflow,Oa=n}var Nn=null,kt=null,rt=!1,Ma=null,Rs=!1,n0=Error(s(519));function Va(n){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pc(As(a,n)),n0}function Jy(n){var a=n.stateNode,o=n.type,u=n.memoizedProps;switch(a[en]=n,a[gn]=u,o){case"dialog":Xe("cancel",a),Xe("close",a);break;case"iframe":case"object":case"embed":Xe("load",a);break;case"video":case"audio":for(o=0;o<au.length;o++)Xe(au[o],a);break;case"source":Xe("error",a);break;case"img":case"image":case"link":Xe("error",a),Xe("load",a);break;case"details":Xe("toggle",a);break;case"input":Xe("invalid",a),Id(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Xe("invalid",a);break;case"textarea":Xe("invalid",a),ja(a,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||a.textContent===""+o||u.suppressHydrationWarning===!0||m1(a.textContent,o)?(u.popover!=null&&(Xe("beforetoggle",a),Xe("toggle",a)),u.onScroll!=null&&Xe("scroll",a),u.onScrollEnd!=null&&Xe("scrollend",a),u.onClick!=null&&(a.onclick=qs),a=!0):a=!1,a||Va(n,!0)}function Wy(n){for(Nn=n.return;Nn;)switch(Nn.tag){case 5:case 31:case 13:Rs=!1;return;case 27:case 3:Rs=!0;return;default:Nn=Nn.return}}function Zl(n){if(n!==Nn)return!1;if(!rt)return Wy(n),rt=!0,!1;var a=n.tag,o;if((o=a!==3&&a!==27)&&((o=a===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||vg(n.type,n.memoizedProps)),o=!o),o&&kt&&Va(n),Wy(n),a===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));kt=N1(n)}else if(a===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));kt=N1(n)}else a===27?(a=kt,Ya(n.type)?(n=Tg,Tg=null,kt=n):kt=a):kt=Nn?Ds(n.stateNode.nextSibling):null;return!0}function Ki(){kt=Nn=null,rt=!1}function s0(){var n=Ma;return n!==null&&(Jn===null?Jn=n:Jn.push.apply(Jn,n),Ma=null),n}function Pc(n){Ma===null?Ma=[n]:Ma.push(n)}var r0=R(null),Qi=null,Gr=null;function Pa(n,a,o){z(r0,a._currentValue),a._currentValue=o}function $r(n){n._currentValue=r0.current,U(r0)}function a0(n,a,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),n===o)break;n=n.return}}function i0(n,a,o,u){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var p=m.dependencies;if(p!==null){var b=m.child;p=p.firstContext;e:for(;p!==null;){var E=p;p=m;for(var k=0;k<a.length;k++)if(E.context===a[k]){p.lanes|=o,E=p.alternate,E!==null&&(E.lanes|=o),a0(p.return,o,n),u||(b=null);break e}p=E.next}}else if(m.tag===18){if(b=m.return,b===null)throw Error(s(341));b.lanes|=o,p=b.alternate,p!==null&&(p.lanes|=o),a0(b,o,n),b=null}else b=m.child;if(b!==null)b.return=m;else for(b=m;b!==null;){if(b===n){b=null;break}if(m=b.sibling,m!==null){m.return=b.return,b=m;break}b=b.return}m=b}}function eo(n,a,o,u){n=null;for(var m=a,p=!1;m!==null;){if(!p){if((m.flags&524288)!==0)p=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var b=m.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var E=m.type;is(m.pendingProps.value,b.value)||(n!==null?n.push(E):n=[E])}}else if(m===Me.current){if(b=m.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(uu):n=[uu])}m=m.return}n!==null&&i0(a,n,o,u),a.flags|=262144}function Jd(n){for(n=n.firstContext;n!==null;){if(!is(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Xi(n){Qi=n,Gr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function En(n){return Zy(Qi,n)}function Wd(n,a){return Qi===null&&Xi(n),Zy(n,a)}function Zy(n,a){var o=a._currentValue;if(a={context:a,memoizedValue:o,next:null},Gr===null){if(n===null)throw Error(s(308));Gr=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else Gr=Gr.next=a;return o}var FS=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){a.aborted=!0,n.forEach(function(o){return o()})}},HS=r.unstable_scheduleCallback,GS=r.unstable_NormalPriority,sn={$$typeof:le,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function l0(){return{controller:new FS,data:new Map,refCount:0}}function Lc(n){n.refCount--,n.refCount===0&&HS(GS,function(){n.controller.abort()})}var zc=null,o0=0,to=0,no=null;function $S(n,a){if(zc===null){var o=zc=[];o0=0,to=dg(),no={status:"pending",value:void 0,then:function(u){o.push(u)}}}return o0++,a.then(eb,eb),a}function eb(){if(--o0===0&&zc!==null){no!==null&&(no.status="fulfilled");var n=zc;zc=null,to=0,no=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function KS(n,a){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return n.then(function(){u.status="fulfilled",u.value=a;for(var m=0;m<o.length;m++)(0,o[m])(a)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var tb=F.S;F.S=function(n,a){Lv=Vt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&$S(n,a),tb!==null&&tb(n,a)};var Yi=R(null);function c0(){var n=Yi.current;return n!==null?n:It.pooledCache}function Zd(n,a){a===null?z(Yi,Yi.current):z(Yi,a.pool)}function nb(){var n=c0();return n===null?null:{parent:sn._currentValue,pool:n}}var so=Error(s(460)),u0=Error(s(474)),eh=Error(s(542)),th={then:function(){}};function sb(n){return n=n.status,n==="fulfilled"||n==="rejected"}function rb(n,a,o){switch(o=n[o],o===void 0?n.push(a):o!==a&&(a.then(qs,qs),a=o),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,ib(n),n;default:if(typeof a.status=="string")a.then(qs,qs);else{if(n=It,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=a,n.status="pending",n.then(function(u){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=u}},function(u){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,ib(n),n}throw Wi=a,so}}function Ji(n){try{var a=n._init;return a(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Wi=o,so):o}}var Wi=null;function ab(){if(Wi===null)throw Error(s(459));var n=Wi;return Wi=null,n}function ib(n){if(n===so||n===eh)throw Error(s(483))}var ro=null,Uc=0;function nh(n){var a=Uc;return Uc+=1,ro===null&&(ro=[]),rb(ro,n,a)}function Bc(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function sh(n,a){throw a.$$typeof===N?Error(s(525)):(n=Object.prototype.toString.call(a),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function lb(n){function a(q,P){if(n){var K=q.deletions;K===null?(q.deletions=[P],q.flags|=16):K.push(P)}}function o(q,P){if(!n)return null;for(;P!==null;)a(q,P),P=P.sibling;return null}function u(q){for(var P=new Map;q!==null;)q.key!==null?P.set(q.key,q):P.set(q.index,q),q=q.sibling;return P}function m(q,P){return q=Fr(q,P),q.index=0,q.sibling=null,q}function p(q,P,K){return q.index=K,n?(K=q.alternate,K!==null?(K=K.index,K<P?(q.flags|=67108866,P):K):(q.flags|=67108866,P)):(q.flags|=1048576,P)}function b(q){return n&&q.alternate===null&&(q.flags|=67108866),q}function E(q,P,K,se){return P===null||P.tag!==6?(P=Wm(K,q.mode,se),P.return=q,P):(P=m(P,K),P.return=q,P)}function k(q,P,K,se){var De=K.type;return De===Z?ne(q,P,K.props.children,se,K.key):P!==null&&(P.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===j&&Ji(De)===P.type)?(P=m(P,K.props),Bc(P,K),P.return=q,P):(P=Xd(K.type,K.key,K.props,null,q.mode,se),Bc(P,K),P.return=q,P)}function Q(q,P,K,se){return P===null||P.tag!==4||P.stateNode.containerInfo!==K.containerInfo||P.stateNode.implementation!==K.implementation?(P=Zm(K,q.mode,se),P.return=q,P):(P=m(P,K.children||[]),P.return=q,P)}function ne(q,P,K,se,De){return P===null||P.tag!==7?(P=$i(K,q.mode,se,De),P.return=q,P):(P=m(P,K),P.return=q,P)}function ae(q,P,K){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Wm(""+P,q.mode,K),P.return=q,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case C:return K=Xd(P.type,P.key,P.props,null,q.mode,K),Bc(K,P),K.return=q,K;case M:return P=Zm(P,q.mode,K),P.return=q,P;case j:return P=Ji(P),ae(q,P,K)}if(he(P)||L(P))return P=$i(P,q.mode,K,null),P.return=q,P;if(typeof P.then=="function")return ae(q,nh(P),K);if(P.$$typeof===le)return ae(q,Wd(q,P),K);sh(q,P)}return null}function X(q,P,K,se){var De=P!==null?P.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return De!==null?null:E(q,P,""+K,se);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case C:return K.key===De?k(q,P,K,se):null;case M:return K.key===De?Q(q,P,K,se):null;case j:return K=Ji(K),X(q,P,K,se)}if(he(K)||L(K))return De!==null?null:ne(q,P,K,se,null);if(typeof K.then=="function")return X(q,P,nh(K),se);if(K.$$typeof===le)return X(q,P,Wd(q,K),se);sh(q,K)}return null}function W(q,P,K,se,De){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return q=q.get(K)||null,E(P,q,""+se,De);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case C:return q=q.get(se.key===null?K:se.key)||null,k(P,q,se,De);case M:return q=q.get(se.key===null?K:se.key)||null,Q(P,q,se,De);case j:return se=Ji(se),W(q,P,K,se,De)}if(he(se)||L(se))return q=q.get(K)||null,ne(P,q,se,De,null);if(typeof se.then=="function")return W(q,P,K,nh(se),De);if(se.$$typeof===le)return W(q,P,K,Wd(P,se),De);sh(P,se)}return null}function je(q,P,K,se){for(var De=null,lt=null,Ie=P,Ge=P=0,et=null;Ie!==null&&Ge<K.length;Ge++){Ie.index>Ge?(et=Ie,Ie=null):et=Ie.sibling;var ot=X(q,Ie,K[Ge],se);if(ot===null){Ie===null&&(Ie=et);break}n&&Ie&&ot.alternate===null&&a(q,Ie),P=p(ot,P,Ge),lt===null?De=ot:lt.sibling=ot,lt=ot,Ie=et}if(Ge===K.length)return o(q,Ie),rt&&Hr(q,Ge),De;if(Ie===null){for(;Ge<K.length;Ge++)Ie=ae(q,K[Ge],se),Ie!==null&&(P=p(Ie,P,Ge),lt===null?De=Ie:lt.sibling=Ie,lt=Ie);return rt&&Hr(q,Ge),De}for(Ie=u(Ie);Ge<K.length;Ge++)et=W(Ie,q,Ge,K[Ge],se),et!==null&&(n&&et.alternate!==null&&Ie.delete(et.key===null?Ge:et.key),P=p(et,P,Ge),lt===null?De=et:lt.sibling=et,lt=et);return n&&Ie.forEach(function(ti){return a(q,ti)}),rt&&Hr(q,Ge),De}function Ve(q,P,K,se){if(K==null)throw Error(s(151));for(var De=null,lt=null,Ie=P,Ge=P=0,et=null,ot=K.next();Ie!==null&&!ot.done;Ge++,ot=K.next()){Ie.index>Ge?(et=Ie,Ie=null):et=Ie.sibling;var ti=X(q,Ie,ot.value,se);if(ti===null){Ie===null&&(Ie=et);break}n&&Ie&&ti.alternate===null&&a(q,Ie),P=p(ti,P,Ge),lt===null?De=ti:lt.sibling=ti,lt=ti,Ie=et}if(ot.done)return o(q,Ie),rt&&Hr(q,Ge),De;if(Ie===null){for(;!ot.done;Ge++,ot=K.next())ot=ae(q,ot.value,se),ot!==null&&(P=p(ot,P,Ge),lt===null?De=ot:lt.sibling=ot,lt=ot);return rt&&Hr(q,Ge),De}for(Ie=u(Ie);!ot.done;Ge++,ot=K.next())ot=W(Ie,q,Ge,ot.value,se),ot!==null&&(n&&ot.alternate!==null&&Ie.delete(ot.key===null?Ge:ot.key),P=p(ot,P,Ge),lt===null?De=ot:lt.sibling=ot,lt=ot);return n&&Ie.forEach(function(r4){return a(q,r4)}),rt&&Hr(q,Ge),De}function jt(q,P,K,se){if(typeof K=="object"&&K!==null&&K.type===Z&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case C:e:{for(var De=K.key;P!==null;){if(P.key===De){if(De=K.type,De===Z){if(P.tag===7){o(q,P.sibling),se=m(P,K.props.children),se.return=q,q=se;break e}}else if(P.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===j&&Ji(De)===P.type){o(q,P.sibling),se=m(P,K.props),Bc(se,K),se.return=q,q=se;break e}o(q,P);break}else a(q,P);P=P.sibling}K.type===Z?(se=$i(K.props.children,q.mode,se,K.key),se.return=q,q=se):(se=Xd(K.type,K.key,K.props,null,q.mode,se),Bc(se,K),se.return=q,q=se)}return b(q);case M:e:{for(De=K.key;P!==null;){if(P.key===De)if(P.tag===4&&P.stateNode.containerInfo===K.containerInfo&&P.stateNode.implementation===K.implementation){o(q,P.sibling),se=m(P,K.children||[]),se.return=q,q=se;break e}else{o(q,P);break}else a(q,P);P=P.sibling}se=Zm(K,q.mode,se),se.return=q,q=se}return b(q);case j:return K=Ji(K),jt(q,P,K,se)}if(he(K))return je(q,P,K,se);if(L(K)){if(De=L(K),typeof De!="function")throw Error(s(150));return K=De.call(K),Ve(q,P,K,se)}if(typeof K.then=="function")return jt(q,P,nh(K),se);if(K.$$typeof===le)return jt(q,P,Wd(q,K),se);sh(q,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,P!==null&&P.tag===6?(o(q,P.sibling),se=m(P,K),se.return=q,q=se):(o(q,P),se=Wm(K,q.mode,se),se.return=q,q=se),b(q)):o(q,P)}return function(q,P,K,se){try{Uc=0;var De=jt(q,P,K,se);return ro=null,De}catch(Ie){if(Ie===so||Ie===eh)throw Ie;var lt=ls(29,Ie,null,q.mode);return lt.lanes=se,lt.return=q,lt}finally{}}}var Zi=lb(!0),ob=lb(!1),La=!1;function d0(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function h0(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function za(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ua(n,a,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(ht&2)!==0){var m=u.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),u.pending=a,a=Qd(n),Gy(n,null,o),a}return Kd(n,u,a,o),Qd(n)}function qc(n,a,o){if(a=a.updateQueue,a!==null&&(a=a.shared,(o&4194048)!==0)){var u=a.lanes;u&=n.pendingLanes,o|=u,a.lanes=o,ki(n,o)}}function f0(n,a){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?m=p=b:p=p.next=b,o=o.next}while(o!==null);p===null?m=p=a:p=p.next=a}else m=p=a;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=a:n.next=a,o.lastBaseUpdate=a}var m0=!1;function Fc(){if(m0){var n=no;if(n!==null)throw n}}function Hc(n,a,o,u){m0=!1;var m=n.updateQueue;La=!1;var p=m.firstBaseUpdate,b=m.lastBaseUpdate,E=m.shared.pending;if(E!==null){m.shared.pending=null;var k=E,Q=k.next;k.next=null,b===null?p=Q:b.next=Q,b=k;var ne=n.alternate;ne!==null&&(ne=ne.updateQueue,E=ne.lastBaseUpdate,E!==b&&(E===null?ne.firstBaseUpdate=Q:E.next=Q,ne.lastBaseUpdate=k))}if(p!==null){var ae=m.baseState;b=0,ne=Q=k=null,E=p;do{var X=E.lane&-536870913,W=X!==E.lane;if(W?(Ze&X)===X:(u&X)===X){X!==0&&X===to&&(m0=!0),ne!==null&&(ne=ne.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var je=n,Ve=E;X=a;var jt=o;switch(Ve.tag){case 1:if(je=Ve.payload,typeof je=="function"){ae=je.call(jt,ae,X);break e}ae=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Ve.payload,X=typeof je=="function"?je.call(jt,ae,X):je,X==null)break e;ae=w({},ae,X);break e;case 2:La=!0}}X=E.callback,X!==null&&(n.flags|=64,W&&(n.flags|=8192),W=m.callbacks,W===null?m.callbacks=[X]:W.push(X))}else W={lane:X,tag:E.tag,payload:E.payload,callback:E.callback,next:null},ne===null?(Q=ne=W,k=ae):ne=ne.next=W,b|=X;if(E=E.next,E===null){if(E=m.shared.pending,E===null)break;W=E,E=W.next,W.next=null,m.lastBaseUpdate=W,m.shared.pending=null}}while(!0);ne===null&&(k=ae),m.baseState=k,m.firstBaseUpdate=Q,m.lastBaseUpdate=ne,p===null&&(m.shared.lanes=0),Ga|=b,n.lanes=b,n.memoizedState=ae}}function cb(n,a){if(typeof n!="function")throw Error(s(191,n));n.call(a)}function ub(n,a){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)cb(o[n],a)}var ao=R(null),rh=R(0);function db(n,a){n=ta,z(rh,n),z(ao,a),ta=n|a.baseLanes}function g0(){z(rh,ta),z(ao,ao.current)}function p0(){ta=rh.current,U(ao),U(rh)}var os=R(null),ks=null;function Ba(n){var a=n.alternate;z(Qt,Qt.current&1),z(os,n),ks===null&&(a===null||ao.current!==null||a.memoizedState!==null)&&(ks=n)}function x0(n){z(Qt,Qt.current),z(os,n),ks===null&&(ks=n)}function hb(n){n.tag===22?(z(Qt,Qt.current),z(os,n),ks===null&&(ks=n)):qa()}function qa(){z(Qt,Qt.current),z(os,os.current)}function cs(n){U(os),ks===n&&(ks=null),U(Qt)}var Qt=R(0);function ah(n){for(var a=n;a!==null;){if(a.tag===13){var o=a.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Ng(o)||Eg(o)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Kr=0,He=null,Tt=null,rn=null,ih=!1,io=!1,el=!1,lh=0,Gc=0,lo=null,QS=0;function Ht(){throw Error(s(321))}function y0(n,a){if(a===null)return!1;for(var o=0;o<a.length&&o<n.length;o++)if(!is(n[o],a[o]))return!1;return!0}function b0(n,a,o,u,m,p){return Kr=p,He=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,F.H=n===null||n.memoizedState===null?Xb:O0,el=!1,p=o(u,m),el=!1,io&&(p=mb(a,o,u,m)),fb(n),p}function fb(n){F.H=Qc;var a=Tt!==null&&Tt.next!==null;if(Kr=0,rn=Tt=He=null,ih=!1,Gc=0,lo=null,a)throw Error(s(300));n===null||an||(n=n.dependencies,n!==null&&Jd(n)&&(an=!0))}function mb(n,a,o,u){He=n;var m=0;do{if(io&&(lo=null),Gc=0,io=!1,25<=m)throw Error(s(301));if(m+=1,rn=Tt=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}F.H=Yb,p=a(o,u)}while(io);return p}function XS(){var n=F.H,a=n.useState()[0];return a=typeof a.then=="function"?$c(a):a,n=n.useState()[0],(Tt!==null?Tt.memoizedState:null)!==n&&(He.flags|=1024),a}function v0(){var n=lh!==0;return lh=0,n}function w0(n,a,o){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~o}function _0(n){if(ih){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}ih=!1}Kr=0,rn=Tt=He=null,io=!1,Gc=lh=0,lo=null}function zn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?He.memoizedState=rn=n:rn=rn.next=n,rn}function Xt(){if(Tt===null){var n=He.alternate;n=n!==null?n.memoizedState:null}else n=Tt.next;var a=rn===null?He.memoizedState:rn.next;if(a!==null)rn=a,Tt=n;else{if(n===null)throw He.alternate===null?Error(s(467)):Error(s(310));Tt=n,n={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},rn===null?He.memoizedState=rn=n:rn=rn.next=n}return rn}function oh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $c(n){var a=Gc;return Gc+=1,lo===null&&(lo=[]),n=rb(lo,n,a),a=He,(rn===null?a.memoizedState:rn.next)===null&&(a=a.alternate,F.H=a===null||a.memoizedState===null?Xb:O0),n}function ch(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return $c(n);if(n.$$typeof===le)return En(n)}throw Error(s(438,String(n)))}function N0(n){var a=null,o=He.updateQueue;if(o!==null&&(a=o.memoCache),a==null){var u=He.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),o===null&&(o=oh(),He.updateQueue=o),o.memoCache=a,o=a.data[a.index],o===void 0)for(o=a.data[a.index]=Array(n),u=0;u<n;u++)o[u]=O;return a.index++,o}function Qr(n,a){return typeof a=="function"?a(n):a}function uh(n){var a=Xt();return E0(a,Tt,n)}function E0(n,a,o){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var m=n.baseQueue,p=u.pending;if(p!==null){if(m!==null){var b=m.next;m.next=p.next,p.next=b}a.baseQueue=m=p,u.pending=null}if(p=n.baseState,m===null)n.memoizedState=p;else{a=m.next;var E=b=null,k=null,Q=a,ne=!1;do{var ae=Q.lane&-536870913;if(ae!==Q.lane?(Ze&ae)===ae:(Kr&ae)===ae){var X=Q.revertLane;if(X===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ae===to&&(ne=!0);else if((Kr&X)===X){Q=Q.next,X===to&&(ne=!0);continue}else ae={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},k===null?(E=k=ae,b=p):k=k.next=ae,He.lanes|=X,Ga|=X;ae=Q.action,el&&o(p,ae),p=Q.hasEagerState?Q.eagerState:o(p,ae)}else X={lane:ae,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},k===null?(E=k=X,b=p):k=k.next=X,He.lanes|=ae,Ga|=ae;Q=Q.next}while(Q!==null&&Q!==a);if(k===null?b=p:k.next=E,!is(p,n.memoizedState)&&(an=!0,ne&&(o=no,o!==null)))throw o;n.memoizedState=p,n.baseState=b,n.baseQueue=k,u.lastRenderedState=p}return m===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function T0(n){var a=Xt(),o=a.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=n;var u=o.dispatch,m=o.pending,p=a.memoizedState;if(m!==null){o.pending=null;var b=m=m.next;do p=n(p,b.action),b=b.next;while(b!==m);is(p,a.memoizedState)||(an=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),o.lastRenderedState=p}return[p,u]}function gb(n,a,o){var u=He,m=Xt(),p=rt;if(p){if(o===void 0)throw Error(s(407));o=o()}else o=a();var b=!is((Tt||m).memoizedState,o);if(b&&(m.memoizedState=o,an=!0),m=m.queue,A0(yb.bind(null,u,m,n),[n]),m.getSnapshot!==a||b||rn!==null&&rn.memoizedState.tag&1){if(u.flags|=2048,oo(9,{destroy:void 0},xb.bind(null,u,m,o,a),null),It===null)throw Error(s(349));p||(Kr&127)!==0||pb(u,a,o)}return o}function pb(n,a,o){n.flags|=16384,n={getSnapshot:a,value:o},a=He.updateQueue,a===null?(a=oh(),He.updateQueue=a,a.stores=[n]):(o=a.stores,o===null?a.stores=[n]:o.push(n))}function xb(n,a,o,u){a.value=o,a.getSnapshot=u,bb(a)&&vb(n)}function yb(n,a,o){return o(function(){bb(a)&&vb(n)})}function bb(n){var a=n.getSnapshot;n=n.value;try{var o=a();return!is(n,o)}catch{return!0}}function vb(n){var a=Gi(n,2);a!==null&&Wn(a,n,2)}function S0(n){var a=zn();if(typeof n=="function"){var o=n;if(n=o(),el){Ut(!0);try{o()}finally{Ut(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:n},a}function wb(n,a,o,u){return n.baseState=o,E0(n,Tt,typeof u=="function"?u:Qr)}function YS(n,a,o,u,m){if(fh(n))throw Error(s(485));if(n=a.action,n!==null){var p={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){p.listeners.push(b)}};F.T!==null?o(!0):p.isTransition=!1,u(p),o=a.pending,o===null?(p.next=a.pending=p,_b(a,p)):(p.next=o.next,a.pending=o.next=p)}}function _b(n,a){var o=a.action,u=a.payload,m=n.state;if(a.isTransition){var p=F.T,b={};F.T=b;try{var E=o(m,u),k=F.S;k!==null&&k(b,E),Nb(n,a,E)}catch(Q){j0(n,a,Q)}finally{p!==null&&b.types!==null&&(p.types=b.types),F.T=p}}else try{p=o(m,u),Nb(n,a,p)}catch(Q){j0(n,a,Q)}}function Nb(n,a,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Eb(n,a,u)},function(u){return j0(n,a,u)}):Eb(n,a,o)}function Eb(n,a,o){a.status="fulfilled",a.value=o,Tb(a),n.state=o,a=n.pending,a!==null&&(o=a.next,o===a?n.pending=null:(o=o.next,a.next=o,_b(n,o)))}function j0(n,a,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=o,Tb(a),a=a.next;while(a!==u)}n.action=null}function Tb(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function Sb(n,a){return a}function jb(n,a){if(rt){var o=It.formState;if(o!==null){e:{var u=He;if(rt){if(kt){t:{for(var m=kt,p=Rs;m.nodeType!==8;){if(!p){m=null;break t}if(m=Ds(m.nextSibling),m===null){m=null;break t}}p=m.data,m=p==="F!"||p==="F"?m:null}if(m){kt=Ds(m.nextSibling),u=m.data==="F!";break e}}Va(u)}u=!1}u&&(a=o[0])}}return o=zn(),o.memoizedState=o.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sb,lastRenderedState:a},o.queue=u,o=$b.bind(null,He,u),u.dispatch=o,u=S0(!1),p=D0.bind(null,He,!1,u.queue),u=zn(),m={state:a,dispatch:null,action:n,pending:null},u.queue=m,o=YS.bind(null,He,m,p,o),m.dispatch=o,u.memoizedState=n,[a,o,!1]}function Ab(n){var a=Xt();return Ib(a,Tt,n)}function Ib(n,a,o){if(a=E0(n,a,Sb)[0],n=uh(Qr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=$c(a)}catch(b){throw b===so?eh:b}else u=a;a=Xt();var m=a.queue,p=m.dispatch;return o!==a.memoizedState&&(He.flags|=2048,oo(9,{destroy:void 0},JS.bind(null,m,o),null)),[u,p,n]}function JS(n,a){n.action=a}function Cb(n){var a=Xt(),o=Tt;if(o!==null)return Ib(a,o,n);Xt(),a=a.memoizedState,o=Xt();var u=o.queue.dispatch;return o.memoizedState=n,[a,u,!1]}function oo(n,a,o,u){return n={tag:n,create:o,deps:u,inst:a,next:null},a=He.updateQueue,a===null&&(a=oh(),He.updateQueue=a),o=a.lastEffect,o===null?a.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,a.lastEffect=n),n}function Rb(){return Xt().memoizedState}function dh(n,a,o,u){var m=zn();He.flags|=n,m.memoizedState=oo(1|a,{destroy:void 0},o,u===void 0?null:u)}function hh(n,a,o,u){var m=Xt();u=u===void 0?null:u;var p=m.memoizedState.inst;Tt!==null&&u!==null&&y0(u,Tt.memoizedState.deps)?m.memoizedState=oo(a,p,o,u):(He.flags|=n,m.memoizedState=oo(1|a,p,o,u))}function kb(n,a){dh(8390656,8,n,a)}function A0(n,a){hh(2048,8,n,a)}function WS(n){He.flags|=4;var a=He.updateQueue;if(a===null)a=oh(),He.updateQueue=a,a.events=[n];else{var o=a.events;o===null?a.events=[n]:o.push(n)}}function Db(n){var a=Xt().memoizedState;return WS({ref:a,nextImpl:n}),function(){if((ht&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function Ob(n,a){return hh(4,2,n,a)}function Mb(n,a){return hh(4,4,n,a)}function Vb(n,a){if(typeof a=="function"){n=n();var o=a(n);return function(){typeof o=="function"?o():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function Pb(n,a,o){o=o!=null?o.concat([n]):null,hh(4,4,Vb.bind(null,a,n),o)}function I0(){}function Lb(n,a){var o=Xt();a=a===void 0?null:a;var u=o.memoizedState;return a!==null&&y0(a,u[1])?u[0]:(o.memoizedState=[n,a],n)}function zb(n,a){var o=Xt();a=a===void 0?null:a;var u=o.memoizedState;if(a!==null&&y0(a,u[1]))return u[0];if(u=n(),el){Ut(!0);try{n()}finally{Ut(!1)}}return o.memoizedState=[u,a],u}function C0(n,a,o){return o===void 0||(Kr&1073741824)!==0&&(Ze&261930)===0?n.memoizedState=a:(n.memoizedState=o,n=Uv(),He.lanes|=n,Ga|=n,o)}function Ub(n,a,o,u){return is(o,a)?o:ao.current!==null?(n=C0(n,o,u),is(n,a)||(an=!0),n):(Kr&42)===0||(Kr&1073741824)!==0&&(Ze&261930)===0?(an=!0,n.memoizedState=o):(n=Uv(),He.lanes|=n,Ga|=n,a)}function Bb(n,a,o,u,m){var p=oe.p;oe.p=p!==0&&8>p?p:8;var b=F.T,E={};F.T=E,D0(n,!1,a,o);try{var k=m(),Q=F.S;if(Q!==null&&Q(E,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var ne=KS(k,u);Kc(n,a,ne,hs(n))}else Kc(n,a,u,hs(n))}catch(ae){Kc(n,a,{then:function(){},status:"rejected",reason:ae},hs())}finally{oe.p=p,b!==null&&E.types!==null&&(b.types=E.types),F.T=b}}function ZS(){}function R0(n,a,o,u){if(n.tag!==5)throw Error(s(476));var m=qb(n).queue;Bb(n,m,a,Y,o===null?ZS:function(){return Fb(n),o(u)})}function qb(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:Y},next:null};var o={};return a.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:o},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function Fb(n){var a=qb(n);a.next===null&&(a=n.alternate.memoizedState),Kc(n,a.next.queue,{},hs())}function k0(){return En(uu)}function Hb(){return Xt().memoizedState}function Gb(){return Xt().memoizedState}function ej(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var o=hs();n=za(o);var u=Ua(a,n,o);u!==null&&(Wn(u,a,o),qc(u,a,o)),a={cache:l0()},n.payload=a;return}a=a.return}}function tj(n,a,o){var u=hs();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},fh(n)?Kb(a,o):(o=Ym(n,a,o,u),o!==null&&(Wn(o,n,u),Qb(o,a,u)))}function $b(n,a,o){var u=hs();Kc(n,a,o,u)}function Kc(n,a,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(fh(n))Kb(a,m);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var b=a.lastRenderedState,E=p(b,o);if(m.hasEagerState=!0,m.eagerState=E,is(E,b))return Kd(n,a,m,0),It===null&&$d(),!1}catch{}finally{}if(o=Ym(n,a,m,u),o!==null)return Wn(o,n,u),Qb(o,a,u),!0}return!1}function D0(n,a,o,u){if(u={lane:2,revertLane:dg(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},fh(n)){if(a)throw Error(s(479))}else a=Ym(n,o,u,2),a!==null&&Wn(a,n,2)}function fh(n){var a=n.alternate;return n===He||a!==null&&a===He}function Kb(n,a){io=ih=!0;var o=n.pending;o===null?a.next=a:(a.next=o.next,o.next=a),n.pending=a}function Qb(n,a,o){if((o&4194048)!==0){var u=a.lanes;u&=n.pendingLanes,o|=u,a.lanes=o,ki(n,o)}}var Qc={readContext:En,use:ch,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht};Qc.useEffectEvent=Ht;var Xb={readContext:En,use:ch,useCallback:function(n,a){return zn().memoizedState=[n,a===void 0?null:a],n},useContext:En,useEffect:kb,useImperativeHandle:function(n,a,o){o=o!=null?o.concat([n]):null,dh(4194308,4,Vb.bind(null,a,n),o)},useLayoutEffect:function(n,a){return dh(4194308,4,n,a)},useInsertionEffect:function(n,a){dh(4,2,n,a)},useMemo:function(n,a){var o=zn();a=a===void 0?null:a;var u=n();if(el){Ut(!0);try{n()}finally{Ut(!1)}}return o.memoizedState=[u,a],u},useReducer:function(n,a,o){var u=zn();if(o!==void 0){var m=o(a);if(el){Ut(!0);try{o(a)}finally{Ut(!1)}}}else m=a;return u.memoizedState=u.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},u.queue=n,n=n.dispatch=tj.bind(null,He,n),[u.memoizedState,n]},useRef:function(n){var a=zn();return n={current:n},a.memoizedState=n},useState:function(n){n=S0(n);var a=n.queue,o=$b.bind(null,He,a);return a.dispatch=o,[n.memoizedState,o]},useDebugValue:I0,useDeferredValue:function(n,a){var o=zn();return C0(o,n,a)},useTransition:function(){var n=S0(!1);return n=Bb.bind(null,He,n.queue,!0,!1),zn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,o){var u=He,m=zn();if(rt){if(o===void 0)throw Error(s(407));o=o()}else{if(o=a(),It===null)throw Error(s(349));(Ze&127)!==0||pb(u,a,o)}m.memoizedState=o;var p={value:o,getSnapshot:a};return m.queue=p,kb(yb.bind(null,u,p,n),[n]),u.flags|=2048,oo(9,{destroy:void 0},xb.bind(null,u,p,o,a),null),o},useId:function(){var n=zn(),a=It.identifierPrefix;if(rt){var o=vr,u=br;o=(u&~(1<<32-st(u)-1)).toString(32)+o,a="_"+a+"R_"+o,o=lh++,0<o&&(a+="H"+o.toString(32)),a+="_"}else o=QS++,a="_"+a+"r_"+o.toString(32)+"_";return n.memoizedState=a},useHostTransitionStatus:k0,useFormState:jb,useActionState:jb,useOptimistic:function(n){var a=zn();a.memoizedState=a.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=o,a=D0.bind(null,He,!0,o),o.dispatch=a,[n,a]},useMemoCache:N0,useCacheRefresh:function(){return zn().memoizedState=ej.bind(null,He)},useEffectEvent:function(n){var a=zn(),o={impl:n};return a.memoizedState=o,function(){if((ht&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},O0={readContext:En,use:ch,useCallback:Lb,useContext:En,useEffect:A0,useImperativeHandle:Pb,useInsertionEffect:Ob,useLayoutEffect:Mb,useMemo:zb,useReducer:uh,useRef:Rb,useState:function(){return uh(Qr)},useDebugValue:I0,useDeferredValue:function(n,a){var o=Xt();return Ub(o,Tt.memoizedState,n,a)},useTransition:function(){var n=uh(Qr)[0],a=Xt().memoizedState;return[typeof n=="boolean"?n:$c(n),a]},useSyncExternalStore:gb,useId:Hb,useHostTransitionStatus:k0,useFormState:Ab,useActionState:Ab,useOptimistic:function(n,a){var o=Xt();return wb(o,Tt,n,a)},useMemoCache:N0,useCacheRefresh:Gb};O0.useEffectEvent=Db;var Yb={readContext:En,use:ch,useCallback:Lb,useContext:En,useEffect:A0,useImperativeHandle:Pb,useInsertionEffect:Ob,useLayoutEffect:Mb,useMemo:zb,useReducer:T0,useRef:Rb,useState:function(){return T0(Qr)},useDebugValue:I0,useDeferredValue:function(n,a){var o=Xt();return Tt===null?C0(o,n,a):Ub(o,Tt.memoizedState,n,a)},useTransition:function(){var n=T0(Qr)[0],a=Xt().memoizedState;return[typeof n=="boolean"?n:$c(n),a]},useSyncExternalStore:gb,useId:Hb,useHostTransitionStatus:k0,useFormState:Cb,useActionState:Cb,useOptimistic:function(n,a){var o=Xt();return Tt!==null?wb(o,Tt,n,a):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:N0,useCacheRefresh:Gb};Yb.useEffectEvent=Db;function M0(n,a,o,u){a=n.memoizedState,o=o(u,a),o=o==null?a:w({},a,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var V0={enqueueSetState:function(n,a,o){n=n._reactInternals;var u=hs(),m=za(u);m.payload=a,o!=null&&(m.callback=o),a=Ua(n,m,u),a!==null&&(Wn(a,n,u),qc(a,n,u))},enqueueReplaceState:function(n,a,o){n=n._reactInternals;var u=hs(),m=za(u);m.tag=1,m.payload=a,o!=null&&(m.callback=o),a=Ua(n,m,u),a!==null&&(Wn(a,n,u),qc(a,n,u))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var o=hs(),u=za(o);u.tag=2,a!=null&&(u.callback=a),a=Ua(n,u,o),a!==null&&(Wn(a,n,o),qc(a,n,o))}};function Jb(n,a,o,u,m,p,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,p,b):a.prototype&&a.prototype.isPureReactComponent?!Oc(o,u)||!Oc(m,p):!0}function Wb(n,a,o,u){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(o,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(o,u),a.state!==n&&V0.enqueueReplaceState(a,a.state,null)}function tl(n,a){var o=a;if("ref"in a){o={};for(var u in a)u!=="ref"&&(o[u]=a[u])}if(n=n.defaultProps){o===a&&(o=w({},o));for(var m in n)o[m]===void 0&&(o[m]=n[m])}return o}function Zb(n){Gd(n)}function ev(n){console.error(n)}function tv(n){Gd(n)}function mh(n,a){try{var o=n.onUncaughtError;o(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function nv(n,a,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function P0(n,a,o){return o=za(o),o.tag=3,o.payload={element:null},o.callback=function(){mh(n,a)},o}function sv(n){return n=za(n),n.tag=3,n}function rv(n,a,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var p=u.value;n.payload=function(){return m(p)},n.callback=function(){nv(a,o,u)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(n.callback=function(){nv(a,o,u),typeof m!="function"&&($a===null?$a=new Set([this]):$a.add(this));var E=u.stack;this.componentDidCatch(u.value,{componentStack:E!==null?E:""})})}function nj(n,a,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=o.alternate,a!==null&&eo(a,o,m,!0),o=os.current,o!==null){switch(o.tag){case 31:case 13:return ks===null?Sh():o.alternate===null&&Gt===0&&(Gt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===th?o.flags|=16384:(a=o.updateQueue,a===null?o.updateQueue=new Set([u]):a.add(u),og(n,u,m)),!1;case 22:return o.flags|=65536,u===th?o.flags|=16384:(a=o.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=a):(o=a.retryQueue,o===null?a.retryQueue=new Set([u]):o.add(u)),og(n,u,m)),!1}throw Error(s(435,o.tag))}return og(n,u,m),Sh(),!1}if(rt)return a=os.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,u!==n0&&(n=Error(s(422),{cause:u}),Pc(As(n,o)))):(u!==n0&&(a=Error(s(423),{cause:u}),Pc(As(a,o))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,u=As(u,o),m=P0(n.stateNode,u,m),f0(n,m),Gt!==4&&(Gt=2)),!1;var p=Error(s(520),{cause:u});if(p=As(p,o),nu===null?nu=[p]:nu.push(p),Gt!==4&&(Gt=2),a===null)return!0;u=As(u,o),o=a;do{switch(o.tag){case 3:return o.flags|=65536,n=m&-m,o.lanes|=n,n=P0(o.stateNode,u,n),f0(o,n),!1;case 1:if(a=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&($a===null||!$a.has(p))))return o.flags|=65536,m&=-m,o.lanes|=m,m=sv(m),rv(m,n,o,u),f0(o,m),!1}o=o.return}while(o!==null);return!1}var L0=Error(s(461)),an=!1;function Tn(n,a,o,u){a.child=n===null?ob(a,null,o,u):Zi(a,n.child,o,u)}function av(n,a,o,u,m){o=o.render;var p=a.ref;if("ref"in u){var b={};for(var E in u)E!=="ref"&&(b[E]=u[E])}else b=u;return Xi(a),u=b0(n,a,o,b,p,m),E=v0(),n!==null&&!an?(w0(n,a,m),Xr(n,a,m)):(rt&&E&&e0(a),a.flags|=1,Tn(n,a,u,m),a.child)}function iv(n,a,o,u,m){if(n===null){var p=o.type;return typeof p=="function"&&!Jm(p)&&p.defaultProps===void 0&&o.compare===null?(a.tag=15,a.type=p,lv(n,a,p,u,m)):(n=Xd(o.type,null,u,a,a.mode,m),n.ref=a.ref,n.return=a,a.child=n)}if(p=n.child,!$0(n,m)){var b=p.memoizedProps;if(o=o.compare,o=o!==null?o:Oc,o(b,u)&&n.ref===a.ref)return Xr(n,a,m)}return a.flags|=1,n=Fr(p,u),n.ref=a.ref,n.return=a,a.child=n}function lv(n,a,o,u,m){if(n!==null){var p=n.memoizedProps;if(Oc(p,u)&&n.ref===a.ref)if(an=!1,a.pendingProps=u=p,$0(n,m))(n.flags&131072)!==0&&(an=!0);else return a.lanes=n.lanes,Xr(n,a,m)}return z0(n,a,o,u,m)}function ov(n,a,o,u){var m=u.children,p=n!==null?n.memoizedState:null;if(n===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,n!==null){for(u=a.child=n.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~p}else u=0,a.child=null;return cv(n,a,p,o,u)}if((o&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&Zd(a,p!==null?p.cachePool:null),p!==null?db(a,p):g0(),hb(a);else return u=a.lanes=536870912,cv(n,a,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(Zd(a,p.cachePool),db(a,p),qa(),a.memoizedState=null):(n!==null&&Zd(a,null),g0(),qa());return Tn(n,a,m,o),a.child}function Xc(n,a){return n!==null&&n.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function cv(n,a,o,u,m){var p=c0();return p=p===null?null:{parent:sn._currentValue,pool:p},a.memoizedState={baseLanes:o,cachePool:p},n!==null&&Zd(a,null),g0(),hb(a),n!==null&&eo(n,a,u,!0),a.childLanes=m,null}function gh(n,a){return a=xh({mode:a.mode,children:a.children},n.mode),a.ref=n.ref,n.child=a,a.return=n,a}function uv(n,a,o){return Zi(a,n.child,null,o),n=gh(a,a.pendingProps),n.flags|=2,cs(a),a.memoizedState=null,n}function sj(n,a,o){var u=a.pendingProps,m=(a.flags&128)!==0;if(a.flags&=-129,n===null){if(rt){if(u.mode==="hidden")return n=gh(a,u),a.lanes=536870912,Xc(null,n);if(x0(a),(n=kt)?(n=_1(n,Rs),n=n!==null&&n.data==="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:Oa!==null?{id:br,overflow:vr}:null,retryLane:536870912,hydrationErrors:null},o=Ky(n),o.return=a,a.child=o,Nn=a,kt=null)):n=null,n===null)throw Va(a);return a.lanes=536870912,null}return gh(a,u)}var p=n.memoizedState;if(p!==null){var b=p.dehydrated;if(x0(a),m)if(a.flags&256)a.flags&=-257,a=uv(n,a,o);else if(a.memoizedState!==null)a.child=n.child,a.flags|=128,a=null;else throw Error(s(558));else if(an||eo(n,a,o,!1),m=(o&n.childLanes)!==0,an||m){if(u=It,u!==null&&(b=pc(u,o),b!==0&&b!==p.retryLane))throw p.retryLane=b,Gi(n,b),Wn(u,n,b),L0;Sh(),a=uv(n,a,o)}else n=p.treeContext,kt=Ds(b.nextSibling),Nn=a,rt=!0,Ma=null,Rs=!1,n!==null&&Yy(a,n),a=gh(a,u),a.flags|=4096;return a}return n=Fr(n.child,{mode:u.mode,children:u.children}),n.ref=a.ref,a.child=n,n.return=a,n}function ph(n,a){var o=a.ref;if(o===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(n===null||n.ref!==o)&&(a.flags|=4194816)}}function z0(n,a,o,u,m){return Xi(a),o=b0(n,a,o,u,void 0,m),u=v0(),n!==null&&!an?(w0(n,a,m),Xr(n,a,m)):(rt&&u&&e0(a),a.flags|=1,Tn(n,a,o,m),a.child)}function dv(n,a,o,u,m,p){return Xi(a),a.updateQueue=null,o=mb(a,u,o,m),fb(n),u=v0(),n!==null&&!an?(w0(n,a,p),Xr(n,a,p)):(rt&&u&&e0(a),a.flags|=1,Tn(n,a,o,p),a.child)}function hv(n,a,o,u,m){if(Xi(a),a.stateNode===null){var p=Yl,b=o.contextType;typeof b=="object"&&b!==null&&(p=En(b)),p=new o(u,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=V0,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=u,p.state=a.memoizedState,p.refs={},d0(a),b=o.contextType,p.context=typeof b=="object"&&b!==null?En(b):Yl,p.state=a.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(M0(a,o,b,u),p.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(b=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),b!==p.state&&V0.enqueueReplaceState(p,p.state,null),Hc(a,u,p,m),Fc(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(n===null){p=a.stateNode;var E=a.memoizedProps,k=tl(o,E);p.props=k;var Q=p.context,ne=o.contextType;b=Yl,typeof ne=="object"&&ne!==null&&(b=En(ne));var ae=o.getDerivedStateFromProps;ne=typeof ae=="function"||typeof p.getSnapshotBeforeUpdate=="function",E=a.pendingProps!==E,ne||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E||Q!==b)&&Wb(a,p,u,b),La=!1;var X=a.memoizedState;p.state=X,Hc(a,u,p,m),Fc(),Q=a.memoizedState,E||X!==Q||La?(typeof ae=="function"&&(M0(a,o,ae,u),Q=a.memoizedState),(k=La||Jb(a,o,k,u,X,Q,b))?(ne||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=Q),p.props=u,p.state=Q,p.context=b,u=k):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{p=a.stateNode,h0(n,a),b=a.memoizedProps,ne=tl(o,b),p.props=ne,ae=a.pendingProps,X=p.context,Q=o.contextType,k=Yl,typeof Q=="object"&&Q!==null&&(k=En(Q)),E=o.getDerivedStateFromProps,(Q=typeof E=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b!==ae||X!==k)&&Wb(a,p,u,k),La=!1,X=a.memoizedState,p.state=X,Hc(a,u,p,m),Fc();var W=a.memoizedState;b!==ae||X!==W||La||n!==null&&n.dependencies!==null&&Jd(n.dependencies)?(typeof E=="function"&&(M0(a,o,E,u),W=a.memoizedState),(ne=La||Jb(a,o,ne,u,X,W,k)||n!==null&&n.dependencies!==null&&Jd(n.dependencies))?(Q||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,W,k),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,W,k)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=W),p.props=u,p.state=W,p.context=k,u=ne):(typeof p.componentDidUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=1024),u=!1)}return p=u,ph(n,a),u=(a.flags&128)!==0,p||u?(p=a.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,n!==null&&u?(a.child=Zi(a,n.child,null,m),a.child=Zi(a,null,o,m)):Tn(n,a,o,m),a.memoizedState=p.state,n=a.child):n=Xr(n,a,m),n}function fv(n,a,o,u){return Ki(),a.flags|=256,Tn(n,a,o,u),a.child}var U0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function B0(n){return{baseLanes:n,cachePool:nb()}}function q0(n,a,o){return n=n!==null?n.childLanes&~o:0,a&&(n|=ds),n}function mv(n,a,o){var u=a.pendingProps,m=!1,p=(a.flags&128)!==0,b;if((b=p)||(b=n!==null&&n.memoizedState===null?!1:(Qt.current&2)!==0),b&&(m=!0,a.flags&=-129),b=(a.flags&32)!==0,a.flags&=-33,n===null){if(rt){if(m?Ba(a):qa(),(n=kt)?(n=_1(n,Rs),n=n!==null&&n.data!=="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:Oa!==null?{id:br,overflow:vr}:null,retryLane:536870912,hydrationErrors:null},o=Ky(n),o.return=a,a.child=o,Nn=a,kt=null)):n=null,n===null)throw Va(a);return Eg(n)?a.lanes=32:a.lanes=536870912,null}var E=u.children;return u=u.fallback,m?(qa(),m=a.mode,E=xh({mode:"hidden",children:E},m),u=$i(u,m,o,null),E.return=a,u.return=a,E.sibling=u,a.child=E,u=a.child,u.memoizedState=B0(o),u.childLanes=q0(n,b,o),a.memoizedState=U0,Xc(null,u)):(Ba(a),F0(a,E))}var k=n.memoizedState;if(k!==null&&(E=k.dehydrated,E!==null)){if(p)a.flags&256?(Ba(a),a.flags&=-257,a=H0(n,a,o)):a.memoizedState!==null?(qa(),a.child=n.child,a.flags|=128,a=null):(qa(),E=u.fallback,m=a.mode,u=xh({mode:"visible",children:u.children},m),E=$i(E,m,o,null),E.flags|=2,u.return=a,E.return=a,u.sibling=E,a.child=u,Zi(a,n.child,null,o),u=a.child,u.memoizedState=B0(o),u.childLanes=q0(n,b,o),a.memoizedState=U0,a=Xc(null,u));else if(Ba(a),Eg(E)){if(b=E.nextSibling&&E.nextSibling.dataset,b)var Q=b.dgst;b=Q,u=Error(s(419)),u.stack="",u.digest=b,Pc({value:u,source:null,stack:null}),a=H0(n,a,o)}else if(an||eo(n,a,o,!1),b=(o&n.childLanes)!==0,an||b){if(b=It,b!==null&&(u=pc(b,o),u!==0&&u!==k.retryLane))throw k.retryLane=u,Gi(n,u),Wn(b,n,u),L0;Ng(E)||Sh(),a=H0(n,a,o)}else Ng(E)?(a.flags|=192,a.child=n.child,a=null):(n=k.treeContext,kt=Ds(E.nextSibling),Nn=a,rt=!0,Ma=null,Rs=!1,n!==null&&Yy(a,n),a=F0(a,u.children),a.flags|=4096);return a}return m?(qa(),E=u.fallback,m=a.mode,k=n.child,Q=k.sibling,u=Fr(k,{mode:"hidden",children:u.children}),u.subtreeFlags=k.subtreeFlags&65011712,Q!==null?E=Fr(Q,E):(E=$i(E,m,o,null),E.flags|=2),E.return=a,u.return=a,u.sibling=E,a.child=u,Xc(null,u),u=a.child,E=n.child.memoizedState,E===null?E=B0(o):(m=E.cachePool,m!==null?(k=sn._currentValue,m=m.parent!==k?{parent:k,pool:k}:m):m=nb(),E={baseLanes:E.baseLanes|o,cachePool:m}),u.memoizedState=E,u.childLanes=q0(n,b,o),a.memoizedState=U0,Xc(n.child,u)):(Ba(a),o=n.child,n=o.sibling,o=Fr(o,{mode:"visible",children:u.children}),o.return=a,o.sibling=null,n!==null&&(b=a.deletions,b===null?(a.deletions=[n],a.flags|=16):b.push(n)),a.child=o,a.memoizedState=null,o)}function F0(n,a){return a=xh({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function xh(n,a){return n=ls(22,n,null,a),n.lanes=0,n}function H0(n,a,o){return Zi(a,n.child,null,o),n=F0(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function gv(n,a,o){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a),a0(n.return,a,o)}function G0(n,a,o,u,m,p){var b=n.memoizedState;b===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:p}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=u,b.tail=o,b.tailMode=m,b.treeForkCount=p)}function pv(n,a,o){var u=a.pendingProps,m=u.revealOrder,p=u.tail;u=u.children;var b=Qt.current,E=(b&2)!==0;if(E?(b=b&1|2,a.flags|=128):b&=1,z(Qt,b),Tn(n,a,u,o),u=rt?Vc:0,!E&&n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&gv(n,o,a);else if(n.tag===19)gv(n,o,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(o=a.child,m=null;o!==null;)n=o.alternate,n!==null&&ah(n)===null&&(m=o),o=o.sibling;o=m,o===null?(m=a.child,a.child=null):(m=o.sibling,o.sibling=null),G0(a,!1,m,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=a.child,a.child=null;m!==null;){if(n=m.alternate,n!==null&&ah(n)===null){a.child=m;break}n=m.sibling,m.sibling=o,o=m,m=n}G0(a,!0,o,null,p,u);break;case"together":G0(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function Xr(n,a,o){if(n!==null&&(a.dependencies=n.dependencies),Ga|=a.lanes,(o&a.childLanes)===0)if(n!==null){if(eo(n,a,o,!1),(o&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(s(153));if(a.child!==null){for(n=a.child,o=Fr(n,n.pendingProps),a.child=o,o.return=a;n.sibling!==null;)n=n.sibling,o=o.sibling=Fr(n,n.pendingProps),o.return=a;o.sibling=null}return a.child}function $0(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&Jd(n)))}function rj(n,a,o){switch(a.tag){case 3:Ke(a,a.stateNode.containerInfo),Pa(a,sn,n.memoizedState.cache),Ki();break;case 27:case 5:Nt(a);break;case 4:Ke(a,a.stateNode.containerInfo);break;case 10:Pa(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,x0(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(Ba(a),a.flags|=128,null):(o&a.child.childLanes)!==0?mv(n,a,o):(Ba(a),n=Xr(n,a,o),n!==null?n.sibling:null);Ba(a);break;case 19:var m=(n.flags&128)!==0;if(u=(o&a.childLanes)!==0,u||(eo(n,a,o,!1),u=(o&a.childLanes)!==0),m){if(u)return pv(n,a,o);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),z(Qt,Qt.current),u)break;return null;case 22:return a.lanes=0,ov(n,a,o,a.pendingProps);case 24:Pa(a,sn,n.memoizedState.cache)}return Xr(n,a,o)}function xv(n,a,o){if(n!==null)if(n.memoizedProps!==a.pendingProps)an=!0;else{if(!$0(n,o)&&(a.flags&128)===0)return an=!1,rj(n,a,o);an=(n.flags&131072)!==0}else an=!1,rt&&(a.flags&1048576)!==0&&Xy(a,Vc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(n=Ji(a.elementType),a.type=n,typeof n=="function")Jm(n)?(u=tl(n,u),a.tag=1,a=hv(null,a,n,u,o)):(a.tag=0,a=z0(null,a,n,u,o));else{if(n!=null){var m=n.$$typeof;if(m===_e){a.tag=11,a=av(null,a,n,u,o);break e}else if(m===S){a.tag=14,a=iv(null,a,n,u,o);break e}}throw a=de(n)||n,Error(s(306,a,""))}}return a;case 0:return z0(n,a,a.type,a.pendingProps,o);case 1:return u=a.type,m=tl(u,a.pendingProps),hv(n,a,u,m,o);case 3:e:{if(Ke(a,a.stateNode.containerInfo),n===null)throw Error(s(387));u=a.pendingProps;var p=a.memoizedState;m=p.element,h0(n,a),Hc(a,u,null,o);var b=a.memoizedState;if(u=b.cache,Pa(a,sn,u),u!==p.cache&&i0(a,[sn],o,!0),Fc(),u=b.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:b.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=fv(n,a,u,o);break e}else if(u!==m){m=As(Error(s(424)),a),Pc(m),a=fv(n,a,u,o);break e}else{switch(n=a.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(kt=Ds(n.firstChild),Nn=a,rt=!0,Ma=null,Rs=!0,o=ob(a,null,u,o),a.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ki(),u===m){a=Xr(n,a,o);break e}Tn(n,a,u,o)}a=a.child}return a;case 26:return ph(n,a),n===null?(o=A1(a.type,null,a.pendingProps,null))?a.memoizedState=o:rt||(o=a.type,n=a.pendingProps,u=Dh(Se.current).createElement(o),u[en]=a,u[gn]=n,Sn(u,o,n),tn(u),a.stateNode=u):a.memoizedState=A1(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return Nt(a),n===null&&rt&&(u=a.stateNode=T1(a.type,a.pendingProps,Se.current),Nn=a,Rs=!0,m=kt,Ya(a.type)?(Tg=m,kt=Ds(u.firstChild)):kt=m),Tn(n,a,a.pendingProps.children,o),ph(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&rt&&((m=u=kt)&&(u=Oj(u,a.type,a.pendingProps,Rs),u!==null?(a.stateNode=u,Nn=a,kt=Ds(u.firstChild),Rs=!1,m=!0):m=!1),m||Va(a)),Nt(a),m=a.type,p=a.pendingProps,b=n!==null?n.memoizedProps:null,u=p.children,vg(m,p)?u=null:b!==null&&vg(m,b)&&(a.flags|=32),a.memoizedState!==null&&(m=b0(n,a,XS,null,null,o),uu._currentValue=m),ph(n,a),Tn(n,a,u,o),a.child;case 6:return n===null&&rt&&((n=o=kt)&&(o=Mj(o,a.pendingProps,Rs),o!==null?(a.stateNode=o,Nn=a,kt=null,n=!0):n=!1),n||Va(a)),null;case 13:return mv(n,a,o);case 4:return Ke(a,a.stateNode.containerInfo),u=a.pendingProps,n===null?a.child=Zi(a,null,u,o):Tn(n,a,u,o),a.child;case 11:return av(n,a,a.type,a.pendingProps,o);case 7:return Tn(n,a,a.pendingProps,o),a.child;case 8:return Tn(n,a,a.pendingProps.children,o),a.child;case 12:return Tn(n,a,a.pendingProps.children,o),a.child;case 10:return u=a.pendingProps,Pa(a,a.type,u.value),Tn(n,a,u.children,o),a.child;case 9:return m=a.type._context,u=a.pendingProps.children,Xi(a),m=En(m),u=u(m),a.flags|=1,Tn(n,a,u,o),a.child;case 14:return iv(n,a,a.type,a.pendingProps,o);case 15:return lv(n,a,a.type,a.pendingProps,o);case 19:return pv(n,a,o);case 31:return sj(n,a,o);case 22:return ov(n,a,o,a.pendingProps);case 24:return Xi(a),u=En(sn),n===null?(m=c0(),m===null&&(m=It,p=l0(),m.pooledCache=p,p.refCount++,p!==null&&(m.pooledCacheLanes|=o),m=p),a.memoizedState={parent:u,cache:m},d0(a),Pa(a,sn,m)):((n.lanes&o)!==0&&(h0(n,a),Hc(a,null,null,o),Fc()),m=n.memoizedState,p=a.memoizedState,m.parent!==u?(m={parent:u,cache:u},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),Pa(a,sn,u)):(u=p.cache,Pa(a,sn,u),u!==m.cache&&i0(a,[sn],o,!0))),Tn(n,a,a.pendingProps.children,o),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function Yr(n){n.flags|=4}function K0(n,a,o,u,m){if((a=(n.mode&32)!==0)&&(a=!1),a){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(Hv())n.flags|=8192;else throw Wi=th,u0}else n.flags&=-16777217}function yv(n,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!D1(a))if(Hv())n.flags|=8192;else throw Wi=th,u0}function yh(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?At():536870912,n.lanes|=a,fo|=a)}function Yc(n,a){if(!rt)switch(n.tailMode){case"hidden":a=n.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Dt(n){var a=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(a)for(var m=n.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=u,n.childLanes=o,a}function aj(n,a,o){var u=a.pendingProps;switch(t0(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(a),null;case 1:return Dt(a),null;case 3:return o=a.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),$r(sn),ke(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Zl(a)?Yr(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,s0())),Dt(a),null;case 26:var m=a.type,p=a.memoizedState;return n===null?(Yr(a),p!==null?(Dt(a),yv(a,p)):(Dt(a),K0(a,m,null,u,o))):p?p!==n.memoizedState?(Yr(a),Dt(a),yv(a,p)):(Dt(a),a.flags&=-16777217):(n=n.memoizedProps,n!==u&&Yr(a),Dt(a),K0(a,m,n,u,o)),null;case 27:if(gt(a),o=Se.current,m=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==u&&Yr(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return Dt(a),null}n=ee.current,Zl(a)?Jy(a):(n=T1(m,u,o),a.stateNode=n,Yr(a))}return Dt(a),null;case 5:if(gt(a),m=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==u&&Yr(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return Dt(a),null}if(p=ee.current,Zl(a))Jy(a);else{var b=Dh(Se.current);switch(p){case 1:p=b.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:p=b.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":p=b.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":p=b.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":p=b.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?b.createElement("select",{is:u.is}):b.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?b.createElement(m,{is:u.is}):b.createElement(m)}}p[en]=a,p[gn]=u;e:for(b=a.child;b!==null;){if(b.tag===5||b.tag===6)p.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===a)break e;for(;b.sibling===null;){if(b.return===null||b.return===a)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}a.stateNode=p;e:switch(Sn(p,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Yr(a)}}return Dt(a),K0(a,a.type,n===null?null:n.memoizedProps,a.pendingProps,o),null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==u&&Yr(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(s(166));if(n=Se.current,Zl(a)){if(n=a.stateNode,o=a.memoizedProps,u=null,m=Nn,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}n[en]=a,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||m1(n.nodeValue,o)),n||Va(a,!0)}else n=Dh(n).createTextNode(u),n[en]=a,a.stateNode=n}return Dt(a),null;case 31:if(o=a.memoizedState,n===null||n.memoizedState!==null){if(u=Zl(a),o!==null){if(n===null){if(!u)throw Error(s(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[en]=a}else Ki(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dt(a),n=!1}else o=s0(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return a.flags&256?(cs(a),a):(cs(a),null);if((a.flags&128)!==0)throw Error(s(558))}return Dt(a),null;case 13:if(u=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=Zl(a),u!==null&&u.dehydrated!==null){if(n===null){if(!m)throw Error(s(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[en]=a}else Ki(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dt(a),m=!1}else m=s0(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(cs(a),a):(cs(a),null)}return cs(a),(a.flags&128)!==0?(a.lanes=o,a):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=a.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==m&&(u.flags|=2048)),o!==n&&o&&(a.child.flags|=8192),yh(a,a.updateQueue),Dt(a),null);case 4:return ke(),n===null&&gg(a.stateNode.containerInfo),Dt(a),null;case 10:return $r(a.type),Dt(a),null;case 19:if(U(Qt),u=a.memoizedState,u===null)return Dt(a),null;if(m=(a.flags&128)!==0,p=u.rendering,p===null)if(m)Yc(u,!1);else{if(Gt!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(p=ah(n),p!==null){for(a.flags|=128,Yc(u,!1),n=p.updateQueue,a.updateQueue=n,yh(a,n),a.subtreeFlags=0,n=o,o=a.child;o!==null;)$y(o,n),o=o.sibling;return z(Qt,Qt.current&1|2),rt&&Hr(a,u.treeForkCount),a.child}n=n.sibling}u.tail!==null&&Vt()>Nh&&(a.flags|=128,m=!0,Yc(u,!1),a.lanes=4194304)}else{if(!m)if(n=ah(p),n!==null){if(a.flags|=128,m=!0,n=n.updateQueue,a.updateQueue=n,yh(a,n),Yc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!rt)return Dt(a),null}else 2*Vt()-u.renderingStartTime>Nh&&o!==536870912&&(a.flags|=128,m=!0,Yc(u,!1),a.lanes=4194304);u.isBackwards?(p.sibling=a.child,a.child=p):(n=u.last,n!==null?n.sibling=p:a.child=p,u.last=p)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Vt(),n.sibling=null,o=Qt.current,z(Qt,m?o&1|2:o&1),rt&&Hr(a,u.treeForkCount),n):(Dt(a),null);case 22:case 23:return cs(a),p0(),u=a.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(o&536870912)!==0&&(a.flags&128)===0&&(Dt(a),a.subtreeFlags&6&&(a.flags|=8192)):Dt(a),o=a.updateQueue,o!==null&&yh(a,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==o&&(a.flags|=2048),n!==null&&U(Yi),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),$r(sn),Dt(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function ij(n,a){switch(t0(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return $r(sn),ke(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return gt(a),null;case 31:if(a.memoizedState!==null){if(cs(a),a.alternate===null)throw Error(s(340));Ki()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 13:if(cs(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(s(340));Ki()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return U(Qt),null;case 4:return ke(),null;case 10:return $r(a.type),null;case 22:case 23:return cs(a),p0(),n!==null&&U(Yi),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return $r(sn),null;case 25:return null;default:return null}}function bv(n,a){switch(t0(a),a.tag){case 3:$r(sn),ke();break;case 26:case 27:case 5:gt(a);break;case 4:ke();break;case 31:a.memoizedState!==null&&cs(a);break;case 13:cs(a);break;case 19:U(Qt);break;case 10:$r(a.type);break;case 22:case 23:cs(a),p0(),n!==null&&U(Yi);break;case 24:$r(sn)}}function Jc(n,a){try{var o=a.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&n)===n){u=void 0;var p=o.create,b=o.inst;u=p(),b.destroy=u}o=o.next}while(o!==m)}}catch(E){yt(a,a.return,E)}}function Fa(n,a,o){try{var u=a.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var p=m.next;u=p;do{if((u.tag&n)===n){var b=u.inst,E=b.destroy;if(E!==void 0){b.destroy=void 0,m=a;var k=o,Q=E;try{Q()}catch(ne){yt(m,k,ne)}}}u=u.next}while(u!==p)}}catch(ne){yt(a,a.return,ne)}}function vv(n){var a=n.updateQueue;if(a!==null){var o=n.stateNode;try{ub(a,o)}catch(u){yt(n,n.return,u)}}}function wv(n,a,o){o.props=tl(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){yt(n,a,u)}}function Wc(n,a){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(m){yt(n,a,m)}}function wr(n,a){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){yt(n,a,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){yt(n,a,m)}else o.current=null}function _v(n){var a=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){yt(n,n.return,m)}}function Q0(n,a,o){try{var u=n.stateNode;Aj(u,n.type,o,a),u[gn]=a}catch(m){yt(n,n.return,m)}}function Nv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ya(n.type)||n.tag===4}function X0(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Nv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ya(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Y0(n,a,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,a?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,a):(a=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,a.appendChild(n),o=o._reactRootContainer,o!=null||a.onclick!==null||(a.onclick=qs));else if(u!==4&&(u===27&&Ya(n.type)&&(o=n.stateNode,a=null),n=n.child,n!==null))for(Y0(n,a,o),n=n.sibling;n!==null;)Y0(n,a,o),n=n.sibling}function bh(n,a,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,a?o.insertBefore(n,a):o.appendChild(n);else if(u!==4&&(u===27&&Ya(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(bh(n,a,o),n=n.sibling;n!==null;)bh(n,a,o),n=n.sibling}function Ev(n){var a=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);Sn(a,u,o),a[en]=n,a[gn]=o}catch(p){yt(n,n.return,p)}}var Jr=!1,ln=!1,J0=!1,Tv=typeof WeakSet=="function"?WeakSet:Set,xn=null;function lj(n,a){if(n=n.containerInfo,yg=Uh,n=Py(n),Hm(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var b=0,E=-1,k=-1,Q=0,ne=0,ae=n,X=null;t:for(;;){for(var W;ae!==o||m!==0&&ae.nodeType!==3||(E=b+m),ae!==p||u!==0&&ae.nodeType!==3||(k=b+u),ae.nodeType===3&&(b+=ae.nodeValue.length),(W=ae.firstChild)!==null;)X=ae,ae=W;for(;;){if(ae===n)break t;if(X===o&&++Q===m&&(E=b),X===p&&++ne===u&&(k=b),(W=ae.nextSibling)!==null)break;ae=X,X=ae.parentNode}ae=W}o=E===-1||k===-1?null:{start:E,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(bg={focusedElem:n,selectionRange:o},Uh=!1,xn=a;xn!==null;)if(a=xn,n=a.child,(a.subtreeFlags&1028)!==0&&n!==null)n.return=a,xn=n;else for(;xn!==null;){switch(a=xn,p=a.alternate,n=a.flags,a.tag){case 0:if((n&4)!==0&&(n=a.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)m=n[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=a,m=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var je=tl(o.type,m);n=u.getSnapshotBeforeUpdate(je,p),u.__reactInternalSnapshotBeforeUpdate=n}catch(Ve){yt(o,o.return,Ve)}}break;case 3:if((n&1024)!==0){if(n=a.stateNode.containerInfo,o=n.nodeType,o===9)_g(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":_g(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=a.sibling,n!==null){n.return=a.return,xn=n;break}xn=a.return}}function Sv(n,a,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Zr(n,o),u&4&&Jc(5,o);break;case 1:if(Zr(n,o),u&4)if(n=o.stateNode,a===null)try{n.componentDidMount()}catch(b){yt(o,o.return,b)}else{var m=tl(o.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(m,a,n.__reactInternalSnapshotBeforeUpdate)}catch(b){yt(o,o.return,b)}}u&64&&vv(o),u&512&&Wc(o,o.return);break;case 3:if(Zr(n,o),u&64&&(n=o.updateQueue,n!==null)){if(a=null,o.child!==null)switch(o.child.tag){case 27:case 5:a=o.child.stateNode;break;case 1:a=o.child.stateNode}try{ub(n,a)}catch(b){yt(o,o.return,b)}}break;case 27:a===null&&u&4&&Ev(o);case 26:case 5:Zr(n,o),a===null&&u&4&&_v(o),u&512&&Wc(o,o.return);break;case 12:Zr(n,o);break;case 31:Zr(n,o),u&4&&Iv(n,o);break;case 13:Zr(n,o),u&4&&Cv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=pj.bind(null,o),Vj(n,o))));break;case 22:if(u=o.memoizedState!==null||Jr,!u){a=a!==null&&a.memoizedState!==null||ln,m=Jr;var p=ln;Jr=u,(ln=a)&&!p?ea(n,o,(o.subtreeFlags&8772)!==0):Zr(n,o),Jr=m,ln=p}break;case 30:break;default:Zr(n,o)}}function jv(n){var a=n.alternate;a!==null&&(n.alternate=null,jv(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&Vl(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Lt=null,Qn=!1;function Wr(n,a,o){for(o=o.child;o!==null;)Av(n,a,o),o=o.sibling}function Av(n,a,o){if(Je&&typeof Je.onCommitFiberUnmount=="function")try{Je.onCommitFiberUnmount(Ue,o)}catch{}switch(o.tag){case 26:ln||wr(o,a),Wr(n,a,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ln||wr(o,a);var u=Lt,m=Qn;Ya(o.type)&&(Lt=o.stateNode,Qn=!1),Wr(n,a,o),lu(o.stateNode),Lt=u,Qn=m;break;case 5:ln||wr(o,a);case 6:if(u=Lt,m=Qn,Lt=null,Wr(n,a,o),Lt=u,Qn=m,Lt!==null)if(Qn)try{(Lt.nodeType===9?Lt.body:Lt.nodeName==="HTML"?Lt.ownerDocument.body:Lt).removeChild(o.stateNode)}catch(p){yt(o,a,p)}else try{Lt.removeChild(o.stateNode)}catch(p){yt(o,a,p)}break;case 18:Lt!==null&&(Qn?(n=Lt,v1(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),wo(n)):v1(Lt,o.stateNode));break;case 4:u=Lt,m=Qn,Lt=o.stateNode.containerInfo,Qn=!0,Wr(n,a,o),Lt=u,Qn=m;break;case 0:case 11:case 14:case 15:Fa(2,o,a),ln||Fa(4,o,a),Wr(n,a,o);break;case 1:ln||(wr(o,a),u=o.stateNode,typeof u.componentWillUnmount=="function"&&wv(o,a,u)),Wr(n,a,o);break;case 21:Wr(n,a,o);break;case 22:ln=(u=ln)||o.memoizedState!==null,Wr(n,a,o),ln=u;break;default:Wr(n,a,o)}}function Iv(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{wo(n)}catch(o){yt(a,a.return,o)}}}function Cv(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{wo(n)}catch(o){yt(a,a.return,o)}}function oj(n){switch(n.tag){case 31:case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new Tv),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new Tv),a;default:throw Error(s(435,n.tag))}}function vh(n,a){var o=oj(n);a.forEach(function(u){if(!o.has(u)){o.add(u);var m=xj.bind(null,n,u);u.then(m,m)}})}function Xn(n,a){var o=a.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],p=n,b=a,E=b;e:for(;E!==null;){switch(E.tag){case 27:if(Ya(E.type)){Lt=E.stateNode,Qn=!1;break e}break;case 5:Lt=E.stateNode,Qn=!1;break e;case 3:case 4:Lt=E.stateNode.containerInfo,Qn=!0;break e}E=E.return}if(Lt===null)throw Error(s(160));Av(p,b,m),Lt=null,Qn=!1,p=m.alternate,p!==null&&(p.return=null),m.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Rv(a,n),a=a.sibling}var Qs=null;function Rv(n,a){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Xn(a,n),Yn(n),u&4&&(Fa(3,n,n.return),Jc(3,n),Fa(5,n,n.return));break;case 1:Xn(a,n),Yn(n),u&512&&(ln||o===null||wr(o,o.return)),u&64&&Jr&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=Qs;if(Xn(a,n),Yn(n),u&512&&(ln||o===null||wr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":p=m.getElementsByTagName("title")[0],(!p||p[lr]||p[en]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=m.createElement(u),m.head.insertBefore(p,m.querySelector("head > title"))),Sn(p,u,o),p[en]=n,tn(p),u=p;break e;case"link":var b=R1("link","href",m).get(u+(o.href||""));if(b){for(var E=0;E<b.length;E++)if(p=b[E],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(E,1);break t}}p=m.createElement(u),Sn(p,u,o),m.head.appendChild(p);break;case"meta":if(b=R1("meta","content",m).get(u+(o.content||""))){for(E=0;E<b.length;E++)if(p=b[E],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(E,1);break t}}p=m.createElement(u),Sn(p,u,o),m.head.appendChild(p);break;default:throw Error(s(468,u))}p[en]=n,tn(p),u=p}n.stateNode=u}else k1(m,n.type,n.stateNode);else n.stateNode=C1(m,u,n.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?k1(m,n.type,n.stateNode):C1(m,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Q0(n,n.memoizedProps,o.memoizedProps)}break;case 27:Xn(a,n),Yn(n),u&512&&(ln||o===null||wr(o,o.return)),o!==null&&u&4&&Q0(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Xn(a,n),Yn(n),u&512&&(ln||o===null||wr(o,o.return)),n.flags&32){m=n.stateNode;try{Kn(m,"")}catch(je){yt(n,n.return,je)}}u&4&&n.stateNode!=null&&(m=n.memoizedProps,Q0(n,m,o!==null?o.memoizedProps:m)),u&1024&&(J0=!0);break;case 6:if(Xn(a,n),Yn(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(je){yt(n,n.return,je)}}break;case 3:if(Vh=null,m=Qs,Qs=Oh(a.containerInfo),Xn(a,n),Qs=m,Yn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{wo(a.containerInfo)}catch(je){yt(n,n.return,je)}J0&&(J0=!1,kv(n));break;case 4:u=Qs,Qs=Oh(n.stateNode.containerInfo),Xn(a,n),Yn(n),Qs=u;break;case 12:Xn(a,n),Yn(n);break;case 31:Xn(a,n),Yn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,vh(n,u)));break;case 13:Xn(a,n),Yn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(_h=Vt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,vh(n,u)));break;case 22:m=n.memoizedState!==null;var k=o!==null&&o.memoizedState!==null,Q=Jr,ne=ln;if(Jr=Q||m,ln=ne||k,Xn(a,n),ln=ne,Jr=Q,Yn(n),u&8192)e:for(a=n.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(o===null||k||Jr||ln||nl(n)),o=null,a=n;;){if(a.tag===5||a.tag===26){if(o===null){k=o=a;try{if(p=k.stateNode,m)b=p.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{E=k.stateNode;var ae=k.memoizedProps.style,X=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;E.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(je){yt(k,k.return,je)}}}else if(a.tag===6){if(o===null){k=a;try{k.stateNode.nodeValue=m?"":k.memoizedProps}catch(je){yt(k,k.return,je)}}}else if(a.tag===18){if(o===null){k=a;try{var W=k.stateNode;m?w1(W,!0):w1(k.stateNode,!1)}catch(je){yt(k,k.return,je)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;o===a&&(o=null),a=a.return}o===a&&(o=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,vh(n,o))));break;case 19:Xn(a,n),Yn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,vh(n,u)));break;case 30:break;case 21:break;default:Xn(a,n),Yn(n)}}function Yn(n){var a=n.flags;if(a&2){try{for(var o,u=n.return;u!==null;){if(Nv(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,p=X0(n);bh(n,p,m);break;case 5:var b=o.stateNode;o.flags&32&&(Kn(b,""),o.flags&=-33);var E=X0(n);bh(n,E,b);break;case 3:case 4:var k=o.stateNode.containerInfo,Q=X0(n);Y0(n,Q,k);break;default:throw Error(s(161))}}catch(ne){yt(n,n.return,ne)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function kv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;kv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function Zr(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Sv(n,a.alternate,a),a=a.sibling}function nl(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:Fa(4,a,a.return),nl(a);break;case 1:wr(a,a.return);var o=a.stateNode;typeof o.componentWillUnmount=="function"&&wv(a,a.return,o),nl(a);break;case 27:lu(a.stateNode);case 26:case 5:wr(a,a.return),nl(a);break;case 22:a.memoizedState===null&&nl(a);break;case 30:nl(a);break;default:nl(a)}n=n.sibling}}function ea(n,a,o){for(o=o&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,m=n,p=a,b=p.flags;switch(p.tag){case 0:case 11:case 15:ea(m,p,o),Jc(4,p);break;case 1:if(ea(m,p,o),u=p,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(Q){yt(u,u.return,Q)}if(u=p,m=u.updateQueue,m!==null){var E=u.stateNode;try{var k=m.shared.hiddenCallbacks;if(k!==null)for(m.shared.hiddenCallbacks=null,m=0;m<k.length;m++)cb(k[m],E)}catch(Q){yt(u,u.return,Q)}}o&&b&64&&vv(p),Wc(p,p.return);break;case 27:Ev(p);case 26:case 5:ea(m,p,o),o&&u===null&&b&4&&_v(p),Wc(p,p.return);break;case 12:ea(m,p,o);break;case 31:ea(m,p,o),o&&b&4&&Iv(m,p);break;case 13:ea(m,p,o),o&&b&4&&Cv(m,p);break;case 22:p.memoizedState===null&&ea(m,p,o),Wc(p,p.return);break;case 30:break;default:ea(m,p,o)}a=a.sibling}}function W0(n,a){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Lc(o))}function Z0(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&Lc(n))}function Xs(n,a,o,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Dv(n,a,o,u),a=a.sibling}function Dv(n,a,o,u){var m=a.flags;switch(a.tag){case 0:case 11:case 15:Xs(n,a,o,u),m&2048&&Jc(9,a);break;case 1:Xs(n,a,o,u);break;case 3:Xs(n,a,o,u),m&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&Lc(n)));break;case 12:if(m&2048){Xs(n,a,o,u),n=a.stateNode;try{var p=a.memoizedProps,b=p.id,E=p.onPostCommit;typeof E=="function"&&E(b,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(k){yt(a,a.return,k)}}else Xs(n,a,o,u);break;case 31:Xs(n,a,o,u);break;case 13:Xs(n,a,o,u);break;case 23:break;case 22:p=a.stateNode,b=a.alternate,a.memoizedState!==null?p._visibility&2?Xs(n,a,o,u):Zc(n,a):p._visibility&2?Xs(n,a,o,u):(p._visibility|=2,co(n,a,o,u,(a.subtreeFlags&10256)!==0||!1)),m&2048&&W0(b,a);break;case 24:Xs(n,a,o,u),m&2048&&Z0(a.alternate,a);break;default:Xs(n,a,o,u)}}function co(n,a,o,u,m){for(m=m&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var p=n,b=a,E=o,k=u,Q=b.flags;switch(b.tag){case 0:case 11:case 15:co(p,b,E,k,m),Jc(8,b);break;case 23:break;case 22:var ne=b.stateNode;b.memoizedState!==null?ne._visibility&2?co(p,b,E,k,m):Zc(p,b):(ne._visibility|=2,co(p,b,E,k,m)),m&&Q&2048&&W0(b.alternate,b);break;case 24:co(p,b,E,k,m),m&&Q&2048&&Z0(b.alternate,b);break;default:co(p,b,E,k,m)}a=a.sibling}}function Zc(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var o=n,u=a,m=u.flags;switch(u.tag){case 22:Zc(o,u),m&2048&&W0(u.alternate,u);break;case 24:Zc(o,u),m&2048&&Z0(u.alternate,u);break;default:Zc(o,u)}a=a.sibling}}var eu=8192;function uo(n,a,o){if(n.subtreeFlags&eu)for(n=n.child;n!==null;)Ov(n,a,o),n=n.sibling}function Ov(n,a,o){switch(n.tag){case 26:uo(n,a,o),n.flags&eu&&n.memoizedState!==null&&Qj(o,Qs,n.memoizedState,n.memoizedProps);break;case 5:uo(n,a,o);break;case 3:case 4:var u=Qs;Qs=Oh(n.stateNode.containerInfo),uo(n,a,o),Qs=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=eu,eu=16777216,uo(n,a,o),eu=u):uo(n,a,o));break;default:uo(n,a,o)}}function Mv(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function tu(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];xn=u,Pv(u,n)}Mv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Vv(n),n=n.sibling}function Vv(n){switch(n.tag){case 0:case 11:case 15:tu(n),n.flags&2048&&Fa(9,n,n.return);break;case 3:tu(n);break;case 12:tu(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,wh(n)):tu(n);break;default:tu(n)}}function wh(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];xn=u,Pv(u,n)}Mv(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:Fa(8,a,a.return),wh(a);break;case 22:o=a.stateNode,o._visibility&2&&(o._visibility&=-3,wh(a));break;default:wh(a)}n=n.sibling}}function Pv(n,a){for(;xn!==null;){var o=xn;switch(o.tag){case 0:case 11:case 15:Fa(8,o,a);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Lc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,xn=u;else e:for(o=n;xn!==null;){u=xn;var m=u.sibling,p=u.return;if(jv(u),u===o){xn=null;break e}if(m!==null){m.return=p,xn=m;break e}xn=p}}}var cj={getCacheForType:function(n){var a=En(sn),o=a.data.get(n);return o===void 0&&(o=n(),a.data.set(n,o)),o},cacheSignal:function(){return En(sn).controller.signal}},uj=typeof WeakMap=="function"?WeakMap:Map,ht=0,It=null,Qe=null,Ze=0,xt=0,us=null,Ha=!1,ho=!1,eg=!1,ta=0,Gt=0,Ga=0,sl=0,tg=0,ds=0,fo=0,nu=null,Jn=null,ng=!1,_h=0,Lv=0,Nh=1/0,Eh=null,$a=null,un=0,Ka=null,mo=null,na=0,sg=0,rg=null,zv=null,su=0,ag=null;function hs(){return(ht&2)!==0&&Ze!==0?Ze&-Ze:F.T!==null?dg():Td()}function Uv(){if(ds===0)if((Ze&536870912)===0||rt){var n=ue;ue<<=1,(ue&3932160)===0&&(ue=262144),ds=n}else ds=536870912;return n=os.current,n!==null&&(n.flags|=32),ds}function Wn(n,a,o){(n===It&&(xt===2||xt===9)||n.cancelPendingCommit!==null)&&(go(n,0),Qa(n,Ze,ds,!1)),ut(n,o),((ht&2)===0||n!==It)&&(n===It&&((ht&2)===0&&(sl|=o),Gt===4&&Qa(n,Ze,ds,!1)),_r(n))}function Bv(n,a,o){if((ht&6)!==0)throw Error(s(327));var u=!o&&(a&127)===0&&(a&n.expiredLanes)===0||Le(n,a),m=u?fj(n,a):lg(n,a,!0),p=u;do{if(m===0){ho&&!u&&Qa(n,a,0,!1);break}else{if(o=n.current.alternate,p&&!dj(o)){m=lg(n,a,!1),p=!1;continue}if(m===2){if(p=a,n.errorRecoveryDisabledLanes&p)var b=0;else b=n.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){a=b;e:{var E=n;m=nu;var k=E.current.memoizedState.isDehydrated;if(k&&(go(E,b).flags|=256),b=lg(E,b,!1),b!==2){if(eg&&!k){E.errorRecoveryDisabledLanes|=p,sl|=p,m=4;break e}p=Jn,Jn=m,p!==null&&(Jn===null?Jn=p:Jn.push.apply(Jn,p))}m=b}if(p=!1,m!==2)continue}}if(m===1){go(n,0),Qa(n,a,0,!0);break}e:{switch(u=n,p=m,p){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:Qa(u,a,ds,!Ha);break e;case 2:Jn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(m=_h+300-Vt(),10<m)){if(Qa(u,a,ds,!Ha),be(u,0,!0)!==0)break e;na=a,u.timeoutHandle=y1(qv.bind(null,u,o,Jn,Eh,ng,a,ds,sl,fo,Ha,p,"Throttled",-0,0),m);break e}qv(u,o,Jn,Eh,ng,a,ds,sl,fo,Ha,p,null,-0,0)}}break}while(!0);_r(n)}function qv(n,a,o,u,m,p,b,E,k,Q,ne,ae,X,W){if(n.timeoutHandle=-1,ae=a.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qs},Ov(a,p,ae);var je=(p&62914560)===p?_h-Vt():(p&4194048)===p?Lv-Vt():0;if(je=Xj(ae,je),je!==null){na=p,n.cancelPendingCommit=je(Yv.bind(null,n,a,p,o,u,m,b,E,k,ne,ae,null,X,W)),Qa(n,p,b,!Q);return}}Yv(n,a,p,o,u,m,b,E,k)}function dj(n){for(var a=n;;){var o=a.tag;if((o===0||o===11||o===15)&&a.flags&16384&&(o=a.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],p=m.getSnapshot;m=m.value;try{if(!is(p(),m))return!1}catch{return!1}}if(o=a.child,a.subtreeFlags&16384&&o!==null)o.return=a,a=o;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Qa(n,a,o,u){a&=~tg,a&=~sl,n.suspendedLanes|=a,n.pingedLanes&=~a,u&&(n.warmLanes|=a),u=n.expirationTimes;for(var m=a;0<m;){var p=31-st(m),b=1<<p;u[p]=-1,m&=~b}o!==0&&mn(n,o,a)}function Th(){return(ht&6)===0?(ru(0),!1):!0}function ig(){if(Qe!==null){if(xt===0)var n=Qe.return;else n=Qe,Gr=Qi=null,_0(n),ro=null,Uc=0,n=Qe;for(;n!==null;)bv(n.alternate,n),n=n.return;Qe=null}}function go(n,a){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,Rj(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),na=0,ig(),It=n,Qe=o=Fr(n.current,null),Ze=a,xt=0,us=null,Ha=!1,ho=Le(n,a),eg=!1,fo=ds=tg=sl=Ga=Gt=0,Jn=nu=null,ng=!1,(a&8)!==0&&(a|=a&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=a;0<u;){var m=31-st(u),p=1<<m;a|=n[m],u&=~p}return ta=a,$d(),o}function Fv(n,a){He=null,F.H=Qc,a===so||a===eh?(a=ab(),xt=3):a===u0?(a=ab(),xt=4):xt=a===L0?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,us=a,Qe===null&&(Gt=1,mh(n,As(a,n.current)))}function Hv(){var n=os.current;return n===null?!0:(Ze&4194048)===Ze?ks===null:(Ze&62914560)===Ze||(Ze&536870912)!==0?n===ks:!1}function Gv(){var n=F.H;return F.H=Qc,n===null?Qc:n}function $v(){var n=F.A;return F.A=cj,n}function Sh(){Gt=4,Ha||(Ze&4194048)!==Ze&&os.current!==null||(ho=!0),(Ga&134217727)===0&&(sl&134217727)===0||It===null||Qa(It,Ze,ds,!1)}function lg(n,a,o){var u=ht;ht|=2;var m=Gv(),p=$v();(It!==n||Ze!==a)&&(Eh=null,go(n,a)),a=!1;var b=Gt;e:do try{if(xt!==0&&Qe!==null){var E=Qe,k=us;switch(xt){case 8:ig(),b=6;break e;case 3:case 2:case 9:case 6:os.current===null&&(a=!0);var Q=xt;if(xt=0,us=null,po(n,E,k,Q),o&&ho){b=0;break e}break;default:Q=xt,xt=0,us=null,po(n,E,k,Q)}}hj(),b=Gt;break}catch(ne){Fv(n,ne)}while(!0);return a&&n.shellSuspendCounter++,Gr=Qi=null,ht=u,F.H=m,F.A=p,Qe===null&&(It=null,Ze=0,$d()),b}function hj(){for(;Qe!==null;)Kv(Qe)}function fj(n,a){var o=ht;ht|=2;var u=Gv(),m=$v();It!==n||Ze!==a?(Eh=null,Nh=Vt()+500,go(n,a)):ho=Le(n,a);e:do try{if(xt!==0&&Qe!==null){a=Qe;var p=us;t:switch(xt){case 1:xt=0,us=null,po(n,a,p,1);break;case 2:case 9:if(sb(p)){xt=0,us=null,Qv(a);break}a=function(){xt!==2&&xt!==9||It!==n||(xt=7),_r(n)},p.then(a,a);break e;case 3:xt=7;break e;case 4:xt=5;break e;case 7:sb(p)?(xt=0,us=null,Qv(a)):(xt=0,us=null,po(n,a,p,7));break;case 5:var b=null;switch(Qe.tag){case 26:b=Qe.memoizedState;case 5:case 27:var E=Qe;if(b?D1(b):E.stateNode.complete){xt=0,us=null;var k=E.sibling;if(k!==null)Qe=k;else{var Q=E.return;Q!==null?(Qe=Q,jh(Q)):Qe=null}break t}}xt=0,us=null,po(n,a,p,5);break;case 6:xt=0,us=null,po(n,a,p,6);break;case 8:ig(),Gt=6;break e;default:throw Error(s(462))}}mj();break}catch(ne){Fv(n,ne)}while(!0);return Gr=Qi=null,F.H=u,F.A=m,ht=o,Qe!==null?0:(It=null,Ze=0,$d(),Gt)}function mj(){for(;Qe!==null&&!wa();)Kv(Qe)}function Kv(n){var a=xv(n.alternate,n,ta);n.memoizedProps=n.pendingProps,a===null?jh(n):Qe=a}function Qv(n){var a=n,o=a.alternate;switch(a.tag){case 15:case 0:a=dv(o,a,a.pendingProps,a.type,void 0,Ze);break;case 11:a=dv(o,a,a.pendingProps,a.type.render,a.ref,Ze);break;case 5:_0(a);default:bv(o,a),a=Qe=$y(a,ta),a=xv(o,a,ta)}n.memoizedProps=n.pendingProps,a===null?jh(n):Qe=a}function po(n,a,o,u){Gr=Qi=null,_0(a),ro=null,Uc=0;var m=a.return;try{if(nj(n,m,a,o,Ze)){Gt=1,mh(n,As(o,n.current)),Qe=null;return}}catch(p){if(m!==null)throw Qe=m,p;Gt=1,mh(n,As(o,n.current)),Qe=null;return}a.flags&32768?(rt||u===1?n=!0:ho||(Ze&536870912)!==0?n=!1:(Ha=n=!0,(u===2||u===9||u===3||u===6)&&(u=os.current,u!==null&&u.tag===13&&(u.flags|=16384))),Xv(a,n)):jh(a)}function jh(n){var a=n;do{if((a.flags&32768)!==0){Xv(a,Ha);return}n=a.return;var o=aj(a.alternate,a,ta);if(o!==null){Qe=o;return}if(a=a.sibling,a!==null){Qe=a;return}Qe=a=n}while(a!==null);Gt===0&&(Gt=5)}function Xv(n,a){do{var o=ij(n.alternate,n);if(o!==null){o.flags&=32767,Qe=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!a&&(n=n.sibling,n!==null)){Qe=n;return}Qe=n=o}while(n!==null);Gt=6,Qe=null}function Yv(n,a,o,u,m,p,b,E,k){n.cancelPendingCommit=null;do Ah();while(un!==0);if((ht&6)!==0)throw Error(s(327));if(a!==null){if(a===n.current)throw Error(s(177));if(p=a.lanes|a.childLanes,p|=Xm,Bt(n,o,p,b,E,k),n===It&&(Qe=It=null,Ze=0),mo=a,Ka=n,na=o,sg=p,rg=m,zv=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,yj(wn,function(){return t1(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=F.T,F.T=null,m=oe.p,oe.p=2,b=ht,ht|=4;try{lj(n,a,o)}finally{ht=b,oe.p=m,F.T=u}}un=1,Jv(),Wv(),Zv()}}function Jv(){if(un===1){un=0;var n=Ka,a=mo,o=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||o){o=F.T,F.T=null;var u=oe.p;oe.p=2;var m=ht;ht|=4;try{Rv(a,n);var p=bg,b=Py(n.containerInfo),E=p.focusedElem,k=p.selectionRange;if(b!==E&&E&&E.ownerDocument&&Vy(E.ownerDocument.documentElement,E)){if(k!==null&&Hm(E)){var Q=k.start,ne=k.end;if(ne===void 0&&(ne=Q),"selectionStart"in E)E.selectionStart=Q,E.selectionEnd=Math.min(ne,E.value.length);else{var ae=E.ownerDocument||document,X=ae&&ae.defaultView||window;if(X.getSelection){var W=X.getSelection(),je=E.textContent.length,Ve=Math.min(k.start,je),jt=k.end===void 0?Ve:Math.min(k.end,je);!W.extend&&Ve>jt&&(b=jt,jt=Ve,Ve=b);var q=My(E,Ve),P=My(E,jt);if(q&&P&&(W.rangeCount!==1||W.anchorNode!==q.node||W.anchorOffset!==q.offset||W.focusNode!==P.node||W.focusOffset!==P.offset)){var K=ae.createRange();K.setStart(q.node,q.offset),W.removeAllRanges(),Ve>jt?(W.addRange(K),W.extend(P.node,P.offset)):(K.setEnd(P.node,P.offset),W.addRange(K))}}}}for(ae=[],W=E;W=W.parentNode;)W.nodeType===1&&ae.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ae.length;E++){var se=ae[E];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Uh=!!yg,bg=yg=null}finally{ht=m,oe.p=u,F.T=o}}n.current=a,un=2}}function Wv(){if(un===2){un=0;var n=Ka,a=mo,o=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||o){o=F.T,F.T=null;var u=oe.p;oe.p=2;var m=ht;ht|=4;try{Sv(n,a.alternate,a)}finally{ht=m,oe.p=u,F.T=o}}un=3}}function Zv(){if(un===4||un===3){un=0,_a();var n=Ka,a=mo,o=na,u=zv;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?un=5:(un=0,mo=Ka=null,e1(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&($a=null),zr(o),a=a.stateNode,Je&&typeof Je.onCommitFiberRoot=="function")try{Je.onCommitFiberRoot(Ue,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=F.T,m=oe.p,oe.p=2,F.T=null;try{for(var p=n.onRecoverableError,b=0;b<u.length;b++){var E=u[b];p(E.value,{componentStack:E.stack})}}finally{F.T=a,oe.p=m}}(na&3)!==0&&Ah(),_r(n),m=n.pendingLanes,(o&261930)!==0&&(m&42)!==0?n===ag?su++:(su=0,ag=n):su=0,ru(0)}}function e1(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,Lc(a)))}function Ah(){return Jv(),Wv(),Zv(),t1()}function t1(){if(un!==5)return!1;var n=Ka,a=sg;sg=0;var o=zr(na),u=F.T,m=oe.p;try{oe.p=32>o?32:o,F.T=null,o=rg,rg=null;var p=Ka,b=na;if(un=0,mo=Ka=null,na=0,(ht&6)!==0)throw Error(s(331));var E=ht;if(ht|=4,Vv(p.current),Dv(p,p.current,b,o),ht=E,ru(0,!1),Je&&typeof Je.onPostCommitFiberRoot=="function")try{Je.onPostCommitFiberRoot(Ue,p)}catch{}return!0}finally{oe.p=m,F.T=u,e1(n,a)}}function n1(n,a,o){a=As(o,a),a=P0(n.stateNode,a,2),n=Ua(n,a,2),n!==null&&(ut(n,2),_r(n))}function yt(n,a,o){if(n.tag===3)n1(n,n,o);else for(;a!==null;){if(a.tag===3){n1(a,n,o);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&($a===null||!$a.has(u))){n=As(o,n),o=sv(2),u=Ua(a,o,2),u!==null&&(rv(o,u,a,n),ut(u,2),_r(u));break}}a=a.return}}function og(n,a,o){var u=n.pingCache;if(u===null){u=n.pingCache=new uj;var m=new Set;u.set(a,m)}else m=u.get(a),m===void 0&&(m=new Set,u.set(a,m));m.has(o)||(eg=!0,m.add(o),n=gj.bind(null,n,a,o),a.then(n,n))}function gj(n,a,o){var u=n.pingCache;u!==null&&u.delete(a),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,It===n&&(Ze&o)===o&&(Gt===4||Gt===3&&(Ze&62914560)===Ze&&300>Vt()-_h?(ht&2)===0&&go(n,0):tg|=o,fo===Ze&&(fo=0)),_r(n)}function s1(n,a){a===0&&(a=At()),n=Gi(n,a),n!==null&&(ut(n,a),_r(n))}function pj(n){var a=n.memoizedState,o=0;a!==null&&(o=a.retryLane),s1(n,o)}function xj(n,a){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,m=n.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(a),s1(n,o)}function yj(n,a){return Mt(n,a)}var Ih=null,xo=null,cg=!1,Ch=!1,ug=!1,Xa=0;function _r(n){n!==xo&&n.next===null&&(xo===null?Ih=xo=n:xo=xo.next=n),Ch=!0,cg||(cg=!0,vj())}function ru(n,a){if(!ug&&Ch){ug=!0;do for(var o=!1,u=Ih;u!==null;){if(n!==0){var m=u.pendingLanes;if(m===0)var p=0;else{var b=u.suspendedLanes,E=u.pingedLanes;p=(1<<31-st(42|n)+1)-1,p&=m&~(b&~E),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,l1(u,p))}else p=Ze,p=be(u,u===It?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Le(u,p)||(o=!0,l1(u,p));u=u.next}while(o);ug=!1}}function bj(){r1()}function r1(){Ch=cg=!1;var n=0;Xa!==0&&Cj()&&(n=Xa);for(var a=Vt(),o=null,u=Ih;u!==null;){var m=u.next,p=a1(u,a);p===0?(u.next=null,o===null?Ih=m:o.next=m,m===null&&(xo=o)):(o=u,(n!==0||(p&3)!==0)&&(Ch=!0)),u=m}un!==0&&un!==5||ru(n),Xa!==0&&(Xa=0)}function a1(n,a){for(var o=n.suspendedLanes,u=n.pingedLanes,m=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var b=31-st(p),E=1<<b,k=m[b];k===-1?((E&o)===0||(E&u)!==0)&&(m[b]=We(E,a)):k<=a&&(n.expiredLanes|=E),p&=~E}if(a=It,o=Ze,o=be(n,n===a?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===a&&(xt===2||xt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&fn(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Le(n,o)){if(a=o&-o,a===n.callbackPriority)return a;switch(u!==null&&fn(u),zr(o)){case 2:case 8:o=Pr;break;case 32:o=wn;break;case 268435456:o=Ea;break;default:o=wn}return u=i1.bind(null,n),o=Mt(o,u),n.callbackPriority=a,n.callbackNode=o,a}return u!==null&&u!==null&&fn(u),n.callbackPriority=2,n.callbackNode=null,2}function i1(n,a){if(un!==0&&un!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Ah()&&n.callbackNode!==o)return null;var u=Ze;return u=be(n,n===It?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Bv(n,u,a),a1(n,Vt()),n.callbackNode!=null&&n.callbackNode===o?i1.bind(null,n):null)}function l1(n,a){if(Ah())return null;Bv(n,a,!0)}function vj(){kj(function(){(ht&6)!==0?Mt(rr,bj):r1()})}function dg(){if(Xa===0){var n=to;n===0&&(n=Gn,Gn<<=1,(Gn&261888)===0&&(Gn=256)),Xa=n}return Xa}function o1(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ul(""+n)}function c1(n,a){var o=a.ownerDocument.createElement("input");return o.name=a.name,o.value=a.value,n.id&&o.setAttribute("form",n.id),a.parentNode.insertBefore(o,a),n=new FormData(n),o.parentNode.removeChild(o),n}function wj(n,a,o,u,m){if(a==="submit"&&o&&o.stateNode===m){var p=o1((m[gn]||null).action),b=u.submitter;b&&(a=(a=b[gn]||null)?o1(a.formAction):b.getAttribute("formAction"),a!==null&&(p=a,b=null));var E=new gr("action","action",null,u,m);n.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Xa!==0){var k=b?c1(m,b):new FormData(m);R0(o,{pending:!0,data:k,method:m.method,action:p},null,k)}}else typeof p=="function"&&(E.preventDefault(),k=b?c1(m,b):new FormData(m),R0(o,{pending:!0,data:k,method:m.method,action:p},p,k))},currentTarget:m}]})}}for(var hg=0;hg<Qm.length;hg++){var fg=Qm[hg],_j=fg.toLowerCase(),Nj=fg[0].toUpperCase()+fg.slice(1);Ks(_j,"on"+Nj)}Ks(Uy,"onAnimationEnd"),Ks(By,"onAnimationIteration"),Ks(qy,"onAnimationStart"),Ks("dblclick","onDoubleClick"),Ks("focusin","onFocus"),Ks("focusout","onBlur"),Ks(zS,"onTransitionRun"),Ks(US,"onTransitionStart"),Ks(BS,"onTransitionCancel"),Ks(Fy,"onTransitionEnd"),dr("onMouseEnter",["mouseout","mouseover"]),dr("onMouseLeave",["mouseout","mouseover"]),dr("onPointerEnter",["pointerout","pointerover"]),dr("onPointerLeave",["pointerout","pointerover"]),ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ur("onBeforeInput",["compositionend","keypress","textInput","paste"]),ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var au="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ej=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(au));function u1(n,a){a=(a&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],m=u.event;u=u.listeners;e:{var p=void 0;if(a)for(var b=u.length-1;0<=b;b--){var E=u[b],k=E.instance,Q=E.currentTarget;if(E=E.listener,k!==p&&m.isPropagationStopped())break e;p=E,m.currentTarget=Q;try{p(m)}catch(ne){Gd(ne)}m.currentTarget=null,p=k}else for(b=0;b<u.length;b++){if(E=u[b],k=E.instance,Q=E.currentTarget,E=E.listener,k!==p&&m.isPropagationStopped())break e;p=E,m.currentTarget=Q;try{p(m)}catch(ne){Gd(ne)}m.currentTarget=null,p=k}}}}function Xe(n,a){var o=a[Ml];o===void 0&&(o=a[Ml]=new Set);var u=n+"__bubble";o.has(u)||(d1(a,n,2,!1),o.add(u))}function mg(n,a,o){var u=0;a&&(u|=4),d1(o,n,u,a)}var Rh="_reactListening"+Math.random().toString(36).slice(2);function gg(n){if(!n[Rh]){n[Rh]=!0,xc.forEach(function(o){o!=="selectionchange"&&(Ej.has(o)||mg(o,!1,n),mg(o,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[Rh]||(a[Rh]=!0,mg("selectionchange",!1,a))}}function d1(n,a,o,u){switch(U1(a)){case 2:var m=Wj;break;case 8:m=Zj;break;default:m=Cg}o=m.bind(null,a,o,n),m=void 0,!Pi||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),u?m!==void 0?n.addEventListener(a,o,{capture:!0,passive:m}):n.addEventListener(a,o,!0):m!==void 0?n.addEventListener(a,o,{passive:m}):n.addEventListener(a,o,!1)}function pg(n,a,o,u,m){var p=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var E=u.stateNode.containerInfo;if(E===m)break;if(b===4)for(b=u.return;b!==null;){var k=b.tag;if((k===3||k===4)&&b.stateNode.containerInfo===m)return;b=b.return}for(;E!==null;){if(b=or(E),b===null)return;if(k=b.tag,k===5||k===6||k===26||k===27){u=p=b;continue e}E=E.parentNode}}u=u.return}Ca(function(){var Q=p,ne=Es(o),ae=[];e:{var X=Hy.get(n);if(X!==void 0){var W=gr,je=n;switch(n){case"keypress":if(zi(o)===0)break e;case"keydown":case"keyup":W=qd;break;case"focusin":je="focus",W=Bi;break;case"focusout":je="blur",W=Bi;break;case"beforeblur":case"afterblur":W=Bi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Cc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=y;break;case Uy:case By:case qy:W=Md;break;case Fy:W=T;break;case"scroll":case"scrollend":W=Ic;break;case"wheel":W=J;break;case"copy":case"cut":case"paste":W=Vd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=qr;break;case"toggle":case"beforetoggle":W=Fe}var Ve=(a&4)!==0,jt=!Ve&&(n==="scroll"||n==="scrollend"),q=Ve?X!==null?X+"Capture":null:X;Ve=[];for(var P=Q,K;P!==null;){var se=P;if(K=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||K===null||q===null||(se=Fs(P,q),se!=null&&Ve.push(iu(P,se,K))),jt)break;P=P.return}0<Ve.length&&(X=new W(X,je,null,o,ne),ae.push({event:X,listeners:Ve}))}}if((a&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",W=n==="mouseout"||n==="pointerout",X&&o!==Sc&&(je=o.relatedTarget||o.fromElement)&&(or(je)||je[ir]))break e;if((W||X)&&(X=ne.window===ne?ne:(X=ne.ownerDocument)?X.defaultView||X.parentWindow:window,W?(je=o.relatedTarget||o.toElement,W=Q,je=je?or(je):null,je!==null&&(jt=c(je),Ve=je.tag,je!==jt||Ve!==5&&Ve!==27&&Ve!==6)&&(je=null)):(W=null,je=Q),W!==je)){if(Ve=Cc,se="onMouseLeave",q="onMouseEnter",P="mouse",(n==="pointerout"||n==="pointerover")&&(Ve=qr,se="onPointerLeave",q="onPointerEnter",P="pointer"),jt=W==null?X:rs(W),K=je==null?X:rs(je),X=new Ve(se,P+"leave",W,o,ne),X.target=jt,X.relatedTarget=K,se=null,or(ne)===Q&&(Ve=new Ve(q,P+"enter",je,o,ne),Ve.target=K,Ve.relatedTarget=jt,se=Ve),jt=se,W&&je)t:{for(Ve=Tj,q=W,P=je,K=0,se=q;se;se=Ve(se))K++;se=0;for(var De=P;De;De=Ve(De))se++;for(;0<K-se;)q=Ve(q),K--;for(;0<se-K;)P=Ve(P),se--;for(;K--;){if(q===P||P!==null&&q===P.alternate){Ve=q;break t}q=Ve(q),P=Ve(P)}Ve=null}else Ve=null;W!==null&&h1(ae,X,W,Ve,!1),je!==null&&jt!==null&&h1(ae,jt,je,Ve,!0)}}e:{if(X=Q?rs(Q):window,W=X.nodeName&&X.nodeName.toLowerCase(),W==="select"||W==="input"&&X.type==="file")var lt=Iy;else if(jy(X))if(Cy)lt=VS;else{lt=OS;var Ie=DS}else W=X.nodeName,!W||W.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&zl(Q.elementType)&&(lt=Iy):lt=MS;if(lt&&(lt=lt(n,Q))){Ay(ae,lt,o,ne);break e}Ie&&Ie(n,X,Q),n==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&Nc(X,"number",X.value)}switch(Ie=Q?rs(Q):window,n){case"focusin":(jy(Ie)||Ie.contentEditable==="true")&&(Kl=Ie,Gm=Q,Mc=null);break;case"focusout":Mc=Gm=Kl=null;break;case"mousedown":$m=!0;break;case"contextmenu":case"mouseup":case"dragend":$m=!1,Ly(ae,o,ne);break;case"selectionchange":if(LS)break;case"keydown":case"keyup":Ly(ae,o,ne)}var Ge;if(dt)e:{switch(n){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else $l?qi(n,o)&&(et="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(et="onCompositionStart");et&&(yr&&o.locale!=="ko"&&($l||et!=="onCompositionStart"?et==="onCompositionEnd"&&$l&&(Ge=Ac()):(mr=ne,jc="value"in mr?mr.value:mr.textContent,$l=!0)),Ie=kh(Q,et),0<Ie.length&&(et=new xr(et,n,null,o,ne),ae.push({event:et,listeners:Ie}),Ge?et.data=Ge:(Ge=Gl(o),Ge!==null&&(et.data=Ge)))),(Ge=Ss?IS(n,o):CS(n,o))&&(et=kh(Q,"onBeforeInput"),0<et.length&&(Ie=new xr("onBeforeInput","beforeinput",null,o,ne),ae.push({event:Ie,listeners:et}),Ie.data=Ge)),wj(ae,n,Q,o,ne)}u1(ae,a)})}function iu(n,a,o){return{instance:n,listener:a,currentTarget:o}}function kh(n,a){for(var o=a+"Capture",u=[];n!==null;){var m=n,p=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||p===null||(m=Fs(n,o),m!=null&&u.unshift(iu(n,m,p)),m=Fs(n,a),m!=null&&u.push(iu(n,m,p))),n.tag===3)return u;n=n.return}return[]}function Tj(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function h1(n,a,o,u,m){for(var p=a._reactName,b=[];o!==null&&o!==u;){var E=o,k=E.alternate,Q=E.stateNode;if(E=E.tag,k!==null&&k===u)break;E!==5&&E!==26&&E!==27||Q===null||(k=Q,m?(Q=Fs(o,p),Q!=null&&b.unshift(iu(o,Q,k))):m||(Q=Fs(o,p),Q!=null&&b.push(iu(o,Q,k)))),o=o.return}b.length!==0&&n.push({event:a,listeners:b})}var Sj=/\r\n?/g,jj=/\u0000|\uFFFD/g;function f1(n){return(typeof n=="string"?n:""+n).replace(Sj,`
`).replace(jj,"")}function m1(n,a){return a=f1(a),f1(n)===a}function St(n,a,o,u,m,p){switch(o){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||Kn(n,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&Kn(n,""+u);break;case"className":as(n,"class",u);break;case"tabIndex":as(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":as(n,o,u);break;case"style":Tc(n,u,p);break;case"data":if(a!=="object"){as(n,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ul(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(a!=="input"&&St(n,a,"name",m.name,m,null),St(n,a,"formEncType",m.formEncType,m,null),St(n,a,"formMethod",m.formMethod,m,null),St(n,a,"formTarget",m.formTarget,m,null)):(St(n,a,"encType",m.encType,m,null),St(n,a,"method",m.method,m,null),St(n,a,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ul(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=qs);break;case"onScroll":u!=null&&Xe("scroll",n);break;case"onScrollEnd":u!=null&&Xe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Ul(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Xe("beforetoggle",n),Xe("toggle",n),Pl(n,"popover",u);break;case"xlinkActuate":nn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":nn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":nn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":nn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":nn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":nn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":nn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":nn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":nn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Pl(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=kd.get(o)||o,Pl(n,o,u))}}function xg(n,a,o,u,m,p){switch(o){case"style":Tc(n,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Kn(n,u):(typeof u=="number"||typeof u=="bigint")&&Kn(n,""+u);break;case"onScroll":u!=null&&Xe("scroll",n);break;case"onScrollEnd":u!=null&&Xe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=qs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yc.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),a=o.slice(2,m?o.length-7:void 0),p=n[gn]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(a,p,m),typeof u=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(a,u,m);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Pl(n,o,u)}}}function Sn(n,a,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",n),Xe("load",n);var u=!1,m=!1,p;for(p in o)if(o.hasOwnProperty(p)){var b=o[p];if(b!=null)switch(p){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:St(n,a,p,b,o,null)}}m&&St(n,a,"srcSet",o.srcSet,o,null),u&&St(n,a,"src",o.src,o,null);return;case"input":Xe("invalid",n);var E=p=b=m=null,k=null,Q=null;for(u in o)if(o.hasOwnProperty(u)){var ne=o[u];if(ne!=null)switch(u){case"name":m=ne;break;case"type":b=ne;break;case"checked":k=ne;break;case"defaultChecked":Q=ne;break;case"value":p=ne;break;case"defaultValue":E=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,a));break;default:St(n,a,u,ne,o,null)}}Id(n,p,E,k,Q,b,m,!1);return;case"select":Xe("invalid",n),u=b=p=null;for(m in o)if(o.hasOwnProperty(m)&&(E=o[m],E!=null))switch(m){case"value":p=E;break;case"defaultValue":b=E;break;case"multiple":u=E;default:St(n,a,m,E,o,null)}a=p,o=b,n.multiple=!!u,a!=null?Sa(n,!!u,a,!1):o!=null&&Sa(n,!!u,o,!0);return;case"textarea":Xe("invalid",n),p=m=u=null;for(b in o)if(o.hasOwnProperty(b)&&(E=o[b],E!=null))switch(b){case"value":u=E;break;case"defaultValue":m=E;break;case"children":p=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:St(n,a,b,E,o,null)}ja(n,u,m,p);return;case"option":for(k in o)if(o.hasOwnProperty(k)&&(u=o[k],u!=null))switch(k){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:St(n,a,k,u,o,null)}return;case"dialog":Xe("beforetoggle",n),Xe("toggle",n),Xe("cancel",n),Xe("close",n);break;case"iframe":case"object":Xe("load",n);break;case"video":case"audio":for(u=0;u<au.length;u++)Xe(au[u],n);break;case"image":Xe("error",n),Xe("load",n);break;case"details":Xe("toggle",n);break;case"embed":case"source":case"link":Xe("error",n),Xe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in o)if(o.hasOwnProperty(Q)&&(u=o[Q],u!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:St(n,a,Q,u,o,null)}return;default:if(zl(a)){for(ne in o)o.hasOwnProperty(ne)&&(u=o[ne],u!==void 0&&xg(n,a,ne,u,o,void 0));return}}for(E in o)o.hasOwnProperty(E)&&(u=o[E],u!=null&&St(n,a,E,u,o,null))}function Aj(n,a,o,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,p=null,b=null,E=null,k=null,Q=null,ne=null;for(W in o){var ae=o[W];if(o.hasOwnProperty(W)&&ae!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":k=ae;default:u.hasOwnProperty(W)||St(n,a,W,null,u,ae)}}for(var X in u){var W=u[X];if(ae=o[X],u.hasOwnProperty(X)&&(W!=null||ae!=null))switch(X){case"type":p=W;break;case"name":m=W;break;case"checked":Q=W;break;case"defaultChecked":ne=W;break;case"value":b=W;break;case"defaultValue":E=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,a));break;default:W!==ae&&St(n,a,X,W,u,ae)}}Ll(n,b,E,k,Q,ne,p,m);return;case"select":W=b=E=X=null;for(p in o)if(k=o[p],o.hasOwnProperty(p)&&k!=null)switch(p){case"value":break;case"multiple":W=k;default:u.hasOwnProperty(p)||St(n,a,p,null,u,k)}for(m in u)if(p=u[m],k=o[m],u.hasOwnProperty(m)&&(p!=null||k!=null))switch(m){case"value":X=p;break;case"defaultValue":E=p;break;case"multiple":b=p;default:p!==k&&St(n,a,m,p,u,k)}a=E,o=b,u=W,X!=null?Sa(n,!!o,X,!1):!!u!=!!o&&(a!=null?Sa(n,!!o,a,!0):Sa(n,!!o,o?[]:"",!1));return;case"textarea":W=X=null;for(E in o)if(m=o[E],o.hasOwnProperty(E)&&m!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:St(n,a,E,null,u,m)}for(b in u)if(m=u[b],p=o[b],u.hasOwnProperty(b)&&(m!=null||p!=null))switch(b){case"value":X=m;break;case"defaultValue":W=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==p&&St(n,a,b,m,u,p)}Cd(n,X,W);return;case"option":for(var je in o)if(X=o[je],o.hasOwnProperty(je)&&X!=null&&!u.hasOwnProperty(je))switch(je){case"selected":n.selected=!1;break;default:St(n,a,je,null,u,X)}for(k in u)if(X=u[k],W=o[k],u.hasOwnProperty(k)&&X!==W&&(X!=null||W!=null))switch(k){case"selected":n.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:St(n,a,k,X,u,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in o)X=o[Ve],o.hasOwnProperty(Ve)&&X!=null&&!u.hasOwnProperty(Ve)&&St(n,a,Ve,null,u,X);for(Q in u)if(X=u[Q],W=o[Q],u.hasOwnProperty(Q)&&X!==W&&(X!=null||W!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,a));break;default:St(n,a,Q,X,u,W)}return;default:if(zl(a)){for(var jt in o)X=o[jt],o.hasOwnProperty(jt)&&X!==void 0&&!u.hasOwnProperty(jt)&&xg(n,a,jt,void 0,u,X);for(ne in u)X=u[ne],W=o[ne],!u.hasOwnProperty(ne)||X===W||X===void 0&&W===void 0||xg(n,a,ne,X,u,W);return}}for(var q in o)X=o[q],o.hasOwnProperty(q)&&X!=null&&!u.hasOwnProperty(q)&&St(n,a,q,null,u,X);for(ae in u)X=u[ae],W=o[ae],!u.hasOwnProperty(ae)||X===W||X==null&&W==null||St(n,a,ae,X,u,W)}function g1(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ij(){if(typeof performance.getEntriesByType=="function"){for(var n=0,a=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],p=m.transferSize,b=m.initiatorType,E=m.duration;if(p&&E&&g1(b)){for(b=0,E=m.responseEnd,u+=1;u<o.length;u++){var k=o[u],Q=k.startTime;if(Q>E)break;var ne=k.transferSize,ae=k.initiatorType;ne&&g1(ae)&&(k=k.responseEnd,b+=ne*(k<E?1:(E-Q)/(k-Q)))}if(--u,a+=8*(p+b)/(m.duration/1e3),n++,10<n)break}}if(0<n)return a/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var yg=null,bg=null;function Dh(n){return n.nodeType===9?n:n.ownerDocument}function p1(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function x1(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function vg(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var wg=null;function Cj(){var n=window.event;return n&&n.type==="popstate"?n===wg?!1:(wg=n,!0):(wg=null,!1)}var y1=typeof setTimeout=="function"?setTimeout:void 0,Rj=typeof clearTimeout=="function"?clearTimeout:void 0,b1=typeof Promise=="function"?Promise:void 0,kj=typeof queueMicrotask=="function"?queueMicrotask:typeof b1<"u"?function(n){return b1.resolve(null).then(n).catch(Dj)}:y1;function Dj(n){setTimeout(function(){throw n})}function Ya(n){return n==="head"}function v1(n,a){var o=a,u=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(m),wo(a);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")lu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,lu(o);for(var p=o.firstChild;p;){var b=p.nextSibling,E=p.nodeName;p[lr]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=b}}else o==="body"&&lu(n.ownerDocument.body);o=m}while(o);wo(a)}function w1(n,a){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?a?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(a?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function _g(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var o=a;switch(a=a.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":_g(o),Vl(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function Oj(n,a,o,u){for(;n.nodeType===1;){var m=o;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[lr])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var p=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=Ds(n.nextSibling),n===null)break}return null}function Mj(n,a,o){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Ds(n.nextSibling),n===null))return null;return n}function _1(n,a){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Ds(n.nextSibling),n===null))return null;return n}function Ng(n){return n.data==="$?"||n.data==="$~"}function Eg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Vj(n,a){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=a;else if(n.data!=="$?"||o.readyState!=="loading")a();else{var u=function(){a(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Ds(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return n}var Tg=null;function N1(n){n=n.nextSibling;for(var a=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(a===0)return Ds(n.nextSibling);a--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||a++}n=n.nextSibling}return null}function E1(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(a===0)return n;a--}else o!=="/$"&&o!=="/&"||a++}n=n.previousSibling}return null}function T1(n,a,o){switch(a=Dh(o),n){case"html":if(n=a.documentElement,!n)throw Error(s(452));return n;case"head":if(n=a.head,!n)throw Error(s(453));return n;case"body":if(n=a.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function lu(n){for(var a=n.attributes;a.length;)n.removeAttributeNode(a[0]);Vl(n)}var Os=new Map,S1=new Set;function Oh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var sa=oe.d;oe.d={f:Pj,r:Lj,D:zj,C:Uj,L:Bj,m:qj,X:Hj,S:Fj,M:Gj};function Pj(){var n=sa.f(),a=Th();return n||a}function Lj(n){var a=Ns(n);a!==null&&a.tag===5&&a.type==="form"?Fb(a):sa.r(n)}var yo=typeof document>"u"?null:document;function j1(n,a,o){var u=yo;if(u&&typeof a=="string"&&a){var m=$n(a);m='link[rel="'+n+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),S1.has(m)||(S1.add(m),n={rel:n,crossOrigin:o,href:a},u.querySelector(m)===null&&(a=u.createElement("link"),Sn(a,"link",n),tn(a),u.head.appendChild(a)))}}function zj(n){sa.D(n),j1("dns-prefetch",n,null)}function Uj(n,a){sa.C(n,a),j1("preconnect",n,a)}function Bj(n,a,o){sa.L(n,a,o);var u=yo;if(u&&n&&a){var m='link[rel="preload"][as="'+$n(a)+'"]';a==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+$n(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+$n(o.imageSizes)+'"]')):m+='[href="'+$n(n)+'"]';var p=m;switch(a){case"style":p=bo(n);break;case"script":p=vo(n)}Os.has(p)||(n=w({rel:"preload",href:a==="image"&&o&&o.imageSrcSet?void 0:n,as:a},o),Os.set(p,n),u.querySelector(m)!==null||a==="style"&&u.querySelector(ou(p))||a==="script"&&u.querySelector(cu(p))||(a=u.createElement("link"),Sn(a,"link",n),tn(a),u.head.appendChild(a)))}}function qj(n,a){sa.m(n,a);var o=yo;if(o&&n){var u=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+$n(u)+'"][href="'+$n(n)+'"]',p=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=vo(n)}if(!Os.has(p)&&(n=w({rel:"modulepreload",href:n},a),Os.set(p,n),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(cu(p)))return}u=o.createElement("link"),Sn(u,"link",n),tn(u),o.head.appendChild(u)}}}function Fj(n,a,o){sa.S(n,a,o);var u=yo;if(u&&n){var m=cr(u).hoistableStyles,p=bo(n);a=a||"default";var b=m.get(p);if(!b){var E={loading:0,preload:null};if(b=u.querySelector(ou(p)))E.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":a},o),(o=Os.get(p))&&Sg(n,o);var k=b=u.createElement("link");tn(k),Sn(k,"link",n),k._p=new Promise(function(Q,ne){k.onload=Q,k.onerror=ne}),k.addEventListener("load",function(){E.loading|=1}),k.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Mh(b,a,u)}b={type:"stylesheet",instance:b,count:1,state:E},m.set(p,b)}}}function Hj(n,a){sa.X(n,a);var o=yo;if(o&&n){var u=cr(o).hoistableScripts,m=vo(n),p=u.get(m);p||(p=o.querySelector(cu(m)),p||(n=w({src:n,async:!0},a),(a=Os.get(m))&&jg(n,a),p=o.createElement("script"),tn(p),Sn(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(m,p))}}function Gj(n,a){sa.M(n,a);var o=yo;if(o&&n){var u=cr(o).hoistableScripts,m=vo(n),p=u.get(m);p||(p=o.querySelector(cu(m)),p||(n=w({src:n,async:!0,type:"module"},a),(a=Os.get(m))&&jg(n,a),p=o.createElement("script"),tn(p),Sn(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(m,p))}}function A1(n,a,o,u){var m=(m=Se.current)?Oh(m):null;if(!m)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(a=bo(o.href),o=cr(m).hoistableStyles,u=o.get(a),u||(u={type:"style",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=bo(o.href);var p=cr(m).hoistableStyles,b=p.get(n);if(b||(m=m.ownerDocument||m,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,b),(p=m.querySelector(ou(n)))&&!p._p&&(b.instance=p,b.state.loading=5),Os.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Os.set(n,o),p||$j(m,n,o,b.state))),a&&u===null)throw Error(s(528,""));return b}if(a&&u!==null)throw Error(s(529,""));return null;case"script":return a=o.async,o=o.src,typeof o=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=vo(o),o=cr(m).hoistableScripts,u=o.get(a),u||(u={type:"script",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function bo(n){return'href="'+$n(n)+'"'}function ou(n){return'link[rel="stylesheet"]['+n+"]"}function I1(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function $j(n,a,o,u){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=n.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),Sn(a,"link",o),tn(a),n.head.appendChild(a))}function vo(n){return'[src="'+$n(n)+'"]'}function cu(n){return"script[async]"+n}function C1(n,a,o){if(a.count++,a.instance===null)switch(a.type){case"style":var u=n.querySelector('style[data-href~="'+$n(o.href)+'"]');if(u)return a.instance=u,tn(u),u;var m=w({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),tn(u),Sn(u,"style",m),Mh(u,o.precedence,n),a.instance=u;case"stylesheet":m=bo(o.href);var p=n.querySelector(ou(m));if(p)return a.state.loading|=4,a.instance=p,tn(p),p;u=I1(o),(m=Os.get(m))&&Sg(u,m),p=(n.ownerDocument||n).createElement("link"),tn(p);var b=p;return b._p=new Promise(function(E,k){b.onload=E,b.onerror=k}),Sn(p,"link",u),a.state.loading|=4,Mh(p,o.precedence,n),a.instance=p;case"script":return p=vo(o.src),(m=n.querySelector(cu(p)))?(a.instance=m,tn(m),m):(u=o,(m=Os.get(p))&&(u=w({},o),jg(u,m)),n=n.ownerDocument||n,m=n.createElement("script"),tn(m),Sn(m,"link",u),n.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Mh(u,o.precedence,n));return a.instance}function Mh(n,a,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,p=m,b=0;b<u.length;b++){var E=u[b];if(E.dataset.precedence===a)p=E;else if(p!==m)break}p?p.parentNode.insertBefore(n,p.nextSibling):(a=o.nodeType===9?o.head:o,a.insertBefore(n,a.firstChild))}function Sg(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function jg(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var Vh=null;function R1(n,a,o){if(Vh===null){var u=new Map,m=Vh=new Map;m.set(o,u)}else m=Vh,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),m=0;m<o.length;m++){var p=o[m];if(!(p[lr]||p[en]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var b=p.getAttribute(a)||"";b=n+b;var E=u.get(b);E?E.push(p):u.set(b,[p])}}return u}function k1(n,a,o){n=n.ownerDocument||n,n.head.insertBefore(o,a==="title"?n.querySelector("head > title"):null)}function Kj(n,a,o){if(o===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return n=a.disabled,typeof a.precedence=="string"&&n==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function D1(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Qj(n,a,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=bo(u.href),p=a.querySelector(ou(m));if(p){a=p._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(n.count++,n=Ph.bind(n),a.then(n,n)),o.state.loading|=4,o.instance=p,tn(p);return}p=a.ownerDocument||a,u=I1(u),(m=Os.get(m))&&Sg(u,m),p=p.createElement("link"),tn(p);var b=p;b._p=new Promise(function(E,k){b.onload=E,b.onerror=k}),Sn(p,"link",u),o.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Ph.bind(n),a.addEventListener("load",o),a.addEventListener("error",o))}}var Ag=0;function Xj(n,a){return n.stylesheets&&n.count===0&&zh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&zh(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+a);0<n.imgBytes&&Ag===0&&(Ag=62500*Ij());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&zh(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>Ag?50:800)+a);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function Ph(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Lh=null;function zh(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Lh=new Map,a.forEach(Yj,n),Lh=null,Ph.call(n))}function Yj(n,a){if(!(a.state.loading&4)){var o=Lh.get(n);if(o)var u=o.get(null);else{o=new Map,Lh.set(n,o);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<m.length;p++){var b=m[p];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),u=b)}u&&o.set(null,u)}m=a.instance,b=m.getAttribute("data-precedence"),p=o.get(b)||u,p===u&&o.set(null,m),o.set(b,m),this.count++,u=Ph.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),p?p.parentNode.insertBefore(m,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),a.state.loading|=4}}var uu={$$typeof:le,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function Jj(n,a,o,u,m,p,b,E,k){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ct(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ct(0),this.hiddenUpdates=ct(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=p,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function O1(n,a,o,u,m,p,b,E,k,Q,ne,ae){return n=new Jj(n,a,o,b,k,Q,ne,ae,E),a=1,p===!0&&(a|=24),p=ls(3,null,null,a),n.current=p,p.stateNode=n,a=l0(),a.refCount++,n.pooledCache=a,a.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:a},d0(p),n}function M1(n){return n?(n=Yl,n):Yl}function V1(n,a,o,u,m,p){m=M1(m),u.context===null?u.context=m:u.pendingContext=m,u=za(a),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Ua(n,u,a),o!==null&&(Wn(o,n,a),qc(o,n,a))}function P1(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<a?o:a}}function Ig(n,a){P1(n,a),(n=n.alternate)&&P1(n,a)}function L1(n){if(n.tag===13||n.tag===31){var a=Gi(n,67108864);a!==null&&Wn(a,n,67108864),Ig(n,67108864)}}function z1(n){if(n.tag===13||n.tag===31){var a=hs();a=Di(a);var o=Gi(n,a);o!==null&&Wn(o,n,a),Ig(n,a)}}var Uh=!0;function Wj(n,a,o,u){var m=F.T;F.T=null;var p=oe.p;try{oe.p=2,Cg(n,a,o,u)}finally{oe.p=p,F.T=m}}function Zj(n,a,o,u){var m=F.T;F.T=null;var p=oe.p;try{oe.p=8,Cg(n,a,o,u)}finally{oe.p=p,F.T=m}}function Cg(n,a,o,u){if(Uh){var m=Rg(u);if(m===null)pg(n,a,u,Bh,o),B1(n,u);else if(t4(m,n,a,o,u))u.stopPropagation();else if(B1(n,u),a&4&&-1<e4.indexOf(n)){for(;m!==null;){var p=Ns(m);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var b=Ce(p.pendingLanes);if(b!==0){var E=p;for(E.pendingLanes|=2,E.entangledLanes|=2;b;){var k=1<<31-st(b);E.entanglements[1]|=k,b&=~k}_r(p),(ht&6)===0&&(Nh=Vt()+500,ru(0))}}break;case 31:case 13:E=Gi(p,2),E!==null&&Wn(E,p,2),Th(),Ig(p,2)}if(p=Rg(u),p===null&&pg(n,a,u,Bh,o),p===m)break;m=p}m!==null&&u.stopPropagation()}else pg(n,a,u,null,o)}}function Rg(n){return n=Es(n),kg(n)}var Bh=null;function kg(n){if(Bh=null,n=or(n),n!==null){var a=c(n);if(a===null)n=null;else{var o=a.tag;if(o===13){if(n=d(a),n!==null)return n;n=null}else if(o===31){if(n=f(a),n!==null)return n;n=null}else if(o===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return Bh=n,null}function U1(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_s()){case rr:return 2;case Pr:return 8;case wn:case Na:return 32;case Ea:return 268435456;default:return 32}default:return 32}}var Dg=!1,Ja=null,Wa=null,Za=null,du=new Map,hu=new Map,ei=[],e4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function B1(n,a){switch(n){case"focusin":case"focusout":Ja=null;break;case"dragenter":case"dragleave":Wa=null;break;case"mouseover":case"mouseout":Za=null;break;case"pointerover":case"pointerout":du.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":hu.delete(a.pointerId)}}function fu(n,a,o,u,m,p){return n===null||n.nativeEvent!==p?(n={blockedOn:a,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[m]},a!==null&&(a=Ns(a),a!==null&&L1(a)),n):(n.eventSystemFlags|=u,a=n.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),n)}function t4(n,a,o,u,m){switch(a){case"focusin":return Ja=fu(Ja,n,a,o,u,m),!0;case"dragenter":return Wa=fu(Wa,n,a,o,u,m),!0;case"mouseover":return Za=fu(Za,n,a,o,u,m),!0;case"pointerover":var p=m.pointerId;return du.set(p,fu(du.get(p)||null,n,a,o,u,m)),!0;case"gotpointercapture":return p=m.pointerId,hu.set(p,fu(hu.get(p)||null,n,a,o,u,m)),!0}return!1}function q1(n){var a=or(n.target);if(a!==null){var o=c(a);if(o!==null){if(a=o.tag,a===13){if(a=d(o),a!==null){n.blockedOn=a,Us(n.priority,function(){z1(o)});return}}else if(a===31){if(a=f(o),a!==null){n.blockedOn=a,Us(n.priority,function(){z1(o)});return}}else if(a===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function qh(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var o=Rg(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Sc=u,o.target.dispatchEvent(u),Sc=null}else return a=Ns(o),a!==null&&L1(a),n.blockedOn=o,!1;a.shift()}return!0}function F1(n,a,o){qh(n)&&o.delete(a)}function n4(){Dg=!1,Ja!==null&&qh(Ja)&&(Ja=null),Wa!==null&&qh(Wa)&&(Wa=null),Za!==null&&qh(Za)&&(Za=null),du.forEach(F1),hu.forEach(F1)}function Fh(n,a){n.blockedOn===a&&(n.blockedOn=null,Dg||(Dg=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,n4)))}var Hh=null;function H1(n){Hh!==n&&(Hh=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Hh===n&&(Hh=null);for(var a=0;a<n.length;a+=3){var o=n[a],u=n[a+1],m=n[a+2];if(typeof u!="function"){if(kg(u||o)===null)continue;break}var p=Ns(o);p!==null&&(n.splice(a,3),a-=3,R0(p,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function wo(n){function a(k){return Fh(k,n)}Ja!==null&&Fh(Ja,n),Wa!==null&&Fh(Wa,n),Za!==null&&Fh(Za,n),du.forEach(a),hu.forEach(a);for(var o=0;o<ei.length;o++){var u=ei[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ei.length&&(o=ei[0],o.blockedOn===null);)q1(o),o.blockedOn===null&&ei.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],p=o[u+1],b=m[gn]||null;if(typeof p=="function")b||H1(o);else if(b){var E=null;if(p&&p.hasAttribute("formAction")){if(m=p,b=p[gn]||null)E=b.formAction;else if(kg(m)!==null)continue}else E=b.action;typeof E=="function"?o[u+1]=E:(o.splice(u,3),u-=3),H1(o)}}}function G1(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(b){return m=b})},focusReset:"manual",scroll:"manual"})}function a(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),m!==null&&(m(),m=null)}}}function Og(n){this._internalRoot=n}Gh.prototype.render=Og.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(s(409));var o=a.current,u=hs();V1(o,u,n,a,null,null)},Gh.prototype.unmount=Og.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;V1(n.current,2,null,n,null,null),Th(),a[ir]=null}};function Gh(n){this._internalRoot=n}Gh.prototype.unstable_scheduleHydration=function(n){if(n){var a=Td();n={blockedOn:null,target:n,priority:a};for(var o=0;o<ei.length&&a!==0&&a<ei[o].priority;o++);ei.splice(o,0,n),o===0&&q1(n)}};var $1=e.version;if($1!=="19.2.0")throw Error(s(527,$1,"19.2.0"));oe.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=x(a),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var s4={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$h.isDisabled&&$h.supportsFiber)try{Ue=$h.inject(s4),Je=$h}catch{}}return gu.createRoot=function(n,a){if(!l(n))throw Error(s(299));var o=!1,u="",m=Zb,p=ev,b=tv;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError)),a=O1(n,1,!1,null,null,o,u,null,m,p,b,G1),n[ir]=a.current,gg(n),new Og(a)},gu.hydrateRoot=function(n,a,o){if(!l(n))throw Error(s(299));var u=!1,m="",p=Zb,b=ev,E=tv,k=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.formState!==void 0&&(k=o.formState)),a=O1(n,1,!0,a,o??null,u,m,k,p,b,E,G1),a.context=M1(null),o=a.current,u=hs(),u=Di(u),m=za(u),m.callback=null,Ua(o,m,u),o=u,a.current.lanes=o,ut(a,o),_r(a),n[ir]=a.current,gg(n),new Gh(a)},gu.version="19.2.0",gu}var nw;function f4(){if(nw)return Pg.exports;nw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Pg.exports=h4(),Pg.exports}var m4=f4();const g4=w2(m4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),x4=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),sw=r=>{const e=x4(r);return e.charAt(0).toUpperCase()+e.slice(1)},_2=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),y4=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var b4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=V.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:l="",children:c,iconNode:d,...f},g)=>V.createElement("svg",{ref:g,...b4,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:_2("lucide",l),...!c&&!y4(f)&&{"aria-hidden":"true"},...f},[...d.map(([x,v])=>V.createElement(x,v)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=(r,e)=>{const t=V.forwardRef(({className:s,...l},c)=>V.createElement(v4,{ref:c,iconNode:e,className:_2(`lucide-${p4(sw(r))}`,`lucide-${r}`,s),...l}));return t.displayName=sw(r),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],rw=pe("activity",w4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],vf=pe("arrow-left",_4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],qt=pe("arrow-right",N4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],ld=pe("award",E4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Kh=pe("bell",T4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ns=pe("book-open",S4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Uu=pe("book",j4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],N2=pe("brain",A4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],C4=pe("briefcase",I4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Bu=pe("calendar",R4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],E2=pe("chart-column",k4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],bl=pe("chevron-down",D4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ra=pe("chevron-left",O4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Bg=pe("chevron-right",M4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],wf=pe("circle-alert",V4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],da=pe("circle-check-big",P4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],bn=pe("circle-check",L4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],U4=pe("circle-play",z4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],aw=pe("circle-plus",B4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],oa=pe("circle-question-mark",q4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],H4=pe("circle-user",F4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],$4=pe("circle-x",G4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ax=pe("clock",K4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],X4=pe("cloud-download",Q4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],T2=pe("cloud-upload",Y4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],ac=pe("crown",J4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],mp=pe("download",W4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gp=pe("eye",Z4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],pp=pe("facebook",e5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],n5=pe("file-check",t5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],r5=pe("file-plus",s5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],i5=pe("file-search",a5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ss=pe("file-text",l5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],ix=pe("flag",o5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],_f=pe("flame",c5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],ko=pe("folder-open",u5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],h5=pe("globe",d5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],ha=pe("graduation-cap",f5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Nf=pe("house",m5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],S2=pe("info",g5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],tm=pe("languages",p5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],qu=pe("layers",x5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],iw=pe("layout-dashboard",y5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],v5=pe("link",b5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],_5=pe("list",w5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],bt=pe("loader-circle",N5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],xp=pe("log-in",E5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ii=pe("lock",T5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Ef=pe("log-out",S5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Tr=pe("mail",j5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],yp=pe("map-pin",A5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],bp=pe("medal",I5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],lw=pe("megaphone",C5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],k5=pe("menu",R5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Fu=pe("message-circle",D5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],nm=pe("message-square",O5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Hu=pe("monitor",M5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],j2=pe("move-right",V5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],L5=pe("octagon-alert",P5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],ow=pe("palette",z5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],B5=pe("pen-line",U5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],lx=pe("pen-tool",q5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],H5=pe("percent",F5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],$5=pe("quote",G5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],sm=pe("refresh-cw",K5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],X5=pe("rocket",Q5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],A2=pe("rotate-ccw",Y5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],mi=pe("save",J5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],ox=pe("school",W5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],zs=pe("search",Z5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ca=pe("send",eA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],nA=pe("shield-alert",tA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],I2=pe("shield-check",sA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],aA=pe("smartphone",rA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],lA=pe("sparkles",iA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],vp=pe("square-pen",oA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],vl=pe("star",cA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],C2=pe("tag",uA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],cx=pe("target",dA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],fA=pe("text-align-start",hA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],gA=pe("timer",mA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],wi=pe("trash-2",pA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],yA=pe("trending-up",xA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ux=pe("triangle-alert",bA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Oo=pe("trophy",vA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],_A=pe("type",wA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Zn=pe("user",NA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],rm=pe("users",EA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],SA=pe("wifi-off",TA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ms=pe("x",jA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],am=pe("zap",AA),IA=()=>{};var cw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?e[t++]=l:l<2048?(e[t++]=l>>6|192,e[t++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=l>>18|240,e[t++]=l>>12&63|128,e[t++]=l>>6&63|128,e[t++]=l&63|128):(e[t++]=l>>12|224,e[t++]=l>>6&63|128,e[t++]=l&63|128)}return e},CA=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const l=r[t++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[t++];e[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[t++],d=r[t++],f=r[t++],g=((l&7)<<18|(c&63)<<12|(d&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[t++],d=r[t++];e[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return e.join("")},k2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,f=d?r[l+1]:0,g=l+2<r.length,x=g?r[l+2]:0,v=c>>2,w=(c&3)<<4|f>>4;let N=(f&15)<<2|x>>6,C=x&63;g||(C=64,d||(N=64)),s.push(t[v],t[w],t[N],t[C])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(R2(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):CA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=t[r.charAt(l++)],f=l<r.length?t[r.charAt(l)]:0;++l;const x=l<r.length?t[r.charAt(l)]:64;++l;const w=l<r.length?t[r.charAt(l)]:64;if(++l,c==null||f==null||x==null||w==null)throw new RA;const N=c<<2|f>>4;if(s.push(N),x!==64){const C=f<<4&240|x>>2;if(s.push(C),w!==64){const M=x<<6&192|w;s.push(M)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class RA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kA=function(r){const e=R2(r);return k2.encodeByteArray(e,!0)},D2=function(r){return kA(r).replace(/\./g,"")},O2=function(r){try{return k2.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=()=>M2().__FIREBASE_DEFAULTS__,OA=()=>{if(typeof process>"u"||typeof cw>"u")return;const r=cw.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},MA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&O2(r[1]);return e&&JSON.parse(e)},im=()=>{try{return IA()||DA()||OA()||MA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},VA=r=>{var e,t;return(t=(e=im())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},V2=()=>{var r;return(r=im())==null?void 0:r.config},P2=r=>{var e;return(e=im())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function L2(r){return(await fetch(r,{credentials:"include"})).ok}const Au={};function LA(){const r={prod:[],emulator:[]};for(const e of Object.keys(Au))Au[e]?r.emulator.push(e):r.prod.push(e);return r}function zA(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let uw=!1;function UA(r,e){if(typeof window>"u"||typeof document>"u"||!ic(window.location.host)||Au[r]===e||Au[r]||uw)return;Au[r]=e;function t(N){return`__firebase__banner__${N}`}const s="__firebase__banner",c=LA().prod.length>0;function d(){const N=document.getElementById(s);N&&N.remove()}function f(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function g(N,C){N.setAttribute("width","24"),N.setAttribute("id",C),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function x(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{uw=!0,d()},N}function v(N,C){N.setAttribute("id",C),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function w(){const N=zA(s),C=t("text"),M=document.getElementById(C)||document.createElement("span"),Z=t("learnmore"),B=document.getElementById(Z)||document.createElement("a"),me=t("preprendIcon"),ce=document.getElementById(me)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const le=N.element;f(le),v(B,Z);const _e=x();g(ce,me),le.append(ce,M,B,_e),document.body.appendChild(le)}c?(M.innerText="Preview backend disconnected.",ce.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ce.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function z2(){var e;const r=(e=im())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function U2(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function FA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HA(){const r=dn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function B2(){return!z2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q2(){return!z2()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function dx(){try{return typeof indexedDB=="object"}catch{return!1}}function F2(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{t=!1},l.onerror=()=>{var c;e(((c=l.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}function GA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="FirebaseError";class tr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=$A,Object.setPrototypeOf(this,tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kl.prototype.create)}}class kl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},l=`${this.service}/${e}`,c=this.errors[e],d=c?KA(c,s):"Error",f=`${this.serviceName}: ${d} (${l}).`;return new tr(l,f,s)}}function KA(r,e){return r.replace(QA,(t,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const QA=/\{\$([^}]+)}/g;function XA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function _i(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const l of t){if(!s.includes(l))return!1;const c=r[l],d=e[l];if(dw(c)&&dw(d)){if(!_i(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!t.includes(l))return!1;return!0}function dw(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function wu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,c]=s.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function _u(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function YA(r,e){const t=new JA(r,e);return t.subscribe.bind(t)}class JA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let l;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");WA(e,["next","error","complete"])?l=e:l={next:e,error:t,complete:s},l.next===void 0&&(l.next=qg),l.error===void 0&&(l.error=qg),l.complete===void 0&&(l.complete=qg);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WA(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function qg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=1e3,eI=2,tI=14400*1e3,nI=.5;function hw(r,e=ZA,t=eI){const s=e*Math.pow(t,r),l=Math.round(nI*s*(Math.random()-.5)*2);return Math.min(tI,s+l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(r){return r&&r._delegate?r._delegate:r}class Ws{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new PA;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:t});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aI(e))try{this.getOrInitializeService({instanceIdentifier:il})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(e=il){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=il){return this.instances.has(e)}getOptions(e=il){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(c);s===f&&d.resolve(l)}return l}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),l=this.onInitCallbacks.get(s)??new Set;l.add(e),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&e(c,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const l of s)try{l(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:rI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=il){return this.component?this.component.multipleInstances?e:il:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rI(r){return r===il?void 0:r}function aI(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new sI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(tt||(tt={}));const lI={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},oI=tt.INFO,cI={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},uI=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),l=cI[e];if(l)console[l](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lm{constructor(e){this.name=e,this._logLevel=oI,this._logHandler=uI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const dI=(r,e)=>e.some(t=>r instanceof t);let fw,mw;function hI(){return fw||(fw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fI(){return mw||(mw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const H2=new WeakMap,wp=new WeakMap,G2=new WeakMap,Fg=new WeakMap,hx=new WeakMap;function mI(r){const e=new Promise((t,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{t(gi(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&H2.set(t,r)}).catch(()=>{}),hx.set(e,r),e}function gI(r){if(wp.has(r))return;const e=new Promise((t,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{t(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});wp.set(r,e)}let _p={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return wp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||G2.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return gi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function pI(r){_p=r(_p)}function xI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Hg(this),e,...t);return G2.set(s,e.sort?e.sort():[e]),gi(s)}:fI().includes(r)?function(...e){return r.apply(Hg(this),e),gi(H2.get(this))}:function(...e){return gi(r.apply(Hg(this),e))}}function yI(r){return typeof r=="function"?xI(r):(r instanceof IDBTransaction&&gI(r),dI(r,hI())?new Proxy(r,_p):r)}function gi(r){if(r instanceof IDBRequest)return mI(r);if(Fg.has(r))return Fg.get(r);const e=yI(r);return e!==r&&(Fg.set(r,e),hx.set(e,r)),e}const Hg=r=>hx.get(r);function $2(r,e,{blocked:t,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,e),f=gi(d);return s&&d.addEventListener("upgradeneeded",g=>{s(gi(d.result),g.oldVersion,g.newVersion,gi(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",x=>l(x.oldVersion,x.newVersion,x))}).catch(()=>{}),f}const bI=["get","getKey","getAll","getAllKeys","count"],vI=["put","add","delete","clear"],Gg=new Map;function gw(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Gg.get(e))return Gg.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,l=vI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(l||bI.includes(t)))return;const c=async function(d,...f){const g=this.transaction(d,l?"readwrite":"readonly");let x=g.store;return s&&(x=x.index(f.shift())),(await Promise.all([x[t](...f),l&&g.done]))[0]};return Gg.set(e,c),c}pI(r=>({...r,get:(e,t,s)=>gw(e,t)||r.get(e,t,s),has:(e,t)=>!!gw(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(_I(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function _I(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Np="@firebase/app",pw="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=new lm("@firebase/app"),NI="@firebase/app-compat",EI="@firebase/analytics-compat",TI="@firebase/analytics",SI="@firebase/app-check-compat",jI="@firebase/app-check",AI="@firebase/auth",II="@firebase/auth-compat",CI="@firebase/database",RI="@firebase/data-connect",kI="@firebase/database-compat",DI="@firebase/functions",OI="@firebase/functions-compat",MI="@firebase/installations",VI="@firebase/installations-compat",PI="@firebase/messaging",LI="@firebase/messaging-compat",zI="@firebase/performance",UI="@firebase/performance-compat",BI="@firebase/remote-config",qI="@firebase/remote-config-compat",FI="@firebase/storage",HI="@firebase/storage-compat",GI="@firebase/firestore",$I="@firebase/ai",KI="@firebase/firestore-compat",QI="firebase",XI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="[DEFAULT]",YI={[Np]:"fire-core",[NI]:"fire-core-compat",[TI]:"fire-analytics",[EI]:"fire-analytics-compat",[jI]:"fire-app-check",[SI]:"fire-app-check-compat",[AI]:"fire-auth",[II]:"fire-auth-compat",[CI]:"fire-rtdb",[RI]:"fire-data-connect",[kI]:"fire-rtdb-compat",[DI]:"fire-fn",[OI]:"fire-fn-compat",[MI]:"fire-iid",[VI]:"fire-iid-compat",[PI]:"fire-fcm",[LI]:"fire-fcm-compat",[zI]:"fire-perf",[UI]:"fire-perf-compat",[BI]:"fire-rc",[qI]:"fire-rc-compat",[FI]:"fire-gcs",[HI]:"fire-gcs-compat",[GI]:"fire-fst",[KI]:"fire-fst-compat",[$I]:"fire-vertex","fire-js":"fire-js",[QI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf=new Map,JI=new Map,Tp=new Map;function xw(r,e){try{r.container.addComponent(e)}catch(t){fa.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function kr(r){const e=r.name;if(Tp.has(e))return fa.debug(`There were multiple attempts to register component ${e}.`),!1;Tp.set(e,r);for(const t of Tf.values())xw(t,r);for(const t of JI.values())xw(t,r);return!0}function Dl(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Ms(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pi=new kl("app","Firebase",WI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=XI;function K2(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Ep,automaticDataCollectionEnabled:!0,...e},l=s.name;if(typeof l!="string"||!l)throw pi.create("bad-app-name",{appName:String(l)});if(t||(t=V2()),!t)throw pi.create("no-options");const c=Tf.get(l);if(c){if(_i(t,c.options)&&_i(s,c.config))return c;throw pi.create("duplicate-app",{appName:l})}const d=new iI(l);for(const g of Tp.values())d.addComponent(g);const f=new ZI(t,s,d);return Tf.set(l,f),f}function Q2(r=Ep){const e=Tf.get(r);if(!e&&r===Ep&&V2())return K2();if(!e)throw pi.create("no-app",{appName:r});return e}function Ps(r,e,t){let s=YI[r]??r;t&&(s+=`-${t}`);const l=s.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${s}" with version "${e}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fa.warn(d.join(" "));return}kr(new Ws(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3="firebase-heartbeat-database",t3=1,Gu="firebase-heartbeat-store";let $g=null;function X2(){return $g||($g=$2(e3,t3,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Gu)}catch(t){console.warn(t)}}}}).catch(r=>{throw pi.create("idb-open",{originalErrorMessage:r.message})})),$g}async function n3(r){try{const t=(await X2()).transaction(Gu),s=await t.objectStore(Gu).get(Y2(r));return await t.done,s}catch(e){if(e instanceof tr)fa.warn(e.message);else{const t=pi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fa.warn(t.message)}}}async function yw(r,e){try{const s=(await X2()).transaction(Gu,"readwrite");await s.objectStore(Gu).put(e,Y2(r)),await s.done}catch(t){if(t instanceof tr)fa.warn(t.message);else{const s=pi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});fa.warn(s.message)}}}function Y2(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3=1024,r3=30;class a3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new l3(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=bw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>r3){const d=o3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){fa.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=bw(),{heartbeatsToSend:s,unsentEntries:l}=i3(this._heartbeatsCache.heartbeats),c=D2(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return fa.warn(t),""}}}function bw(){return new Date().toISOString().substring(0,10)}function i3(r,e=s3){const t=[];let s=r.slice();for(const l of r){const c=t.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),vw(t)>e){c.dates.pop();break}}else if(t.push({agent:l.agent,dates:[l.date]}),vw(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class l3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dx()?F2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await n3(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return yw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return yw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function vw(r){return D2(JSON.stringify({version:2,heartbeats:r})).length}function o3(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(r){kr(new Ws("platform-logger",e=>new wI(e),"PRIVATE")),kr(new Ws("heartbeat",e=>new a3(e),"PRIVATE")),Ps(Np,pw,r),Ps(Np,pw,"esm2020"),Ps("fire-js","")}c3("");var u3="firebase",d3="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ps(u3,d3,"app");function J2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const h3=J2,W2=new kl("auth","Firebase",J2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=new lm("@firebase/auth");function f3(r,...e){Sf.logLevel<=tt.WARN&&Sf.warn(`Auth (${lc}): ${r}`,...e)}function sf(r,...e){Sf.logLevel<=tt.ERROR&&Sf.error(`Auth (${lc}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(r,...e){throw fx(r,...e)}function Ar(r,...e){return fx(r,...e)}function Z2(r,e,t){const s={...h3(),[e]:t};return new kl("auth","Firebase",s).create(e,{appName:r.name})}function ua(r){return Z2(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fx(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return W2.create(r,...e)}function Pe(r,e,...t){if(!r)throw fx(e,...t)}function aa(r){const e="INTERNAL ASSERTION FAILED: "+r;throw sf(e),new Error(e)}function ma(r,e){r||aa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function m3(){return ww()==="http:"||ww()==="https:"}function ww(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(m3()||U2()||"connection"in navigator)?navigator.onLine:!0}function p3(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t){this.shortDelay=e,this.longDelay=t,ma(t>e,"Short delay should be less than long delay!"),this.isMobile=BA()||FA()}get(){return g3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(r,e){ma(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;aa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;aa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;aa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],b3=new cd(3e4,6e4);function xa(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ya(r,e,t,s,l={}){return tN(r,l,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const f=od({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const x={method:e,headers:g,...c};return qA()||(x.referrerPolicy="no-referrer"),r.emulatorConfig&&ic(r.emulatorConfig.host)&&(x.credentials="include"),eN.fetch()(await nN(r,r.config.apiHost,t,f),x)})}async function tN(r,e,t){r._canInitEmulator=!1;const s={...x3,...e};try{const l=new w3(r),c=await Promise.race([t(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Qh(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const f=c.ok?d.errorMessage:d.error.message,[g,x]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qh(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Qh(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw Qh(r,"user-disabled",d);const v=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw Z2(r,v,x);Zs(r,v)}}catch(l){if(l instanceof tr)throw l;Zs(r,"network-request-failed",{message:String(l)})}}async function ud(r,e,t,s,l={}){const c=await ya(r,e,t,s,l);return"mfaPendingCredential"in c&&Zs(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function nN(r,e,t,s){const l=`${e}${t}?${s}`,c=r,d=c.config.emulator?mx(r.config,l):`${r.config.apiScheme}://${l}`;return y3.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function v3(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class w3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Ar(this.auth,"network-request-failed")),b3.get())})}}function Qh(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const l=Ar(r,e,s);return l.customData._tokenResponse=t,l}function _w(r){return r!==void 0&&r.enterprise!==void 0}class _3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return v3(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function N3(r,e){return ya(r,"GET","/v2/recaptchaConfig",xa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E3(r,e){return ya(r,"POST","/v1/accounts:delete",e)}async function jf(r,e){return ya(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function T3(r,e=!1){const t=Wt(r),s=await t.getIdToken(e),l=gx(s);Pe(l&&l.exp&&l.auth_time&&l.iat,t.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:l,token:s,authTime:Iu(Kg(l.auth_time)),issuedAtTime:Iu(Kg(l.iat)),expirationTime:Iu(Kg(l.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Kg(r){return Number(r)*1e3}function gx(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return sf("JWT malformed, contained fewer than 3 sections"),null;try{const l=O2(t);return l?JSON.parse(l):(sf("Failed to decode base64 JWT payload"),null)}catch(l){return sf("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function Nw(r){const e=gx(r);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $u(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof tr&&S3(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function S3({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Iu(this.lastLoginAt),this.creationTime=Iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Af(r){var w;const e=r.auth,t=await r.getIdToken(),s=await $u(r,jf(e,{idToken:t}));Pe(s==null?void 0:s.users.length,e,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=(w=l.providerUserInfo)!=null&&w.length?sN(l.providerUserInfo):[],d=I3(r.providerData,c),f=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!(d!=null&&d.length),x=f?g:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new jp(l.createdAt,l.lastLoginAt),isAnonymous:x};Object.assign(r,v)}async function A3(r){const e=Wt(r);await Af(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function I3(r,e){return[...r.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function sN(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C3(r,e){const t=await tN(r,{},async()=>{const s=od({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await nN(r,l,"/v1/token",`key=${c}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return r.emulatorConfig&&ic(r.emulatorConfig.host)&&(g.credentials="include"),eN.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function R3(r,e){return ya(r,"POST","/v2/accounts:revokeToken",xa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Nw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=Nw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:l,expiresIn:c}=await C3(e,t);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:l,expirationTime:c}=t,d=new Mo;return s&&(Pe(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),l&&(Pe(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),c&&(Pe(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mo,this.toJSON())}_performRefresh(){return aa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(r,e){Pe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Js{constructor({uid:e,auth:t,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new j3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new jp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await $u(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return T3(this,e)}reload(){return A3(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Js({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Af(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ms(this.auth.app))return Promise.reject(ua(this.auth));const e=await this.getIdToken();return await $u(this,E3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,l=t.email??void 0,c=t.phoneNumber??void 0,d=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,x=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:w,emailVerified:N,isAnonymous:C,providerData:M,stsTokenManager:Z}=t;Pe(w&&Z,e,"internal-error");const B=Mo.fromJSON(this.name,Z);Pe(typeof w=="string",e,"internal-error"),ni(s,e.name),ni(l,e.name),Pe(typeof N=="boolean",e,"internal-error"),Pe(typeof C=="boolean",e,"internal-error"),ni(c,e.name),ni(d,e.name),ni(f,e.name),ni(g,e.name),ni(x,e.name),ni(v,e.name);const me=new Js({uid:w,auth:e,email:l,emailVerified:N,displayName:s,isAnonymous:C,photoURL:d,phoneNumber:c,tenantId:f,stsTokenManager:B,createdAt:x,lastLoginAt:v});return M&&Array.isArray(M)&&(me.providerData=M.map(ce=>({...ce}))),g&&(me._redirectEventId=g),me}static async _fromIdTokenResponse(e,t,s=!1){const l=new Mo;l.updateFromServerResponse(t);const c=new Js({uid:t.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await Af(c),c}static async _fromGetAccountInfoResponse(e,t,s){const l=t.users[0];Pe(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?sN(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!(c!=null&&c.length),f=new Mo;f.updateFromIdToken(s);const g=new Js({uid:l.localId,auth:e,stsTokenManager:f,isAnonymous:d}),x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new jp(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,x),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=new Map;function ia(r){ma(r instanceof Function,"Expected a class definition");let e=Ew.get(r);return e?(ma(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Ew.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}rN.type="NONE";const Tw=rN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(r,e,t){return`firebase:${r}:${e}:${t}`}class Vo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=rf(this.userKey,l.apiKey,c),this.fullPersistenceKey=rf("persistence",l.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await jf(this.auth,{idToken:e}).catch(()=>{});return t?Js._fromGetAccountInfoResponse(this.auth,t,e):null}return Js._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Vo(ia(Tw),e,s);const l=(await Promise.all(t.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let c=l[0]||ia(Tw);const d=rf(s,e.config.apiKey,e.name);let f=null;for(const x of t)try{const v=await x._get(d);if(v){let w;if(typeof v=="string"){const N=await jf(e,{idToken:v}).catch(()=>{});if(!N)break;w=await Js._fromGetAccountInfoResponse(e,N,v)}else w=Js._fromJSON(e,v);x!==c&&(f=w),c=x;break}}catch{}const g=l.filter(x=>x._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Vo(c,e,s):(c=g[0],f&&await c._set(d,f.toJSON()),await Promise.all(t.map(async x=>{if(x!==c)try{await x._remove(d)}catch{}})),new Vo(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uN(e))return"Blackberry";if(dN(e))return"Webos";if(iN(e))return"Safari";if((e.includes("chrome/")||lN(e))&&!e.includes("edge/"))return"Chrome";if(cN(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function aN(r=dn()){return/firefox\//i.test(r)}function iN(r=dn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lN(r=dn()){return/crios\//i.test(r)}function oN(r=dn()){return/iemobile/i.test(r)}function cN(r=dn()){return/android/i.test(r)}function uN(r=dn()){return/blackberry/i.test(r)}function dN(r=dn()){return/webos/i.test(r)}function px(r=dn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function k3(r=dn()){var e;return px(r)&&!!((e=window.navigator)!=null&&e.standalone)}function D3(){return HA()&&document.documentMode===10}function hN(r=dn()){return px(r)||cN(r)||dN(r)||uN(r)||/windows phone/i.test(r)||oN(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(r,e=[]){let t;switch(r){case"Browser":t=Sw(dn());break;case"Worker":t=`${Sw(dn())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${lc}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((d,f)=>{try{const g=e(c);d(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const l of t)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M3(r,e={}){return ya(r,"GET","/v2/passwordPolicy",xa(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3=6;class P3{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??V3,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),l&&(t.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e,t,s,l){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jw(this),this.idTokenSubscription=new jw(this),this.beforeStateQueue=new O3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=W2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ia(t)),this._initializationPromise=this.queue(async()=>{var s,l,c;if(!this._deleted&&(this.persistenceManager=await Vo.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((l=this._popupRedirectResolver)!=null&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await jf(this,{idToken:e}),s=await Js._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(Ms(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(c=this.redirectUser)==null?void 0:c._redirectEventId,f=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===f)&&(g!=null&&g.user)&&(s=g.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(d){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Af(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=p3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ms(this.app))return Promise.reject(ua(this));const t=e?Wt(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ms(this.app)?Promise.reject(ua(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ms(this.app)?Promise.reject(ua(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ia(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await M3(this),t=new P3(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new kl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await R3(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ia(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await Vo.create(this,[ia(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,l){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(f,this,"internal-error"),f.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,l);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var l;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((l=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:l.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Ms(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&f3(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ji(r){return Wt(r)}class jw{constructor(e){this.auth=e,this.observer=null,this.addObserver=YA(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let om={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function z3(r){om=r}function mN(r){return om.loadJS(r)}function U3(){return om.recaptchaEnterpriseScript}function B3(){return om.gapiScript}function q3(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class F3{constructor(){this.enterprise=new H3}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class H3{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const G3="recaptcha-enterprise",gN="NO_RECAPTCHA";class $3{constructor(e){this.type=G3,this.auth=ji(e)}async verify(e="verify",t=!1){async function s(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,f)=>{N3(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const x=new _3(g);return c.tenantId==null?c._agentRecaptchaConfig=x:c._tenantRecaptchaConfigs[c.tenantId]=x,d(x.siteKey)}}).catch(g=>{f(g)})})}function l(c,d,f){const g=window.grecaptcha;_w(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(x=>{d(x)}).catch(()=>{d(gN)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new F3().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(f=>{if(!t&&_w(window.grecaptcha))l(f,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=U3();g.length!==0&&(g+=f),mN(g).then(()=>{l(f,c,d)}).catch(x=>{d(x)})}}).catch(f=>{d(f)})})}}async function Aw(r,e,t,s=!1,l=!1){const c=new $3(r);let d;if(l)d=gN;else try{d=await c.verify(t)}catch{d=await c.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const g=f.phoneEnrollmentInfo.phoneNumber,x=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:x,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const g=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:d}):Object.assign(f,{captchaResponse:d}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function If(r,e,t,s,l){var c;if((c=r._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await Aw(r,e,t,t==="getOobCode");return s(r,d)}else return s(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Aw(r,e,t,t==="getOobCode");return s(r,f)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K3(r,e){const t=Dl(r,"auth");if(t.isInitialized()){const l=t.getImmediate(),c=t.getOptions();if(_i(c,e??{}))return l;Zs(l,"already-initialized")}return t.initialize({options:e})}function Q3(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(ia);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function X3(r,e,t){const s=ji(r);Pe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,c=pN(e),{host:d,port:f}=Y3(e),g=f===null?"":`:${f}`,x={url:`${c}//${d}${g}/`},v=Object.freeze({host:d,port:f,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){Pe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Pe(_i(x,s.config.emulator)&&_i(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=x,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,ic(d)?(L2(`${c}//${d}${g}`),UA("Auth",!0)):J3()}function pN(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Y3(r){const e=pN(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:Iw(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:Iw(d)}}}function Iw(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function J3(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return aa("not implemented")}_getIdTokenResponse(e){return aa("not implemented")}_linkToIdToken(e,t){return aa("not implemented")}_getReauthenticationResolver(e){return aa("not implemented")}}async function W3(r,e){return ya(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z3(r,e){return ud(r,"POST","/v1/accounts:signInWithPassword",xa(r,e))}async function eC(r,e){return ya(r,"POST","/v1/accounts:sendOobCode",xa(r,e))}async function tC(r,e){return eC(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nC(r,e){return ud(r,"POST","/v1/accounts:signInWithEmailLink",xa(r,e))}async function sC(r,e){return ud(r,"POST","/v1/accounts:signInWithEmailLink",xa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku extends xx{constructor(e,t,s,l=null){super("password",s),this._email=e,this._password=t,this._tenantId=l}static _fromEmailAndPassword(e,t){return new Ku(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Ku(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return If(e,t,"signInWithPassword",Z3);case"emailLink":return nC(e,{email:this._email,oobCode:this._password});default:Zs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return If(e,s,"signUpPassword",W3);case"emailLink":return sC(e,{idToken:t,email:this._email,oobCode:this._password});default:Zs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Po(r,e){return ud(r,"POST","/v1/accounts:signInWithIdp",xa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="http://localhost";class wl extends xx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Zs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l,...c}=t;if(!s||!l)return null;const d=new wl(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Po(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Po(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Po(e,t)}buildRequest(){const e={requestUri:rC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=od(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iC(r){const e=wu(_u(r)).link,t=e?wu(_u(e)).deep_link_id:null,s=wu(_u(r)).deep_link_id;return(s?wu(_u(s)).link:null)||s||t||e||r}class yx{constructor(e){const t=wu(_u(e)),s=t.apiKey??null,l=t.oobCode??null,c=aC(t.mode??null);Pe(s&&l&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=l,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=iC(e);try{return new yx(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(){this.providerId=oc.PROVIDER_ID}static credential(e,t){return Ku._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=yx.parseLink(t);return Pe(s,"argument-error"),Ku._fromEmailAndCode(e,s.code,s.tenantId)}}oc.PROVIDER_ID="password";oc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";oc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd extends xN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends dd{constructor(){super("facebook.com")}static credential(e){return wl._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return li.credential(e.oauthAccessToken)}catch{return null}}}li.FACEBOOK_SIGN_IN_METHOD="facebook.com";li.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends dd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wl._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return oi.credential(t,s)}catch{return null}}}oi.GOOGLE_SIGN_IN_METHOD="google.com";oi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends dd{constructor(){super("github.com")}static credential(e){return wl._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch{return null}}}ci.GITHUB_SIGN_IN_METHOD="github.com";ci.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends dd{constructor(){super("twitter.com")}static credential(e,t){return wl._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ui.credential(t,s)}catch{return null}}}ui.TWITTER_SIGN_IN_METHOD="twitter.com";ui.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lC(r,e){return ud(r,"POST","/v1/accounts:signUp",xa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,l=!1){const c=await Js._fromIdTokenResponse(e,s,l),d=Cw(s);return new _l({user:c,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const l=Cw(s);return new _l({user:e,providerId:l,_tokenResponse:s,operationType:t})}}function Cw(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf extends tr{constructor(e,t,s,l){super(t.code,t.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Cf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,l){return new Cf(e,t,s,l)}}function yN(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Cf._fromErrorAndOperation(r,c,e,s):c})}async function oC(r,e,t=!1){const s=await $u(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return _l._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cC(r,e,t=!1){const{auth:s}=r;if(Ms(s.app))return Promise.reject(ua(s));const l="reauthenticate";try{const c=await $u(r,yN(s,l,e,r),t);Pe(c.idToken,s,"internal-error");const d=gx(c.idToken);Pe(d,s,"internal-error");const{sub:f}=d;return Pe(r.uid===f,s,"user-mismatch"),_l._forOperation(r,l,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Zs(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(r,e,t=!1){if(Ms(r.app))return Promise.reject(ua(r));const s="signIn",l=await yN(r,s,e),c=await _l._fromIdTokenResponse(r,s,l);return t||await r._updateCurrentUser(c.user),c}async function uC(r,e){return bN(ji(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vN(r){const e=ji(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dC(r,e,t){const s=ji(r);await If(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",tC)}async function hC(r,e,t){if(Ms(r.app))return Promise.reject(ua(r));const s=ji(r),d=await If(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&vN(r),g}),f=await _l._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(f.user),f}function fC(r,e,t){return Ms(r.app)?Promise.reject(ua(r)):uC(Wt(r),oc.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&vN(r),s})}function mC(r,e,t,s){return Wt(r).onIdTokenChanged(e,t,s)}function gC(r,e,t){return Wt(r).beforeAuthStateChanged(e,t)}function pC(r,e,t,s){return Wt(r).onAuthStateChanged(e,t,s)}function xC(r){return Wt(r).signOut()}const Rf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Rf,"1"),this.storage.removeItem(Rf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=1e3,bC=10;class _N extends wN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),l=this.localCache[t];s!==l&&e(t,l,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,f,g)=>{this.notifyListeners(d,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);D3()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,bC):l()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},yC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}_N.type="LOCAL";const vC=_N;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN extends wN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}NN.type="SESSION";const EN=NN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(l=>l.isListeningto(e));if(t)return t;const s=new cm(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:l,data:c}=t.data,d=this.handlersMap[l];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const f=Array.from(d).map(async x=>x(t.origin,c)),g=await wC(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((f,g)=>{const x=bx("",20);l.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(w){const N=w;if(N.data.eventId===x)switch(N.data.status){case"ack":clearTimeout(v),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),f(N.data.response);break;default:clearTimeout(v),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:x,data:t},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(){return window}function NC(r){Ir().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(){return typeof Ir().WorkerGlobalScope<"u"&&typeof Ir().importScripts=="function"}async function EC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TC(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function SC(){return TN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN="firebaseLocalStorageDb",jC=1,kf="firebaseLocalStorage",jN="fbase_key";class hd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function um(r,e){return r.transaction([kf],e?"readwrite":"readonly").objectStore(kf)}function AC(){const r=indexedDB.deleteDatabase(SN);return new hd(r).toPromise()}function Ap(){const r=indexedDB.open(SN,jC);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(kf,{keyPath:jN})}catch(l){t(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(kf)?e(s):(s.close(),await AC(),e(await Ap()))})})}async function Rw(r,e,t){const s=um(r,!0).put({[jN]:e,value:t});return new hd(s).toPromise()}async function IC(r,e){const t=um(r,!1).get(e),s=await new hd(t).toPromise();return s===void 0?null:s.value}function kw(r,e){const t=um(r,!0).delete(e);return new hd(t).toPromise()}const CC=800,RC=3;class AN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ap(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>RC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cm._getInstance(SC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await EC(),!this.activeServiceWorker)return;this.sender=new _C(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||TC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ap();return await Rw(e,Rf,"1"),await kw(e,Rf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Rw(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>IC(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>kw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=um(l,!1).getAll();return new hd(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),t.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),t.push(l));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}AN.type="LOCAL";const kC=AN;new cd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(r,e){return e?ia(e):(Pe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx extends xx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Po(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Po(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Po(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function OC(r){return bN(r.auth,new vx(r),r.bypassAuthState)}function MC(r){const{auth:e,user:t}=r;return Pe(t,e,"internal-error"),cC(t,new vx(r),r.bypassAuthState)}async function VC(r){const{auth:e,user:t}=r;return Pe(t,e,"internal-error"),oC(t,new vx(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,t,s,l,c=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:l,tenantId:c,error:d,type:f}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OC;case"linkViaPopup":case"linkViaRedirect":return VC;case"reauthViaPopup":case"reauthViaRedirect":return MC;default:Zs(this.auth,"internal-error")}}resolve(e){ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=new cd(2e3,1e4);class Do extends IN{constructor(e,t,s,l,c){super(e,t,l,c),this.provider=s,this.authWindow=null,this.pollId=null,Do.currentPopupAction&&Do.currentPopupAction.cancel(),Do.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){ma(this.filter.length===1,"Popup operations only handle one event");const e=bx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Do.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,PC.get())};e()}}Do.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="pendingRedirect",af=new Map;class zC extends IN{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=af.get(this.auth._key());if(!e){try{const s=await UC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}af.set(this.auth._key(),e)}return this.bypassAuthState||af.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function UC(r,e){const t=FC(e),s=qC(r);if(!await s._isAvailable())return!1;const l=await s._get(t)==="true";return await s._remove(t),l}function BC(r,e){af.set(r._key(),e)}function qC(r){return ia(r._redirectPersistence)}function FC(r){return rf(LC,r.config.apiKey,r.name)}async function HC(r,e,t=!1){if(Ms(r.app))return Promise.reject(ua(r));const s=ji(r),l=DC(s,e),d=await new zC(s,l,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=600*1e3;class $C{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!CN(e)){const l=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Ar(this.auth,l))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=GC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dw(e))}saveEventToCache(e){this.cachedEventUids.add(Dw(e)),this.lastProcessedEventTime=Date.now()}}function Dw(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function CN({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function KC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CN(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QC(r,e={}){return ya(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YC=/^https?/;async function JC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await QC(r);for(const t of e)try{if(WC(t))return}catch{}Zs(r,"unauthorized-domain")}function WC(r){const e=Sp(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!YC.test(t))return!1;if(XC.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=new cd(3e4,6e4);function Ow(){const r=Ir().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function eR(r){return new Promise((e,t)=>{var l,c,d;function s(){Ow(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ow(),t(Ar(r,"network-request-failed"))},timeout:ZC.get()})}if((c=(l=Ir().gapi)==null?void 0:l.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((d=Ir().gapi)!=null&&d.load)s();else{const f=q3("iframefcb");return Ir()[f]=()=>{gapi.load?s():t(Ar(r,"network-request-failed"))},mN(`${B3()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw lf=null,e})}let lf=null;function tR(r){return lf=lf||eR(r),lf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=new cd(5e3,15e3),sR="__/auth/iframe",rR="emulator/auth/iframe",aR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lR(r){const e=r.config;Pe(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?mx(e,rR):`https://${r.config.authDomain}/${sR}`,s={apiKey:e.apiKey,appName:r.name,v:lc},l=iR.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${od(s).slice(1)}`}async function oR(r){const e=await tR(r),t=Ir().gapi;return Pe(t,r,"internal-error"),e.open({where:document.body,url:lR(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aR,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=Ar(r,"network-request-failed"),f=Ir().setTimeout(()=>{c(d)},nR.get());function g(){Ir().clearTimeout(f),l(s)}s.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uR=500,dR=600,hR="_blank",fR="http://localhost";class Mw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mR(r,e,t,s=uR,l=dR){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...cR,width:s.toString(),height:l.toString(),top:c,left:d},x=dn().toLowerCase();t&&(f=lN(x)?hR:t),aN(x)&&(e=e||fR,g.scrollbars="yes");const v=Object.entries(g).reduce((N,[C,M])=>`${N}${C}=${M},`,"");if(k3(x)&&f!=="_self")return gR(e||"",f),new Mw(null);const w=window.open(e||"",f,v);Pe(w,r,"popup-blocked");try{w.focus()}catch{}return new Mw(w)}function gR(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR="__/auth/handler",xR="emulator/auth/handler",yR=encodeURIComponent("fac");async function Vw(r,e,t,s,l,c){Pe(r.config.authDomain,r,"auth-domain-config-required"),Pe(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:lc,eventId:l};if(e instanceof xN){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",XA(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))d[v]=w}if(e instanceof dd){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(d.scopes=v.join(","))}r.tenantId&&(d.tid=r.tenantId);const f=d;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const g=await r._getAppCheckToken(),x=g?`#${yR}=${encodeURIComponent(g)}`:"";return`${bR(r)}?${od(f).slice(1)}${x}`}function bR({config:r}){return r.emulator?mx(r,xR):`https://${r.authDomain}/${pR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg="webStorageSupport";class vR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=EN,this._completeRedirectFn=HC,this._overrideRedirectResult=BC}async _openPopup(e,t,s,l){var d;ma((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const c=await Vw(e,t,s,Sp(),l);return mR(e,c,bx())}async _openRedirect(e,t,s,l){await this._originValidation(e);const c=await Vw(e,t,s,Sp(),l);return NC(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:l,promise:c}=this.eventManagers[t];return l?Promise.resolve(l):(ma(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await oR(e),s=new $C(e);return t.register("authEvent",l=>(Pe(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Qg,{type:Qg},l=>{var d;const c=(d=l==null?void 0:l[0])==null?void 0:d[Qg];c!==void 0&&t(!!c),Zs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=JC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hN()||iN()||px()}}const wR=vR;var Pw="@firebase/auth",Lw="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ER(r){kr(new Ws("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:f}=s.options;Pe(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fN(r)},x=new L3(s,l,c,g);return Q3(x,t),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),kr(new Ws("auth-internal",e=>{const t=ji(e.getProvider("auth").getImmediate());return(s=>new _R(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ps(Pw,Lw,NR(r)),Ps(Pw,Lw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=300,SR=P2("authIdTokenMaxAge")||TR;let zw=null;const jR=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>SR)return;const l=t==null?void 0:t.token;zw!==l&&(zw=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function AR(r=Q2()){const e=Dl(r,"auth");if(e.isInitialized())return e.getImmediate();const t=K3(r,{popupRedirectResolver:wR,persistence:[kC,vC,EN]}),s=P2("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=jR(c.toString());gC(t,d,()=>d(t.currentUser)),mC(t,f=>d(f))}}const l=VA("auth");return l&&X3(t,`http://${l}`),t}function IR(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}z3({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=l=>{const c=Ar("internal-error");c.customData=l,t(c)},s.type="text/javascript",s.charset="UTF-8",IR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ER("Browser");var Uw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xi,RN;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,j){function A(){}A.prototype=j.prototype,S.F=j.prototype,S.prototype=new A,S.prototype.constructor=S,S.D=function(O,D,L){for(var I=Array(arguments.length-2),de=2;de<arguments.length;de++)I[de-2]=arguments[de];return j.prototype[D].apply(O,I)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(S,j,A){A||(A=0);const O=Array(16);if(typeof j=="string")for(var D=0;D<16;++D)O[D]=j.charCodeAt(A++)|j.charCodeAt(A++)<<8|j.charCodeAt(A++)<<16|j.charCodeAt(A++)<<24;else for(D=0;D<16;++D)O[D]=j[A++]|j[A++]<<8|j[A++]<<16|j[A++]<<24;j=S.g[0],A=S.g[1],D=S.g[2];let L=S.g[3],I;I=j+(L^A&(D^L))+O[0]+3614090360&4294967295,j=A+(I<<7&4294967295|I>>>25),I=L+(D^j&(A^D))+O[1]+3905402710&4294967295,L=j+(I<<12&4294967295|I>>>20),I=D+(A^L&(j^A))+O[2]+606105819&4294967295,D=L+(I<<17&4294967295|I>>>15),I=A+(j^D&(L^j))+O[3]+3250441966&4294967295,A=D+(I<<22&4294967295|I>>>10),I=j+(L^A&(D^L))+O[4]+4118548399&4294967295,j=A+(I<<7&4294967295|I>>>25),I=L+(D^j&(A^D))+O[5]+1200080426&4294967295,L=j+(I<<12&4294967295|I>>>20),I=D+(A^L&(j^A))+O[6]+2821735955&4294967295,D=L+(I<<17&4294967295|I>>>15),I=A+(j^D&(L^j))+O[7]+4249261313&4294967295,A=D+(I<<22&4294967295|I>>>10),I=j+(L^A&(D^L))+O[8]+1770035416&4294967295,j=A+(I<<7&4294967295|I>>>25),I=L+(D^j&(A^D))+O[9]+2336552879&4294967295,L=j+(I<<12&4294967295|I>>>20),I=D+(A^L&(j^A))+O[10]+4294925233&4294967295,D=L+(I<<17&4294967295|I>>>15),I=A+(j^D&(L^j))+O[11]+2304563134&4294967295,A=D+(I<<22&4294967295|I>>>10),I=j+(L^A&(D^L))+O[12]+1804603682&4294967295,j=A+(I<<7&4294967295|I>>>25),I=L+(D^j&(A^D))+O[13]+4254626195&4294967295,L=j+(I<<12&4294967295|I>>>20),I=D+(A^L&(j^A))+O[14]+2792965006&4294967295,D=L+(I<<17&4294967295|I>>>15),I=A+(j^D&(L^j))+O[15]+1236535329&4294967295,A=D+(I<<22&4294967295|I>>>10),I=j+(D^L&(A^D))+O[1]+4129170786&4294967295,j=A+(I<<5&4294967295|I>>>27),I=L+(A^D&(j^A))+O[6]+3225465664&4294967295,L=j+(I<<9&4294967295|I>>>23),I=D+(j^A&(L^j))+O[11]+643717713&4294967295,D=L+(I<<14&4294967295|I>>>18),I=A+(L^j&(D^L))+O[0]+3921069994&4294967295,A=D+(I<<20&4294967295|I>>>12),I=j+(D^L&(A^D))+O[5]+3593408605&4294967295,j=A+(I<<5&4294967295|I>>>27),I=L+(A^D&(j^A))+O[10]+38016083&4294967295,L=j+(I<<9&4294967295|I>>>23),I=D+(j^A&(L^j))+O[15]+3634488961&4294967295,D=L+(I<<14&4294967295|I>>>18),I=A+(L^j&(D^L))+O[4]+3889429448&4294967295,A=D+(I<<20&4294967295|I>>>12),I=j+(D^L&(A^D))+O[9]+568446438&4294967295,j=A+(I<<5&4294967295|I>>>27),I=L+(A^D&(j^A))+O[14]+3275163606&4294967295,L=j+(I<<9&4294967295|I>>>23),I=D+(j^A&(L^j))+O[3]+4107603335&4294967295,D=L+(I<<14&4294967295|I>>>18),I=A+(L^j&(D^L))+O[8]+1163531501&4294967295,A=D+(I<<20&4294967295|I>>>12),I=j+(D^L&(A^D))+O[13]+2850285829&4294967295,j=A+(I<<5&4294967295|I>>>27),I=L+(A^D&(j^A))+O[2]+4243563512&4294967295,L=j+(I<<9&4294967295|I>>>23),I=D+(j^A&(L^j))+O[7]+1735328473&4294967295,D=L+(I<<14&4294967295|I>>>18),I=A+(L^j&(D^L))+O[12]+2368359562&4294967295,A=D+(I<<20&4294967295|I>>>12),I=j+(A^D^L)+O[5]+4294588738&4294967295,j=A+(I<<4&4294967295|I>>>28),I=L+(j^A^D)+O[8]+2272392833&4294967295,L=j+(I<<11&4294967295|I>>>21),I=D+(L^j^A)+O[11]+1839030562&4294967295,D=L+(I<<16&4294967295|I>>>16),I=A+(D^L^j)+O[14]+4259657740&4294967295,A=D+(I<<23&4294967295|I>>>9),I=j+(A^D^L)+O[1]+2763975236&4294967295,j=A+(I<<4&4294967295|I>>>28),I=L+(j^A^D)+O[4]+1272893353&4294967295,L=j+(I<<11&4294967295|I>>>21),I=D+(L^j^A)+O[7]+4139469664&4294967295,D=L+(I<<16&4294967295|I>>>16),I=A+(D^L^j)+O[10]+3200236656&4294967295,A=D+(I<<23&4294967295|I>>>9),I=j+(A^D^L)+O[13]+681279174&4294967295,j=A+(I<<4&4294967295|I>>>28),I=L+(j^A^D)+O[0]+3936430074&4294967295,L=j+(I<<11&4294967295|I>>>21),I=D+(L^j^A)+O[3]+3572445317&4294967295,D=L+(I<<16&4294967295|I>>>16),I=A+(D^L^j)+O[6]+76029189&4294967295,A=D+(I<<23&4294967295|I>>>9),I=j+(A^D^L)+O[9]+3654602809&4294967295,j=A+(I<<4&4294967295|I>>>28),I=L+(j^A^D)+O[12]+3873151461&4294967295,L=j+(I<<11&4294967295|I>>>21),I=D+(L^j^A)+O[15]+530742520&4294967295,D=L+(I<<16&4294967295|I>>>16),I=A+(D^L^j)+O[2]+3299628645&4294967295,A=D+(I<<23&4294967295|I>>>9),I=j+(D^(A|~L))+O[0]+4096336452&4294967295,j=A+(I<<6&4294967295|I>>>26),I=L+(A^(j|~D))+O[7]+1126891415&4294967295,L=j+(I<<10&4294967295|I>>>22),I=D+(j^(L|~A))+O[14]+2878612391&4294967295,D=L+(I<<15&4294967295|I>>>17),I=A+(L^(D|~j))+O[5]+4237533241&4294967295,A=D+(I<<21&4294967295|I>>>11),I=j+(D^(A|~L))+O[12]+1700485571&4294967295,j=A+(I<<6&4294967295|I>>>26),I=L+(A^(j|~D))+O[3]+2399980690&4294967295,L=j+(I<<10&4294967295|I>>>22),I=D+(j^(L|~A))+O[10]+4293915773&4294967295,D=L+(I<<15&4294967295|I>>>17),I=A+(L^(D|~j))+O[1]+2240044497&4294967295,A=D+(I<<21&4294967295|I>>>11),I=j+(D^(A|~L))+O[8]+1873313359&4294967295,j=A+(I<<6&4294967295|I>>>26),I=L+(A^(j|~D))+O[15]+4264355552&4294967295,L=j+(I<<10&4294967295|I>>>22),I=D+(j^(L|~A))+O[6]+2734768916&4294967295,D=L+(I<<15&4294967295|I>>>17),I=A+(L^(D|~j))+O[13]+1309151649&4294967295,A=D+(I<<21&4294967295|I>>>11),I=j+(D^(A|~L))+O[4]+4149444226&4294967295,j=A+(I<<6&4294967295|I>>>26),I=L+(A^(j|~D))+O[11]+3174756917&4294967295,L=j+(I<<10&4294967295|I>>>22),I=D+(j^(L|~A))+O[2]+718787259&4294967295,D=L+(I<<15&4294967295|I>>>17),I=A+(L^(D|~j))+O[9]+3951481745&4294967295,S.g[0]=S.g[0]+j&4294967295,S.g[1]=S.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,S.g[2]=S.g[2]+D&4294967295,S.g[3]=S.g[3]+L&4294967295}s.prototype.v=function(S,j){j===void 0&&(j=S.length);const A=j-this.blockSize,O=this.C;let D=this.h,L=0;for(;L<j;){if(D==0)for(;L<=A;)l(this,S,L),L+=this.blockSize;if(typeof S=="string"){for(;L<j;)if(O[D++]=S.charCodeAt(L++),D==this.blockSize){l(this,O),D=0;break}}else for(;L<j;)if(O[D++]=S[L++],D==this.blockSize){l(this,O),D=0;break}}this.h=D,this.o+=j},s.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var j=1;j<S.length-8;++j)S[j]=0;j=this.o*8;for(var A=S.length-8;A<S.length;++A)S[A]=j&255,j/=256;for(this.v(S),S=Array(16),j=0,A=0;A<4;++A)for(let O=0;O<32;O+=8)S[j++]=this.g[A]>>>O&255;return S};function c(S,j){var A=f;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=j(S)}function d(S,j){this.h=j;const A=[];let O=!0;for(let D=S.length-1;D>=0;D--){const L=S[D]|0;O&&L==j||(A[D]=L,O=!1)}this.g=A}var f={};function g(S){return-128<=S&&S<128?c(S,function(j){return new d([j|0],j<0?-1:0)}):new d([S|0],S<0?-1:0)}function x(S){if(isNaN(S)||!isFinite(S))return w;if(S<0)return B(x(-S));const j=[];let A=1;for(let O=0;S>=A;O++)j[O]=S/A|0,A*=4294967296;return new d(j,0)}function v(S,j){if(S.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(S.charAt(0)=="-")return B(v(S.substring(1),j));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=x(Math.pow(j,8));let O=w;for(let L=0;L<S.length;L+=8){var D=Math.min(8,S.length-L);const I=parseInt(S.substring(L,L+D),j);D<8?(D=x(Math.pow(j,D)),O=O.j(D).add(x(I))):(O=O.j(A),O=O.add(x(I)))}return O}var w=g(0),N=g(1),C=g(16777216);r=d.prototype,r.m=function(){if(Z(this))return-B(this).m();let S=0,j=1;for(let A=0;A<this.g.length;A++){const O=this.i(A);S+=(O>=0?O:4294967296+O)*j,j*=4294967296}return S},r.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(M(this))return"0";if(Z(this))return"-"+B(this).toString(S);const j=x(Math.pow(S,6));var A=this;let O="";for(;;){const D=_e(A,j).g;A=me(A,D.j(j));let L=((A.g.length>0?A.g[0]:A.h)>>>0).toString(S);if(A=D,M(A))return L+O;for(;L.length<6;)L="0"+L;O=L+O}},r.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function M(S){if(S.h!=0)return!1;for(let j=0;j<S.g.length;j++)if(S.g[j]!=0)return!1;return!0}function Z(S){return S.h==-1}r.l=function(S){return S=me(this,S),Z(S)?-1:M(S)?0:1};function B(S){const j=S.g.length,A=[];for(let O=0;O<j;O++)A[O]=~S.g[O];return new d(A,~S.h).add(N)}r.abs=function(){return Z(this)?B(this):this},r.add=function(S){const j=Math.max(this.g.length,S.g.length),A=[];let O=0;for(let D=0;D<=j;D++){let L=O+(this.i(D)&65535)+(S.i(D)&65535),I=(L>>>16)+(this.i(D)>>>16)+(S.i(D)>>>16);O=I>>>16,L&=65535,I&=65535,A[D]=I<<16|L}return new d(A,A[A.length-1]&-2147483648?-1:0)};function me(S,j){return S.add(B(j))}r.j=function(S){if(M(this)||M(S))return w;if(Z(this))return Z(S)?B(this).j(B(S)):B(B(this).j(S));if(Z(S))return B(this.j(B(S)));if(this.l(C)<0&&S.l(C)<0)return x(this.m()*S.m());const j=this.g.length+S.g.length,A=[];for(var O=0;O<2*j;O++)A[O]=0;for(O=0;O<this.g.length;O++)for(let D=0;D<S.g.length;D++){const L=this.i(O)>>>16,I=this.i(O)&65535,de=S.i(D)>>>16,he=S.i(D)&65535;A[2*O+2*D]+=I*he,ce(A,2*O+2*D),A[2*O+2*D+1]+=L*he,ce(A,2*O+2*D+1),A[2*O+2*D+1]+=I*de,ce(A,2*O+2*D+1),A[2*O+2*D+2]+=L*de,ce(A,2*O+2*D+2)}for(S=0;S<j;S++)A[S]=A[2*S+1]<<16|A[2*S];for(S=j;S<2*j;S++)A[S]=0;return new d(A,0)};function ce(S,j){for(;(S[j]&65535)!=S[j];)S[j+1]+=S[j]>>>16,S[j]&=65535,j++}function le(S,j){this.g=S,this.h=j}function _e(S,j){if(M(j))throw Error("division by zero");if(M(S))return new le(w,w);if(Z(S))return j=_e(B(S),j),new le(B(j.g),B(j.h));if(Z(j))return j=_e(S,B(j)),new le(B(j.g),j.h);if(S.g.length>30){if(Z(S)||Z(j))throw Error("slowDivide_ only works with positive integers.");for(var A=N,O=j;O.l(S)<=0;)A=ge(A),O=ge(O);var D=G(A,1),L=G(O,1);for(O=G(O,2),A=G(A,2);!M(O);){var I=L.add(O);I.l(S)<=0&&(D=D.add(A),L=I),O=G(O,1),A=G(A,1)}return j=me(S,D.j(j)),new le(D,j)}for(D=w;S.l(j)>=0;){for(A=Math.max(1,Math.floor(S.m()/j.m())),O=Math.ceil(Math.log(A)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),L=x(A),I=L.j(j);Z(I)||I.l(S)>0;)A-=O,L=x(A),I=L.j(j);M(L)&&(L=N),D=D.add(L),S=me(S,I)}return new le(D,S)}r.B=function(S){return _e(this,S).h},r.and=function(S){const j=Math.max(this.g.length,S.g.length),A=[];for(let O=0;O<j;O++)A[O]=this.i(O)&S.i(O);return new d(A,this.h&S.h)},r.or=function(S){const j=Math.max(this.g.length,S.g.length),A=[];for(let O=0;O<j;O++)A[O]=this.i(O)|S.i(O);return new d(A,this.h|S.h)},r.xor=function(S){const j=Math.max(this.g.length,S.g.length),A=[];for(let O=0;O<j;O++)A[O]=this.i(O)^S.i(O);return new d(A,this.h^S.h)};function ge(S){const j=S.g.length+1,A=[];for(let O=0;O<j;O++)A[O]=S.i(O)<<1|S.i(O-1)>>>31;return new d(A,S.h)}function G(S,j){const A=j>>5;j%=32;const O=S.g.length-A,D=[];for(let L=0;L<O;L++)D[L]=j>0?S.i(L+A)>>>j|S.i(L+A+1)<<32-j:S.i(L+A);return new d(D,S.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,RN=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=x,d.fromString=v,xi=d}).apply(typeof Uw<"u"?Uw:typeof self<"u"?self:typeof window<"u"?window:{});var Xh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kN,Nu,DN,of,Ip,ON,MN,VN;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xh=="object"&&Xh];for(var y=0;y<h.length;++y){var _=h[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function l(h,y){if(y)e:{var _=s;h=h.split(".");for(var T=0;T<h.length-1;T++){var $=h[T];if(!($ in _))break e;_=_[$]}h=h[h.length-1],T=_[h],y=y(T),y!=T&&y!=null&&e(_,h,{configurable:!0,writable:!0,value:y})}}l("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(h){return h||function(y){var _=[],T;for(T in y)Object.prototype.hasOwnProperty.call(y,T)&&_.push([T,y[T]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function f(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,_){return h.call.apply(h.bind,arguments)}function x(h,y,_){return x=g,x.apply(null,arguments)}function v(h,y){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),h.apply(this,T)}}function w(h,y){function _(){}_.prototype=y.prototype,h.Z=y.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(T,$,J){for(var we=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)we[Fe-2]=arguments[Fe];return y.prototype[$].apply(T,we)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function C(h){const y=h.length;if(y>0){const _=Array(y);for(let T=0;T<y;T++)_[T]=h[T];return _}return[]}function M(h,y){for(let T=1;T<arguments.length;T++){const $=arguments[T];var _=typeof $;if(_=_!="object"?_:$?Array.isArray($)?"array":_:"null",_=="array"||_=="object"&&typeof $.length=="number"){_=h.length||0;const J=$.length||0;h.length=_+J;for(let we=0;we<J;we++)h[_+we]=$[we]}else h.push($)}}class Z{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function B(h){d.setTimeout(()=>{throw h},0)}function me(){var h=S;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ce{constructor(){this.h=this.g=null}add(y,_){const T=le.get();T.set(y,_),this.h?this.h.next=T:this.g=T,this.h=T}}var le=new Z(()=>new _e,h=>h.reset());class _e{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,G=!1,S=new ce,j=()=>{const h=Promise.resolve(void 0);ge=()=>{h.then(A)}};function A(){for(var h;h=me();){try{h.h.call(h.g)}catch(_){B(_)}var y=le;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}G=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};d.addEventListener("test",_,y),d.removeEventListener("test",_,y)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function de(h,y){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}w(de,D),de.prototype.init=function(h,y){const _=this.type=h.type,T=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(_=="mouseover"?y=h.fromElement:_=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&de.Z.h.call(this)},de.prototype.h=function(){de.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var he="closure_listenable_"+(Math.random()*1e6|0),F=0;function oe(h,y,_,T,$){this.listener=h,this.proxy=null,this.src=y,this.type=_,this.capture=!!T,this.ha=$,this.key=++F,this.da=this.fa=!1}function Y(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function re(h,y,_){for(const T in h)y.call(_,h[T],T,h)}function ve(h,y){for(const _ in h)y.call(void 0,h[_],_,h)}function R(h){const y={};for(const _ in h)y[_]=h[_];return y}const U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(h,y){let _,T;for(let $=1;$<arguments.length;$++){T=arguments[$];for(_ in T)h[_]=T[_];for(let J=0;J<U.length;J++)_=U[J],Object.prototype.hasOwnProperty.call(T,_)&&(h[_]=T[_])}}function ee(h){this.src=h,this.g={},this.h=0}ee.prototype.add=function(h,y,_,T,$){const J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);const we=Se(h,y,T,$);return we>-1?(y=h[we],_||(y.fa=!1)):(y=new oe(y,this.src,J,!!T,$),y.fa=_,h.push(y)),y};function xe(h,y){const _=y.type;if(_ in h.g){var T=h.g[_],$=Array.prototype.indexOf.call(T,y,void 0),J;(J=$>=0)&&Array.prototype.splice.call(T,$,1),J&&(Y(y),h.g[_].length==0&&(delete h.g[_],h.h--))}}function Se(h,y,_,T){for(let $=0;$<h.length;++$){const J=h[$];if(!J.da&&J.listener==y&&J.capture==!!_&&J.ha==T)return $}return-1}var Me="closure_lm_"+(Math.random()*1e6|0),Ke={};function ke(h,y,_,T,$){if(Array.isArray(y)){for(let J=0;J<y.length;J++)ke(h,y[J],_,T,$);return null}return _=Vr(_),h&&h[he]?h.J(y,_,f(T)?!!T.capture:!1,$):Nt(h,y,_,!1,T,$)}function Nt(h,y,_,T,$,J){if(!y)throw Error("Invalid event type");const we=f($)?!!$.capture:!!$;let Fe=ws(h);if(Fe||(h[Me]=Fe=new ee(h)),_=Fe.add(y,_,T,we,J),_.proxy)return _;if(T=gt(),_.proxy=T,T.src=h,T.listener=_,h.addEventListener)L||($=we),$===void 0&&($=!1),h.addEventListener(y.toString(),T,$);else if(h.attachEvent)h.attachEvent(vn(y.toString()),T);else if(h.addListener&&h.removeListener)h.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function gt(){function h(_){return y.call(h.src,h.listener,_)}const y=vs;return h}function Rt(h,y,_,T,$){if(Array.isArray(y))for(var J=0;J<y.length;J++)Rt(h,y[J],_,T,$);else T=f(T)?!!T.capture:!!T,_=Vr(_),h&&h[he]?(h=h.i,J=String(y).toString(),J in h.g&&(y=h.g[J],_=Se(y,_,T,$),_>-1&&(Y(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete h.g[J],h.h--)))):h&&(h=ws(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Se(y,_,T,$)),(_=h>-1?y[h]:null)&&it(_))}function it(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[he])xe(y.i,h);else{var _=h.type,T=h.proxy;y.removeEventListener?y.removeEventListener(_,T,h.capture):y.detachEvent?y.detachEvent(vn(_),T):y.addListener&&y.removeListener&&y.removeListener(T),(_=ws(y))?(xe(_,h),_.h==0&&(_.src=null,y[Me]=null)):Y(h)}}}function vn(h){return h in Ke?Ke[h]:Ke[h]="on"+h}function vs(h,y){if(h.da)h=!0;else{y=new de(y,this);const _=h.listener,T=h.ha||h.src;h.fa&&it(h),h=_.call(T,y)}return h}function ws(h){return h=h[Me],h instanceof ee?h:null}var sr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Vr(h){return typeof h=="function"?h:(h[sr]||(h[sr]=function(y){return h.handleEvent(y)}),h[sr])}function Ot(){O.call(this),this.i=new ee(this),this.M=this,this.G=null}w(Ot,O),Ot.prototype[he]=!0,Ot.prototype.removeEventListener=function(h,y,_,T){Rt(this,h,y,_,T)};function Mt(h,y){var _,T=h.G;if(T)for(_=[];T;T=T.G)_.push(T);if(h=h.M,T=y.type||y,typeof y=="string")y=new D(y,h);else if(y instanceof D)y.target=y.target||h;else{var $=y;y=new D(T,h),z(y,$)}$=!0;let J,we;if(_)for(we=_.length-1;we>=0;we--)J=y.g=_[we],$=fn(J,T,!0,y)&&$;if(J=y.g=h,$=fn(J,T,!0,y)&&$,$=fn(J,T,!1,y)&&$,_)for(we=0;we<_.length;we++)J=y.g=_[we],$=fn(J,T,!1,y)&&$}Ot.prototype.N=function(){if(Ot.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const _=h.g[y];for(let T=0;T<_.length;T++)Y(_[T]);delete h.g[y],h.h--}}this.G=null},Ot.prototype.J=function(h,y,_,T){return this.i.add(String(h),y,!1,_,T)},Ot.prototype.K=function(h,y,_,T){return this.i.add(String(h),y,!0,_,T)};function fn(h,y,_,T){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let $=!0;for(let J=0;J<y.length;++J){const we=y[J];if(we&&!we.da&&we.capture==_){const Fe=we.listener,Kt=we.ha||we.src;we.fa&&xe(h.i,we),$=Fe.call(Kt,T)!==!1&&$}}return $&&!T.defaultPrevented}function wa(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:d.setTimeout(h,y||0)}function _a(h){h.g=wa(()=>{h.g=null,h.i&&(h.i=!1,_a(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Vt extends O{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:_a(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _s(h){O.call(this),this.h=h,this.g={}}w(_s,O);var rr=[];function Pr(h){re(h.g,function(y,_){this.g.hasOwnProperty(_)&&it(y)},h),h.g={}}_s.prototype.N=function(){_s.Z.N.call(this),Pr(this)},_s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wn=d.JSON.stringify,Na=d.JSON.parse,Ea=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function ie(){}function Ye(){}var Ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Je(){D.call(this,"d")}w(Je,D);function Ut(){D.call(this,"c")}w(Ut,D);var st={},Lr=null;function Pn(){return Lr=Lr||new Ot}st.Ia="serverreachability";function ar(h){D.call(this,st.Ia,h)}w(ar,D);function Gn(h){const y=Pn();Mt(y,new ar(y))}st.STAT_EVENT="statevent";function ue(h,y){D.call(this,st.STAT_EVENT,h),this.stat=y}w(ue,D);function Ne(h){const y=Pn();Mt(y,new ue(y,h))}st.Ja="timingevent";function Ce(h,y){D.call(this,st.Ja,h),this.size=y}w(Ce,D);function be(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Le(){this.g=!0}Le.prototype.ua=function(){this.g=!1};function We(h,y,_,T,$,J){h.info(function(){if(h.g)if(J){var we="",Fe=J.split("&");for(let dt=0;dt<Fe.length;dt++){var Kt=Fe[dt].split("=");if(Kt.length>1){const Pt=Kt[0];Kt=Kt[1];const Ss=Pt.split("_");we=Ss.length>=2&&Ss[1]=="type"?we+(Pt+"="+Kt+"&"):we+(Pt+"=redacted&")}}}else we=null;else we=J;return"XMLHTTP REQ ("+T+") [attempt "+$+"]: "+y+`
`+_+`
`+we})}function At(h,y,_,T,$,J,we){h.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+$+"]: "+y+`
`+_+`
`+J+" "+we})}function ct(h,y,_,T){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Bt(h,_)+(T?" "+T:"")})}function ut(h,y){h.info(function(){return"TIMEOUT: "+y})}Le.prototype.info=function(){};function Bt(h,y){if(!h.g)return y;if(!y)return null;try{const J=JSON.parse(y);if(J){for(h=0;h<J.length;h++)if(Array.isArray(J[h])){var _=J[h];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var $=T[0];if($!="noop"&&$!="stop"&&$!="close")for(let we=1;we<T.length;we++)T[we]=""}}}}return wn(J)}catch{return y}}var mn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ki={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},pc;function Di(){}w(Di,ie),Di.prototype.g=function(){return new XMLHttpRequest},pc=new Di;function zr(h){return encodeURIComponent(String(h))}function Td(h){var y=1;h=h.split(":");const _=[];for(;y>0&&h.length;)_.push(h.shift()),y--;return h.length&&_.push(h.join(":")),_}function Us(h,y,_,T){this.j=h,this.i=y,this.l=_,this.S=T||1,this.V=new _s(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Bs}function Bs(){this.i=null,this.g="",this.h=!1}var en={},gn={};function ir(h,y,_){h.M=1,h.A=Oi(nn(y)),h.u=_,h.R=!0,Ml(h,null)}function Ml(h,y){h.F=Date.now(),lr(h),h.B=nn(h.A);var _=h.B,T=h.S;Array.isArray(T)||(T=[String(T)]),zl(_.i,"t",T),h.C=0,_=h.j.L,h.h=new Bs,h.g=Ud(h.j,_?y:null,!h.u),h.P>0&&(h.O=new Vt(x(h.Y,h,h.g),h.P)),y=h.V,_=h.g,T=h.ba;var $="readystatechange";Array.isArray($)||($&&(rr[0]=$.toString()),$=rr);for(let J=0;J<$.length;J++){const we=ke(_,$[J],T||y.handleEvent,!1,y.h||y);if(!we)break;y.g[we.key]=we}y=h.J?R(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Gn(),We(h.i,h.v,h.B,h.l,h.S,h.u)}Us.prototype.ba=function(h){h=h.target;const y=this.O;y&&Hs(h)==3?y.j():this.Y(h)},Us.prototype.Y=function(h){try{if(h==this.g)e:{const Fe=Hs(this.g),Kt=this.g.ya(),dt=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||_n(this.g)))){this.K||Fe!=4||Kt==7||(Kt==8||dt<=0?Gn(3):Gn(2)),or(this);var y=this.g.ca();this.X=y;var _=Bm(this);if(this.o=y==200,At(this.i,this.v,this.B,this.l,this.S,Fe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var T,$=this.g;if((T=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(T)){var J=T;break t}}J=null}if(h=J)ct(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,cr(this,h);else{this.o=!1,this.m=3,Ne(12),rs(this),Ns(this);break e}}if(this.R){h=!0;let Pt;for(;!this.K&&this.C<_.length;)if(Pt=jd(this,_),Pt==gn){Fe==4&&(this.m=4,Ne(14),h=!1),ct(this.i,this.l,null,"[Incomplete Response]");break}else if(Pt==en){this.m=4,Ne(15),ct(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else ct(this.i,this.l,Pt,null),cr(this,Pt);if(Sd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||_.length!=0||this.h.h||(this.m=1,Ne(16),h=!1),this.o=this.o&&h,!h)ct(this.i,this.l,_,"[Invalid Chunked Response]"),rs(this),Ns(this);else if(_.length>0&&!this.W){this.W=!0;var we=this.j;we.g==this&&we.aa&&!we.P&&(we.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Rc(we),we.P=!0,Ne(11))}}else ct(this.i,this.l,_,null),cr(this,_);Fe==4&&rs(this),this.o&&!this.K&&(Fe==4?Vd(this.j,this):(this.o=!1,lr(this)))}else Br(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,Ne(12)):(this.m=0,Ne(13)),rs(this),Ns(this)}}}catch{}finally{}};function Bm(h){if(!Sd(h))return h.g.la();const y=_n(h.g);if(y==="")return"";let _="";const T=y.length,$=Hs(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return rs(h),Ns(h),"";h.h.i=new d.TextDecoder}for(let J=0;J<T;J++)h.h.h=!0,_+=h.h.i.decode(y[J],{stream:!($&&J==T-1)});return y.length=0,h.h.g+=_,h.C=0,h.h.g}function Sd(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function jd(h,y){var _=h.C,T=y.indexOf(`
`,_);return T==-1?gn:(_=Number(y.substring(_,T)),isNaN(_)?en:(T+=1,T+_>y.length?gn:(y=y.slice(T,T+_),h.C=T+_,y)))}Us.prototype.cancel=function(){this.K=!0,rs(this)};function lr(h){h.T=Date.now()+h.H,Vl(h,h.H)}function Vl(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=be(x(h.aa,h),y)}function or(h){h.D&&(d.clearTimeout(h.D),h.D=null)}Us.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(ut(this.i,this.B),this.M!=2&&(Gn(),Ne(17)),rs(this),this.m=2,Ns(this)):Vl(this,this.T-h)};function Ns(h){h.j.I==0||h.K||Vd(h.j,h)}function rs(h){or(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Pr(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function cr(h,y){try{var _=h.j;if(_.I!=0&&(_.g==h||dr(_.h,h))){if(!h.L&&dr(_.h,h)&&_.I==3){try{var T=_.Ba.g.parse(y)}catch{T=null}if(Array.isArray(T)&&T.length==3){var $=T;if($[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)Hl(_),ka(_);else break e;Bi(_),Ne(18)}}else _.xa=$[1],0<_.xa-_.K&&$[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=be(x(_.Va,_),6e3));ur(_.h)<=1&&_.ta&&(_.ta=void 0)}else xr(_,11)}else if((h.L||_.g==h)&&Hl(_),!I(y))for($=_.Ba.g.parse(y),y=0;y<$.length;y++){let dt=$[y];const Pt=dt[0];if(!(Pt<=_.K))if(_.K=Pt,dt=dt[1],_.I==2)if(dt[0]=="c"){_.M=dt[1],_.ba=dt[2];const Ss=dt[3];Ss!=null&&(_.ka=Ss,_.j.info("VER="+_.ka));const yr=dt[4];yr!=null&&(_.za=yr,_.j.info("SVER="+_.za));const Gs=dt[5];Gs!=null&&typeof Gs=="number"&&Gs>0&&(T=1.5*Gs,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const $s=h.g;if($s){const qi=$s.g?$s.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qi){var J=T.h;J.g||qi.indexOf("spdy")==-1&&qi.indexOf("quic")==-1&&qi.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(bc(J,J.h),J.h=null))}if(T.G){const Gl=$s.g?$s.g.getResponseHeader("X-HTTP-Session-Id"):null;Gl&&(T.wa=Gl,pt(T.J,T.G,Gl))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var we=h;if(T.na=zd(T,T.L?T.ba:null,T.W),we.L){vc(T.h,we);var Fe=we,Kt=T.O;Kt&&(Fe.H=Kt),Fe.D&&(or(Fe),lr(Fe)),T.g=we}else Od(T);_.i.length>0&&pr(_)}else dt[0]!="stop"&&dt[0]!="close"||xr(_,7);else _.I==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?xr(_,7):Ic(_):dt[0]!="noop"&&_.l&&_.l.qa(dt),_.A=0)}}Gn(4)}catch{}}var tn=class{constructor(h,y){this.g=h,this.map=y}};function xc(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function yc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ur(h){return h.h?1:h.g?h.g.size:0}function dr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function bc(h,y){h.g?h.g.add(y):h.h=y}function vc(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}xc.prototype.cancel=function(){if(this.i=wc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function wc(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const _ of h.g.values())y=y.concat(_.G);return y}return C(h.i)}var Ad=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pl(h,y){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const T=h[_].indexOf("=");let $,J=null;T>=0?($=h[_].substring(0,T),J=h[_].substring(T+1)):$=h[_],y($,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function as(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof as?(this.l=h.l,pn(this,h.j),this.o=h.o,this.g=h.g,Ta(this,h.u),this.h=h.h,_c(this,kd(h.i)),this.m=h.m):h&&(y=String(h).match(Ad))?(this.l=!1,pn(this,y[1]||"",!0),this.o=hr(y[2]||""),this.g=hr(y[3]||"",!0),Ta(this,y[4]),this.h=hr(y[5]||"",!0),_c(this,y[6]||"",!0),this.m=hr(y[7]||"")):(this.l=!1,this.i=new ja(null,this.l))}as.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Mi(y,Ll,!0),":");var _=this.g;return(_||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Mi(y,Ll,!0),"@"),h.push(zr(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(Mi(_,_.charAt(0)=="/"?Nc:Id,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",Mi(_,Cd)),h.join("")},as.prototype.resolve=function(h){const y=nn(this);let _=!!h.j;_?pn(y,h.j):_=!!h.o,_?y.o=h.o:_=!!h.g,_?y.g=h.g:_=h.u!=null;var T=h.h;if(_)Ta(y,h.u);else if(_=!!h.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var $=y.h.lastIndexOf("/");$!=-1&&(T=y.h.slice(0,$+1)+T)}if($=T,$==".."||$==".")T="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){T=$.lastIndexOf("/",0)==0,$=$.split("/");const J=[];for(let we=0;we<$.length;){const Fe=$[we++];Fe=="."?T&&we==$.length&&J.push(""):Fe==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),T&&we==$.length&&J.push("")):(J.push(Fe),T=!0)}T=J.join("/")}else T=$}return _?y.h=T:_=h.i.toString()!=="",_?_c(y,kd(h.i)):_=!!h.m,_&&(y.m=h.m),y};function nn(h){return new as(h)}function pn(h,y,_){h.j=_?hr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ta(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function _c(h,y,_){y instanceof ja?(h.i=y,Ul(h.i,h.l)):(_||(y=Mi(y,Sa)),h.i=new ja(y,h.l))}function pt(h,y,_){h.i.set(y,_)}function Oi(h){return pt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function hr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Mi(h,y,_){return typeof h=="string"?(h=encodeURI(h).replace(y,$n),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function $n(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ll=/[#\/\?@]/g,Id=/[#\?:]/g,Nc=/[#\?]/g,Sa=/[#\?@]/g,Cd=/#/g;function ja(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Kn(h){h.g||(h.g=new Map,h.h=0,h.i&&Pl(h.i,function(y,_){h.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}r=ja.prototype,r.add=function(h,y){Kn(this),this.i=null,h=Aa(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(y),this.h+=1,this};function Rd(h,y){Kn(h),y=Aa(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Ec(h,y){return Kn(h),y=Aa(h,y),h.g.has(y)}r.forEach=function(h,y){Kn(this),this.g.forEach(function(_,T){_.forEach(function($){h.call(y,$,T,this)},this)},this)};function Tc(h,y){Kn(h);let _=[];if(typeof y=="string")Ec(h,y)&&(_=_.concat(h.g.get(Aa(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)_=_.concat(h[y]);return _}r.set=function(h,y){return Kn(this),this.i=null,h=Aa(this,h),Ec(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=Tc(this,h),h.length>0?String(h[0]):y):y};function zl(h,y,_){Rd(h,y),_.length>0&&(h.i=null,h.g.set(Aa(h,y),C(_)),h.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let T=0;T<y.length;T++){var _=y[T];const $=zr(_);_=Tc(this,_);for(let J=0;J<_.length;J++){let we=$;_[J]!==""&&(we+="="+zr(_[J])),h.push(we)}}return this.i=h.join("&")};function kd(h){const y=new ja;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Aa(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ul(h,y){y&&!h.j&&(Kn(h),h.i=null,h.g.forEach(function(_,T){const $=T.toLowerCase();T!=$&&(Rd(this,T),zl(this,$,_))},h)),h.j=y}function qs(h,y){const _=new Le;if(d.Image){const T=new Image;T.onload=v(Es,_,"TestLoadImage: loaded",!0,y,T),T.onerror=v(Es,_,"TestLoadImage: error",!1,y,T),T.onabort=v(Es,_,"TestLoadImage: abort",!1,y,T),T.ontimeout=v(Es,_,"TestLoadImage: timeout",!1,y,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=h}else y(!1)}function Sc(h,y){const _=new Le,T=new AbortController,$=setTimeout(()=>{T.abort(),Es(_,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:T.signal}).then(J=>{clearTimeout($),J.ok?Es(_,"TestPingServer: ok",!0,y):Es(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout($),Es(_,"TestPingServer: error",!1,y)})}function Es(h,y,_,T,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),T(_)}catch{}}function Ia(){this.g=new Ea}function fr(h){this.i=h.Sb||null,this.h=h.ab||!1}w(fr,ie),fr.prototype.g=function(){return new Vi(this.i,this.h)};function Vi(h,y){Ot.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Vi,Ot),r=Vi.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Fs(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||d).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ca(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Fs(this)),this.g&&(this.readyState=3,Fs(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Bl(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Bl(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Ca(this):Fs(this),this.readyState==3&&Bl(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,Ca(this))},r.Na=function(h){this.g&&(this.response=h,Ca(this))},r.ga=function(){this.g&&Ca(this)};function Ca(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Fs(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=y.next();return h.join(`\r
`)};function Fs(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ts(h){let y="";return re(h,function(_,T){y+=T,y+=":",y+=_,y+=`\r
`}),y}function Pi(h,y,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=Ts(_),typeof h=="string"?_!=null&&zr(_):pt(h,y,_))}function Et(h){Ot.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(Et,Ot);var mr=/^https?$/i,jc=["POST","PUT"];r=Et.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():pc.g(),this.g.onreadystatechange=N(x(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(J){Li(this,J);return}if(h=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var $ in T)_.set($,T[$]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const J of T.keys())_.set(J,T.get(J));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(J=>J.toLowerCase()=="content-type"),$=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(jc,y,void 0)>=0)||T||$||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,we]of _)this.g.setRequestHeader(J,we);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(J){Li(this,J)}};function Li(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Ac(h),Ur(h)}function Ac(h){h.A||(h.A=!0,Mt(h,"complete"),Mt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Mt(this,"complete"),Mt(this,"abort"),Ur(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ur(this,!0)),Et.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?zi(this):this.Xa())},r.Xa=function(){zi(this)};function zi(h){if(h.h&&typeof c<"u"){if(h.v&&Hs(h)==4)setTimeout(h.Ca.bind(h),0);else if(Mt(h,"readystatechange"),Hs(h)==4){h.h=!1;try{const J=h.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var T;if(T=J===0){let we=String(h.D).match(Ad)[1]||null;!we&&d.self&&d.self.location&&(we=d.self.location.protocol.slice(0,-1)),T=!mr.test(we?we.toLowerCase():"")}_=T}if(_)Mt(h,"complete"),Mt(h,"success");else{h.o=6;try{var $=Hs(h)>2?h.g.statusText:""}catch{$=""}h.l=$+" ["+h.ca()+"]",Ac(h)}}finally{Ur(h)}}}}function Ur(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,y||Mt(h,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Hs(h){return h.g?h.g.readyState:0}r.ca=function(){try{return Hs(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Na(y)}};function _n(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Br(h){const y={};h=(h.g&&Hs(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<h.length;T++){if(I(h[T]))continue;var _=Td(h[T]);const $=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const J=y[$]||[];y[$]=J,J.push(_)}ve(y,function(T){return T.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function gr(h,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||y}function Ra(h){this.za=0,this.i=[],this.j=new Le,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=gr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=gr("baseRetryDelayMs",5e3,h),this.Za=gr("retryDelaySeedMs",1e4,h),this.Ta=gr("forwardChannelMaxRetries",2,h),this.va=gr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new xc(h&&h.concurrentRequestLimit),this.Ba=new Ia,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ra.prototype,r.ka=8,r.I=1,r.connect=function(h,y,_,T){Ne(0),this.W=h,this.H=y||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=zd(this,null,this.W),pr(this)};function Ic(h){if(ql(h),h.I==3){var y=h.V++,_=nn(h.J);if(pt(_,"SID",h.M),pt(_,"RID",y),pt(_,"TYPE","terminate"),Ui(h,_),y=new Us(h,h.j,y),y.M=2,y.A=Oi(nn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=y.A,_=!0),_||(y.g=Ud(y.j,null),y.g.ea(y.A)),y.F=Date.now(),lr(y)}Ld(h)}function ka(h){h.g&&(Rc(h),h.g.cancel(),h.g=null)}function ql(h){ka(h),h.v&&(d.clearTimeout(h.v),h.v=null),Hl(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function pr(h){if(!yc(h.h)&&!h.m){h.m=!0;var y=h.Ea;ge||j(),G||(ge(),G=!0),S.add(y,h),h.D=0}}function Fl(h,y){return ur(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=be(x(h.Ea,h,y),Pd(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const $=new Us(this,this.j,h);let J=this.o;if(this.U&&(J?(J=R(J),z(J,this.U)):J=this.U),this.u!==null||this.R||($.J=J,J=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(y+=T,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Dd(this,$,y),_=nn(this.J),pt(_,"RID",h),pt(_,"CVER",22),this.G&&pt(_,"X-HTTP-Session-Id",this.G),Ui(this,_),J&&(this.R?y="headers="+zr(Ts(J))+"&"+y:this.u&&Pi(_,this.u,J)),bc(this.h,$),this.Ra&&pt(_,"TYPE","init"),this.S?(pt(_,"$req",y),pt(_,"SID","null"),$.U=!0,ir($,_,null)):ir($,_,y),this.I=2}}else this.I==3&&(h?Cc(this,h):this.i.length==0||yc(this.h)||Cc(this))};function Cc(h,y){var _;y?_=y.l:_=h.V++;const T=nn(h.J);pt(T,"SID",h.M),pt(T,"RID",_),pt(T,"AID",h.K),Ui(h,T),h.u&&h.o&&Pi(T,h.u,h.o),_=new Us(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Dd(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),bc(h.h,_),ir(_,T,y)}function Ui(h,y){h.H&&re(h.H,function(_,T){pt(y,T,_)}),h.l&&re({},function(_,T){pt(y,T,_)})}function Dd(h,y,_){_=Math.min(h.i.length,_);const T=h.l?x(h.l.Ka,h.l,h):null;e:{var $=h.i;let Fe=-1;for(;;){const Kt=["count="+_];Fe==-1?_>0?(Fe=$[0].g,Kt.push("ofs="+Fe)):Fe=0:Kt.push("ofs="+Fe);let dt=!0;for(let Pt=0;Pt<_;Pt++){var J=$[Pt].g;const Ss=$[Pt].map;if(J-=Fe,J<0)Fe=Math.max(0,$[Pt].g-100),dt=!1;else try{J="req"+J+"_"||"";try{var we=Ss instanceof Map?Ss:Object.entries(Ss);for(const[yr,Gs]of we){let $s=Gs;f(Gs)&&($s=wn(Gs)),Kt.push(J+yr+"="+encodeURIComponent($s))}}catch(yr){throw Kt.push(J+"type="+encodeURIComponent("_badmap")),yr}}catch{T&&T(Ss)}}if(dt){we=Kt.join("&");break e}}we=void 0}return h=h.i.splice(0,_),y.G=h,we}function Od(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ge||j(),G||(ge(),G=!0),S.add(y,h),h.A=0}}function Bi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=be(x(h.Da,h),Pd(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,Md(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=be(x(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ne(10),ka(this),Md(this))};function Rc(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Md(h){h.g=new Us(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=nn(h.na);pt(y,"RID","rpc"),pt(y,"SID",h.M),pt(y,"AID",h.K),pt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&pt(y,"TO",h.ia),pt(y,"TYPE","xmlhttp"),Ui(h,y),h.u&&h.o&&Pi(y,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=Oi(nn(y)),_.u=null,_.R=!0,Ml(_,h)}r.Va=function(){this.C!=null&&(this.C=null,ka(this),Bi(this),Ne(19))};function Hl(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Vd(h,y){var _=null;if(h.g==y){Hl(h),Rc(h),h.g=null;var T=2}else if(dr(h.h,y))_=y.G,vc(h.h,y),T=1;else return;if(h.I!=0){if(y.o)if(T==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var $=h.D;T=Pn(),Mt(T,new Ce(T,_)),pr(h)}else Od(h);else if($=y.m,$==3||$==0&&y.X>0||!(T==1&&Fl(h,y)||T==2&&Bi(h)))switch(_&&_.length>0&&(y=h.h,y.i=y.i.concat(_)),$){case 1:xr(h,5);break;case 4:xr(h,10);break;case 3:xr(h,6);break;default:xr(h,2)}}}function Pd(h,y){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*y}function xr(h,y){if(h.j.info("Error code "+y),y==2){var _=x(h.bb,h),T=h.Ua;const $=!T;T=new as(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||pn(T,"https"),Oi(T),$?qs(T.toString(),_):Sc(T.toString(),_)}else Ne(2);h.I=0,h.l&&h.l.pa(y),Ld(h),ql(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Ne(2)):(this.j.info("Failed to ping google.com"),Ne(1))};function Ld(h){if(h.I=0,h.ja=[],h.l){const y=wc(h.h);(y.length!=0||h.i.length!=0)&&(M(h.ja,y),M(h.ja,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.oa()}}function zd(h,y,_){var T=_ instanceof as?nn(_):new as(_);if(T.g!="")y&&(T.g=y+"."+T.g),Ta(T,T.u);else{var $=d.location;T=$.protocol,y=y?y+"."+$.hostname:$.hostname,$=+$.port;const J=new as(null);T&&pn(J,T),y&&(J.g=y),$&&Ta(J,$),_&&(J.h=_),T=J}return _=h.G,y=h.wa,_&&y&&pt(T,_,y),pt(T,"VER",h.ka),Ui(h,T),T}function Ud(h,y,_){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Et(new fr({ab:_})):new Et(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bd(){}r=Bd.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Da(){}Da.prototype.g=function(h,y){return new Ln(h,y)};function Ln(h,y){Ot.call(this),this.g=new Ra(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!I(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new qr(this)}w(Ln,Ot),Ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ln.prototype.close=function(){Ic(this.g)},Ln.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=wn(h),h=_);y.i.push(new tn(y.Ya++,h)),y.I==3&&pr(y)},Ln.prototype.N=function(){this.g.l=null,delete this.j,Ic(this.g),delete this.g,Ln.Z.N.call(this)};function qd(h){Je.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const _ in y){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}w(qd,Je);function Fd(){Ut.call(this),this.status=1}w(Fd,Ut);function qr(h){this.g=h}w(qr,Bd),qr.prototype.ra=function(){Mt(this.g,"a")},qr.prototype.qa=function(h){Mt(this.g,new qd(h))},qr.prototype.pa=function(h){Mt(this.g,new Fd)},qr.prototype.oa=function(){Mt(this.g,"b")},Da.prototype.createWebChannel=Da.prototype.g,Ln.prototype.send=Ln.prototype.o,Ln.prototype.open=Ln.prototype.m,Ln.prototype.close=Ln.prototype.close,VN=function(){return new Da},MN=function(){return Pn()},ON=st,Ip={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},mn.NO_ERROR=0,mn.TIMEOUT=8,mn.HTTP_ERROR=6,of=mn,ki.COMPLETE="complete",DN=ki,Ye.EventType=Ue,Ue.OPEN="a",Ue.CLOSE="b",Ue.ERROR="c",Ue.MESSAGE="d",Ot.prototype.listen=Ot.prototype.J,Nu=Ye,Et.prototype.listenOnce=Et.prototype.K,Et.prototype.getLastError=Et.prototype.Ha,Et.prototype.getLastErrorCode=Et.prototype.ya,Et.prototype.getStatus=Et.prototype.ca,Et.prototype.getResponseJson=Et.prototype.La,Et.prototype.getResponseText=Et.prototype.la,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Fa,kN=Et}).apply(typeof Xh<"u"?Xh:typeof self<"u"?self:typeof window<"u"?window:{});const Bw="@firebase/firestore",qw="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rn.UNAUTHENTICATED=new Rn(null),Rn.GOOGLE_CREDENTIALS=new Rn("google-credentials-uid"),Rn.FIRST_PARTY=new Rn("first-party-uid"),Rn.MOCK_USER=new Rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl=new lm("@firebase/firestore");function Ao(){return Nl.logLevel}function fe(r,...e){if(Nl.logLevel<=tt.DEBUG){const t=e.map(wx);Nl.debug(`Firestore (${cc}): ${r}`,...t)}}function Yt(r,...e){if(Nl.logLevel<=tt.ERROR){const t=e.map(wx);Nl.error(`Firestore (${cc}): ${r}`,...t)}}function Qu(r,...e){if(Nl.logLevel<=tt.WARN){const t=e.map(wx);Nl.warn(`Firestore (${cc}): ${r}`,...t)}}function wx(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,PN(r,s,t)}function PN(r,e,t){let s=`FIRESTORE (${cc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Yt(s),new Error(s)}function Re(r,e,t,s){let l="Unexpected state";typeof t=="string"?l=t:s=t,r||PN(e,l,s)}function Ae(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends tr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Rn.UNAUTHENTICATED)))}shutdown(){}}class kR{constructor(e){this.t=e,this.currentUser=Rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Re(this.o===void 0,42304);let s=this.i;const l=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let c=new Ls;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ls,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},f=g=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ls)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Re(typeof s.accessToken=="string",31837,{l:s}),new CR(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string",2055,{h:e}),new Rn(e)}}class DR{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class OR{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new DR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Fw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ms(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Re(this.o===void 0,3512);const s=c=>{c.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,fe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const l=c=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Fw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Re(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Fw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=VR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<t&&(s+=e.charAt(l[c]%62))}return s}}function ze(r,e){return r<e?-1:r>e?1:0}function Cp(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const l=r.charAt(s),c=e.charAt(s);if(l!==c)return Xg(l)===Xg(c)?ze(l,c):Xg(l)?1:-1}return ze(r.length,e.length)}const PR=55296,LR=57343;function Xg(r){const e=r.charCodeAt(0);return e>=PR&&e<=LR}function Uo(r,e,t){return r.length===e.length&&r.every(((s,l)=>t(s,e[l])))}function LN(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="__name__";class Nr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Te(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Nr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Nr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let l=0;l<s;l++){const c=Nr.compareSegments(e.get(l),t.get(l));if(c!==0)return c}return ze(e.length,t.length)}static compareSegments(e,t){const s=Nr.isNumericId(e),l=Nr.isNumericId(t);return s&&!l?-1:!s&&l?1:s&&l?Nr.extractNumericId(e).compare(Nr.extractNumericId(t)):Cp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xi.fromString(e.substring(4,e.length-2))}}class ft extends Nr{construct(e,t,s){return new ft(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ye(te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((l=>l.length>0)))}return new ft(t)}static emptyPath(){return new ft([])}}const zR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends Nr{construct(e,t,s){return new Ft(e,t,s)}static isValidIdentifier(e){return zR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Hw}static keyField(){return new Ft([Hw])}static fromServerFormat(e){const t=[];let s="",l=0;const c=()=>{if(s.length===0)throw new ye(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;l<e.length;){const f=e[l];if(f==="\\"){if(l+1===e.length)throw new ye(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ye(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,l+=2}else f==="`"?(d=!d,l++):f!=="."||d?(s+=f,l++):(c(),l++)}if(c(),d)throw new ye(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(t)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ft.fromString(e))}static fromName(e){return new Ee(ft.fromString(e).popFirst(5))}static empty(){return new Ee(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(r,e,t){if(!t)throw new ye(te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function UR(r,e,t,s){if(e===!0&&s===!0)throw new ye(te.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Gw(r){if(!Ee.isDocumentKey(r))throw new ye(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function $w(r){if(Ee.isDocumentKey(r))throw new ye(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function UN(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function dm(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te(12329,{type:typeof r})}function qn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ye(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=dm(r);throw new ye(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function BR(r,e){if(e<=0)throw new ye(te.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(r,e){const t={typeString:r};return e&&(t.value=e),t}function fd(r,e){if(!UN(r))throw new ye(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const l=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){t=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){t=`Expected '${s}' field to equal '${c.value}'`;break}}if(t)throw new ye(te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=-62135596800,Qw=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Qw);return new vt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Kw)throw new ye(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qw}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fd(e,vt._jsonSchema))return new vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Kw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vt._jsonSchemaVersion="firestore/timestamp/1.0",vt._jsonSchema={type:cn("string",vt._jsonSchemaVersion),seconds:cn("number"),nanoseconds:cn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new vt(0,0))}static max(){return new Oe(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=-1;class Df{constructor(e,t,s,l){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=l}}function Rp(r){return r.fields.find((e=>e.kind===2))}function ll(r){return r.fields.filter((e=>e.kind!==2))}Df.UNKNOWN_ID=-1;class cf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Xu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Xu(0,bs.min())}}function BN(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=Oe.fromTimestamp(s===1e9?new vt(t+1,0):new vt(t,s));return new bs(l,Ee.empty(),e)}function qN(r){return new bs(r.readTime,r.key,Bo)}class bs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new bs(Oe.min(),Ee.empty(),Bo)}static max(){return new bs(Oe.max(),Ee.empty(),Bo)}}function Nx(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(r.documentKey,e.documentKey),t!==0?t:ze(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ai(r){if(r.code!==te.FAILED_PRECONDITION||r.message!==FN)throw r;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new H(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,l)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof H?t:H.resolve(t)}catch(t){return H.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):H.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):H.reject(t)}static resolve(e){return new H(((t,s)=>{t(e)}))}static reject(e){return new H(((t,s)=>{s(e)}))}static waitFor(e){return new H(((t,s)=>{let l=0,c=0,d=!1;e.forEach((f=>{++l,f.next((()=>{++c,d&&c===l&&t()}),(g=>s(g)))})),d=!0,c===l&&t()}))}static or(e){let t=H.resolve(!1);for(const s of e)t=t.next((l=>l?H.resolve(l):s()));return t}static forEach(e,t){const s=[];return e.forEach(((l,c)=>{s.push(t.call(this,l,c))})),this.waitFor(s)}static mapArray(e,t){return new H(((s,l)=>{const c=e.length,d=new Array(c);let f=0;for(let g=0;g<c;g++){const x=g;t(e[x]).next((v=>{d[x]=v,++f,f===c&&s(d)}),(v=>l(v)))}}))}static doWhile(e,t){return new H(((s,l)=>{const c=()=>{e()===!0?t().next((()=>{c()}),l):s()};c()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs="SimpleDb";class hm{static open(e,t,s,l){try{return new hm(t,e.transaction(l,s))}catch(c){throw new Cu(t,c)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Ls,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Cu(e,t.error)):this.S.resolve()},this.transaction.onerror=s=>{const l=Ex(s.target.error);this.S.reject(new Cu(e,l))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(fe(fs,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new FR(t)}}class yi{static delete(e){return fe(fs,"Removing database:",e),cl(M2().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!dx())return!1;if(yi.F())return!0;const e=dn(),t=yi.M(e),s=0<t&&t<10,l=GN(e),c=0<l&&l<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||c)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}constructor(e,t,s){this.name=e,this.version=t,this.N=s,this.B=null,yi.M(dn())===12.2&&Yt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(fe(fs,"Opening database:",this.name),this.db=await new Promise(((t,s)=>{const l=indexedDB.open(this.name,this.version);l.onsuccess=c=>{const d=c.target.result;t(d)},l.onblocked=()=>{s(new Cu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=c=>{const d=c.target.error;d.name==="VersionError"?s(new ye(te.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):d.name==="InvalidStateError"?s(new ye(te.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d)):s(new Cu(e,d))},l.onupgradeneeded=c=>{fe(fs,'Database "'+this.name+'" requires upgrade from version:',c.oldVersion);const d=c.target.result;this.N.k(d,l.transaction,c.oldVersion,this.version).next((()=>{fe(fs,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,s,l){const c=t==="readonly";let d=0;for(;;){++d;try{this.db=await this.L(e);const f=hm.open(this.db,e,c?"readonly":"readwrite",s),g=l(f).next((x=>(f.C(),x))).catch((x=>(f.abort(x),H.reject(x)))).toPromise();return g.catch((()=>{})),await f.D,g}catch(f){const g=f,x=g.name!=="FirebaseError"&&d<3;if(fe(fs,"Transaction failed with error:",g.message,"Retrying:",x),this.close(),!x)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function GN(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class qR{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return cl(this.U.delete())}}class Cu extends ye{constructor(e,t){super(te.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ii(r){return r.name==="IndexedDbTransactionError"}class FR{constructor(e){this.store=e}put(e,t){let s;return t!==void 0?(fe(fs,"PUT",this.store.name,e,t),s=this.store.put(t,e)):(fe(fs,"PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),cl(s)}add(e){return fe(fs,"ADD",this.store.name,e,e),cl(this.store.add(e))}get(e){return cl(this.store.get(e)).next((t=>(t===void 0&&(t=null),fe(fs,"GET",this.store.name,e,t),t)))}delete(e){return fe(fs,"DELETE",this.store.name,e),cl(this.store.delete(e))}count(){return fe(fs,"COUNT",this.store.name),cl(this.store.count())}J(e,t){const s=this.options(e,t),l=s.index?this.store.index(s.index):this.store;if(typeof l.getAll=="function"){const c=l.getAll(s.range);return new H(((d,f)=>{c.onerror=g=>{f(g.target.error)},c.onsuccess=g=>{d(g.target.result)}}))}{const c=this.cursor(s),d=[];return this.H(c,((f,g)=>{d.push(g)})).next((()=>d))}}Y(e,t){const s=this.store.getAll(e,t===null?void 0:t);return new H(((l,c)=>{s.onerror=d=>{c(d.target.error)},s.onsuccess=d=>{l(d.target.result)}}))}Z(e,t){fe(fs,"DELETE ALL",this.store.name);const s=this.options(e,t);s.X=!1;const l=this.cursor(s);return this.H(l,((c,d,f)=>f.delete()))}ee(e,t){let s;t?s=e:(s={},t=e);const l=this.cursor(s);return this.H(l,t)}te(e){const t=this.cursor({});return new H(((s,l)=>{t.onerror=c=>{const d=Ex(c.target.error);l(d)},t.onsuccess=c=>{const d=c.target.result;d?e(d.primaryKey,d.value).next((f=>{f?d.continue():s()})):s()}}))}H(e,t){const s=[];return new H(((l,c)=>{e.onerror=d=>{c(d.target.error)},e.onsuccess=d=>{const f=d.target.result;if(!f)return void l();const g=new qR(f),x=t(f.primaryKey,f.value,g);if(x instanceof H){const v=x.catch((w=>(g.done(),H.reject(w))));s.push(v)}g.isDone?l():g.G===null?f.continue():f.continue(g.G)}})).next((()=>H.waitFor(s)))}options(e,t){let s;return e!==void 0&&(typeof e=="string"?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.X?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function cl(r){return new H(((e,t)=>{r.onsuccess=s=>{const l=s.target.result;e(l)},r.onerror=s=>{const l=Ex(s.target.error);t(l)}}))}let Xw=!1;function Ex(r){const e=yi.M(dn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new ye("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Xw||(Xw=!0,setTimeout((()=>{throw s}),0)),s}}return r}const Ru="IndexBackfiller";class HR{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){fe(Ru,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();fe(Ru,`Documents written: ${t}`)}catch(t){Ii(t)?fe(Ru,"Ignoring IndexedDB error during index backfill: ",t):await Ai(t)}await this.re(6e4)}))}}class GR{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const s=new Set;let l=t,c=!0;return H.doWhile((()=>c===!0&&l>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((d=>{if(d!==null&&!s.has(d))return fe(Ru,`Processing collection: ${d}`),this.oe(e,d,l).next((f=>{l-=f,s.add(d)}));c=!1})))).next((()=>t-l))}oe(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((l=>this.localStore.localDocuments.getNextDocuments(e,t,l,s).next((c=>{const d=c.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next((()=>this._e(l,c))).next((f=>(fe(Ru,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f)))).next((()=>d.size))}))))}_e(e,t){let s=e;return t.changes.forEach(((l,c)=>{const d=qN(c);Nx(d,s)>0&&(s=d)})),new bs(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}es.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=-1;function fm(r){return r==null}function Yu(r){return r===0&&1/r==-1/0}function $N(r){return typeof r=="number"&&Number.isInteger(r)&&!Yu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of="";function Mn(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Yw(e)),e=$R(r.get(t),e);return Yw(e)}function $R(r,e){let t=e;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":t+="";break;case Of:t+="";break;default:t+=c}}return t}function Yw(r){return r+Of+""}function Sr(r){const e=r.length;if(Re(e>=2,64408,{path:r}),e===2)return Re(r.charAt(0)===Of&&r.charAt(1)==="",56145,{path:r}),ft.emptyPath();const t=e-2,s=[];let l="";for(let c=0;c<e;){const d=r.indexOf(Of,c);switch((d<0||d>t)&&Te(50515,{path:r}),r.charAt(d+1)){case"":const f=r.substring(c,d);let g;l.length===0?g=f:(l+=f,g=l,l=""),s.push(g);break;case"":l+=r.substring(c,d),l+="\0";break;case"":l+=r.substring(c,d+1);break;default:Te(61167,{path:r})}c=d+2}return new ft(s)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol="remoteDocuments",md="owner",_o="owner",Ju="mutationQueues",KR="userId",Ys="mutations",Jw="batchId",fl="userMutationsIndex",Ww=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(r,e){return[r,Mn(e)]}function KN(r,e,t){return[r,Mn(e),t]}const QR={},qo="documentMutations",Mf="remoteDocumentsV14",XR=["prefixPath","collectionGroup","readTime","documentId"],df="documentKeyIndex",YR=["prefixPath","collectionGroup","documentId"],QN="collectionGroupIndex",JR=["collectionGroup","readTime","prefixPath","documentId"],Wu="remoteDocumentGlobal",kp="remoteDocumentGlobalKey",Fo="targets",XN="queryTargetsIndex",WR=["canonicalId","targetId"],Ho="targetDocuments",ZR=["targetId","path"],Tx="documentTargetsIndex",e6=["path","targetId"],Vf="targetGlobalKey",pl="targetGlobal",Zu="collectionParents",t6=["collectionId","parent"],Go="clientMetadata",n6="clientId",mm="bundles",s6="bundleId",gm="namedQueries",r6="name",Sx="indexConfiguration",a6="indexId",Dp="collectionGroupIndex",i6="collectionGroup",ku="indexState",l6=["indexId","uid"],YN="sequenceNumberIndex",o6=["uid","sequenceNumber"],Du="indexEntries",c6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],JN="documentKeyIndex",u6=["indexId","uid","orderedDocumentKey"],pm="documentOverlays",d6=["userId","collectionPath","documentId"],Op="collectionPathOverlayIndex",h6=["userId","collectionPath","largestBatchId"],WN="collectionGroupOverlayIndex",f6=["userId","collectionGroup","largestBatchId"],jx="globals",m6="name",ZN=[Ju,Ys,qo,ol,Fo,md,pl,Ho,Go,Wu,Zu,mm,gm],g6=[...ZN,pm],eE=[Ju,Ys,qo,Mf,Fo,md,pl,Ho,Go,Wu,Zu,mm,gm,pm],tE=eE,Ax=[...tE,Sx,ku,Du],p6=Ax,nE=[...Ax,jx],x6=nE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp extends HN{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function hn(r,e){const t=Ae(r);return yi.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ci(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function y6(r,e){const t=[];for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&t.push(e(r[s],s,r));return t}function sE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,t){this.comparator=e,this.root=t||jn.EMPTY}insert(e,t){return new Ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jn.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return t+s.left.size;l<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yh(this.root,e,this.comparator,!0)}}class Yh{constructor(e,t,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jn{constructor(e,t,s,l,c){this.key=e,this.value=t,this.color=s??jn.RED,this.left=l??jn.EMPTY,this.right=c??jn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,l,c){return new jn(e??this.key,t??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let l=this;const c=s(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,t,s),null):c===0?l.copy(null,t,null,null,null):l.copy(null,null,null,null,l.right.insert(e,t,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return jn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,l=this;if(t(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,t),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),t(e,l.key)===0){if(l.right.isEmpty())return jn.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,t))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}jn.EMPTY=null,jn.RED=!0,jn.BLACK=!1;jn.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,s,l,c){return this}insert(e,t,s){return new jn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;t(l.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new e_(this.data.getIterator())}getIteratorFrom(e){return new e_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const l=t.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new _t(this.comparator);return t.data=e,t}}class e_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function No(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new ts([])}unionWith(e){let t=new _t(Ft.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ts(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new rE("Invalid base64 string: "+c):c}})(e);return new Zt(t)}static fromUint8Array(e){const t=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(e);return new Zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const b6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ga(r){if(Re(!!r,39018),typeof r=="string"){let e=0;const t=b6.exec(r);if(Re(!!t,46558,{timestamp:r}),t[1]){let l=t[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:zt(r.seconds),nanos:zt(r.nanos)}}function zt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function pa(r){return typeof r=="string"?Zt.fromBase64String(r):Zt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="server_timestamp",iE="__type__",lE="__previous_value__",oE="__local_write_time__";function Ix(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[iE])==null?void 0:s.stringValue)===aE}function xm(r){const e=r.mapValue.fields[lE];return Ix(e)?xm(e):e}function ed(r){const e=ga(r.mapValue.fields[oE].timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e,t,s,l,c,d,f,g,x,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=x,this.isUsingEmulator=v}}const Pf="(default)";class El{constructor(e,t){this.projectId=e,this.database=t||Pf}static empty(){return new El("","")}get isDefaultDatabase(){return this.database===Pf}isEqual(e){return e instanceof El&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="__type__",cE="__max__",fi={mapValue:{fields:{__type__:{stringValue:cE}}}},Rx="__vector__",$o="value",hf={nullValue:"NULL_VALUE"};function Ni(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Ix(r)?4:uE(r)?9007199254740991:ym(r)?10:11:Te(28295,{value:r})}function Dr(r,e){if(r===e)return!0;const t=Ni(r);if(t!==Ni(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ed(r).isEqual(ed(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=ga(l.timestampValue),f=ga(c.timestampValue);return d.seconds===f.seconds&&d.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(l,c){return pa(l.bytesValue).isEqual(pa(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(l,c){return zt(l.geoPointValue.latitude)===zt(c.geoPointValue.latitude)&&zt(l.geoPointValue.longitude)===zt(c.geoPointValue.longitude)})(r,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return zt(l.integerValue)===zt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=zt(l.doubleValue),f=zt(c.doubleValue);return d===f?Yu(d)===Yu(f):isNaN(d)&&isNaN(f)}return!1})(r,e);case 9:return Uo(r.arrayValue.values||[],e.arrayValue.values||[],Dr);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},f=c.mapValue.fields||{};if(Zw(d)!==Zw(f))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(f[g]===void 0||!Dr(d[g],f[g])))return!1;return!0})(r,e);default:return Te(52216,{left:r})}}function td(r,e){return(r.values||[]).find((t=>Dr(t,e)))!==void 0}function Ei(r,e){if(r===e)return 0;const t=Ni(r),s=Ni(e);if(t!==s)return ze(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const f=zt(c.integerValue||c.doubleValue),g=zt(d.integerValue||d.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return t_(r.timestampValue,e.timestampValue);case 4:return t_(ed(r),ed(e));case 5:return Cp(r.stringValue,e.stringValue);case 6:return(function(c,d){const f=pa(c),g=pa(d);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const f=c.split("/"),g=d.split("/");for(let x=0;x<f.length&&x<g.length;x++){const v=ze(f[x],g[x]);if(v!==0)return v}return ze(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const f=ze(zt(c.latitude),zt(d.latitude));return f!==0?f:ze(zt(c.longitude),zt(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return n_(r.arrayValue,e.arrayValue);case 10:return(function(c,d){var N,C,M,Z;const f=c.fields||{},g=d.fields||{},x=(N=f[$o])==null?void 0:N.arrayValue,v=(C=g[$o])==null?void 0:C.arrayValue,w=ze(((M=x==null?void 0:x.values)==null?void 0:M.length)||0,((Z=v==null?void 0:v.values)==null?void 0:Z.length)||0);return w!==0?w:n_(x,v)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===fi.mapValue&&d===fi.mapValue)return 0;if(c===fi.mapValue)return 1;if(d===fi.mapValue)return-1;const f=c.fields||{},g=Object.keys(f),x=d.fields||{},v=Object.keys(x);g.sort(),v.sort();for(let w=0;w<g.length&&w<v.length;++w){const N=Cp(g[w],v[w]);if(N!==0)return N;const C=Ei(f[g[w]],x[v[w]]);if(C!==0)return C}return ze(g.length,v.length)})(r.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function t_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ze(r,e);const t=ga(r),s=ga(e),l=ze(t.seconds,s.seconds);return l!==0?l:ze(t.nanos,s.nanos)}function n_(r,e){const t=r.values||[],s=e.values||[];for(let l=0;l<t.length&&l<s.length;++l){const c=Ei(t[l],s[l]);if(c)return c}return ze(t.length,s.length)}function Ko(r){return Vp(r)}function Vp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=ga(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return pa(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ee.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",l=!0;for(const c of t.values||[])l?l=!1:s+=",",s+=Vp(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${Vp(t.fields[d])}`;return l+"}"})(r.mapValue):Te(61005,{value:r})}function ff(r){switch(Ni(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xm(r);return e?16+ff(e):16;case 5:return 2*r.stringValue.length;case 6:return pa(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+ff(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return Ci(s.fields,((c,d)=>{l+=c.length+ff(d)})),l})(r.mapValue);default:throw Te(13486,{value:r})}}function nd(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Pp(r){return!!r&&"integerValue"in r}function sd(r){return!!r&&"arrayValue"in r}function s_(r){return!!r&&"nullValue"in r}function r_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function mf(r){return!!r&&"mapValue"in r}function ym(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Cx])==null?void 0:s.stringValue)===Rx}function Ou(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ci(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Ou(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ou(r.arrayValue.values[t]);return e}return{...r}}function uE(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===cE}const dE={mapValue:{fields:{[Cx]:{stringValue:Rx},[$o]:{arrayValue:{}}}}};function w6(r){return"nullValue"in r?hf:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?nd(El.empty(),Ee.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?ym(r)?dE:{mapValue:{}}:Te(35942,{value:r})}function _6(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?nd(El.empty(),Ee.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?dE:"mapValue"in r?ym(r)?{mapValue:{}}:fi:Te(61959,{value:r})}function a_(r,e){const t=Ei(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function i_(r,e){const t=Ei(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.value=e}static empty(){return new Dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!mf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ou(t)}setAll(e){let t=Ft.emptyPath(),s={},l=[];e.forEach(((d,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,l),s={},l=[],t=f.popLast()}d?s[f.lastSegment()]=Ou(d):l.push(f.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,s,l)}delete(e){const t=this.field(e.popLast());mf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Dr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=t.mapValue.fields[e.get(s)];mf(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=l),t=l}return t.mapValue.fields}applyChanges(e,t,s){Ci(t,((l,c)=>e[l]=c));for(const l of s)delete e[l]}clone(){return new Dn(Ou(this.value))}}function hE(r){const e=[];return Ci(r.fields,((t,s)=>{const l=new Ft([t]);if(mf(s)){const c=hE(s.mapValue).fields;if(c.length===0)e.push(l);else for(const d of c)e.push(l.child(d))}else e.push(l)})),new ts(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,s,l,c,d,f){this.key=e,this.documentType=t,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=f}static newInvalidDocument(e){return new $t(e,0,Oe.min(),Oe.min(),Oe.min(),Dn.empty(),0)}static newFoundDocument(e,t,s,l){return new $t(e,1,t,Oe.min(),s,l,0)}static newNoDocument(e,t){return new $t(e,2,t,Oe.min(),Oe.min(),Dn.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,Oe.min(),Oe.min(),Dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,t){this.position=e,this.inclusive=t}}function l_(r,e,t){let s=0;for(let l=0;l<r.position.length;l++){const c=e[l],d=r.position[l];if(c.field.isKeyField()?s=Ee.comparator(Ee.fromName(d.referenceValue),t.key):s=Ei(d,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function o_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Dr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t="asc"){this.field=e,this.dir=t}}function N6(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{}class nt extends fE{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new E6(e,t,s):t==="array-contains"?new j6(e,s):t==="in"?new bE(e,s):t==="not-in"?new A6(e,s):t==="array-contains-any"?new I6(e,s):new nt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new T6(e,s):new S6(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ei(t,this.value)):t!==null&&Ni(this.value)===Ni(t)&&this.matchesComparison(Ei(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wt extends fE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new wt(e,t)}matches(e){return Xo(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Xo(r){return r.op==="and"}function Lp(r){return r.op==="or"}function kx(r){return mE(r)&&Xo(r)}function mE(r){for(const e of r.filters)if(e instanceof wt)return!1;return!0}function zp(r){if(r instanceof nt)return r.field.canonicalString()+r.op.toString()+Ko(r.value);if(kx(r))return r.filters.map((e=>zp(e))).join(",");{const e=r.filters.map((t=>zp(t))).join(",");return`${r.op}(${e})`}}function gE(r,e){return r instanceof nt?(function(s,l){return l instanceof nt&&s.op===l.op&&s.field.isEqual(l.field)&&Dr(s.value,l.value)})(r,e):r instanceof wt?(function(s,l){return l instanceof wt&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,d,f)=>c&&gE(d,l.filters[f])),!0):!1})(r,e):void Te(19439)}function pE(r,e){const t=r.filters.concat(e);return wt.create(t,r.op)}function xE(r){return r instanceof nt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ko(t.value)}`})(r):r instanceof wt?(function(t){return t.op.toString()+" {"+t.getFilters().map(xE).join(" ,")+"}"})(r):"Filter"}class E6 extends nt{constructor(e,t,s){super(e,t,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class T6 extends nt{constructor(e,t){super(e,"in",t),this.keys=yE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class S6 extends nt{constructor(e,t){super(e,"not-in",t),this.keys=yE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function yE(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Ee.fromName(s.referenceValue)))}class j6 extends nt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sd(t)&&td(t.arrayValue,this.value)}}class bE extends nt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&td(this.value.arrayValue,t)}}class A6 extends nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(td(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!td(this.value.arrayValue,t)}}class I6 extends nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>td(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e,t=null,s=[],l=[],c=null,d=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=f,this.Te=null}}function Up(r,e=null,t=[],s=[],l=null,c=null,d=null){return new C6(r,e,t,s,l,c,d)}function Tl(r){const e=Ae(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>zp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),fm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Ko(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Ko(s))).join(",")),e.Te=t}return e.Te}function gd(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!N6(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!gE(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!o_(r.startAt,e.startAt)&&o_(r.endAt,e.endAt)}function Lf(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function zf(r,e){return r.filters.filter((t=>t instanceof nt&&t.field.isEqual(e)))}function c_(r,e,t){let s=hf,l=!0;for(const c of zf(r,e)){let d=hf,f=!0;switch(c.op){case"<":case"<=":d=w6(c.value);break;case"==":case"in":case">=":d=c.value;break;case">":d=c.value,f=!1;break;case"!=":case"not-in":d=hf}a_({value:s,inclusive:l},{value:d,inclusive:f})<0&&(s=d,l=f)}if(t!==null){for(let c=0;c<r.orderBy.length;++c)if(r.orderBy[c].field.isEqual(e)){const d=t.position[c];a_({value:s,inclusive:l},{value:d,inclusive:t.inclusive})<0&&(s=d,l=t.inclusive);break}}return{value:s,inclusive:l}}function u_(r,e,t){let s=fi,l=!0;for(const c of zf(r,e)){let d=fi,f=!0;switch(c.op){case">=":case">":d=_6(c.value),f=!1;break;case"==":case"in":case"<=":d=c.value;break;case"<":d=c.value,f=!1;break;case"!=":case"not-in":d=fi}i_({value:s,inclusive:l},{value:d,inclusive:f})>0&&(s=d,l=f)}if(t!==null){for(let c=0;c<r.orderBy.length;++c)if(r.orderBy[c].field.isEqual(e)){const d=t.position[c];i_({value:s,inclusive:l},{value:d,inclusive:t.inclusive})>0&&(s=d,l=t.inclusive);break}}return{value:s,inclusive:l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,t=null,s=[],l=[],c=null,d="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function vE(r,e,t,s,l,c,d,f){return new uc(r,e,t,s,l,c,d,f)}function bm(r){return new uc(r)}function d_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function wE(r){return r.collectionGroup!==null}function Mu(r){const e=Ae(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let f=new _t(Ft.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((x=>{x.isInequality()&&(f=f.add(x.field))}))})),f})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new rd(c,s))})),t.has(Ft.keyField().canonicalString())||e.Ie.push(new rd(Ft.keyField(),s))}return e.Ie}function ps(r){const e=Ae(r);return e.Ee||(e.Ee=_E(e,Mu(r))),e.Ee}function R6(r){const e=Ae(r);return e.de||(e.de=_E(e,r.explicitOrderBy)),e.de}function _E(r,e){if(r.limitType==="F")return Up(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new rd(l.field,c)}));const t=r.endAt?new Qo(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Qo(r.startAt.position,r.startAt.inclusive):null;return Up(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Bp(r,e){const t=r.filters.concat([e]);return new uc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Uf(r,e,t){return new uc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function vm(r,e){return gd(ps(r),ps(e))&&r.limitType===e.limitType}function NE(r){return`${Tl(ps(r))}|lt:${r.limitType}`}function Io(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((l=>xE(l))).join(", ")}]`),fm(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((l=>Ko(l))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((l=>Ko(l))).join(",")),`Target(${s})`})(ps(r))}; limitType=${r.limitType})`}function pd(r,e){return e.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ee.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,l){for(const c of Mu(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,e)&&(function(s,l){return!(s.startAt&&!(function(d,f,g){const x=l_(d,f,g);return d.inclusive?x<=0:x<0})(s.startAt,Mu(s),l)||s.endAt&&!(function(d,f,g){const x=l_(d,f,g);return d.inclusive?x>=0:x>0})(s.endAt,Mu(s),l))})(r,e)}function EE(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function TE(r){return(e,t)=>{let s=!1;for(const l of Mu(r)){const c=k6(l,e,t);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function k6(r,e,t){const s=r.field.isKeyField()?Ee.comparator(e.key,t.key):(function(c,d,f){const g=d.data.field(c),x=f.data.field(c);return g!==null&&x!==null?Ei(g,x):Te(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Te(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,t]);l.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[t]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Ci(this.inner,((t,s)=>{for(const[l,c]of s)e(l,c)}))}isEmpty(){return sE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=new Ct(Ee.comparator);function gs(){return D6}const SE=new Ct(Ee.comparator);function Eu(...r){let e=SE;for(const t of r)e=e.insert(t.key,t);return e}function jE(r){let e=SE;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function jr(){return Vu()}function AE(){return Vu()}function Vu(){return new ba((r=>r.toString()),((r,e)=>r.isEqual(e)))}const O6=new Ct(Ee.comparator),M6=new _t(Ee.comparator);function $e(...r){let e=M6;for(const t of r)e=e.add(t);return e}const V6=new _t(ze);function Dx(){return V6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yu(e)?"-0":e}}function IE(r){return{integerValue:""+r}}function CE(r,e){return $N(e)?IE(e):Ox(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(){this._=void 0}}function P6(r,e,t){return r instanceof Yo?(function(l,c){const d={fields:{[iE]:{stringValue:aE},[oE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Ix(c)&&(c=xm(c)),c&&(d.fields[lE]=c),{mapValue:d}})(t,e):r instanceof Jo?kE(r,e):r instanceof Wo?DE(r,e):(function(l,c){const d=RE(l,c),f=h_(d)+h_(l.Ae);return Pp(d)&&Pp(l.Ae)?IE(f):Ox(l.serializer,f)})(r,e)}function L6(r,e,t){return r instanceof Jo?kE(r,e):r instanceof Wo?DE(r,e):t}function RE(r,e){return r instanceof Zo?(function(s){return Pp(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Yo extends wm{}class Jo extends wm{constructor(e){super(),this.elements=e}}function kE(r,e){const t=OE(e);for(const s of r.elements)t.some((l=>Dr(l,s)))||t.push(s);return{arrayValue:{values:t}}}class Wo extends wm{constructor(e){super(),this.elements=e}}function DE(r,e){let t=OE(e);for(const s of r.elements)t=t.filter((l=>!Dr(l,s)));return{arrayValue:{values:t}}}class Zo extends wm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function h_(r){return zt(r.integerValue||r.doubleValue)}function OE(r){return sd(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,t){this.field=e,this.transform=t}}function z6(r,e){return r.field.isEqual(e.field)&&(function(s,l){return s instanceof Jo&&l instanceof Jo||s instanceof Wo&&l instanceof Wo?Uo(s.elements,l.elements,Dr):s instanceof Zo&&l instanceof Zo?Dr(s.Ae,l.Ae):s instanceof Yo&&l instanceof Yo})(r.transform,e.transform)}class U6{constructor(e,t){this.version=e,this.transformResults=t}}class On{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new On}static exists(e){return new On(void 0,e)}static updateTime(e){return new On(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class _m{}function ME(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Nm(r.key,On.none()):new dc(r.key,r.data,On.none());{const t=r.data,s=Dn.empty();let l=new _t(Ft.comparator);for(let c of e.fields)if(!l.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new va(r.key,s,new ts(l.toArray()),On.none())}}function B6(r,e,t){r instanceof dc?(function(l,c,d){const f=l.value.clone(),g=m_(l.fieldTransforms,c,d.transformResults);f.setAll(g),c.convertToFoundDocument(d.version,f).setHasCommittedMutations()})(r,e,t):r instanceof va?(function(l,c,d){if(!gf(l.precondition,c))return void c.convertToUnknownDocument(d.version);const f=m_(l.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(VE(l)),g.setAll(f),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,t):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function Pu(r,e,t,s){return r instanceof dc?(function(c,d,f,g){if(!gf(c.precondition,d))return f;const x=c.value.clone(),v=g_(c.fieldTransforms,g,d);return x.setAll(v),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),null})(r,e,t,s):r instanceof va?(function(c,d,f,g){if(!gf(c.precondition,d))return f;const x=g_(c.fieldTransforms,g,d),v=d.data;return v.setAll(VE(c)),v.setAll(x),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),f===null?null:f.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(r,e,t,s):(function(c,d,f){return gf(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):f})(r,e,t)}function q6(r,e){let t=null;for(const s of r.fieldTransforms){const l=e.data.field(s.field),c=RE(s.transform,l||null);c!=null&&(t===null&&(t=Dn.empty()),t.set(s.field,c))}return t||null}function f_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Uo(s,l,((c,d)=>z6(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class dc extends _m{constructor(e,t,s,l=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class va extends _m{constructor(e,t,s,l,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function VE(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function m_(r,e,t){const s=new Map;Re(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let l=0;l<t.length;l++){const c=r[l],d=c.transform,f=e.data.field(c.field);s.set(c.field,L6(d,f,t[l]))}return s}function g_(r,e,t){const s=new Map;for(const l of r){const c=l.transform,d=t.data.field(l.field);s.set(l.field,P6(c,d,e))}return s}class Nm extends _m{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PE extends _m{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,t,s,l){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&B6(c,e,s[l])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Pu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Pu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=AE();return this.mutations.forEach((l=>{const c=e.get(l.key),d=c.overlayedDocument;let f=this.applyToLocalView(d,c.mutatedFields);f=t.has(l.key)?null:f;const g=ME(d,f);g!==null&&s.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(Oe.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),$e())}isEqual(e){return this.batchId===e.batchId&&Uo(this.mutations,e.mutations,((t,s)=>f_(t,s)))&&Uo(this.baseMutations,e.baseMutations,((t,s)=>f_(t,s)))}}class Px{constructor(e,t,s,l){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=l}static from(e,t,s){Re(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let l=(function(){return O6})();const c=e.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new Px(e,t,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e,t,s){this.alias=e,this.aggregateType=t,this.fieldPath=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var on,at;function G6(r){switch(r){case te.OK:return Te(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Te(15467,{code:r})}}function LE(r){if(r===void 0)return Yt("GRPC error has no .code"),te.UNKNOWN;switch(r){case on.OK:return te.OK;case on.CANCELLED:return te.CANCELLED;case on.UNKNOWN:return te.UNKNOWN;case on.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case on.INTERNAL:return te.INTERNAL;case on.UNAVAILABLE:return te.UNAVAILABLE;case on.UNAUTHENTICATED:return te.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case on.NOT_FOUND:return te.NOT_FOUND;case on.ALREADY_EXISTS:return te.ALREADY_EXISTS;case on.PERMISSION_DENIED:return te.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case on.ABORTED:return te.ABORTED;case on.OUT_OF_RANGE:return te.OUT_OF_RANGE;case on.UNIMPLEMENTED:return te.UNIMPLEMENTED;case on.DATA_LOSS:return te.DATA_LOSS;default:return Te(39323,{code:r})}}(at=on||(on={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6=new xi([4294967295,4294967295],0);function p_(r){const e=$6().encode(r),t=new RN;return t.update(e),new Uint8Array(t.digest())}function x_(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new xi([t,s],0),new xi([l,c],0)]}class zx{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Tu(`Invalid padding: ${t}`);if(s<0)throw new Tu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Tu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Tu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=xi.fromNumber(this.ge)}ye(e,t,s){let l=e.add(t.multiply(xi.fromNumber(s)));return l.compare(K6)===1&&(l=new xi([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=p_(e),[s,l]=x_(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);if(!this.we(d))return!1}return!0}static create(e,t,s){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new zx(c,l,t);return s.forEach((f=>d.insert(f))),d}insert(e){if(this.ge===0)return;const t=p_(e),[s,l]=x_(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);this.Se(d)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t,s,l,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const l=new Map;return l.set(e,yd.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new xd(Oe.min(),l,new Ct(ze),gs(),$e())}}class yd{constructor(e,t,s,l,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new yd(s,t,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,t,s,l){this.be=e,this.removedTargetIds=t,this.key=s,this.De=l}}class zE{constructor(e,t){this.targetId=e,this.Ce=t}}class UE{constructor(e,t,s=Zt.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=l}}class y_{constructor(){this.ve=0,this.Fe=b_(),this.Me=Zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=$e(),t=$e(),s=$e();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:t=t.add(l);break;case 1:s=s.add(l);break;default:Te(38017,{changeType:c})}})),new yd(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=b_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Re(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Q6{constructor(e){this.Ge=e,this.ze=new Map,this.je=gs(),this.Je=Jh(),this.He=Jh(),this.Ye=new Ct(ze)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,l)=>{this.rt(l)&&t(l)}))}st(e){const t=e.targetId,s=e.Ce.count,l=this.ot(t);if(l){const c=l.target;if(Lf(c))if(s===0){const d=new Ee(c.path);this.et(t,d,$t.newNoDocument(d,Oe.min()))}else Re(s===1,20013,{expectedCount:s});else{const d=this._t(t);if(d!==s){const f=this.ut(e),g=f?this.ct(f,e,d):1;if(g!==0){this.it(t);const x=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,x)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=t;let d,f;try{d=pa(s).toUint8Array()}catch(g){if(g instanceof rE)return Qu("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new zx(d,l,c)}catch(g){return Qu(g instanceof Tu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let l=0;return s.forEach((c=>{const d=this.Ge.ht(),f=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(f)||(this.et(t,c,null),l++)})),l}Tt(e){const t=new Map;this.ze.forEach(((c,d)=>{const f=this.ot(d);if(f){if(c.current&&Lf(f.target)){const g=new Ee(f.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,$t.newNoDocument(g,e))}c.Be&&(t.set(d,c.ke()),c.qe())}}));let s=$e();this.He.forEach(((c,d)=>{let f=!0;d.forEachWhile((g=>{const x=this.ot(g);return!x||x.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const l=new xd(e,t,this.Ye,this.je,s);return this.je=gs(),this.Je=Jh(),this.He=Jh(),this.Ye=new Ct(ze),l}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,t)?l.Qe(t,1):l.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new y_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new _t(ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new _t(ze),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new y_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Jh(){return new Ct(Ee.comparator)}function b_(){return new Ct(Ee.comparator)}const X6={asc:"ASCENDING",desc:"DESCENDING"},Y6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},J6={and:"AND",or:"OR"};class W6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qp(r,e){return r.useProto3Json||fm(e)?e:{value:e}}function ec(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Z6(r,e){return ec(r,e.toTimestamp())}function Un(r){return Re(!!r,49232),Oe.fromTimestamp((function(t){const s=ga(t);return new vt(s.seconds,s.nanos)})(r))}function Ux(r,e){return Fp(r,e).canonicalString()}function Fp(r,e){const t=(function(l){return new ft(["projects",l.projectId,"databases",l.database])})(r).child("documents");return e===void 0?t:t.child(e)}function qE(r){const e=ft.fromString(r);return Re(YE(e),10190,{key:e.toString()}),e}function Bf(r,e){return Ux(r.databaseId,e.path)}function xl(r,e){const t=qE(e);if(t.get(1)!==r.databaseId.projectId)throw new ye(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ye(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ee(GE(t))}function FE(r,e){return Ux(r.databaseId,e)}function HE(r){const e=qE(r);return e.length===4?ft.emptyPath():GE(e)}function Hp(r){return new ft(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function GE(r){return Re(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function v_(r,e,t){return{name:Bf(r,e),fields:t.value.mapValue.fields}}function ek(r,e,t){const s=xl(r,e.name),l=Un(e.updateTime),c=e.createTime?Un(e.createTime):Oe.min(),d=new Dn({mapValue:{fields:e.fields}}),f=$t.newFoundDocument(s,l,c,d);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function tk(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:Te(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(x,v){return x.useProto3Json?(Re(v===void 0||typeof v=="string",58123),Zt.fromBase64String(v||"")):(Re(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Zt.fromUint8Array(v||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,f=d&&(function(x){const v=x.code===void 0?te.UNKNOWN:LE(x.code);return new ye(v,x.message||"")})(d);t=new UE(s,l,c,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=xl(r,s.document.name),c=Un(s.document.updateTime),d=s.document.createTime?Un(s.document.createTime):Oe.min(),f=new Dn({mapValue:{fields:s.document.fields}}),g=$t.newFoundDocument(l,c,d,f),x=s.targetIds||[],v=s.removedTargetIds||[];t=new pf(x,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=xl(r,s.document),c=s.readTime?Un(s.readTime):Oe.min(),d=$t.newNoDocument(l,c),f=s.removedTargetIds||[];t=new pf([],f,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=xl(r,s.document),c=s.removedTargetIds||[];t=new pf([],c,l,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new H6(l,c),f=s.targetId;t=new zE(f,d)}}return t}function qf(r,e){let t;if(e instanceof dc)t={update:v_(r,e.key,e.value)};else if(e instanceof Nm)t={delete:Bf(r,e.key)};else if(e instanceof va)t={update:v_(r,e.key,e.data),updateMask:ok(e.fieldMask)};else{if(!(e instanceof PE))return Te(16599,{Vt:e.type});t={verify:Bf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const f=d.transform;if(f instanceof Yo)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Jo)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Wo)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Zo)return{fieldPath:d.field.canonicalString(),increment:f.Ae};throw Te(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:Z6(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Te(27497)})(r,e.precondition)),t}function Gp(r,e){const t=e.currentDocument?(function(c){return c.updateTime!==void 0?On.updateTime(Un(c.updateTime)):c.exists!==void 0?On.exists(c.exists):On.none()})(e.currentDocument):On.none(),s=e.updateTransforms?e.updateTransforms.map((l=>(function(d,f){let g=null;if("setToServerValue"in f)Re(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),g=new Yo;else if("appendMissingElements"in f){const v=f.appendMissingElements.values||[];g=new Jo(v)}else if("removeAllFromArray"in f){const v=f.removeAllFromArray.values||[];g=new Wo(v)}else"increment"in f?g=new Zo(d,f.increment):Te(16584,{proto:f});const x=Ft.fromServerFormat(f.fieldPath);return new Mx(x,g)})(r,l))):[];if(e.update){e.update.name;const l=xl(r,e.update.name),c=new Dn({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=(function(g){const x=g.fieldPaths||[];return new ts(x.map((v=>Ft.fromServerFormat(v))))})(e.updateMask);return new va(l,c,d,t,s)}return new dc(l,c,t,s)}if(e.delete){const l=xl(r,e.delete);return new Nm(l,t)}if(e.verify){const l=xl(r,e.verify);return new PE(l,t)}return Te(1463,{proto:e})}function nk(r,e){return r&&r.length>0?(Re(e!==void 0,14353),r.map((t=>(function(l,c){let d=l.updateTime?Un(l.updateTime):Un(c);return d.isEqual(Oe.min())&&(d=Un(c)),new U6(d,l.transformResults||[])})(t,e)))):[]}function $E(r,e){return{documents:[FE(r,e.path)]}}function Bx(r,e){const t={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=FE(r,l);const c=(function(x){if(x.length!==0)return XE(wt.create(x,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const d=(function(x){if(x.length!==0)return x.map((v=>(function(N){return{field:di(N.field),direction:ak(N.dir)}})(v)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const f=qp(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:t,parent:l}}function sk(r,e,t,s){const{ft:l,parent:c}=Bx(r,e),d={},f=[];let g=0;return t.forEach((x=>{const v="aggregate_"+g++;d[v]=x.alias,x.aggregateType==="count"?f.push({alias:v,count:{}}):x.aggregateType==="avg"?f.push({alias:v,avg:{field:di(x.fieldPath)}}):x.aggregateType==="sum"&&f.push({alias:v,sum:{field:di(x.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:f,structuredQuery:l.structuredQuery},parent:l.parent},gt:d,parent:c}}function KE(r){let e=HE(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let l=null;if(s>0){Re(s===1,65062);const v=t.from[0];v.allDescendants?l=v.collectionId:e=e.child(v.collectionId)}let c=[];t.where&&(c=(function(w){const N=QE(w);return N instanceof wt&&kx(N)?N.getFilters():[N]})(t.where));let d=[];t.orderBy&&(d=(function(w){return w.map((N=>(function(M){return new rd(Co(M.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(N)))})(t.orderBy));let f=null;t.limit&&(f=(function(w){let N;return N=typeof w=="object"?w.value:w,fm(N)?null:N})(t.limit));let g=null;t.startAt&&(g=(function(w){const N=!!w.before,C=w.values||[];return new Qo(C,N)})(t.startAt));let x=null;return t.endAt&&(x=(function(w){const N=!w.before,C=w.values||[];return new Qo(C,N)})(t.endAt)),vE(e,l,d,c,f,"F",g,x)}function rk(r,e){const t=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:l})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function QE(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Co(t.unaryFilter.field);return nt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Co(t.unaryFilter.field);return nt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Co(t.unaryFilter.field);return nt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Co(t.unaryFilter.field);return nt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(r):r.fieldFilter!==void 0?(function(t){return nt.create(Co(t.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return wt.create(t.compositeFilter.filters.map((s=>QE(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(r):Te(30097,{filter:r})}function ak(r){return X6[r]}function ik(r){return Y6[r]}function lk(r){return J6[r]}function di(r){return{fieldPath:r.canonicalString()}}function Co(r){return Ft.fromServerFormat(r.fieldPath)}function XE(r){return r instanceof nt?(function(t){if(t.op==="=="){if(r_(t.value))return{unaryFilter:{field:di(t.field),op:"IS_NAN"}};if(s_(t.value))return{unaryFilter:{field:di(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(r_(t.value))return{unaryFilter:{field:di(t.field),op:"IS_NOT_NAN"}};if(s_(t.value))return{unaryFilter:{field:di(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:di(t.field),op:ik(t.op),value:t.value}}})(r):r instanceof wt?(function(t){const s=t.getFilters().map((l=>XE(l)));return s.length===1?s[0]:{compositeFilter:{op:lk(t.op),filters:s}}})(r):Te(54877,{filter:r})}function ok(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function YE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,t,s,l,c=Oe.min(),d=Oe.min(),f=Zt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new la(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e){this.yt=e}}function ck(r,e){let t;if(e.document)t=ek(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Ee.fromSegments(e.noDocument.path),l=jl(e.noDocument.readTime);t=$t.newNoDocument(s,l),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Te(56709);{const s=Ee.fromSegments(e.unknownDocument.path),l=jl(e.unknownDocument.version);t=$t.newUnknownDocument(s,l)}}return e.readTime&&t.setReadTime((function(l){const c=new vt(l[0],l[1]);return Oe.fromTimestamp(c)})(e.readTime)),t}function w_(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ff(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document=(function(c,d){return{name:Bf(c,d.key),fields:d.data.value.mapValue.fields,updateTime:ec(c,d.version.toTimestamp()),createTime:ec(c,d.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:Sl(e.version)};else{if(!e.isUnknownDocument())return Te(57904,{document:e});s.unknownDocument={path:t.path.toArray(),version:Sl(e.version)}}return s}function Ff(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Sl(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jl(r){const e=new vt(r.seconds,r.nanoseconds);return Oe.fromTimestamp(e)}function ul(r,e){const t=(e.baseMutations||[]).map((c=>Gp(r.yt,c)));for(let c=0;c<e.mutations.length-1;++c){const d=e.mutations[c];if(c+1<e.mutations.length&&e.mutations[c+1].transform!==void 0){const f=e.mutations[c+1];d.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(c+1,1),++c}}const s=e.mutations.map((c=>Gp(r.yt,c))),l=vt.fromMillis(e.localWriteTimeMs);return new Vx(e.batchId,l,t,s)}function Su(r){const e=jl(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?jl(r.lastLimboFreeSnapshotVersion):Oe.min();let s;return s=(function(c){return c.documents!==void 0})(r.query)?(function(c){const d=c.documents.length;return Re(d===1,1966,{count:d}),ps(bm(HE(c.documents[0])))})(r.query):(function(c){return ps(KE(c))})(r.query),new la(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Zt.fromBase64String(r.resumeToken))}function WE(r,e){const t=Sl(e.snapshotVersion),s=Sl(e.lastLimboFreeSnapshotVersion);let l;l=Lf(e.target)?$E(r.yt,e.target):Bx(r.yt,e.target).ft;const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Tl(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:l}}function ZE(r){const e=KE({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Uf(e,e.limit,"L"):e}function Yg(r,e){return new Lx(e.largestBatchId,Gp(r.yt,e.overlayMutation))}function __(r,e){const t=e.path.lastSegment();return[r,Mn(e.path.popLast()),t]}function N_(r,e,t,s){return{indexId:r,uid:e,sequenceNumber:t,readTime:Sl(s.readTime),documentKey:Mn(s.documentKey.path),largestBatchId:s.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{getBundleMetadata(e,t){return E_(e).get(t).next((s=>{if(s)return(function(c){return{id:c.bundleId,createTime:jl(c.createTime),version:c.version}})(s)}))}saveBundleMetadata(e,t){return E_(e).put((function(l){return{bundleId:l.id,createTime:Sl(Un(l.createTime)),version:l.version}})(t))}getNamedQuery(e,t){return T_(e).get(t).next((s=>{if(s)return(function(c){return{name:c.name,query:ZE(c.bundledQuery),readTime:jl(c.readTime)}})(s)}))}saveNamedQuery(e,t){return T_(e).put((function(l){return{name:l.name,readTime:Sl(Un(l.readTime)),bundledQuery:l.bundledQuery}})(t))}}function E_(r){return hn(r,mm)}function T_(r){return hn(r,gm)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const s=t.uid||"";return new Em(e,s)}getOverlay(e,t){return pu(e).get(__(this.userId,t)).next((s=>s?Yg(this.serializer,s):null))}getOverlays(e,t){const s=jr();return H.forEach(t,(l=>this.getOverlay(e,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(e,t,s){const l=[];return s.forEach(((c,d)=>{const f=new Lx(t,d);l.push(this.St(e,f))})),H.waitFor(l)}removeOverlaysForBatchId(e,t,s){const l=new Set;t.forEach((d=>l.add(Mn(d.getCollectionPath()))));const c=[];return l.forEach((d=>{const f=IDBKeyRange.bound([this.userId,d,s],[this.userId,d,s+1],!1,!0);c.push(pu(e).Z(Op,f))})),H.waitFor(c)}getOverlaysForCollection(e,t,s){const l=jr(),c=Mn(t),d=IDBKeyRange.bound([this.userId,c,s],[this.userId,c,Number.POSITIVE_INFINITY],!0);return pu(e).J(Op,d).next((f=>{for(const g of f){const x=Yg(this.serializer,g);l.set(x.getKey(),x)}return l}))}getOverlaysForCollectionGroup(e,t,s,l){const c=jr();let d;const f=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return pu(e).ee({index:WN,range:f},((g,x,v)=>{const w=Yg(this.serializer,x);c.size()<l||w.largestBatchId===d?(c.set(w.getKey(),w),d=w.largestBatchId):v.done()})).next((()=>c))}St(e,t){return pu(e).put((function(l,c,d){const[f,g,x]=__(c,d.mutation.key);return{userId:c,collectionPath:g,documentId:x,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:qf(l.yt,d.mutation)}})(this.serializer,this.userId,t))}}function pu(r){return hn(r,pm)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{bt(e){return hn(e,jx)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const s=t==null?void 0:t.value;return s?Zt.fromUint8Array(s):Zt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(zt(e.integerValue));else if("doubleValue"in e){const s=zt(e.doubleValue);isNaN(s)?this.Ft(t,13):(this.Ft(t,15),Yu(s)?t.Mt(0):t.Mt(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Ft(t,20),typeof s=="string"&&(s=ga(s)),t.xt(`${s.seconds||""}`),t.Mt(s.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(pa(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.Ft(t,45),t.Mt(s.latitude||0),t.Mt(s.longitude||0)}else"mapValue"in e?uE(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):ym(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Te(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const s=e.fields||{};this.Ft(t,55);for(const l of Object.keys(s))this.Ot(l,t),this.Ct(s[l],t)}kt(e,t){var d,f;const s=e.fields||{};this.Ft(t,53);const l=$o,c=((f=(d=s[l].arrayValue)==null?void 0:d.values)==null?void 0:f.length)||0;this.Ft(t,15),t.Mt(zt(c)),this.Ot(l,t),this.Ct(s[l],t)}Qt(e,t){const s=e.values||[];this.Ft(t,50);for(const l of s)this.Ct(l,t)}Lt(e,t){this.Ft(t,37),Ee.fromName(e).path.forEach((s=>{this.Ft(t,60),this.Ut(s,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}dl.Kt=new dl;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=255;function hk(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function S_(r){const e=64-(function(s){let l=0;for(let c=0;c<8;++c){const d=hk(255&s[c]);if(l+=d,d!==8)break}return l})(r);return Math.ceil(e/8)}class fk{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Gt(s.value),s=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Jt(s.value),s=t.next();this.Ht()}Yt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Gt(s);else if(s<2048)this.Gt(960|s>>>6),this.Gt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s);else{const l=t.codePointAt(0);this.Gt(240|l>>>18),this.Gt(128|63&l>>>12),this.Gt(128|63&l>>>6),this.Gt(128|63&l)}}this.zt()}Zt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Jt(s);else if(s<2048)this.Jt(960|s>>>6),this.Jt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s);else{const l=t.codePointAt(0);this.Jt(240|l>>>18),this.Jt(128|63&l>>>12),this.Jt(128|63&l>>>6),this.Jt(128|63&l)}}this.Ht()}Xt(e){const t=this.en(e),s=S_(t);this.tn(1+s),this.buffer[this.position++]=255&s;for(let l=t.length-s;l<t.length;++l)this.buffer[this.position++]=255&t[l]}nn(e){const t=this.en(e),s=S_(t);this.tn(1+s),this.buffer[this.position++]=~(255&s);for(let l=t.length-s;l<t.length;++l)this.buffer[this.position++]=~(255&t[l])}rn(){this.sn(Eo),this.sn(255)}_n(){this.an(Eo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(c){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,c,!1),new Uint8Array(d.buffer)})(e),s=!!(128&t[0]);t[0]^=s?255:128;for(let l=1;l<t.length;++l)t[l]^=s?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Eo?(this.sn(Eo),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Eo?(this.an(Eo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const l=new Uint8Array(s);l.set(this.buffer),this.buffer=l}}class mk{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class gk{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class xu{constructor(){this.cn=new fk,this.ln=new mk(this.cn),this.hn=new gk(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,t,s,l){this.Tn=e,this.In=t,this.En=s,this.dn=l}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,s=new Uint8Array(t);return s.set(this.dn,0),t!==e?s.set([0],this.dn.length):++s[s.length-1],new hl(this.Tn,this.In,this.En,s)}Rn(e,t,s){return{indexId:this.Tn,uid:e,arrayValue:xf(this.En),directionalValue:xf(this.dn),orderedDocumentKey:xf(t),documentKey:s.path.toArray()}}Vn(e,t,s){const l=this.Rn(e,t,s);return[l.indexId,l.uid,l.arrayValue,l.directionalValue,l.orderedDocumentKey,l.documentKey]}}function si(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=j_(r.En,e.En),t!==0?t:(t=j_(r.dn,e.dn),t!==0?t:Ee.comparator(r.In,e.In)))}function j_(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(s!==0)return s}return r.length-e.length}function xf(r){return q2()?(function(t){let s="";for(let l=0;l<t.length;l++)s+=String.fromCharCode(t[l]);return s})(r):r}function A_(r){return typeof r!="string"?r:(function(t){const s=new Uint8Array(t.length);for(let l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s})(r)}class I_{constructor(e){this.mn=new _t(((t,s)=>Ft.comparator(t.field,s.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const s=t;s.isInequality()?this.mn=this.mn.add(s):this.gn.push(s)}}get pn(){return this.mn.size>1}yn(e){if(Re(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Rp(e);if(t!==void 0&&!this.wn(t))return!1;const s=ll(e);let l=new Set,c=0,d=0;for(;c<s.length&&this.wn(s[c]);++c)l=l.add(s[c].fieldPath.canonicalString());if(c===s.length)return!0;if(this.mn.size>0){const f=this.mn.getIterator().getNext();if(!l.has(f.field.canonicalString())){const g=s[c];if(!this.Sn(f,g)||!this.bn(this.fn[d++],g))return!1}++c}for(;c<s.length;++c){const f=s[c];if(d>=this.fn.length||!this.bn(this.fn[d++],f))return!1}return!0}Dn(){if(this.pn)return null;let e=new _t(Ft.comparator);const t=[];for(const s of this.gn)if(!s.field.isKeyField())if(s.op==="array-contains"||s.op==="array-contains-any")t.push(new cf(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),t.push(new cf(s.field,0))}for(const s of this.fn)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),t.push(new cf(s.field,s.dir==="asc"?0:1)));return new Df(Df.UNKNOWN_ID,this.collectionId,t,Xu.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const s=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===s}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(r){var t,s;if(Re(r instanceof nt||r instanceof wt,20012),r instanceof nt){if(r instanceof bE){const l=((s=(t=r.value.arrayValue)==null?void 0:t.values)==null?void 0:s.map((c=>nt.create(r.field,"==",c))))||[];return wt.create(l,"or")}return r}const e=r.filters.map((l=>eT(l)));return wt.create(e,r.op)}function pk(r){if(r.getFilters().length===0)return[];const e=Qp(eT(r));return Re(tT(e),7391),$p(e)||Kp(e)?[e]:e.getFilters()}function $p(r){return r instanceof nt}function Kp(r){return r instanceof wt&&kx(r)}function tT(r){return $p(r)||Kp(r)||(function(t){if(t instanceof wt&&Lp(t)){for(const s of t.getFilters())if(!$p(s)&&!Kp(s))return!1;return!0}return!1})(r)}function Qp(r){if(Re(r instanceof nt||r instanceof wt,34018),r instanceof nt)return r;if(r.filters.length===1)return Qp(r.filters[0]);const e=r.filters.map((s=>Qp(s)));let t=wt.create(e,r.op);return t=Hf(t),tT(t)?t:(Re(t instanceof wt,64498),Re(Xo(t),40251),Re(t.filters.length>1,57927),t.filters.reduce(((s,l)=>qx(s,l))))}function qx(r,e){let t;return Re(r instanceof nt||r instanceof wt,38388),Re(e instanceof nt||e instanceof wt,25473),t=r instanceof nt?e instanceof nt?(function(l,c){return wt.create([l,c],"and")})(r,e):C_(r,e):e instanceof nt?C_(e,r):(function(l,c){if(Re(l.filters.length>0&&c.filters.length>0,48005),Xo(l)&&Xo(c))return pE(l,c.getFilters());const d=Lp(l)?l:c,f=Lp(l)?c:l,g=d.filters.map((x=>qx(x,f)));return wt.create(g,"or")})(r,e),Hf(t)}function C_(r,e){if(Xo(e))return pE(e,r.getFilters());{const t=e.filters.map((s=>qx(r,s)));return wt.create(t,"or")}}function Hf(r){if(Re(r instanceof nt||r instanceof wt,11850),r instanceof nt)return r;const e=r.getFilters();if(e.length===1)return Hf(e[0]);if(mE(r))return r;const t=e.map((l=>Hf(l))),s=[];return t.forEach((l=>{l instanceof nt?s.push(l):l instanceof wt&&(l.op===r.op?s.push(...l.filters):s.push(l))})),s.length===1?s[0]:wt.create(s,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(){this.Cn=new Fx}addToCollectionParentIndex(e,t){return this.Cn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(bs.min())}updateCollectionGroup(e,t,s){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}}class Fx{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),l=this.index[t]||new _t(ft.comparator),c=!l.has(s);return this.index[t]=l.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),l=this.index[t];return l&&l.has(s)}getEntries(e){return(this.index[e]||new _t(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_="IndexedDbIndexManager",Wh=new Uint8Array(0);class yk{constructor(e,t){this.databaseId=t,this.vn=new Fx,this.Fn=new ba((s=>Tl(s)),((s,l)=>gd(s,l))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const s=t.lastSegment(),l=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const c={collectionId:s,parent:Mn(l)};return k_(e).put(c)}return H.resolve()}getCollectionParents(e,t){const s=[],l=IDBKeyRange.bound([t,""],[LN(t),""],!1,!0);return k_(e).J(l).next((c=>{for(const d of c){if(d.collectionId!==t)break;s.push(Sr(d.parent))}return s}))}addFieldIndex(e,t){const s=yu(e),l=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(t);delete l.indexId;const c=s.add(l);if(t.indexState){const d=So(e);return c.next((f=>{d.put(N_(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return c.next()}deleteFieldIndex(e,t){const s=yu(e),l=So(e),c=To(e);return s.delete(t.indexId).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=yu(e),s=To(e),l=So(e);return t.Z().next((()=>s.Z())).next((()=>l.Z()))}createTargetIndexes(e,t){return H.forEach(this.Mn(t),(s=>this.getIndexType(e,s).next((l=>{if(l===0||l===1){const c=new I_(s).Dn();if(c!=null)return this.addFieldIndex(e,c)}}))))}getDocumentsMatchingTarget(e,t){const s=To(e);let l=!0;const c=new Map;return H.forEach(this.Mn(t),(d=>this.xn(e,d).next((f=>{l&&(l=!!f),c.set(d,f)})))).next((()=>{if(l){let d=$e();const f=[];return H.forEach(c,((g,x)=>{fe(R_,`Using index ${(function(le){return`id=${le.indexId}|cg=${le.collectionGroup}|f=${le.fields.map((_e=>`${_e.fieldPath}:${_e.kind}`)).join(",")}`})(g)} to execute ${Tl(t)}`);const v=(function(le,_e){const ge=Rp(_e);if(ge===void 0)return null;for(const G of zf(le,ge.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null})(x,g),w=(function(le,_e){const ge=new Map;for(const G of ll(_e))for(const S of zf(le,G.fieldPath))switch(S.op){case"==":case"in":ge.set(G.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return ge.set(G.fieldPath.canonicalString(),S.value),Array.from(ge.values())}return null})(x,g),N=(function(le,_e){const ge=[];let G=!0;for(const S of ll(_e)){const j=S.kind===0?c_(le,S.fieldPath,le.startAt):u_(le,S.fieldPath,le.startAt);ge.push(j.value),G&&(G=j.inclusive)}return new Qo(ge,G)})(x,g),C=(function(le,_e){const ge=[];let G=!0;for(const S of ll(_e)){const j=S.kind===0?u_(le,S.fieldPath,le.endAt):c_(le,S.fieldPath,le.endAt);ge.push(j.value),G&&(G=j.inclusive)}return new Qo(ge,G)})(x,g),M=this.On(g,x,N),Z=this.On(g,x,C),B=this.Nn(g,x,w),me=this.Bn(g.indexId,v,M,N.inclusive,Z,C.inclusive,B);return H.forEach(me,(ce=>s.Y(ce,t.limit).next((le=>{le.forEach((_e=>{const ge=Ee.fromSegments(_e.documentKey);d.has(ge)||(d=d.add(ge),f.push(ge))}))}))))})).next((()=>f))}return H.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=pk(wt.create(e.filters,"and")).map((s=>Up(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,s,l,c,d,f){const g=(t!=null?t.length:1)*Math.max(s.length,c.length),x=g/(t!=null?t.length:1),v=[];for(let w=0;w<g;++w){const N=t?this.Ln(t[w/x]):Wh,C=this.kn(e,N,s[w%x],l),M=this.qn(e,N,c[w%x],d),Z=f.map((B=>this.kn(e,N,B,!0)));v.push(...this.createRange(C,M,Z))}return v}kn(e,t,s,l){const c=new hl(e,Ee.empty(),t,s);return l?c:c.An()}qn(e,t,s,l){const c=new hl(e,Ee.empty(),t,s);return l?c.An():c}xn(e,t){const s=new I_(t),l=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,l).next((c=>{let d=null;for(const f of c)s.yn(f)&&(!d||f.fields.length>d.fields.length)&&(d=f);return d}))}getIndexType(e,t){let s=2;const l=this.Mn(t);return H.forEach(l,(c=>this.xn(e,c).next((d=>{d?s!==0&&d.fields.length<(function(g){let x=new _t(Ft.comparator),v=!1;for(const w of g.filters)for(const N of w.getFlattenedFilters())N.field.isKeyField()||(N.op==="array-contains"||N.op==="array-contains-any"?v=!0:x=x.add(N.field));for(const w of g.orderBy)w.field.isKeyField()||(x=x.add(w.field));return x.size+(v?1:0)})(c)&&(s=1):s=0})))).next((()=>(function(d){return d.limit!==null})(t)&&l.length>1&&s===2?1:s))}Qn(e,t){const s=new xu;for(const l of ll(e)){const c=t.data.field(l.fieldPath);if(c==null)return null;const d=s.Pn(l.kind);dl.Kt.Dt(c,d)}return s.un()}Ln(e){const t=new xu;return dl.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const s=new xu;return dl.Kt.Dt(nd(this.databaseId,t),s.Pn((function(c){const d=ll(c);return d.length===0?0:d[d.length-1].kind})(e))),s.un()}Nn(e,t,s){if(s===null)return[];let l=[];l.push(new xu);let c=0;for(const d of ll(e)){const f=s[c++];for(const g of l)if(this.Un(t,d.fieldPath)&&sd(f))l=this.Kn(l,d,f);else{const x=g.Pn(d.kind);dl.Kt.Dt(f,x)}}return this.Wn(l)}On(e,t,s){return this.Nn(e,t,s.position)}Wn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].un();return t}Kn(e,t,s){const l=[...e],c=[];for(const d of s.arrayValue.values||[])for(const f of l){const g=new xu;g.seed(f.un()),dl.Kt.Dt(d,g.Pn(t.kind)),c.push(g)}return c}Un(e,t){return!!e.filters.find((s=>s instanceof nt&&s.field.isEqual(t)&&(s.op==="in"||s.op==="not-in")))}getFieldIndexes(e,t){const s=yu(e),l=So(e);return(t?s.J(Dp,IDBKeyRange.bound(t,t)):s.J()).next((c=>{const d=[];return H.forEach(c,(f=>l.get([f.indexId,this.uid]).next((g=>{d.push((function(v,w){const N=w?new Xu(w.sequenceNumber,new bs(jl(w.readTime),new Ee(Sr(w.documentKey)),w.largestBatchId)):Xu.empty(),C=v.fields.map((([M,Z])=>new cf(Ft.fromServerFormat(M),Z)));return new Df(v.indexId,v.collectionGroup,C,N)})(f,g))})))).next((()=>d))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((s,l)=>{const c=s.indexState.sequenceNumber-l.indexState.sequenceNumber;return c!==0?c:ze(s.collectionGroup,l.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,s){const l=yu(e),c=So(e);return this.Gn(e).next((d=>l.J(Dp,IDBKeyRange.bound(t,t)).next((f=>H.forEach(f,(g=>c.put(N_(g.indexId,this.uid,d,s))))))))}updateIndexEntries(e,t){const s=new Map;return H.forEach(t,((l,c)=>{const d=s.get(l.collectionGroup);return(d?H.resolve(d):this.getFieldIndexes(e,l.collectionGroup)).next((f=>(s.set(l.collectionGroup,f),H.forEach(f,(g=>this.zn(e,l,g).next((x=>{const v=this.jn(c,g);return x.isEqual(v)?H.resolve():this.Jn(e,c,g,x,v)})))))))}))}Hn(e,t,s,l){return To(e).put(l.Rn(this.uid,this.$n(s,t.key),t.key))}Yn(e,t,s,l){return To(e).delete(l.Vn(this.uid,this.$n(s,t.key),t.key))}zn(e,t,s){const l=To(e);let c=new _t(si);return l.ee({index:JN,range:IDBKeyRange.only([s.indexId,this.uid,xf(this.$n(s,t))])},((d,f)=>{c=c.add(new hl(s.indexId,t,A_(f.arrayValue),A_(f.directionalValue)))})).next((()=>c))}jn(e,t){let s=new _t(si);const l=this.Qn(t,e);if(l==null)return s;const c=Rp(t);if(c!=null){const d=e.data.field(c.fieldPath);if(sd(d))for(const f of d.arrayValue.values||[])s=s.add(new hl(t.indexId,e.key,this.Ln(f),l))}else s=s.add(new hl(t.indexId,e.key,Wh,l));return s}Jn(e,t,s,l,c){fe(R_,"Updating index entries for document '%s'",t.key);const d=[];return(function(g,x,v,w,N){const C=g.getIterator(),M=x.getIterator();let Z=No(C),B=No(M);for(;Z||B;){let me=!1,ce=!1;if(Z&&B){const le=v(Z,B);le<0?ce=!0:le>0&&(me=!0)}else Z!=null?ce=!0:me=!0;me?(w(B),B=No(M)):ce?(N(Z),Z=No(C)):(Z=No(C),B=No(M))}})(l,c,si,(f=>{d.push(this.Hn(e,t,s,f))}),(f=>{d.push(this.Yn(e,t,s,f))})),H.waitFor(d)}Gn(e){let t=1;return So(e).ee({index:YN,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((s,l,c)=>{c.done(),t=l.sequenceNumber+1})).next((()=>t))}createRange(e,t,s){s=s.sort(((d,f)=>si(d,f))).filter(((d,f,g)=>!f||si(d,g[f-1])!==0));const l=[];l.push(e);for(const d of s){const f=si(d,e),g=si(d,t);if(f===0)l[0]=e.An();else if(f>0&&g<0)l.push(d),l.push(d.An());else if(g>0)break}l.push(t);const c=[];for(let d=0;d<l.length;d+=2){if(this.Zn(l[d],l[d+1]))return[];const f=l[d].Vn(this.uid,Wh,Ee.empty()),g=l[d+1].Vn(this.uid,Wh,Ee.empty());c.push(IDBKeyRange.bound(f,g))}return c}Zn(e,t){return si(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(D_)}getMinOffset(e,t){return H.mapArray(this.Mn(t),(s=>this.xn(e,s).next((l=>l||Te(44426))))).next(D_)}}function k_(r){return hn(r,Zu)}function To(r){return hn(r,Du)}function yu(r){return hn(r,Sx)}function So(r){return hn(r,ku)}function D_(r){Re(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const l=r[s].indexState.offset;Nx(l,e)<0&&(e=l),t<l.largestBatchId&&(t=l.largestBatchId)}return new bs(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nT=41943040;class kn{static withCacheSize(e){return new kn(e,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(r,e,t){const s=r.store(Ys),l=r.store(qo),c=[],d=IDBKeyRange.only(t.batchId);let f=0;const g=s.ee({range:d},((v,w,N)=>(f++,N.delete())));c.push(g.next((()=>{Re(f===1,47070,{batchId:t.batchId})})));const x=[];for(const v of t.mutations){const w=KN(e,v.key.path,t.batchId);c.push(l.delete(w)),x.push(v.key)}return H.waitFor(c).next((()=>x))}function Gf(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Te(14731);e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(nT,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);class Tm{constructor(e,t,s,l){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=l,this.Xn={}}static wt(e,t,s,l){Re(e.uid!=="",64387);const c=e.isAuthenticated()?e.uid:"";return new Tm(c,t,s,l)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ri(e).ee({index:fl,range:s},((l,c,d)=>{t=!1,d.done()})).next((()=>t))}addMutationBatch(e,t,s,l){const c=Ro(e),d=ri(e);return d.add({}).next((f=>{Re(typeof f=="number",49019);const g=new Vx(f,t,s,l),x=(function(C,M,Z){const B=Z.baseMutations.map((ce=>qf(C.yt,ce))),me=Z.mutations.map((ce=>qf(C.yt,ce)));return{userId:M,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:B,mutations:me}})(this.serializer,this.userId,g),v=[];let w=new _t(((N,C)=>ze(N.canonicalString(),C.canonicalString())));for(const N of l){const C=KN(this.userId,N.key.path,f);w=w.add(N.key.path.popLast()),v.push(d.put(x)),v.push(c.put(C,QR))}return w.forEach((N=>{v.push(this.indexManager.addToCollectionParentIndex(e,N))})),e.addOnCommittedListener((()=>{this.Xn[f]=g.keys()})),H.waitFor(v).next((()=>g))}))}lookupMutationBatch(e,t){return ri(e).get(t).next((s=>s?(Re(s.userId===this.userId,48,"Unexpected user for mutation batch",{userId:s.userId,batchId:t}),ul(this.serializer,s)):null))}er(e,t){return this.Xn[t]?H.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((s=>{if(s){const l=s.keys();return this.Xn[t]=l,l}return null}))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,l=IDBKeyRange.lowerBound([this.userId,s]);let c=null;return ri(e).ee({index:fl,range:l},((d,f,g)=>{f.userId===this.userId&&(Re(f.batchId>=s,47524,{tr:s}),c=ul(this.serializer,f)),g.done()})).next((()=>c))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=gl;return ri(e).ee({index:fl,range:t,reverse:!0},((l,c,d)=>{s=c.batchId,d.done()})).next((()=>s))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,gl],[this.userId,Number.POSITIVE_INFINITY]);return ri(e).J(fl,t).next((s=>s.map((l=>ul(this.serializer,l)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=uf(this.userId,t.path),l=IDBKeyRange.lowerBound(s),c=[];return Ro(e).ee({range:l},((d,f,g)=>{const[x,v,w]=d,N=Sr(v);if(x===this.userId&&t.path.isEqual(N))return ri(e).get(w).next((C=>{if(!C)throw Te(61480,{nr:d,batchId:w});Re(C.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:C.userId,batchId:w}),c.push(ul(this.serializer,C))}));g.done()})).next((()=>c))}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new _t(ze);const l=[];return t.forEach((c=>{const d=uf(this.userId,c.path),f=IDBKeyRange.lowerBound(d),g=Ro(e).ee({range:f},((x,v,w)=>{const[N,C,M]=x,Z=Sr(C);N===this.userId&&c.path.isEqual(Z)?s=s.add(M):w.done()}));l.push(g)})),H.waitFor(l).next((()=>this.rr(e,s)))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,l=s.length+1,c=uf(this.userId,s),d=IDBKeyRange.lowerBound(c);let f=new _t(ze);return Ro(e).ee({range:d},((g,x,v)=>{const[w,N,C]=g,M=Sr(N);w===this.userId&&s.isPrefixOf(M)?M.length===l&&(f=f.add(C)):v.done()})).next((()=>this.rr(e,f)))}rr(e,t){const s=[],l=[];return t.forEach((c=>{l.push(ri(e).get(c).next((d=>{if(d===null)throw Te(35274,{batchId:c});Re(d.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:d.userId,batchId:c}),s.push(ul(this.serializer,d))})))})),H.waitFor(l).next((()=>s))}removeMutationBatch(e,t){return sT(e.le,this.userId,t).next((s=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),H.forEach(s,(l=>this.referenceDelegate.markPotentiallyOrphaned(e,l))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return H.resolve();const s=IDBKeyRange.lowerBound((function(d){return[d]})(this.userId)),l=[];return Ro(e).ee({range:s},((c,d,f)=>{if(c[0]===this.userId){const g=Sr(c[1]);l.push(g)}else f.done()})).next((()=>{Re(l.length===0,56720,{sr:l.map((c=>c.canonicalString()))})}))}))}containsKey(e,t){return rT(e,this.userId,t)}_r(e){return aT(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:gl,lastStreamToken:""}))}}function rT(r,e,t){const s=uf(e,t.path),l=s[1],c=IDBKeyRange.lowerBound(s);let d=!1;return Ro(r).ee({range:c,X:!0},((f,g,x)=>{const[v,w,N]=f;v===e&&w===l&&(d=!0),x.done()})).next((()=>d))}function ri(r){return hn(r,Ys)}function Ro(r){return hn(r,qo)}function aT(r){return hn(r,Ju)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Al(0)}static cr(){return new Al(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const s=new Al(t.highestTargetId);return t.highestTargetId=s.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Oe.fromTimestamp(new vt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,s){return this.lr(e).next((l=>(l.highestListenSequenceNumber=t,s&&(l.lastRemoteSnapshotVersion=s.toTimestamp()),t>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=t),this.hr(e,l))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((s=>(s.targetCount+=1,this.Tr(t,s),this.hr(e,s))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>jo(e).delete(t.targetId))).next((()=>this.lr(e))).next((s=>(Re(s.targetCount>0,8065),s.targetCount-=1,this.hr(e,s))))}removeTargets(e,t,s){let l=0;const c=[];return jo(e).ee(((d,f)=>{const g=Su(f);g.sequenceNumber<=t&&s.get(g.targetId)===null&&(l++,c.push(this.removeTargetData(e,g)))})).next((()=>H.waitFor(c))).next((()=>l))}forEachTarget(e,t){return jo(e).ee(((s,l)=>{const c=Su(l);t(c)}))}lr(e){return M_(e).get(Vf).next((t=>(Re(t!==null,2888),t)))}hr(e,t){return M_(e).put(Vf,t)}Pr(e,t){return jo(e).put(WE(this.serializer,t))}Tr(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const s=Tl(t),l=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let c=null;return jo(e).ee({range:l,index:XN},((d,f,g)=>{const x=Su(f);gd(t,x.target)&&(c=x,g.done())})).next((()=>c))}addMatchingKeys(e,t,s){const l=[],c=hi(e);return t.forEach((d=>{const f=Mn(d.path);l.push(c.put({targetId:s,path:f})),l.push(this.referenceDelegate.addReference(e,s,d))})),H.waitFor(l)}removeMatchingKeys(e,t,s){const l=hi(e);return H.forEach(t,(c=>{const d=Mn(c.path);return H.waitFor([l.delete([s,d]),this.referenceDelegate.removeReference(e,s,c)])}))}removeMatchingKeysForTargetId(e,t){const s=hi(e),l=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(l)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),l=hi(e);let c=$e();return l.ee({range:s,X:!0},((d,f,g)=>{const x=Sr(d[1]),v=new Ee(x);c=c.add(v)})).next((()=>c))}containsKey(e,t){const s=Mn(t.path),l=IDBKeyRange.bound([s],[LN(s)],!1,!0);let c=0;return hi(e).ee({index:Tx,X:!0,range:l},(([d,f],g,x)=>{d!==0&&(c++,x.done())})).next((()=>c>0))}At(e,t){return jo(e).get(t).next((s=>s?Su(s):null))}}function jo(r){return hn(r,Fo)}function M_(r){return hn(r,pl)}function hi(r){return hn(r,Ho)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="LruGarbageCollector",iT=1048576;function P_([r,e],[t,s]){const l=ze(r,t);return l===0?ze(e,s):l}class vk{constructor(e){this.Ir=e,this.buffer=new _t(P_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();P_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lT{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(V_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ii(t)?fe(V_,"Ignoring IndexedDB error during garbage collection: ",t):await Ai(t)}await this.Vr(3e5)}))}}class wk{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return H.resolve(es.ce);const s=new vk(t);return this.mr.forEachTarget(e,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(O_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),O_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,l,c,d,f,g,x;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),l=this.params.maximumSequenceNumbersToCollect):l=w,d=Date.now(),this.nthSequenceNumber(e,l)))).next((w=>(s=w,f=Date.now(),this.removeTargets(e,s,t)))).next((w=>(c=w,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((w=>(x=Date.now(),Ao()<=tt.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-v}ms
	Determined least recently used ${l} in `+(f-d)+`ms
	Removed ${c} targets in `+(g-f)+`ms
	Removed ${w} documents in `+(x-g)+`ms
Total Duration: ${x-v}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:w}))))}}function oT(r,e){return new wk(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,t){this.db=e,this.garbageCollector=oT(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((s=>t.next((l=>s+l))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((s,l)=>t(l)))}addReference(e,t,s){return Zh(e,s)}removeReference(e,t,s){return Zh(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Zh(e,t)}br(e,t){return(function(l,c){let d=!1;return aT(l).te((f=>rT(l,f,c).next((g=>(g&&(d=!0),H.resolve(!g)))))).next((()=>d))})(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[];let c=0;return this.Sr(e,((d,f)=>{if(f<=t){const g=this.br(e,d).next((x=>{if(!x)return c++,s.getEntry(e,d).next((()=>(s.removeEntry(d,Oe.min()),hi(e).delete((function(w){return[0,Mn(w.path)]})(d)))))}));l.push(g)}})).next((()=>H.waitFor(l))).next((()=>s.apply(e))).next((()=>c))}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Zh(e,t)}Sr(e,t){const s=hi(e);let l,c=es.ce;return s.ee({index:Tx},(([d,f],{path:g,sequenceNumber:x})=>{d===0?(c!==es.ce&&t(new Ee(Sr(l)),c),c=x,l=g):c=es.ce})).next((()=>{c!==es.ce&&t(new Ee(Sr(l)),c)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Zh(r,e){return hi(r).put((function(s,l){return{targetId:0,path:Mn(s.path),sequenceNumber:l}})(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(){this.changes=new ba((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?H.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return rl(e).put(s)}removeEntry(e,t,s){return rl(e).delete((function(c,d){const f=c.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],Ff(d),f[f.length-1]]})(t,s))}updateMetadata(e,t){return this.getMetadata(e).next((s=>(s.byteSize+=t,this.Dr(e,s))))}getEntry(e,t){let s=$t.newInvalidDocument(t);return rl(e).ee({index:df,range:IDBKeyRange.only(bu(t))},((l,c)=>{s=this.Cr(t,c)})).next((()=>s))}vr(e,t){let s={size:0,document:$t.newInvalidDocument(t)};return rl(e).ee({index:df,range:IDBKeyRange.only(bu(t))},((l,c)=>{s={document:this.Cr(t,c),size:Gf(c)}})).next((()=>s))}getEntries(e,t){let s=gs();return this.Fr(e,t,((l,c)=>{const d=this.Cr(l,c);s=s.insert(l,d)})).next((()=>s))}Mr(e,t){let s=gs(),l=new Ct(Ee.comparator);return this.Fr(e,t,((c,d)=>{const f=this.Cr(c,d);s=s.insert(c,f),l=l.insert(c,Gf(d))})).next((()=>({documents:s,Or:l})))}Fr(e,t,s){if(t.isEmpty())return H.resolve();let l=new _t(U_);t.forEach((g=>l=l.add(g)));const c=IDBKeyRange.bound(bu(l.first()),bu(l.last())),d=l.getIterator();let f=d.getNext();return rl(e).ee({index:df,range:c},((g,x,v)=>{const w=Ee.fromSegments([...x.prefixPath,x.collectionGroup,x.documentId]);for(;f&&U_(f,w)<0;)s(f,null),f=d.getNext();f&&f.isEqual(w)&&(s(f,x),f=d.hasNext()?d.getNext():null),f?v.j(bu(f)):v.done()})).next((()=>{for(;f;)s(f,null),f=d.hasNext()?d.getNext():null}))}getDocumentsMatchingQuery(e,t,s,l,c){const d=t.path,f=[d.popLast().toArray(),d.lastSegment(),Ff(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],g=[d.popLast().toArray(),d.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return rl(e).J(IDBKeyRange.bound(f,g,!0)).next((x=>{c==null||c.incrementDocumentReadCount(x.length);let v=gs();for(const w of x){const N=this.Cr(Ee.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);N.isFoundDocument()&&(pd(t,N)||l.has(N.key))&&(v=v.insert(N.key,N))}return v}))}getAllFromCollectionGroup(e,t,s,l){let c=gs();const d=z_(t,s),f=z_(t,bs.max());return rl(e).ee({index:QN,range:IDBKeyRange.bound(d,f,!0)},((g,x,v)=>{const w=this.Cr(Ee.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);c=c.insert(w.key,w),c.size===l&&v.done()})).next((()=>c))}newChangeBuffer(e){return new Ek(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return L_(e).get(kp).next((t=>(Re(!!t,20021),t)))}Dr(e,t){return L_(e).put(kp,t)}Cr(e,t){if(t){const s=ck(this.serializer,t);if(!(s.isNoDocument()&&s.version.isEqual(Oe.min())))return s}return $t.newInvalidDocument(e)}}function uT(r){return new Nk(r)}class Ek extends cT{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new ba((s=>s.toString()),((s,l)=>s.isEqual(l)))}applyChanges(e){const t=[];let s=0,l=new _t(((c,d)=>ze(c.canonicalString(),d.canonicalString())));return this.changes.forEach(((c,d)=>{const f=this.Br.get(c);if(t.push(this.Nr.removeEntry(e,c,f.readTime)),d.isValidDocument()){const g=w_(this.Nr.serializer,d);l=l.add(c.path.popLast());const x=Gf(g);s+=x-f.size,t.push(this.Nr.addEntry(e,c,g))}else if(s-=f.size,this.trackRemovals){const g=w_(this.Nr.serializer,d.convertToNoDocument(Oe.min()));t.push(this.Nr.addEntry(e,c,g))}})),l.forEach((c=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,c))})),t.push(this.Nr.updateMetadata(e,s)),H.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((s=>(this.Br.set(t,{size:s.size,readTime:s.document.readTime}),s.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:s,Or:l})=>(l.forEach(((c,d)=>{this.Br.set(c,{size:d,readTime:s.get(c).readTime})})),s)))}}function L_(r){return hn(r,Wu)}function rl(r){return hn(r,Mf)}function bu(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function z_(r,e){const t=e.documentKey.path.toArray();return[r,Ff(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function U_(r,e){const t=r.path.toArray(),s=e.path.toArray();let l=0;for(let c=0;c<t.length-2&&c<s.length-2;++c)if(l=ze(t[c],s[c]),l)return l;return l=ze(t.length,s.length),l||(l=ze(t[t.length-2],s[s.length-2]),l||ze(t[t.length-1],s[s.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,t,s,l){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((l=>(s=l,this.remoteDocumentCache.getEntry(e,t)))).next((l=>(s!==null&&Pu(s.mutation,l,ts.empty(),vt.now()),l)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,$e()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=$e()){const l=jr();return this.populateOverlays(e,l,t).next((()=>this.computeViews(e,t,l,s).next((c=>{let d=Eu();return c.forEach(((f,g)=>{d=d.insert(f,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const s=jr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,$e())))}populateOverlays(e,t,s){const l=[];return s.forEach((c=>{t.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((d,f)=>{t.set(d,f)}))}))}computeViews(e,t,s,l){let c=gs();const d=Vu(),f=(function(){return Vu()})();return t.forEach(((g,x)=>{const v=s.get(x.key);l.has(x.key)&&(v===void 0||v.mutation instanceof va)?c=c.insert(x.key,x):v!==void 0?(d.set(x.key,v.mutation.getFieldMask()),Pu(v.mutation,x,v.mutation.getFieldMask(),vt.now())):d.set(x.key,ts.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((x,v)=>d.set(x,v))),t.forEach(((x,v)=>f.set(x,new Tk(v,d.get(x)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Vu();let l=new Ct(((d,f)=>d-f)),c=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const f of d)f.keys().forEach((g=>{const x=t.get(g);if(x===null)return;let v=s.get(g)||ts.empty();v=f.applyToLocalView(x,v),s.set(g,v);const w=(l.get(f.batchId)||$e()).add(g);l=l.insert(f.batchId,w)}))})).next((()=>{const d=[],f=l.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),x=g.key,v=g.value,w=AE();v.forEach((N=>{if(!c.has(N)){const C=ME(t.get(N),s.get(N));C!==null&&w.set(N,C),c=c.add(N)}})),d.push(this.documentOverlayCache.saveOverlays(e,x,w))}return H.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,l){return(function(d){return Ee.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):wE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,l):this.getDocumentsMatchingCollectionQuery(e,t,s,l)}getNextDocuments(e,t,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,l-c.size):H.resolve(jr());let f=Bo,g=c;return d.next((x=>H.forEach(x,((v,w)=>(f<w.largestBatchId&&(f=w.largestBatchId),c.get(v)?H.resolve():this.remoteDocumentCache.getEntry(e,v).next((N=>{g=g.insert(v,N)}))))).next((()=>this.populateOverlays(e,x,c))).next((()=>this.computeViews(e,g,x,$e()))).next((v=>({batchId:f,changes:jE(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((s=>{let l=Eu();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,l){const c=t.collectionGroup;let d=Eu();return this.indexManager.getCollectionParents(e,c).next((f=>H.forEach(f,(g=>{const x=(function(w,N){return new uc(N,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,x,s,l).next((v=>{v.forEach(((w,N)=>{d=d.insert(w,N)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,l)))).next((d=>{c.forEach(((g,x)=>{const v=x.getKey();d.get(v)===null&&(d=d.insert(v,$t.newInvalidDocument(v)))}));let f=Eu();return d.forEach(((g,x)=>{const v=c.get(g);v!==void 0&&Pu(v.mutation,x,ts.empty(),vt.now()),pd(t,x)&&(f=f.insert(g,x))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return H.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(l){return{id:l.id,version:l.version,createTime:Un(l.createTime)}})(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(l){return{name:l.name,query:ZE(l.bundledQuery),readTime:Un(l.readTime)}})(t)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(){this.overlays=new Ct(Ee.comparator),this.qr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){const s=jr();return H.forEach(t,(l=>this.getOverlay(e,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((l,c)=>{this.St(e,t,c)})),H.resolve()}removeOverlaysForBatchId(e,t,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),H.resolve()}getOverlaysForCollection(e,t,s){const l=jr(),c=t.length+1,d=new Ee(t.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const g=f.getNext().value,x=g.getKey();if(!t.isPrefixOf(x.path))break;x.path.length===c&&g.largestBatchId>s&&l.set(g.getKey(),g)}return H.resolve(l)}getOverlaysForCollectionGroup(e,t,s,l){let c=new Ct(((x,v)=>x-v));const d=this.overlays.getIterator();for(;d.hasNext();){const x=d.getNext().value;if(x.getKey().getCollectionGroup()===t&&x.largestBatchId>s){let v=c.get(x.largestBatchId);v===null&&(v=jr(),c=c.insert(x.largestBatchId,v)),v.set(x.getKey(),x)}}const f=jr(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((x,v)=>f.set(x,v))),!(f.size()>=l)););return H.resolve(f)}St(e,t,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new Lx(t,s));let c=this.qr.get(t);c===void 0&&(c=$e(),this.qr.set(t,c)),this.qr.set(t,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(){this.Qr=new _t(yn.$r),this.Ur=new _t(yn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new yn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new yn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ee(new ft([])),s=new yn(t,e),l=new yn(t,e+1),c=[];return this.Ur.forEachInRange([s,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ee(new ft([])),s=new yn(t,e),l=new yn(t,e+1);let c=$e();return this.Ur.forEachInRange([s,l],(d=>{c=c.add(d.key)})),c}containsKey(e){const t=new yn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class yn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ee.comparator(e.key,t.key)||ze(e.Yr,t.Yr)}static Kr(e,t){return ze(e.Yr,t.Yr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new _t(yn.$r)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Vx(c,t,s,l);this.mutationQueue.push(d);for(const f of l)this.Zr=this.Zr.add(new yn(f.key,c)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return H.resolve(d)}lookupMutationBatch(e,t){return H.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,l=this.ei(s),c=l<0?0:l;return H.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?gl:this.tr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new yn(t,0),l=new yn(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(d=>{const f=this.Xr(d.Yr);c.push(f)})),H.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new _t(ze);return t.forEach((l=>{const c=new yn(l,0),d=new yn(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(f=>{s=s.add(f.Yr)}))})),H.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,l=s.length+1;let c=s;Ee.isDocumentKey(c)||(c=c.child(""));const d=new yn(new Ee(c),0);let f=new _t(ze);return this.Zr.forEachWhile((g=>{const x=g.key.path;return!!s.isPrefixOf(x)&&(x.length===l&&(f=f.add(g.Yr)),!0)}),d),H.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const l=this.Xr(s);l!==null&&t.push(l)})),t}removeMutationBatch(e,t){Re(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return H.forEach(t.mutations,(l=>{const c=new yn(l.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new yn(t,0),l=this.Zr.firstAfterOrEqual(s);return H.resolve(t.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e){this.ri=e,this.docs=(function(){return new Ct(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,l=this.docs.get(s),c=l?l.size:0,d=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return H.resolve(s?s.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let s=gs();return t.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():$t.newInvalidDocument(l))})),H.resolve(s)}getDocumentsMatchingQuery(e,t,s,l){let c=gs();const d=t.path,f=new Ee(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:x,value:{document:v}}=g.getNext();if(!d.isPrefixOf(x.path))break;x.path.length>d.length+1||Nx(qN(v),s)<=0||(l.has(v.key)||pd(t,v))&&(c=c.insert(v.key,v.mutableCopy()))}return H.resolve(c)}getAllFromCollectionGroup(e,t,s,l){Te(9500)}ii(e,t){return H.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new Rk(this)}getSize(e){return H.resolve(this.size)}}class Rk extends cT{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?t.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(s)})),H.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e){this.persistence=e,this.si=new ba((t=>Tl(t)),gd),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.oi=0,this._i=new Hx,this.targetCount=0,this.ai=Al.ur()}forEachTarget(e,t){return this.si.forEach(((s,l)=>t(l))),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),H.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Al(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.Pr(t),H.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,s){let l=0;const c=[];return this.si.forEach(((d,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,f.targetId)),l++)})),H.waitFor(c).next((()=>l))}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return H.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),H.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const l=this.persistence.referenceDelegate,c=[];return l&&t.forEach((d=>{c.push(l.markPotentiallyOrphaned(e,d))})),H.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),H.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return H.resolve(s)}containsKey(e,t){return H.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,t){this.ui={},this.overlays={},this.ci=new es(0),this.li=!1,this.li=!0,this.hi=new Ak,this.referenceDelegate=e(this),this.Pi=new kk(this),this.indexManager=new xk,this.remoteDocumentCache=(function(l){return new Ck(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new JE(t),this.Ii=new Sk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new Ik(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){fe("MemoryPersistence","Starting transaction:",e);const l=new Dk(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,t){return H.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class Dk extends HN{constructor(e){super(),this.currentSequenceNumber=e}}class Sm{constructor(e){this.persistence=e,this.Ri=new Hx,this.Vi=null}static mi(e){return new Sm(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),H.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),H.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.fi,(s=>{const l=Ee.fromPath(s);return this.gi(e,l).next((c=>{c||t.removeEntry(l,Oe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return H.or([()=>H.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class $f{constructor(e,t){this.persistence=e,this.pi=new ba((s=>Mn(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=oT(this,t)}static mi(e,t){return new $f(e,t)}Ei(){}di(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((l=>s+l))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return H.forEach(this.pi,((s,l)=>this.br(e,s,l).next((c=>c?H.resolve():t(l)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(d=>this.br(e,d,t).next((f=>{f||(s++,c.removeEntry(d,Oe.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),H.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ff(e.data.value)),t}br(e,t,s){return H.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const l=this.pi.get(t);return H.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.serializer=e}k(e,t,s,l){const c=new hm("createOrUpgrade",t);s<1&&l>=1&&((function(g){g.createObjectStore(md)})(e),(function(g){g.createObjectStore(Ju,{keyPath:KR}),g.createObjectStore(Ys,{keyPath:Jw,autoIncrement:!0}).createIndex(fl,Ww,{unique:!0}),g.createObjectStore(qo)})(e),B_(e),(function(g){g.createObjectStore(ol)})(e));let d=H.resolve();return s<3&&l>=3&&(s!==0&&((function(g){g.deleteObjectStore(Ho),g.deleteObjectStore(Fo),g.deleteObjectStore(pl)})(e),B_(e)),d=d.next((()=>(function(g){const x=g.store(pl),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Oe.min().toTimestamp(),targetCount:0};return x.put(Vf,v)})(c)))),s<4&&l>=4&&(s!==0&&(d=d.next((()=>(function(g,x){return x.store(Ys).J().next((w=>{g.deleteObjectStore(Ys),g.createObjectStore(Ys,{keyPath:Jw,autoIncrement:!0}).createIndex(fl,Ww,{unique:!0});const N=x.store(Ys),C=w.map((M=>N.put(M)));return H.waitFor(C)}))})(e,c)))),d=d.next((()=>{(function(g){g.createObjectStore(Go,{keyPath:n6})})(e)}))),s<5&&l>=5&&(d=d.next((()=>this.yi(c)))),s<6&&l>=6&&(d=d.next((()=>((function(g){g.createObjectStore(Wu)})(e),this.wi(c))))),s<7&&l>=7&&(d=d.next((()=>this.Si(c)))),s<8&&l>=8&&(d=d.next((()=>this.bi(e,c)))),s<9&&l>=9&&(d=d.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e)}))),s<10&&l>=10&&(d=d.next((()=>this.Di(c)))),s<11&&l>=11&&(d=d.next((()=>{(function(g){g.createObjectStore(mm,{keyPath:s6})})(e),(function(g){g.createObjectStore(gm,{keyPath:r6})})(e)}))),s<12&&l>=12&&(d=d.next((()=>{(function(g){const x=g.createObjectStore(pm,{keyPath:d6});x.createIndex(Op,h6,{unique:!1}),x.createIndex(WN,f6,{unique:!1})})(e)}))),s<13&&l>=13&&(d=d.next((()=>(function(g){const x=g.createObjectStore(Mf,{keyPath:XR});x.createIndex(df,YR),x.createIndex(QN,JR)})(e))).next((()=>this.Ci(e,c))).next((()=>e.deleteObjectStore(ol)))),s<14&&l>=14&&(d=d.next((()=>this.Fi(e,c)))),s<15&&l>=15&&(d=d.next((()=>(function(g){g.createObjectStore(Sx,{keyPath:a6,autoIncrement:!0}).createIndex(Dp,i6,{unique:!1}),g.createObjectStore(ku,{keyPath:l6}).createIndex(YN,o6,{unique:!1}),g.createObjectStore(Du,{keyPath:c6}).createIndex(JN,u6,{unique:!1})})(e)))),s<16&&l>=16&&(d=d.next((()=>{t.objectStore(ku).clear()})).next((()=>{t.objectStore(Du).clear()}))),s<17&&l>=17&&(d=d.next((()=>{(function(g){g.createObjectStore(jx,{keyPath:m6})})(e)}))),s<18&&l>=18&&q2()&&(d=d.next((()=>{t.objectStore(ku).clear()})).next((()=>{t.objectStore(Du).clear()}))),d}wi(e){let t=0;return e.store(ol).ee(((s,l)=>{t+=Gf(l)})).next((()=>{const s={byteSize:t};return e.store(Wu).put(kp,s)}))}yi(e){const t=e.store(Ju),s=e.store(Ys);return t.J().next((l=>H.forEach(l,(c=>{const d=IDBKeyRange.bound([c.userId,gl],[c.userId,c.lastAcknowledgedBatchId]);return s.J(fl,d).next((f=>H.forEach(f,(g=>{Re(g.userId===c.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const x=ul(this.serializer,g);return sT(e,c.userId,x).next((()=>{}))}))))}))))}Si(e){const t=e.store(Ho),s=e.store(ol);return e.store(pl).get(Vf).next((l=>{const c=[];return s.ee(((d,f)=>{const g=new ft(d),x=(function(w){return[0,Mn(w)]})(g);c.push(t.get(x).next((v=>v?H.resolve():(w=>t.put({targetId:0,path:Mn(w),sequenceNumber:l.highestListenSequenceNumber}))(g))))})).next((()=>H.waitFor(c)))}))}bi(e,t){e.createObjectStore(Zu,{keyPath:t6});const s=t.store(Zu),l=new Fx,c=d=>{if(l.add(d)){const f=d.lastSegment(),g=d.popLast();return s.put({collectionId:f,parent:Mn(g)})}};return t.store(ol).ee({X:!0},((d,f)=>{const g=new ft(d);return c(g.popLast())})).next((()=>t.store(qo).ee({X:!0},(([d,f,g],x)=>{const v=Sr(f);return c(v.popLast())}))))}Di(e){const t=e.store(Fo);return t.ee(((s,l)=>{const c=Su(l),d=WE(this.serializer,c);return t.put(d)}))}Ci(e,t){const s=t.store(ol),l=[];return s.ee(((c,d)=>{const f=t.store(Mf),g=(function(w){return w.document?new Ee(ft.fromString(w.document.name).popFirst(5)):w.noDocument?Ee.fromSegments(w.noDocument.path):w.unknownDocument?Ee.fromSegments(w.unknownDocument.path):Te(36783)})(d).path.toArray(),x={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};l.push(f.put(x))})).next((()=>H.waitFor(l)))}Fi(e,t){const s=t.store(Ys),l=uT(this.serializer),c=new Gx(Sm.mi,this.serializer.yt);return s.J().next((d=>{const f=new Map;return d.forEach((g=>{let x=f.get(g.userId)??$e();ul(this.serializer,g).keys().forEach((v=>x=x.add(v))),f.set(g.userId,x)})),H.forEach(f,((g,x)=>{const v=new Rn(x),w=Em.wt(this.serializer,v),N=c.getIndexManager(v),C=Tm.wt(v,this.serializer,N,c.referenceDelegate);return new dT(l,C,w,N).recalculateAndSaveOverlaysForDocumentKeys(new Mp(t,es.ce),g).next()}))}))}}function B_(r){r.createObjectStore(Ho,{keyPath:ZR}).createIndex(Tx,e6,{unique:!0}),r.createObjectStore(Fo,{keyPath:"targetId"}).createIndex(XN,WR,{unique:!0}),r.createObjectStore(pl)}const ai="IndexedDbPersistence",Jg=18e5,Wg=5e3,Zg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Mk="main";class $x{constructor(e,t,s,l,c,d,f,g,x,v,w=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Mi=c,this.window=d,this.document=f,this.xi=x,this.Oi=v,this.Ni=w,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=N=>Promise.resolve(),!$x.v())throw new ye(te.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _k(this,l),this.$i=t+Mk,this.serializer=new JE(g),this.Ui=new yi(this.$i,this.Ni,new Ok(this.serializer)),this.hi=new dk,this.Pi=new bk(this.referenceDelegate,this.serializer),this.remoteDocumentCache=uT(this.serializer),this.Ii=new uk,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,v===!1&&Yt(ai,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ye(te.FAILED_PRECONDITION,Zg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new es(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>ef(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Ii(e))return fe(ai,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return fe(ai,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return vu(e).get(_o).next((t=>H.resolve(this.es(t))))}ts(e){return ef(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Jg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const s=hn(t,Go);return s.J().next((l=>{const c=this.ss(l,Jg),d=l.filter((f=>c.indexOf(f)===-1));return H.forEach(d,(f=>s.delete(f.clientId))).next((()=>d))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?H.resolve(!0):vu(e).get(_o).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Wg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ye(te.FAILED_PRECONDITION,Zg);return!1}}return!(!this.networkEnabled||!this.inForeground)||ef(e).J().next((s=>this.ss(s,Wg).find((l=>{if(this.clientId!==l.clientId){const c=!this.networkEnabled&&l.networkEnabled,d=!this.inForeground&&l.inForeground,f=this.networkEnabled===l.networkEnabled;if(c||d&&f)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&fe(ai,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[md,Go],(e=>{const t=new Mp(e,es.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((s=>this.rs(s.updateTimeMs,t)&&!this.us(s.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>ef(e).J().next((t=>this.ss(t,Jg).map((s=>s.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Tm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new yk(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Em.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,s){fe(ai,"Starting transaction:",e);const l=t==="readonly"?"readonly":"readwrite",c=(function(g){return g===18?x6:g===17?nE:g===16?p6:g===15?Ax:g===14?tE:g===13?eE:g===12?g6:g===11?ZN:void Te(60245)})(this.Ni);let d;return this.Ui.runTransaction(e,l,c,(f=>(d=new Mp(f,this.ci?this.ci.next():es.ce),t==="readwrite-primary"?this.Hi(d).next((g=>!!g||this.Yi(d))).next((g=>{if(!g)throw Yt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ye(te.FAILED_PRECONDITION,FN);return s(d)})).next((g=>this.Xi(d).next((()=>g)))):this.Is(d).next((()=>s(d)))))).then((f=>(d.raiseOnCommittedEvent(),f)))}Is(e){return vu(e).get(_o).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Wg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ye(te.FAILED_PRECONDITION,Zg)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vu(e).put(_o,t)}static v(){return yi.v()}Zi(e){const t=vu(e);return t.get(_o).next((s=>this.es(s)?(fe(ai,"Releasing primary lease."),t.delete(_o)):H.resolve()))}rs(e,t){const s=Date.now();return!(e<s-t)&&(!(e>s)||(Yt(`Detected an update time that is in the future: ${e} > ${s}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;B2()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const s=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return fe(ai,`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Yt(ai,"Failed to get zombied client id.",s),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Yt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vu(r){return hn(r,md)}function ef(r){return hn(r,Go)}function hT(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,t,s,l){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=l}static As(e,t){let s=$e(),l=$e();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Kx(e,t.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return B2()?8:GN(dn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,l){const c={result:null};return this.ys(e,t).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,t,l,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new Vk;return this.Ss(e,t,d).next((f=>{if(c.result=f,this.Vs)return this.bs(e,t,d,f.size)}))})).next((()=>c.result))}bs(e,t,s,l){return s.documentReadCount<this.fs?(Ao()<=tt.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Io(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),H.resolve()):(Ao()<=tt.DEBUG&&fe("QueryEngine","Query:",Io(t),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Ao()<=tt.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Io(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ps(t))):H.resolve())}ys(e,t){if(d_(t))return H.resolve(null);let s=ps(t);return this.indexManager.getIndexType(e,s).next((l=>l===0?null:(t.limit!==null&&l===1&&(t=Uf(t,null,"F"),s=ps(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=$e(...c);return this.ps.getDocuments(e,d).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const x=this.Ds(t,f);return this.Cs(t,x,d,g.readTime)?this.ys(e,Uf(t,null,"F")):this.vs(e,x,t,g)}))))})))))}ws(e,t,s,l){return d_(t)||l.isEqual(Oe.min())?H.resolve(null):this.ps.getDocuments(e,s).next((c=>{const d=this.Ds(t,c);return this.Cs(t,d,s,l)?H.resolve(null):(Ao()<=tt.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Io(t)),this.vs(e,d,t,BN(l,Bo)).next((f=>f)))}))}Ds(e,t){let s=new _t(TE(e));return t.forEach(((l,c)=>{pd(e,c)&&(s=s.add(c))})),s}Cs(e,t,s,l){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,t,s){return Ao()<=tt.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Io(t)),this.ps.getDocumentsMatchingQuery(e,t,bs.min(),s)}vs(e,t,s,l){return this.ps.getDocumentsMatchingQuery(e,s,l).next((c=>(t.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx="LocalStore",Pk=3e8;class Lk{constructor(e,t,s,l){this.persistence=e,this.Fs=t,this.serializer=l,this.Ms=new Ct(ze),this.xs=new ba((c=>Tl(c)),gd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dT(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function mT(r,e,t,s){return new Lk(r,e,t,s)}async function gT(r,e){const t=Ae(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return t.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],f=[];let g=$e();for(const x of l){d.push(x.batchId);for(const v of x.mutations)g=g.add(v.key)}for(const x of c){f.push(x.batchId);for(const v of x.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next((x=>({Ls:x,removedBatchIds:d,addedBatchIds:f})))}))}))}function zk(r,e){const t=Ae(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,x,v){const w=x.batch,N=w.keys();let C=H.resolve();return N.forEach((M=>{C=C.next((()=>v.getEntry(g,M))).next((Z=>{const B=x.docVersions.get(M);Re(B!==null,48541),Z.version.compareTo(B)<0&&(w.applyToRemoteDocument(Z,x),Z.isValidDocument()&&(Z.setReadTime(x.commitVersion),v.addEntry(Z)))}))})),C.next((()=>f.mutationQueue.removeMutationBatch(g,w)))})(t,s,e,c).next((()=>c.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=$e();for(let x=0;x<f.mutationResults.length;++x)f.mutationResults[x].transformResults.length>0&&(g=g.add(f.batch.mutations[x].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,l)))}))}function pT(r){const e=Ae(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Uk(r,e){const t=Ae(r),s=e.snapshotVersion;let l=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});l=t.Ms;const f=[];e.targetChanges.forEach(((v,w)=>{const N=l.get(w);if(!N)return;f.push(t.Pi.removeMatchingKeys(c,v.removedDocuments,w).next((()=>t.Pi.addMatchingKeys(c,v.addedDocuments,w))));let C=N.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(w)!==null?C=C.withResumeToken(Zt.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,s)),l=l.insert(w,C),(function(Z,B,me){return Z.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=Pk?!0:me.addedDocuments.size+me.modifiedDocuments.size+me.removedDocuments.size>0})(N,C,v)&&f.push(t.Pi.updateTargetData(c,C))}));let g=gs(),x=$e();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(c,v))})),f.push(Bk(c,d,e.documentUpdates).next((v=>{g=v.ks,x=v.qs}))),!s.isEqual(Oe.min())){const v=t.Pi.getLastRemoteSnapshotVersion(c).next((w=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));f.push(v)}return H.waitFor(f).next((()=>d.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,g,x))).next((()=>g))})).then((c=>(t.Ms=l,c)))}function Bk(r,e,t){let s=$e(),l=$e();return t.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let d=gs();return t.forEach(((f,g)=>{const x=c.get(f);g.isFoundDocument()!==x.isFoundDocument()&&(l=l.add(f)),g.isNoDocument()&&g.version.isEqual(Oe.min())?(e.removeEntry(f,g.readTime),d=d.insert(f,g)):!x.isValidDocument()||g.version.compareTo(x.version)>0||g.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(g),d=d.insert(f,g)):fe(Qx,"Ignoring outdated watch update for ",f,". Current version:",x.version," Watch version:",g.version)})),{ks:d,qs:l}}))}function qk(r,e){const t=Ae(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=gl),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Kf(r,e){const t=Ae(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return t.Pi.getTargetData(s,e).next((c=>c?(l=c,H.resolve(l)):t.Pi.allocateTargetId(s).next((d=>(l=new la(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=t.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function tc(r,e,t){const s=Ae(r),l=s.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!Ii(d))throw d;fe(Qx,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(l.target)}function Qf(r,e,t){const s=Ae(r);let l=Oe.min(),c=$e();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,x,v){const w=Ae(g),N=w.xs.get(v);return N!==void 0?H.resolve(w.Ms.get(N)):w.Pi.getTargetData(x,v)})(s,d,ps(e)).next((f=>{if(f)return l=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,f.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,t?l:Oe.min(),t?c:$e()))).next((f=>(bT(s,EE(e),f),{documents:f,Qs:c})))))}function xT(r,e){const t=Ae(r),s=Ae(t.Pi),l=t.Ms.get(e);return l?Promise.resolve(l.target):t.persistence.runTransaction("Get target data","readonly",(c=>s.At(c,e).next((d=>d?d.target:null))))}function yT(r,e){const t=Ae(r),s=t.Os.get(e)||Oe.min();return t.persistence.runTransaction("Get new document changes","readonly",(l=>t.Ns.getAllFromCollectionGroup(l,e,BN(s,Bo),Number.MAX_SAFE_INTEGER))).then((l=>(bT(t,e,l),l)))}function bT(r,e,t){let s=r.Os.get(e)||Oe.min();t.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(e,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="firestore_clients";function q_(r,e){return`${vT}_${r}_${e}`}const wT="firestore_mutations";function F_(r,e,t){let s=`${wT}_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}const _T="firestore_targets";function ep(r,e){return`${_T}_${r}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="SharedClientState";class Xf{constructor(e,t,s,l){this.user=e,this.batchId=t,this.state=s,this.error=l}static Ws(e,t,s){const l=JSON.parse(s);let c,d=typeof l=="object"&&["pending","acknowledged","rejected"].indexOf(l.state)!==-1&&(l.error===void 0||typeof l.error=="object");return d&&l.error&&(d=typeof l.error.message=="string"&&typeof l.error.code=="string",d&&(c=new ye(l.error.code,l.error.message))),d?new Xf(e,t,l.state,c):(Yt(Er,`Failed to parse mutation state for ID '${t}': ${s}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lu{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Ws(e,t){const s=JSON.parse(t);let l,c=typeof s=="object"&&["not-current","current","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return c&&s.error&&(c=typeof s.error.message=="string"&&typeof s.error.code=="string",c&&(l=new ye(s.error.code,s.error.message))),c?new Lu(e,s.state,l):(Yt(Er,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const s=JSON.parse(t);let l=typeof s=="object"&&s.activeTargetIds instanceof Array,c=Dx();for(let d=0;l&&d<s.activeTargetIds.length;++d)l=$N(s.activeTargetIds[d]),c=c.add(s.activeTargetIds[d]);return l?new Yf(e,c):(Yt(Er,`Failed to parse client data for instance '${e}': ${t}`),null)}}class Xx{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Xx(t.clientId,t.onlineState):(Yt(Er,`Failed to parse online state: ${e}`),null)}}class Xp{constructor(){this.activeTargetIds=Dx()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tp{constructor(e,t,s,l,c){this.window=e,this.Mi=t,this.persistenceKey=s,this.Js=l,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ct(ze),this.started=!1,this.Xs=[];const d=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.eo=q_(this.persistenceKey,this.Js),this.no=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Xp),this.ro=new RegExp(`^${vT}_${d}_([^_]*)$`),this.io=new RegExp(`^${wT}_${d}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${_T}_${d}_(\\d+)$`),this.oo=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this._o=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const s of e){if(s===this.Js)continue;const l=this.getItem(q_(this.persistenceKey,s));if(l){const c=Yf.Ws(s,l);c&&(this.Zs=this.Zs.insert(c.clientId,c))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const s=this.uo(t);s&&this.co(s)}for(const s of this.Xs)this.Ys(s);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((s,l)=>{l.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,s){this.ho(e,t,s),this.Po(e)}addLocalQueryTarget(e,t=!0){let s="not-current";if(this.isActiveQueryTarget(e)){const l=this.storage.getItem(ep(this.persistenceKey,e));if(l){const c=Lu.Ws(e,l);c&&(s=c.state)}}return t&&this.To.zs(e),this.ao(),s}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ep(this.persistenceKey,e))}updateQueryState(e,t,s){this.Io(e,t,s)}handleUserChange(e,t,s){t.forEach((l=>{this.Po(l)})),this.currentUser=e,s.forEach((l=>{this.addPendingMutation(l)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return fe(Er,"READ",e,t),t}setItem(e,t){fe(Er,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){fe(Er,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(fe(Er,"EVENT",t.key,t.newValue),t.key===this.eo)return void Yt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const s=this.Ro(t.key);return this.Vo(s,null)}{const s=this.mo(t.key,t.newValue);if(s)return this.Vo(s.clientId,s)}}else if(this.io.test(t.key)){if(t.newValue!==null){const s=this.fo(t.key,t.newValue);if(s)return this.po(s)}}else if(this.so.test(t.key)){if(t.newValue!==null){const s=this.yo(t.key,t.newValue);if(s)return this.wo(s)}}else if(t.key===this.oo){if(t.newValue!==null){const s=this.uo(t.newValue);if(s)return this.co(s)}}else if(t.key===this.no){const s=(function(c){let d=es.ce;if(c!=null)try{const f=JSON.parse(c);Re(typeof f=="number",30636,{So:c}),d=f}catch(f){Yt(Er,"Failed to read sequence number from WebStorage",f)}return d})(t.newValue);s!==es.ce&&this.sequenceNumberHandler(s)}else if(t.key===this._o){const s=this.bo(t.newValue);await Promise.all(s.map((l=>this.syncEngine.Do(l))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,s){const l=new Xf(this.currentUser,e,t,s),c=F_(this.persistenceKey,this.currentUser,e);this.setItem(c,l.Gs())}Po(e){const t=F_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,s){const l=ep(this.persistenceKey,e),c=new Lu(e,t,s);this.setItem(l,c.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const s=this.Ro(e);return Yf.Ws(s,t)}fo(e,t){const s=this.io.exec(e),l=Number(s[1]),c=s[2]!==void 0?s[2]:null;return Xf.Ws(new Rn(c),l,t)}yo(e,t){const s=this.so.exec(e),l=Number(s[1]);return Lu.Ws(l,t)}uo(e){return Xx.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);fe(Er,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const s=t?this.Zs.insert(e,t):this.Zs.remove(e),l=this.lo(this.Zs),c=this.lo(s),d=[],f=[];return c.forEach((g=>{l.has(g)||d.push(g)})),l.forEach((g=>{c.has(g)||f.push(g)})),this.syncEngine.Fo(d,f).then((()=>{this.Zs=s}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=Dx();return e.forEach(((s,l)=>{t=t.unionWith(l.activeTargetIds)})),t}}class NT{constructor(){this.Mo=new Xp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Xp,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="ConnectivityMonitor";class G_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(H_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(H_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tf=null;function Yp(){return tf===null?tf=(function(){return 268435456+Math.round(2147483648*Math.random())})():tf++,"0x"+tf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="RestConnection",Hk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Gk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Pf?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(e,t,s,l,c){const d=Yp(),f=this.zo(e,t.toUriEncodedString());fe(np,`Sending RPC '${e}' ${d}:`,f,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,c);const{host:x}=new URL(f),v=ic(x);return this.Jo(e,f,g,s,v).then((w=>(fe(np,`Received RPC '${e}' ${d}: `,w),w)),(w=>{throw Qu(np,`RPC '${e}' ${d} failed with error: `,w,"url: ",f,"request:",s),w}))}Ho(e,t,s,l,c,d){return this.Go(e,t,s,l,c)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+cc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((l,c)=>e[c]=l)),s&&s.headers.forEach(((l,c)=>e[c]=l))}zo(e,t){const s=Hk[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="WebChannelConnection";class Kk extends Gk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,l,c){const d=Yp();return new Promise(((f,g)=>{const x=new kN;x.setWithCredentials(!0),x.listenOnce(DN.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case of.NO_ERROR:const w=x.getResponseJson();fe(Cn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(w)),f(w);break;case of.TIMEOUT:fe(Cn,`RPC '${e}' ${d} timed out`),g(new ye(te.DEADLINE_EXCEEDED,"Request time out"));break;case of.HTTP_ERROR:const N=x.getStatus();if(fe(Cn,`RPC '${e}' ${d} failed with status:`,N,"response text:",x.getResponseText()),N>0){let C=x.getResponseJson();Array.isArray(C)&&(C=C[0]);const M=C==null?void 0:C.error;if(M&&M.status&&M.message){const Z=(function(me){const ce=me.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(ce)>=0?ce:te.UNKNOWN})(M.status);g(new ye(Z,M.message))}else g(new ye(te.UNKNOWN,"Server responded with status "+x.getStatus()))}else g(new ye(te.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:d,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{fe(Cn,`RPC '${e}' ${d} completed.`)}}));const v=JSON.stringify(l);fe(Cn,`RPC '${e}' ${d} sending request:`,l),x.send(t,"POST",v,s,15)}))}T_(e,t,s){const l=Yp(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=VN(),f=MN(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(g.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=c.join("");fe(Cn,`Creating RPC '${e}' stream ${l}: ${v}`,g);const w=d.createWebChannel(v,g);this.I_(w);let N=!1,C=!1;const M=new $k({Yo:B=>{C?fe(Cn,`Not sending because RPC '${e}' stream ${l} is closed:`,B):(N||(fe(Cn,`Opening RPC '${e}' stream ${l} transport.`),w.open(),N=!0),fe(Cn,`RPC '${e}' stream ${l} sending:`,B),w.send(B))},Zo:()=>w.close()}),Z=(B,me,ce)=>{B.listen(me,(le=>{try{ce(le)}catch(_e){setTimeout((()=>{throw _e}),0)}}))};return Z(w,Nu.EventType.OPEN,(()=>{C||(fe(Cn,`RPC '${e}' stream ${l} transport opened.`),M.o_())})),Z(w,Nu.EventType.CLOSE,(()=>{C||(C=!0,fe(Cn,`RPC '${e}' stream ${l} transport closed`),M.a_(),this.E_(w))})),Z(w,Nu.EventType.ERROR,(B=>{C||(C=!0,Qu(Cn,`RPC '${e}' stream ${l} transport errored. Name:`,B.name,"Message:",B.message),M.a_(new ye(te.UNAVAILABLE,"The operation could not be completed")))})),Z(w,Nu.EventType.MESSAGE,(B=>{var me;if(!C){const ce=B.data[0];Re(!!ce,16349);const le=ce,_e=(le==null?void 0:le.error)||((me=le[0])==null?void 0:me.error);if(_e){fe(Cn,`RPC '${e}' stream ${l} received error:`,_e);const ge=_e.status;let G=(function(A){const O=on[A];if(O!==void 0)return LE(O)})(ge),S=_e.message;G===void 0&&(G=te.INTERNAL,S="Unknown error status: "+ge+" with message "+_e.message),C=!0,M.a_(new ye(G,S)),w.close()}else fe(Cn,`RPC '${e}' stream ${l} received:`,ce),M.u_(ce)}})),Z(f,ON.STAT_EVENT,(B=>{B.stat===Ip.PROXY?fe(Cn,`RPC '${e}' stream ${l} detected buffering proxy`):B.stat===Ip.NOPROXY&&fe(Cn,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{M.__()}),0),M}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(){return typeof window<"u"?window:null}function yf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(r){return new W6(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,t,s=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,t-s);l>0&&fe("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="PersistentStream";class ST{constructor(e,t,s,l,c,d,f,g){this.Mi=e,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new TT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Yt(t.toString()),Yt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===t&&this.G_(s,l)}),(s=>{e((()=>{const l=new ye(te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe($_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(fe($_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Qk extends ST{constructor(e,t,s,l,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,l,d),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=tk(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Oe.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Oe.min():d.readTime?Un(d.readTime):Oe.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Hp(this.serializer),t.addTarget=(function(c,d){let f;const g=d.target;if(f=Lf(g)?{documents:$E(c,g)}:{query:Bx(c,g).ft},f.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){f.resumeToken=BE(c,d.resumeToken);const x=qp(c,d.expectedCount);x!==null&&(f.expectedCount=x)}else if(d.snapshotVersion.compareTo(Oe.min())>0){f.readTime=ec(c,d.snapshotVersion.toTimestamp());const x=qp(c,d.expectedCount);x!==null&&(f.expectedCount=x)}return f})(this.serializer,e);const s=rk(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Hp(this.serializer),t.removeTarget=e,this.q_(t)}}class Xk extends ST{constructor(e,t,s,l,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=nk(e.writeResults,e.commitTime),s=Un(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Hp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>qf(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{}class Jk extends Yk{constructor(e,t,s,l){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ye(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,Fp(t,s),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ye(te.UNKNOWN,c.toString())}))}Ho(e,t,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,f])=>this.connection.Ho(e,Fp(t,s),l,d,f,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ye(te.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Wk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Yt(t),this.aa=!1):fe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il="RemoteStore";class Zk{constructor(e,t,s,l,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Ol(this)&&(fe(Il,"Restarting streams for network reachability change."),await(async function(g){const x=Ae(g);x.Ea.add(4),await bd(x),x.Ra.set("Unknown"),x.Ea.delete(4),await Am(x)})(this))}))})),this.Ra=new Wk(s,l)}}async function Am(r){if(Ol(r))for(const e of r.da)await e(!0)}async function bd(r){for(const e of r.da)await e(!1)}function Im(r,e){const t=Ae(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Wx(t)?Jx(t):fc(t).O_()&&Yx(t,e))}function nc(r,e){const t=Ae(r),s=fc(t);t.Ia.delete(e),s.O_()&&jT(t,e),t.Ia.size===0&&(s.O_()?s.L_():Ol(t)&&t.Ra.set("Unknown"))}function Yx(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fc(r).Y_(e)}function jT(r,e){r.Va.Ue(e),fc(r).Z_(e)}function Jx(r){r.Va=new Q6({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),fc(r).start(),r.Ra.ua()}function Wx(r){return Ol(r)&&!fc(r).x_()&&r.Ia.size>0}function Ol(r){return Ae(r).Ea.size===0}function AT(r){r.Va=void 0}async function e9(r){r.Ra.set("Online")}async function t9(r){r.Ia.forEach(((e,t)=>{Yx(r,e)}))}async function n9(r,e){AT(r),Wx(r)?(r.Ra.ha(e),Jx(r)):r.Ra.set("Unknown")}async function s9(r,e,t){if(r.Ra.set("Online"),e instanceof UE&&e.state===2&&e.cause)try{await(async function(l,c){const d=c.cause;for(const f of c.targetIds)l.Ia.has(f)&&(await l.remoteSyncer.rejectListen(f,d),l.Ia.delete(f),l.Va.removeTarget(f))})(r,e)}catch(s){fe(Il,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Jf(r,s)}else if(e instanceof pf?r.Va.Ze(e):e instanceof zE?r.Va.st(e):r.Va.tt(e),!t.isEqual(Oe.min()))try{const s=await pT(r.localStore);t.compareTo(s)>=0&&await(function(c,d){const f=c.Va.Tt(d);return f.targetChanges.forEach(((g,x)=>{if(g.resumeToken.approximateByteSize()>0){const v=c.Ia.get(x);v&&c.Ia.set(x,v.withResumeToken(g.resumeToken,d))}})),f.targetMismatches.forEach(((g,x)=>{const v=c.Ia.get(g);if(!v)return;c.Ia.set(g,v.withResumeToken(Zt.EMPTY_BYTE_STRING,v.snapshotVersion)),jT(c,g);const w=new la(v.target,g,x,v.sequenceNumber);Yx(c,w)})),c.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){fe(Il,"Failed to raise snapshot:",s),await Jf(r,s)}}async function Jf(r,e,t){if(!Ii(e))throw e;r.Ea.add(1),await bd(r),r.Ra.set("Offline"),t||(t=()=>pT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{fe(Il,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Am(r)}))}function IT(r,e){return e().catch((t=>Jf(r,t,e)))}async function hc(r){const e=Ae(r),t=Ti(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:gl;for(;r9(e);)try{const l=await qk(e.localStore,s);if(l===null){e.Ta.length===0&&t.L_();break}s=l.batchId,a9(e,l)}catch(l){await Jf(e,l)}CT(e)&&RT(e)}function r9(r){return Ol(r)&&r.Ta.length<10}function a9(r,e){r.Ta.push(e);const t=Ti(r);t.O_()&&t.X_&&t.ea(e.mutations)}function CT(r){return Ol(r)&&!Ti(r).x_()&&r.Ta.length>0}function RT(r){Ti(r).start()}async function i9(r){Ti(r).ra()}async function l9(r){const e=Ti(r);for(const t of r.Ta)e.ea(t.mutations)}async function o9(r,e,t){const s=r.Ta.shift(),l=Px.from(s,e,t);await IT(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await hc(r)}async function c9(r,e){e&&Ti(r).X_&&await(async function(s,l){if((function(d){return G6(d)&&d!==te.ABORTED})(l.code)){const c=s.Ta.shift();Ti(s).B_(),await IT(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await hc(s)}})(r,e),CT(r)&&RT(r)}async function K_(r,e){const t=Ae(r);t.asyncQueue.verifyOperationInProgress(),fe(Il,"RemoteStore received new credentials");const s=Ol(t);t.Ea.add(3),await bd(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Am(t)}async function Jp(r,e){const t=Ae(r);e?(t.Ea.delete(2),await Am(t)):e||(t.Ea.add(2),await bd(t),t.Ra.set("Unknown"))}function fc(r){return r.ma||(r.ma=(function(t,s,l){const c=Ae(t);return c.sa(),new Qk(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:e9.bind(null,r),t_:t9.bind(null,r),r_:n9.bind(null,r),H_:s9.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Wx(r)?Jx(r):r.Ra.set("Unknown")):(await r.ma.stop(),AT(r))}))),r.ma}function Ti(r){return r.fa||(r.fa=(function(t,s,l){const c=Ae(t);return c.sa(),new Xk(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:i9.bind(null,r),r_:c9.bind(null,r),ta:l9.bind(null,r),na:o9.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await hc(r)):(await r.fa.stop(),r.Ta.length>0&&(fe(Il,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,t,s,l,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,l,c){const d=Date.now()+s,f=new Zx(e,t,d,l,c);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cm(r,e){if(Yt("AsyncQueue",`${e}: ${r}`),Ii(r))return new ye(te.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{static emptySet(e){return new Lo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ee.comparator(t.key,s.key):(t,s)=>Ee.comparator(t.key,s.key),this.keyedMap=Eu(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Lo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const l=t.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Lo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(){this.ga=new Ct(Ee.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class sc{constructor(e,t,s,l,c,d,f,g,x){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=x}static fromInitialDocuments(e,t,s,l,c){const d=[];return t.forEach((f=>{d.push({type:0,doc:f})})),new sc(e,t,Lo.emptySet(t),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let l=0;l<t.length;l++)if(t[l].type!==s[l].type||!t[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class d9{constructor(){this.queries=X_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const l=Ae(t),c=l.queries;l.queries=X_(),c.forEach(((d,f)=>{for(const g of f.Sa)g.onError(s)}))})(this,new ye(te.ABORTED,"Firestore shutting down"))}}function X_(){return new ba((r=>NE(r)),vm)}async function kT(r,e){const t=Ae(r);let s=3;const l=e.query;let c=t.queries.get(l);c?!c.ba()&&e.Da()&&(s=2):(c=new u9,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await t.onListen(l,!0);break;case 1:c.wa=await t.onListen(l,!1);break;case 2:await t.onFirstRemoteStoreListen(l)}}catch(d){const f=Cm(d,`Initialization of query '${Io(e.query)}' failed`);return void e.onError(f)}t.queries.set(l,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&ey(t)}async function DT(r,e){const t=Ae(r),s=e.query;let l=3;const c=t.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function h9(r,e){const t=Ae(r);let s=!1;for(const l of e){const c=l.query,d=t.queries.get(c);if(d){for(const f of d.Sa)f.Fa(l)&&(s=!0);d.wa=l}}s&&ey(t)}function f9(r,e,t){const s=Ae(r),l=s.queries.get(e);if(l)for(const c of l.Sa)c.onError(t);s.queries.delete(e)}function ey(r){r.Ca.forEach((e=>{e.next()}))}var Wp,Y_;(Y_=Wp||(Wp={})).Ma="default",Y_.Cache="cache";class OT{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new sc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=sc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Wp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.key=e}}class VT{constructor(e){this.key=e}}class PT{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=$e(),this.mutatedKeys=$e(),this.eu=TE(e),this.tu=new Lo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new Q_,l=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,d=l,f=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,x=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((v,w)=>{const N=l.get(v),C=pd(this.query,w)?w:null,M=!!N&&this.mutatedKeys.has(N.key),Z=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let B=!1;N&&C?N.data.isEqual(C.data)?M!==Z&&(s.track({type:3,doc:C}),B=!0):this.su(N,C)||(s.track({type:2,doc:C}),B=!0,(g&&this.eu(C,g)>0||x&&this.eu(C,x)<0)&&(f=!0)):!N&&C?(s.track({type:0,doc:C}),B=!0):N&&!C&&(s.track({type:1,doc:N}),B=!0,(g||x)&&(f=!0)),B&&(C?(d=d.add(C),c=Z?c.add(v):c.delete(v)):(d=d.delete(v),c=c.delete(v)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const v=this.query.limitType==="F"?d.last():d.first();d=d.delete(v.key),c=c.delete(v.key),s.track({type:1,doc:v})}return{tu:d,iu:s,Cs:f,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((v,w)=>(function(C,M){const Z=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:B})}};return Z(C)-Z(M)})(v.type,w.type)||this.eu(v.doc,w.doc))),this.ou(s),l=l??!1;const f=t&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,x=g!==this.Za;return this.Za=g,d.length!==0||x?{snapshot:new sc(this.query,e.tu,c,d,e.mutatedKeys,g===0,x,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Q_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=$e(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new VT(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new MT(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=$e();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return sc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const mc="SyncEngine";class m9{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class g9{constructor(e){this.key=e,this.hu=!1}}class p9{constructor(e,t,s,l,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new ba((f=>NE(f)),vm),this.Iu=new Map,this.Eu=new Set,this.du=new Ct(Ee.comparator),this.Au=new Map,this.Ru=new Hx,this.Vu={},this.mu=new Map,this.fu=Al.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function x9(r,e,t=!0){const s=Rm(r);let l;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await LT(s,e,t,!0),l}async function y9(r,e){const t=Rm(r);await LT(t,e,!0,!1)}async function LT(r,e,t,s){const l=await Kf(r.localStore,ps(e)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,t);let f;return s&&(f=await ty(r,e,c,d==="current",l.resumeToken)),r.isPrimaryClient&&t&&Im(r.remoteStore,l),f}async function ty(r,e,t,s,l){r.pu=(w,N,C)=>(async function(Z,B,me,ce){let le=B.view.ru(me);le.Cs&&(le=await Qf(Z.localStore,B.query,!1).then((({documents:S})=>B.view.ru(S,le))));const _e=ce&&ce.targetChanges.get(B.targetId),ge=ce&&ce.targetMismatches.get(B.targetId)!=null,G=B.view.applyChanges(le,Z.isPrimaryClient,_e,ge);return Zp(Z,B.targetId,G.au),G.snapshot})(r,w,N,C);const c=await Qf(r.localStore,e,!0),d=new PT(e,c.Qs),f=d.ru(c.documents),g=yd.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",l),x=d.applyChanges(f,r.isPrimaryClient,g);Zp(r,t,x.au);const v=new m9(e,t,d);return r.Tu.set(e,v),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),x.snapshot}async function b9(r,e,t){const s=Ae(r),l=s.Tu.get(e),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((d=>!vm(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await tc(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),t&&nc(s.remoteStore,l.targetId),rc(s,l.targetId)})).catch(Ai)):(rc(s,l.targetId),await tc(s.localStore,l.targetId,!0))}async function v9(r,e){const t=Ae(r),s=t.Tu.get(e),l=t.Iu.get(s.targetId);t.isPrimaryClient&&l.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),nc(t.remoteStore,s.targetId))}async function w9(r,e,t){const s=ay(r);try{const l=await(function(d,f){const g=Ae(d),x=vt.now(),v=f.reduce(((C,M)=>C.add(M.key)),$e());let w,N;return g.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let M=gs(),Z=$e();return g.Ns.getEntries(C,v).next((B=>{M=B,M.forEach(((me,ce)=>{ce.isValidDocument()||(Z=Z.add(me))}))})).next((()=>g.localDocuments.getOverlayedDocuments(C,M))).next((B=>{w=B;const me=[];for(const ce of f){const le=q6(ce,w.get(ce.key).overlayedDocument);le!=null&&me.push(new va(ce.key,le,hE(le.value.mapValue),On.exists(!0)))}return g.mutationQueue.addMutationBatch(C,x,me,f)})).next((B=>{N=B;const me=B.applyToLocalDocumentSet(w,Z);return g.documentOverlayCache.saveOverlays(C,B.batchId,me)}))})).then((()=>({batchId:N.batchId,changes:jE(w)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),(function(d,f,g){let x=d.Vu[d.currentUser.toKey()];x||(x=new Ct(ze)),x=x.insert(f,g),d.Vu[d.currentUser.toKey()]=x})(s,l.batchId,t),await Ri(s,l.changes),await hc(s.remoteStore)}catch(l){const c=Cm(l,"Failed to persist write");t.reject(c)}}async function zT(r,e){const t=Ae(r);try{const s=await Uk(t.localStore,e);e.targetChanges.forEach(((l,c)=>{const d=t.Au.get(c);d&&(Re(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?Re(d.hu,14607):l.removedDocuments.size>0&&(Re(d.hu,42227),d.hu=!1))})),await Ri(t,s,e)}catch(s){await Ai(s)}}function J_(r,e,t){const s=Ae(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const l=[];s.Tu.forEach(((c,d)=>{const f=d.view.va(e);f.snapshot&&l.push(f.snapshot)})),(function(d,f){const g=Ae(d);g.onlineState=f;let x=!1;g.queries.forEach(((v,w)=>{for(const N of w.Sa)N.va(f)&&(x=!0)})),x&&ey(g)})(s.eventManager,e),l.length&&s.Pu.H_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function _9(r,e,t){const s=Ae(r);s.sharedClientState.updateQueryState(e,"rejected",t);const l=s.Au.get(e),c=l&&l.key;if(c){let d=new Ct(Ee.comparator);d=d.insert(c,$t.newNoDocument(c,Oe.min()));const f=$e().add(c),g=new xd(Oe.min(),new Map,new Ct(ze),d,f);await zT(s,g),s.du=s.du.remove(c),s.Au.delete(e),ry(s)}else await tc(s.localStore,e,!1).then((()=>rc(s,e,t))).catch(Ai)}async function N9(r,e){const t=Ae(r),s=e.batch.batchId;try{const l=await zk(t.localStore,e);sy(t,s,null),ny(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ri(t,l)}catch(l){await Ai(l)}}async function E9(r,e,t){const s=Ae(r);try{const l=await(function(d,f){const g=Ae(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let v;return g.mutationQueue.lookupMutationBatch(x,f).next((w=>(Re(w!==null,37113),v=w.keys(),g.mutationQueue.removeMutationBatch(x,w)))).next((()=>g.mutationQueue.performConsistencyCheck(x))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(x,v,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,v))).next((()=>g.localDocuments.getDocuments(x,v)))}))})(s.localStore,e);sy(s,e,t),ny(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ri(s,l)}catch(l){await Ai(l)}}function ny(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function sy(r,e,t){const s=Ae(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(e);c&&(t?c.reject(t):c.resolve(),l=l.remove(e)),s.Vu[s.currentUser.toKey()]=l}}function rc(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||UT(r,s)}))}function UT(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(nc(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),ry(r))}function Zp(r,e,t){for(const s of t)s instanceof MT?(r.Ru.addReference(s.key,e),T9(r,s)):s instanceof VT?(fe(mc,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||UT(r,s.key)):Te(19791,{wu:s})}function T9(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(fe(mc,"New document in limbo: "+t),r.Eu.add(s),ry(r))}function ry(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Ee(ft.fromString(e)),s=r.fu.next();r.Au.set(s,new g9(t)),r.du=r.du.insert(t,s),Im(r.remoteStore,new la(ps(bm(t.path)),s,"TargetPurposeLimboResolution",es.ce))}}async function Ri(r,e,t){const s=Ae(r),l=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{d.push(s.pu(g,e,t).then((x=>{var v;if((x||t)&&s.isPrimaryClient){const w=x?!x.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(x){l.push(x);const w=Kx.As(g.targetId,x);c.push(w)}})))})),await Promise.all(d),s.Pu.H_(l),await(async function(g,x){const v=Ae(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>H.forEach(x,(N=>H.forEach(N.Es,(C=>v.persistence.referenceDelegate.addReference(w,N.targetId,C))).next((()=>H.forEach(N.ds,(C=>v.persistence.referenceDelegate.removeReference(w,N.targetId,C)))))))))}catch(w){if(!Ii(w))throw w;fe(Qx,"Failed to update sequence numbers: "+w)}for(const w of x){const N=w.targetId;if(!w.fromCache){const C=v.Ms.get(N),M=C.snapshotVersion,Z=C.withLastLimboFreeSnapshotVersion(M);v.Ms=v.Ms.insert(N,Z)}}})(s.localStore,c))}async function S9(r,e){const t=Ae(r);if(!t.currentUser.isEqual(e)){fe(mc,"User change. New user:",e.toKey());const s=await gT(t.localStore,e);t.currentUser=e,(function(c,d){c.mu.forEach((f=>{f.forEach((g=>{g.reject(new ye(te.CANCELLED,d))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ri(t,s.Ls)}}function j9(r,e){const t=Ae(r),s=t.Au.get(e);if(s&&s.hu)return $e().add(s.key);{let l=$e();const c=t.Iu.get(e);if(!c)return l;for(const d of c){const f=t.Tu.get(d);l=l.unionWith(f.view.nu)}return l}}async function A9(r,e){const t=Ae(r),s=await Qf(t.localStore,e.query,!0),l=e.view.cu(s);return t.isPrimaryClient&&Zp(t,e.targetId,l.au),l}async function I9(r,e){const t=Ae(r);return yT(t.localStore,e).then((s=>Ri(t,s)))}async function C9(r,e,t,s){const l=Ae(r),c=await(function(f,g){const x=Ae(f),v=Ae(x.mutationQueue);return x.persistence.runTransaction("Lookup mutation documents","readonly",(w=>v.er(w,g).next((N=>N?x.localDocuments.getDocuments(w,N):H.resolve(null)))))})(l.localStore,e);c!==null?(t==="pending"?await hc(l.remoteStore):t==="acknowledged"||t==="rejected"?(sy(l,e,s||null),ny(l,e),(function(f,g){Ae(Ae(f).mutationQueue).ir(g)})(l.localStore,e)):Te(6720,"Unknown batchState",{Su:t}),await Ri(l,c)):fe(mc,"Cannot apply mutation batch with id: "+e)}async function R9(r,e){const t=Ae(r);if(Rm(t),ay(t),e===!0&&t.gu!==!0){const s=t.sharedClientState.getAllActiveQueryTargets(),l=await W_(t,s.toArray());t.gu=!0,await Jp(t.remoteStore,!0);for(const c of l)Im(t.remoteStore,c)}else if(e===!1&&t.gu!==!1){const s=[];let l=Promise.resolve();t.Iu.forEach(((c,d)=>{t.sharedClientState.isLocalQueryTarget(d)?s.push(d):l=l.then((()=>(rc(t,d),tc(t.localStore,d,!0)))),nc(t.remoteStore,d)})),await l,await W_(t,s),(function(d){const f=Ae(d);f.Au.forEach(((g,x)=>{nc(f.remoteStore,x)})),f.Ru.Jr(),f.Au=new Map,f.du=new Ct(Ee.comparator)})(t),t.gu=!1,await Jp(t.remoteStore,!1)}}async function W_(r,e,t){const s=Ae(r),l=[],c=[];for(const d of e){let f;const g=s.Iu.get(d);if(g&&g.length!==0){f=await Kf(s.localStore,ps(g[0]));for(const x of g){const v=s.Tu.get(x),w=await A9(s,v);w.snapshot&&c.push(w.snapshot)}}else{const x=await xT(s.localStore,d);f=await Kf(s.localStore,x),await ty(s,BT(x),d,!1,f.resumeToken)}l.push(f)}return s.Pu.H_(c),l}function BT(r){return vE(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function k9(r){return(function(t){return Ae(Ae(t).persistence).Ts()})(Ae(r).localStore)}async function D9(r,e,t,s){const l=Ae(r);if(l.gu)return void fe(mc,"Ignoring unexpected query state notification.");const c=l.Iu.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const d=await yT(l.localStore,EE(c[0])),f=xd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Zt.EMPTY_BYTE_STRING);await Ri(l,d,f);break}case"rejected":await tc(l.localStore,e,!0),rc(l,e,s);break;default:Te(64155,t)}}async function O9(r,e,t){const s=Rm(r);if(s.gu){for(const l of e){if(s.Iu.has(l)&&s.sharedClientState.isActiveQueryTarget(l)){fe(mc,"Adding an already active target "+l);continue}const c=await xT(s.localStore,l),d=await Kf(s.localStore,c);await ty(s,BT(c),d.targetId,!1,d.resumeToken),Im(s.remoteStore,d)}for(const l of t)s.Iu.has(l)&&await tc(s.localStore,l,!1).then((()=>{nc(s.remoteStore,l),rc(s,l)})).catch(Ai)}}function Rm(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=zT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=j9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_9.bind(null,e),e.Pu.H_=h9.bind(null,e.eventManager),e.Pu.yu=f9.bind(null,e.eventManager),e}function ay(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=E9.bind(null,e),e}class ad{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return mT(this.persistence,new fT,e.initialUser,this.serializer)}Cu(e){return new Gx(Sm.mi,this.serializer)}Du(e){return new NT}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ad.provider={build:()=>new ad};class M9 extends ad{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Re(this.persistence.referenceDelegate instanceof $f,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new lT(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new Gx((s=>$f.mi(s,t)),this.serializer)}}class qT extends ad{constructor(e,t,s){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await ay(this.xu.syncEngine),await hc(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return mT(this.persistence,new fT,e.initialUser,this.serializer)}Fu(e,t){const s=this.persistence.referenceDelegate.garbageCollector;return new lT(s,e.asyncQueue,t)}Mu(e,t){const s=new GR(t,this.persistence);return new HR(e.asyncQueue,s)}Cu(e){const t=hT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new $x(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,ET(),yf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new NT}}class V9 extends qT{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof tp&&(this.sharedClientState.syncEngine={Co:C9.bind(null,t),vo:D9.bind(null,t),Fo:O9.bind(null,t),Ts:k9.bind(null,t),Do:I9.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async s=>{await R9(this.xu.syncEngine,s),this.gcScheduler&&(s&&!this.gcScheduler.started?this.gcScheduler.start():s||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(s&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():s||this.indexBackfillerScheduler.stop())}))}Du(e){const t=ET();if(!tp.v(t))throw new ye(te.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=hT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new tp(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class id{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>J_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=S9.bind(null,this.syncEngine),await Jp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new d9})()}createDatastore(e){const t=jm(e.databaseInfo.databaseId),s=(function(c){return new Kk(c)})(e.databaseInfo);return(function(c,d,f,g){return new Jk(c,d,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,l,c,d,f){return new Zk(s,l,c,d,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>J_(this.syncEngine,t,0)),(function(){return G_.v()?new G_:new Fk})())}createSyncEngine(e,t){return(function(l,c,d,f,g,x,v){const w=new p9(l,c,d,f,g,x);return v&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(l){const c=Ae(l);fe(Il,"RemoteStore shutting down."),c.Ea.add(5),await bd(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}id.provider={build:()=>new id};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Yt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="FirestoreClient";class P9{constructor(e,t,s,l,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=l,this.user=Rn.UNAUTHENTICATED,this.clientId=_x.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{fe(Si,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(fe(Si,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Cm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function sp(r,e){r.asyncQueue.verifyOperationInProgress(),fe(Si,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await gT(e.localStore,l),s=l)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Z_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await HT(r);fe(Si,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>K_(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>K_(e.remoteStore,l))),r._onlineComponents=e}async function HT(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){fe(Si,"Using user provided OfflineComponentProvider");try{await sp(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(l){return l.name==="FirebaseError"?l.code===te.FAILED_PRECONDITION||l.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(t))throw t;Qu("Error using user provided cache. Falling back to memory cache: "+t),await sp(r,new ad)}}else fe(Si,"Using default OfflineComponentProvider"),await sp(r,new M9(void 0));return r._offlineComponents}async function iy(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(fe(Si,"Using user provided OnlineComponentProvider"),await Z_(r,r._uninitializedComponentsProvider._online)):(fe(Si,"Using default OnlineComponentProvider"),await Z_(r,new id))),r._onlineComponents}function L9(r){return HT(r).then((e=>e.localStore))}function z9(r){return iy(r).then((e=>e.syncEngine))}function U9(r){return iy(r).then((e=>e.datastore))}async function GT(r){const e=await iy(r),t=e.eventManager;return t.onListen=x9.bind(null,e.syncEngine),t.onUnlisten=b9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=y9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=v9.bind(null,e.syncEngine),t}function B9(r,e,t={}){const s=new Ls;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,f,g,x){const v=new FT({next:N=>{v.Nu(),d.enqueueAndForget((()=>DT(c,w)));const C=N.docs.has(f);!C&&N.fromCache?x.reject(new ye(te.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&N.fromCache&&g&&g.source==="server"?x.reject(new ye(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(N)},error:N=>x.reject(N)}),w=new OT(bm(f.path),v,{includeMetadataChanges:!0,qa:!0});return kT(c,w)})(await GT(r),r.asyncQueue,e,t,s))),s.promise}function q9(r,e){const t=new Ls;return r.asyncQueue.enqueueAndForget((async()=>(async function(l,c,d){try{const f=await Qf(l,c,!0),g=new PT(c,f.Qs),x=g.ru(f.documents),v=g.applyChanges(x,!1);d.resolve(v.snapshot)}catch(f){const g=Cm(f,`Failed to execute query '${c} against cache`);d.reject(g)}})(await L9(r),e,t))),t.promise}function $T(r,e,t={}){const s=new Ls;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,f,g,x){const v=new FT({next:N=>{v.Nu(),d.enqueueAndForget((()=>DT(c,w))),N.fromCache&&g.source==="server"?x.reject(new ye(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(N)},error:N=>x.reject(N)}),w=new OT(f,v,{includeMetadataChanges:!0,qa:!0});return kT(c,w)})(await GT(r),r.asyncQueue,e,t,s))),s.promise}function F9(r,e,t){const s=new Ls;return r.asyncQueue.enqueueAndForget((async()=>{try{const l=await U9(r);s.resolve((async function(d,f,g){var Z;const x=Ae(d),{request:v,gt:w,parent:N}=sk(x.serializer,R6(f),g);x.connection.$o||delete v.parent;const C=(await x.Ho("RunAggregationQuery",x.serializer.databaseId,N,v,1)).filter((B=>!!B.result));Re(C.length===1,64727);const M=(Z=C[0].result)==null?void 0:Z.aggregateFields;return Object.keys(M).reduce(((B,me)=>(B[w[me]]=M[me],B)),{})})(l,e,t))}catch(l){s.reject(l)}})),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9="firestore.googleapis.com",t2=!0;class n2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=H9,this.ssl=t2}else this.host=e.host,this.ssl=e.ssl??t2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=nT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iT)throw new ye(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ly{constructor(e,t,s,l){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new RR;switch(s.type){case"firstParty":return new OR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ye(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=e2.get(t);s&&(fe("ComponentProvider","Removing Datastore"),e2.delete(t),s.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Or(this.firestore,e,this._query)}}class Jt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}toJSON(){return{type:Jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(fd(t,Jt._jsonSchema))return new Jt(e,s||null,new Ee(ft.fromString(t.referencePath)))}}Jt._jsonSchemaVersion="firestore/documentReference/1.0",Jt._jsonSchema={type:cn("string",Jt._jsonSchemaVersion),referencePath:cn("string")};class bi extends Or{constructor(e,t,s){super(e,t,bm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new Ee(e))}withConverter(e){return new bi(this.firestore,e,this._path)}}function mt(r,e,...t){if(r=Wt(r),zN("collection","path",e),r instanceof ly){const s=ft.fromString(e,...t);return $w(s),new bi(r,null,s)}{if(!(r instanceof Jt||r instanceof bi))throw new ye(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ft.fromString(e,...t));return $w(s),new bi(r.firestore,null,s)}}function Fn(r,e,...t){if(r=Wt(r),arguments.length===1&&(e=_x.newId()),zN("doc","path",e),r instanceof ly){const s=ft.fromString(e,...t);return Gw(s),new Jt(r,null,new Ee(s))}{if(!(r instanceof Jt||r instanceof bi))throw new ye(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ft.fromString(e,...t));return Gw(s),new Jt(r.firestore,r instanceof bi?r.converter:null,new Ee(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2="AsyncQueue";class r2{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new TT(this,"async_queue_retry"),this._c=()=>{const s=yf();s&&fe(s2,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=yf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=yf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ls;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ii(e))throw e;fe(s2,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Yt("INTERNAL UNHANDLED ERROR: ",a2(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const l=Zx.createAndSchedule(this,e,t,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&Te(47125,{Pc:a2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function a2(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Mr extends ly{constructor(e,t,s,l){super(e,t,s,l),this.type="firestore",this._queue=new r2,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new r2(e),this._firestoreClient=void 0,await e}}}function G9(r,e,t){t||(t=Pf);const s=Dl(r,"firestore");if(s.isInitialized(t)){const l=s.getImmediate({identifier:t}),c=s.getOptions(t);if(_i(c,e))return l;throw new ye(te.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ye(te.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iT)throw new ye(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&ic(e.host)&&L2(e.host),s.initialize({options:e,instanceIdentifier:t})}function gc(r){if(r._terminated)throw new ye(te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||$9(r),r._firestoreClient}function $9(r){var s,l,c;const e=r._freezeSettings(),t=(function(f,g,x,v){return new v6(f,g,x,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,KT(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new P9(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class Q9{constructor(e,t,s){this._userDataWriter=t,this._data=s,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vs(Zt.fromBase64String(e))}catch(t){throw new ye(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vs(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fd(e,Vs._jsonSchema))return Vs.fromBase64String(e.bytes)}}Vs._jsonSchemaVersion="firestore/bytes/1.0",Vs._jsonSchema={type:cn("string",Vs._jsonSchemaVersion),bytes:cn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cr._jsonSchemaVersion}}static fromJSON(e){if(fd(e,Cr._jsonSchema))return new Cr(e.latitude,e.longitude)}}Cr._jsonSchemaVersion="firestore/geoPoint/1.0",Cr._jsonSchema={type:cn("string",Cr._jsonSchemaVersion),latitude:cn("number"),longitude:cn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Rr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fd(e,Rr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Rr(e.vectorValues);throw new ye(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Rr._jsonSchemaVersion="firestore/vectorValue/1.0",Rr._jsonSchema={type:cn("string",Rr._jsonSchemaVersion),vectorValues:cn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X9=/^__.*__$/;class Y9{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new va(e,this.data,this.fieldMask,t,this.fieldTransforms):new dc(e,this.data,t,this.fieldTransforms)}}class QT{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new va(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function XT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:r})}}class oy{constructor(e,t,s,l,c,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new oy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var l;const t=(l=this.path)==null?void 0:l.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var l;const t=(l=this.path)==null?void 0:l.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Wf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(XT(this.Ac)&&X9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class J9{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||jm(e)}Cc(e,t,s,l=!1){return new oy({Ac:e,methodName:t,Dc:s,path:Ft.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dm(r){const e=r._freezeSettings(),t=jm(r._databaseId);return new J9(r._databaseId,!!e.ignoreUndefinedProperties,t)}function YT(r,e,t,s,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,e,t,l);dy("Data must be an object, but it was:",d,s);const f=JT(s,d);let g,x;if(c.merge)g=new ts(d.fieldMask),x=d.fieldTransforms;else if(c.mergeFields){const v=[];for(const w of c.mergeFields){const N=ex(e,w,t);if(!d.contains(N))throw new ye(te.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);ZT(v,N)||v.push(N)}g=new ts(v),x=d.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,x=d.fieldTransforms;return new Y9(new Dn(f),g,x)}class Om extends vd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Om}}class cy extends vd{_toFieldTransform(e){return new Mx(e.path,new Yo)}isEqual(e){return e instanceof cy}}class uy extends vd{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Zo(e.serializer,CE(e.serializer,this.Fc));return new Mx(e.path,t)}isEqual(e){return e instanceof uy&&this.Fc===e.Fc}}function W9(r,e,t,s){const l=r.Cc(1,e,t);dy("Data must be an object, but it was:",l,s);const c=[],d=Dn.empty();Ci(s,((g,x)=>{const v=hy(e,g,t);x=Wt(x);const w=l.yc(v);if(x instanceof Om)c.push(v);else{const N=wd(x,w);N!=null&&(c.push(v),d.set(v,N))}}));const f=new ts(c);return new QT(d,f,l.fieldTransforms)}function Z9(r,e,t,s,l,c){const d=r.Cc(1,e,t),f=[ex(e,s,t)],g=[l];if(c.length%2!=0)throw new ye(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<c.length;N+=2)f.push(ex(e,c[N])),g.push(c[N+1]);const x=[],v=Dn.empty();for(let N=f.length-1;N>=0;--N)if(!ZT(x,f[N])){const C=f[N];let M=g[N];M=Wt(M);const Z=d.yc(C);if(M instanceof Om)x.push(C);else{const B=wd(M,Z);B!=null&&(x.push(C),v.set(C,B))}}const w=new ts(x);return new QT(v,w,d.fieldTransforms)}function e8(r,e,t,s=!1){return wd(t,r.Cc(s?4:3,e))}function wd(r,e){if(WT(r=Wt(r)))return dy("Unsupported field value:",e,r),JT(r,e);if(r instanceof vd)return(function(s,l){if(!XT(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let d=0;for(const f of s){let g=wd(f,l.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,e)}return(function(s,l){if((s=Wt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return CE(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=vt.fromDate(s);return{timestampValue:ec(l.serializer,c)}}if(s instanceof vt){const c=new vt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ec(l.serializer,c)}}if(s instanceof Cr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Vs)return{bytesValue:BE(l.serializer,s._byteString)};if(s instanceof Jt){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Ux(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Rr)return(function(d,f){return{mapValue:{fields:{[Cx]:{stringValue:Rx},[$o]:{arrayValue:{values:d.toArray().map((x=>{if(typeof x!="number")throw f.Sc("VectorValues must only contain numeric values.");return Ox(f.serializer,x)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${dm(s)}`)})(r,e)}function JT(r,e){const t={};return sE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ci(r,((s,l)=>{const c=wd(l,e.mc(s));c!=null&&(t[s]=c)})),{mapValue:{fields:t}}}function WT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof vt||r instanceof Cr||r instanceof Vs||r instanceof Jt||r instanceof vd||r instanceof Rr)}function dy(r,e,t){if(!WT(t)||!UN(t)){const s=dm(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function ex(r,e,t){if((e=Wt(e))instanceof km)return e._internalPath;if(typeof e=="string")return hy(r,e);throw Wf("Field path arguments must be of type string or ",r,!1,void 0,t)}const t8=new RegExp("[~\\*/\\[\\]]");function hy(r,e,t){if(e.search(t8)>=0)throw Wf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new km(...e.split("."))._internalPath}catch{throw Wf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Wf(r,e,t,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${l}`),g+=")"),new ye(te.INVALID_ARGUMENT,f+r+g)}function ZT(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,t,s,l,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new n8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Mm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class n8 extends eS{data(){return super.data()}}function Mm(r,e){return typeof e=="string"?hy(r,e):e instanceof km?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s8(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ye(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fy{}class my extends fy{}function Vn(r,e,...t){let s=[];e instanceof fy&&s.push(e),s=s.concat(t),(function(c){const d=c.filter((g=>g instanceof gy)).length,f=c.filter((g=>g instanceof Vm)).length;if(d>1||d>0&&f>0)throw new ye(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class Vm extends my{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Vm(e,t,s)}_apply(e){const t=this._parse(e);return nS(e._query,t),new Or(e.firestore,e.converter,Bp(e._query,t))}_parse(e){const t=Dm(e.firestore);return(function(c,d,f,g,x,v,w){let N;if(x.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ye(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){l2(w,v);const M=[];for(const Z of w)M.push(i2(g,c,Z));N={arrayValue:{values:M}}}else N=i2(g,c,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||l2(w,v),N=e8(f,d,w,v==="in"||v==="not-in");return nt.create(x,v,N)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function An(r,e,t){const s=e,l=Mm("where",r);return Vm._create(l,s,t)}class gy extends fy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new gy(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:wt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(l,c){let d=l;const f=c.getFlattenedFilters();for(const g of f)nS(d,g),d=Bp(d,g)})(e._query,t),new Or(e.firestore,e.converter,Bp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class py extends my{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new py(e,t)}_apply(e){const t=(function(l,c,d){if(l.startAt!==null)throw new ye(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new ye(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rd(c,d)})(e._query,this._field,this._direction);return new Or(e.firestore,e.converter,(function(l,c){const d=l.explicitOrderBy.concat([c]);return new uc(l.path,l.collectionGroup,d,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,t))}}function _d(r,e="asc"){const t=e,s=Mm("orderBy",r);return py._create(s,t)}class xy extends my{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new xy(e,t,s)}_apply(e){return new Or(e.firestore,e.converter,Uf(e._query,this._limit,this._limitType))}}function tS(r){return BR("limit",r),xy._create("limit",r,"F")}function i2(r,e,t){if(typeof(t=Wt(t))=="string"){if(t==="")throw new ye(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wE(e)&&t.indexOf("/")!==-1)throw new ye(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(ft.fromString(t));if(!Ee.isDocumentKey(s))throw new ye(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return nd(r,new Ee(s))}if(t instanceof Jt)return nd(r,t._key);throw new ye(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dm(t)}.`)}function l2(r,e){if(!Array.isArray(r)||r.length===0)throw new ye(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nS(r,e){const t=(function(l,c){for(const d of l)for(const f of d.getFlattenedFilters())if(c.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ye(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class r8{convertValue(e,t="none"){switch(Ni(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ci(e,((l,c)=>{s[l]=this.convertValue(c,t)})),s}convertVectorValue(e){var s,l,c;const t=(c=(l=(s=e.fields)==null?void 0:s[$o].arrayValue)==null?void 0:l.values)==null?void 0:c.map((d=>zt(d.doubleValue)));return new Rr(t)}convertGeoPoint(e){return new Cr(zt(e.latitude),zt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=xm(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ed(e));default:return null}}convertTimestamp(e){const t=ga(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ft.fromString(e);Re(YE(s),9688,{name:e});const l=new El(s.get(1),s.get(3)),c=new Ee(s.popFirst(5));return l.isEqual(t)||Yt(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}function a8(){return new K9("count")}class ju{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yl extends eS{constructor(e,t,s,l,c,d){super(e,t,s,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Mm("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=yl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}yl._jsonSchemaVersion="firestore/documentSnapshot/1.0",yl._jsonSchema={type:cn("string",yl._jsonSchemaVersion),bundleSource:cn("string","DocumentSnapshot"),bundleName:cn("string"),bundle:cn("string")};class bf extends yl{data(e={}){return super.data(e)}}class vi{constructor(e,t,s,l){this._firestore=e,this._userDataWriter=t,this._snapshot=l,this.metadata=new ju(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new bf(this._firestore,this._userDataWriter,s.key,s,new ju(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((f=>{const g=new bf(l._firestore,l._userDataWriter,f.doc.key,f.doc,new ju(l._snapshot.mutatedKeys.has(f.doc.key),l._snapshot.fromCache),l.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((f=>c||f.type!==3)).map((f=>{const g=new bf(l._firestore,l._userDataWriter,f.doc.key,f.doc,new ju(l._snapshot.mutatedKeys.has(f.doc.key),l._snapshot.fromCache),l.query.converter);let x=-1,v=-1;return f.type!==0&&(x=d.indexOf(f.doc.key),d=d.delete(f.doc.key)),f.type!==1&&(d=d.add(f.doc),v=d.indexOf(f.doc.key)),{type:i8(f.type),doc:g,oldIndex:x,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=vi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_x.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function i8(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(r){r=qn(r,Jt);const e=qn(r.firestore,Mr);return B9(gc(e),r._key).then((t=>c8(e,r,t)))}vi._jsonSchemaVersion="firestore/querySnapshot/1.0",vi._jsonSchema={type:cn("string",vi._jsonSchemaVersion),bundleSource:cn("string","QuerySnapshot"),bundleName:cn("string"),bundle:cn("string")};class Nd extends r8{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,t)}}function Hn(r){r=qn(r,Or);const e=qn(r.firestore,Mr),t=gc(e),s=new Nd(e);return s8(r._query),$T(t,r._query).then((l=>new vi(e,s,r,l)))}function l8(r){r=qn(r,Or);const e=qn(r.firestore,Mr),t=gc(e),s=new Nd(e);return q9(t,r._query).then((l=>new vi(e,s,r,l)))}function o8(r){r=qn(r,Or);const e=qn(r.firestore,Mr),t=gc(e),s=new Nd(e);return $T(t,r._query,{source:"server"}).then((l=>new vi(e,s,r,l)))}function yy(r,e,t){r=qn(r,Jt);const s=qn(r.firestore,Mr),l=sS(r.converter,e,t);return Lm(s,[YT(Dm(s),"setDoc",r._key,l,r.converter!==null,t).toMutation(r._key,On.none())])}function Ed(r,e,t,...s){r=qn(r,Jt);const l=qn(r.firestore,Mr),c=Dm(l);let d;return d=typeof(e=Wt(e))=="string"||e instanceof km?Z9(c,"updateDoc",r._key,e,t,s):W9(c,"updateDoc",r._key,e),Lm(l,[d.toMutation(r._key,On.exists(!0))])}function Pm(r){return Lm(qn(r.firestore,Mr),[new Nm(r._key,On.none())])}function er(r,e){const t=qn(r.firestore,Mr),s=Fn(r),l=sS(r.converter,e);return Lm(t,[YT(Dm(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,On.exists(!1))]).then((()=>s))}function Lm(r,e){return(function(s,l){const c=new Ls;return s.asyncQueue.enqueueAndForget((async()=>w9(await z9(s),l,c))),c.promise})(gc(r),e)}function c8(r,e,t){const s=t.docs.get(e._key),l=new Nd(r);return new yl(r,l,e._key,s,new ju(t.hasPendingWrites,t.fromCache),e.converter)}function nf(r){return u8(r,{count:a8()})}function u8(r,e){const t=qn(r.firestore,Mr),s=gc(t),l=y6(e,((c,d)=>new F6(d,c.aggregateType,c._internalFieldPath)));return F9(s,r._query,l).then((c=>(function(f,g,x){const v=new Nd(f);return new Q9(g,v,x)})(t,r,c)))}class d8{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=g8(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function h8(r){return new d8(r)}class f8{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=id.provider,this._offlineComponentProvider={build:t=>new qT(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class m8{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=id.provider,this._offlineComponentProvider={build:t=>new V9(t,e==null?void 0:e.cacheSizeBytes)}}}function g8(r){return new f8(r==null?void 0:r.forceOwnership)}function p8(){return new m8}function xs(){return new cy("serverTimestamp")}function tx(r){return new uy("increment",r)}(function(e,t=!0){(function(l){cc=l})(lc),kr(new Ws("firestore",((s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),f=new Mr(new kR(s.getProvider("auth-internal")),new MR(d,s.getProvider("app-check-internal")),(function(x,v){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new ye(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new El(x.options.projectId,v)})(d,l),d);return c={useFetchStreams:t,...c},f._setSettings(c),f}),"PUBLIC").setMultipleInstances(!0)),Ps(Bw,qw,e),Ps(Bw,qw,"esm2020")})();const aS="@firebase/installations",by="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=1e4,lS=`w:${by}`,oS="FIS_v2",x8="https://firebaseinstallations.googleapis.com/v1",y8=3600*1e3,b8="installations",v8="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Cl=new kl(b8,v8,w8);function cS(r){return r instanceof tr&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS({projectId:r}){return`${x8}/projects/${r}/installations`}function dS(r){return{token:r.token,requestStatus:2,expiresIn:N8(r.expiresIn),creationTime:Date.now()}}async function hS(r,e){const s=(await e.json()).error;return Cl.create("request-failed",{requestName:r,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function fS({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function _8(r,{refreshToken:e}){const t=fS(r);return t.append("Authorization",E8(e)),t}async function mS(r){const e=await r();return e.status>=500&&e.status<600?r():e}function N8(r){return Number(r.replace("s","000"))}function E8(r){return`${oS} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T8({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const s=uS(r),l=fS(r),c=e.getImmediate({optional:!0});if(c){const x=await c.getHeartbeatsHeader();x&&l.append("x-firebase-client",x)}const d={fid:t,authVersion:oS,appId:r.appId,sdkVersion:lS},f={method:"POST",headers:l,body:JSON.stringify(d)},g=await mS(()=>fetch(s,f));if(g.ok){const x=await g.json();return{fid:x.fid||t,registrationStatus:2,refreshToken:x.refreshToken,authToken:dS(x.authToken)}}else throw await hS("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S8(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8=/^[cdef][\w-]{21}$/,nx="";function A8(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=I8(r);return j8.test(t)?t:nx}catch{return nx}}function I8(r){return S8(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=new Map;function xS(r,e){const t=zm(r);yS(t,e),C8(t,e)}function yS(r,e){const t=pS.get(r);if(t)for(const s of t)s(e)}function C8(r,e){const t=R8();t&&t.postMessage({key:r,fid:e}),k8()}let ml=null;function R8(){return!ml&&"BroadcastChannel"in self&&(ml=new BroadcastChannel("[Firebase] FID Change"),ml.onmessage=r=>{yS(r.data.key,r.data.fid)}),ml}function k8(){pS.size===0&&ml&&(ml.close(),ml=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D8="firebase-installations-database",O8=1,Rl="firebase-installations-store";let rp=null;function vy(){return rp||(rp=$2(D8,O8,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Rl)}}})),rp}async function Zf(r,e){const t=zm(r),l=(await vy()).transaction(Rl,"readwrite"),c=l.objectStore(Rl),d=await c.get(t);return await c.put(e,t),await l.done,(!d||d.fid!==e.fid)&&xS(r,e.fid),e}async function bS(r){const e=zm(r),s=(await vy()).transaction(Rl,"readwrite");await s.objectStore(Rl).delete(e),await s.done}async function Um(r,e){const t=zm(r),l=(await vy()).transaction(Rl,"readwrite"),c=l.objectStore(Rl),d=await c.get(t),f=e(d);return f===void 0?await c.delete(t):await c.put(f,t),await l.done,f&&(!d||d.fid!==f.fid)&&xS(r,f.fid),f}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wy(r){let e;const t=await Um(r.appConfig,s=>{const l=M8(s),c=V8(r,l);return e=c.registrationPromise,c.installationEntry});return t.fid===nx?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function M8(r){const e=r||{fid:A8(),registrationStatus:0};return vS(e)}function V8(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const l=Promise.reject(Cl.create("app-offline"));return{installationEntry:e,registrationPromise:l}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=P8(r,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:L8(r)}:{installationEntry:e}}async function P8(r,e){try{const t=await T8(r,e);return Zf(r.appConfig,t)}catch(t){throw cS(t)&&t.customData.serverCode===409?await bS(r.appConfig):await Zf(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function L8(r){let e=await o2(r.appConfig);for(;e.registrationStatus===1;)await gS(100),e=await o2(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await wy(r);return s||t}return e}function o2(r){return Um(r,e=>{if(!e)throw Cl.create("installation-not-found");return vS(e)})}function vS(r){return z8(r)?{fid:r.fid,registrationStatus:0}:r}function z8(r){return r.registrationStatus===1&&r.registrationTime+iS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U8({appConfig:r,heartbeatServiceProvider:e},t){const s=B8(r,t),l=_8(r,t),c=e.getImmediate({optional:!0});if(c){const x=await c.getHeartbeatsHeader();x&&l.append("x-firebase-client",x)}const d={installation:{sdkVersion:lS,appId:r.appId}},f={method:"POST",headers:l,body:JSON.stringify(d)},g=await mS(()=>fetch(s,f));if(g.ok){const x=await g.json();return dS(x)}else throw await hS("Generate Auth Token",g)}function B8(r,{fid:e}){return`${uS(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _y(r,e=!1){let t;const s=await Um(r.appConfig,c=>{if(!wS(c))throw Cl.create("not-registered");const d=c.authToken;if(!e&&H8(d))return c;if(d.requestStatus===1)return t=q8(r,e),c;{if(!navigator.onLine)throw Cl.create("app-offline");const f=$8(c);return t=F8(r,f),f}});return t?await t:s.authToken}async function q8(r,e){let t=await c2(r.appConfig);for(;t.authToken.requestStatus===1;)await gS(100),t=await c2(r.appConfig);const s=t.authToken;return s.requestStatus===0?_y(r,e):s}function c2(r){return Um(r,e=>{if(!wS(e))throw Cl.create("not-registered");const t=e.authToken;return K8(t)?{...e,authToken:{requestStatus:0}}:e})}async function F8(r,e){try{const t=await U8(r,e),s={...e,authToken:t};return await Zf(r.appConfig,s),t}catch(t){if(cS(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await bS(r.appConfig);else{const s={...e,authToken:{requestStatus:0}};await Zf(r.appConfig,s)}throw t}}function wS(r){return r!==void 0&&r.registrationStatus===2}function H8(r){return r.requestStatus===2&&!G8(r)}function G8(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+y8}function $8(r){const e={requestStatus:1,requestTime:Date.now()};return{...r,authToken:e}}function K8(r){return r.requestStatus===1&&r.requestTime+iS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q8(r){const e=r,{installationEntry:t,registrationPromise:s}=await wy(e);return s?s.catch(console.error):_y(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X8(r,e=!1){const t=r;return await Y8(t),(await _y(t,e)).token}async function Y8(r){const{registrationPromise:e}=await wy(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J8(r){if(!r||!r.options)throw ap("App Configuration");if(!r.name)throw ap("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw ap(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function ap(r){return Cl.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="installations",W8="installations-internal",Z8=r=>{const e=r.getProvider("app").getImmediate(),t=J8(e),s=Dl(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},eD=r=>{const e=r.getProvider("app").getImmediate(),t=Dl(e,_S).getImmediate();return{getId:()=>Q8(t),getToken:l=>X8(t,l)}};function tD(){kr(new Ws(_S,Z8,"PUBLIC")),kr(new Ws(W8,eD,"PRIVATE"))}tD();Ps(aS,by);Ps(aS,by,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="analytics",nD="firebase_id",sD="origin",rD=60*1e3,aD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ny="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn=new lm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ys=new kl("analytics","Analytics",iD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(r){if(!r.startsWith(Ny)){const e=ys.create("invalid-gtag-resource",{gtagURL:r});return Bn.warn(e.message),""}return r}function NS(r){return Promise.all(r.map(e=>e.catch(t=>t)))}function oD(r,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(r,e)),t}function cD(r,e){const t=oD("firebase-js-sdk-policy",{createScriptURL:lD}),s=document.createElement("script"),l=`${Ny}?l=${r}&id=${e}`;s.src=t?t==null?void 0:t.createScriptURL(l):l,s.async=!0,document.head.appendChild(s)}function uD(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function dD(r,e,t,s,l,c){const d=s[l];try{if(d)await e[d];else{const g=(await NS(t)).find(x=>x.measurementId===l);g&&await e[g.appId]}}catch(f){Bn.error(f)}r("config",l,c)}async function hD(r,e,t,s,l){try{let c=[];if(l&&l.send_to){let d=l.send_to;Array.isArray(d)||(d=[d]);const f=await NS(t);for(const g of d){const x=f.find(w=>w.measurementId===g),v=x&&e[x.appId];if(v)c.push(v);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),r("event",s,l||{})}catch(c){Bn.error(c)}}function fD(r,e,t,s){async function l(c,...d){try{if(c==="event"){const[f,g]=d;await hD(r,e,t,f,g)}else if(c==="config"){const[f,g]=d;await dD(r,e,t,s,f,g)}else if(c==="consent"){const[f,g]=d;r("consent",f,g)}else if(c==="get"){const[f,g,x]=d;r("get",f,g,x)}else if(c==="set"){const[f]=d;r("set",f)}else r(c,...d)}catch(f){Bn.error(f)}}return l}function mD(r,e,t,s,l){let c=function(...d){window[s].push(arguments)};return window[l]&&typeof window[l]=="function"&&(c=window[l]),window[l]=fD(c,r,e,t),{gtagCore:c,wrappedGtag:window[l]}}function gD(r){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Ny)&&t.src.includes(r))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=30,xD=1e3;class yD{constructor(e={},t=xD){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ES=new yD;function bD(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function vD(r){var d;const{appId:e,apiKey:t}=r,s={method:"GET",headers:bD(t)},l=aD.replace("{app-id}",e),c=await fetch(l,s);if(c.status!==200&&c.status!==304){let f="";try{const g=await c.json();(d=g.error)!=null&&d.message&&(f=g.error.message)}catch{}throw ys.create("config-fetch-failed",{httpStatus:c.status,responseMessage:f})}return c.json()}async function wD(r,e=ES,t){const{appId:s,apiKey:l,measurementId:c}=r.options;if(!s)throw ys.create("no-app-id");if(!l){if(c)return{measurementId:c,appId:s};throw ys.create("no-api-key")}const d=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new ED;return setTimeout(async()=>{f.abort()},rD),TS({appId:s,apiKey:l,measurementId:c},d,f,e)}async function TS(r,{throttleEndTimeMillis:e,backoffCount:t},s,l=ES){var f;const{appId:c,measurementId:d}=r;try{await _D(s,e)}catch(g){if(d)return Bn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:c,measurementId:d};throw g}try{const g=await vD(r);return l.deleteThrottleMetadata(c),g}catch(g){const x=g;if(!ND(x)){if(l.deleteThrottleMetadata(c),d)return Bn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${x==null?void 0:x.message}]`),{appId:c,measurementId:d};throw g}const v=Number((f=x==null?void 0:x.customData)==null?void 0:f.httpStatus)===503?hw(t,l.intervalMillis,pD):hw(t,l.intervalMillis),w={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return l.setThrottleMetadata(c,w),Bn.debug(`Calling attemptFetch again in ${v} millis`),TS(r,w,s,l)}}function _D(r,e){return new Promise((t,s)=>{const l=Math.max(e-Date.now(),0),c=setTimeout(t,l);r.addEventListener(()=>{clearTimeout(c),s(ys.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function ND(r){if(!(r instanceof tr)||!r.customData)return!1;const e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}class ED{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function TD(r,e,t,s,l){if(l&&l.global){r("event",t,s);return}else{const c=await e,d={...s,send_to:c};r("event",t,d)}}async function SD(r,e,t,s){if(s&&s.global){const l={};for(const c of Object.keys(t))l[`user_properties.${c}`]=t[c];return r("set",l),Promise.resolve()}else{const l=await e;r("config",l,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jD(){if(dx())try{await F2()}catch(r){return Bn.warn(ys.create("indexeddb-unavailable",{errorInfo:r==null?void 0:r.toString()}).message),!1}else return Bn.warn(ys.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function AD(r,e,t,s,l,c,d){const f=wD(r);f.then(N=>{t[N.measurementId]=N.appId,r.options.measurementId&&N.measurementId!==r.options.measurementId&&Bn.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>Bn.error(N)),e.push(f);const g=jD().then(N=>{if(N)return s.getId()}),[x,v]=await Promise.all([f,g]);gD(c)||cD(c,x.measurementId),l("js",new Date);const w=(d==null?void 0:d.config)??{};return w[sD]="firebase",w.update=!0,v!=null&&(w[nD]=v),l("config",x.measurementId,w),x.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.app=e}_delete(){return delete zo[this.app.options.appId],Promise.resolve()}}let zo={},u2=[];const d2={};let ip="dataLayer",CD="gtag",h2,Ey,f2=!1;function RD(){const r=[];if(U2()&&r.push("This is a browser extension environment."),GA()||r.push("Cookies are not available."),r.length>0){const e=r.map((s,l)=>`(${l+1}) ${s}`).join(" "),t=ys.create("invalid-analytics-context",{errorInfo:e});Bn.warn(t.message)}}function kD(r,e,t){RD();const s=r.options.appId;if(!s)throw ys.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)Bn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ys.create("no-api-key");if(zo[s]!=null)throw ys.create("already-exists",{id:s});if(!f2){uD(ip);const{wrappedGtag:c,gtagCore:d}=mD(zo,u2,d2,ip,CD);Ey=c,h2=d,f2=!0}return zo[s]=AD(r,u2,d2,e,h2,ip,t),new ID(r)}function DD(r=Q2()){r=Wt(r);const e=Dl(r,em);return e.isInitialized()?e.getImmediate():OD(r)}function OD(r,e={}){const t=Dl(r,em);if(t.isInitialized()){const l=t.getImmediate();if(_i(e,t.getOptions()))return l;throw ys.create("already-initialized")}return t.initialize({options:e})}function MD(r,e,t){r=Wt(r),SD(Ey,zo[r.app.options.appId],e,t).catch(s=>Bn.error(s))}function VD(r,e,t,s){r=Wt(r),TD(Ey,zo[r.app.options.appId],e,t,s).catch(l=>Bn.error(l))}const m2="@firebase/analytics",g2="0.10.19";function PD(){kr(new Ws(em,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("installations-internal").getImmediate();return kD(s,l,t)},"PUBLIC")),kr(new Ws("analytics-internal",r,"PRIVATE")),Ps(m2,g2),Ps(m2,g2,"esm2020");function r(e){try{const t=e.getProvider(em).getImmediate();return{logEvent:(s,l,c)=>VD(t,s,l,c),setUserProperties:(s,l)=>MD(t,s,l)}}catch(t){throw ys.create("interop-component-reg-failed",{reason:t})}}}PD();const LD={apiKey:"AIzaSyBFr--na-wJGHMdev7vUhPufAJHlyP3GNQ",authDomain:"school-9d3db.firebaseapp.com",projectId:"school-9d3db",storageBucket:"school-9d3db.firebasestorage.app",messagingSenderId:"429673694272",appId:"1:429673694272:web:43390c4fdfa5bce4744ba5",measurementId:"G-8YSDYV9VBN"},Ty=K2(LD),zu=AR(Ty),qe=G9(Ty,{localCache:h8({tabManager:p8()})});DD(Ty);const SS=()=>{const r=()=>{window.location.reload()},e=()=>{window.open("https://wa.me/972568401548","_blank")};return i.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center p-4 text-center animate-fade-in relative overflow-hidden",children:[i.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-emerald-900/10 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-64 h-64 bg-red-900/10 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative z-10 max-w-md w-full bg-gray-900 border border-gray-800 rounded-[2.5rem] p-8 shadow-2xl",children:[i.jsx("div",{className:"w-20 h-20 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6 border-4 border-gray-700 shadow-inner",children:i.jsx(SA,{className:"w-10 h-10 text-red-500/80"})}),i.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white mb-3",children:"    "}),i.jsx("p",{className:"text-gray-400 text-sm md:text-base leading-relaxed mb-8 font-medium",children:"           .     ."}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:r,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3.5 rounded-xl font-bold transition-all flex items-center justify-center gap-2 shadow-lg shadow-emerald-900/20",children:[i.jsx(sm,{className:"w-5 h-5"})," "]}),i.jsxs("div",{className:"relative flex py-2 items-center",children:[i.jsx("div",{className:"flex-grow border-t border-gray-700"}),i.jsx("span",{className:"flex-shrink-0 mx-4 text-gray-500 text-xs font-bold",children:""}),i.jsx("div",{className:"flex-grow border-t border-gray-700"})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-gray-700/50",children:[i.jsx("p",{className:"text-gray-300 text-xs font-bold mb-3",children:"       :"}),i.jsxs("div",{className:"flex items-center justify-between bg-gray-900 p-3 rounded-lg border border-gray-700",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-white font-bold text-sm",children:".   "}),i.jsx("p",{className:"text-emerald-500 text-xs dir-ltr",children:"Admin Support"})]}),i.jsx("button",{onClick:e,className:"bg-[#25D366] hover:bg-[#20bd5a] text-white p-2 rounded-full transition-colors shadow-md",children:i.jsx(Fu,{className:"w-5 h-5"})})]})]})]})]}),i.jsx("p",{className:"mt-8 text-gray-600 text-xs font-mono",children:"Error Code: CONNECTION_TIMEOUT / RENDER_FAIL"})]})},jS=V.createContext(void 0),zD=({children:r})=>{const[e,t]=V.useState(null),[s,l]=V.useState(!0),[c,d]=V.useState(!1),f=(v,w)=>{const N=`teacher-${w.split("@")[0]}`;let C="https://img.freepik.com/free-vector/teacher-standing-near-blackboard_23-2147517173.jpg";v.includes("")?C="https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P":v.includes("")&&(C="https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj"),t({uid:N,email:w,displayName:v,role:"teacher",avatar:C,gender:"male"}),localStorage.setItem("isTeacher","true"),localStorage.setItem("teacherName",v),localStorage.setItem("teacherEmail",w)},g=async()=>{try{(e==null?void 0:e.role)==="teacher"?(localStorage.removeItem("isTeacher"),localStorage.removeItem("teacherName"),localStorage.removeItem("teacherEmail"),t(null)):await xC(zu)}catch(v){console.error("Logout error",v)}},x=async v=>{if(e)try{let w={...v};if(v.firstName!==void 0||v.lastName!==void 0){const N=v.firstName!==void 0?v.firstName:e.firstName||"",C=v.lastName!==void 0?v.lastName:e.lastName||"";w.displayName=`${N} ${C}`.trim()}if(t(N=>N?{...N,...w}:null),e.role!=="teacher"){const N=Fn(qe,"users",e.uid);await yy(N,w,{merge:!0})}}catch(w){throw console.error("Error updating profile:",w),w}};return V.useEffect(()=>{const v=setTimeout(()=>{s&&d(!0)},1e4),w=localStorage.getItem("isTeacher")==="true";if(w){const C=localStorage.getItem("teacherName")||"",M=localStorage.getItem("teacherEmail")||"teacher@etqan.edu";f(C,M),l(!1),clearTimeout(v);return}const N=pC(zu,async C=>{if(C)try{const M=Fn(qe,"users",C.uid),Z=await rS(M);if(Z.exists()){const B=Z.data();(C.email==="q@gmail.com"||C.email==="yazan22@gmail.com")&&(B.totalXP=25e3,B.quizzesCompleted=500),t({uid:C.uid,email:C.email||"",displayName:B.displayName||`${B.firstName||""} ${B.lastName||""}`.trim()||"Student",firstName:B.firstName,lastName:B.lastName,age:B.age,role:B.role,grade:B.grade,phone:B.phone,address:B.address,school:B.school,gender:B.gender,avatar:B.avatar,profileBackground:B.profileBackground,genderChanged:B.genderChanged})}else t({uid:C.uid,email:C.email||"",displayName:"User",role:"student"})}catch(M){console.error("Error fetching user profile:",M)}else w||t(null);l(!1),clearTimeout(v)});return()=>{N(),clearTimeout(v)}},[]),c?i.jsx(SS,{}):i.jsx(jS.Provider,{value:{user:e,loading:s,logout:g,setTeacherSession:f,updateUserProfile:x},children:s?i.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 blur-xl rounded-full"}),i.jsx(bt,{className:"w-12 h-12 text-emerald-500 animate-spin relative z-10"})]}),i.jsx("p",{className:"mt-4 text-gray-400 font-bold text-sm animate-pulse",children:" ..."})]}):r})},nr=()=>{const r=V.useContext(jS);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},lp=[{id:"teacher-yazan",name:".   "},{id:"teacher-majd",name:".   "}],UD=({onLoginClick:r,onNavigate:e,onLogoutClick:t})=>{var de;const[s,l]=V.useState(!1),[c,d]=V.useState(!1),{user:f}=nr(),[g,x]=V.useState(!1),[v,w]=V.useState([]),[N,C]=V.useState(0),M=V.useRef(null),[Z,B]=V.useState(!1),[me,ce]=V.useState(""),[le,_e]=V.useState("teacher-yazan"),[ge,G]=V.useState(!1),[S,j]=V.useState(!1);V.useEffect(()=>{const he=()=>{d(window.scrollY>10)};return window.addEventListener("scroll",he),()=>window.removeEventListener("scroll",he)},[]),V.useEffect(()=>{const he=F=>{M.current&&!M.current.contains(F.target)&&x(!1)};return document.addEventListener("mousedown",he),()=>document.removeEventListener("mousedown",he)},[]),V.useEffect(()=>{if(!f){w([]);return}(async()=>{const F=`etqan_notifications_${f.uid}`,oe=1440*60*1e3,Y=localStorage.getItem(F),re=Date.now();if(Y)try{const{data:U,timestamp:z}=JSON.parse(Y);if(re-z<oe){w(U);let ee=[];try{ee=JSON.parse(localStorage.getItem(`viewed_notifs_${f.uid}`)||"[]")}catch{}const xe=U.filter(Se=>Se.recipientId==="all"?!ee.includes(Se.id):!Se.read).length;C(xe);return}}catch(U){console.error("Error parsing notification cache",U)}const ve=f.role==="teacher"?100:10,R=Vn(mt(qe,"notifications"),_d("createdAt","desc"),tS(ve));try{const U=await Hn(R),z=[];let ee=0,xe=[];try{xe=JSON.parse(localStorage.getItem(`viewed_notifs_${f.uid}`)||"[]")}catch{}U.forEach(Se=>{const Me=Se.data();if(Me.recipientId==="all"||Me.recipientId===f.uid){let Ke=!1;Me.recipientId==="all"?Ke=xe.includes(Se.id):Ke=Me.read===!0,Ke||ee++,z.push({id:Se.id,...Me,read:Ke,createdAt:Me.createdAt?{seconds:Me.createdAt.seconds,nanoseconds:Me.createdAt.nanoseconds}:null})}}),w(z),C(ee),localStorage.setItem(F,JSON.stringify({timestamp:re,data:z}))}catch(U){console.error("Error fetching notifications:",U)}})()},[f]);const A=async()=>{if(x(!g),!g&&N>0){const he=[...v],F=he.filter(ve=>ve.recipientId==="all").map(ve=>ve.id);if(F.length>0)try{const ve=JSON.parse(localStorage.getItem(`viewed_notifs_${f==null?void 0:f.uid}`)||"[]"),R=[...new Set([...ve,...F])];localStorage.setItem(`viewed_notifs_${f==null?void 0:f.uid}`,JSON.stringify(R))}catch(ve){console.error("Error updating local storage for notifications",ve)}he.filter(ve=>ve.recipientId!=="all"&&!ve.read).forEach(async ve=>{try{const R=Fn(qe,"notifications",ve.id);await Ed(R,{read:!0})}catch(R){console.error("Error marking personal notification read:",R)}});const Y=he.map(ve=>({...ve,read:!0}));C(0),w(Y);const re=`etqan_notifications_${f==null?void 0:f.uid}`;try{const ve=localStorage.getItem(re);if(ve){const R=JSON.parse(ve);R.data=Y,localStorage.setItem(re,JSON.stringify(R))}}catch{}}},O=async()=>{if(me.trim()){G(!0);try{const he=lp.find(F=>F.id===le);await er(mt(qe,"contact_messages"),{studentId:f==null?void 0:f.uid,studentName:(f==null?void 0:f.displayName)||"",studentEmail:f==null?void 0:f.email,message:me,teacherId:le,teacherName:he==null?void 0:he.name,createdAt:xs(),read:!1}),await er(mt(qe,"notifications"),{recipientId:le,title:`   ${(f==null?void 0:f.displayName)||""}`,message:me.substring(0,100)+(me.length>100?"...":""),type:"message",senderName:f==null?void 0:f.displayName,senderId:f==null?void 0:f.uid,createdAt:xs(),read:!1}),alert("    !"),ce(""),B(!1),j(!1)}catch(he){console.error(he),alert("   ")}finally{G(!1)}}},D=he=>{switch(he){case"quiz":return i.jsx(ns,{className:"w-4 h-4 text-yellow-400"});case"file":return i.jsx(ss,{className:"w-4 h-4 text-blue-400"});case"explanation":return i.jsx(Hu,{className:"w-4 h-4 text-purple-400"});case"message":return i.jsx(Tr,{className:"w-4 h-4 text-emerald-400"});default:return i.jsx(Kh,{className:"w-4 h-4 text-gray-400"})}},L=he=>{if(!he)return"";const F=he.toDate?he.toDate():new Date(he.seconds*1e3);return isNaN(F.getTime())?"":F.toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(",","")},I=he=>"cursor-pointer px-4 py-2 rounded-xl transition-all font-bold text-sm flex items-center gap-2 text-gray-300 hover:text-white hover:bg-gray-800";return i.jsxs(i.Fragment,{children:[i.jsxs("nav",{className:`fixed w-full z-50 transition-all duration-300 ${c?"bg-gray-950 border-b border-white/5 py-3 shadow-xl":"bg-transparent py-5"}`,children:[i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e("HOME"),children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/13x8Gorb7y4H2qcQ1LVJtHY9-RoUhxg2z",alt:"Logo",className:"w-10 h-10 rounded-full object-cover border-2 border-emerald-500/50"}),i.jsx("span",{className:"text-2xl font-black text-white tracking-tight",children:""})]}),i.jsxs("div",{className:"hidden md:flex items-center bg-gray-950 p-1.5 rounded-2xl border border-white/5 shadow-xl",children:[i.jsxs("button",{onClick:()=>e("HOME"),className:I(),children:[i.jsx(Nf,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("QUIZZES"),className:I(),children:[i.jsx(ns,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("LESSONS"),className:I(),children:[i.jsx(ss,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("LESSONS_EXPLANATIONS"),className:I(),children:[i.jsx(Uu,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("CONTACT_TEACHER"),className:I(),children:[i.jsx(Fu,{className:"w-4 h-4"}),"  "]})]}),i.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[f&&i.jsxs("div",{className:"relative",ref:M,children:[i.jsxs("button",{onClick:A,className:"p-2.5 rounded-xl bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white transition-all relative border border-gray-700 flex items-center justify-center group","aria-label":"Notifications",children:[i.jsx(Kh,{className:`w-5 h-5 ${N>0?"animate-swing":""}`}),N>0&&i.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[9px] font-bold flex items-center justify-center rounded-full border-2 border-gray-900 animate-pulse",children:N>9?"+9":N})]}),g&&i.jsxs("div",{className:"absolute top-full left-0 md:left-auto md:right-0 mt-3 w-80 bg-gray-900 border border-gray-700 rounded-2xl shadow-2xl overflow-hidden animate-fade-in-up origin-top-right z-[60]",children:[i.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-gray-900/50 backdrop-blur-sm",children:[i.jsxs("h3",{className:"font-bold text-white text-sm flex items-center gap-2",children:[i.jsx(Kh,{className:"w-4 h-4 text-emerald-400"}),""]}),f.role==="student"&&i.jsxs("button",{onClick:()=>{x(!1),B(!0)},className:"text-xs bg-emerald-900/30 text-emerald-400 px-3 py-1.5 rounded-lg hover:bg-emerald-900/50 transition-colors font-bold border border-emerald-500/30 flex items-center gap-1",children:[i.jsx(Tr,{className:"w-3 h-3"})," "]})]}),i.jsx("div",{className:"max-h-80 overflow-y-auto custom-scrollbar",children:v.length===0?i.jsxs("div",{className:"p-12 text-center text-gray-500 text-sm flex flex-col items-center",children:[i.jsx(Kh,{className:"w-10 h-10 mb-3 opacity-20"}),i.jsx("p",{children:"   "})]}):i.jsx("div",{className:"divide-y divide-gray-800",children:v.map(he=>i.jsxs("div",{className:`p-4 hover:bg-gray-800/50 transition-colors relative ${he.read?"":"bg-emerald-900/10"}`,children:[!he.read&&i.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-emerald-500 rounded-full"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"mt-1 shrink-0 bg-gray-800 p-1.5 w-8 h-8 flex items-center justify-center rounded-full border border-gray-700",children:D(he.type)}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:`text-sm font-bold mb-1 ${he.read?"text-gray-400":"text-white"}`,children:he.title}),i.jsx("p",{className:"text-xs text-gray-500 leading-relaxed line-clamp-2",children:he.message}),i.jsx("span",{className:"text-[10px] text-gray-600 mt-2 block flex items-center gap-1",children:L(he.createdAt)})]})]})]},he.id))})})]})]}),f?i.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[i.jsxs("div",{className:"relative group",children:[i.jsxs("button",{onClick:()=>e("PROFILE"),className:"flex items-center gap-2 bg-gray-800 hover:bg-gray-700 text-white pr-1 pl-4 py-1 rounded-full transition-all border border-gray-700 hover:border-gray-600",children:[f.avatar?i.jsx("img",{src:f.avatar,alt:"Avatar",className:"w-8 h-8 rounded-full object-cover border border-gray-600"}):i.jsx("div",{className:"w-8 h-8 bg-emerald-600 rounded-full flex items-center justify-center text-xs font-bold",children:f.displayName.charAt(0)}),i.jsx("span",{className:"text-sm font-bold max-w-[100px] truncate",children:f.displayName})]}),i.jsxs("div",{className:"absolute top-full mt-2 left-1/2 -translate-x-1/2 w-max bg-gray-900 text-emerald-400 text-[10px] font-bold px-3 py-1.5 rounded-lg border border-gray-700 opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none shadow-xl z-50",children:["   ",i.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 border-4 border-transparent border-b-gray-900"})]})]}),i.jsx("button",{onClick:t,className:"p-2 bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white rounded-full transition-all border border-red-500/20",title:" ",children:i.jsx(Ef,{className:"w-5 h-5"})})]}):i.jsxs("button",{onClick:r,className:"hidden md:flex bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-2.5 rounded-xl font-bold transition-all shadow-lg shadow-emerald-900/20 items-center gap-2",children:[i.jsx(xp,{className:"w-4 h-4"}),""]}),i.jsx("button",{onClick:()=>l(!s),className:"md:hidden p-2.5 text-gray-300 hover:text-white bg-gray-800 rounded-xl hover:bg-gray-700 transition-colors border border-gray-700",children:s?i.jsx(ms,{className:"w-6 h-6"}):i.jsx(k5,{className:"w-6 h-6"})})]})]})}),s&&i.jsx("div",{className:"md:hidden absolute top-full left-0 w-full bg-gray-950 border-b border-white/5 shadow-2xl animate-fade-in-up h-[calc(100vh-70px)] overflow-y-auto",children:i.jsxs("div",{className:"px-4 py-6 space-y-3",children:[f&&i.jsxs("div",{className:"mb-2",children:[i.jsx("p",{className:"text-[10px] text-emerald-500 font-bold px-4 mb-1",children:"   "}),i.jsxs("button",{onClick:()=>{e("PROFILE"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-emerald-400 hover:bg-emerald-900/20 font-bold transition-colors border border-emerald-900/30",children:[i.jsx(H4,{className:"w-5 h-5"})," ",f.displayName]})]}),i.jsxs("button",{onClick:()=>{e("HOME"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(Nf,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("TEACHER_CV"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(rm,{className:"w-5 h-5"}),"   "]}),i.jsxs("button",{onClick:()=>{e("QUIZZES"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(ns,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("LESSONS"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(ss,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("LESSONS_EXPLANATIONS"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(Uu,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("CONTACT_TEACHER"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(Fu,{className:"w-5 h-5"}),"  "]}),i.jsxs("button",{onClick:()=>{e("PLATFORM_DEFINITION"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(S2,{className:"w-5 h-5"}),"  "]}),i.jsx("div",{className:"border-t border-gray-800 my-2 pt-2",children:f?i.jsxs("button",{onClick:()=>{t(),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-400 hover:bg-red-900/20 font-bold transition-colors",children:[i.jsx(Ef,{className:"w-5 h-5"}),"  "]}):i.jsxs("button",{onClick:()=>{r(),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl bg-emerald-600 text-white font-bold justify-center shadow-lg",children:[i.jsx(xp,{className:"w-5 h-5"}),"  "]})})]})})]}),Z&&i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>{B(!1),j(!1)}}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-md relative shadow-2xl p-6 animate-fade-in-up border border-white/10",children:[i.jsx("button",{onClick:()=>{B(!1),j(!1)},className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-white",children:i.jsx(ms,{className:"w-5 h-5"})}),S?i.jsxs("div",{className:"text-center py-6 animate-fade-in",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-400 border border-emerald-500/20",children:i.jsx(oa,{className:"w-8 h-8"})}),i.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),i.jsxs("p",{className:"text-gray-400 text-sm mb-8",children:["        ",i.jsx("span",{className:"text-emerald-400 font-bold",children:(de=lp.find(he=>he.id===le))==null?void 0:de.name}),""]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:O,disabled:ge,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all shadow-lg shadow-emerald-900/20",children:ge?i.jsx(bt,{className:"w-5 h-5 animate-spin"}):" "}),i.jsx("button",{onClick:()=>j(!1),disabled:ge,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-all border border-gray-700",children:""})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-400 border border-emerald-500/20",children:i.jsx(Tr,{className:"w-8 h-8"})}),i.jsx("h3",{className:"text-xl font-black text-white",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"     "})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-2",children:" "}),i.jsx("div",{className:"space-y-2",children:lp.map(he=>i.jsxs("div",{onClick:()=>_e(he.id),className:`p-3 rounded-xl border-2 cursor-pointer transition-all flex items-center justify-between ${le===he.id?"border-emerald-500 bg-emerald-900/20":"border-gray-700 bg-gray-800 hover:bg-gray-750"}`,children:[i.jsx("span",{className:`text-sm font-bold ${le===he.id?"text-emerald-400":"text-gray-300"}`,children:he.name}),le===he.id&&i.jsx(da,{className:"w-4 h-4 text-emerald-500"})]},he.id))})]}),i.jsx("textarea",{value:me,onChange:he=>ce(he.target.value),placeholder:"",className:"w-full h-32 bg-gray-800 border border-gray-700 rounded-xl p-4 text-white outline-none focus:border-emerald-500 mb-4 resize-none focus:ring-2 focus:ring-emerald-500/20 transition-all"}),i.jsxs("button",{onClick:()=>{me.trim()&&j(!0)},disabled:!me.trim(),className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-emerald-900/30",children:[i.jsx(ca,{className:"w-5 h-5"})," "]})]})]})]})]})},BD=({onStartQuiz:r,onLoginClick:e,onNavigate:t})=>{const{user:s}=nr(),[l,c]=V.useState(!1),d=()=>{c(!0),setTimeout(()=>c(!1),3e3)},f=()=>{s?t("QUIZZES"):d()},g=()=>{s?t("LESSONS"):d()},x=()=>{t("LESSONS_EXPLANATIONS")},v=()=>{t("CONTACT_TEACHER")};return i.jsxs("section",{className:"relative w-full min-h-screen flex flex-col items-center bg-transparent overflow-hidden animate-fade-in transition-colors duration-300 pt-24 md:pt-32",children:[l&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center pointer-events-none px-4",children:i.jsxs("div",{className:"bg-red-900/90 border border-red-800 shadow-xl rounded-xl p-4 flex items-center gap-3 relative w-full max-w-md animate-fade-in-up pointer-events-auto backdrop-blur-md",children:[i.jsx("div",{className:"bg-red-800 p-2 rounded-full shrink-0",children:i.jsx(wf,{className:"w-6 h-6 text-red-200"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-bold text-white text-sm",children:"  "}),i.jsx("p",{className:"text-gray-300 text-xs mt-1",children:"        ."})]}),i.jsx("button",{onClick:()=>c(!1),className:"absolute top-2 left-2 text-gray-300 hover:text-white",children:i.jsx(ms,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>{c(!1),e()},className:"mr-auto bg-red-600 text-white text-xs font-bold px-3 py-1.5 rounded-lg hover:bg-red-700 transition-colors shrink-0",children:""})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 w-full relative z-10 flex flex-col items-center text-center",children:[i.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-black text-white leading-[1.2] lg:leading-[1.15] mb-6 drop-shadow-lg",children:["  ",i.jsx("br",{}),i.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300 inline-block relative pb-2",children:[" ",i.jsx("svg",{className:"absolute w-full h-3 -bottom-1 right-0 text-emerald-900/50 -z-10",viewBox:"0 0 100 10",preserveAspectRatio:"none",children:i.jsx("path",{d:"M0 5 Q 50 10 100 5",stroke:"currentColor",strokeWidth:"8",fill:"none"})})]}),i.jsx("br",{}),"  "]}),i.jsxs("p",{className:"text-lg md:text-xl text-gray-300 leading-relaxed max-w-2xl mx-auto mb-10",children:["      ",i.jsx("span",{className:"text-emerald-400 font-black text-2xl px-1 relative inline-block",children:"   "}),"."]}),i.jsxs("div",{className:"flex flex-col w-full max-w-md gap-3 justify-center",children:[i.jsxs("button",{onClick:f,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(ns,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:" "})]}),i.jsx(ra,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsxs("button",{onClick:x,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(Uu,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:" "})]}),i.jsx(ra,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsxs("button",{onClick:g,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(ss,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:" "})]}),i.jsx(ra,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsxs("button",{onClick:v,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(Fu,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:"  "})]}),i.jsx(ra,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsx("div",{className:"w-full mt-2",children:s?i.jsxs("button",{onClick:()=>t("PROFILE"),className:"w-full bg-gray-900 border-2 border-emerald-900 text-emerald-400 hover:bg-emerald-900/20 text-base font-bold py-3 px-5 rounded-xl transition-all flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:[i.jsx(Zn,{className:"w-5 h-5"})," "]}):i.jsxs("button",{onClick:e,className:"w-full bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-orange-500/40 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-orange-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(xp,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:"  "})]}),i.jsx(ra,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]})})]})]})]})},op=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),cp=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),qD=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M12 2C6.48 2 2 6.03 2 11c0 2.87 1.56 5.47 4 7.1V22l3.57-1.96c.78.22 1.6.34 2.43.34 5.52 0 10-4.03 10-9s-4.48-9-10-9zm1.06 12.07l-2.6-2.78-5.07 2.78 5.58-5.93 2.62 2.78 5.05-2.78-5.58 5.93z"})}),al=[{id:1,name:" ",text:"      . ",platform:"whatsapp",time:"10:30 "},{id:2,name:" ",text:"     . ",platform:"messenger",time:"11:15 "},{id:3,name:" ",text:"    .",platform:"telegram",time:"09:45 "},{id:4,name:" ",text:"      .",platform:"whatsapp",time:"02:20 "},{id:5,name:" ",text:"        .",platform:"messenger",time:"04:10 "},{id:6,name:" ",text:"       . ",platform:"telegram",time:"08:00 "},{id:7,name:"  ",text:"        . ",platform:"whatsapp",time:"01:30 "},{id:8,name:" ",text:"       .",platform:"messenger",time:"06:45 "},{id:9,name:" ",text:"      .",platform:"telegram",time:"03:15 "},{id:10,name:" ",text:"      ! ",platform:"whatsapp",time:"12:00 "},{id:11,name:" ",text:"   .  . ",platform:"messenger",time:"07:30 "},{id:12,name:"  ",text:"       .",platform:"telegram",time:"10:10 "},{id:13,name:" ",text:"     .",platform:"whatsapp",time:"05:50 "},{id:14,name:" ",text:"     . ",platform:"messenger",time:"09:20 "},{id:15,name:" ",text:"      . ",platform:"telegram",time:"08:45 "}],FD=({onNavigate:r})=>{const[e,t]=V.useState(0),[s,l]=V.useState(!0);V.useEffect(()=>{const g=setInterval(()=>{l(!1),setTimeout(()=>{t(x=>(x+1)%al.length),l(!0)},500)},7e3);return()=>clearInterval(g)},[]);const c=g=>{switch(g){case"whatsapp":return i.jsx(op,{className:"w-5 h-5 text-white"});case"messenger":return i.jsx(qD,{className:"w-5 h-5 text-white"});case"telegram":return i.jsx(cp,{className:"w-5 h-5 text-white"});default:return null}},d=g=>{switch(g){case"whatsapp":return"bg-green-500";case"messenger":return"bg-blue-600";case"telegram":return"bg-sky-500";default:return"bg-gray-500"}},f=g=>i.jsxs("div",{className:"bg-gray-900 md:bg-white/5 md:backdrop-blur-md rounded-3xl p-6 shadow-sm md:shadow-lg border border-gray-800 md:border-white/5 relative h-full flex flex-col hover:border-white/20 hover:bg-gray-800 md:hover:bg-white/10 transition-all",children:[i.jsx("div",{className:"absolute -bottom-2 right-8 w-4 h-4 bg-gray-900 md:bg-white/5 border-b border-r border-gray-800 md:border-white/5 transform rotate-45"}),i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-900/50 flex items-center justify-center text-emerald-300 font-bold text-lg border border-emerald-500/20",children:g.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-white",children:g.name}),i.jsx("span",{className:"text-xs text-gray-500 font-medium",children:g.time})]})]}),i.jsx("div",{className:`w-8 h-8 rounded-full ${d(g.platform)} flex items-center justify-center shadow-md ring-2 ring-black/20`,children:c(g.platform)})]}),i.jsxs("p",{className:"text-gray-300 text-base leading-relaxed font-medium",children:['"',g.text,'"']})]});return i.jsx("section",{className:"py-20 relative overflow-hidden",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl font-black text-white mb-4 drop-shadow-md",children:" "}),i.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full shadow-[0_0_10px_rgba(16,185,129,0.5)]"}),i.jsx("p",{className:"mt-6 text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"                       ."}),i.jsx("div",{className:"mt-8 flex justify-center animate-fade-in-up delay-200",children:i.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-900/20 border border-emerald-500/30 px-5 py-2.5 rounded-full shadow-lg backdrop-blur-sm",children:[i.jsx(vl,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),i.jsx("span",{className:"text-emerald-300 font-bold text-sm",children:"   "})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[i.jsxs("div",{className:"bg-gray-900 md:bg-white/5 md:backdrop-blur-xl p-6 rounded-[2.5rem] border border-gray-800 md:border-white/10 hover:border-emerald-500/50 transition-all group flex flex-col h-full shadow-lg md:shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[i.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-gray-800 md:border-white/10 group-hover:border-emerald-500/30 group-hover:scale-105 transition-all",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",alt:".   ",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"text-center sm:text-right flex-1",children:[i.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),i.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),i.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[i.jsx(yp,{className:"w-3.5 h-3.5 text-emerald-500"}),"   - "]})]})]}),i.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[i.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),i.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[i.jsx("a",{href:"https://www.facebook.com/yazanabokaheal2?locale=ms_MY",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(pp,{className:"w-6 h-6"})}),i.jsx("a",{href:"https://wa.me/972568401548",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(op,{className:"w-6 h-6"})}),i.jsx("a",{href:"https://t.me/yazan1342",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(cp,{className:"w-6 h-6"})})]})]})]}),i.jsxs("div",{className:"bg-gray-900 md:bg-white/5 md:backdrop-blur-xl p-6 rounded-[2.5rem] border border-gray-800 md:border-white/10 hover:border-blue-500/50 transition-all group flex flex-col h-full shadow-lg md:shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[i.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-gray-800 md:border-white/10 group-hover:border-blue-500/30 group-hover:scale-105 transition-all",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",alt:".   ",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"text-center sm:text-right flex-1",children:[i.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),i.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),i.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[i.jsx(yp,{className:"w-3.5 h-3.5 text-blue-500"}),"   - "]})]})]}),i.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[i.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),i.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[i.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(pp,{className:"w-6 h-6"})}),i.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(op,{className:"w-6 h-6"})}),i.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(cp,{className:"w-6 h-6"})})]})]})]})]}),i.jsx("div",{className:"text-center mb-12",children:i.jsxs("button",{onClick:()=>r("TEACHER_CV"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white text-xl font-bold px-10 py-5 rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(16,185,129,0.4)] transition-all transform hover:-translate-y-1 border border-emerald-500/50",children:[i.jsx(ld,{className:"w-6 h-6"}),"  ",i.jsx(vf,{className:"w-6 h-6"})]})}),i.jsxs("div",{className:"mb-0 pt-10 border-t border-white/10",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"  "}),i.jsx("p",{className:"text-gray-400",children:"          "})]}),i.jsxs("div",{className:`transform transition-all duration-700 ease-out ${s?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[i.jsxs("div",{className:"block md:hidden space-y-4",children:[f(al[e]),f(al[(e+1)%al.length])]}),i.jsx("div",{className:"hidden md:grid md:grid-cols-3 gap-6",children:[0,1,2].map(g=>{const x=(e+g)%al.length;return i.jsx("div",{children:f(al[x])},al[x].id)})})]})]})]})})},p2=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=V.useState(!1),f=V.useRef(null);V.useEffect(()=>{const x=v=>{f.current&&!f.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-[100]":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-3 py-2.5 rounded-lg border flex justify-between items-center outline-none transition-all font-bold text-sm
            ${l?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-500 cursor-not-allowed":c?"bg-white dark:bg-gray-800 border-emerald-500 ring-1 ring-emerald-500/20 text-gray-800 dark:text-white shadow-sm":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-emerald-500 text-gray-800 dark:text-white"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),i.jsx(bl,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar animate-fade-in p-1 z-[100]",children:r.map((x,v)=>{if(x.isHeader)return i.jsx("div",{className:"px-3 py-1.5 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-1 first:mt-0 bg-gray-100 dark:bg-gray-800 rounded-md mb-1",children:x.label},v);const w=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-3 py-2 rounded-md font-bold text-xs cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${w?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}
                   `,children:[x.label,w&&i.jsx(da,{className:"w-3 h-3"})]},v)})})]})},HD=({isOpen:r,onClose:e})=>{const[t,s]=V.useState("ROLE_SELECTION"),[l,c]=V.useState(!1),[d,f]=V.useState(null),[g,x]=V.useState(null),{setTeacherSession:v}=nr(),[w,N]=V.useState(""),[C,M]=V.useState(""),[Z,B]=V.useState(""),[me,ce]=V.useState(""),[le,_e]=V.useState(""),[ge,G]=V.useState(""),[S,j]=V.useState(""),[A,O]=V.useState(""),[D,L]=V.useState(""),[I,de]=V.useState("male"),[he,F]=V.useState(""),[oe,Y]=V.useState("");if(!r)return null;const re=()=>{s("ROLE_SELECTION"),f(null),x(null),N(""),M(""),B(""),ce(""),_e(""),G(""),j(""),O(""),L(""),de("male"),Y(""),F(""),c(!1)},ve=()=>{re(),e()},R=gt=>{gt.preventDefault(),f(null),c(!0),setTimeout(()=>{w==="2001"?(v(".   ","yazan@etqan.edu"),x("   !"),setTimeout(()=>ve(),1500)):w==="2003"?(v(".   ","majd@etqan.edu"),x("    !"),setTimeout(()=>ve(),1500)):(f("   "),c(!1))},800)},U=async gt=>{gt.preventDefault(),f(null),c(!0);try{await fC(zu,C.trim(),Z),x("   !"),setTimeout(()=>{ve(),window.location.reload()},1500)}catch(Rt){console.error(Rt),f("      "),c(!1)}},z=async gt=>{gt.preventDefault(),f(null),c(!0);try{const it=(await hC(zu,A.trim(),D)).user,vn="",vs=S==="university"&&he?he:"";await yy(Fn(qe,"users",it.uid),{firstName:me,lastName:le,age:ge,grade:S,gender:I,school:vs,avatar:vn,profileBackground:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",email:A.trim(),role:"student",totalXP:0,quizzesCompleted:0,createdAt:new Date}),x("   !"),setTimeout(()=>{ve(),window.location.reload()},1500)}catch(Rt){console.error(Rt),Rt.code==="auth/email-already-in-use"?f("   "):Rt.code==="auth/weak-password"?f("   "):f("    .    ."),c(!1)}},ee=async gt=>{gt.preventDefault(),f(null),c(!0);try{await dC(zu,oe.trim()),x("   !")}catch(Rt){console.error(Rt),Rt.code==="auth/user-not-found"?f("    "):Rt.code==="auth/invalid-email"?f("    "):Rt.code==="auth/too-many-requests"?f("           ."):f("          .")}finally{c(!1)}},xe=()=>{switch(t){case"TEACHER_LOGIN":return"    ...";case"STUDENT_LOGIN":return"  ...";case"STUDENT_SIGNUP":return"   ...";case"FORGOT_PASSWORD":return"   ...";default:return" ..."}},Se=()=>i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsx("h3",{className:"text-xl font-bold text-center mb-6 text-gray-800 dark:text-white",children:"   "}),i.jsxs("button",{onClick:()=>s("STUDENT_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-all",children:[i.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900 p-3 rounded-full ml-4 group-hover:bg-emerald-200 dark:group-hover:bg-emerald-800 transition-colors",children:i.jsx(Zn,{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),i.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"    "})]}),i.jsx(Bg,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500"})]}),i.jsxs("button",{onClick:()=>s("TEACHER_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-3 rounded-full ml-4 group-hover:bg-blue-200 dark:group-hover:bg-blue-800 transition-colors",children:i.jsx(ha,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),i.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"   "})]}),i.jsx(Bg,{className:"w-5 h-5 text-gray-300 group-hover:text-blue-500"})]})]}),Me=()=>i.jsxs("form",{onSubmit:R,className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(ii,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:" "}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"     "})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsx("input",{type:"password",value:w,onChange:gt=>N(gt.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 dark:focus:ring-blue-900 outline-none transition-all text-center text-lg tracking-widest bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0})]}),i.jsx("button",{type:"submit",className:"mt-4 w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 dark:shadow-none",children:""})]}),Ke=()=>i.jsxs("form",{onSubmit:U,className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:" !   "})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"email",value:C,onChange:gt=>M(gt.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),i.jsx(Tr,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"password",value:Z,onChange:gt=>B(gt.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0}),i.jsx(ii,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]}),i.jsx("div",{className:"text-left",children:i.jsx("button",{type:"button",onClick:()=>s("FORGOT_PASSWORD"),className:"text-xs text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})})]}),i.jsx("button",{type:"submit",disabled:l,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:" "}),i.jsx("div",{className:"mt-4 text-center",children:i.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:["   "," ",i.jsx("button",{type:"button",onClick:()=>s("STUDENT_SIGNUP"),className:"text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})]})})]}),ke=()=>{const gt=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(it=>({label:` ${it}`,value:it.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"  ",value:"English Major - QOU"},{label:" ",value:"university"}],Rt=[{label:"",value:"male"},{label:"",value:"female"}];return i.jsxs("form",{onSubmit:z,className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"   "}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"   "})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"text",value:me,onChange:it=>ce(it.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"text",value:le,onChange:it=>_e(it.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),i.jsx("input",{type:"number",value:ge,onChange:it=>G(it.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),i.jsx(p2,{options:Rt,value:I,onChange:it=>de(it),placeholder:" "})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 block mb-1",children:" "}),i.jsx(p2,{options:gt,value:S,onChange:it=>j(it),placeholder:"  / "})]}),S==="university"&&i.jsxs("div",{className:"space-y-1 animate-fade-in",children:[i.jsx("label",{className:"text-xs font-bold text-blue-400 block mb-1",children:"  / "}),i.jsx("input",{type:"text",value:he,onChange:it=>F(it.target.value),placeholder:":   - ",className:"w-full px-3 py-2 rounded-lg border border-blue-500/50 focus:border-blue-500 outline-none bg-blue-50 dark:bg-blue-900/10 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"email",value:A,onChange:it=>O(it.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"password",value:D,onChange:it=>L(it.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0,minLength:6})]}),i.jsx("button",{type:"submit",disabled:l,className:"mt-2 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:" "}),i.jsx("div",{className:"text-center mt-2",children:i.jsx("button",{type:"button",onClick:()=>s("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors",children:"    "})})]})},Nt=()=>i.jsxs("form",{onSubmit:ee,className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),i.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:["     ",i.jsx("strong",{children:""}),"  "]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"email",value:oe,onChange:gt=>Y(gt.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),i.jsx(Tr,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),i.jsx("button",{type:"submit",disabled:l,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:"  "}),i.jsx("div",{className:"text-center mt-4",children:i.jsxs("button",{type:"button",onClick:()=>s("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors flex items-center justify-center gap-1 mx-auto",children:[i.jsx(vf,{className:"w-4 h-4"}),"  "]})})]});return i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300",onClick:ve}),i.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl w-full max-w-md relative shadow-2xl overflow-visible animate-fade-in-up p-6 min-h-[400px] flex flex-col border border-gray-100 dark:border-gray-800",children:[l&&!g&&i.jsxs("div",{className:"absolute inset-0 bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm z-50 flex flex-col items-center justify-center animate-fade-in rounded-3xl",children:[i.jsxs("div",{className:"relative mb-6",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-200 dark:bg-emerald-900 rounded-full animate-ping opacity-30 duration-1000"}),i.jsx("div",{className:"relative w-20 h-20 bg-emerald-50 dark:bg-emerald-900/50 rounded-full flex items-center justify-center border border-emerald-100 dark:border-emerald-800 shadow-inner",children:i.jsx(bt,{className:"w-10 h-10 text-emerald-600 dark:text-emerald-400 animate-spin"})})]}),i.jsx("h4",{className:"text-lg font-black text-gray-800 dark:text-white mb-2 tracking-tight animate-pulse",children:xe()}),i.jsx("p",{className:"text-gray-400 text-xs font-medium",children:"   "})]}),i.jsx("button",{onClick:ve,disabled:l,className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 disabled:opacity-50",children:i.jsx(ms,{className:"w-5 h-5"})}),t!=="ROLE_SELECTION"&&!g&&t!=="FORGOT_PASSWORD"&&i.jsxs("button",{onClick:()=>s("ROLE_SELECTION"),disabled:l,className:"absolute top-4 right-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 flex items-center gap-1 disabled:opacity-50",children:[i.jsx(Bg,{className:"w-5 h-5"}),i.jsx("span",{className:"text-xs font-bold",children:""})]}),i.jsx("div",{className:"mt-6 flex-1 flex flex-col justify-center",children:g?i.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mb-2 animate-[bounce_1s_infinite]",children:i.jsx(da,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),i.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white leading-relaxed px-4 whitespace-pre-line",children:g}),t==="FORGOT_PASSWORD"&&i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-900 rounded-xl p-4 mx-4 text-sm text-yellow-800 dark:text-yellow-200 text-right shadow-sm mt-4",children:[i.jsxs("p",{className:"font-bold flex items-center gap-2 mb-2 text-yellow-900 dark:text-yellow-100",children:[i.jsx(wf,{className:"w-5 h-5"}),"  :"]}),i.jsxs("p",{className:"leading-relaxed",children:["         ",i.jsx("strong",{children:"    (Spam)"}),"  (Junk)."]})]}),i.jsx("button",{onClick:()=>{t==="FORGOT_PASSWORD"?(s("STUDENT_LOGIN"),x(null)):ve()},className:"mt-8 bg-emerald-600 text-white px-10 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none transform hover:scale-105 duration-200",children:t==="FORGOT_PASSWORD"?"  ":""})]}):i.jsxs(i.Fragment,{children:[t==="ROLE_SELECTION"&&Se(),t==="TEACHER_LOGIN"&&Me(),t==="STUDENT_LOGIN"&&Ke(),t==="STUDENT_SIGNUP"&&ke(),t==="FORGOT_PASSWORD"&&Nt(),d&&i.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 rounded-lg flex items-start gap-2 text-red-600 dark:text-red-400 text-sm animate-fade-in",children:[i.jsx(wf,{className:"w-5 h-5 shrink-0 mt-0.5"}),i.jsx("span",{className:"font-medium",children:d})]})]})})]})]})},GD=()=>{const{user:r}=nr(),[e,t]=V.useState(!1),[s,l]=V.useState(null),[c,d]=V.useState("MCQ"),[f,g]=V.useState({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),[x,v]=V.useState([]),[w,N]=V.useState(null),[C,M]=V.useState({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:"",generalInstruction:"",passageFontSize:"md"}),[Z,B]=V.useState(""),[me,ce]=V.useState(!1),[le,_e]=V.useState([]),[ge,G]=V.useState(!1),[S,j]=V.useState(""),A=(z,ee)=>{M(xe=>({...xe,[z]:ee}))},O=(z,ee)=>{const xe=[...C.options];xe[z]=ee,M(Se=>({...Se,options:xe}))},D=()=>{if(!C.question.trim()){alert("   ");return}if((c==="MCQ"||c==="READING")&&C.options.some(xe=>!xe.trim())){alert("   ");return}if(c==="READING"&&!C.passageContent.trim()){alert("   ");return}if(c==="REORDER"&&!Z.trim()){alert("    ");return}let z=[];if(c==="TF")z=["",""];else if(c==="REORDER"){if(z=Z.split(" ").filter(xe=>xe.trim().length>0),z.length<2){alert("       ");return}}else z=C.options;const ee={id:w||Date.now(),question:C.question,options:z,correctAnswer:C.correctAnswer,explanation:C.explanation||"",type:c};c==="READING"&&(ee.passageContent=C.passageContent,ee.generalInstruction=C.generalInstruction,ee.passageFontSize=C.passageFontSize),w?(v(x.map(xe=>xe.id===w?ee:xe)),N(null)):v([...x,ee]),L()},L=()=>{M({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:"",generalInstruction:"",passageFontSize:"md"}),B(""),N(null),d("MCQ")},I=z=>{const ee=x.find(xe=>xe.id===z);ee&&(N(z),d(ee.type||"MCQ"),ee.type==="REORDER"?(B(ee.options.join(" ")),M({question:ee.question,options:["","","",""],correctAnswer:ee.correctAnswer,explanation:ee.explanation||"",passageContent:ee.passageContent||"",generalInstruction:ee.generalInstruction||"",passageFontSize:ee.passageFontSize||"md"})):(M({question:ee.question,options:ee.type==="TF"?["","","",""]:ee.options.length>=4?ee.options:[...ee.options,...Array(4-ee.options.length).fill("")],correctAnswer:ee.correctAnswer,explanation:ee.explanation||"",passageContent:ee.passageContent||"",generalInstruction:ee.generalInstruction||"",passageFontSize:ee.passageFontSize||"md"}),B("")),window.scrollTo({top:0,behavior:"smooth"}))},de=()=>{L()},he=z=>{window.confirm("      ")&&(v(x.filter(ee=>ee.id!==z)),w===z&&L())},F=async()=>{if(!f.title||!f.grade){alert("     ");return}if(x.length===0){alert("     ");return}t(!0);try{const z={title:f.title,subject:f.subject,grade:f.grade,category:f.category,questions:x,createdBy:(r==null?void 0:r.uid)||"teacher",teacherName:(r==null?void 0:r.displayName)||"",description:f.description||"",duration:parseInt(f.duration)||30,questionDuration:f.questionDuration?parseInt(f.questionDuration):null};if(s){const ee=Fn(qe,"quizzes",s);await Ed(ee,{...z,updatedAt:xs()}),alert("    !")}else await er(mt(qe,"quizzes"),{...z,createdAt:xs()}),alert("    !");g({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),v([]),l(null),L()}catch(z){console.error("Error saving quiz:",z),alert("   ")}finally{t(!1)}},oe=()=>{window.confirm("        .")&&(g({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),v([]),l(null),L())},Y=async()=>{G(!0);try{const z=Vn(mt(qe,"quizzes"),_d("createdAt","desc")),ee=await Hn(z);_e(ee.docs.map(xe=>({id:xe.id,...xe.data()})))}catch(z){console.error(z)}G(!1)},re=()=>{Y(),ce(!0)},ve=z=>{x.length>0&&!window.confirm("         .")||(l(z.id||null),g({title:z.title,subject:z.subject,grade:z.grade,category:z.category||"Language",description:z.description||"",duration:z.duration?z.duration.toString():"30",questionDuration:z.questionDuration?z.questionDuration.toString():""}),v(z.questions),ce(!1),L(),window.scrollTo({top:0,behavior:"smooth"}))},R=le.filter(z=>(z.title?z.title.toLowerCase().includes(S.toLowerCase()):!1)||(z.grade?z.grade.includes(S):!1)),U=[{value:"sm",label:""},{value:"md",label:""},{value:"lg",label:""},{value:"xl",label:" "}];return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 pt-10 pb-28 px-4 border-b border-white/5 shadow-sm relative overflow-hidden",children:i.jsx("div",{className:"max-w-6xl mx-auto relative z-10",children:i.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsx("div",{className:"p-4 bg-blue-900/30 rounded-3xl shadow-inner border border-blue-800",children:i.jsx(iw,{className:"w-10 h-10 text-blue-400"})}),i.jsxs("div",{className:"text-center md:text-right",children:[i.jsx("h1",{className:"text-3xl md:text-5xl font-black tracking-tight text-white mb-2",children:" "}),i.jsxs("p",{className:"text-blue-400 font-bold text-lg",children:["  ",r==null?void 0:r.displayName]})]})]}),i.jsx("div",{className:"flex gap-3",children:i.jsxs("button",{onClick:re,className:"bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-emerald-700 transition-colors shadow-lg",children:[i.jsx(mp,{className:"w-5 h-5"})," "]})})]})})}),i.jsx("div",{className:"max-w-6xl mx-auto px-4 -mt-16 relative z-20",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[i.jsxs("div",{className:`bg-gray-900 rounded-[2rem] shadow-xl border p-6 md:p-8 transition-all ${s?"border-blue-500 ring-2 ring-blue-900":"border-gray-700"}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-8 border-b border-gray-700 pb-4",children:[i.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[i.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:i.jsx(ns,{className:"w-5 h-5 text-blue-400"})}),s?"  ":"  "]}),s&&i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"bg-blue-900 text-blue-300 px-3 py-1 rounded-full text-xs font-bold animate-pulse",children:" "}),i.jsx("button",{onClick:oe,className:"text-red-500 hover:bg-red-900/20 px-2 rounded",children:i.jsx(ms,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("input",{type:"text",value:f.title,onChange:z=>g({...f,title:z.target.value}),placeholder:":    - ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white placeholder-gray-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx(lx,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),i.jsxs("select",{value:f.subject,onChange:z=>g({...f,subject:z.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"English",children:"English"}),i.jsx("option",{value:"Science",children:""}),i.jsx("option",{value:"Math",children:""})]})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"    "}),i.jsxs("div",{className:"relative",children:[i.jsx(ha,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),i.jsxs("select",{value:f.grade,onChange:z=>g({...f,grade:z.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"",className:"text-gray-400",children:" "}),i.jsx("optgroup",{label:" ",children:[5,6,7,8,9,10,11,12].map(z=>i.jsxs("option",{value:z.toString(),children:[" ",z]},z))}),i.jsx("optgroup",{label:" ",children:i.jsx("option",{value:"English Major - QOU",children:"   -   "})})]}),i.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:i.jsx(bl,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"col-span-2 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  /  (Category)"}),i.jsxs("div",{className:"relative",children:[i.jsx(C2,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),i.jsxs("select",{value:f.category,onChange:z=>g({...f,category:z.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"Language",children:"Language ()"}),i.jsx("option",{value:"Reading",children:"Reading ()"}),i.jsx("option",{value:"Writing",children:"Writing ()"}),i.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"}),i.jsx("option",{value:"General",children:"  (General Quiz)"})]}),i.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:i.jsx(bl,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[i.jsx(ax,{className:"w-4 h-4 text-blue-600"}),"  ()"]}),i.jsx("input",{type:"number",min:"1",value:f.duration,onChange:z=>g({...f,duration:z.target.value}),placeholder:": 30",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[i.jsx(gA,{className:"w-4 h-4 text-blue-600"}),"   ()"]}),i.jsx("input",{type:"number",min:"5",value:f.questionDuration,onChange:z=>g({...f,questionDuration:z.target.value}),placeholder:"   ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"}),i.jsx("p",{className:"text-[10px] text-gray-500 mt-1 mr-1",children:":         ."})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  ()"}),i.jsx("textarea",{value:f.description,onChange:z=>g({...f,description:z.target.value}),className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-medium text-white h-24 resize-none placeholder-gray-500",placeholder:"    ..."})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 md:p-8",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8 border-b border-gray-700 pb-4",children:[i.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[i.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:i.jsx(aw,{className:"w-5 h-5 text-blue-400"})}),w?" ":" "]}),i.jsxs("div",{className:"flex flex-wrap gap-2 bg-gray-800 p-1.5 rounded-xl self-start",children:[i.jsx("button",{onClick:()=>d("MCQ"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${c==="MCQ"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:"  "}),i.jsx("button",{onClick:()=>d("TF"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${c==="TF"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:"  "}),i.jsxs("button",{onClick:()=>d("READING"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${c==="READING"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[i.jsx(ss,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>d("REORDER"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${c==="REORDER"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[i.jsx(j2,{className:"w-4 h-4"})," "]})]})]}),i.jsxs("div",{className:"space-y-6",children:[c==="READING"&&i.jsxs("div",{className:"space-y-4 bg-blue-900/20 p-5 rounded-2xl border border-blue-800 mb-6",children:[i.jsxs("h4",{className:"font-bold text-blue-300 flex items-center gap-2 mb-2",children:[i.jsx(fA,{className:"w-5 h-5"})," "]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (General Instruction)"}),i.jsx("input",{type:"text",value:C.generalInstruction,onChange:z=>A("generalInstruction",z.target.value),placeholder:": Read the following text then answer the question",className:"w-full px-4 py-3 rounded-xl border border-blue-700 focus:border-blue-500 outline-none bg-gray-800 text-sm font-medium"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (Passage)"}),i.jsx("textarea",{value:C.passageContent,onChange:z=>A("passageContent",z.target.value),placeholder:"   ... ( Enter   )",className:"w-full px-4 py-3 rounded-xl border border-blue-700 focus:border-blue-500 outline-none bg-gray-800 text-sm font-medium h-40 resize-y whitespace-pre-wrap",style:{direction:"ltr",textAlign:"left"}}),i.jsx("p",{className:"text-[10px] text-blue-500 mt-1",children:"* :        ."})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-xs font-bold text-blue-300 mb-2 flex items-center gap-2",children:[i.jsx(_A,{className:"w-4 h-4"}),"   (  )"]}),i.jsx("div",{className:"flex gap-3",children:U.map(z=>i.jsx("button",{onClick:()=>A("passageFontSize",z.value),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all border ${C.passageFontSize===z.value?"bg-blue-600 text-white border-blue-600":"bg-gray-800 text-gray-300 border-gray-600 hover:border-blue-400"}`,children:z.label},z.value))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:c==="READING"?"  ":c==="REORDER"?"/ ":" "}),i.jsxs("div",{className:"relative",children:[i.jsx(oa,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4"}),i.jsx("input",{type:"text",value:C.question,onChange:z=>A("question",z.target.value),placeholder:c==="REORDER"?": Rearrange the following sentence":"   ...",className:"w-full px-5 py-4 pr-12 rounded-2xl border-2 border-gray-600 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none font-bold text-lg text-white bg-gray-800 placeholder-gray-400 transition-all"})]})]}),c==="MCQ"||c==="READING"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.options.map((z,ee)=>i.jsxs("div",{className:`relative group transition-all duration-300 ${C.correctAnswer===ee?"scale-[1.02]":""}`,children:[i.jsxs("label",{className:"flex items-center justify-between mb-2 px-1",children:[i.jsxs("span",{className:`text-xs font-bold ${C.correctAnswer===ee?"text-blue-400":"text-gray-400"}`,children:[" ",ee+1]}),i.jsx("button",{onClick:()=>A("correctAnswer",ee),className:`text-[10px] px-2 py-1 rounded-md transition-colors font-bold ${C.correctAnswer===ee?"bg-blue-900/30 text-blue-300":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:C.correctAnswer===ee?" ":" "})]}),i.jsx("input",{type:"text",value:z,onChange:xe=>O(ee,xe.target.value),placeholder:`  ${ee+1}`,className:`w-full px-4 py-3 rounded-xl border-2 outline-none transition-all font-medium ${ee===C.correctAnswer?"border-blue-500 bg-blue-900/20 text-white shadow-sm ring-2 ring-blue-900/30":"border-gray-600 bg-gray-700 focus:border-blue-400 text-gray-200"}`})]},ee))}):c==="REORDER"?i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-1",children:"  (   )"}),i.jsx("input",{type:"text",dir:"ltr",value:Z,onChange:z=>B(z.target.value),placeholder:"e.g. The sun rises in the east",className:"w-full px-5 py-4 rounded-2xl border-2 border-emerald-800 focus:border-emerald-500 outline-none text-lg font-medium text-white bg-emerald-900/10 text-left"}),Z&&i.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:Z.split(" ").filter(z=>z.trim()).map((z,ee)=>i.jsx("span",{className:"bg-gray-700 px-3 py-1 rounded-lg text-sm font-bold text-gray-300",children:z},ee))}),i.jsx("p",{className:"text-xs text-gray-500",children:"      ."})]}):i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("button",{onClick:()=>A("correctAnswer",0),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${C.correctAnswer===0?"border-blue-500 bg-blue-900/30 text-blue-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[C.correctAnswer===0&&i.jsx(bn,{className:"w-6 h-6"})," (True)"]}),i.jsxs("button",{onClick:()=>A("correctAnswer",1),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${C.correctAnswer===1?"border-red-500 bg-red-900/30 text-red-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[C.correctAnswer===1&&i.jsx(bn,{className:"w-6 h-6"})," (False)"]})]}),i.jsxs("div",{className:"bg-yellow-900/10 p-4 rounded-2xl border border-yellow-900/30",children:[i.jsxs("label",{className:"block text-sm font-bold text-yellow-500 mb-2 flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),"  ()"]}),i.jsx("textarea",{value:C.explanation,onChange:z=>A("explanation",z.target.value),placeholder:"        ...",className:"w-full px-4 py-3 rounded-xl border border-yellow-800/50 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-900/30 outline-none text-gray-200 bg-gray-800 h-20 resize-none placeholder-gray-400 text-sm",dir:"auto"})]}),i.jsxs("div",{className:"flex gap-3",children:[w&&i.jsxs("button",{onClick:de,className:"flex-1 bg-gray-700 text-gray-300 py-4 rounded-2xl font-bold hover:bg-gray-600 transition-all flex items-center justify-center gap-2",children:[i.jsx(A2,{className:"w-5 h-5"})," "]}),i.jsx("button",{onClick:D,className:`flex-1 bg-gray-800 text-white py-4 rounded-2xl font-bold hover:bg-gray-900 transition-all shadow-none flex items-center justify-center gap-2 transform hover:-translate-y-1 border border-gray-700 ${w?"bg-blue-600 hover:bg-blue-700 border-blue-600":""}`,children:w?i.jsxs(i.Fragment,{children:[i.jsx(mi,{className:"w-5 h-5"})," "]}):i.jsxs(i.Fragment,{children:[i.jsx(aw,{className:"w-5 h-5"}),"  "]})})]})]})]})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"sticky top-24 space-y-6",children:[i.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6",children:[i.jsxs("h3",{className:"text-lg font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(mi,{className:"w-5 h-5 text-blue-400"})," "]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-5 bg-gray-800 rounded-2xl border border-gray-600 flex flex-col gap-3",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),i.jsx("span",{className:"font-black text-white bg-gray-600 px-3 py-0.5 rounded-md shadow-sm",children:x.length})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),i.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:f.category})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),i.jsxs("span",{className:"font-bold text-white",children:[f.duration," "]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),s?i.jsx("span",{className:"text-emerald-400 font-bold bg-emerald-900/30 px-2 py-0.5 rounded-md",children:""}):i.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:""})]})]}),i.jsxs("button",{onClick:F,disabled:e||x.length===0,className:`w-full py-4 rounded-2xl font-black text-white shadow-lg transition-all flex items-center justify-center gap-2 transform ${e||x.length===0?"bg-gray-600 cursor-not-allowed shadow-none":"bg-blue-600 hover:bg-blue-700 shadow-none hover:-translate-y-1"}`,children:[e?i.jsx(bt,{className:"w-5 h-5 animate-spin"}):s?i.jsx(sm,{className:"w-5 h-5"}):i.jsx(bn,{className:"w-5 h-5"}),e?" ...":s?" ":"  "]})]})]}),x.length>0&&i.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 animate-fade-in-up",children:[i.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"bg-blue-900/30 p-1.5 rounded-lg",children:i.jsx(iw,{className:"w-4 h-4 text-blue-400"})}),"  (",x.length,")"]}),i.jsx("div",{className:"space-y-3 max-h-[calc(100vh-400px)] overflow-y-auto pr-2 custom-scrollbar",children:x.map((z,ee)=>i.jsxs("div",{className:`p-3 rounded-xl border transition-all group relative ${w===z.id?"bg-blue-900/20 border-blue-500 ring-1 ring-blue-500":"bg-gray-700/50 border-gray-600 hover:border-blue-300"}`,children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"bg-gray-600 text-gray-300 font-bold w-6 h-6 flex items-center justify-center rounded-lg text-xs shrink-0 shadow-sm",children:ee+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-bold text-gray-200 text-sm line-clamp-2 mb-1.5",children:z.question}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{className:"text-[10px] bg-gray-600 text-gray-300 px-2 py-0.5 rounded border border-gray-500",children:z.type==="REORDER"?"":z.options.length===2?"/":z.passageContent?"":""})})]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-600/50 justify-end",children:[i.jsxs("button",{onClick:()=>I(z.id),className:"flex items-center gap-1 text-xs font-bold text-blue-400 hover:bg-blue-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[i.jsx(vp,{className:"w-3.5 h-3.5"}),""]}),i.jsx("div",{className:"w-px h-3 bg-gray-600"}),i.jsxs("button",{onClick:()=>he(z.id),className:"flex items-center gap-1 text-xs font-bold text-red-500 hover:bg-red-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[i.jsx(wi,{className:"w-3.5 h-3.5"}),""]})]}),z.explanation&&i.jsxs("div",{className:"mt-2 bg-yellow-900/10 p-2 rounded-lg border border-yellow-900/20 text-xs text-yellow-500/80 line-clamp-1",children:[": ",z.explanation]})]},z.id))})]})]})})]})}),me&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-3xl max-h-[85vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden",children:[i.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:i.jsx(mp,{className:"w-6 h-6 text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-black text-white",children:" "}),i.jsx("p",{className:"text-sm text-gray-400",children:"    "})]})]}),i.jsx("button",{onClick:()=>ce(!1),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:i.jsx(ms,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"p-4 bg-gray-800 border-b border-gray-700",children:i.jsxs("div",{className:"relative",children:[i.jsx(zs,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-4 pointer-events-none"}),i.jsx("input",{type:"text",placeholder:"   ...",value:S,onChange:z=>j(z.target.value),className:"w-full px-12 py-3 rounded-xl border border-gray-700 focus:border-emerald-500 outline-none bg-gray-700 font-bold text-white transition-all"})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-900 custom-scrollbar",children:ge?i.jsx("div",{className:"flex justify-center py-10",children:i.jsx(bt,{className:"w-8 h-8 animate-spin text-emerald-600"})}):R.length===0?i.jsx("div",{className:"text-center py-10 text-gray-400",children:"   "}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:R.map(z=>i.jsxs("div",{onClick:()=>ve(z),className:"bg-gray-800 p-4 rounded-2xl border border-gray-700 cursor-pointer hover:border-emerald-500 hover:shadow-lg transition-all group",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("span",{className:"bg-blue-900/30 text-blue-300 text-[10px] font-bold px-2 py-0.5 rounded-md",children:z.subject}),i.jsx("span",{className:"text-xs text-gray-400",children:z.grade})]}),i.jsx("h4",{className:"font-bold text-white mb-2 line-clamp-1 group-hover:text-emerald-400 transition-colors",children:z.title}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[i.jsx(oa,{className:"w-3 h-3"}),z.questions.length," "]})]},z.id))})})]})})]})},up=[{minLevel:1,title:" ",color:"bg-gray-100 text-gray-600 border-gray-200",icon:ix},{minLevel:5,title:" ",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:ns},{minLevel:10,title:" ",color:"bg-blue-100 text-blue-700 border-blue-200",icon:zs},{minLevel:15,title:" ",color:"bg-indigo-100 text-indigo-700 border-indigo-200",icon:ld},{minLevel:20,title:" ",color:"bg-purple-100 text-purple-700 border-purple-200",icon:am},{minLevel:30,title:" ",color:"bg-amber-100 text-amber-700 border-amber-200",icon:ac}],$D=[{id:"first_step",title:" ",desc:"   ",icon:ix,color:"text-emerald-500",bg:"bg-emerald-500/10",condition:r=>r.quizzesCompleted>=1},{id:"perfect_score",title:" ",desc:"  100%   ",icon:vl,color:"text-yellow-500",bg:"bg-yellow-500/10",condition:r=>r.hasPerfectScore},{id:"dedicated",title:" ",desc:" 5  ",icon:ns,color:"text-blue-500",bg:"bg-blue-500/10",condition:r=>r.quizzesCompleted>=5},{id:"high_level",title:" ",desc:"  5",icon:am,color:"text-orange-500",bg:"bg-orange-500/10",condition:r=>r.level>=5},{id:"expert",title:" ",desc:" 10 ",icon:Oo,color:"text-purple-500",bg:"bg-purple-500/10",condition:r=>r.quizzesCompleted>=10},{id:"scholar",title:" ",desc:" 1000   (XP)",icon:zs,color:"text-cyan-500",bg:"bg-cyan-500/10",condition:r=>r.totalXP>=1e3},{id:"sharpshooter",title:"",desc:"    3 ",icon:cx,color:"text-red-500",bg:"bg-red-500/10",condition:r=>r.perfectScoresCount>=3},{id:"veteran",title:"",desc:" 20 ",icon:I2,color:"text-indigo-500",bg:"bg-indigo-500/10",condition:r=>r.quizzesCompleted>=20},{id:"rocket",title:"",desc:"  15",icon:X5,color:"text-pink-500",bg:"bg-pink-500/10",condition:r=>r.level>=15},{id:"master",title:"",desc:"  30",icon:ac,color:"text-amber-500",bg:"bg-amber-500/10",condition:r=>r.level>=30}],KD=[{url:"https://lh3.googleusercontent.com/d/1ufUwP7M3wdxWBW60s2xdpZC6W7jfpXv4",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1AqS4xhkK53MwCO-LFRdmtYBQsYSH6vz1",minLevel:1},{url:"https://lh3.googleusercontent.com/d/198SBde0OI07puyVx53mi9MpZ7F-iKltI",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1E--pczIn4ZCSWpWYhKZutLX8lfhtmCrp",minLevel:5},{url:"https://lh3.googleusercontent.com/d/1ep_ggXFs0rCkGJ212WkY5DuRbLNkyLyr",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1siamCZMGjbXH6L9bop_dN1UPSSwfyIwc",minLevel:15},{url:"https://lh3.googleusercontent.com/d/1seg3JDYcNsDBtTY4gU9N5empajSAT_-E",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1QnacjkYXRr-N4yhmt44LubRxbRnzNgqH",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1h5uzg3mZaeaozqEkzwItA14xqDq7kbMb",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1qKn7YfQr7VaDPXB8EjUvlCW-qt3v5E0u",minLevel:15}],dp=[{id:"nature_1",url:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",name:" ",minLevel:1},{id:"nature_2",url:"https://lh3.googleusercontent.com/d/1tBjHedpcXQiEjXro--zG3iWDokgrDbgZ",name:" ",minLevel:5},{id:"nature_3",url:"https://lh3.googleusercontent.com/d/1Chp7z63_XfLlt4ZC0MRmKwNsSTlCWwOa",name:" ",minLevel:10},{id:"nature_4",url:"https://lh3.googleusercontent.com/d/12RHK_FCMJt8D24AB3UV7nHxbD50EF4MX",name:" ",minLevel:15},{id:"nature_5",url:"https://lh3.googleusercontent.com/d/1We4c8009ObQB9ZDrpQ8ssUuos4V_4b9w",name:" ",minLevel:20}],x2=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=V.useState(!1),f=V.useRef(null);V.useEffect(()=>{const x=v=>{f.current&&!f.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-[100]":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-4 py-3 rounded-xl border flex justify-between items-center outline-none transition-all font-bold text-sm
            ${l?"bg-gray-950 border-gray-800 text-gray-600 cursor-not-allowed":c?"bg-gray-950 border-blue-500 ring-2 ring-blue-900 text-white shadow-lg":"bg-gray-950 border-gray-800 hover:border-blue-900 text-white shadow-inner"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-600"}`,children:g?g.label:s}),i.jsx(bl,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-blue-500":""}`})]}),c&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-900 border border-gray-700 rounded-xl shadow-xl max-h-60 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-[100]",children:r.map((x,v)=>{if(x.isHeader)return i.jsx("div",{className:"px-4 py-2 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-800/50 rounded-lg mb-1",children:x.label},v);const w=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-4 py-2.5 rounded-lg font-bold text-xs cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${w?"bg-blue-900/30 text-blue-400":"text-gray-300 hover:bg-gray-800"}
                   `,children:[x.label,w&&i.jsx(da,{className:"w-3 h-3"})]},v)})})]})},QD=({onNavigate:r})=>{const{user:e,updateUserProfile:t}=nr(),[s,l]=V.useState(!1),[c,d]=V.useState(null),[f,g]=V.useState(!1),[x,v]=V.useState(!1),[w,N]=V.useState(null),[C,M]=V.useState((e==null?void 0:e.avatar)||""),[Z,B]=V.useState((e==null?void 0:e.profileBackground)||dp[0].url),[me,ce]=V.useState([]),[le,_e]=V.useState(!0),[ge,G]=V.useState(0),[S,j]=V.useState(1),[A,O]=V.useState(up[0]),[D,L]=V.useState({quizzesCompleted:0,hasPerfectScore:!1,level:1,totalXP:0,perfectScoresCount:0}),[I,de]=V.useState([]),[he,F]=V.useState(""),[oe,Y]=V.useState(!1),[re,ve]=V.useState("50"),[R,U]=V.useState(null),[z,ee]=V.useState(!1),[xe,Se]=V.useState(""),[Me,Ke]=V.useState(!1),[ke,Nt]=V.useState({firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",age:(e==null?void 0:e.age)||"",grade:(e==null?void 0:e.grade)||"",phone:(e==null?void 0:e.phone)||"",address:(e==null?void 0:e.address)||"",school:(e==null?void 0:e.school)||"",gender:(e==null?void 0:e.gender)||"male",universityName:""});V.useEffect(()=>{e&&(Nt(ie=>({...ie,firstName:e.firstName||ie.firstName,lastName:e.lastName||ie.lastName,gender:e.gender||ie.gender,grade:e.grade||ie.grade,school:e.school||ie.school})),e.avatar&&M(e.avatar),e.profileBackground&&B(e.profileBackground))},[e]),V.useEffect(()=>{(async()=>{if(e){if(e.role==="teacher"){_e(!1),Y(!0);try{const Ye=Vn(mt(qe,"users"),An("role","==","student")),Je=(await Hn(Ye)).docs.map(Ut=>({id:Ut.id,...Ut.data()}));de(Je)}catch(Ye){console.error("Error fetching students:",Ye)}finally{Y(!1)}return}try{const Ye=Vn(mt(qe,"quiz_results"),An("userId","==",e.uid)),Ue=await Hn(Ye),Je=[];let Ut=0,st=!1,Lr=0;Ue.forEach(ue=>{const Ne=ue.data();Je.push({id:ue.id,...ue.data()});let Ce=10+Ne.percentage*2;Ne.passed&&(Ce+=50),Ne.percentage===100&&(Ce+=100,st=!0,Lr++),Ut+=Math.round(Ce)}),Je.sort((ue,Ne)=>{var Le,We;const Ce=((Le=ue.createdAt)==null?void 0:Le.seconds)||0,be=((We=Ne.createdAt)==null?void 0:We.seconds)||0;return Ce-be}),ce(Je);let Pn=Ut;try{const ue=Fn(qe,"users",e.uid),Ne=await rS(ue);Ne.exists()&&Ne.data().totalXP!==void 0?Pn=Ne.data().totalXP:e.totalXP!==void 0&&(Pn=e.totalXP)}catch{e.totalXP!==void 0&&(Pn=e.totalXP)}G(Pn);const ar=Math.floor(Pn/500)+1;j(ar);const Gn=[...up].reverse().find(ue=>ar>=ue.minLevel)||up[0];O(Gn),L({quizzesCompleted:Je.length,hasPerfectScore:st,level:ar,totalXP:Pn,perfectScoresCount:Lr})}catch(Ye){console.error(Ye)}finally{_e(!1)}}})()},[e]);const gt=async ie=>{ie.preventDefault(),l(!0),d(null);try{let Ye={...ke};ke.grade==="university"&&ke.universityName&&(Ye.school=ke.universityName),delete Ye.universityName,await t(Ye),d("   !"),setTimeout(()=>d(null),3e3)}catch(Ye){console.error(Ye),alert("   ")}finally{l(!1)}},Rt=async()=>{l(!0);try{await t({avatar:C}),g(!1)}catch(ie){console.error(ie)}finally{l(!1)}},it=async()=>{l(!0);try{await t({profileBackground:Z}),v(!1)}catch(ie){console.error(ie)}finally{l(!1)}},vn=async(ie,Ye)=>{if(!ie)return;const Ue=parseInt(re);if(isNaN(Ue)||Ue<=0){alert("    ");return}if(window.confirm(`     ${Ue} XP  ${Ye}`)){l(!0),U(null);try{const Je=Fn(qe,"users",ie);await Ed(Je,{totalXP:tx(Ue)}),de(Ut=>Ut.map(st=>st.id===ie?{...st,totalXP:(st.totalXP||0)+Ue}:st)),U(`  ${Ue} XP  ${Ye} !`),setTimeout(()=>U(null),3e3)}catch(Je){console.error(Je),alert("    ")}finally{l(!1)}}},vs=async()=>{if(!xe.trim()){alert("   ");return}Ke(!0);try{await er(mt(qe,"announcements"),{title:xe,teacherName:(e==null?void 0:e.displayName)||"",teacherId:e==null?void 0:e.uid,createdAt:xs()}),await er(mt(qe,"notifications"),{recipientId:"all",title:"  ",message:xe,type:"info",createdAt:xs(),read:!1}),alert("   "),Se(""),ee(!1)}catch(ie){console.error(ie),alert("   ")}finally{Ke(!1)}},ws=I.filter(ie=>{const Ye=(ie.displayName||"").toLowerCase(),Ue=(ie.email||"").toLowerCase(),Je=he.toLowerCase();return Ye.includes(Je)||Ue.includes(Je)}),sr=ie=>ie?ie.startsWith("http")?{backgroundImage:`url(${ie})`,backgroundSize:"cover",backgroundPosition:"center"}:{}:{backgroundImage:`url(${dp[0].url})`,backgroundSize:"cover",backgroundPosition:"center"},Vr=ie=>!ie||ie.startsWith("http")?"bg-no-repeat bg-center":ie,Ot=ie=>ie<=3?"border-gray-800":ie<=6?"border-emerald-500 shadow-[0_0_20px_rgba(16,185,129,0.5)]":ie<=9?"border-blue-500 shadow-[0_0_25px_rgba(59,130,246,0.6)]":ie<=12?"border-cyan-400 shadow-[0_0_30px_rgba(34,211,238,0.7)]":ie<=15?"border-indigo-500 shadow-[0_0_35px_rgba(99,102,241,0.7)]":ie<=18?"border-purple-500 shadow-[0_0_40px_rgba(168,85,247,0.7)]":ie<=21?"border-pink-500 shadow-[0_0_45px_rgba(236,72,153,0.8)]":ie<=24?"border-red-500 shadow-[0_0_50px_rgba(239,68,68,0.8)]":ie<=27?"border-amber-500 shadow-[0_0_55px_rgba(245,158,11,0.9)]":ie<=29?"border-white shadow-[0_0_60px_rgba(255,255,255,0.8)] ring-2 ring-white":"border-rose-500 shadow-[0_0_70px_rgba(244,63,94,1)] animate-pulse ring-4 ring-rose-500/30",Mt=ie=>ie<=3?"text-gray-400":ie<=6?"text-emerald-400 font-bold":ie<=9?"text-blue-400 font-bold":ie<=12?"text-cyan-400 font-black":ie<=15?"text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400 font-black":ie<=20?"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500 font-black drop-shadow-sm":ie<=25?"text-transparent bg-clip-text bg-gradient-to-r from-amber-300 to-orange-500 font-black drop-shadow-md":"text-transparent bg-clip-text bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 font-black animate-pulse drop-shadow-lg",fn=me.slice(-10).map(ie=>ie.percentage),wa=fn.length>0?Math.max(...fn):0,_a=fn.length>0?Math.min(...fn):0,Vt=fn.length>0?Math.round(fn.reduce((ie,Ye)=>ie+Ye,0)/fn.length):0,_s=me.length,rr=(S-1)*500,Pr=Math.min(100,Math.max(0,(ge-rr)/500*100)),wn="w-full px-4 py-3 rounded-xl bg-gray-950 border border-gray-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-900 outline-none font-bold text-white transition-all placeholder-gray-600 shadow-inner text-sm",Na=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(ie=>({label:` ${ie}`,value:ie.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"  ",value:"English Major - QOU"},{label:" ",value:"university"}],Ea=[{label:"",value:"male"},{label:"",value:"female"}];return(e==null?void 0:e.role)==="teacher"?i.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up",children:[i.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 mb-12 p-2",children:[i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden border-4 border-gray-800 shadow-2xl bg-gray-700",children:e.avatar?i.jsx("img",{src:e.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx(Zn,{className:"w-full h-full p-4 text-gray-400"})}),i.jsx("div",{className:"absolute bottom-0 right-0 bg-emerald-500 text-white p-1.5 rounded-full border-4 border-gray-900 shadow-sm",children:i.jsx(bn,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"text-center md:text-right space-y-2",children:[i.jsxs("h1",{className:"text-3xl md:text-4xl font-black text-white",children:[" ",e.displayName]}),i.jsxs("p",{className:"text-gray-400 font-medium text-lg flex items-center justify-center md:justify-start gap-2",children:[i.jsx(Tr,{className:"w-4 h-4 text-blue-500"}),e.email]}),i.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-blue-900/30 text-blue-300 text-xs font-bold border border-blue-800",children:[i.jsx(ha,{className:"w-3.5 h-3.5"})," "]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4 mb-12",children:[i.jsxs("button",{onClick:()=>r&&r("TEACHER_DASHBOARD"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-blue-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-900/20 text-blue-400 flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-colors",children:i.jsx(r5,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("QUESTION_BANK"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-purple-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-900/20 text-purple-400 flex items-center justify-center group-hover:bg-purple-600 group-hover:text-white transition-colors",children:i.jsx(qu,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_UPLOAD_FILES"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-emerald-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-emerald-900/20 text-emerald-400 flex items-center justify-center group-hover:bg-emerald-600 group-hover:text-white transition-colors",children:i.jsx(T2,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_EXPLANATIONS"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-orange-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-orange-900/20 text-orange-400 flex items-center justify-center group-hover:bg-orange-600 group-hover:text-white transition-colors",children:i.jsx(Hu,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>ee(!0),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-red-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-red-900/20 text-red-400 flex items-center justify-center group-hover:bg-red-600 group-hover:text-white transition-colors",children:i.jsx(lw,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_REVIEWS"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-yellow-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-yellow-900/20 text-yellow-400 flex items-center justify-center group-hover:bg-yellow-600 group-hover:text-white transition-colors",children:i.jsx(nm,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:""})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_CORRESPONDENCE"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-cyan-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-cyan-900/20 text-cyan-400 flex items-center justify-center group-hover:bg-cyan-600 group-hover:text-white transition-colors",children:i.jsx(ca,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:""})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-sm border border-gray-700 overflow-hidden",children:[i.jsxs("div",{className:"p-8 border-b border-gray-700 bg-gray-800/50 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-black text-white flex items-center gap-2",children:[i.jsx(Oo,{className:"w-6 h-6 text-yellow-500"}),"   (XP)"]}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"      "})]}),R&&i.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 text-green-400 px-4 py-2 rounded-xl text-sm font-bold animate-fade-in flex items-center gap-2",children:[i.jsx(bn,{className:"w-4 h-4"})," ",R]})]}),i.jsxs("div",{className:"p-8",children:[i.jsxs("div",{className:"relative mb-6",children:[i.jsx(zs,{className:"absolute top-3.5 right-4 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"   ...",value:he,onChange:ie=>F(ie.target.value),className:"w-full px-12 py-3 rounded-xl bg-gray-900 border border-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none font-bold text-white transition-all"})]}),i.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar p-1",children:oe?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(bt,{className:"w-8 h-8 animate-spin text-blue-500"})}):he===""?i.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"    ..."}):ws.length===0?i.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"    "}):ws.map(ie=>i.jsxs("div",{className:"flex items-center justify-between bg-gray-900/50 p-4 rounded-2xl border border-gray-700 hover:border-blue-700 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center overflow-hidden",children:ie.avatar?i.jsx("img",{src:ie.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx(Zn,{className:"w-5 h-5 text-gray-400"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-white text-sm",children:ie.displayName}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[i.jsxs("span",{className:"bg-yellow-500/10 text-yellow-400 px-1.5 rounded font-bold flex items-center gap-0.5",children:[i.jsx(_f,{className:"w-3 h-3"})," ",ie.totalXP||0]}),i.jsxs("span",{children:[" ",ie.email]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("select",{className:"bg-gray-800 border border-gray-700 text-gray-300 text-xs font-bold rounded-lg px-2 py-2 outline-none",value:re,onChange:Ye=>ve(Ye.target.value),children:[i.jsx("option",{value:"10",children:"+10 XP"}),i.jsx("option",{value:"50",children:"+50 XP"}),i.jsx("option",{value:"100",children:"+100 XP"}),i.jsx("option",{value:"200",children:"+200 XP"}),i.jsx("option",{value:"500",children:"+500 XP"})]}),i.jsx("button",{onClick:()=>vn(ie.id,ie.displayName),className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg transition-colors shadow-lg shadow-blue-500/30",title:" ",children:i.jsx(ca,{className:"w-4 h-4"})})]})]},ie.id))})]})]}),z&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-md shadow-2xl animate-fade-in-up overflow-hidden border border-gray-700",children:[i.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-orange-900/30 p-2 rounded-xl",children:i.jsx(lw,{className:"w-6 h-6 text-orange-400"})}),i.jsx("h2",{className:"text-xl font-black text-white",children:"  "})]}),i.jsx("button",{onClick:()=>ee(!1),className:"p-2 hover:bg-gray-700 rounded-full text-gray-400",children:i.jsx(ms,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-6",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("input",{type:"text",value:xe,onChange:ie=>Se(ie.target.value),placeholder:":      ",className:"w-full px-4 py-3 rounded-xl border border-gray-600 bg-gray-800 text-white focus:border-orange-500 outline-none mb-6"}),i.jsxs("button",{onClick:vs,disabled:Me,className:"w-full bg-orange-600 hover:bg-orange-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors",children:[Me?i.jsx(bt,{className:"w-5 h-5 animate-spin"}):i.jsx(mi,{className:"w-5 h-5"}),"   "]})]})]})})]}):i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up",children:[f&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-start justify-center p-4 pt-10 md:pt-16 bg-black/80 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-sm max-h-[85vh] flex flex-col shadow-2xl border border-gray-700 overflow-hidden relative",children:[i.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center shrink-0",children:[i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[i.jsx(Zn,{className:"w-5 h-5 text-purple-500"}),"  "]}),i.jsx("button",{onClick:()=>g(!1),className:"p-1.5 hover:bg-gray-800 rounded-full transition-colors",children:i.jsx(ms,{className:"w-5 h-5 text-gray-500"})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:i.jsx("div",{className:"grid grid-cols-3 gap-3",children:KD.map((ie,Ye)=>{const Ue=S<ie.minLevel;return i.jsxs("button",{onClick:()=>!Ue&&M(ie.url),disabled:Ue,className:`relative aspect-square rounded-xl overflow-hidden border-2 transition-all bg-gray-800 ${C===ie.url?"border-emerald-500 shadow-md ring-2 ring-emerald-900/30":"border-transparent hover:border-gray-600"} ${Ue?"opacity-60 grayscale":"hover:scale-105 active:scale-95"}`,children:[i.jsx("img",{src:ie.url,alt:`Avatar ${Ye}`,className:"w-full h-full object-cover"}),Ue&&i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/50 text-white backdrop-blur-[1px]",children:[i.jsx(ii,{className:"w-4 h-4 mb-0.5"}),i.jsxs("span",{className:"text-[10px] font-bold",children:[" ",ie.minLevel]})]}),!Ue&&C===ie.url&&i.jsx("div",{className:"absolute top-1 right-1 bg-emerald-500 text-white rounded-full p-0.5 shadow-sm",children:i.jsx(bn,{className:"w-3 h-3"})})]},Ye)})})}),i.jsx("div",{className:"p-4 border-t border-gray-800 shrink-0",children:i.jsxs("button",{onClick:Rt,disabled:s,className:"w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:[s?i.jsx(bt,{className:"w-5 h-5 animate-spin"}):i.jsx(mi,{className:"w-5 h-5"}),"  "]})})]})}),x&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-start justify-center p-4 pt-10 md:pt-16 bg-black/80 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl border border-gray-700 overflow-hidden relative",children:[i.jsxs("div",{className:"p-5 border-b border-gray-800 flex justify-between items-center shrink-0",children:[i.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(ow,{className:"w-6 h-6 text-emerald-500"}),"  "]}),i.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:i.jsx(ms,{className:"w-6 h-6 text-gray-500"})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-5 custom-scrollbar",children:i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:dp.map((ie,Ye)=>{const Ue=S<ie.minLevel,Je=Z===ie.url;return i.jsxs("button",{onClick:()=>!Ue&&B(ie.url),disabled:Ue,className:`relative h-28 rounded-2xl overflow-hidden border-4 transition-all duration-300 group ${Je?"border-emerald-500 scale-[1.02] shadow-md":"border-transparent"} ${Ue?"opacity-60 cursor-not-allowed grayscale":"hover:scale-[1.02] cursor-pointer"}`,children:[i.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${ie.url})`}}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Ue?i.jsxs("div",{className:"bg-black/60 px-3 py-1.5 rounded-lg backdrop-blur-sm flex items-center gap-1.5",children:[i.jsx(ii,{className:"w-4 h-4 text-white"}),i.jsxs("span",{className:"text-xs text-white font-bold",children:[" ",ie.minLevel]})]}):Je&&i.jsx(bn,{className:"w-8 h-8 text-white drop-shadow-md"})}),i.jsx("div",{className:"absolute bottom-0 w-full bg-gradient-to-t from-black/80 to-transparent p-2 text-center",children:i.jsx("span",{className:"text-xs font-bold text-white drop-shadow-md",children:ie.name})})]},Ye)})})}),i.jsxs("div",{className:"p-5 border-t border-gray-800 shrink-0 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>v(!1),className:"px-6 py-2.5 rounded-xl font-bold text-gray-500 hover:bg-gray-800 transition-colors",children:""}),i.jsx("button",{onClick:it,disabled:s,className:"bg-emerald-600 text-white px-8 py-2.5 rounded-xl font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 dark:shadow-none flex items-center gap-2",children:s?i.jsx(bt,{className:"w-5 h-5 animate-spin"}):" "})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[i.jsx("div",{className:"lg:col-span-7 lg:order-1 space-y-8",children:i.jsxs("div",{className:"bg-gray-900 rounded-[3rem] shadow-xl border border-gray-700 relative group",children:[i.jsxs("div",{className:`relative w-full h-48 md:h-64 transition-all duration-500 rounded-t-[3rem] overflow-hidden ${Vr(e==null?void 0:e.profileBackground)}`,style:sr(e==null?void 0:e.profileBackground),children:[i.jsxs("button",{onClick:()=>v(!0),className:"absolute top-4 left-4 bg-black/30 hover:bg-black/50 text-white backdrop-blur-md px-4 py-2 rounded-full text-xs md:text-sm font-bold flex items-center gap-2 transition-all border border-white/20 z-20",children:[i.jsx(ow,{className:"w-4 h-4"}),"  "]}),i.jsxs("div",{className:`absolute top-4 right-4 px-4 py-1.5 rounded-full text-xs font-black flex items-center gap-2 backdrop-blur-md shadow-lg border-2 z-10 ${A.color}`,children:[i.jsx(A.icon,{className:"w-4 h-4"})," ",A.title]})]}),i.jsx("div",{className:"absolute top-32 md:top-44 right-8 md:right-12 z-20",children:i.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>g(!0),children:[i.jsx("div",{className:`w-28 h-28 md:w-36 md:h-36 rounded-full border-[6px] shadow-2xl overflow-hidden bg-gray-700 relative z-10 transition-transform transform group-hover:scale-105 flex items-center justify-center ${Ot(S)}`,children:e!=null&&e.avatar?i.jsx("img",{src:e.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx(Zn,{className:"w-16 h-16 text-gray-500"})}),i.jsx("div",{className:"absolute bottom-1 right-1 bg-emerald-500 text-white p-2 rounded-full border-4 border-gray-800 shadow-sm z-20 hover:bg-emerald-600 transition-colors",children:i.jsx(B5,{className:"w-4 h-4"})})]})}),i.jsxs("div",{className:"pt-16 md:pt-20 px-8 pb-8",children:[i.jsxs("div",{className:"flex flex-col items-start",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-1",children:e==null?void 0:e.displayName}),i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium mb-6",children:[i.jsx("span",{className:"text-gray-400",children:e==null?void 0:e.email}),i.jsx("span",{className:"text-gray-300",children:""}),i.jsxs("span",{className:`flex items-center gap-1 ${Mt(S)}`,children:[i.jsx(Oo,{className:"w-3 h-3"}),"  ",S]})]})]}),i.jsxs("form",{onSubmit:gt,className:"space-y-6 border-t border-gray-700 pt-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[i.jsx("div",{className:"md:col-span-2",children:i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4",children:[i.jsx(Zn,{className:"w-5 h-5 text-blue-500"}),"  "]})}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx("input",{type:"text",value:ke.firstName,onChange:ie=>Nt({...ke,firstName:ie.target.value}),className:wn})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx("input",{type:"text",value:ke.lastName,onChange:ie=>Nt({...ke,lastName:ie.target.value}),className:wn})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),i.jsx(x2,{options:Ea,value:ke.gender,onChange:ie=>!(e!=null&&e.genderChanged)&&Nt({...ke,gender:ie}),placeholder:" ",disabled:e==null?void 0:e.genderChanged}),(e==null?void 0:e.genderChanged)&&i.jsxs("p",{className:"text-[10px] text-red-400 mt-1 mr-1 flex items-center gap-1",children:[i.jsx(ii,{className:"w-3 h-3"}),"        "]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx("input",{type:"text",value:ke.phone,onChange:ie=>Nt({...ke,phone:ie.target.value}),className:wn})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),i.jsx("input",{type:"text",value:ke.address,onChange:ie=>Nt({...ke,address:ie.target.value}),className:wn})]}),i.jsx("div",{className:"md:col-span-2 mt-2",children:i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4",children:[i.jsx(ha,{className:"w-5 h-5 text-emerald-500"}),"  "]})}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),i.jsx("input",{type:"text",value:ke.school,onChange:ie=>Nt({...ke,school:ie.target.value}),className:wn})]}),i.jsxs("div",{className:"relative",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx(x2,{options:Na,value:ke.grade,onChange:ie=>Nt({...ke,grade:ie}),placeholder:" "})]}),ke.grade==="university"&&i.jsxs("div",{className:"md:col-span-2 animate-fade-in",children:[i.jsx("label",{className:"text-xs font-bold text-blue-400 mb-1 block",children:"  / "}),i.jsx("input",{type:"text",value:ke.universityName||ke.school,onChange:ie=>Nt({...ke,universityName:ie.target.value}),placeholder:"   ...",className:`${wn} border-blue-500 bg-blue-900/10`})]})]}),i.jsxs("div",{className:"flex items-center justify-end pt-4 gap-4",children:[c&&i.jsxs("span",{className:"text-green-600 font-bold text-sm animate-fade-in flex items-center gap-1",children:[i.jsx(bn,{className:"w-4 h-4"})," ",c]}),i.jsxs("button",{type:"submit",disabled:s,className:"bg-emerald-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-900/20 flex items-center gap-2",children:[s?i.jsx(bt,{className:"w-5 h-5 animate-spin"}):i.jsx(mi,{className:"w-5 h-5"}),"  "]})]})]})]})]})}),i.jsxs("div",{className:"lg:col-span-5 lg:order-2 space-y-6 mt-8 lg:mt-0",children:[i.jsxs("div",{className:"bg-gradient-to-br from-indigo-700 via-purple-700 to-fuchsia-700 rounded-[2.5rem] shadow-2xl p-6 text-white relative overflow-hidden border-4 border-gray-800 ring-4 ring-gray-900",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white opacity-10 rounded-full -translate-y-1/2 translate-x-1/2 blur-3xl"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-indigo-500 opacity-20 rounded-full translate-y-1/2 -translate-x-1/2 blur-3xl"}),i.jsx("div",{className:"flex items-center justify-between mb-6 relative z-10",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 bg-yellow-400 blur-md opacity-50 rounded-full"}),i.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-300 to-orange-500 rounded-2xl shadow-lg relative border border-white/30",children:i.jsx(A.icon,{className:"w-8 h-8 text-white"})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-3xl font-black tracking-tight",children:[" ",S]}),i.jsxs("p",{className:"text-indigo-100 text-sm font-medium flex items-center gap-1.5 mt-0.5 bg-black/20 px-3 py-1 rounded-full w-fit",children:[i.jsx(_f,{className:"w-3.5 h-3.5 text-orange-400 fill-orange-400"})," ",ge,"   (XP)"]})]})]})}),i.jsxs("div",{className:"relative mb-8",children:[i.jsxs("div",{className:"flex justify-between text-xs font-bold text-indigo-200 mb-1 px-1",children:[i.jsx("span",{children:A.title}),i.jsxs("span",{children:["  ",S+1]})]}),i.jsx("div",{className:"w-full bg-black/30 h-3.5 rounded-full relative overflow-hidden backdrop-blur-sm border border-white/10",children:i.jsx("div",{className:"bg-gradient-to-r from-yellow-400 via-orange-400 to-pink-500 h-full rounded-full transition-all duration-1000 ease-out relative shadow-[0_0_10px_rgba(251,191,36,0.5)]",style:{width:`${Pr}%`},children:i.jsx("div",{className:"absolute inset-0 bg-white/30 w-full h-full animate-[pulse_2s_cubic-bezier(0.4,0,0.6,1)_infinite]"})})})]}),i.jsxs("div",{className:"bg-black/20 rounded-2xl p-5 backdrop-blur-md border border-white/10",children:[i.jsxs("h4",{className:"text-sm font-bold text-indigo-100 mb-2 flex items-center gap-2",children:[i.jsx(ac,{className:"w-4 h-4 text-yellow-300"}),"  "]}),i.jsx("div",{className:"text-xl font-black text-white tracking-wide mb-1",children:A.title}),i.jsx("div",{className:"text-xs text-indigo-200",children:"     !"})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 p-4 md:p-5",children:[i.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2 border-b border-gray-700 pb-3",children:[i.jsx("div",{className:"p-2 bg-yellow-900/30 rounded-lg",children:i.jsx(bp,{className:"w-5 h-5 text-yellow-400"})})," "]}),i.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2",children:$D.map((ie,Ye)=>{const Ue=ie.condition(D);return i.jsxs("button",{onClick:()=>N({badge:ie,isUnlocked:Ue}),className:`relative p-2 rounded-xl border flex flex-col items-center text-center transition-all hover:scale-105 active:scale-95 ${Ue?"bg-gray-700/50 border-gray-600 shadow-sm hover:shadow-md cursor-pointer":"bg-gray-800/50 border-gray-700 opacity-60 grayscale hover:opacity-100 cursor-pointer"}`,children:[i.jsx("div",{className:`w-8 h-8 md:w-9 md:h-9 rounded-full flex items-center justify-center mb-1 ${Ue?ie.bg:"bg-gray-700"}`,children:i.jsx(ie.icon,{className:`w-4 h-4 md:w-5 md:h-5 ${Ue?ie.color:"text-gray-400"}`})}),i.jsx("h4",{className:"font-bold text-[9px] text-gray-300 leading-tight line-clamp-1",children:ie.title}),!Ue&&i.jsx("div",{className:"absolute top-1 right-1",children:i.jsx(ii,{className:"w-2.5 h-2.5 text-gray-500"})})]},Ye)})}),w&&i.jsxs("div",{className:"mt-4 bg-gray-800/80 rounded-2xl p-4 border border-gray-700 animate-fade-in flex items-start gap-4 relative",children:[i.jsx("button",{onClick:()=>N(null),className:"absolute top-3 left-3 text-gray-500 hover:text-white transition-colors",children:i.jsx(ms,{className:"w-4 h-4"})}),i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center shrink-0 ${w.isUnlocked?w.badge.bg:"bg-gray-700"}`,children:i.jsx(w.badge.icon,{className:`w-6 h-6 ${w.isUnlocked?w.badge.color:"text-gray-400"}`})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-sm font-bold text-white mb-1",children:w.badge.title}),i.jsxs("div",{className:"text-xs mb-1",children:[i.jsx("span",{className:`font-bold ${w.isUnlocked?"text-emerald-400":"text-gray-400"}`,children:w.isUnlocked?" : ":": "}),i.jsx("span",{className:"text-gray-300",children:w.badge.desc})]}),!w.isUnlocked&&i.jsxs("div",{className:"mt-2 flex items-center gap-1 text-[10px] text-gray-500",children:[i.jsx(ii,{className:"w-3 h-3"}),i.jsx("span",{children:"    "})]}),w.isUnlocked&&i.jsxs("div",{className:"mt-2 flex items-center gap-1 text-[10px] text-emerald-500",children:[i.jsx(bn,{className:"w-3 h-3"}),i.jsx("span",{children:" "})]})]})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 p-6 hover:shadow-md transition-shadow",children:[i.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(yA,{className:"w-5 h-5 text-emerald-400"})}),"   "]}),le?i.jsx("div",{className:"h-48 flex items-center justify-center",children:i.jsx(bt,{className:"w-6 h-6 animate-spin text-emerald-500"})}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center bg-gray-700/50 p-4 rounded-xl border border-gray-700",children:[i.jsx("span",{className:"text-gray-300 text-sm font-bold",children:" "}),i.jsxs("span",{className:`font-black text-xl ${Vt>=90?"text-emerald-400":"text-blue-400"}`,children:[Vt,"%"]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-emerald-900/30 text-emerald-400",children:i.jsx(Oo,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),i.jsxs("div",{className:"font-black text-lg text-emerald-400",children:[wa,"%"]})]})]}),i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-red-900/30 text-red-400",children:i.jsx(E2,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),i.jsxs("div",{className:"font-black text-lg text-red-400",children:[_a,"%"]})]})]}),i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-blue-900/30 text-blue-400",children:i.jsx(n5,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),i.jsx("div",{className:"font-black text-lg text-blue-400",children:_s})]})]}),i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-purple-900/30 text-purple-400",children:i.jsx(H5,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:""}),i.jsxs("div",{className:"font-black text-lg text-purple-400",children:[Vt,"%"]})]})]})]})]})]})]})]})]})},XD=[{id:"All",label:" (All)"},{id:"Language",label:"Language ()"},{id:"Reading",label:"Reading ()"},{id:"Writing",label:"Writing ()"},{id:"Vocabulary",label:"Vocabulary ()"},{id:"General",label:"  (General Quiz)"}],hp=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=V.useState(!1),f=V.useRef(null);V.useEffect(()=>{const x=v=>{f.current&&!f.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-50":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-5 py-4 rounded-2xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all
            ${l?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":c?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-800 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),i.jsx(bl,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&i.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[r.map((x,v)=>{if(x.isHeader)return i.jsx("div",{className:"px-4 py-2 text-xs font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:x.label},v);const w=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${w?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[x.label,w&&i.jsx(da,{className:"w-4 h-4"})]},v)}),r.length===0&&i.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},YD=({onBack:r})=>{const{user:e}=nr(),[t,s]=V.useState("SELECTION"),[l,c]=V.useState(""),[d,f]=V.useState(""),[g,x]=V.useState("All"),[v,w]=V.useState([]),[N,C]=V.useState(!1),[M,Z]=V.useState(null),[B,me]=V.useState(0),[ce,le]=V.useState({}),[_e,ge]=V.useState(1800),[G,S]=V.useState(null),[j,A]=V.useState(!1),[O,D]=V.useState(0),[L,I]=V.useState({}),[de,he]=V.useState(!1),[F,oe]=V.useState(null),[Y,re]=V.useState(!1),[ve,R]=V.useState(!1),[U,z]=V.useState(!1),[ee,xe]=V.useState(0),[Se,Me]=V.useState(!1),[Ke,ke]=V.useState(null),[Nt,gt]=V.useState(0),[Rt,it]=V.useState(""),[vn,vs]=V.useState(!1),[ws,sr]=V.useState(!1);V.useEffect(()=>{window.scrollTo(0,0)},[t]),V.useEffect(()=>{d?Vr():w([])},[d]),V.useEffect(()=>{let ue;return t==="ACTIVE"&&_e>0&&(ue=setInterval(()=>{ge(Ne=>Ne<=1?(rr(),0):Ne-1)},1e3)),()=>clearInterval(ue)},[t,_e]),V.useEffect(()=>{let ue;return t==="ACTIVE"&&(M!=null&&M.questionDuration)&&G!==null&&(G>0?ue=setInterval(()=>{S(Ne=>Ne!==null&&Ne>0?Ne-1:0)},1e3):G===0&&_s()),()=>clearInterval(ue)},[t,M,G]),V.useEffect(()=>{M!=null&&M.questionDuration?S(M.questionDuration):S(null)},[B,M]),V.useEffect(()=>{if(t!=="ACTIVE")return;const ue=()=>{xe(Le=>{const We=Le+1;return We===1?R(!0):We>=2&&(R(!1),z(!0)),We})},Ne=()=>{document.hidden&&ue()},Ce=Le=>{(Le.key==="PrintScreen"||Le.ctrlKey&&Le.key==="p"||Le.metaKey&&Le.shiftKey)&&(Le.preventDefault(),ue())},be=Le=>Le.preventDefault();return document.addEventListener("visibilitychange",Ne),document.addEventListener("keydown",Ce),document.addEventListener("contextmenu",be),document.addEventListener("copy",be),document.addEventListener("paste",be),document.addEventListener("cut",be),document.addEventListener("selectstart",be),()=>{document.removeEventListener("visibilitychange",Ne),document.removeEventListener("keydown",Ce),document.removeEventListener("contextmenu",be),document.removeEventListener("copy",be),document.removeEventListener("paste",be),document.removeEventListener("cut",be),document.removeEventListener("selectstart",be)}},[t]);const Vr=async()=>{C(!0);try{const ue=Vn(mt(qe,"quizzes"),An("grade","==",d));let Ne;try{Ne=await l8(ue),Ne.empty&&(Ne=await o8(ue))}catch{Ne=await Hn(ue)}const Ce=[];Ne.forEach(be=>{Ce.push({id:be.id,...be.data()})}),w(Ce)}catch(ue){console.error("Error fetching quizzes:",ue)}finally{C(!1)}},Ot=Array.from(new Set(v.map(ue=>ue.subject))),Mt=v.filter(ue=>{const Ne=l?ue.subject===l:!0,Ce=g&&g!=="All"?ue.category===g:!0;return Ne&&Ce}),fn=ue=>{oe(ue),he(!0)},wa=ue=>{if(!ue.questions||ue.questions.length===0){alert("      ");return}const Ce=[...ue.questions].sort(()=>Math.random()-.5).map(At=>{if(At.type==="MCQ"||At.type==="TF"){const ct=At.options.map((mn,ki)=>({opt:mn,originalIndex:ki}));ct.sort(()=>Math.random()-.5);const ut=ct.map(mn=>mn.opt),Bt=ct.findIndex(mn=>mn.originalIndex===At.correctAnswer);return{...At,options:ut,correctAnswer:Bt}}return At}),be={...ue,questions:Ce},Le={};Ce.forEach((At,ct)=>{if(At.type==="REORDER"){const ut=At.options.map((Bt,mn)=>mn);for(let Bt=ut.length-1;Bt>0;Bt--){const mn=Math.floor(Math.random()*(Bt+1));[ut[Bt],ut[mn]]=[ut[mn],ut[Bt]]}Le[ct]=ut}}),I(Le),Z(be),me(0),le({});const We=ue.duration?ue.duration*60:1800;ge(We),D(0),xe(0),z(!1),gt(0),it(""),sr(!1),he(!1),oe(null),s("ACTIVE")},_a=()=>{F&&wa(F)},Vt=ue=>{le(Ne=>({...Ne,[B]:ue}))},_s=()=>{M&&(S(null),B<M.questions.length-1?me(ue=>ue+1):rr())},rr=async()=>{if(!M||!e){s("RESULT");return}A(!0);const ue=Na(),Ne=Math.round(ue/M.questions.length*100);let Ce=0;try{const be=Vn(mt(qe,"quiz_results"),An("userId","==",e.uid),An("quizId","==",M.id));(await Hn(be)).empty?Ce=ue*30:Ce=ue*5}catch(be){console.error("Error checking previous attempts:",be),Ce=ue*1}D(Ce);try{await er(mt(qe,"quiz_results"),{userId:e.uid,userName:e.displayName,quizId:M.id||"unknown",quizTitle:M.title,subject:M.subject,score:ue,totalQuestions:M.questions.length,percentage:Ne,passed:Ne>=50,earnedXP:Ce,createdAt:xs()});const be=Fn(qe,"users",e.uid);await yy(be,{totalXP:tx(Ce),quizzesCompleted:tx(1),lastQuizDate:xs(),role:"student",email:e.email,displayName:e.displayName},{merge:!0})}catch(be){console.error("Error saving quiz result:",be)}finally{A(!1),s("RESULT")}},Pr=async()=>{if(Nt!==0&&!(!M||!e)){vs(!0);try{await er(mt(qe,"reviews"),{type:"quiz",targetId:M.id,targetTitle:M.title,teacherId:M.createdBy||"teacher",teacherName:M.teacherName||"",rating:Nt,comment:Rt,studentId:e.uid,studentName:e.displayName,createdAt:xs()}),sr(!0)}catch(ue){console.error("Error saving review:",ue),alert("    ")}finally{vs(!1)}}},wn=ue=>{const Ne=Math.floor(ue/60),Ce=ue%60;return`${Ne}:${Ce<10?"0":""}${Ce}`},Na=()=>{if(!M)return 0;let ue=0;return M.questions.forEach((Ne,Ce)=>{if(Ne.type==="REORDER"){const be=ce[Ce];if(be&&be.length===Ne.options.length){let Le=!0;for(let We=0;We<Ne.options.length;We++)if(be[We]!==We){Le=!1;break}Le&&ue++}}else ce[Ce]===Ne.correctAnswer&&ue++}),ue},Ea=()=>{re(!0)},ie=()=>{re(!1),s("SELECTION")},Ye=()=>{z(!1),s("SELECTION")},Ue=ue=>{ke(ue),Me(!0)},Je=()=>{if(Me(!1),Ke==="REVIEW")s("REVIEW");else if(Ke==="RETAKE"){const ue=v.find(Ne=>Ne.id===(M==null?void 0:M.id));ue?wa(ue):s("SELECTION")}else Ke==="LIST"?s("SELECTION"):Ke==="HOME"&&r();ke(null)},Ut=(ue,Ne)=>{const Ce=ce[B]||[];Vt(Ne?[...Ce,ue]:Ce.filter(be=>be!==ue))},st=({title:ue,message:Ne,onConfirm:Ce,onCancel:be,icon:Le=oa,confirmText:We="",cancelText:At="",confirmColor:ct="emerald"})=>i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-md transition-opacity",onClick:be}),i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] p-8 max-w-sm w-full relative z-10 animate-fade-in-up text-center border border-white/10 shadow-2xl shadow-black/50",children:[i.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg border-4 border-gray-800 ${ct==="red"?"bg-red-500/20":"bg-emerald-500/20"}`,children:i.jsx(Le,{className:`w-10 h-10 ${ct==="red"?"text-red-500":"text-emerald-500"}`})}),i.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:ue}),i.jsx("p",{className:"text-gray-400 mb-8 text-base font-medium leading-relaxed",children:Ne}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:Ce,className:`flex-1 py-3.5 rounded-xl font-bold text-white transition-all transform hover:scale-105 active:scale-95 shadow-lg ${ct==="red"?"bg-gradient-to-r from-red-600 to-pink-600 shadow-red-900/30":"bg-gradient-to-r from-emerald-500 to-teal-600 shadow-emerald-900/30"}`,children:We}),i.jsx("button",{onClick:be,className:"flex-1 bg-gray-800 text-gray-300 py-3.5 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-gray-700",children:At})]})]})]}),Lr=()=>{const ue=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(be=>({label:` ${be}`,value:be.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"   -   ",value:"English Major - QOU"}],Ne=[{label:"  ",value:""},...Ot.map(be=>({label:String(be),value:String(be)}))],Ce=XD.map(be=>({label:be.label,value:be.id}));return i.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8 animate-fade-in relative z-10",children:[i.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(156, 163, 175, 0.5);
          border-radius: 20px;
        }
      `}),i.jsxs("div",{className:"mb-8 text-center",children:[i.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm md:text-base",children:"       "})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-6",children:[i.jsxs("div",{className:"lg:col-span-7 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-30",children:[i.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(ha,{className:"w-5 h-5 text-emerald-400"})}),"     "]}),i.jsx(hp,{options:ue,value:d,onChange:be=>{f(be),c(""),x("All")},placeholder:"--    --"})]}),i.jsxs("div",{className:"lg:col-span-5 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-20",children:[i.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(ns,{className:"w-5 h-5 text-emerald-400"})})," "]}),i.jsx(hp,{options:Ne,value:l,onChange:c,placeholder:d?" ":"   ",disabled:!d})]})]}),d&&i.jsx("div",{className:"mb-10 animate-fade-in relative z-10",children:i.jsxs("div",{className:"bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700",children:[i.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(C2,{className:"w-5 h-5 text-emerald-400"})}),"  ()"]}),i.jsx(hp,{options:Ce,value:g,onChange:x,placeholder:"  "})]})}),d&&i.jsxs("div",{className:"space-y-6 animate-fade-in-up relative z-0",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-100 border-r-4 border-emerald-500 pr-3 flex items-center gap-2",children:[i.jsx(_5,{className:"w-5 h-5"})," "]}),N?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(bt,{className:"w-8 h-8 animate-spin text-emerald-400"})}):v.length===0?i.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(zs,{className:"w-8 h-8 text-gray-500"})}),i.jsx("p",{className:"text-gray-400 font-medium",children:"      "})]}):Mt.length===0?i.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(zs,{className:"w-8 h-8 text-gray-500"})}),i.jsx("p",{className:"text-gray-400 font-medium",children:"     "})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Mt.map(be=>i.jsxs("div",{className:"bg-gray-900 rounded-2xl shadow-sm border border-gray-700 p-5 hover:shadow-md hover:border-emerald-600 transition-all group",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("span",{className:"bg-emerald-900/50 text-emerald-300 text-[10px] font-bold px-2 py-1 rounded-md w-fit",children:be.subject}),be.category&&i.jsx("span",{className:"bg-blue-900/50 text-blue-300 text-[10px] font-bold px-2 py-1 rounded-md w-fit border border-blue-800",children:be.category==="General"?"General Quiz":be.category})]}),i.jsxs("div",{className:"flex flex-col items-end gap-1",children:[i.jsxs("span",{className:"text-gray-500 text-xs",children:[be.questions.length," "]}),i.jsx("span",{className:"text-gray-500 text-xs bg-gray-800 px-1.5 py-0.5 rounded",children:be.duration?`${be.duration} `:"30 "})]})]}),i.jsx("h4",{className:"text-base font-bold text-white mb-2 line-clamp-2",children:be.title}),i.jsxs("div",{className:"flex items-center gap-1 text-gray-400 text-xs mb-5",children:[i.jsx(ox,{className:"w-3 h-3"}),i.jsx("span",{children:be.grade==="English Major - QOU"?"  ":` ${be.grade}`})]}),i.jsxs("button",{onClick:()=>fn(be),className:"w-full bg-emerald-900/30 text-emerald-400 border border-emerald-800 py-2.5 rounded-xl font-bold text-sm group-hover:bg-emerald-600 group-hover:text-white transition-all flex items-center justify-center gap-2",children:[" ",i.jsx(vf,{className:"w-4 h-4"})]})]},be.id))})]}),de&&i.jsx(st,{title:"  ",message:`   ${F==null?void 0:F.title} `,onConfirm:_a,onCancel:()=>he(!1),confirmText:" ",cancelText:"",icon:oa})]})},Pn=()=>{if(!M||!M.questions||!M.questions[B])return i.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-900 gap-4",children:[i.jsx("div",{className:"text-red-500 font-bold text-lg",children:"    "}),i.jsx("button",{onClick:()=>s("SELECTION"),className:"text-blue-400 underline",children:" "})]});const ue=M.questions[B],Ne=ue.type==="REORDER";let Ce=!1;if(Ne){const ut=ce[B];Ce=ut!==void 0&&ut.length===ue.options.length}else Ce=ce[B]!==void 0;const be=B===M.questions.length-1,Le=M.subject.toLowerCase().includes("english")||M.subject.includes("")||M.subject.includes(""),We=Le?"ltr":"rtl",At=Le?"text-left":"text-right",ct={sm:"text-sm leading-relaxed",md:"text-base leading-relaxed",lg:"text-xl leading-loose",xl:"text-2xl leading-loose"}[ue.passageFontSize||"md"];return i.jsxs("div",{className:"fixed inset-0 z-[9999] bg-gray-950 overflow-y-auto select-none",onContextMenu:ut=>ut.preventDefault(),style:{WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none",WebkitTouchCallout:"none"},children:[i.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1e-JYkv-JKpi3PBXLAB5qy2E5UG4klP6j",alt:"Active Quiz Background",className:"w-full h-full object-cover opacity-20"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/90 via-gray-900/40 to-gray-950/90"}),i.jsx("div",{className:"absolute inset-0 shadow-[inset_0_0_150px_rgba(0,0,0,0.9)]"})]}),U&&i.jsx(st,{title:"   ",message:"      .   .",onConfirm:Ye,onCancel:()=>{},confirmText:"",cancelText:"",icon:nA,confirmColor:"red"}),ve&&!U&&i.jsx(st,{title:" !",message:"     .   .",onConfirm:()=>R(!1),onCancel:()=>{},confirmText:"",cancelText:"",icon:ux,confirmColor:"red"}),Y&&i.jsx(st,{title:" ",message:"       .",onConfirm:ie,onCancel:()=>re(!1),confirmText:" ",cancelText:"",icon:Ef,confirmColor:"red"}),i.jsxs("div",{className:"bg-gray-950/80 backdrop-blur-md border-b border-gray-700 sticky top-0 z-50 shadow-sm relative",children:[i.jsxs("div",{className:"max-w-4xl mx-auto px-3 h-16 flex justify-between items-center",children:[i.jsxs("button",{onClick:Ea,className:"flex items-center gap-2 text-red-500 hover:bg-red-900/20 px-3 py-1.5 rounded-lg transition-colors font-bold text-sm",children:[i.jsx(Ef,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:""})]}),i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center gap-1",children:i.jsxs("div",{className:`flex items-center gap-2 px-4 py-1.5 rounded-full font-mono font-bold text-base shadow-inner border border-gray-600 ${_e<300?"bg-red-900/50 text-red-200 animate-pulse":"bg-gray-700 text-emerald-400"}`,children:[i.jsx(ax,{className:"w-4 h-4"}),wn(_e)]})}),i.jsxs("div",{className:"text-xs font-bold text-gray-400",children:[B+1," / ",M.questions.length]})]}),i.jsx("div",{className:"w-full bg-gray-700 h-1",children:i.jsx("div",{className:"bg-emerald-500 h-full transition-all duration-500 ease-out",style:{width:`${(B+1)/M.questions.length*100}%`}})})]}),G!==null&&M.questionDuration&&i.jsxs("div",{className:"max-w-3xl mx-auto px-4 mt-4 relative z-10",children:[i.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full transition-all duration-1000 linear ${G<10?"bg-red-500":"bg-blue-500"}`,style:{width:`${G/M.questionDuration*100}%`}})}),i.jsxs("div",{className:"text-center mt-1 text-xs font-bold text-gray-500",children:[" : ",G," "]})]}),i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 relative z-10",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden animate-fade-in-up",dir:We,children:[i.jsxs("div",{className:"bg-gray-800/50 border-b border-gray-700 p-4 flex items-center justify-between",children:[i.jsx("h2",{className:"font-bold text-gray-200 text-sm md:text-base",children:M.title}),i.jsx("div",{className:"bg-gray-700 p-1.5 rounded-lg shadow-sm",children:Ne?i.jsx(j2,{className:"w-4 h-4 text-emerald-500"}):i.jsx(ii,{className:"w-4 h-4 text-gray-300"})})]}),i.jsxs("div",{className:"p-6 md:p-8",children:[ue.passageContent&&i.jsxs("div",{className:"mb-8",children:[ue.generalInstruction&&i.jsx("div",{className:`text-gray-400 font-bold mb-3 text-sm bg-gray-800/50 px-4 py-2.5 rounded-xl border-l-4 border-emerald-500 ${At}`,children:ue.generalInstruction}),i.jsx("div",{className:`bg-blue-900/20 p-5 rounded-2xl border border-blue-800 ${At}`,children:i.jsx("div",{className:`text-gray-200 whitespace-pre-wrap font-medium ${ct}`,children:ue.passageContent})})]}),i.jsx("h3",{className:`text-lg md:text-2xl font-black text-white leading-relaxed mb-8 ${At}`,children:ue.question}),Ne?i.jsxs("div",{className:"space-y-6",dir:"ltr",children:[i.jsxs("div",{className:"min-h-[120px] p-4 bg-gray-950/50 rounded-2xl border-2 border-dashed border-gray-600 flex flex-wrap gap-2 items-start content-start transition-all",children:[(ce[B]||[]).map((ut,Bt)=>i.jsx("button",{onClick:()=>Ut(ut,!1),className:"bg-emerald-600 text-white px-4 py-2 rounded-xl font-bold shadow-md hover:bg-red-500 transition-colors animate-fade-in",children:ue.options[ut]},`ans-${Bt}`)),(!ce[B]||ce[B].length===0)&&i.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm font-medium italic",children:"      "})]}),i.jsx("div",{className:"flex flex-wrap gap-3 justify-center bg-gray-900 p-4 rounded-2xl border border-gray-700",children:(L[B]||[]).filter(ut=>!(ce[B]||[]).includes(ut)).map((ut,Bt)=>i.jsx("button",{onClick:()=>Ut(ut,!0),className:"bg-gray-800 border-2 border-gray-700 text-gray-200 px-4 py-2 rounded-xl font-bold shadow-sm hover:border-emerald-500 hover:text-emerald-400 transition-all transform hover:scale-105 active:scale-95",children:ue.options[ut]},`bank-${Bt}`))}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:()=>Vt([]),className:"text-xs font-bold text-gray-400 hover:text-red-500 flex items-center gap-1",children:[i.jsx(A2,{className:"w-3 h-3"})," "]})})]}):i.jsx("div",{className:"space-y-3",children:ue.options.map((ut,Bt)=>i.jsxs("button",{onClick:()=>Vt(Bt),className:`w-full ${At} p-4 rounded-xl border-2 transition-all flex items-center justify-between group hover:scale-[1.01] active:scale-[0.99] duration-200 ${ce[B]===Bt?"border-emerald-500 bg-emerald-900/30 shadow-md ring-2 ring-emerald-900":"border-gray-700 bg-gray-900 hover:bg-gray-800 hover:border-gray-600 shadow-sm"}`,children:[i.jsx("span",{className:`text-base font-bold ${ce[B]===Bt?"text-emerald-300":"text-gray-300"}`,children:ut}),i.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center shrink-0 ml-2 transition-colors ${ce[B]===Bt?"border-emerald-600 bg-emerald-600":"border-gray-600 group-hover:border-emerald-400"}`,children:ce[B]===Bt&&i.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})})]},Bt))})]})]}),i.jsx("div",{className:"mt-8 flex justify-end",children:i.jsx("button",{onClick:_s,disabled:!Ce||j,className:`w-full sm:w-auto px-10 py-4 rounded-2xl font-bold text-lg flex items-center justify-center gap-2 shadow-xl transition-all ${!Ce||j?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-emerald-600 text-white hover:bg-emerald-700 hover:shadow-emerald-500/20 active:scale-95"}`,children:j?i.jsxs(i.Fragment,{children:["  ",i.jsx(bt,{className:"w-5 h-5 animate-spin"})]}):i.jsxs(i.Fragment,{children:[be?" ":" ",We==="rtl"?i.jsx(vf,{className:"w-5 h-5"}):i.jsx(qt,{className:"w-5 h-5"})]})})})]})]})},ar=()=>{if(!M)return null;const ue=Na(),Ne=M.questions.length,Ce=Math.round(ue/Ne*100);let be="text-red-500",Le=$4,We=" ";Ce>=90?(be="text-emerald-500",Le=ac,We="!"):Ce>=75?(be="text-blue-500",Le=ld,We="!"):Ce>=50&&(be="text-yellow-500",Le=da,We=" ");const At=Le;return i.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center p-4 animate-fade-in overflow-y-auto",children:[i.jsxs("div",{className:"w-full max-w-xs bg-gray-900 rounded-[2rem] border border-gray-800 p-5 relative overflow-hidden text-center",children:[i.jsxs("div",{className:"flex flex-col items-center mb-4",children:[i.jsx(At,{className:`w-14 h-14 ${be} mb-2 drop-shadow-md`}),i.jsx("h2",{className:"text-xl font-black text-white mb-1",children:We}),i.jsx("p",{className:"text-gray-400 font-medium text-xs mb-2",children:M.title}),i.jsxs("div",{className:"inline-flex items-center gap-1 bg-gray-800 px-2 py-0.5 rounded-full border border-gray-700",children:[i.jsx(_f,{className:"w-3 h-3 text-yellow-400 fill-yellow-400"}),i.jsxs("span",{className:"font-bold text-white text-xs",children:["+",O," XP"]})]})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-4 text-center mb-5 border border-gray-800",children:[i.jsx("div",{className:"text-xs text-gray-500 font-bold uppercase tracking-wider mb-1",children:" "}),i.jsxs("span",{className:`text-5xl font-black ${be}`,children:[Ce,"%"]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:()=>Ue("REVIEW"),className:"w-full py-3 bg-white text-gray-900 font-black text-sm rounded-xl hover:bg-gray-100 transition-all flex items-center justify-center gap-2 active:scale-95 shadow-md",children:[i.jsx(gp,{className:"w-4 h-4"}),"  "]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("button",{onClick:()=>Ue("HOME"),className:"py-3 bg-emerald-600 text-white font-bold rounded-xl hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 text-xs shadow-lg shadow-emerald-900/20",children:[i.jsx(Nf,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>Ue("RETAKE"),className:"py-3 bg-emerald-600 text-white font-bold rounded-xl hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 text-xs shadow-lg shadow-emerald-900/20",children:[i.jsx(sm,{className:"w-4 h-4"}),"  "]})]})]})]}),i.jsx("div",{className:"w-full max-w-xs bg-gray-900 rounded-[2rem] border border-gray-800 p-6 text-center relative mt-4",children:ws?i.jsxs("div",{className:"py-4",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-400 mb-1",children:[i.jsx(da,{className:"w-5 h-5"}),i.jsx("h3",{className:"font-bold text-sm",children:" !"})]}),i.jsx("p",{className:"text-gray-500 text-xs",children:"   ."})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3 text-white",children:[i.jsx(nm,{className:"w-4 h-4 text-yellow-400"}),i.jsx("h3",{className:"font-bold text-sm",children:"  "})]}),i.jsx("div",{className:"flex justify-center gap-1.5 mb-3 flex-wrap",children:[1,2,3,4,5,6,7,8,9,10].map(ct=>i.jsx("button",{onClick:()=>gt(ct),className:`w-8 h-8 rounded-lg text-sm font-bold transition-all ${Nt===ct?"bg-yellow-500 text-gray-900 scale-110":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:ct},ct))}),i.jsx("textarea",{value:Rt,onChange:ct=>it(ct.target.value),placeholder:"  ()...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl p-3 text-xs text-white outline-none focus:border-yellow-500 mb-3 min-h-[60px] resize-none"}),i.jsxs("button",{onClick:Pr,disabled:vn||Nt===0,className:`w-full py-2.5 rounded-xl font-bold text-xs flex items-center justify-center gap-2 transition-all ${Nt===0?"bg-gray-800 text-gray-600 cursor-not-allowed":"bg-yellow-600 text-white hover:bg-yellow-700"}`,children:[vn?i.jsx(bt,{className:"w-3 h-3 animate-spin"}):i.jsx(ca,{className:"w-3 h-3"}),""]})]})})]})},Gn=()=>i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 animate-fade-in text-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(gp,{className:"w-5 h-5 text-emerald-400"})," "]}),i.jsxs("button",{onClick:()=>s("RESULT"),className:"text-gray-400 hover:text-white font-medium flex items-center gap-1 text-sm",children:[i.jsx(qt,{className:"w-4 h-4"})," "]})]}),i.jsx("div",{className:"space-y-6",children:M==null?void 0:M.questions.map((ue,Ne)=>{const Ce=ue.type==="REORDER";let be=!1,Le=null;if(Ce){const We=ce[Ne];We?(Le=We.map(At=>ue.options[At]).join(" "),be=We.length===ue.options.length&&We.every((At,ct)=>At===ct)):(Le="  ",be=!1)}else{const We=ce[Ne];be=We===ue.correctAnswer,Le=We!==void 0?ue.options[We]:"  "}return i.jsxs("div",{className:`bg-gray-900 rounded-2xl shadow-sm border p-5 ${be?"border-gray-700":"border-red-900/50"}`,children:[i.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[i.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0 mt-0.5 ${be?"bg-emerald-900 text-emerald-300":"bg-red-900 text-red-300"}`,children:Ne+1}),i.jsx("h3",{className:"text-base font-bold text-white leading-relaxed",children:ue.question})]}),i.jsxs("div",{className:`p-3 rounded-xl border text-sm ${be?"bg-emerald-900/20 border-emerald-500":"bg-red-900/20 border-red-500"}`,children:[i.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:":"}),i.jsx("span",{className:"font-bold",children:Le})]}),!be&&i.jsxs("div",{className:"mt-2 p-3 rounded-xl border bg-gray-800 border-gray-700 text-sm",children:[i.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:" :"}),i.jsx("span",{className:"font-bold text-emerald-400",children:Ce?ue.options.join(" "):ue.options[ue.correctAnswer]})]}),ue.explanation&&i.jsxs("div",{className:"mt-3 p-3 bg-yellow-900/20 border border-yellow-800 rounded-xl text-sm text-yellow-200 animate-fade-in",children:[i.jsxs("span",{className:"font-bold block mb-1 flex items-center gap-1",children:[i.jsx(oa,{className:"w-3 h-3"}),":"]}),i.jsx("p",{className:"leading-relaxed opacity-90",dir:"auto",children:ue.explanation})]})]},ue.id)})})]});return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 text-gray-100",children:[t==="SELECTION"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1NKy8h05zQTNaEJ9C35Rzwys5QXFUxFHD",alt:"Background",className:"w-full h-full object-cover opacity-25"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/80 via-gray-900/20 to-gray-950"}),i.jsx("div",{className:"absolute inset-0 shadow-[inset_0_0_150px_rgba(0,0,0,0.9)]"})]}),i.jsx("div",{className:"bg-gray-950/80 backdrop-blur-md border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm relative",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),Lr()]}),t==="ACTIVE"&&Pn(),t==="RESULT"&&ar(),t==="REVIEW"&&Gn(),Se&&i.jsx(st,{title:"  ",message:Ke==="REVIEW"?"   ":Ke==="RETAKE"?"     ":Ke==="LIST"?"    ":"    ",onConfirm:Je,onCancel:()=>Me(!1),confirmText:"",cancelText:"",icon:L5})]})},JD=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),WD=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),ZD=({onBack:r})=>{const e=[{name:".   ",image:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",title:"  ",school:"  ",location:" ",color:"emerald",bio:"         .              .",skills:["  ","  "],social:{facebook:"https://www.facebook.com/yazanabokaheal2?locale=ms_MY",whatsapp:"https://wa.me/972568401548",telegram:"https://t.me/yazan1342"}},{name:".   ",image:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",title:"  ",school:"  ",location:" ",color:"blue",bio:"       .                .",skills:[" "],social:{facebook:"#",whatsapp:"#",telegram:"#"}}];return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h1",{className:"text-4xl font-black text-white mb-4",children:"  "}),i.jsx("p",{className:"text-xl text-gray-400",children:"       "})]}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:e.map((t,s)=>i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-lg border border-white/5 flex flex-col hover:shadow-2xl transition-all duration-300 p-8 hover:border-emerald-500/20",children:[i.jsx("div",{className:"flex justify-center mb-8",children:i.jsx("div",{className:"w-48 h-48 rounded-full p-1 bg-gray-800 shadow-md border border-white/5",children:i.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full rounded-full object-cover"})})}),i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:t.name}),i.jsx("p",{className:`text-${t.color}-400 font-bold text-lg mb-4`,children:t.title}),i.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-gray-400 text-sm font-medium",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(C4,{className:"w-4 h-4"}),t.school]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(yp,{className:"w-4 h-4"}),t.location]})]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"mb-8 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[i.jsx(vl,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),i.jsx("h3",{className:"font-bold text-white",children:" "})]}),i.jsx("p",{className:"text-gray-300 leading-relaxed text-sm",children:t.bio})]}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center justify-center gap-2",children:[i.jsx(ld,{className:`w-5 h-5 text-${t.color}-400`})," "]}),i.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:t.skills.map((l,c)=>i.jsx("span",{className:`bg-${t.color}-900/20 text-${t.color}-300 px-4 py-2 rounded-xl text-sm font-bold border border-${t.color}-900/30`,children:l},c))})]})]}),i.jsx("div",{className:"pt-6 border-t border-white/5",children:i.jsxs("div",{className:"flex justify-center gap-4",children:[i.jsx("a",{href:t.social.facebook,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-blue-900/20 text-blue-400 flex items-center justify-center hover:bg-blue-600 hover:text-white transition-all border border-blue-900/30",children:i.jsx(pp,{className:"w-5 h-5"})}),i.jsx("a",{href:t.social.whatsapp,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-green-900/20 text-green-400 flex items-center justify-center hover:bg-green-600 hover:text-white transition-all border border-green-900/30",children:i.jsx(JD,{className:"w-5 h-5"})}),i.jsx("a",{href:t.social.telegram,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-sky-900/20 text-sky-400 flex items-center justify-center hover:bg-sky-600 hover:text-white transition-all border border-sky-900/30",children:i.jsx(WD,{className:"w-5 h-5"})})]})})]},s))})]})]})},eO=({onBack:r})=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"relative bg-emerald-900/20 py-20 overflow-hidden border-b border-white/5",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 relative z-10 text-center",children:[i.jsx("span",{className:"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30 px-4 py-1 rounded-full text-sm font-medium mb-6 inline-block backdrop-blur-sm",children:"    "}),i.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-6 leading-tight",children:["   ",i.jsx("br",{}),"   "]}),i.jsx("p",{className:"text-gray-300 text-xl max-w-2xl mx-auto leading-relaxed",children:"                    ."})]})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-20",children:[i.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-900/30 rounded-2xl flex items-center justify-center mb-6 border border-blue-500/20",children:i.jsx(gp,{className:"w-8 h-8 text-blue-400"})}),i.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),i.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                   ."})]}),i.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-2xl flex items-center justify-center mb-6 border border-emerald-500/20",children:i.jsx(cx,{className:"w-8 h-8 text-emerald-400"})}),i.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),i.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                  ."})]})]}),i.jsxs("div",{className:"mb-20",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"   "}),i.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{icon:I2,title:" ",desc:"       ."},{icon:h5,title:" ",desc:"           ."},{icon:E2,title:" ",desc:"         ."},{icon:rm,title:" ",desc:"          ."}].map((e,t)=>i.jsxs("div",{className:"bg-gray-900 p-6 rounded-2xl border border-white/5 text-center hover:border-emerald-500/30 transition-all group hover:-translate-y-1",children:[i.jsx("div",{className:"w-14 h-14 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-emerald-900/30 transition-colors border border-white/5",children:i.jsx(e.icon,{className:"w-7 h-7 text-gray-300 group-hover:text-emerald-400"})}),i.jsx("h3",{className:"font-bold text-white text-lg mb-2",children:e.title}),i.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:e.desc})]},t))})]})]})]}),y2=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=V.useState(!1),f=V.useRef(null);V.useEffect(()=>{const x=v=>{f.current&&!f.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-50":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-5 py-4 rounded-2xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all
            ${l?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":c?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-700 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),i.jsx(bl,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&i.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[r.map((x,v)=>{if(x.isHeader)return i.jsx("div",{className:"px-4 py-2 text-xs font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:x.label},v);const w=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${w?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[x.label,w&&i.jsx(da,{className:"w-4 h-4"})]},v)}),r.length===0&&i.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},tO=({onBack:r})=>{const[e,t]=V.useState(""),[s,l]=V.useState(""),[c,d]=V.useState("SELECTION"),[f,g]=V.useState(["handouts"]),[x,v]=V.useState([]),[w,N]=V.useState(!1);V.useEffect(()=>{c==="CONTENT"&&s&&e&&C()},[c,s,e]);const C=async()=>{N(!0);try{const ge=Vn(mt(qe,"study_materials"),An("grade","==",s),An("subject","==",e)),G=await Hn(ge),S=[];G.forEach(j=>{S.push({id:j.id,...j.data()})}),S.sort((j,A)=>{var L,I;const O=((L=j.createdAt)==null?void 0:L.seconds)||0;return(((I=A.createdAt)==null?void 0:I.seconds)||0)-O}),v(S)}catch(ge){console.error("Error fetching materials:",ge)}finally{N(!1)}},M=()=>{e&&s&&d("CONTENT")},Z=ge=>{g(G=>G.includes(ge)?G.filter(S=>S!==ge):[...G,ge])},B=()=>{const ge=x.filter(j=>j.category==="handouts"),G=x.filter(j=>j.category==="worksheets"),S=x.filter(j=>j.category==="exams");return[{id:"handouts",title:" ",files:ge},{id:"worksheets",title:" ",files:G},{id:"exams",title:" ",files:S}]},me=ge=>ge?(ge.toDate?ge.toDate():new Date(ge.seconds*1e3)).toLocaleDateString("ar-EG"):"",ce=B(),le=()=>{const ge=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(S=>({label:` ${S}`,value:S.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"   -   ",value:"English Major - QOU"}],G=[{label:"  (English)",value:"English"},{label:"",value:"Math"},{label:"",value:"Science"}];return i.jsxs("div",{className:"w-full animate-fade-in pb-20 bg-gray-950 min-h-screen text-gray-100",children:[i.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(156, 163, 175, 0.5);
          border-radius: 20px;
        }
      `}),i.jsxs("div",{className:"relative pt-32 pb-56 px-4 overflow-hidden rounded-b-[3.5rem] shadow-2xl shadow-gray-900/50 mb-20 border-b border-white/5",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1gSDH-0a3cWa8m8APr5qXGkKxINXZcSid",alt:"Background",className:"w-full h-full object-cover object-center scale-105 opacity-50"}),i.jsx("div",{className:"absolute inset-0 bg-emerald-900/80 mix-blend-multiply"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/90"})]}),i.jsxs("div",{className:"max-w-4xl mx-auto text-center relative z-10",children:[i.jsx("div",{className:"inline-flex items-center justify-center p-5 bg-white/10 backdrop-blur-md rounded-3xl mb-6 border border-white/20 shadow-inner ring-1 ring-white/30 animate-fade-in-up",children:i.jsx(ko,{className:"w-10 h-10 text-white drop-shadow-md"})}),i.jsx("h2",{className:"text-5xl md:text-7xl font-black text-white mb-6 tracking-tight drop-shadow-2xl animate-fade-in-up delay-100",children:"  "}),i.jsx("p",{className:"text-white/95 text-xl md:text-2xl max-w-3xl mx-auto font-medium leading-relaxed drop-shadow-lg mb-8 animate-fade-in-up delay-200",children:"         PDF.      ."})]})]}),i.jsx("div",{className:"max-w-4xl mx-auto px-6 -mt-40 relative z-20 animate-fade-in-up delay-300",children:i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-2xl border border-white/5 p-8 md:p-12 backdrop-blur-xl",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-10",children:[i.jsxs("div",{className:"group relative z-20",children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2 group-hover:text-emerald-400 transition-colors",children:[i.jsx("div",{className:"p-2 bg-emerald-900/20 rounded-lg group-hover:bg-emerald-900/40 transition-colors",children:i.jsx(ns,{className:"w-5 h-5 text-emerald-400"})})," "]}),i.jsx(y2,{options:G,value:e,onChange:t,placeholder:" "})]}),i.jsxs("div",{className:"group relative z-10",children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2 group-hover:text-teal-400 transition-colors",children:[i.jsx("div",{className:"p-2 bg-teal-900/20 rounded-lg group-hover:bg-teal-900/40 transition-colors",children:i.jsx(ha,{className:"w-5 h-5 text-teal-400"})})," "]}),i.jsx(y2,{options:ge,value:s,onChange:l,placeholder:" "})]})]}),i.jsxs("button",{onClick:M,disabled:!e||!s,className:`w-full py-5 rounded-2xl font-bold text-xl flex items-center justify-center gap-3 transition-all shadow-lg ${!e||!s?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-gradient-to-r from-emerald-600 to-teal-600 text-white hover:from-emerald-700 hover:to-teal-700 hover:shadow-emerald-900/50 hover:-translate-y-1"}`,children:[i.jsx(zs,{className:"w-6 h-6"})," "]})]})})]})},_e=()=>i.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8 animate-fade-in-up min-h-screen",children:[i.jsxs("div",{className:"text-center mb-8 bg-gray-900 p-6 rounded-3xl shadow-sm border border-white/5 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 to-teal-500"}),i.jsx("div",{className:"w-16 h-16 bg-emerald-900/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx(ss,{className:"w-8 h-8 text-emerald-400"})}),i.jsxs("h2",{className:"text-2xl font-black text-white mb-2",children:[" ",e]}),i.jsxs("p",{className:"text-gray-400 font-medium text-sm md:text-base",children:["        ",i.jsx("span",{className:"font-bold text-emerald-400",children:s==="English Major - QOU"?"  ":s})]})]}),i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("button",{onClick:()=>d("SELECTION"),className:"flex items-center gap-2 bg-gray-800 text-gray-200 px-5 py-3 rounded-xl font-bold shadow-sm border border-gray-700 hover:border-emerald-600 hover:text-emerald-400 transition-all hover:-translate-y-0.5",children:[i.jsx(qt,{className:"w-5 h-5"})," "]}),i.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-xs font-bold text-gray-400 bg-gray-800 px-3 py-1.5 rounded-lg border border-gray-700",children:[i.jsx(ko,{className:"w-3.5 h-3.5"}),ce.reduce((ge,G)=>ge+G.files.length,0)," "]})]}),w?i.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[i.jsx(bt,{className:"w-10 h-10 animate-spin text-emerald-400"}),i.jsx("p",{className:"text-gray-400 font-bold",children:"  ..."})]}):i.jsx("div",{className:"space-y-4",children:ce.map(ge=>{const G=f.includes(ge.id);return i.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700 overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("button",{onClick:()=>Z(ge.id),className:`w-full flex items-center justify-between p-5 transition-colors ${G?"bg-gray-700/30":"hover:bg-gray-700/30"}`,children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`p-2.5 rounded-xl ${G?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-400"}`,children:i.jsx(ko,{className:"w-6 h-6"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"font-bold text-base text-white block",children:ge.title}),i.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:[ge.files.length," "]})]})]}),i.jsx("div",{className:`transition-transform duration-300 ${G?"rotate-180":""}`,children:i.jsx(bl,{className:"w-5 h-5 text-gray-400"})})]}),G&&i.jsx("div",{className:"bg-gray-900 border-t border-gray-700",children:ge.files.length===0?i.jsxs("div",{className:"p-8 text-center flex flex-col items-center justify-center text-gray-400",children:[i.jsx(ko,{className:"w-10 h-10 mb-2 opacity-20"}),i.jsx("p",{className:"text-sm font-medium",children:"       "})]}):i.jsx("div",{className:"divide-y divide-gray-700/50",children:ge.files.map((S,j)=>i.jsxs("div",{onClick:()=>S.url&&window.open(S.url,"_blank"),className:"flex items-center justify-between p-4 hover:bg-emerald-900/10 transition-colors group cursor-pointer",children:[i.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-900/20 flex items-center justify-center shrink-0 text-red-500",children:i.jsx(ss,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[i.jsx("span",{className:"text-sm font-bold text-gray-200 group-hover:text-emerald-300 transition-colors whitespace-normal break-words",children:S.title}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-0.5",children:[i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:S.size}),i.jsx("span",{children:""}),i.jsx("span",{children:me(S.createdAt)})]})]})]}),i.jsx("button",{className:"p-2.5 rounded-full bg-gray-700 text-gray-400 group-hover:bg-emerald-900/30 group-hover:text-emerald-400 transition-all shrink-0 ml-3",children:i.jsx(mp,{className:"w-5 h-5"})})]},j))})})]},ge.id)})}),i.jsxs("div",{className:"mt-8 flex items-center gap-3 justify-center text-xs text-gray-400 bg-gray-800 p-4 rounded-2xl border border-dashed border-gray-700",children:[i.jsx(wf,{className:"w-4 h-4 text-emerald-500 shrink-0"}),i.jsx("span",{children:"      PDF  "})]})]});return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 transition-colors duration-300",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-700 rounded-full transition-colors group text-gray-400 hover:text-emerald-400",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-emerald-400 cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),c==="SELECTION"?le():_e()]})},nO=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),sO=[{id:"yazan",name:".   ",image:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",role:"English Teacher",phone:"972568401548",color:"emerald"},{id:"majd",name:".   ",image:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",role:"English Teacher",phone:"972568401548",color:"blue"}],rO=[{id:"inquiry",label:" ",icon:ox,message:"",color:"text-orange-400",bg:"bg-orange-900/20"},{id:"question",label:"  ",icon:oa,message:"",color:"text-blue-400",bg:"bg-blue-900/20"},{id:"review",label:" ",icon:i5,message:"",color:"text-purple-400",bg:"bg-purple-900/20"},{id:"message",label:" ",icon:Fu,message:"",color:"text-emerald-400",bg:"bg-emerald-900/20"}],aO=({onBack:r})=>{const[e,t]=V.useState(null),s=l=>{if(!e)return;const c=l||" ",d=`https://wa.me/${e.phone}?text=${encodeURIComponent(c)}`;window.open(d,"_blank"),t(null)};return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in pb-20 transition-colors duration-300 text-gray-100",children:[i.jsxs("div",{className:"relative pt-32 pb-48 px-4 overflow-hidden rounded-b-[3.5rem] shadow-2xl shadow-gray-900/50 mb-16 bg-gray-900 border-b border-white/5",children:[i.jsxs("div",{className:"absolute top-6 right-6 z-30 md:top-10 md:right-10 flex items-center gap-2 md:gap-4",children:[i.jsxs("button",{onClick:r,className:"flex items-center gap-2 bg-white/10 backdrop-blur-md text-white px-4 md:px-5 py-2.5 rounded-full font-bold hover:bg-white/20 transition-all border border-white/20 shadow-lg group",children:[i.jsx(qt,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),i.jsx("span",{className:"hidden sm:inline",children:""})]}),i.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-black/40 backdrop-blur-md text-white px-4 py-2 rounded-full font-bold border border-white/10 shadow-md",children:[i.jsx("span",{className:"text-gray-300",children:""}),i.jsx("span",{className:"text-gray-500",children:"/"}),i.jsx("span",{className:"text-emerald-400",children:"  "})]})]}),i.jsxs("div",{className:"absolute inset-0 z-0 bg-gray-900",children:[i.jsxs("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover opacity-80",poster:"https://images.unsplash.com/photo-1524178232363-1fb2b075b655?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",children:[i.jsx("source",{src:"https://drive.google.com/uc?export=download&id=1gfQre4TEqHyomoSblHjn-abxK_cduc8t",type:"video/mp4"}),i.jsx("source",{src:"https://assets.mixkit.co/videos/preview/mixkit-online-learning-man-student-on-laptop-4612-large.mp4",type:"video/mp4"})]}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-900/70 via-emerald-900/40 to-gray-900/90"})]}),i.jsxs("div",{className:"relative z-10 text-center max-w-4xl mx-auto text-white",children:[i.jsx("h1",{className:"text-4xl md:text-6xl font-black mb-6 leading-tight animate-fade-in-up delay-100 drop-shadow-2xl text-emerald-400",children:"  "}),i.jsx("p",{className:"text-xl md:text-2xl text-emerald-200 font-bold max-w-2xl mx-auto leading-relaxed animate-fade-in-up delay-200 drop-shadow-lg",children:"         "})]})]}),i.jsx("div",{className:"max-w-5xl mx-auto px-4 -mt-32 relative z-20",children:i.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-xl rounded-[3rem] border border-white/10 p-8 md:p-12 shadow-2xl",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("span",{className:"bg-emerald-900/30 text-emerald-400 px-4 py-1.5 rounded-full text-sm font-bold border border-emerald-500/20 mb-4 inline-block",children:"English Department"}),i.jsx("h2",{className:"text-3xl font-black text-white",children:"  "})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-3xl mx-auto",children:sO.map(l=>i.jsxs("div",{className:"bg-gray-800/50 rounded-[2rem] p-6 border border-gray-700 hover:border-emerald-500/50 transition-all hover:bg-gray-800 group flex flex-col items-center text-center shadow-lg hover:shadow-emerald-900/20 hover:-translate-y-1",children:[i.jsx("div",{className:"w-40 h-40 rounded-full p-1 bg-gradient-to-br from-gray-700 to-gray-800 shadow-xl mb-5 group-hover:from-emerald-500 group-hover:to-teal-500 transition-all",children:i.jsx("img",{src:l.image,alt:l.name,className:"w-full h-full rounded-full object-cover border-4 border-gray-900"})}),i.jsx("h3",{className:"text-2xl font-black text-white mb-1",children:l.name}),i.jsx("p",{className:"text-gray-400 font-medium text-sm mb-6",children:"English Language Teacher"}),i.jsxs("button",{onClick:()=>t(l),className:"w-full bg-gradient-to-r from-emerald-600 to-teal-600 text-white py-3.5 rounded-xl font-bold flex items-center justify-center gap-2 hover:shadow-lg hover:shadow-emerald-900/40 transition-all active:scale-95",children:[i.jsx(ca,{className:"w-4 h-4"})," "]})]},l.id))})]})}),e&&i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm transition-opacity",onClick:()=>t(null)}),i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] w-full max-w-md relative z-10 animate-fade-in-up shadow-2xl border border-white/10 overflow-hidden",children:[i.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 p-6 border-b border-white/5 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-emerald-500/30",children:i.jsx("img",{src:e.image,alt:"",className:"w-full h-full object-cover"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 font-bold",children:" "}),i.jsx("h3",{className:"text-lg font-black text-white",children:e.name})]})]}),i.jsx("button",{onClick:()=>t(null),className:"p-2 bg-white/5 hover:bg-white/10 rounded-full text-gray-400 hover:text-white transition-colors",children:i.jsx(ms,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-6 space-y-3",children:[i.jsx("p",{className:"text-center text-gray-400 text-sm mb-4 font-medium",children:"     :"}),rO.map(l=>i.jsxs("button",{onClick:()=>s(l.message),className:"w-full flex items-center gap-4 p-4 rounded-2xl bg-gray-800/50 border border-gray-700 hover:border-emerald-500/50 hover:bg-gray-800 transition-all group",children:[i.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${l.bg} ${l.color} group-hover:scale-110 transition-transform`,children:i.jsx(l.icon,{className:"w-6 h-6"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("h4",{className:"font-bold text-white group-hover:text-emerald-400 transition-colors",children:l.label}),l.message&&i.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5 truncate max-w-[200px]",children:l.message})]}),i.jsx(ra,{className:"w-5 h-5 text-gray-600 group-hover:text-emerald-500 group-hover:-translate-x-1 transition-all"})]},l.id))]}),i.jsx("div",{className:"p-4 bg-black/20 text-center",children:i.jsxs("p",{className:"text-[10px] text-gray-500 flex items-center justify-center gap-1",children:[i.jsx(nO,{className:"w-3 h-3 text-green-500"}),"    "]})})]})]})]})},b2=[{minLevel:1,title:" ",icon:ix,color:"text-gray-400",border:"border-gray-400",gradient:"from-gray-500 to-gray-700"},{minLevel:5,title:" ",icon:ns,color:"text-emerald-400",border:"border-emerald-400",gradient:"from-emerald-500 to-teal-600"},{minLevel:10,title:"",icon:zs,color:"text-blue-400",border:"border-blue-400",gradient:"from-blue-500 to-indigo-600"},{minLevel:15,title:" ",icon:ld,color:"text-indigo-400",border:"border-indigo-400",gradient:"from-indigo-500 to-purple-600"},{minLevel:20,title:"",icon:am,color:"text-purple-400",border:"border-purple-400",gradient:"from-purple-500 to-fuchsia-600"},{minLevel:30,title:"",icon:ac,color:"text-amber-400",border:"border-amber-400",gradient:"from-amber-400 to-orange-600"}],iO=({onLoginClick:r})=>{const[e,t]=V.useState([]),[s,l]=V.useState(!0),[c,d]=V.useState(null);V.useEffect(()=>{(async()=>{l(!0);const v="etqan_leaderboard_cache_v1",w=1440*60*1e3,N=localStorage.getItem(v),C=Date.now();let M=[],Z=!1;if(N)try{const B=JSON.parse(N);C-B.timestamp<w&&(M=B.data,Z=!0)}catch(B){console.error("Cache parse error",B)}if(Z)t(M);else try{const B=Vn(mt(qe,"users"),_d("totalXP","desc"),tS(10)),ce=(await Hn(B)).docs.map(le=>({...le.data(),uid:le.id}));t(ce),localStorage.setItem(v,JSON.stringify({timestamp:C,data:ce}))}catch(B){console.error("Error fetching leaderboard:",B)}l(!1)})()},[]);const f=x=>{switch(x){case 0:return i.jsx(ac,{className:"w-5 h-5 md:w-6 md:h-6 text-yellow-400 fill-yellow-400"});case 1:return i.jsx(bp,{className:"w-5 h-5 md:w-6 md:h-6 text-gray-300 fill-gray-300"});case 2:return i.jsx(bp,{className:"w-5 h-5 md:w-6 md:h-6 text-amber-600 fill-amber-600"});default:return i.jsx(Oo,{className:"w-4 h-4 md:w-5 md:h-5 text-emerald-600/50"})}},g=x=>{const v=Math.floor((x||0)/500)+1;return[...b2].reverse().find(w=>v>=w.minLevel)||b2[0]};return i.jsxs("section",{className:"py-12 md:py-20 relative overflow-hidden bg-gray-950",id:"achievements",children:[i.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-1/4 -right-20 w-72 h-72 bg-emerald-900/10 rounded-full blur-[80px]"}),i.jsx("div",{className:"absolute bottom-1/4 -left-20 w-72 h-72 bg-blue-900/10 rounded-full blur-[80px]"})]}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[i.jsxs("div",{className:"text-center mb-8 md:mb-12",children:[i.jsxs("h2",{className:"text-3xl md:text-5xl font-black text-white mb-3 drop-shadow-lg flex items-center justify-center gap-2",children:[i.jsx(Oo,{className:"w-8 h-8 md:w-10 md:h-10 text-yellow-500"})," "]}),i.jsx("p",{className:"text-gray-400 text-sm md:text-lg",children:"   "})]}),i.jsx("div",{className:"flex justify-center",children:i.jsx("div",{className:"w-full max-w-3xl",children:i.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm rounded-[2rem] border border-white/10 p-4 md:p-8 shadow-2xl relative",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6 px-2",children:[i.jsxs("h3",{className:"text-lg md:text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(_f,{className:"w-5 h-5 text-orange-500"})," "]}),i.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] md:text-xs font-medium bg-gray-800 text-gray-400 px-3 py-1.5 rounded-full border border-gray-700",children:[i.jsx(S2,{className:"w-3 h-3 md:w-3.5 md:h-3.5 text-blue-400"}),"   "]})]}),s?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(bt,{className:"w-8 h-8 animate-spin text-emerald-500 mb-2"}),i.jsx("p",{className:"text-gray-500 text-xs font-bold",children:"  ..."})]}):e.length===0?i.jsx("div",{className:"text-center py-12 text-gray-500 text-sm",children:i.jsx("p",{children:"      !"})}):i.jsx("div",{className:"space-y-2 md:space-y-3",children:e.map((x,v)=>i.jsxs("div",{onClick:()=>d(x),className:`relative flex items-center justify-between p-3 md:p-4 rounded-2xl border transition-all active:scale-98 cursor-pointer
                                        ${v===0?"bg-gradient-to-r from-yellow-900/20 to-gray-900 border-yellow-500/30 shadow-lg shadow-yellow-900/10":v===1?"bg-gray-800/60 border-gray-600/50":v===2?"bg-gray-800/40 border-amber-800/40":"bg-gray-900 border-gray-800 hover:bg-gray-800"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 md:gap-4 overflow-hidden",children:[i.jsx("div",{className:`flex items-center justify-center w-6 md:w-8 font-black text-base md:text-lg ${v<3?"text-white":"text-gray-600"}`,children:v<3?f(v):v+1}),i.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gray-800 border-2 border-gray-700 overflow-hidden shrink-0",children:x.avatar?i.jsx("img",{src:x.avatar,alt:x.displayName,className:"w-full h-full object-cover"}):i.jsx(Zn,{className:"w-full h-full p-2 text-gray-400"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("h4",{className:"font-bold text-white text-sm md:text-base truncate",children:x.displayName}),i.jsxs("div",{className:"flex items-center gap-1 text-[10px] md:text-xs text-gray-400 truncate",children:[i.jsx(ha,{className:"w-3 h-3"}),x.school||" "]})]})]}),i.jsxs("div",{className:"shrink-0 flex items-center gap-1 md:gap-2 bg-black/30 px-2 md:px-3 py-1 rounded-lg border border-white/5",children:[i.jsx("span",{className:"font-black text-emerald-400 text-sm md:text-base",children:x.totalXP||0}),i.jsx("span",{className:"text-[10px] text-gray-500 font-bold",children:"XP"})]}),v===0&&i.jsx("div",{className:"absolute -top-1 -right-1 pointer-events-none",children:i.jsxs("span",{className:"flex h-3 w-3",children:[i.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"}),i.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-yellow-500"})]})})]},v))})]})})})]}),c&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/80 backdrop-blur-md animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 w-full max-w-sm rounded-[2.5rem] overflow-hidden border border-gray-700 shadow-2xl relative animate-fade-in-up",children:[i.jsx("button",{onClick:()=>d(null),className:"absolute top-4 right-4 p-2 bg-black/20 hover:bg-black/40 text-white rounded-full transition-colors z-20",children:i.jsx(ms,{className:"w-5 h-5"})}),i.jsx("div",{className:`h-32 bg-gradient-to-br ${g(c.totalXP||0).gradient} relative`,children:i.jsx("div",{className:"absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"})}),i.jsxs("div",{className:"px-6 pb-8 -mt-16 text-center relative z-10",children:[i.jsx("div",{className:`w-32 h-32 mx-auto rounded-full border-4 bg-gray-800 overflow-hidden shadow-xl mb-4 ${g(c.totalXP||0).border}`,children:c.avatar?i.jsx("img",{src:c.avatar,alt:c.displayName,className:"w-full h-full object-cover"}):i.jsx(Zn,{className:"w-full h-full p-6 text-gray-500"})}),i.jsx("h2",{className:"text-2xl font-black text-white mb-1",children:c.displayName}),i.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm mb-4",children:[i.jsx(ox,{className:"w-3 h-3"}),c.school||" "]}),i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-gray-800 border border-gray-700 mb-6 shadow-sm",children:[rx.createElement(g(c.totalXP||0).icon,{className:`w-4 h-4 ${g(c.totalXP||0).color}`}),i.jsx("span",{className:`text-sm font-bold ${g(c.totalXP||0).color}`,children:g(c.totalXP||0).title})]}),i.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-2xl border border-gray-700/50 mb-6 relative",children:[i.jsx($5,{className:"w-6 h-6 text-gray-600 absolute -top-3 right-4 bg-gray-900 px-1"}),i.jsx("p",{className:"text-gray-300 text-sm font-medium leading-relaxed italic",children:'"        .           ."'})]}),i.jsx("div",{className:"pt-4 border-t border-gray-800",children:i.jsxs("div",{className:"flex justify-between items-center px-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl md:text-2xl text-emerald-500",style:{fontFamily:"'Great Vibes', cursive"},children:"Yazan Abu Kahil"}),i.jsx("div",{className:"text-[9px] text-gray-600 mt-1 font-bold",children:".   "})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl md:text-2xl text-blue-500",style:{fontFamily:"'Great Vibes', cursive"},children:"Majd Al-Din"}),i.jsx("div",{className:"text-[9px] text-gray-600 mt-1 font-bold",children:".   "})]})]})})]})]})})]})},lO=()=>{const[r,e]=V.useState({students:0,quizzes:0,files:0,explanations:0});V.useEffect(()=>{(async()=>{const l="etqan_impact_stats_v3",d=localStorage.getItem(l),f=Date.now();if(d)try{const{data:g,timestamp:x}=JSON.parse(d);if(f-x<144e5){e(g);return}}catch(g){console.error("Cache parsing error",g)}try{const g=await nf(Vn(mt(qe,"users"),An("role","==","student"))),x=await nf(mt(qe,"quizzes")),v=await nf(mt(qe,"study_materials")),w=await nf(mt(qe,"explanations")),N={students:g.data().count,quizzes:x.data().count,files:v.data().count,explanations:w.data().count};e(N),localStorage.setItem(l,JSON.stringify({data:N,timestamp:f}))}catch(g){console.error("Error fetching impact stats:",g)}})()},[]);const t=[{id:1,label:" ",value:`${r.students}`,icon:rm,color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/20"},{id:2,label:" ",value:`${r.quizzes}`,icon:rw,color:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/20"},{id:3,label:" ",value:`${r.files}`,icon:ss,color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/20"},{id:4,label:" ",value:`${r.explanations}`,icon:Hu,color:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/20"}];return i.jsxs("section",{className:"py-12 bg-gray-950 relative overflow-hidden border-t border-white/5",children:[i.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[200px] bg-emerald-900/10 rounded-full blur-[100px] pointer-events-none"}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1 rounded-full bg-emerald-900/20 border border-emerald-500/20 text-emerald-400 text-xs font-bold mb-4",children:[i.jsx(rw,{className:"w-4 h-4"}),i.jsx("span",{children:" "})]}),i.jsxs("h2",{className:"text-3xl font-black text-white",children:[" ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-400",children:""})]})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6",children:t.map(s=>i.jsxs("div",{className:`bg-gray-900/50 backdrop-blur-md p-6 rounded-3xl border ${s.border} text-center group hover:-translate-y-1 transition-all duration-300 hover:bg-gray-800`,children:[i.jsx("div",{className:`w-12 h-12 mx-auto rounded-2xl flex items-center justify-center mb-4 ${s.bg} ${s.color} shadow-lg group-hover:scale-110 transition-transform`,children:i.jsx(s.icon,{className:"w-6 h-6"})}),i.jsx("div",{className:"text-2xl md:text-3xl font-black text-white mb-1",children:s.value}),i.jsx("div",{className:"text-gray-400 font-bold text-xs md:text-sm",children:s.label})]},s.id))})]})]})},oO=({onBack:r})=>{const[e,t]=V.useState([]),[s,l]=V.useState(!0),[c,d]=V.useState(""),[f,g]=V.useState(null),[x,v]=V.useState(!1);V.useEffect(()=>{w()},[]);const w=async()=>{l(!0);try{const G=Vn(mt(qe,"quizzes"),_d("createdAt","desc")),j=(await Hn(G)).docs.map(A=>({id:A.id,...A.data()}));t(j)}catch(G){console.error("Error fetching quizzes:",G)}finally{l(!1)}},N=G=>{g({category:"Language",...G})},C=async(G,S)=>{if(G.stopPropagation(),!S){alert(":   ");return}if(window.confirm("  "))try{await Pm(Fn(qe,"quizzes",S)),t(j=>j.filter(A=>A.id!==S))}catch(j){console.error("Error deleting quiz:",j),alert("   : "+j.message)}},M=(G,S)=>{f&&g({...f,[G]:S})},Z=(G,S,j)=>{if(!f)return;const A=[...f.questions];A[G]={...A[G],[S]:j},g({...f,questions:A})},B=(G,S,j)=>{if(!f)return;const A=[...f.questions],O=[...A[G].options];O[S]=j,A[G]={...A[G],options:O},g({...f,questions:A})},me=G=>{if(f&&window.confirm("      ")){const S=f.questions.filter((j,A)=>A!==G);g({...f,questions:S})}},ce=async()=>{if(!(!f||!f.id)){if(f.questions.length===0){alert("     !");return}v(!0);try{const G=Fn(qe,"quizzes",f.id);await Ed(G,{title:f.title,subject:f.subject,grade:f.grade,category:f.category,questions:f.questions}),t(S=>S.map(j=>j.id===f.id?f:j)),g(null),alert("   ")}catch(G){console.error("Error updating quiz:",G),alert("   ")}finally{v(!1)}}},le=e.filter(G=>(G.title?G.title.toLowerCase().includes(c.toLowerCase()):!1)||G.teacherName&&G.teacherName.toLowerCase().includes(c.toLowerCase())),_e=G=>G?(G.toDate?G.toDate():new Date(G.seconds*1e3)).toLocaleDateString("ar-EG"):"",ge="w-full p-3 rounded-xl border-2 border-gray-600 focus:border-blue-400 outline-none font-bold text-white bg-gray-700 shadow-sm transition-colors placeholder-gray-400";return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in relative transition-colors duration-300 text-gray-100",children:[i.jsx("style",{children:`
        .custom-scrollbar {
          scrollbar-width: thin;
          scrollbar-color: #475569 transparent;
        }
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
          height: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #475569;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #94a3b8;
        }
      `}),i.jsx("div",{className:"bg-gray-950 border-b border-white/5 pt-8 pb-20 px-4 shadow-sm relative overflow-hidden",children:i.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-3 text-sm md:text-base mb-6",children:[i.jsx("button",{onClick:r,className:"bg-gray-800 hover:bg-gray-700 p-2 rounded-full transition-colors text-gray-300",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]}),i.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end justify-between gap-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-4xl font-black text-white mb-2 tracking-tight",children:"  "}),i.jsx("p",{className:"text-gray-400 font-medium",children:"      "})]}),i.jsxs("div",{className:"w-full md:w-auto bg-gray-800 p-2 rounded-2xl shadow-lg border border-gray-600 flex items-center gap-2",children:[i.jsx(zs,{className:"w-5 h-5 text-gray-300 mr-2"}),i.jsx("input",{type:"text",placeholder:"    ...",value:c,onChange:G=>d(G.target.value),className:"w-full md:w-64 outline-none text-sm font-bold text-gray-200 placeholder-gray-500 bg-transparent"})]})]})]})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 -mt-12 relative z-20",children:s?i.jsx("div",{className:"flex justify-center items-center py-20",children:i.jsx(bt,{className:"w-10 h-10 animate-spin text-blue-400"})}):le.length===0?i.jsxs("div",{className:"bg-gray-800 rounded-3xl shadow-sm border border-white/5 p-12 text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(qu,{className:"w-8 h-8 text-gray-500"})}),i.jsx("h3",{className:"text-xl font-bold text-white",children:"  "}),i.jsx("p",{className:"text-gray-400 mt-1",children:"       ."})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:le.map(G=>i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm hover:shadow-xl transition-all duration-300 border border-white/5 overflow-hidden group flex flex-col",children:[i.jsxs("div",{className:"p-6 flex-1",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("span",{className:"bg-blue-900/30 text-blue-300 px-3 py-1 rounded-lg text-xs font-bold",children:G.subject}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>N(G),className:"bg-emerald-900/20 text-emerald-400 p-1.5 rounded-lg hover:bg-emerald-900/40 transition-colors",title:" ",children:i.jsx(vp,{className:"w-4 h-4"})}),i.jsx("button",{onClick:S=>C(S,G.id),className:"bg-red-900/20 text-red-400 p-1.5 rounded-lg hover:bg-red-900/40 transition-colors",title:" ",children:i.jsx(wi,{className:"w-4 h-4"})})]})]}),i.jsx("h3",{className:"text-xl font-black text-white mb-2 line-clamp-2 group-hover:text-blue-400 transition-colors",children:G.title}),G.category&&i.jsx("span",{className:"inline-block mb-4 bg-amber-900/20 text-amber-400 text-[10px] font-bold px-2 py-1 rounded-md border border-amber-800/50",children:G.category}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-6",children:[i.jsxs("span",{className:"bg-gray-700 px-2 py-0.5 rounded border border-gray-600 font-bold",children:[" ",G.grade]}),i.jsx("span",{className:"text-gray-600",children:"|"}),i.jsxs("span",{className:"bg-gray-700/50 text-gray-400 px-2 py-0.5 rounded-lg text-xs font-bold flex items-center gap-1",children:[i.jsx(Bu,{className:"w-3 h-3"}),_e(G.createdAt)]})]})]}),i.jsxs("div",{className:"bg-gray-900/50 p-4 border-t border-white/5 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full border border-gray-600 flex items-center justify-center shadow-sm text-gray-300",children:i.jsx(Zn,{className:"w-4 h-4"})}),i.jsx("p",{className:"text-sm font-bold text-gray-300",children:G.teacherName||""})]}),i.jsxs("span",{className:"flex items-center gap-1 text-xs font-bold text-gray-400 bg-gray-700 px-2 py-1 rounded-md border border-gray-600",children:[i.jsx(oa,{className:"w-3 h-3"}),G.questions.length," "]})]})]},G.id))})}),f&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden border border-gray-700",children:[i.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0 sticky top-0 z-10",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:i.jsx(vp,{className:"w-6 h-6 text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-black text-white",children:" "}),i.jsx("p",{className:"text-sm text-gray-400",children:"     "})]})]}),i.jsx("button",{onClick:()=>g(null),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:i.jsx(ms,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-900 custom-scrollbar",children:[i.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 mb-8",children:[i.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx(qu,{className:"w-5 h-5 text-blue-400"})," "]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:" "}),i.jsx("input",{type:"text",value:f.title,onChange:G=>M("title",G.target.value),className:ge})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:""}),i.jsx("input",{type:"text",value:f.subject,onChange:G=>M("subject",G.target.value),className:ge})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:""}),i.jsx("select",{value:f.grade,onChange:G=>M("grade",G.target.value),className:ge,children:[5,6,7,8,9,10,11,12].map(G=>i.jsxs("option",{value:G,children:[" ",G]},G))})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:"  (Category)"}),i.jsxs("select",{value:f.category||"Language",onChange:G=>M("category",G.target.value),className:ge,children:[i.jsx("option",{value:"Language",children:"Language ()"}),i.jsx("option",{value:"Reading",children:"Reading ()"}),i.jsx("option",{value:"Writing",children:"Writing ()"}),i.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"})]})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("h3",{className:"font-bold text-white flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(oa,{className:"w-5 h-5 text-blue-400"})," (",f.questions.length,")"]}),i.jsx("span",{className:"text-xs bg-yellow-900/30 text-yellow-300 px-2 py-1 rounded-lg",children:"*        "})]}),f.questions.map((G,S)=>i.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 relative group",children:[i.jsx("button",{onClick:()=>me(S),className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-red-900/20 hover:text-red-400 rounded-lg transition-colors",title:" ",children:i.jsx(wi,{className:"w-5 h-5"})}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("label",{className:"block text-xs font-bold text-gray-400 mb-1.5",children:["  ",S+1]}),i.jsx("input",{type:"text",dir:"ltr",value:G.question,onChange:j=>Z(S,"question",j.target.value),className:"w-full p-3 rounded-xl border-2 border-gray-600 focus:border-emerald-500 outline-none font-bold text-white bg-gray-700 shadow-sm text-lg transition-colors placeholder-gray-400 text-left"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:G.options.map((j,A)=>i.jsxs("div",{className:"relative",children:[i.jsxs("label",{className:"flex items-center justify-between text-xs font-bold text-gray-400 mb-1 px-1",children:[i.jsxs("span",{children:[" ",A+1]}),i.jsxs("button",{onClick:()=>Z(S,"correctAnswer",A),className:`flex items-center gap-1 px-2 py-0.5 rounded cursor-pointer transition-colors ${G.correctAnswer===A?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:[G.correctAnswer===A?i.jsx(bn,{className:"w-3 h-3"}):i.jsx("div",{className:"w-3 h-3 border border-gray-400 rounded-full"}),G.correctAnswer===A?" ":" "]})]}),i.jsx("input",{type:"text",dir:"ltr",value:j,onChange:O=>B(S,A,O.target.value),className:`w-full p-3 rounded-xl border-2 outline-none font-bold transition-colors shadow-sm text-left ${G.correctAnswer===A?"border-emerald-500 bg-emerald-900/20 text-emerald-300":"border-gray-600 focus:border-blue-400 text-white bg-gray-700"}`})]},A))}),i.jsxs("div",{className:"bg-yellow-900/20 p-4 rounded-xl border border-yellow-800",children:[i.jsx("label",{className:"block text-xs font-bold text-yellow-200 mb-1",children:" "}),i.jsx("textarea",{value:G.explanation||"",onChange:j=>Z(S,"explanation",j.target.value),className:"w-full p-3 rounded-lg border border-yellow-700 focus:border-yellow-500 outline-none text-gray-200 bg-gray-800 text-sm h-20 resize-none shadow-sm custom-scrollbar text-left",placeholder:"  ...",dir:"ltr"})]})]},S))]})]}),i.jsxs("div",{className:"p-6 bg-gray-800 border-t border-gray-700 flex justify-end gap-3 shrink-0 sticky bottom-0 z-10",children:[i.jsx("button",{onClick:()=>g(null),className:"px-6 py-3 rounded-xl font-bold text-gray-300 bg-gray-700 hover:bg-gray-600 transition-colors",children:""}),i.jsxs("button",{onClick:ce,disabled:x,className:"px-8 py-3 rounded-xl font-bold text-white bg-emerald-600 hover:bg-emerald-700 transition-colors flex items-center gap-2 shadow-lg shadow-none",children:[x?i.jsx(bt,{className:"w-5 h-5 animate-spin"}):i.jsx(mi,{className:"w-5 h-5"})," "]})]})]})})]})},cO=[{id:"grammar",title:" (Grammar)",icon:qu,desc:"   ",color:"bg-blue-900/20 text-blue-400"},{id:"reading",title:" (Reading)",icon:ns,desc:"    ",color:"bg-emerald-900/20 text-emerald-400"},{id:"vocabulary",title:" (Vocabulary)",icon:tm,desc:"   ",color:"bg-purple-900/20 text-purple-400"},{id:"writing",title:" (Writing)",icon:lx,desc:"   ",color:"bg-orange-900/20 text-orange-400"}],uO=[{id:"English",title:" ",icon:tm,color:"text-purple-400",bg:"bg-purple-900/20"}],dO=({onBack:r})=>{const{user:e}=nr(),[t,s]=V.useState("INTRO"),[l,c]=V.useState(""),[d,f]=V.useState(""),[g,x]=V.useState(null),[v,w]=V.useState([]),[N,C]=V.useState(!1),[M,Z]=V.useState(null),[B,me]=V.useState(0),[ce,le]=V.useState(""),[_e,ge]=V.useState(!1),[G,S]=V.useState(!1);V.useEffect(()=>{window.scrollTo(0,0)},[t]);const j=()=>s("SUBJECTS"),A=U=>{c(U),s("GRADES")},O=U=>{f(U),s("CATEGORIES")},D=U=>{x(U),s("TOPICS")},L=U=>{Z(U),me(0),le(""),S(!1),s("DETAILS")};V.useEffect(()=>{t==="TOPICS"&&d&&g&&l&&I()},[t,d,g,l]);const I=async()=>{C(!0);try{const U=Vn(mt(qe,"explanations"),An("subject","==",l),An("grade","==",d),An("category","==",g==null?void 0:g.id)),z=await Hn(U),ee=[];z.forEach(xe=>{ee.push({id:xe.id,...xe.data()})}),ee.sort((xe,Se)=>{var ke,Nt;const Me=((ke=xe.createdAt)==null?void 0:ke.seconds)||0;return(((Nt=Se.createdAt)==null?void 0:Nt.seconds)||0)-Me}),w(ee)}catch(U){console.error("Error fetching explanations:",U)}finally{C(!1)}},de=async()=>{if(B!==0&&!(!M||!e)){ge(!0);try{await er(mt(qe,"reviews"),{type:"explanation",targetId:M.id,targetTitle:M.title,teacherId:M.teacherName||"",teacherName:M.teacherName||"",rating:B,comment:ce,studentId:e.uid,studentName:e.displayName,createdAt:xs()}),S(!0)}catch(U){console.error("Error saving review:",U),alert("    ")}finally{ge(!1)}}},he=U=>U?(U.toDate?U.toDate():new Date(U.seconds*1e3)).toLocaleDateString("ar-EG"):"",F=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in flex flex-col relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",poster:"https://images.unsplash.com/photo-1497633762265-9d179a990aa6?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",className:"w-full h-full object-cover",children:i.jsx("source",{src:"https://drive.google.com/uc?export=download&id=1wHw0wEWltdWfMqblwZLRgLKZ_ah3lCKm",type:"video/mp4"})}),i.jsx("div",{className:"absolute inset-0 bg-gray-950/70"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/80"})]}),i.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center flex-1 px-6 text-center pt-10",children:[i.jsx("span",{className:"inline-block px-6 py-2 rounded-full bg-white/10 backdrop-blur-md text-emerald-300 font-bold text-sm mb-6 border border-white/20 shadow-lg animate-fade-in-up",children:"  "}),i.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-white mb-6 leading-tight drop-shadow-2xl animate-fade-in-up delay-100",children:[" ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-400",children:" "})]}),i.jsx("p",{className:"text-gray-200 text-lg md:text-2xl max-w-2xl mx-auto mb-12 leading-relaxed font-medium drop-shadow-md animate-fade-in-up delay-200",children:"         ."}),i.jsxs("button",{onClick:j,className:"w-full md:w-auto bg-white text-gray-900 text-xl font-black px-12 py-5 rounded-2xl hover:scale-105 hover:bg-emerald-50 transition-all shadow-[0_0_30px_rgba(255,255,255,0.3)] flex items-center justify-center gap-3 animate-fade-in-up delay-300",children:[" ",i.jsx(qt,{className:"w-6 h-6"})]})]}),i.jsx("div",{className:"p-6 text-center relative z-10",children:i.jsxs("button",{onClick:r,className:"text-white/70 font-bold hover:text-white transition-colors flex items-center justify-center gap-2 mx-auto",children:[i.jsx(Nf,{className:"w-4 h-4"})," "]})})]}),oe=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("INTRO"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("INTRO"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:uO.map(U=>i.jsxs("button",{onClick:()=>A(U.id),className:"bg-gray-900 p-8 rounded-[2.5rem] shadow-sm border border-gray-700 hover:border-emerald-500 hover:shadow-xl hover:-translate-y-2 transition-all group flex flex-col items-center gap-4",children:[i.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center ${U.bg} ${U.color} group-hover:scale-110 transition-transform`,children:i.jsx(U.icon,{className:"w-10 h-10"})}),i.jsx("span",{className:"font-black text-xl text-gray-200 group-hover:text-white",children:U.title})]},U.id))})})]}),Y=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("SUBJECTS"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("SUBJECTS"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4",children:[[5,6,7,8,9,10,11,12].map(U=>i.jsxs("button",{onClick:()=>O(U.toString()),className:"bg-gray-900 p-4 rounded-2xl shadow-sm border border-gray-700 hover:border-emerald-500 hover:shadow-none hover:-translate-y-1 transition-all group flex flex-col items-center gap-2",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 flex items-center justify-center group-hover:bg-emerald-500 transition-colors",children:i.jsx("span",{className:"font-black text-xl text-gray-300 group-hover:text-white",children:U})}),i.jsxs("span",{className:"font-bold text-gray-300 group-hover:text-emerald-400 text-sm md:text-base",children:[" ",U]})]},U)),i.jsxs("button",{onClick:()=>O("English Major - QOU"),className:"col-span-2 md:col-span-3 lg:col-span-4 bg-gradient-to-r from-emerald-600 to-teal-600 p-4 rounded-2xl shadow-lg text-white hover:shadow-xl hover:-translate-y-1 transition-all flex items-center justify-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-2 rounded-xl",children:i.jsx(ha,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"block font-black text-base md:text-lg",children:"  "}),i.jsx("span",{className:"text-emerald-100 text-xs md:text-sm",children:"  "})]})]})]})})]}),re=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("GRADES"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("GRADES"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:cO.map(U=>i.jsx("button",{onClick:()=>D(U),className:"bg-gray-900 rounded-3xl p-5 shadow-sm border border-gray-700 hover:shadow-xl hover:border-emerald-800 transition-all group text-right relative overflow-hidden",children:i.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[i.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center shrink-0 ${U.color} group-hover:scale-110 transition-transform`,children:i.jsx(U.icon,{className:"w-7 h-7"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-black text-white mb-1",children:U.title}),i.jsx("p",{className:"text-gray-400 text-xs font-medium",children:U.desc})]}),i.jsx("div",{className:"absolute top-1/2 -left-4 -translate-y-1/2 bg-gray-700 p-2 rounded-full opacity-0 group-hover:opacity-100 group-hover:translate-x-2 transition-all",children:i.jsx(ra,{className:"w-5 h-5 text-gray-400"})})]})},U.id))})})]}),ve=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("CATEGORIES"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("CATEGORIES"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:g==null?void 0:g.title})]})}),i.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:N?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(bt,{className:"w-8 h-8 animate-spin text-emerald-400"})}):v.length===0?i.jsx("div",{className:"flex flex-col items-center justify-center text-center",children:i.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-gray-700 max-w-md w-full",children:[i.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:"   "}),i.jsxs("p",{className:"text-gray-400 font-medium leading-relaxed mb-6",children:["      ",i.jsx("span",{className:"text-emerald-600 font-bold",children:g==null?void 0:g.title}),"    ."]}),i.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs font-bold text-gray-400 bg-gray-700 py-2 px-4 rounded-full",children:[i.jsx(Uu,{className:"w-4 h-4"}),"     "]})]})}):i.jsx("div",{className:"grid grid-cols-1 gap-4",children:v.map(U=>i.jsxs("button",{onClick:()=>L(U),className:"bg-gray-900 p-5 rounded-2xl shadow-sm border border-gray-700 hover:border-emerald-700 hover:shadow-md transition-all group text-right flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 rounded-xl bg-gray-700 group-hover:bg-emerald-900/20 transition-colors",children:i.jsx(ss,{className:"w-6 h-6 text-gray-500 group-hover:text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-white mb-1 group-hover:text-emerald-400 transition-colors",children:U.title}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 font-medium",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Bu,{className:"w-3 h-3"}),he(U.createdAt)]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Zn,{className:"w-3 h-3"}),U.teacherName]})]})]})]}),i.jsx(ra,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500 group-hover:-translate-x-1 transition-all"})]},U.id))})})]}),R=()=>M?i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100 pb-20",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("TOPICS"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("TOPICS"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:g==null?void 0:g.title}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white truncate",children:M.title})]})}),i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden mb-8",children:[i.jsxs("div",{className:"p-6 md:p-8",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6 text-sm text-gray-400 border-b border-gray-700 pb-4",children:[i.jsx("span",{className:"bg-gray-700 px-2 py-1 rounded font-bold",children:d==="English Major - QOU"?"":` ${d}`}),i.jsx(ra,{className:"w-4 h-4"}),i.jsx("span",{className:"bg-gray-700 px-2 py-1 rounded font-bold",children:g==null?void 0:g.title})]}),i.jsx("h1",{className:"text-2xl md:text-3xl font-black text-white mb-6 leading-relaxed",dir:"auto",children:M.title}),i.jsx("div",{className:"prose dark:prose-invert max-w-none text-gray-200 whitespace-pre-wrap leading-loose text-lg",dir:"auto",children:M.content})]}),i.jsxs("div",{className:"bg-gray-900/50 p-4 border-t border-gray-700 flex justify-between items-center text-sm text-gray-400",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Zn,{className:"w-4 h-4"}),i.jsxs("span",{children:[": ",i.jsx("span",{className:"font-bold",children:M.teacherName})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Bu,{className:"w-4 h-4"}),i.jsx("span",{children:he(M.createdAt)})]})]})]}),e&&i.jsx("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 text-center relative",children:G?i.jsxs("div",{className:"py-6",children:[i.jsx("div",{className:"w-12 h-12 bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-2 text-green-400 border border-green-900",children:i.jsx(da,{className:"w-6 h-6"})}),i.jsx("h3",{className:"text-white font-bold",children:" !"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"   ."})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3 text-white",children:[i.jsx(nm,{className:"w-5 h-5 text-blue-400"}),i.jsx("h3",{className:"font-bold text-lg",children:"    "})]}),i.jsx("p",{className:"text-gray-400 text-xs mb-4",children:"   10 ()"}),i.jsx("div",{className:"flex justify-center gap-1 mb-4 flex-wrap",children:[1,2,3,4,5,6,7,8,9,10].map(U=>i.jsx("button",{onClick:()=>me(U),className:`w-8 h-8 rounded-lg text-xs font-bold transition-all ${B===U?"bg-blue-500 text-white scale-110":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:U},U))}),i.jsx("textarea",{value:ce,onChange:U=>le(U.target.value),placeholder:"   ()...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl p-3 text-sm text-white outline-none focus:border-blue-500 mb-4 min-h-[80px] resize-none"}),i.jsxs("button",{onClick:de,disabled:_e||B===0,className:`w-full py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all ${B===0?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[_e?i.jsx(bt,{className:"w-4 h-4 animate-spin"}):i.jsx(ca,{className:"w-4 h-4"})," "]})]})})]})]}):null;return i.jsxs(i.Fragment,{children:[t==="INTRO"&&F(),t==="SUBJECTS"&&oe(),t==="GRADES"&&Y(),t==="CATEGORIES"&&re(),t==="TOPICS"&&ve(),t==="DETAILS"&&R()]})},v2=[{id:"grammar",title:" (Grammar)",icon:qu},{id:"reading",title:" (Reading)",icon:ns},{id:"vocabulary",title:" (Vocabulary)",icon:tm},{id:"writing",title:" (Writing)",icon:lx}],hO=[{id:"English",title:"  (English)",icon:tm}],fO=({onBack:r,onNavigate:e})=>{const{user:t}=nr(),[s,l]=V.useState(""),[c,d]=V.useState(""),[f,g]=V.useState(""),[x,v]=V.useState(""),[w,N]=V.useState(""),[C,M]=V.useState(!1),[Z,B]=V.useState(!1),[me,ce]=V.useState(""),[le,_e]=V.useState([]),[ge,G]=V.useState(!1),[S,j]=V.useState(!1),[A,O]=V.useState(null),[D,L]=V.useState(!1),I=async()=>{if(!s||!c||!f||!x||!w){alert("    ");return}M(!0);try{await er(mt(qe,"explanations"),{subject:s,grade:c,category:f,title:x,content:w,teacherName:(t==null?void 0:t.displayName)||"",teacherId:t==null?void 0:t.uid,createdAt:xs()}),B(!0),setTimeout(()=>{B(!1),v(""),N("")},2e3)}catch(re){console.error("Error saving explanation:",re),alert("   ")}finally{M(!1)}},de=async()=>{if(me.trim()&&t!=null&&t.uid){G(!0),j(!0),_e([]);try{const re=Vn(mt(qe,"explanations"),An("title",">=",me),An("title","<=",me+"")),ve=await Hn(re),R=[];ve.forEach(U=>{const z=U.data();z.teacherId===t.uid&&R.push({id:U.id,...z})}),_e(R)}catch(re){console.error("Error searching explanations:",re)}finally{G(!1)}}},he=async()=>{if(A){L(!0);try{await Pm(Fn(qe,"explanations",A)),_e(re=>re.filter(ve=>ve.id!==A)),O(null)}catch(re){console.error(re),alert("   ")}finally{L(!1)}}},F=()=>{r?r():e("HOME")},oe=re=>re?(re.toDate?re.toDate():new Date(re.seconds*1e3)).toLocaleDateString("ar-EG"):"",Y=re=>{const ve=v2.find(R=>R.id===re);return ve?ve.title:re};return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:F,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:F,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:"  "})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8 mb-12",children:[i.jsxs("h2",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(Hu,{className:"w-6 h-6 text-purple-500"}),"  "]}),Z?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[i.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:i.jsx(bn,{className:"w-10 h-10 text-green-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"      ."}),i.jsx("button",{onClick:()=>B(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"1.   "}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:hO.map(re=>i.jsxs("button",{onClick:()=>l(re.id),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all ${s===re.id?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:[i.jsx(re.icon,{className:"w-6 h-6"}),i.jsx("span",{children:re.title})]},re.id))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"2.   "}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[[5,6,7,8,9,10,11,12].map(re=>i.jsxs("button",{onClick:()=>d(re.toString()),className:`py-3 rounded-xl font-bold transition-all border-2 ${c===re.toString()?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:[" ",re]},re)),i.jsx("button",{onClick:()=>d("English Major - QOU"),className:`col-span-2 sm:col-span-4 py-3 rounded-xl font-bold transition-all border-2 ${c==="English Major - QOU"?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:"  "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"3.   ()"}),i.jsx("div",{className:"grid grid-cols-2 gap-4",children:v2.map(re=>i.jsxs("button",{onClick:()=>g(re.id),className:`flex items-center gap-3 p-4 rounded-xl border-2 transition-all text-right ${f===re.id?"bg-purple-900/20 border-purple-500 text-purple-300":"bg-gray-800 border-gray-700 text-gray-300 hover:border-purple-500/50"}`,children:[i.jsx("div",{className:`p-2 rounded-lg ${f===re.id?"bg-purple-800":"bg-gray-700"}`,children:i.jsx(re.icon,{className:"w-5 h-5"})}),i.jsx("span",{className:"font-bold",children:re.title})]},re.id))})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  / "}),i.jsx("input",{type:"text",value:x,onChange:re=>v(re.target.value),placeholder:":   Present Simple",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-purple-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("textarea",{value:w,onChange:re=>N(re.target.value),placeholder:"  ...",className:"w-full h-64 px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-purple-500 outline-none font-medium text-white bg-gray-800 transition-all resize-none leading-relaxed",dir:"auto"}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"          ."})]})]}),i.jsx("div",{className:"pt-4 border-t border-white/5 flex justify-end",children:i.jsxs("button",{onClick:I,disabled:C,className:"bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center gap-2 transform hover:-translate-y-1",children:[C?i.jsx(bt,{className:"w-5 h-5 animate-spin"}):i.jsx(mi,{className:"w-5 h-5"}),"  "]})})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:[i.jsxs("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(wi,{className:"w-6 h-6 text-red-500"}),"  ()"]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"    ...",value:me,onChange:re=>ce(re.target.value),onKeyDown:re=>re.key==="Enter"&&de(),className:"w-full px-5 py-3 pl-12 rounded-xl bg-gray-800 border border-gray-700 focus:border-red-500 outline-none text-white font-bold"}),i.jsx("button",{onClick:de,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-700 hover:bg-gray-600 p-2 rounded-lg text-gray-300 transition-colors",children:ge?i.jsx(bt,{className:"w-4 h-4 animate-spin"}):i.jsx(zs,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2 mr-1",children:"      .        ."})]}),le.length>0?i.jsx("div",{className:"space-y-3 animate-fade-in",children:le.map(re=>i.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl border border-gray-700 flex items-center justify-between group hover:border-red-500/50 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-900/20 flex items-center justify-center text-purple-400 shrink-0",children:i.jsx(ss,{className:"w-5 h-5"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("h4",{className:"font-bold text-white truncate mb-1",children:re.title}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:re.subject||"English"}),i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:Y(re.category)}),i.jsx("span",{children:re.grade==="English Major - QOU"?"":` ${re.grade}`}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Bu,{className:"w-3 h-3"})," ",oe(re.createdAt)]})]})]})]}),i.jsx("button",{onClick:()=>re.id&&O(re.id),className:"p-2 bg-red-900/20 text-red-400 rounded-lg hover:bg-red-600 hover:text-white transition-colors",title:" ",children:i.jsx(wi,{className:"w-4 h-4"})})]},re.id))}):S&&!ge&&i.jsxs("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:[i.jsx(Hu,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),i.jsx("p",{children:"      "})]})]})]}),A&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl p-8 max-w-sm w-full border border-gray-700 shadow-2xl text-center transform scale-100",children:[i.jsx("div",{className:"w-16 h-16 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-red-500/20",children:i.jsx(ux,{className:"w-8 h-8 text-red-500"})}),i.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 mb-8 text-sm",children:"            ."}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:he,disabled:D,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:D?i.jsx(bt,{className:"w-4 h-4 animate-spin"}):" "}),i.jsx("button",{onClick:()=>O(null),disabled:D,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-colors",children:""})]})]})})]})},mO=[{id:"handouts",title:" ",icon:ss,color:"text-blue-400",bg:"bg-blue-900/20"},{id:"worksheets",title:" ",icon:ko,color:"text-emerald-400",bg:"bg-emerald-900/20"},{id:"exams",title:"  ",icon:ns,color:"text-purple-400",bg:"bg-purple-900/20"}],gO=[{id:"English",title:"  (English)"},{id:"Math",title:""},{id:"Science",title:""}],pO=({onBack:r,onNavigate:e})=>{const{user:t}=nr(),[s,l]=V.useState(""),[c,d]=V.useState(""),[f,g]=V.useState(""),[x,v]=V.useState(""),[w,N]=V.useState(""),[C,M]=V.useState(!1),[Z,B]=V.useState(!1),[me,ce]=V.useState(""),[le,_e]=V.useState([]),[ge,G]=V.useState(!1),[S,j]=V.useState(!1),[A,O]=V.useState(null),[D,L]=V.useState(!1),I=async()=>{if(!s||!c||!f||!x||!w){alert("    ");return}if(!w.startsWith("http")){alert("        http  https");return}M(!0);try{await er(mt(qe,"study_materials"),{grade:s,subject:c,category:f,title:x,url:w,size:"Drive Link",teacherName:(t==null?void 0:t.displayName)||"",teacherId:t==null?void 0:t.uid,createdAt:xs()}),B(!0),setTimeout(()=>{B(!1),v(""),N("")},2e3)}catch(Y){console.error("Error saving file:",Y),alert("   ")}finally{M(!1)}},de=async()=>{if(me.trim()&&t!=null&&t.uid){G(!0),j(!0),_e([]);try{const Y=Vn(mt(qe,"study_materials"),An("title",">=",me),An("title","<=",me+"")),re=await Hn(Y),ve=[];re.forEach(R=>{const U=R.data();U.teacherId===t.uid&&ve.push({id:R.id,...U})}),_e(ve)}catch(Y){console.error("Error searching files:",Y)}finally{G(!1)}}},he=async()=>{if(A){L(!0);try{await Pm(Fn(qe,"study_materials",A)),_e(Y=>Y.filter(re=>re.id!==A)),O(null)}catch(Y){console.error(Y),alert("   ")}finally{L(!1)}}},F=()=>{r?r():e("PROFILE")},oe=Y=>Y?(Y.toDate?Y.toDate():new Date(Y.seconds*1e3)).toLocaleDateString("ar-EG"):"";return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:F,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:F,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:"  "})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8 mb-12",children:[i.jsxs("h2",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(T2,{className:"w-6 h-6 text-blue-500"}),"  "]}),Z?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[i.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:i.jsx(bn,{className:"w-10 h-10 text-green-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"       ."}),i.jsx("button",{onClick:()=>B(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[i.jsx(ha,{className:"w-4 h-4 text-blue-500"})," "]}),i.jsxs("select",{value:s,onChange:Y=>l(Y.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"",children:" "}),[5,6,7,8,9,10,11,12].map(Y=>i.jsxs("option",{value:Y.toString(),children:[" ",Y]},Y)),i.jsx("option",{value:"English Major - QOU",children:"  "})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[i.jsx(ns,{className:"w-4 h-4 text-blue-500"}),""]}),i.jsxs("select",{value:c,onChange:Y=>d(Y.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"",children:" "}),gO.map(Y=>i.jsx("option",{value:Y.id,children:Y.title},Y.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"  ()"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:mO.map(Y=>i.jsxs("button",{onClick:()=>g(Y.id),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all text-center h-full ${f===Y.id?"bg-blue-900/30 border-blue-500 text-blue-300 ring-1 ring-blue-500":"bg-gray-800 border-gray-700 text-gray-300 hover:border-blue-500/50"}`,children:[i.jsx("div",{className:`p-2 rounded-lg ${Y.bg}`,children:i.jsx(Y.icon,{className:`w-6 h-6 ${Y.color}`})}),i.jsx("span",{className:"font-bold text-sm",children:Y.title})]},Y.id))})]}),i.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("input",{type:"text",value:x,onChange:Y=>v(Y.target.value),placeholder:":    -  ",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[i.jsx(v5,{className:"w-4 h-4 text-blue-500"}),"  (Google Drive Link)"]}),i.jsx("input",{type:"url",value:w,onChange:Y=>N(Y.target.value),placeholder:"https://drive.google.com/file/d/...",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-medium text-blue-400 bg-gray-800 transition-all text-left",dir:"ltr"}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:'    " " (Anyone with the link)    .'})]})]}),i.jsx("div",{className:"pt-4 flex justify-end",children:i.jsxs("button",{onClick:I,disabled:C,className:"w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white px-10 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2 transform hover:-translate-y-1",children:[C?i.jsx(bt,{className:"w-5 h-5 animate-spin"}):i.jsx(mi,{className:"w-5 h-5"}),"  "]})})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:[i.jsxs("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(wi,{className:"w-6 h-6 text-red-500"}),"  ()"]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"    ...",value:me,onChange:Y=>ce(Y.target.value),onKeyDown:Y=>Y.key==="Enter"&&de(),className:"w-full px-5 py-3 pl-12 rounded-xl bg-gray-800 border border-gray-700 focus:border-red-500 outline-none text-white font-bold"}),i.jsx("button",{onClick:de,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-700 hover:bg-gray-600 p-2 rounded-lg text-gray-300 transition-colors",children:ge?i.jsx(bt,{className:"w-4 h-4 animate-spin"}):i.jsx(zs,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2 mr-1",children:"      .        ."})]}),le.length>0?i.jsx("div",{className:"space-y-3 animate-fade-in",children:le.map(Y=>i.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl border border-gray-700 flex items-center justify-between group hover:border-red-500/50 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-900/20 flex items-center justify-center text-blue-400 shrink-0",children:i.jsx(ss,{className:"w-5 h-5"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("h4",{className:"font-bold text-white truncate mb-1",children:Y.title}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:Y.subject}),i.jsx("span",{children:Y.grade==="English Major - QOU"?"":` ${Y.grade}`}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Bu,{className:"w-3 h-3"})," ",oe(Y.createdAt)]})]})]})]}),i.jsx("button",{onClick:()=>Y.id&&O(Y.id),className:"p-2 bg-red-900/20 text-red-400 rounded-lg hover:bg-red-600 hover:text-white transition-colors",title:" ",children:i.jsx(wi,{className:"w-4 h-4"})})]},Y.id))}):S&&!ge&&i.jsxs("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:[i.jsx(ss,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),i.jsx("p",{children:"      "})]})]})]}),A&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl p-8 max-w-sm w-full border border-gray-700 shadow-2xl text-center transform scale-100",children:[i.jsx("div",{className:"w-16 h-16 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-red-500/20",children:i.jsx(ux,{className:"w-8 h-8 text-red-500"})}),i.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 mb-8 text-sm",children:"            ."}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:he,disabled:D,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:D?i.jsx(bt,{className:"w-4 h-4 animate-spin"}):" "}),i.jsx("button",{onClick:()=>O(null),disabled:D,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-colors",children:""})]})]})})]})},fp=({title:r,subtitle:e,description:t,icon:s,secondaryIcon:l,buttonText:c,onClick:d,theme:f,direction:g,isLast:x=!1})=>{const w={emerald:{gradient:"from-emerald-500/20 to-teal-500/20",border:"border-emerald-500/20",text:"text-emerald-400",bgIcon:"bg-emerald-500/10",button:"bg-gradient-to-r from-emerald-600 to-teal-600 shadow-emerald-500/20",glow:"bg-emerald-500/30",divider:"from-transparent via-emerald-500 to-transparent"},violet:{gradient:"from-violet-500/20 to-purple-500/20",border:"border-violet-500/20",text:"text-violet-400",bgIcon:"bg-violet-500/10",button:"bg-gradient-to-r from-violet-600 to-purple-600 shadow-violet-500/20",glow:"bg-violet-500/30",divider:"from-transparent via-violet-500 to-transparent"},sky:{gradient:"from-sky-500/20 to-blue-500/20",border:"border-sky-500/20",text:"text-sky-400",bgIcon:"bg-sky-500/10",button:"bg-gradient-to-r from-sky-600 to-blue-600 shadow-sky-500/20",glow:"bg-sky-500/30",divider:"from-transparent via-sky-500 to-transparent"}}[f],N=g==="rtl"?"md:flex-row":"md:flex-row-reverse",C=g==="rtl"?"md:text-right":"md:text-left";return i.jsxs("div",{className:"relative py-16 md:py-28 overflow-hidden group",children:[i.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-12 relative z-10",children:i.jsxs("div",{className:`flex flex-col items-center gap-10 md:gap-20 ${N}`,children:[i.jsxs("div",{className:"w-full md:w-1/2 flex justify-center relative",children:[i.jsx("div",{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 md:w-96 md:h-96 rounded-full blur-[60px] md:blur-[100px] opacity-40 animate-pulse ${w.glow}`}),i.jsxs("div",{className:`relative w-72 h-72 md:w-full md:max-w-md md:aspect-square rounded-[2.5rem] md:rounded-[3rem] border ${w.border} bg-gray-900/60 backdrop-blur-xl shadow-2xl flex items-center justify-center overflow-hidden group-hover:scale-[1.02] transition-transform duration-700`,children:[i.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"}),i.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-6",children:[i.jsx("div",{className:`p-6 md:p-8 rounded-3xl ${w.bgIcon} border ${w.border} shadow-[0_0_50px_rgba(0,0,0,0.5)] backdrop-blur-sm transform rotate-3 group-hover:rotate-0 transition-all duration-500`,children:i.jsx(s,{className:`w-20 h-20 md:w-32 md:h-32 ${w.text} drop-shadow-lg`,strokeWidth:1.5})}),i.jsx("div",{className:`absolute -bottom-10 -right-10 md:-bottom-12 md:-right-12 p-4 md:p-5 rounded-2xl bg-gray-800/80 border ${w.border} shadow-xl backdrop-blur-md transform -rotate-6 group-hover:rotate-0 transition-all duration-700 delay-100`,children:i.jsx(l,{className:`w-8 h-8 md:w-10 md:h-10 ${w.text}`})})]})]})]}),i.jsxs("div",{className:`w-full md:w-1/2 text-center ${C} space-y-6 md:space-y-8`,children:[i.jsxs("div",{className:"space-y-3 md:space-y-4",children:[i.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 md:px-4 md:py-1.5 rounded-full bg-gray-900/50 border ${w.border} ${w.text} text-xs md:text-sm font-bold shadow-sm backdrop-blur-md`,children:[i.jsx(l,{className:"w-3.5 h-3.5 md:w-4 md:h-4"}),i.jsx("span",{children:e})]}),i.jsx("h2",{className:"text-3xl md:text-5xl lg:text-6xl font-black text-white leading-tight drop-shadow-xl",children:r})]}),i.jsx("p",{className:"text-base md:text-xl text-gray-300 leading-relaxed md:leading-loose font-medium opacity-90 max-w-xl mx-auto md:mx-0",children:t}),i.jsx("div",{className:"pt-2 md:pt-4",children:i.jsxs("button",{onClick:d,className:`w-full md:w-auto inline-flex justify-center items-center gap-3 ${w.button} text-white text-base md:text-lg font-bold px-8 py-4 rounded-2xl shadow-lg hover:shadow-2xl transition-all transform hover:-translate-y-1 active:scale-95 border-t border-white/10`,children:[c,i.jsx(qt,{className:`w-5 h-5 ${g==="rtl"?"rotate-180":""}`})]})})]})]})}),!x&&i.jsxs("div",{className:"absolute bottom-0 left-0 w-full flex justify-center items-center",children:[i.jsx("div",{className:`w-full h-px bg-gradient-to-r ${w.divider} opacity-30`}),i.jsx("div",{className:`absolute w-3/4 h-1 bg-gradient-to-r ${w.divider} blur-sm opacity-50`}),i.jsx("div",{className:"absolute w-1/2 h-0.5 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_20px_rgba(16,185,129,0.8)] opacity-80"})]})]})},xO=({onNavigate:r})=>i.jsxs("div",{className:"bg-gray-950 relative z-10",children:[i.jsx(fp,{theme:"emerald",direction:"rtl",title:" ..  ",subtitle:"  ",description:"       !              .           .",icon:N2,secondaryIcon:bn,buttonText:"  ",onClick:()=>r("QUIZZES")}),i.jsx(fp,{theme:"violet",direction:"ltr",title:"   ",subtitle:" ",description:"         .                     .",icon:Uu,secondaryIcon:U4,buttonText:" ",onClick:()=>r("LESSONS_EXPLANATIONS")}),i.jsx(fp,{theme:"sky",direction:"rtl",title:"  ",subtitle:"   ",description:"    .               .            .",icon:ko,secondaryIcon:X4,buttonText:" ",onClick:()=>r("LESSONS"),isLast:!0})]}),yO=()=>i.jsx("section",{className:"relative w-full overflow-hidden bg-gray-950",children:i.jsxs("div",{className:"w-full h-[650px] md:h-[900px] relative group",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/11PvY6sdTvurXqkNuWjoEpYTcM8FUHOB0",alt:".    -  ",className:"w-full h-full object-cover object-top transition-transform duration-1000 group-hover:scale-105"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-gray-900/40 to-transparent"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/90 via-transparent to-gray-950/90"})]}),i.jsx("div",{className:"absolute bottom-0 left-0 w-full p-8 md:p-24 flex flex-col items-center text-center z-20",children:i.jsxs("div",{className:"max-w-5xl mx-auto transform translate-y-0 transition-all duration-700",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-5xl md:text-8xl font-black text-white mb-6 drop-shadow-2xl tracking-tight",children:".   "}),i.jsx("div",{className:"h-2 w-40 bg-emerald-500 rounded-full mx-auto mb-8 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),i.jsx("p",{className:"text-2xl md:text-4xl text-emerald-400 font-bold drop-shadow-lg tracking-wide",children:"   "})]}),i.jsx("div",{className:"relative",children:i.jsx("p",{className:"text-gray-200 text-xl md:text-3xl leading-loose font-medium relative z-10 px-4 max-w-4xl mx-auto drop-shadow-md",children:"          .              ."})})]})})]})}),bO=({onLoginClick:r})=>i.jsxs("section",{className:"py-32 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950 via-emerald-950/40 to-gray-950"}),i.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"}),i.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-emerald-500/50 to-transparent"}),i.jsxs("div",{className:"max-w-5xl mx-auto px-6 relative z-10 text-center",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-sm font-bold mb-8 animate-pulse",children:[i.jsx(lA,{className:"w-4 h-4"}),i.jsx("span",{children:"  "})]}),i.jsxs("h2",{className:"text-5xl md:text-7xl font-black text-white mb-8 leading-tight tracking-tight drop-shadow-2xl",children:["  ",i.jsx("br",{}),i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400",children:" "})]}),i.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto mb-12 leading-relaxed font-medium",children:"      .         ."}),i.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:i.jsxs("button",{onClick:r,className:"w-full sm:w-auto bg-white text-emerald-950 px-10 py-5 rounded-2xl font-black text-xl hover:bg-emerald-50 transition-all shadow-[0_0_40px_rgba(255,255,255,0.2)] hover:shadow-[0_0_60px_rgba(16,185,129,0.4)] transform hover:-translate-y-1 flex items-center justify-center gap-3",children:["  ",i.jsx(qt,{className:"w-6 h-6"})]})})]})]}),vO=()=>i.jsxs("section",{className:"relative w-full min-h-[800px] flex items-center bg-gray-950 overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1ZcMqKedYcXUq7RPYqUGCRr2RsEA6F6JN",alt:"  ",className:"w-full h-full object-cover object-center opacity-30"}),i.jsx("div",{className:"absolute top-0 left-0 w-full h-64 bg-gradient-to-b from-gray-950 via-gray-950/80 to-transparent"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-full h-64 bg-gradient-to-t from-gray-950 via-gray-950/80 to-transparent"}),i.jsx("div",{className:"absolute inset-0 bg-gray-950/50"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/80 via-transparent to-gray-950/80"})]}),i.jsx("div",{className:"relative z-10 w-full py-24 px-6 md:px-12 flex flex-col justify-center h-full",children:i.jsxs("div",{className:"max-w-4xl mx-auto text-center transform translate-y-0 transition-all duration-700 animate-fade-in-up",children:[i.jsx("h2",{className:"text-4xl md:text-7xl font-black text-white mb-8 drop-shadow-2xl tracking-tight",children:" "}),i.jsx("div",{className:"h-1.5 w-32 bg-emerald-500 rounded-full mx-auto mb-12 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),i.jsxs("div",{className:"space-y-8 text-gray-100 font-medium leading-relaxed drop-shadow-lg",children:[i.jsx("p",{className:"text-2xl md:text-4xl font-black text-emerald-400 mb-6",children:" :   "}),i.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"            .                    ."}),i.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                         .        ."}),i.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                                      ."})]})]})})]}),Sy=()=>{const r=V.useRef(null);return V.useEffect(()=>{const e=r.current;if(!e)return;const t=e.getContext("2d");if(!t)return;let s,l=window.innerWidth,c=window.innerHeight;const d=l<768?75:200,f=.1,g=["255, 255, 255","50, 150, 255","255, 80, 80","80, 255, 120","255, 215, 0"];e.width=l,e.height=c;const x=[];for(let N=0;N<d;N++)x.push({x:Math.random()*l,y:Math.random()*c,z:Math.random()*l,size:Math.random()*2,color:g[Math.floor(Math.random()*g.length)],alpha:Math.random()});const v=()=>{l=window.innerWidth,c=window.innerHeight,e.width=l,e.height=c};window.addEventListener("resize",v);const w=()=>{t.clearRect(0,0,l,c),x.forEach(N=>{Math.random()>.99&&(N.alpha=Math.random()),N.y-=f*(N.size*.5),N.y<0&&(N.y=c,N.x=Math.random()*l),t.beginPath(),t.fillStyle=`rgba(${N.color}, ${N.alpha})`,t.arc(N.x,N.y,N.size,0,Math.PI*2),t.fill()}),s=requestAnimationFrame(w)};return w(),()=>{window.removeEventListener("resize",v),cancelAnimationFrame(s)}},[]),i.jsx("canvas",{ref:r,className:"fixed inset-0 pointer-events-none z-0",style:{opacity:1}})},wO=({onBack:r})=>{const e=[{icon:N2,title:" ",desc:"              ."},{icon:aA,title:" 24/7",desc:"                 ."},{icon:am,title:"  (XP)",desc:"  !    (XP)         ."},{icon:ss,title:" ",desc:"           ."}];return i.jsxs("div",{className:"min-h-screen bg-gray-950 relative overflow-hidden text-gray-100",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx(Sy,{}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/90 via-gray-900/60 to-gray-950 pointer-events-none"}),i.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-20"})]}),i.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[i.jsx("div",{className:"border-b border-white/10 py-6 px-4 sticky top-0 z-30 backdrop-blur-md bg-gray-950/30",children:i.jsxs("div",{className:"max-w-3xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-12 pb-20",children:[i.jsxs("div",{className:"text-center mb-16 animate-fade-in-up",children:[i.jsxs("div",{className:"inline-flex items-center justify-center p-5 bg-emerald-500/10 backdrop-blur-xl rounded-full mb-8 border border-emerald-500/30 shadow-[0_0_40px_rgba(16,185,129,0.3)] relative group",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 rounded-full blur-xl group-hover:blur-2xl transition-all"}),i.jsx(vl,{className:"w-12 h-12 text-emerald-400 fill-emerald-400 animate-pulse relative z-10"})]}),i.jsxs("h1",{className:"text-5xl md:text-6xl font-black text-white mb-6 leading-tight drop-shadow-2xl",children:["   ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-300",children:""}),""]}),i.jsx("p",{className:"text-xl text-gray-200 leading-relaxed max-w-2xl mx-auto font-medium drop-shadow-md",children:"                     ."})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 shadow-2xl border border-white/10 mb-16 relative overflow-hidden group hover:bg-white/10 transition-all duration-500",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-600/20 rounded-full blur-[80px] -mr-16 -mt-16 pointer-events-none"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-purple-600/20 rounded-full blur-[80px] -ml-16 -mb-16 pointer-events-none"}),i.jsxs("h2",{className:"text-3xl font-black text-white mb-8 flex items-center gap-3 relative z-10",children:[i.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl border border-blue-500/30",children:i.jsx(cx,{className:"w-8 h-8 text-blue-400"})})," "]}),i.jsxs("div",{className:"space-y-6 text-gray-200 font-medium leading-loose text-lg relative z-10",children:[i.jsx("p",{children:'  ""         .                    .'}),i.jsxs("p",{children:["       ",i.jsx("span",{className:"text-white font-bold border-b-2 border-emerald-500 shadow-[0_4px_20px_-5px_rgba(16,185,129,0.5)]",children:"  "}),".                ."]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-16",children:e.map((t,s)=>i.jsxs("div",{className:"bg-gray-900/40 backdrop-blur-md p-6 rounded-3xl border border-white/10 flex flex-col gap-4 hover:border-emerald-500/40 hover:bg-gray-900/60 transition-all group hover:-translate-y-2 shadow-lg",children:[i.jsx("div",{className:"bg-gray-800/50 p-4 rounded-2xl w-fit group-hover:bg-emerald-900/30 transition-colors border border-white/5 group-hover:border-emerald-500/20",children:i.jsx(t.icon,{className:"w-8 h-8 text-gray-300 group-hover:text-emerald-400 transition-colors"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-emerald-300 transition-colors",children:t.title}),i.jsx("p",{className:"text-gray-400 text-sm leading-relaxed group-hover:text-gray-300",children:t.desc})]})]},s))}),i.jsxs("div",{className:"bg-gradient-to-br from-emerald-900/40 to-gray-900/40 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 border border-emerald-500/20 text-center shadow-2xl relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"}),i.jsx("h2",{className:"text-3xl font-black text-white mb-8 relative z-10",children:"  "}),i.jsxs("div",{className:"flex flex-col gap-4 relative z-10",children:[i.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[i.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:i.jsx(bn,{className:"w-6 h-6 text-emerald-400"})}),i.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"      ."})]}),i.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[i.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:i.jsx(bn,{className:"w-6 h-6 text-emerald-400"})}),i.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:" ."})]}),i.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[i.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:i.jsx(bn,{className:"w-6 h-6 text-emerald-400"})}),i.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"       ."})]})]})]}),i.jsx("div",{className:"mt-16 text-center",children:i.jsxs("p",{className:"text-gray-400 text-sm font-medium bg-gray-900/50 inline-block px-6 py-3 rounded-full border border-white/5 backdrop-blur-sm",children:["  ",i.jsx("span",{className:"text-emerald-400 font-black",children:"   "})]})})]})]})]})},_O=({onNavigate:r})=>i.jsxs("div",{className:"relative w-full py-20 overflow-hidden bg-gray-950 border-t border-white/5 border-b border-white/5",children:[i.jsx("div",{className:"absolute inset-0 z-0 opacity-100",children:i.jsx(Sy,{})}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950 via-transparent to-gray-950 z-0 pointer-events-none"}),i.jsxs("div",{className:"relative z-10 max-w-5xl mx-auto px-6 text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white/5 rounded-full mb-6 shadow-[0_0_30px_rgba(255,255,255,0.1)] border border-white/10 animate-pulse",children:i.jsx(vl,{className:"w-8 h-8 text-emerald-400 fill-emerald-400"})}),i.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-white mb-6 drop-shadow-2xl leading-tight",children:["   ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300",children:""}),""]}),i.jsx("p",{className:"text-gray-300 text-xl md:text-2xl max-w-3xl mx-auto mb-10 leading-relaxed font-medium drop-shadow-md",children:"                ."}),i.jsxs("button",{onClick:r,className:"inline-flex items-center gap-3 bg-emerald-600 hover:bg-emerald-500 text-white text-lg font-bold px-10 py-4 rounded-2xl shadow-lg hover:shadow-[0_0_25px_rgba(16,185,129,0.5)] transition-all transform hover:-translate-y-1 border-b-4 border-emerald-800 hover:border-emerald-700 active:border-b-0 active:translate-y-1",children:[i.jsx("span",{children:" "}),i.jsx(qt,{className:"w-5 h-5"})]})]})]}),NO=({onBack:r,onNavigate:e})=>{const{user:t}=nr(),[s,l]=V.useState("INBOX"),[c,d]=V.useState([]),[f,g]=V.useState(""),[x,v]=V.useState(""),[w,N]=V.useState(""),[C,M]=V.useState(!1),[Z,B]=V.useState(!1),[me,ce]=V.useState(""),[le,_e]=V.useState([]),[ge,G]=V.useState(!1);V.useEffect(()=>{s==="COMPOSE"?S():j()},[s,t]);const S=async()=>{B(!0);try{const de=Vn(mt(qe,"users"),An("role","==","student")),F=(await Hn(de)).docs.map(oe=>({id:oe.id,...oe.data()}));d(F)}catch(de){console.error("Error fetching students",de)}finally{B(!1)}},j=async(de=!1)=>{if(!t)return;const he=`etqan_inbox_${t.uid}`,F=1440*60*1e3,oe=Date.now();if(!de){const Y=localStorage.getItem(he);if(Y)try{const{data:re,timestamp:ve}=JSON.parse(Y);if(oe-ve<F){_e(re);return}}catch(re){console.error(re)}}G(!0);try{const Y=Vn(mt(qe,"contact_messages"),An("teacherId","==",t.uid)),ve=(await Hn(Y)).docs.map(R=>({id:R.id,...R.data(),createdAt:R.data().createdAt?{seconds:R.data().createdAt.seconds}:null}));ve.sort((R,U)=>{var xe,Se;const z=((xe=R.createdAt)==null?void 0:xe.seconds)||0;return(((Se=U.createdAt)==null?void 0:Se.seconds)||0)-z}),_e(ve),localStorage.setItem(he,JSON.stringify({timestamp:oe,data:ve}))}catch(Y){console.error("Error fetching inbox",Y)}finally{G(!1)}},A=async()=>{if(!x||!w){alert("    ");return}if(!f){alert("  ");return}M(!0);try{await er(mt(qe,"notifications"),{recipientId:f,title:x,message:w,type:"message",senderName:(t==null?void 0:t.displayName)||"",senderId:t==null?void 0:t.uid,createdAt:xs(),read:!1}),alert("   !"),v(""),N(""),g(""),ce("")}catch(de){console.error("Error sending message",de),alert("   ")}finally{M(!1)}},O=async de=>{if(window.confirm("      "))try{await Pm(Fn(qe,"contact_messages",de));const he=le.filter(Y=>Y.id!==de);_e(he);const F=`etqan_inbox_${t==null?void 0:t.uid}`,oe=localStorage.getItem(F);if(oe){const Y=JSON.parse(oe);Y.data=he,localStorage.setItem(F,JSON.stringify(Y))}}catch(he){console.error(he)}},D=async de=>{try{await Ed(Fn(qe,"contact_messages",de),{read:!0});const he=le.map(Y=>Y.id===de?{...Y,read:!0}:Y);_e(he);const F=`etqan_inbox_${t==null?void 0:t.uid}`,oe=localStorage.getItem(F);if(oe){const Y=JSON.parse(oe);Y.data=he,localStorage.setItem(F,JSON.stringify(Y))}}catch(he){console.error(he)}},L=c.filter(de=>{const he=de.displayName?de.displayName.toLowerCase():"",F=de.email?de.email.toLowerCase():"",oe=me.toLowerCase();return he.includes(oe)||F.includes(oe)}),I=de=>de?(de.toDate?de.toDate():new Date(de.seconds*1e3)).toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(",",""):"";return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-5xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>e("PROFILE"),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>e("PROFILE"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:""})]})}),i.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-xl border border-gray-700 overflow-hidden min-h-[600px] flex flex-col md:flex-row",children:[i.jsxs("div",{className:"w-full md:w-64 bg-gray-800/50 border-l border-gray-700 p-4 flex flex-col gap-2",children:[i.jsxs("button",{onClick:()=>l("INBOX"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${s==="INBOX"?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:[i.jsx(Tr,{className:"w-5 h-5"})," ",le.some(de=>!de.read)&&i.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"})]}),i.jsxs("button",{onClick:()=>l("COMPOSE"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${s==="COMPOSE"?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:[i.jsx(ca,{className:"w-5 h-5"})," "]})]}),i.jsx("div",{className:"flex-1 p-6 md:p-8 overflow-y-auto",children:s==="COMPOSE"?i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("h2",{className:"text-2xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(ca,{className:"w-6 h-6 text-emerald-400"}),"  "]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:":"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"flex gap-4",children:i.jsxs("label",{className:`flex items-center gap-2 cursor-pointer bg-gray-800 px-4 py-3 rounded-xl border transition-colors flex-1 ${f==="all"?"border-emerald-500 bg-emerald-900/20":"border-gray-700 hover:border-emerald-500"}`,children:[i.jsx("input",{type:"radio",name:"recipient",checked:f==="all",onChange:()=>g("all"),className:"w-4 h-4 accent-emerald-500"}),i.jsx("span",{className:"font-bold text-sm text-white",children:" "}),i.jsx(rm,{className:"w-4 h-4 text-emerald-400 mr-auto"})]})}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:i.jsx(zs,{className:"h-4 w-4 text-gray-500"})}),i.jsx("input",{type:"text",placeholder:"    ...",value:me,onChange:de=>{ce(de.target.value),f==="all"&&g("")},className:"block w-full pr-10 pl-3 py-3 border border-gray-700 rounded-xl leading-5 bg-gray-800 text-gray-300 placeholder-gray-500 focus:outline-none focus:bg-gray-900 focus:border-emerald-500 transition duration-150 ease-in-out sm:text-sm font-bold"})]}),me&&i.jsx("div",{className:"max-h-40 overflow-y-auto bg-gray-800 border border-gray-700 rounded-xl custom-scrollbar",children:L.map(de=>i.jsxs("div",{onClick:()=>{g(de.id),ce(de.displayName)},className:`p-3 cursor-pointer flex items-center gap-3 hover:bg-gray-700 transition-colors ${f===de.id?"bg-emerald-900/20":""}`,children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center",children:de.avatar?i.jsx("img",{src:de.avatar,className:"w-full h-full rounded-full object-cover"}):i.jsx(Zn,{className:"w-4 h-4"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-bold text-white",children:de.displayName}),i.jsx("div",{className:"text-xs text-gray-400",children:de.email})]}),f===de.id&&i.jsx(bn,{className:"w-4 h-4 text-emerald-500 mr-auto"})]},de.id))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:" "}),i.jsx("input",{type:"text",value:x,onChange:de=>v(de.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-700 bg-gray-800 text-white focus:border-emerald-500 outline-none font-bold",placeholder:":    "})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:" "}),i.jsx("textarea",{value:w,onChange:de=>N(de.target.value),className:"w-full h-32 px-4 py-3 rounded-xl border border-gray-700 bg-gray-800 text-white focus:border-emerald-500 outline-none resize-none leading-relaxed",placeholder:"  ..."})]}),i.jsxs("button",{onClick:A,disabled:C,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2",children:[C?i.jsx(bt,{className:"w-5 h-5 animate-spin"}):i.jsx(ca,{className:"w-5 h-5"})," "]})]})]}):i.jsxs("div",{className:"h-full flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-2",children:[i.jsx(Tr,{className:"w-6 h-6 text-emerald-400"})," "]}),i.jsx("button",{onClick:()=>j(!0),className:"p-2 hover:bg-gray-800 rounded-full transition-colors",title:" ( )",children:i.jsx(sm,{className:"w-5 h-5 text-gray-400"})})]}),ge?i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsx(bt,{className:"w-8 h-8 animate-spin text-emerald-500"})}):le.length===0?i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-500",children:[i.jsx(Tr,{className:"w-16 h-16 mb-4 opacity-20"}),i.jsx("p",{children:"   "})]}):i.jsx("div",{className:"space-y-4 flex-1 overflow-y-auto custom-scrollbar pr-2",children:le.map(de=>i.jsxs("div",{className:`bg-gray-800 p-5 rounded-2xl border transition-all hover:border-emerald-500/30 relative overflow-hidden ${de.read?"border-gray-700":"border-emerald-500/50 bg-emerald-900/5"}`,children:[i.jsxs("div",{className:"flex flex-row items-start gap-4 relative z-10",children:[i.jsx("div",{className:`w-10 h-10 rounded-full shrink-0 flex items-center justify-center text-base font-bold shadow-md border-2 ${de.read?"bg-gray-700 border-gray-600 text-gray-400":"bg-emerald-600 border-emerald-500 text-white"}`,children:de.studentName?de.studentName.charAt(0).toUpperCase():i.jsx(Zn,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("div",{children:[i.jsx("h4",{className:`font-bold text-base leading-tight ${de.read?"text-gray-300":"text-white"}`,children:de.studentName||""}),i.jsx("p",{className:"text-xs text-gray-500 font-mono mt-0.5",children:de.studentEmail})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-gray-900/50 px-3 py-1 rounded-full border border-gray-700/50",children:[i.jsx(ax,{className:"w-3 h-3 text-gray-500"}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 dir-ltr",children:I(de.createdAt)})]})]}),i.jsx("div",{className:"p-3 bg-gray-900/50 rounded-xl border border-gray-700/30 text-sm text-gray-300 leading-relaxed whitespace-pre-wrap",children:de.message}),i.jsxs("div",{className:"flex justify-end gap-3 mt-3",children:[!de.read&&i.jsxs("button",{onClick:()=>D(de.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20 text-xs font-bold transition-colors",children:[i.jsx(bn,{className:"w-3.5 h-3.5"})," "]}),i.jsxs("button",{onClick:()=>O(de.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-red-500/10 text-red-400 hover:bg-red-500/20 text-xs font-bold transition-colors",children:[i.jsx(wi,{className:"w-3.5 h-3.5"}),""]})]})]}),i.jsx("div",{className:"flex flex-col items-center justify-center gap-1 self-center opacity-30",children:i.jsx("div",{className:"w-8 h-10 border-2 border-gray-500 rounded-lg flex items-center justify-center",children:i.jsx(Tr,{className:"w-4 h-4 text-gray-500"})})})]}),!de.read&&i.jsx("div",{className:"absolute top-0 right-0 w-1.5 h-full bg-emerald-500"})]},de.id))})]})})]})})]})},EO=({onBack:r,onNavigate:e})=>{const[t,s]=V.useState([]),[l,c]=V.useState(!0),[d,f]=V.useState("ALL");V.useEffect(()=>{g()},[]);const g=async()=>{c(!0);try{const N=Vn(mt(qe,"reviews"),_d("createdAt","desc")),M=(await Hn(N)).docs.map(Z=>({id:Z.id,...Z.data()}));s(M)}catch(N){console.error("Error fetching reviews:",N)}finally{c(!1)}},x=t.filter(N=>d==="ALL"?!0:d==="QUIZ"?N.type==="quiz":d==="EXPLANATION"?N.type==="explanation":!0),v=N=>N?(N.toDate?N.toDate():new Date(N.seconds*1e3)).toLocaleDateString("ar-EG"):"",w=t.length>0?(t.reduce((N,C)=>N+C.rating,0)/t.length).toFixed(1):"0.0";return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-5xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>e("PROFILE"),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>e("PROFILE"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-xl border border-gray-700 p-8 mb-8 flex flex-col md:flex-row items-center justify-between gap-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-yellow-900/20 rounded-2xl flex items-center justify-center border border-yellow-500/20 text-yellow-400",children:i.jsx(vl,{className:"w-8 h-8 fill-yellow-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-black text-white",children:w}),i.jsx("p",{className:"text-gray-400 text-sm font-bold",children:"  "})]})]}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"text-center px-6 py-3 bg-gray-800 rounded-xl border border-gray-700",children:[i.jsx("span",{className:"block text-2xl font-bold text-white",children:t.length}),i.jsx("span",{className:"text-xs text-gray-400",children:" "})]})})]}),i.jsxs("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[i.jsx("button",{onClick:()=>f("ALL"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="ALL"?"bg-white text-gray-900":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:""}),i.jsx("button",{onClick:()=>f("QUIZ"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="QUIZ"?"bg-blue-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:" "}),i.jsx("button",{onClick:()=>f("EXPLANATION"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="EXPLANATION"?"bg-purple-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:" "})]}),i.jsx("div",{className:"bg-gray-900 rounded-3xl border border-gray-700 min-h-[400px] p-6 relative",children:l?i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(bt,{className:"w-10 h-10 animate-spin text-emerald-500"})}):x.length===0?i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-500",children:[i.jsx(nm,{className:"w-16 h-16 mb-4 opacity-20"}),i.jsx("p",{className:"text-lg font-bold",children:"     "})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(N=>i.jsxs("div",{className:"bg-gray-800 p-5 rounded-2xl border border-gray-700 hover:border-gray-600 transition-all",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-bold text-white text-lg flex items-center gap-2",children:[N.studentName,i.jsx("span",{className:"text-xs font-normal text-gray-500 bg-gray-900 px-2 py-0.5 rounded-md border border-gray-700",children:v(N.createdAt)})]}),i.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[[...Array(5)].map((C,M)=>i.jsx(vl,{className:`w-3 h-3 ${M<Math.round(N.rating/2)?"text-yellow-400 fill-yellow-400":"text-gray-600"}`},M)),i.jsxs("span",{className:"text-xs text-yellow-500 font-bold mr-1",children:["(",N.rating,"/10)"]})]})]}),i.jsx("span",{className:`px-2 py-1 rounded-lg text-[10px] font-bold ${N.type==="quiz"?"bg-blue-900/30 text-blue-300 border border-blue-900":"bg-purple-900/30 text-purple-300 border border-purple-900"}`,children:N.type==="quiz"?"":""})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:" :"}),i.jsx("p",{className:"text-emerald-400 font-bold text-sm line-clamp-1",children:N.targetTitle})]}),N.comment?i.jsx("div",{className:"bg-gray-900/50 p-3 rounded-xl border border-gray-700/50",children:i.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:['"',N.comment,'"']})}):i.jsx("p",{className:"text-gray-600 text-xs italic",children:"   "})]},N.id))})})]})]})};function TO(){const[r,e]=V.useState("HOME"),[t,s]=V.useState(!1),[l,c]=V.useState(!1),d=V.useRef({}),f=V.useRef(!1),{logout:g}=nr();V.useEffect(()=>{"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.scrollTo(0,0),window.history.replaceState({view:"HOME"},"","");const w=N=>{N.state&&N.state.view?(f.current=!0,e(N.state.view)):(f.current=!0,e("HOME"))};return window.addEventListener("popstate",w),()=>window.removeEventListener("popstate",w)},[]),V.useEffect(()=>{if(f.current){const w=d.current[r]||0;setTimeout(()=>window.scrollTo(0,w),10)}else window.scrollTo(0,0)},[r]);const x=(w,N=!1)=>{if(w===r){w==="HOME"&&window.scrollTo({top:0,behavior:"smooth"});return}d.current[r]=window.scrollY,f.current=N,window.history.pushState({view:w},"",""),e(w)},v=async()=>{c(!0),setTimeout(async()=>{await g(),c(!1),x("HOME")},1e3)};return i.jsxs("div",{className:"min-h-screen flex flex-col relative transition-colors duration-500 bg-gray-950 text-gray-100 selection:bg-emerald-500/30",children:[r==="HOME"&&i.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden bg-gray-950",children:[i.jsx(Sy,{}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/20 via-transparent to-gray-950/40"}),i.jsx("div",{className:"absolute inset-0 opacity-[0.03] bg-[url('https://www.transparenttextures.com/patterns/noise.png')]"})]}),l&&i.jsx("div",{className:"fixed inset-0 z-[200] bg-emerald-900/90 backdrop-blur-sm flex items-center justify-center animate-fade-in",children:i.jsx("div",{className:"text-white text-2xl font-bold animate-bounce",children:"  ..."})}),i.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[i.jsx(UD,{onLoginClick:()=>s(!0),onNavigate:w=>x(w),onLogoutClick:v}),i.jsxs("main",{className:`flex-grow ${r!=="HOME"?"pt-24":""}`,children:[r==="HOME"&&i.jsxs(i.Fragment,{children:[i.jsx(BD,{onStartQuiz:()=>x("QUIZZES"),onLoginClick:()=>s(!0),onNavigate:w=>x(w)}),i.jsx(FD,{onNavigate:w=>x(w)}),i.jsx(iO,{onLoginClick:()=>s(!0)}),i.jsx(lO,{}),i.jsx(_O,{onNavigate:()=>x("PLATFORM_DEFINITION")}),i.jsxs("div",{className:"relative w-full h-px bg-gray-800/50 my-0 overflow-visible z-20",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-emerald-500 to-transparent h-[1px] opacity-60"}),i.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-1/2 h-[3px] bg-gradient-to-r from-transparent via-emerald-400 to-transparent blur-[2px] opacity-80"})]}),i.jsx(yO,{}),i.jsx(bO,{onLoginClick:()=>s(!0)}),i.jsx("div",{className:"w-full h-1 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_35px_rgba(16,185,129,1)] relative z-20 opacity-100"}),i.jsx(vO,{}),i.jsx("div",{className:"w-full h-0.5 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_30px_rgba(16,185,129,1)] relative z-20 opacity-80"}),i.jsx(xO,{onNavigate:w=>x(w)})]}),r==="ABOUT_PLATFORM"&&i.jsx(eO,{onBack:()=>x("HOME",!0)}),r==="PLATFORM_DEFINITION"&&i.jsx(wO,{onBack:()=>x("HOME",!0)}),r==="TEACHER_CV"&&i.jsx(ZD,{onBack:()=>x("HOME",!0)}),r==="PROFILE"&&i.jsx(QD,{onNavigate:w=>x(w)}),r==="TEACHER_DASHBOARD"&&i.jsx(GD,{}),r==="QUESTION_BANK"&&i.jsx(oO,{onBack:()=>x("HOME",!0)}),r==="TEACHER_EXPLANATIONS"&&i.jsx(fO,{onNavigate:w=>x(w),onBack:()=>x("PROFILE",!0)}),r==="TEACHER_UPLOAD_FILES"&&i.jsx(pO,{onNavigate:w=>x(w),onBack:()=>x("PROFILE",!0)}),r==="QUIZZES"&&i.jsx(YD,{onBack:()=>x("HOME",!0)}),r==="LESSONS"&&i.jsx(tO,{onBack:()=>x("HOME",!0)}),r==="LESSONS_EXPLANATIONS"&&i.jsx(dO,{onBack:()=>x("HOME",!0)}),r==="CONTACT_TEACHER"&&i.jsx(aO,{onBack:()=>x("HOME",!0)}),r==="TEACHER_CORRESPONDENCE"&&i.jsx(NO,{onNavigate:w=>x(w)}),r==="TEACHER_REVIEWS"&&i.jsx(EO,{onNavigate:w=>x(w)})]}),i.jsx(HD,{isOpen:t,onClose:()=>s(!1)}),i.jsx("footer",{className:"bg-gray-950 border-t border-white/5 py-12 relative z-20",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 bg-white/5 rounded-full flex items-center justify-center border border-white/10",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/13x8Gorb7y4H2qcQ1LVJtHY9-RoUhxg2z",alt:"Logo",className:"w-6 h-6 rounded-full"})}),i.jsx("span",{className:"text-xl font-black text-white",children:" "})]}),i.jsxs("p",{className:"text-gray-500 text-sm",children:[" ",new Date().getFullYear(),"   .     ."]})]})})]})]})}class SO extends rx.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){return this.state.hasError?i.jsx(SS,{}):this.props.children}}const AS=document.getElementById("root");if(!AS)throw new Error("Could not find root element to mount to");const jO=g4.createRoot(AS);jO.render(i.jsx(rx.StrictMode,{children:i.jsx(SO,{children:i.jsx(zD,{children:i.jsx(TO,{})})})}));
