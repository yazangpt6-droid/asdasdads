(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=t(l);fetch(l.href,c)}})();function _2(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Mg={exports:{}},gu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K1;function i4(){if(K1)return gu;K1=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var f in l)f!=="key"&&(c[f]=l[f])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return gu.Fragment=e,gu.jsx=t,gu.jsxs=t,gu}var Q1;function l4(){return Q1||(Q1=1,Mg.exports=i4()),Mg.exports}var i=l4(),Og={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X1;function o4(){if(X1)return qe;X1=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),N=Symbol.iterator;function C(R){return R===null||typeof R!="object"?null:(R=N&&R[N]||R["@@iterator"],typeof R=="function"?R:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,$={};function me(R,z,U){this.props=R,this.context=z,this.refs=$,this.updater=U||V}me.prototype.isReactComponent={},me.prototype.setState=function(R,z){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,z,"setState")},me.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function de(){}de.prototype=me.prototype;function ue(R,z,U){this.props=R,this.context=z,this.refs=$,this.updater=U||V}var ve=ue.prototype=new de;ve.constructor=ue,Z(ve,me.prototype),ve.isPureReactComponent=!0;var ge=Array.isArray;function F(){}var T={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function A(R,z,U){var ee=U.ref;return{$$typeof:r,type:R,key:z,ref:ee!==void 0?ee:null,props:U}}function O(R,z){return A(R.type,z,R.props)}function M(R){return typeof R=="object"&&R!==null&&R.$$typeof===r}function k(R){var z={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(U){return z[U]})}var I=/\/+/g;function ce(R,z){return typeof R=="object"&&R!==null&&R.key!=null?k(""+R.key):z.toString(36)}function oe(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(F,F):(R.status="pending",R.then(function(z){R.status==="pending"&&(R.status="fulfilled",R.value=z)},function(z){R.status==="pending"&&(R.status="rejected",R.reason=z)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function B(R,z,U,ee,we){var Me=typeof R;(Me==="undefined"||Me==="boolean")&&(R=null);var Ue=!1;if(R===null)Ue=!0;else switch(Me){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(R.$$typeof){case r:case e:Ue=!0;break;case w:return Ue=R._init,B(Ue(R._payload),z,U,ee,we)}}if(Ue)return we=we(R),Ue=ee===""?"."+ce(R,0):ee,ge(we)?(U="",Ue!=null&&(U=Ue.replace(I,"$&/")+"/"),B(we,z,U,"",function(Nt){return Nt})):we!=null&&(M(we)&&(we=O(we,U+(we.key==null||R&&R.key===we.key?"":(""+we.key).replace(I,"$&/")+"/")+Ue)),z.push(we)),1;Ue=0;var it=ee===""?".":ee+":";if(ge(R))for(var Re=0;Re<R.length;Re++)ee=R[Re],Me=it+ce(ee,Re),Ue+=B(ee,z,U,Me,we);else if(Re=C(R),typeof Re=="function")for(R=Re.call(R),Re=0;!(ee=R.next()).done;)ee=ee.value,Me=it+ce(ee,Re++),Ue+=B(ee,z,U,Me,we);else if(Me==="object"){if(typeof R.then=="function")return B(oe(R),z,U,ee,we);throw z=String(R),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function ie(R,z,U){if(R==null)return R;var ee=[],we=0;return B(R,ee,"","",function(Me){return z.call(U,Me,we++)}),ee}function Y(R){if(R._status===-1){var z=R._result;z=z(),z.then(function(U){(R._status===0||R._status===-1)&&(R._status=1,R._result=U)},function(U){(R._status===0||R._status===-1)&&(R._status=2,R._result=U)}),R._status===-1&&(R._status=0,R._result=z)}if(R._status===1)return R._result.default;throw R._result}var se=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},Ee={map:ie,forEach:function(R,z,U){ie(R,function(){z.apply(this,arguments)},U)},count:function(R){var z=0;return ie(R,function(){z++}),z},toArray:function(R){return ie(R,function(z){return z})||[]},only:function(R){if(!M(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return qe.Activity=v,qe.Children=Ee,qe.Component=me,qe.Fragment=t,qe.Profiler=l,qe.PureComponent=ue,qe.StrictMode=s,qe.Suspense=g,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,qe.__COMPILER_RUNTIME={__proto__:null,c:function(R){return T.H.useMemoCache(R)}},qe.cache=function(R){return function(){return R.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function(R,z,U){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var ee=Z({},R.props),we=R.key;if(z!=null)for(Me in z.key!==void 0&&(we=""+z.key),z)!j.call(z,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&z.ref===void 0||(ee[Me]=z[Me]);var Me=arguments.length-2;if(Me===1)ee.children=U;else if(1<Me){for(var Ue=Array(Me),it=0;it<Me;it++)Ue[it]=arguments[it+2];ee.children=Ue}return A(R.type,we,ee)},qe.createContext=function(R){return R={$$typeof:d,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:c,_context:R},R},qe.createElement=function(R,z,U){var ee,we={},Me=null;if(z!=null)for(ee in z.key!==void 0&&(Me=""+z.key),z)j.call(z,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(we[ee]=z[ee]);var Ue=arguments.length-2;if(Ue===1)we.children=U;else if(1<Ue){for(var it=Array(Ue),Re=0;Re<Ue;Re++)it[Re]=arguments[Re+2];we.children=it}if(R&&R.defaultProps)for(ee in Ue=R.defaultProps,Ue)we[ee]===void 0&&(we[ee]=Ue[ee]);return A(R,Me,we)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(R){return{$$typeof:f,render:R}},qe.isValidElement=M,qe.lazy=function(R){return{$$typeof:w,_payload:{_status:-1,_result:R},_init:Y}},qe.memo=function(R,z){return{$$typeof:x,type:R,compare:z===void 0?null:z}},qe.startTransition=function(R){var z=T.T,U={};T.T=U;try{var ee=R(),we=T.S;we!==null&&we(U,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(F,se)}catch(Me){se(Me)}finally{z!==null&&U.types!==null&&(z.types=U.types),T.T=z}},qe.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},qe.use=function(R){return T.H.use(R)},qe.useActionState=function(R,z,U){return T.H.useActionState(R,z,U)},qe.useCallback=function(R,z){return T.H.useCallback(R,z)},qe.useContext=function(R){return T.H.useContext(R)},qe.useDebugValue=function(){},qe.useDeferredValue=function(R,z){return T.H.useDeferredValue(R,z)},qe.useEffect=function(R,z){return T.H.useEffect(R,z)},qe.useEffectEvent=function(R){return T.H.useEffectEvent(R)},qe.useId=function(){return T.H.useId()},qe.useImperativeHandle=function(R,z,U){return T.H.useImperativeHandle(R,z,U)},qe.useInsertionEffect=function(R,z){return T.H.useInsertionEffect(R,z)},qe.useLayoutEffect=function(R,z){return T.H.useLayoutEffect(R,z)},qe.useMemo=function(R,z){return T.H.useMemo(R,z)},qe.useOptimistic=function(R,z){return T.H.useOptimistic(R,z)},qe.useReducer=function(R,z,U){return T.H.useReducer(R,z,U)},qe.useRef=function(R){return T.H.useRef(R)},qe.useState=function(R){return T.H.useState(R)},qe.useSyncExternalStore=function(R,z,U){return T.H.useSyncExternalStore(R,z,U)},qe.useTransition=function(){return T.H.useTransition()},qe.version="19.2.0",qe}var Y1;function tx(){return Y1||(Y1=1,Og.exports=o4()),Og.exports}var P=tx();const N2=_2(P);var Vg={exports:{}},pu={},Pg={exports:{}},Lg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J1;function c4(){return J1||(J1=1,(function(r){function e(B,ie){var Y=B.length;B.push(ie);e:for(;0<Y;){var se=Y-1>>>1,Ee=B[se];if(0<l(Ee,ie))B[se]=ie,B[Y]=Ee,Y=se;else break e}}function t(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var ie=B[0],Y=B.pop();if(Y!==ie){B[0]=Y;e:for(var se=0,Ee=B.length,R=Ee>>>1;se<R;){var z=2*(se+1)-1,U=B[z],ee=z+1,we=B[ee];if(0>l(U,Y))ee<Ee&&0>l(we,U)?(B[se]=we,B[ee]=Y,se=ee):(B[se]=U,B[z]=Y,se=z);else if(ee<Ee&&0>l(we,Y))B[se]=we,B[ee]=Y,se=ee;else break e}}return ie}function l(B,ie){var Y=B.sortIndex-ie.sortIndex;return Y!==0?Y:B.id-ie.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();r.unstable_now=function(){return d.now()-f}}var g=[],x=[],w=1,v=null,N=3,C=!1,V=!1,Z=!1,$=!1,me=typeof setTimeout=="function"?setTimeout:null,de=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;function ve(B){for(var ie=t(x);ie!==null;){if(ie.callback===null)s(x);else if(ie.startTime<=B)s(x),ie.sortIndex=ie.expirationTime,e(g,ie);else break;ie=t(x)}}function ge(B){if(Z=!1,ve(B),!V)if(t(g)!==null)V=!0,F||(F=!0,k());else{var ie=t(x);ie!==null&&oe(ge,ie.startTime-B)}}var F=!1,T=-1,j=5,A=-1;function O(){return $?!0:!(r.unstable_now()-A<j)}function M(){if($=!1,F){var B=r.unstable_now();A=B;var ie=!0;try{e:{V=!1,Z&&(Z=!1,de(T),T=-1),C=!0;var Y=N;try{t:{for(ve(B),v=t(g);v!==null&&!(v.expirationTime>B&&O());){var se=v.callback;if(typeof se=="function"){v.callback=null,N=v.priorityLevel;var Ee=se(v.expirationTime<=B);if(B=r.unstable_now(),typeof Ee=="function"){v.callback=Ee,ve(B),ie=!0;break t}v===t(g)&&s(g),ve(B)}else s(g);v=t(g)}if(v!==null)ie=!0;else{var R=t(x);R!==null&&oe(ge,R.startTime-B),ie=!1}}break e}finally{v=null,N=Y,C=!1}ie=void 0}}finally{ie?k():F=!1}}}var k;if(typeof ue=="function")k=function(){ue(M)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,ce=I.port2;I.port1.onmessage=M,k=function(){ce.postMessage(null)}}else k=function(){me(M,0)};function oe(B,ie){T=me(function(){B(r.unstable_now())},ie)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(B){B.callback=null},r.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<B?Math.floor(1e3/B):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_next=function(B){switch(N){case 1:case 2:case 3:var ie=3;break;default:ie=N}var Y=N;N=ie;try{return B()}finally{N=Y}},r.unstable_requestPaint=function(){$=!0},r.unstable_runWithPriority=function(B,ie){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Y=N;N=B;try{return ie()}finally{N=Y}},r.unstable_scheduleCallback=function(B,ie,Y){var se=r.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?se+Y:se):Y=se,B){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=Y+Ee,B={id:w++,callback:ie,priorityLevel:B,startTime:Y,expirationTime:Ee,sortIndex:-1},Y>se?(B.sortIndex=Y,e(x,B),t(g)===null&&B===t(x)&&(Z?(de(T),T=-1):Z=!0,oe(ge,Y-se))):(B.sortIndex=Ee,e(g,B),V||C||(V=!0,F||(F=!0,k()))),B},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(B){var ie=N;return function(){var Y=N;N=ie;try{return B.apply(this,arguments)}finally{N=Y}}}})(Lg)),Lg}var W1;function u4(){return W1||(W1=1,Pg.exports=c4()),Pg.exports}var zg={exports:{}},kn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z1;function d4(){if(Z1)return kn;Z1=1;var r=tx();function e(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)x+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,x,w){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:v==null?null:""+v,children:g,containerInfo:x,implementation:w}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,kn.createPortal=function(g,x){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return c(g,x,null,w)},kn.flushSync=function(g){var x=d.T,w=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=x,s.p=w,s.d.f()}},kn.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,s.d.C(g,x))},kn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},kn.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var w=x.as,v=f(w,x.crossOrigin),N=typeof x.integrity=="string"?x.integrity:void 0,C=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;w==="style"?s.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:v,integrity:N,fetchPriority:C}):w==="script"&&s.d.X(g,{crossOrigin:v,integrity:N,fetchPriority:C,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},kn.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var w=f(x.as,x.crossOrigin);s.d.M(g,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&s.d.M(g)},kn.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var w=x.as,v=f(w,x.crossOrigin);s.d.L(g,w,{crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},kn.preloadModule=function(g,x){if(typeof g=="string")if(x){var w=f(x.as,x.crossOrigin);s.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else s.d.m(g)},kn.requestFormReset=function(g){s.d.r(g)},kn.unstable_batchedUpdates=function(g,x){return g(x)},kn.useFormState=function(g,x,w){return d.H.useFormState(g,x,w)},kn.useFormStatus=function(){return d.H.useHostTransitionStatus()},kn.version="19.2.0",kn}var ew;function h4(){if(ew)return zg.exports;ew=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),zg.exports=d4(),zg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tw;function f4(){if(tw)return pu;tw=1;var r=u4(),e=tx(),t=h4();function s(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var a=n,o=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(o=a.return),n=a.return;while(n)}return a.tag===3?o:null}function d(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function f(n){if(n.tag===31){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function g(n){if(c(n)!==n)throw Error(s(188))}function x(n){var a=n.alternate;if(!a){if(a=c(n),a===null)throw Error(s(188));return a!==n?null:n}for(var o=n,u=a;;){var m=o.return;if(m===null)break;var p=m.alternate;if(p===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===p.child){for(p=m.child;p;){if(p===o)return g(m),n;if(p===u)return g(m),a;p=p.sibling}throw Error(s(188))}if(o.return!==u.return)o=m,u=p;else{for(var b=!1,E=m.child;E;){if(E===o){b=!0,o=m,u=p;break}if(E===u){b=!0,u=m,o=p;break}E=E.sibling}if(!b){for(E=p.child;E;){if(E===o){b=!0,o=p,u=m;break}if(E===u){b=!0,u=p,o=m;break}E=E.sibling}if(!b)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?n:a}function w(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=w(n),a!==null)return a;n=n.sibling}return null}var v=Object.assign,N=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),me=Symbol.for("react.profiler"),de=Symbol.for("react.consumer"),ue=Symbol.for("react.context"),ve=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var I=Symbol.for("react.client.reference");function ce(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===I?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Z:return"Fragment";case me:return"Profiler";case $:return"StrictMode";case ge:return"Suspense";case F:return"SuspenseList";case A:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case V:return"Portal";case ue:return n.displayName||"Context";case de:return(n._context.displayName||"Context")+".Consumer";case ve:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case T:return a=n.displayName||null,a!==null?a:ce(n.type)||"Memo";case j:a=n._payload,n=n._init;try{return ce(n(a))}catch{}}return null}var oe=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},se=[],Ee=-1;function R(n){return{current:n}}function z(n){0>Ee||(n.current=se[Ee],se[Ee]=null,Ee--)}function U(n,a){Ee++,se[Ee]=n.current,n.current=a}var ee=R(null),we=R(null),Me=R(null),Ue=R(null);function it(n,a){switch(U(Me,a),U(we,n),U(ee,null),a.nodeType){case 9:case 11:n=(n=a.documentElement)&&(n=n.namespaceURI)?p1(n):0;break;default:if(n=a.tagName,a=a.namespaceURI)a=p1(a),n=x1(a,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}z(ee),U(ee,n)}function Re(){z(ee),z(we),z(Me)}function Nt(n){n.memoizedState!==null&&U(Ue,n);var a=ee.current,o=x1(a,n.type);a!==o&&(U(we,n),U(ee,o))}function gt(n){we.current===n&&(z(ee),z(we)),Ue.current===n&&(z(Ue),du._currentValue=Y)}var Rt,lt;function _n(n){if(Rt===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);Rt=a&&a[1]||"",lt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rt+n+lt}var ws=!1;function _s(n,a){if(!n||ws)return"";ws=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(W){var X=W}Reflect.construct(n,[],ae)}else{try{ae.call()}catch(W){X=W}n.call(ae.prototype)}}else{try{throw Error()}catch(W){X=W}(ae=n())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(W){if(W&&X&&typeof W.stack=="string")return[W.stack,X.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),b=p[0],E=p[1];if(b&&E){var D=b.split(`
`),Q=E.split(`
`);for(m=u=0;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;for(;m<Q.length&&!Q[m].includes("DetermineComponentFrameRoot");)m++;if(u===D.length||m===Q.length)for(u=D.length-1,m=Q.length-1;1<=u&&0<=m&&D[u]!==Q[m];)m--;for(;1<=u&&0<=m;u--,m--)if(D[u]!==Q[m]){if(u!==1||m!==1)do if(u--,m--,0>m||D[u]!==Q[m]){var ne=`
`+D[u].replace(" at new "," at ");return n.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",n.displayName)),ne}while(1<=u&&0<=m);break}}}finally{ws=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?_n(o):""}function ar(n,a){switch(n.tag){case 26:case 27:case 5:return _n(n.type);case 16:return _n("Lazy");case 13:return n.child!==a&&a!==null?_n("Suspense Fallback"):_n("Suspense");case 19:return _n("SuspenseList");case 0:case 15:return _s(n.type,!1);case 11:return _s(n.type.render,!1);case 1:return _s(n.type,!0);case 31:return _n("Activity");default:return""}}function Vr(n){try{var a="",o=null;do a+=ar(n,o),o=n,n=n.return;while(n);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Mt=Object.prototype.hasOwnProperty,Ot=r.unstable_scheduleCallback,mn=r.unstable_cancelCallback,wa=r.unstable_shouldYield,_a=r.unstable_requestPaint,Vt=r.unstable_now,Ns=r.unstable_getCurrentPriorityLevel,ir=r.unstable_ImmediatePriority,Pr=r.unstable_UserBlockingPriority,Nn=r.unstable_NormalPriority,Na=r.unstable_LowPriority,Ea=r.unstable_IdlePriority,le=r.log,Xe=r.unstable_setDisableYieldValue,Be=null,Ye=null;function Ut(n){if(typeof le=="function"&&Xe(n),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(Be,n)}catch{}}var nt=Math.clz32?Math.clz32:lr,Lr=Math.log,Un=Math.LN2;function lr(n){return n>>>=0,n===0?32:31-(Lr(n)/Un|0)|0}var $n=256,he=262144,_e=4194304;function Ie(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ye(n,a,o){var u=n.pendingLanes;if(u===0)return 0;var m=0,p=n.suspendedLanes,b=n.pingedLanes;n=n.warmLanes;var E=u&134217727;return E!==0?(u=E&~p,u!==0?m=Ie(u):(b&=E,b!==0?m=Ie(b):o||(o=E&~n,o!==0&&(m=Ie(o))))):(E=u&~p,E!==0?m=Ie(E):b!==0?m=Ie(b):o||(o=u&~n,o!==0&&(m=Ie(o)))),m===0?0:a!==0&&a!==m&&(a&p)===0&&(p=m&-m,o=a&-a,p>=o||p===32&&(o&4194048)!==0)?a:m}function Le(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function Je(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function At(){var n=_e;return _e<<=1,(_e&62914560)===0&&(_e=4194304),n}function ut(n){for(var a=[],o=0;31>o;o++)a.push(n);return a}function dt(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Bt(n,a,o,u,m,p){var b=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var E=n.entanglements,D=n.expirationTimes,Q=n.hiddenUpdates;for(o=b&~o;0<o;){var ne=31-nt(o),ae=1<<ne;E[ne]=0,D[ne]=-1;var X=Q[ne];if(X!==null)for(Q[ne]=null,ne=0;ne<X.length;ne++){var W=X[ne];W!==null&&(W.lane&=-536870913)}o&=~ae}u!==0&&gn(n,u,0),p!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=p&~(b&~a))}function gn(n,a,o){n.pendingLanes|=a,n.suspendedLanes&=~a;var u=31-nt(a);n.entangledLanes|=a,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function Ri(n,a){var o=n.entangledLanes|=a;for(n=n.entanglements;o;){var u=31-nt(o),m=1<<u;m&a|n[u]&a&&(n[u]|=a),o&=~m}}function xc(n,a){var o=a&-a;return o=(o&42)!==0?1:ki(o),(o&(n.suspendedLanes|a))!==0?0:o}function ki(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function zr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Td(){var n=ie.p;return n!==0?n:(n=window.event,n===void 0?32:U1(n.type))}function Bs(n,a){var o=ie.p;try{return ie.p=n,a()}finally{ie.p=o}}var qs=Math.random().toString(36).slice(2),en="__reactFiber$"+qs,pn="__reactProps$"+qs,or="__reactContainer$"+qs,Dl="__reactEvents$"+qs,Um="__reactListeners$"+qs,Sd="__reactHandles$"+qs,jd="__reactResources$"+qs,cr="__reactMarker$"+qs;function Ml(n){delete n[en],delete n[pn],delete n[Dl],delete n[Um],delete n[Sd]}function ur(n){var a=n[en];if(a)return a;for(var o=n.parentNode;o;){if(a=o[or]||o[en]){if(o=a.alternate,a.child!==null||o!==null&&o.child!==null)for(n=E1(n);n!==null;){if(o=n[en])return o;n=E1(n)}return a}n=o,o=n.parentNode}return null}function Es(n){if(n=n[en]||n[or]){var a=n.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return n}return null}function is(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(s(33))}function dr(n){var a=n[jd];return a||(a=n[jd]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function tn(n){n[cr]=!0}var yc=new Set,bc={};function hr(n,a){fr(n,a),fr(n+"Capture",a)}function fr(n,a){for(bc[n]=a,n=0;n<a.length;n++)yc.add(a[n])}var vc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wc={},_c={};function Ad(n){return Mt.call(_c,n)?!0:Mt.call(wc,n)?!1:vc.test(n)?_c[n]=!0:(wc[n]=!0,!1)}function Ol(n,a,o){if(Ad(a))if(o===null)n.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+o)}}function ls(n,a,o){if(o===null)n.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+o)}}function nn(n,a,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(a,o,""+u)}}function xn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ta(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Nc(n,a,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,a);if(!n.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,p=u.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return m.call(this)},set:function(b){o=""+b,p.call(this,b)}}),Object.defineProperty(n,a,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function pt(n){if(!n._valueTracker){var a=Ta(n)?"checked":"value";n._valueTracker=Nc(n,a,""+n[a])}}function Di(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var o=a.getValue(),u="";return n&&(u=Ta(n)?n.checked?"true":"false":n.value),n=u,n!==o?(a.setValue(n),!0):!1}function mr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Mi=/[\n"\\]/g;function Kn(n){return n.replace(Mi,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Vl(n,a,o,u,m,p,b,E){n.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.type=b:n.removeAttribute("type"),a!=null?b==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+xn(a)):n.value!==""+xn(a)&&(n.value=""+xn(a)):b!=="submit"&&b!=="reset"||n.removeAttribute("value"),a!=null?Ec(n,b,xn(a)):o!=null?Ec(n,b,xn(o)):u!=null&&n.removeAttribute("value"),m==null&&p!=null&&(n.defaultChecked=!!p),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+xn(E):n.removeAttribute("name")}function Id(n,a,o,u,m,p,b,E){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),a!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||a!=null)){pt(n);return}o=o!=null?""+xn(o):"",a=a!=null?""+xn(a):o,E||a===n.value||(n.value=a),n.defaultValue=a}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=E?n.checked:!!u,n.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.name=b),pt(n)}function Ec(n,a,o){a==="number"&&mr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Sa(n,a,o,u){if(n=n.options,a){a={};for(var m=0;m<o.length;m++)a["$"+o[m]]=!0;for(o=0;o<n.length;o++)m=a.hasOwnProperty("$"+n[o].value),n[o].selected!==m&&(n[o].selected=m),m&&u&&(n[o].defaultSelected=!0)}else{for(o=""+xn(o),a=null,m=0;m<n.length;m++){if(n[m].value===o){n[m].selected=!0,u&&(n[m].defaultSelected=!0);return}a!==null||n[m].disabled||(a=n[m])}a!==null&&(a.selected=!0)}}function Cd(n,a,o){if(a!=null&&(a=""+xn(a),a!==n.value&&(n.value=a),o==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=o!=null?""+xn(o):""}function ja(n,a,o,u){if(a==null){if(u!=null){if(o!=null)throw Error(s(92));if(oe(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),a=o}o=xn(a),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),pt(n)}function Qn(n,a){if(a){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=a;return}}n.textContent=a}var Rd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tc(n,a,o){var u=a.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":u?n.setProperty(a,o):typeof o!="number"||o===0||Rd.has(a)?a==="float"?n.cssFloat=o:n[a]=(""+o).trim():n[a]=o+"px"}function Sc(n,a,o){if(a!=null&&typeof a!="object")throw Error(s(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var m in a)u=a[m],a.hasOwnProperty(m)&&o[m]!==u&&Tc(n,m,u)}else for(var p in a)a.hasOwnProperty(p)&&Tc(n,p,a[p])}function Pl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Aa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ll(n){return Aa.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Fs(){}var jc=null;function Ts(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ia=null,gr=null;function Oi(n){var a=Es(n);if(a&&(n=a.stateNode)){var o=n[pn]||null;e:switch(n=a.stateNode,a.type){case"input":if(Vl(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),a=o.name,o.type==="radio"&&a!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Kn(""+a)+'"][type="radio"]'),a=0;a<o.length;a++){var u=o[a];if(u!==n&&u.form===n.form){var m=u[pn]||null;if(!m)throw Error(s(90));Vl(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<o.length;a++)u=o[a],u.form===n.form&&Di(u)}break e;case"textarea":Cd(n,o.value,o.defaultValue);break e;case"select":a=o.value,a!=null&&Sa(n,!!o.multiple,a,!1)}}}var zl=!1;function Ca(n,a,o){if(zl)return n(a,o);zl=!0;try{var u=n(a);return u}finally{if(zl=!1,(Ia!==null||gr!==null)&&(Th(),Ia&&(a=Ia,n=gr,gr=Ia=null,Oi(a),n)))for(a=0;a<n.length;a++)Oi(n[a])}}function Hs(n,a){var o=n.stateNode;if(o===null)return null;var u=o[pn]||null;if(u===null)return null;o=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(s(231,a,typeof o));return o}var Ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vi=!1;if(Ss)try{var Et={};Object.defineProperty(Et,"passive",{get:function(){Vi=!0}}),window.addEventListener("test",Et,Et),window.removeEventListener("test",Et,Et)}catch{Vi=!1}var pr=null,Ac=null,Pi=null;function Ic(){if(Pi)return Pi;var n,a=Ac,o=a.length,u,m="value"in pr?pr.value:pr.textContent,p=m.length;for(n=0;n<o&&a[n]===m[n];n++);var b=o-n;for(u=1;u<=b&&a[o-u]===m[p-u];u++);return Pi=m.slice(n,1<u?1-u:void 0)}function Li(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function Ur(){return!0}function Gs(){return!1}function En(n){function a(o,u,m,p,b){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=p,this.target=b,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(o=n[E],this[E]=o?o(p):p[E]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ur:Gs,this.isPropagationStopped=Gs,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ur)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ur)},persist:function(){},isPersistent:Ur}),a}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xr=En(Br),Ra=v({},Br,{view:0,detail:0}),Cc=En(Ra),ka,Ul,yr,Bl=v({},Ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Da,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==yr&&(yr&&n.type==="mousemove"?(ka=n.screenX-yr.screenX,Ul=n.screenY-yr.screenY):Ul=ka=0,yr=n),ka)},movementY:function(n){return"movementY"in n?n.movementY:Ul}}),Rc=En(Bl),zi=v({},Bl,{dataTransfer:0}),Dd=En(zi),Md=v({},Ra,{relatedTarget:0}),Ui=En(Md),kc=v({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),Od=En(kc),ql=v({},Br,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Vd=En(ql),Pd=v({},Br,{data:0}),br=En(Pd),Ld={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ud={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bd(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=Ud[n])?!!a[n]:!1}function Da(){return Bd}var Bn=v({},Ra,{key:function(n){if(n.key){var a=Ld[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=Li(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?zd[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Da,charCode:function(n){return n.type==="keypress"?Li(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Li(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),qd=En(Bn),Fd=v({},Bl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qr=En(Fd),h=v({},Ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Da}),y=En(h),_=v({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=En(_),G=v({},Bl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),J=En(G),be=v({},Br,{newState:0,oldState:0}),Fe=En(be),Xt=[9,13,27,32],ht=Ss&&"CompositionEvent"in window,Pt=null;Ss&&"documentMode"in document&&(Pt=document.documentMode);var js=Ss&&"TextEvent"in window&&!Pt,vr=Ss&&(!ht||Pt&&8<Pt&&11>=Pt),$s=" ",Ks=!1;function Bi(n,a){switch(n){case"keyup":return Xt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Hl=!1;function CS(n,a){switch(n){case"compositionend":return Fl(a);case"keypress":return a.which!==32?null:(Ks=!0,$s);case"textInput":return n=a.data,n===$s&&Ks?null:n;default:return null}}function RS(n,a){if(Hl)return n==="compositionend"||!ht&&Bi(n,a)?(n=Ic(),Pi=Ac=pr=null,Hl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return vr&&a.locale!=="ko"?null:a.data;default:return null}}var kS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jy(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!kS[n.type]:a==="textarea"}function Ay(n,a,o,u){Ia?gr?gr.push(u):gr=[u]:Ia=u,a=kh(a,"onChange"),0<a.length&&(o=new xr("onChange","change",null,o,u),n.push({event:o,listeners:a}))}var Dc=null,Mc=null;function DS(n){u1(n,0)}function Hd(n){var a=is(n);if(Di(a))return n}function Iy(n,a){if(n==="change")return a}var Cy=!1;if(Ss){var Bm;if(Ss){var qm="oninput"in document;if(!qm){var Ry=document.createElement("div");Ry.setAttribute("oninput","return;"),qm=typeof Ry.oninput=="function"}Bm=qm}else Bm=!1;Cy=Bm&&(!document.documentMode||9<document.documentMode)}function ky(){Dc&&(Dc.detachEvent("onpropertychange",Dy),Mc=Dc=null)}function Dy(n){if(n.propertyName==="value"&&Hd(Mc)){var a=[];Ay(a,Mc,n,Ts(n)),Ca(DS,a)}}function MS(n,a,o){n==="focusin"?(ky(),Dc=a,Mc=o,Dc.attachEvent("onpropertychange",Dy)):n==="focusout"&&ky()}function OS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Hd(Mc)}function VS(n,a){if(n==="click")return Hd(a)}function PS(n,a){if(n==="input"||n==="change")return Hd(a)}function LS(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var os=typeof Object.is=="function"?Object.is:LS;function Oc(n,a){if(os(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var o=Object.keys(n),u=Object.keys(a);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!Mt.call(a,m)||!os(n[m],a[m]))return!1}return!0}function My(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Oy(n,a){var o=My(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=a&&u>=a)return{node:o,offset:a-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=My(o)}}function Vy(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?Vy(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function Py(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=mr(n.document);a instanceof n.HTMLIFrameElement;){try{var o=typeof a.contentWindow.location.href=="string"}catch{o=!1}if(o)n=a.contentWindow;else break;a=mr(n.document)}return a}function Fm(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}var zS=Ss&&"documentMode"in document&&11>=document.documentMode,Gl=null,Hm=null,Vc=null,Gm=!1;function Ly(n,a,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Gm||Gl==null||Gl!==mr(u)||(u=Gl,"selectionStart"in u&&Fm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Vc&&Oc(Vc,u)||(Vc=u,u=kh(Hm,"onSelect"),0<u.length&&(a=new xr("onSelect","select",null,a,o),n.push({event:a,listeners:u}),a.target=Gl)))}function qi(n,a){var o={};return o[n.toLowerCase()]=a.toLowerCase(),o["Webkit"+n]="webkit"+a,o["Moz"+n]="moz"+a,o}var $l={animationend:qi("Animation","AnimationEnd"),animationiteration:qi("Animation","AnimationIteration"),animationstart:qi("Animation","AnimationStart"),transitionrun:qi("Transition","TransitionRun"),transitionstart:qi("Transition","TransitionStart"),transitioncancel:qi("Transition","TransitionCancel"),transitionend:qi("Transition","TransitionEnd")},$m={},zy={};Ss&&(zy=document.createElement("div").style,"AnimationEvent"in window||(delete $l.animationend.animation,delete $l.animationiteration.animation,delete $l.animationstart.animation),"TransitionEvent"in window||delete $l.transitionend.transition);function Fi(n){if($m[n])return $m[n];if(!$l[n])return n;var a=$l[n],o;for(o in a)if(a.hasOwnProperty(o)&&o in zy)return $m[n]=a[o];return n}var Uy=Fi("animationend"),By=Fi("animationiteration"),qy=Fi("animationstart"),US=Fi("transitionrun"),BS=Fi("transitionstart"),qS=Fi("transitioncancel"),Fy=Fi("transitionend"),Hy=new Map,Km="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Km.push("scrollEnd");function Qs(n,a){Hy.set(n,a),hr(a,[n])}var Gd=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},As=[],Kl=0,Qm=0;function $d(){for(var n=Kl,a=Qm=Kl=0;a<n;){var o=As[a];As[a++]=null;var u=As[a];As[a++]=null;var m=As[a];As[a++]=null;var p=As[a];if(As[a++]=null,u!==null&&m!==null){var b=u.pending;b===null?m.next=m:(m.next=b.next,b.next=m),u.pending=m}p!==0&&Gy(o,m,p)}}function Kd(n,a,o,u){As[Kl++]=n,As[Kl++]=a,As[Kl++]=o,As[Kl++]=u,Qm|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Xm(n,a,o,u){return Kd(n,a,o,u),Qd(n)}function Hi(n,a){return Kd(n,null,null,a),Qd(n)}function Gy(n,a,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var m=!1,p=n.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(m=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,m&&a!==null&&(m=31-nt(o),n=p.hiddenUpdates,u=n[m],u===null?n[m]=[a]:u.push(a),a.lane=o|536870912),p):null}function Qd(n){if(50<ru)throw ru=0,rg=null,Error(s(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var Ql={};function FS(n,a,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cs(n,a,o,u){return new FS(n,a,o,u)}function Ym(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Fr(n,a){var o=n.alternate;return o===null?(o=cs(n.tag,a,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=a,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,a=n.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function $y(n,a){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,a=o.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function Xd(n,a,o,u,m,p){var b=0;if(u=n,typeof n=="function")Ym(n)&&(b=1);else if(typeof n=="string")b=Qj(n,o,ee.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case A:return n=cs(31,o,a,m),n.elementType=A,n.lanes=p,n;case Z:return Gi(o.children,m,p,a);case $:b=8,m|=24;break;case me:return n=cs(12,o,a,m|2),n.elementType=me,n.lanes=p,n;case ge:return n=cs(13,o,a,m),n.elementType=ge,n.lanes=p,n;case F:return n=cs(19,o,a,m),n.elementType=F,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ue:b=10;break e;case de:b=9;break e;case ve:b=11;break e;case T:b=14;break e;case j:b=16,u=null;break e}b=29,o=Error(s(130,n===null?"null":typeof n,"")),u=null}return a=cs(b,o,a,m),a.elementType=n,a.type=u,a.lanes=p,a}function Gi(n,a,o,u){return n=cs(7,n,u,a),n.lanes=o,n}function Jm(n,a,o){return n=cs(6,n,null,a),n.lanes=o,n}function Ky(n){var a=cs(18,null,null,0);return a.stateNode=n,a}function Wm(n,a,o){return a=cs(4,n.children!==null?n.children:[],n.key,a),a.lanes=o,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}var Qy=new WeakMap;function Is(n,a){if(typeof n=="object"&&n!==null){var o=Qy.get(n);return o!==void 0?o:(a={value:n,source:a,stack:Vr(a)},Qy.set(n,a),a)}return{value:n,source:a,stack:Vr(a)}}var Xl=[],Yl=0,Yd=null,Pc=0,Cs=[],Rs=0,Ma=null,wr=1,_r="";function Hr(n,a){Xl[Yl++]=Pc,Xl[Yl++]=Yd,Yd=n,Pc=a}function Xy(n,a,o){Cs[Rs++]=wr,Cs[Rs++]=_r,Cs[Rs++]=Ma,Ma=n;var u=wr;n=_r;var m=32-nt(u)-1;u&=~(1<<m),o+=1;var p=32-nt(a)+m;if(30<p){var b=m-m%5;p=(u&(1<<b)-1).toString(32),u>>=b,m-=b,wr=1<<32-nt(a)+m|o<<m|u,_r=p+n}else wr=1<<p|o<<m|u,_r=n}function Zm(n){n.return!==null&&(Hr(n,1),Xy(n,1,0))}function e0(n){for(;n===Yd;)Yd=Xl[--Yl],Xl[Yl]=null,Pc=Xl[--Yl],Xl[Yl]=null;for(;n===Ma;)Ma=Cs[--Rs],Cs[Rs]=null,_r=Cs[--Rs],Cs[Rs]=null,wr=Cs[--Rs],Cs[Rs]=null}function Yy(n,a){Cs[Rs++]=wr,Cs[Rs++]=_r,Cs[Rs++]=Ma,wr=a.id,_r=a.overflow,Ma=n}var Tn=null,kt=null,st=!1,Oa=null,ks=!1,t0=Error(s(519));function Va(n){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Lc(Is(a,n)),t0}function Jy(n){var a=n.stateNode,o=n.type,u=n.memoizedProps;switch(a[en]=n,a[pn]=u,o){case"dialog":Qe("cancel",a),Qe("close",a);break;case"iframe":case"object":case"embed":Qe("load",a);break;case"video":case"audio":for(o=0;o<iu.length;o++)Qe(iu[o],a);break;case"source":Qe("error",a);break;case"img":case"image":case"link":Qe("error",a),Qe("load",a);break;case"details":Qe("toggle",a);break;case"input":Qe("invalid",a),Id(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Qe("invalid",a);break;case"textarea":Qe("invalid",a),ja(a,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||a.textContent===""+o||u.suppressHydrationWarning===!0||m1(a.textContent,o)?(u.popover!=null&&(Qe("beforetoggle",a),Qe("toggle",a)),u.onScroll!=null&&Qe("scroll",a),u.onScrollEnd!=null&&Qe("scrollend",a),u.onClick!=null&&(a.onclick=Fs),a=!0):a=!1,a||Va(n,!0)}function Wy(n){for(Tn=n.return;Tn;)switch(Tn.tag){case 5:case 31:case 13:ks=!1;return;case 27:case 3:ks=!0;return;default:Tn=Tn.return}}function Jl(n){if(n!==Tn)return!1;if(!st)return Wy(n),st=!0,!1;var a=n.tag,o;if((o=a!==3&&a!==27)&&((o=a===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||bg(n.type,n.memoizedProps)),o=!o),o&&kt&&Va(n),Wy(n),a===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));kt=N1(n)}else if(a===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));kt=N1(n)}else a===27?(a=kt,Ya(n.type)?(n=Eg,Eg=null,kt=n):kt=a):kt=Tn?Ms(n.stateNode.nextSibling):null;return!0}function $i(){kt=Tn=null,st=!1}function n0(){var n=Oa;return n!==null&&(Wn===null?Wn=n:Wn.push.apply(Wn,n),Oa=null),n}function Lc(n){Oa===null?Oa=[n]:Oa.push(n)}var s0=R(null),Ki=null,Gr=null;function Pa(n,a,o){U(s0,a._currentValue),a._currentValue=o}function $r(n){n._currentValue=s0.current,z(s0)}function r0(n,a,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),n===o)break;n=n.return}}function a0(n,a,o,u){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var p=m.dependencies;if(p!==null){var b=m.child;p=p.firstContext;e:for(;p!==null;){var E=p;p=m;for(var D=0;D<a.length;D++)if(E.context===a[D]){p.lanes|=o,E=p.alternate,E!==null&&(E.lanes|=o),r0(p.return,o,n),u||(b=null);break e}p=E.next}}else if(m.tag===18){if(b=m.return,b===null)throw Error(s(341));b.lanes|=o,p=b.alternate,p!==null&&(p.lanes|=o),r0(b,o,n),b=null}else b=m.child;if(b!==null)b.return=m;else for(b=m;b!==null;){if(b===n){b=null;break}if(m=b.sibling,m!==null){m.return=b.return,b=m;break}b=b.return}m=b}}function Wl(n,a,o,u){n=null;for(var m=a,p=!1;m!==null;){if(!p){if((m.flags&524288)!==0)p=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var b=m.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var E=m.type;os(m.pendingProps.value,b.value)||(n!==null?n.push(E):n=[E])}}else if(m===Ue.current){if(b=m.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(du):n=[du])}m=m.return}n!==null&&a0(a,n,o,u),a.flags|=262144}function Jd(n){for(n=n.firstContext;n!==null;){if(!os(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Qi(n){Ki=n,Gr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Sn(n){return Zy(Ki,n)}function Wd(n,a){return Ki===null&&Qi(n),Zy(n,a)}function Zy(n,a){var o=a._currentValue;if(a={context:a,memoizedValue:o,next:null},Gr===null){if(n===null)throw Error(s(308));Gr=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else Gr=Gr.next=a;return o}var HS=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){a.aborted=!0,n.forEach(function(o){return o()})}},GS=r.unstable_scheduleCallback,$S=r.unstable_NormalPriority,sn={$$typeof:ue,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function i0(){return{controller:new HS,data:new Map,refCount:0}}function zc(n){n.refCount--,n.refCount===0&&GS($S,function(){n.controller.abort()})}var Uc=null,l0=0,Zl=0,eo=null;function KS(n,a){if(Uc===null){var o=Uc=[];l0=0,Zl=ug(),eo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return l0++,a.then(eb,eb),a}function eb(){if(--l0===0&&Uc!==null){eo!==null&&(eo.status="fulfilled");var n=Uc;Uc=null,Zl=0,eo=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function QS(n,a){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return n.then(function(){u.status="fulfilled",u.value=a;for(var m=0;m<o.length;m++)(0,o[m])(a)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var tb=B.S;B.S=function(n,a){Lv=Vt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&KS(n,a),tb!==null&&tb(n,a)};var Xi=R(null);function o0(){var n=Xi.current;return n!==null?n:It.pooledCache}function Zd(n,a){a===null?U(Xi,Xi.current):U(Xi,a.pool)}function nb(){var n=o0();return n===null?null:{parent:sn._currentValue,pool:n}}var to=Error(s(460)),c0=Error(s(474)),eh=Error(s(542)),th={then:function(){}};function sb(n){return n=n.status,n==="fulfilled"||n==="rejected"}function rb(n,a,o){switch(o=n[o],o===void 0?n.push(a):o!==a&&(a.then(Fs,Fs),a=o),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,ib(n),n;default:if(typeof a.status=="string")a.then(Fs,Fs);else{if(n=It,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=a,n.status="pending",n.then(function(u){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=u}},function(u){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,ib(n),n}throw Ji=a,to}}function Yi(n){try{var a=n._init;return a(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ji=o,to):o}}var Ji=null;function ab(){if(Ji===null)throw Error(s(459));var n=Ji;return Ji=null,n}function ib(n){if(n===to||n===eh)throw Error(s(483))}var no=null,Bc=0;function nh(n){var a=Bc;return Bc+=1,no===null&&(no=[]),rb(no,n,a)}function qc(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function sh(n,a){throw a.$$typeof===N?Error(s(525)):(n=Object.prototype.toString.call(a),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function lb(n){function a(q,L){if(n){var K=q.deletions;K===null?(q.deletions=[L],q.flags|=16):K.push(L)}}function o(q,L){if(!n)return null;for(;L!==null;)a(q,L),L=L.sibling;return null}function u(q){for(var L=new Map;q!==null;)q.key!==null?L.set(q.key,q):L.set(q.index,q),q=q.sibling;return L}function m(q,L){return q=Fr(q,L),q.index=0,q.sibling=null,q}function p(q,L,K){return q.index=K,n?(K=q.alternate,K!==null?(K=K.index,K<L?(q.flags|=67108866,L):K):(q.flags|=67108866,L)):(q.flags|=1048576,L)}function b(q){return n&&q.alternate===null&&(q.flags|=67108866),q}function E(q,L,K,re){return L===null||L.tag!==6?(L=Jm(K,q.mode,re),L.return=q,L):(L=m(L,K),L.return=q,L)}function D(q,L,K,re){var ke=K.type;return ke===Z?ne(q,L,K.props.children,re,K.key):L!==null&&(L.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===j&&Yi(ke)===L.type)?(L=m(L,K.props),qc(L,K),L.return=q,L):(L=Xd(K.type,K.key,K.props,null,q.mode,re),qc(L,K),L.return=q,L)}function Q(q,L,K,re){return L===null||L.tag!==4||L.stateNode.containerInfo!==K.containerInfo||L.stateNode.implementation!==K.implementation?(L=Wm(K,q.mode,re),L.return=q,L):(L=m(L,K.children||[]),L.return=q,L)}function ne(q,L,K,re,ke){return L===null||L.tag!==7?(L=Gi(K,q.mode,re,ke),L.return=q,L):(L=m(L,K),L.return=q,L)}function ae(q,L,K){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Jm(""+L,q.mode,K),L.return=q,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case C:return K=Xd(L.type,L.key,L.props,null,q.mode,K),qc(K,L),K.return=q,K;case V:return L=Wm(L,q.mode,K),L.return=q,L;case j:return L=Yi(L),ae(q,L,K)}if(oe(L)||k(L))return L=Gi(L,q.mode,K,null),L.return=q,L;if(typeof L.then=="function")return ae(q,nh(L),K);if(L.$$typeof===ue)return ae(q,Wd(q,L),K);sh(q,L)}return null}function X(q,L,K,re){var ke=L!==null?L.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return ke!==null?null:E(q,L,""+K,re);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case C:return K.key===ke?D(q,L,K,re):null;case V:return K.key===ke?Q(q,L,K,re):null;case j:return K=Yi(K),X(q,L,K,re)}if(oe(K)||k(K))return ke!==null?null:ne(q,L,K,re,null);if(typeof K.then=="function")return X(q,L,nh(K),re);if(K.$$typeof===ue)return X(q,L,Wd(q,K),re);sh(q,K)}return null}function W(q,L,K,re,ke){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return q=q.get(K)||null,E(L,q,""+re,ke);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case C:return q=q.get(re.key===null?K:re.key)||null,D(L,q,re,ke);case V:return q=q.get(re.key===null?K:re.key)||null,Q(L,q,re,ke);case j:return re=Yi(re),W(q,L,K,re,ke)}if(oe(re)||k(re))return q=q.get(K)||null,ne(L,q,re,ke,null);if(typeof re.then=="function")return W(q,L,K,nh(re),ke);if(re.$$typeof===ue)return W(q,L,K,Wd(L,re),ke);sh(L,re)}return null}function Se(q,L,K,re){for(var ke=null,ot=null,Ae=L,Ge=L=0,Ze=null;Ae!==null&&Ge<K.length;Ge++){Ae.index>Ge?(Ze=Ae,Ae=null):Ze=Ae.sibling;var ct=X(q,Ae,K[Ge],re);if(ct===null){Ae===null&&(Ae=Ze);break}n&&Ae&&ct.alternate===null&&a(q,Ae),L=p(ct,L,Ge),ot===null?ke=ct:ot.sibling=ct,ot=ct,Ae=Ze}if(Ge===K.length)return o(q,Ae),st&&Hr(q,Ge),ke;if(Ae===null){for(;Ge<K.length;Ge++)Ae=ae(q,K[Ge],re),Ae!==null&&(L=p(Ae,L,Ge),ot===null?ke=Ae:ot.sibling=Ae,ot=Ae);return st&&Hr(q,Ge),ke}for(Ae=u(Ae);Ge<K.length;Ge++)Ze=W(Ae,q,Ge,K[Ge],re),Ze!==null&&(n&&Ze.alternate!==null&&Ae.delete(Ze.key===null?Ge:Ze.key),L=p(Ze,L,Ge),ot===null?ke=Ze:ot.sibling=Ze,ot=Ze);return n&&Ae.forEach(function(ti){return a(q,ti)}),st&&Hr(q,Ge),ke}function Oe(q,L,K,re){if(K==null)throw Error(s(151));for(var ke=null,ot=null,Ae=L,Ge=L=0,Ze=null,ct=K.next();Ae!==null&&!ct.done;Ge++,ct=K.next()){Ae.index>Ge?(Ze=Ae,Ae=null):Ze=Ae.sibling;var ti=X(q,Ae,ct.value,re);if(ti===null){Ae===null&&(Ae=Ze);break}n&&Ae&&ti.alternate===null&&a(q,Ae),L=p(ti,L,Ge),ot===null?ke=ti:ot.sibling=ti,ot=ti,Ae=Ze}if(ct.done)return o(q,Ae),st&&Hr(q,Ge),ke;if(Ae===null){for(;!ct.done;Ge++,ct=K.next())ct=ae(q,ct.value,re),ct!==null&&(L=p(ct,L,Ge),ot===null?ke=ct:ot.sibling=ct,ot=ct);return st&&Hr(q,Ge),ke}for(Ae=u(Ae);!ct.done;Ge++,ct=K.next())ct=W(Ae,q,Ge,ct.value,re),ct!==null&&(n&&ct.alternate!==null&&Ae.delete(ct.key===null?Ge:ct.key),L=p(ct,L,Ge),ot===null?ke=ct:ot.sibling=ct,ot=ct);return n&&Ae.forEach(function(a4){return a(q,a4)}),st&&Hr(q,Ge),ke}function jt(q,L,K,re){if(typeof K=="object"&&K!==null&&K.type===Z&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case C:e:{for(var ke=K.key;L!==null;){if(L.key===ke){if(ke=K.type,ke===Z){if(L.tag===7){o(q,L.sibling),re=m(L,K.props.children),re.return=q,q=re;break e}}else if(L.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===j&&Yi(ke)===L.type){o(q,L.sibling),re=m(L,K.props),qc(re,K),re.return=q,q=re;break e}o(q,L);break}else a(q,L);L=L.sibling}K.type===Z?(re=Gi(K.props.children,q.mode,re,K.key),re.return=q,q=re):(re=Xd(K.type,K.key,K.props,null,q.mode,re),qc(re,K),re.return=q,q=re)}return b(q);case V:e:{for(ke=K.key;L!==null;){if(L.key===ke)if(L.tag===4&&L.stateNode.containerInfo===K.containerInfo&&L.stateNode.implementation===K.implementation){o(q,L.sibling),re=m(L,K.children||[]),re.return=q,q=re;break e}else{o(q,L);break}else a(q,L);L=L.sibling}re=Wm(K,q.mode,re),re.return=q,q=re}return b(q);case j:return K=Yi(K),jt(q,L,K,re)}if(oe(K))return Se(q,L,K,re);if(k(K)){if(ke=k(K),typeof ke!="function")throw Error(s(150));return K=ke.call(K),Oe(q,L,K,re)}if(typeof K.then=="function")return jt(q,L,nh(K),re);if(K.$$typeof===ue)return jt(q,L,Wd(q,K),re);sh(q,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,L!==null&&L.tag===6?(o(q,L.sibling),re=m(L,K),re.return=q,q=re):(o(q,L),re=Jm(K,q.mode,re),re.return=q,q=re),b(q)):o(q,L)}return function(q,L,K,re){try{Bc=0;var ke=jt(q,L,K,re);return no=null,ke}catch(Ae){if(Ae===to||Ae===eh)throw Ae;var ot=cs(29,Ae,null,q.mode);return ot.lanes=re,ot.return=q,ot}finally{}}}var Wi=lb(!0),ob=lb(!1),La=!1;function u0(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function d0(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function za(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ua(n,a,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(ft&2)!==0){var m=u.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),u.pending=a,a=Qd(n),Gy(n,null,o),a}return Kd(n,u,a,o),Qd(n)}function Fc(n,a,o){if(a=a.updateQueue,a!==null&&(a=a.shared,(o&4194048)!==0)){var u=a.lanes;u&=n.pendingLanes,o|=u,a.lanes=o,Ri(n,o)}}function h0(n,a){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?m=p=b:p=p.next=b,o=o.next}while(o!==null);p===null?m=p=a:p=p.next=a}else m=p=a;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=a:n.next=a,o.lastBaseUpdate=a}var f0=!1;function Hc(){if(f0){var n=eo;if(n!==null)throw n}}function Gc(n,a,o,u){f0=!1;var m=n.updateQueue;La=!1;var p=m.firstBaseUpdate,b=m.lastBaseUpdate,E=m.shared.pending;if(E!==null){m.shared.pending=null;var D=E,Q=D.next;D.next=null,b===null?p=Q:b.next=Q,b=D;var ne=n.alternate;ne!==null&&(ne=ne.updateQueue,E=ne.lastBaseUpdate,E!==b&&(E===null?ne.firstBaseUpdate=Q:E.next=Q,ne.lastBaseUpdate=D))}if(p!==null){var ae=m.baseState;b=0,ne=Q=D=null,E=p;do{var X=E.lane&-536870913,W=X!==E.lane;if(W?(We&X)===X:(u&X)===X){X!==0&&X===Zl&&(f0=!0),ne!==null&&(ne=ne.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Se=n,Oe=E;X=a;var jt=o;switch(Oe.tag){case 1:if(Se=Oe.payload,typeof Se=="function"){ae=Se.call(jt,ae,X);break e}ae=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Oe.payload,X=typeof Se=="function"?Se.call(jt,ae,X):Se,X==null)break e;ae=v({},ae,X);break e;case 2:La=!0}}X=E.callback,X!==null&&(n.flags|=64,W&&(n.flags|=8192),W=m.callbacks,W===null?m.callbacks=[X]:W.push(X))}else W={lane:X,tag:E.tag,payload:E.payload,callback:E.callback,next:null},ne===null?(Q=ne=W,D=ae):ne=ne.next=W,b|=X;if(E=E.next,E===null){if(E=m.shared.pending,E===null)break;W=E,E=W.next,W.next=null,m.lastBaseUpdate=W,m.shared.pending=null}}while(!0);ne===null&&(D=ae),m.baseState=D,m.firstBaseUpdate=Q,m.lastBaseUpdate=ne,p===null&&(m.shared.lanes=0),Ga|=b,n.lanes=b,n.memoizedState=ae}}function cb(n,a){if(typeof n!="function")throw Error(s(191,n));n.call(a)}function ub(n,a){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)cb(o[n],a)}var so=R(null),rh=R(0);function db(n,a){n=ta,U(rh,n),U(so,a),ta=n|a.baseLanes}function m0(){U(rh,ta),U(so,so.current)}function g0(){ta=rh.current,z(so),z(rh)}var us=R(null),Ds=null;function Ba(n){var a=n.alternate;U(Yt,Yt.current&1),U(us,n),Ds===null&&(a===null||so.current!==null||a.memoizedState!==null)&&(Ds=n)}function p0(n){U(Yt,Yt.current),U(us,n),Ds===null&&(Ds=n)}function hb(n){n.tag===22?(U(Yt,Yt.current),U(us,n),Ds===null&&(Ds=n)):qa()}function qa(){U(Yt,Yt.current),U(us,us.current)}function ds(n){z(us),Ds===n&&(Ds=null),z(Yt)}var Yt=R(0);function ah(n){for(var a=n;a!==null;){if(a.tag===13){var o=a.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||_g(o)||Ng(o)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Kr=0,He=null,Tt=null,rn=null,ih=!1,ro=!1,Zi=!1,lh=0,$c=0,ao=null,XS=0;function Ht(){throw Error(s(321))}function x0(n,a){if(a===null)return!1;for(var o=0;o<a.length&&o<n.length;o++)if(!os(n[o],a[o]))return!1;return!0}function y0(n,a,o,u,m,p){return Kr=p,He=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,B.H=n===null||n.memoizedState===null?Xb:D0,Zi=!1,p=o(u,m),Zi=!1,ro&&(p=mb(a,o,u,m)),fb(n),p}function fb(n){B.H=Xc;var a=Tt!==null&&Tt.next!==null;if(Kr=0,rn=Tt=He=null,ih=!1,$c=0,ao=null,a)throw Error(s(300));n===null||an||(n=n.dependencies,n!==null&&Jd(n)&&(an=!0))}function mb(n,a,o,u){He=n;var m=0;do{if(ro&&(ao=null),$c=0,ro=!1,25<=m)throw Error(s(301));if(m+=1,rn=Tt=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}B.H=Yb,p=a(o,u)}while(ro);return p}function YS(){var n=B.H,a=n.useState()[0];return a=typeof a.then=="function"?Kc(a):a,n=n.useState()[0],(Tt!==null?Tt.memoizedState:null)!==n&&(He.flags|=1024),a}function b0(){var n=lh!==0;return lh=0,n}function v0(n,a,o){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~o}function w0(n){if(ih){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}ih=!1}Kr=0,rn=Tt=He=null,ro=!1,$c=lh=0,ao=null}function qn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?He.memoizedState=rn=n:rn=rn.next=n,rn}function Jt(){if(Tt===null){var n=He.alternate;n=n!==null?n.memoizedState:null}else n=Tt.next;var a=rn===null?He.memoizedState:rn.next;if(a!==null)rn=a,Tt=n;else{if(n===null)throw He.alternate===null?Error(s(467)):Error(s(310));Tt=n,n={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},rn===null?He.memoizedState=rn=n:rn=rn.next=n}return rn}function oh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kc(n){var a=$c;return $c+=1,ao===null&&(ao=[]),n=rb(ao,n,a),a=He,(rn===null?a.memoizedState:rn.next)===null&&(a=a.alternate,B.H=a===null||a.memoizedState===null?Xb:D0),n}function ch(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Kc(n);if(n.$$typeof===ue)return Sn(n)}throw Error(s(438,String(n)))}function _0(n){var a=null,o=He.updateQueue;if(o!==null&&(a=o.memoCache),a==null){var u=He.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),o===null&&(o=oh(),He.updateQueue=o),o.memoCache=a,o=a.data[a.index],o===void 0)for(o=a.data[a.index]=Array(n),u=0;u<n;u++)o[u]=O;return a.index++,o}function Qr(n,a){return typeof a=="function"?a(n):a}function uh(n){var a=Jt();return N0(a,Tt,n)}function N0(n,a,o){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var m=n.baseQueue,p=u.pending;if(p!==null){if(m!==null){var b=m.next;m.next=p.next,p.next=b}a.baseQueue=m=p,u.pending=null}if(p=n.baseState,m===null)n.memoizedState=p;else{a=m.next;var E=b=null,D=null,Q=a,ne=!1;do{var ae=Q.lane&-536870913;if(ae!==Q.lane?(We&ae)===ae:(Kr&ae)===ae){var X=Q.revertLane;if(X===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ae===Zl&&(ne=!0);else if((Kr&X)===X){Q=Q.next,X===Zl&&(ne=!0);continue}else ae={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},D===null?(E=D=ae,b=p):D=D.next=ae,He.lanes|=X,Ga|=X;ae=Q.action,Zi&&o(p,ae),p=Q.hasEagerState?Q.eagerState:o(p,ae)}else X={lane:ae,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},D===null?(E=D=X,b=p):D=D.next=X,He.lanes|=ae,Ga|=ae;Q=Q.next}while(Q!==null&&Q!==a);if(D===null?b=p:D.next=E,!os(p,n.memoizedState)&&(an=!0,ne&&(o=eo,o!==null)))throw o;n.memoizedState=p,n.baseState=b,n.baseQueue=D,u.lastRenderedState=p}return m===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function E0(n){var a=Jt(),o=a.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=n;var u=o.dispatch,m=o.pending,p=a.memoizedState;if(m!==null){o.pending=null;var b=m=m.next;do p=n(p,b.action),b=b.next;while(b!==m);os(p,a.memoizedState)||(an=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),o.lastRenderedState=p}return[p,u]}function gb(n,a,o){var u=He,m=Jt(),p=st;if(p){if(o===void 0)throw Error(s(407));o=o()}else o=a();var b=!os((Tt||m).memoizedState,o);if(b&&(m.memoizedState=o,an=!0),m=m.queue,j0(yb.bind(null,u,m,n),[n]),m.getSnapshot!==a||b||rn!==null&&rn.memoizedState.tag&1){if(u.flags|=2048,io(9,{destroy:void 0},xb.bind(null,u,m,o,a),null),It===null)throw Error(s(349));p||(Kr&127)!==0||pb(u,a,o)}return o}function pb(n,a,o){n.flags|=16384,n={getSnapshot:a,value:o},a=He.updateQueue,a===null?(a=oh(),He.updateQueue=a,a.stores=[n]):(o=a.stores,o===null?a.stores=[n]:o.push(n))}function xb(n,a,o,u){a.value=o,a.getSnapshot=u,bb(a)&&vb(n)}function yb(n,a,o){return o(function(){bb(a)&&vb(n)})}function bb(n){var a=n.getSnapshot;n=n.value;try{var o=a();return!os(n,o)}catch{return!0}}function vb(n){var a=Hi(n,2);a!==null&&Zn(a,n,2)}function T0(n){var a=qn();if(typeof n=="function"){var o=n;if(n=o(),Zi){Ut(!0);try{o()}finally{Ut(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:n},a}function wb(n,a,o,u){return n.baseState=o,N0(n,Tt,typeof u=="function"?u:Qr)}function JS(n,a,o,u,m){if(fh(n))throw Error(s(485));if(n=a.action,n!==null){var p={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){p.listeners.push(b)}};B.T!==null?o(!0):p.isTransition=!1,u(p),o=a.pending,o===null?(p.next=a.pending=p,_b(a,p)):(p.next=o.next,a.pending=o.next=p)}}function _b(n,a){var o=a.action,u=a.payload,m=n.state;if(a.isTransition){var p=B.T,b={};B.T=b;try{var E=o(m,u),D=B.S;D!==null&&D(b,E),Nb(n,a,E)}catch(Q){S0(n,a,Q)}finally{p!==null&&b.types!==null&&(p.types=b.types),B.T=p}}else try{p=o(m,u),Nb(n,a,p)}catch(Q){S0(n,a,Q)}}function Nb(n,a,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Eb(n,a,u)},function(u){return S0(n,a,u)}):Eb(n,a,o)}function Eb(n,a,o){a.status="fulfilled",a.value=o,Tb(a),n.state=o,a=n.pending,a!==null&&(o=a.next,o===a?n.pending=null:(o=o.next,a.next=o,_b(n,o)))}function S0(n,a,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=o,Tb(a),a=a.next;while(a!==u)}n.action=null}function Tb(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function Sb(n,a){return a}function jb(n,a){if(st){var o=It.formState;if(o!==null){e:{var u=He;if(st){if(kt){t:{for(var m=kt,p=ks;m.nodeType!==8;){if(!p){m=null;break t}if(m=Ms(m.nextSibling),m===null){m=null;break t}}p=m.data,m=p==="F!"||p==="F"?m:null}if(m){kt=Ms(m.nextSibling),u=m.data==="F!";break e}}Va(u)}u=!1}u&&(a=o[0])}}return o=qn(),o.memoizedState=o.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sb,lastRenderedState:a},o.queue=u,o=$b.bind(null,He,u),u.dispatch=o,u=T0(!1),p=k0.bind(null,He,!1,u.queue),u=qn(),m={state:a,dispatch:null,action:n,pending:null},u.queue=m,o=JS.bind(null,He,m,p,o),m.dispatch=o,u.memoizedState=n,[a,o,!1]}function Ab(n){var a=Jt();return Ib(a,Tt,n)}function Ib(n,a,o){if(a=N0(n,a,Sb)[0],n=uh(Qr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=Kc(a)}catch(b){throw b===to?eh:b}else u=a;a=Jt();var m=a.queue,p=m.dispatch;return o!==a.memoizedState&&(He.flags|=2048,io(9,{destroy:void 0},WS.bind(null,m,o),null)),[u,p,n]}function WS(n,a){n.action=a}function Cb(n){var a=Jt(),o=Tt;if(o!==null)return Ib(a,o,n);Jt(),a=a.memoizedState,o=Jt();var u=o.queue.dispatch;return o.memoizedState=n,[a,u,!1]}function io(n,a,o,u){return n={tag:n,create:o,deps:u,inst:a,next:null},a=He.updateQueue,a===null&&(a=oh(),He.updateQueue=a),o=a.lastEffect,o===null?a.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,a.lastEffect=n),n}function Rb(){return Jt().memoizedState}function dh(n,a,o,u){var m=qn();He.flags|=n,m.memoizedState=io(1|a,{destroy:void 0},o,u===void 0?null:u)}function hh(n,a,o,u){var m=Jt();u=u===void 0?null:u;var p=m.memoizedState.inst;Tt!==null&&u!==null&&x0(u,Tt.memoizedState.deps)?m.memoizedState=io(a,p,o,u):(He.flags|=n,m.memoizedState=io(1|a,p,o,u))}function kb(n,a){dh(8390656,8,n,a)}function j0(n,a){hh(2048,8,n,a)}function ZS(n){He.flags|=4;var a=He.updateQueue;if(a===null)a=oh(),He.updateQueue=a,a.events=[n];else{var o=a.events;o===null?a.events=[n]:o.push(n)}}function Db(n){var a=Jt().memoizedState;return ZS({ref:a,nextImpl:n}),function(){if((ft&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function Mb(n,a){return hh(4,2,n,a)}function Ob(n,a){return hh(4,4,n,a)}function Vb(n,a){if(typeof a=="function"){n=n();var o=a(n);return function(){typeof o=="function"?o():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function Pb(n,a,o){o=o!=null?o.concat([n]):null,hh(4,4,Vb.bind(null,a,n),o)}function A0(){}function Lb(n,a){var o=Jt();a=a===void 0?null:a;var u=o.memoizedState;return a!==null&&x0(a,u[1])?u[0]:(o.memoizedState=[n,a],n)}function zb(n,a){var o=Jt();a=a===void 0?null:a;var u=o.memoizedState;if(a!==null&&x0(a,u[1]))return u[0];if(u=n(),Zi){Ut(!0);try{n()}finally{Ut(!1)}}return o.memoizedState=[u,a],u}function I0(n,a,o){return o===void 0||(Kr&1073741824)!==0&&(We&261930)===0?n.memoizedState=a:(n.memoizedState=o,n=Uv(),He.lanes|=n,Ga|=n,o)}function Ub(n,a,o,u){return os(o,a)?o:so.current!==null?(n=I0(n,o,u),os(n,a)||(an=!0),n):(Kr&42)===0||(Kr&1073741824)!==0&&(We&261930)===0?(an=!0,n.memoizedState=o):(n=Uv(),He.lanes|=n,Ga|=n,a)}function Bb(n,a,o,u,m){var p=ie.p;ie.p=p!==0&&8>p?p:8;var b=B.T,E={};B.T=E,k0(n,!1,a,o);try{var D=m(),Q=B.S;if(Q!==null&&Q(E,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var ne=QS(D,u);Qc(n,a,ne,ms(n))}else Qc(n,a,u,ms(n))}catch(ae){Qc(n,a,{then:function(){},status:"rejected",reason:ae},ms())}finally{ie.p=p,b!==null&&E.types!==null&&(b.types=E.types),B.T=b}}function ej(){}function C0(n,a,o,u){if(n.tag!==5)throw Error(s(476));var m=qb(n).queue;Bb(n,m,a,Y,o===null?ej:function(){return Fb(n),o(u)})}function qb(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:Y},next:null};var o={};return a.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:o},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function Fb(n){var a=qb(n);a.next===null&&(a=n.alternate.memoizedState),Qc(n,a.next.queue,{},ms())}function R0(){return Sn(du)}function Hb(){return Jt().memoizedState}function Gb(){return Jt().memoizedState}function tj(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var o=ms();n=za(o);var u=Ua(a,n,o);u!==null&&(Zn(u,a,o),Fc(u,a,o)),a={cache:i0()},n.payload=a;return}a=a.return}}function nj(n,a,o){var u=ms();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},fh(n)?Kb(a,o):(o=Xm(n,a,o,u),o!==null&&(Zn(o,n,u),Qb(o,a,u)))}function $b(n,a,o){var u=ms();Qc(n,a,o,u)}function Qc(n,a,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(fh(n))Kb(a,m);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var b=a.lastRenderedState,E=p(b,o);if(m.hasEagerState=!0,m.eagerState=E,os(E,b))return Kd(n,a,m,0),It===null&&$d(),!1}catch{}finally{}if(o=Xm(n,a,m,u),o!==null)return Zn(o,n,u),Qb(o,a,u),!0}return!1}function k0(n,a,o,u){if(u={lane:2,revertLane:ug(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},fh(n)){if(a)throw Error(s(479))}else a=Xm(n,o,u,2),a!==null&&Zn(a,n,2)}function fh(n){var a=n.alternate;return n===He||a!==null&&a===He}function Kb(n,a){ro=ih=!0;var o=n.pending;o===null?a.next=a:(a.next=o.next,o.next=a),n.pending=a}function Qb(n,a,o){if((o&4194048)!==0){var u=a.lanes;u&=n.pendingLanes,o|=u,a.lanes=o,Ri(n,o)}}var Xc={readContext:Sn,use:ch,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht};Xc.useEffectEvent=Ht;var Xb={readContext:Sn,use:ch,useCallback:function(n,a){return qn().memoizedState=[n,a===void 0?null:a],n},useContext:Sn,useEffect:kb,useImperativeHandle:function(n,a,o){o=o!=null?o.concat([n]):null,dh(4194308,4,Vb.bind(null,a,n),o)},useLayoutEffect:function(n,a){return dh(4194308,4,n,a)},useInsertionEffect:function(n,a){dh(4,2,n,a)},useMemo:function(n,a){var o=qn();a=a===void 0?null:a;var u=n();if(Zi){Ut(!0);try{n()}finally{Ut(!1)}}return o.memoizedState=[u,a],u},useReducer:function(n,a,o){var u=qn();if(o!==void 0){var m=o(a);if(Zi){Ut(!0);try{o(a)}finally{Ut(!1)}}}else m=a;return u.memoizedState=u.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},u.queue=n,n=n.dispatch=nj.bind(null,He,n),[u.memoizedState,n]},useRef:function(n){var a=qn();return n={current:n},a.memoizedState=n},useState:function(n){n=T0(n);var a=n.queue,o=$b.bind(null,He,a);return a.dispatch=o,[n.memoizedState,o]},useDebugValue:A0,useDeferredValue:function(n,a){var o=qn();return I0(o,n,a)},useTransition:function(){var n=T0(!1);return n=Bb.bind(null,He,n.queue,!0,!1),qn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,o){var u=He,m=qn();if(st){if(o===void 0)throw Error(s(407));o=o()}else{if(o=a(),It===null)throw Error(s(349));(We&127)!==0||pb(u,a,o)}m.memoizedState=o;var p={value:o,getSnapshot:a};return m.queue=p,kb(yb.bind(null,u,p,n),[n]),u.flags|=2048,io(9,{destroy:void 0},xb.bind(null,u,p,o,a),null),o},useId:function(){var n=qn(),a=It.identifierPrefix;if(st){var o=_r,u=wr;o=(u&~(1<<32-nt(u)-1)).toString(32)+o,a="_"+a+"R_"+o,o=lh++,0<o&&(a+="H"+o.toString(32)),a+="_"}else o=XS++,a="_"+a+"r_"+o.toString(32)+"_";return n.memoizedState=a},useHostTransitionStatus:R0,useFormState:jb,useActionState:jb,useOptimistic:function(n){var a=qn();a.memoizedState=a.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=o,a=k0.bind(null,He,!0,o),o.dispatch=a,[n,a]},useMemoCache:_0,useCacheRefresh:function(){return qn().memoizedState=tj.bind(null,He)},useEffectEvent:function(n){var a=qn(),o={impl:n};return a.memoizedState=o,function(){if((ft&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},D0={readContext:Sn,use:ch,useCallback:Lb,useContext:Sn,useEffect:j0,useImperativeHandle:Pb,useInsertionEffect:Mb,useLayoutEffect:Ob,useMemo:zb,useReducer:uh,useRef:Rb,useState:function(){return uh(Qr)},useDebugValue:A0,useDeferredValue:function(n,a){var o=Jt();return Ub(o,Tt.memoizedState,n,a)},useTransition:function(){var n=uh(Qr)[0],a=Jt().memoizedState;return[typeof n=="boolean"?n:Kc(n),a]},useSyncExternalStore:gb,useId:Hb,useHostTransitionStatus:R0,useFormState:Ab,useActionState:Ab,useOptimistic:function(n,a){var o=Jt();return wb(o,Tt,n,a)},useMemoCache:_0,useCacheRefresh:Gb};D0.useEffectEvent=Db;var Yb={readContext:Sn,use:ch,useCallback:Lb,useContext:Sn,useEffect:j0,useImperativeHandle:Pb,useInsertionEffect:Mb,useLayoutEffect:Ob,useMemo:zb,useReducer:E0,useRef:Rb,useState:function(){return E0(Qr)},useDebugValue:A0,useDeferredValue:function(n,a){var o=Jt();return Tt===null?I0(o,n,a):Ub(o,Tt.memoizedState,n,a)},useTransition:function(){var n=E0(Qr)[0],a=Jt().memoizedState;return[typeof n=="boolean"?n:Kc(n),a]},useSyncExternalStore:gb,useId:Hb,useHostTransitionStatus:R0,useFormState:Cb,useActionState:Cb,useOptimistic:function(n,a){var o=Jt();return Tt!==null?wb(o,Tt,n,a):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:_0,useCacheRefresh:Gb};Yb.useEffectEvent=Db;function M0(n,a,o,u){a=n.memoizedState,o=o(u,a),o=o==null?a:v({},a,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var O0={enqueueSetState:function(n,a,o){n=n._reactInternals;var u=ms(),m=za(u);m.payload=a,o!=null&&(m.callback=o),a=Ua(n,m,u),a!==null&&(Zn(a,n,u),Fc(a,n,u))},enqueueReplaceState:function(n,a,o){n=n._reactInternals;var u=ms(),m=za(u);m.tag=1,m.payload=a,o!=null&&(m.callback=o),a=Ua(n,m,u),a!==null&&(Zn(a,n,u),Fc(a,n,u))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var o=ms(),u=za(o);u.tag=2,a!=null&&(u.callback=a),a=Ua(n,u,o),a!==null&&(Zn(a,n,o),Fc(a,n,o))}};function Jb(n,a,o,u,m,p,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,p,b):a.prototype&&a.prototype.isPureReactComponent?!Oc(o,u)||!Oc(m,p):!0}function Wb(n,a,o,u){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(o,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(o,u),a.state!==n&&O0.enqueueReplaceState(a,a.state,null)}function el(n,a){var o=a;if("ref"in a){o={};for(var u in a)u!=="ref"&&(o[u]=a[u])}if(n=n.defaultProps){o===a&&(o=v({},o));for(var m in n)o[m]===void 0&&(o[m]=n[m])}return o}function Zb(n){Gd(n)}function ev(n){console.error(n)}function tv(n){Gd(n)}function mh(n,a){try{var o=n.onUncaughtError;o(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function nv(n,a,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function V0(n,a,o){return o=za(o),o.tag=3,o.payload={element:null},o.callback=function(){mh(n,a)},o}function sv(n){return n=za(n),n.tag=3,n}function rv(n,a,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var p=u.value;n.payload=function(){return m(p)},n.callback=function(){nv(a,o,u)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(n.callback=function(){nv(a,o,u),typeof m!="function"&&($a===null?$a=new Set([this]):$a.add(this));var E=u.stack;this.componentDidCatch(u.value,{componentStack:E!==null?E:""})})}function sj(n,a,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=o.alternate,a!==null&&Wl(a,o,m,!0),o=us.current,o!==null){switch(o.tag){case 31:case 13:return Ds===null?Sh():o.alternate===null&&Gt===0&&(Gt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===th?o.flags|=16384:(a=o.updateQueue,a===null?o.updateQueue=new Set([u]):a.add(u),lg(n,u,m)),!1;case 22:return o.flags|=65536,u===th?o.flags|=16384:(a=o.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=a):(o=a.retryQueue,o===null?a.retryQueue=new Set([u]):o.add(u)),lg(n,u,m)),!1}throw Error(s(435,o.tag))}return lg(n,u,m),Sh(),!1}if(st)return a=us.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,u!==t0&&(n=Error(s(422),{cause:u}),Lc(Is(n,o)))):(u!==t0&&(a=Error(s(423),{cause:u}),Lc(Is(a,o))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,u=Is(u,o),m=V0(n.stateNode,u,m),h0(n,m),Gt!==4&&(Gt=2)),!1;var p=Error(s(520),{cause:u});if(p=Is(p,o),su===null?su=[p]:su.push(p),Gt!==4&&(Gt=2),a===null)return!0;u=Is(u,o),o=a;do{switch(o.tag){case 3:return o.flags|=65536,n=m&-m,o.lanes|=n,n=V0(o.stateNode,u,n),h0(o,n),!1;case 1:if(a=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&($a===null||!$a.has(p))))return o.flags|=65536,m&=-m,o.lanes|=m,m=sv(m),rv(m,n,o,u),h0(o,m),!1}o=o.return}while(o!==null);return!1}var P0=Error(s(461)),an=!1;function jn(n,a,o,u){a.child=n===null?ob(a,null,o,u):Wi(a,n.child,o,u)}function av(n,a,o,u,m){o=o.render;var p=a.ref;if("ref"in u){var b={};for(var E in u)E!=="ref"&&(b[E]=u[E])}else b=u;return Qi(a),u=y0(n,a,o,b,p,m),E=b0(),n!==null&&!an?(v0(n,a,m),Xr(n,a,m)):(st&&E&&Zm(a),a.flags|=1,jn(n,a,u,m),a.child)}function iv(n,a,o,u,m){if(n===null){var p=o.type;return typeof p=="function"&&!Ym(p)&&p.defaultProps===void 0&&o.compare===null?(a.tag=15,a.type=p,lv(n,a,p,u,m)):(n=Xd(o.type,null,u,a,a.mode,m),n.ref=a.ref,n.return=a,a.child=n)}if(p=n.child,!G0(n,m)){var b=p.memoizedProps;if(o=o.compare,o=o!==null?o:Oc,o(b,u)&&n.ref===a.ref)return Xr(n,a,m)}return a.flags|=1,n=Fr(p,u),n.ref=a.ref,n.return=a,a.child=n}function lv(n,a,o,u,m){if(n!==null){var p=n.memoizedProps;if(Oc(p,u)&&n.ref===a.ref)if(an=!1,a.pendingProps=u=p,G0(n,m))(n.flags&131072)!==0&&(an=!0);else return a.lanes=n.lanes,Xr(n,a,m)}return L0(n,a,o,u,m)}function ov(n,a,o,u){var m=u.children,p=n!==null?n.memoizedState:null;if(n===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,n!==null){for(u=a.child=n.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~p}else u=0,a.child=null;return cv(n,a,p,o,u)}if((o&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&Zd(a,p!==null?p.cachePool:null),p!==null?db(a,p):m0(),hb(a);else return u=a.lanes=536870912,cv(n,a,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(Zd(a,p.cachePool),db(a,p),qa(),a.memoizedState=null):(n!==null&&Zd(a,null),m0(),qa());return jn(n,a,m,o),a.child}function Yc(n,a){return n!==null&&n.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function cv(n,a,o,u,m){var p=o0();return p=p===null?null:{parent:sn._currentValue,pool:p},a.memoizedState={baseLanes:o,cachePool:p},n!==null&&Zd(a,null),m0(),hb(a),n!==null&&Wl(n,a,u,!0),a.childLanes=m,null}function gh(n,a){return a=xh({mode:a.mode,children:a.children},n.mode),a.ref=n.ref,n.child=a,a.return=n,a}function uv(n,a,o){return Wi(a,n.child,null,o),n=gh(a,a.pendingProps),n.flags|=2,ds(a),a.memoizedState=null,n}function rj(n,a,o){var u=a.pendingProps,m=(a.flags&128)!==0;if(a.flags&=-129,n===null){if(st){if(u.mode==="hidden")return n=gh(a,u),a.lanes=536870912,Yc(null,n);if(p0(a),(n=kt)?(n=_1(n,ks),n=n!==null&&n.data==="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:Ma!==null?{id:wr,overflow:_r}:null,retryLane:536870912,hydrationErrors:null},o=Ky(n),o.return=a,a.child=o,Tn=a,kt=null)):n=null,n===null)throw Va(a);return a.lanes=536870912,null}return gh(a,u)}var p=n.memoizedState;if(p!==null){var b=p.dehydrated;if(p0(a),m)if(a.flags&256)a.flags&=-257,a=uv(n,a,o);else if(a.memoizedState!==null)a.child=n.child,a.flags|=128,a=null;else throw Error(s(558));else if(an||Wl(n,a,o,!1),m=(o&n.childLanes)!==0,an||m){if(u=It,u!==null&&(b=xc(u,o),b!==0&&b!==p.retryLane))throw p.retryLane=b,Hi(n,b),Zn(u,n,b),P0;Sh(),a=uv(n,a,o)}else n=p.treeContext,kt=Ms(b.nextSibling),Tn=a,st=!0,Oa=null,ks=!1,n!==null&&Yy(a,n),a=gh(a,u),a.flags|=4096;return a}return n=Fr(n.child,{mode:u.mode,children:u.children}),n.ref=a.ref,a.child=n,n.return=a,n}function ph(n,a){var o=a.ref;if(o===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(n===null||n.ref!==o)&&(a.flags|=4194816)}}function L0(n,a,o,u,m){return Qi(a),o=y0(n,a,o,u,void 0,m),u=b0(),n!==null&&!an?(v0(n,a,m),Xr(n,a,m)):(st&&u&&Zm(a),a.flags|=1,jn(n,a,o,m),a.child)}function dv(n,a,o,u,m,p){return Qi(a),a.updateQueue=null,o=mb(a,u,o,m),fb(n),u=b0(),n!==null&&!an?(v0(n,a,p),Xr(n,a,p)):(st&&u&&Zm(a),a.flags|=1,jn(n,a,o,p),a.child)}function hv(n,a,o,u,m){if(Qi(a),a.stateNode===null){var p=Ql,b=o.contextType;typeof b=="object"&&b!==null&&(p=Sn(b)),p=new o(u,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=O0,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=u,p.state=a.memoizedState,p.refs={},u0(a),b=o.contextType,p.context=typeof b=="object"&&b!==null?Sn(b):Ql,p.state=a.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(M0(a,o,b,u),p.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(b=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),b!==p.state&&O0.enqueueReplaceState(p,p.state,null),Gc(a,u,p,m),Hc(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(n===null){p=a.stateNode;var E=a.memoizedProps,D=el(o,E);p.props=D;var Q=p.context,ne=o.contextType;b=Ql,typeof ne=="object"&&ne!==null&&(b=Sn(ne));var ae=o.getDerivedStateFromProps;ne=typeof ae=="function"||typeof p.getSnapshotBeforeUpdate=="function",E=a.pendingProps!==E,ne||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E||Q!==b)&&Wb(a,p,u,b),La=!1;var X=a.memoizedState;p.state=X,Gc(a,u,p,m),Hc(),Q=a.memoizedState,E||X!==Q||La?(typeof ae=="function"&&(M0(a,o,ae,u),Q=a.memoizedState),(D=La||Jb(a,o,D,u,X,Q,b))?(ne||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=Q),p.props=u,p.state=Q,p.context=b,u=D):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{p=a.stateNode,d0(n,a),b=a.memoizedProps,ne=el(o,b),p.props=ne,ae=a.pendingProps,X=p.context,Q=o.contextType,D=Ql,typeof Q=="object"&&Q!==null&&(D=Sn(Q)),E=o.getDerivedStateFromProps,(Q=typeof E=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b!==ae||X!==D)&&Wb(a,p,u,D),La=!1,X=a.memoizedState,p.state=X,Gc(a,u,p,m),Hc();var W=a.memoizedState;b!==ae||X!==W||La||n!==null&&n.dependencies!==null&&Jd(n.dependencies)?(typeof E=="function"&&(M0(a,o,E,u),W=a.memoizedState),(ne=La||Jb(a,o,ne,u,X,W,D)||n!==null&&n.dependencies!==null&&Jd(n.dependencies))?(Q||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,W,D),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,W,D)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=W),p.props=u,p.state=W,p.context=D,u=ne):(typeof p.componentDidUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&X===n.memoizedState||(a.flags|=1024),u=!1)}return p=u,ph(n,a),u=(a.flags&128)!==0,p||u?(p=a.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,n!==null&&u?(a.child=Wi(a,n.child,null,m),a.child=Wi(a,null,o,m)):jn(n,a,o,m),a.memoizedState=p.state,n=a.child):n=Xr(n,a,m),n}function fv(n,a,o,u){return $i(),a.flags|=256,jn(n,a,o,u),a.child}var z0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function U0(n){return{baseLanes:n,cachePool:nb()}}function B0(n,a,o){return n=n!==null?n.childLanes&~o:0,a&&(n|=fs),n}function mv(n,a,o){var u=a.pendingProps,m=!1,p=(a.flags&128)!==0,b;if((b=p)||(b=n!==null&&n.memoizedState===null?!1:(Yt.current&2)!==0),b&&(m=!0,a.flags&=-129),b=(a.flags&32)!==0,a.flags&=-33,n===null){if(st){if(m?Ba(a):qa(),(n=kt)?(n=_1(n,ks),n=n!==null&&n.data!=="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:Ma!==null?{id:wr,overflow:_r}:null,retryLane:536870912,hydrationErrors:null},o=Ky(n),o.return=a,a.child=o,Tn=a,kt=null)):n=null,n===null)throw Va(a);return Ng(n)?a.lanes=32:a.lanes=536870912,null}var E=u.children;return u=u.fallback,m?(qa(),m=a.mode,E=xh({mode:"hidden",children:E},m),u=Gi(u,m,o,null),E.return=a,u.return=a,E.sibling=u,a.child=E,u=a.child,u.memoizedState=U0(o),u.childLanes=B0(n,b,o),a.memoizedState=z0,Yc(null,u)):(Ba(a),q0(a,E))}var D=n.memoizedState;if(D!==null&&(E=D.dehydrated,E!==null)){if(p)a.flags&256?(Ba(a),a.flags&=-257,a=F0(n,a,o)):a.memoizedState!==null?(qa(),a.child=n.child,a.flags|=128,a=null):(qa(),E=u.fallback,m=a.mode,u=xh({mode:"visible",children:u.children},m),E=Gi(E,m,o,null),E.flags|=2,u.return=a,E.return=a,u.sibling=E,a.child=u,Wi(a,n.child,null,o),u=a.child,u.memoizedState=U0(o),u.childLanes=B0(n,b,o),a.memoizedState=z0,a=Yc(null,u));else if(Ba(a),Ng(E)){if(b=E.nextSibling&&E.nextSibling.dataset,b)var Q=b.dgst;b=Q,u=Error(s(419)),u.stack="",u.digest=b,Lc({value:u,source:null,stack:null}),a=F0(n,a,o)}else if(an||Wl(n,a,o,!1),b=(o&n.childLanes)!==0,an||b){if(b=It,b!==null&&(u=xc(b,o),u!==0&&u!==D.retryLane))throw D.retryLane=u,Hi(n,u),Zn(b,n,u),P0;_g(E)||Sh(),a=F0(n,a,o)}else _g(E)?(a.flags|=192,a.child=n.child,a=null):(n=D.treeContext,kt=Ms(E.nextSibling),Tn=a,st=!0,Oa=null,ks=!1,n!==null&&Yy(a,n),a=q0(a,u.children),a.flags|=4096);return a}return m?(qa(),E=u.fallback,m=a.mode,D=n.child,Q=D.sibling,u=Fr(D,{mode:"hidden",children:u.children}),u.subtreeFlags=D.subtreeFlags&65011712,Q!==null?E=Fr(Q,E):(E=Gi(E,m,o,null),E.flags|=2),E.return=a,u.return=a,u.sibling=E,a.child=u,Yc(null,u),u=a.child,E=n.child.memoizedState,E===null?E=U0(o):(m=E.cachePool,m!==null?(D=sn._currentValue,m=m.parent!==D?{parent:D,pool:D}:m):m=nb(),E={baseLanes:E.baseLanes|o,cachePool:m}),u.memoizedState=E,u.childLanes=B0(n,b,o),a.memoizedState=z0,Yc(n.child,u)):(Ba(a),o=n.child,n=o.sibling,o=Fr(o,{mode:"visible",children:u.children}),o.return=a,o.sibling=null,n!==null&&(b=a.deletions,b===null?(a.deletions=[n],a.flags|=16):b.push(n)),a.child=o,a.memoizedState=null,o)}function q0(n,a){return a=xh({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function xh(n,a){return n=cs(22,n,null,a),n.lanes=0,n}function F0(n,a,o){return Wi(a,n.child,null,o),n=q0(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function gv(n,a,o){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a),r0(n.return,a,o)}function H0(n,a,o,u,m,p){var b=n.memoizedState;b===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:p}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=u,b.tail=o,b.tailMode=m,b.treeForkCount=p)}function pv(n,a,o){var u=a.pendingProps,m=u.revealOrder,p=u.tail;u=u.children;var b=Yt.current,E=(b&2)!==0;if(E?(b=b&1|2,a.flags|=128):b&=1,U(Yt,b),jn(n,a,u,o),u=st?Pc:0,!E&&n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&gv(n,o,a);else if(n.tag===19)gv(n,o,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(o=a.child,m=null;o!==null;)n=o.alternate,n!==null&&ah(n)===null&&(m=o),o=o.sibling;o=m,o===null?(m=a.child,a.child=null):(m=o.sibling,o.sibling=null),H0(a,!1,m,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=a.child,a.child=null;m!==null;){if(n=m.alternate,n!==null&&ah(n)===null){a.child=m;break}n=m.sibling,m.sibling=o,o=m,m=n}H0(a,!0,o,null,p,u);break;case"together":H0(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function Xr(n,a,o){if(n!==null&&(a.dependencies=n.dependencies),Ga|=a.lanes,(o&a.childLanes)===0)if(n!==null){if(Wl(n,a,o,!1),(o&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(s(153));if(a.child!==null){for(n=a.child,o=Fr(n,n.pendingProps),a.child=o,o.return=a;n.sibling!==null;)n=n.sibling,o=o.sibling=Fr(n,n.pendingProps),o.return=a;o.sibling=null}return a.child}function G0(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&Jd(n)))}function aj(n,a,o){switch(a.tag){case 3:it(a,a.stateNode.containerInfo),Pa(a,sn,n.memoizedState.cache),$i();break;case 27:case 5:Nt(a);break;case 4:it(a,a.stateNode.containerInfo);break;case 10:Pa(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,p0(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(Ba(a),a.flags|=128,null):(o&a.child.childLanes)!==0?mv(n,a,o):(Ba(a),n=Xr(n,a,o),n!==null?n.sibling:null);Ba(a);break;case 19:var m=(n.flags&128)!==0;if(u=(o&a.childLanes)!==0,u||(Wl(n,a,o,!1),u=(o&a.childLanes)!==0),m){if(u)return pv(n,a,o);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),U(Yt,Yt.current),u)break;return null;case 22:return a.lanes=0,ov(n,a,o,a.pendingProps);case 24:Pa(a,sn,n.memoizedState.cache)}return Xr(n,a,o)}function xv(n,a,o){if(n!==null)if(n.memoizedProps!==a.pendingProps)an=!0;else{if(!G0(n,o)&&(a.flags&128)===0)return an=!1,aj(n,a,o);an=(n.flags&131072)!==0}else an=!1,st&&(a.flags&1048576)!==0&&Xy(a,Pc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(n=Yi(a.elementType),a.type=n,typeof n=="function")Ym(n)?(u=el(n,u),a.tag=1,a=hv(null,a,n,u,o)):(a.tag=0,a=L0(null,a,n,u,o));else{if(n!=null){var m=n.$$typeof;if(m===ve){a.tag=11,a=av(null,a,n,u,o);break e}else if(m===T){a.tag=14,a=iv(null,a,n,u,o);break e}}throw a=ce(n)||n,Error(s(306,a,""))}}return a;case 0:return L0(n,a,a.type,a.pendingProps,o);case 1:return u=a.type,m=el(u,a.pendingProps),hv(n,a,u,m,o);case 3:e:{if(it(a,a.stateNode.containerInfo),n===null)throw Error(s(387));u=a.pendingProps;var p=a.memoizedState;m=p.element,d0(n,a),Gc(a,u,null,o);var b=a.memoizedState;if(u=b.cache,Pa(a,sn,u),u!==p.cache&&a0(a,[sn],o,!0),Hc(),u=b.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:b.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=fv(n,a,u,o);break e}else if(u!==m){m=Is(Error(s(424)),a),Lc(m),a=fv(n,a,u,o);break e}else{switch(n=a.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(kt=Ms(n.firstChild),Tn=a,st=!0,Oa=null,ks=!0,o=ob(a,null,u,o),a.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if($i(),u===m){a=Xr(n,a,o);break e}jn(n,a,u,o)}a=a.child}return a;case 26:return ph(n,a),n===null?(o=A1(a.type,null,a.pendingProps,null))?a.memoizedState=o:st||(o=a.type,n=a.pendingProps,u=Dh(Me.current).createElement(o),u[en]=a,u[pn]=n,An(u,o,n),tn(u),a.stateNode=u):a.memoizedState=A1(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return Nt(a),n===null&&st&&(u=a.stateNode=T1(a.type,a.pendingProps,Me.current),Tn=a,ks=!0,m=kt,Ya(a.type)?(Eg=m,kt=Ms(u.firstChild)):kt=m),jn(n,a,a.pendingProps.children,o),ph(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&st&&((m=u=kt)&&(u=Oj(u,a.type,a.pendingProps,ks),u!==null?(a.stateNode=u,Tn=a,kt=Ms(u.firstChild),ks=!1,m=!0):m=!1),m||Va(a)),Nt(a),m=a.type,p=a.pendingProps,b=n!==null?n.memoizedProps:null,u=p.children,bg(m,p)?u=null:b!==null&&bg(m,b)&&(a.flags|=32),a.memoizedState!==null&&(m=y0(n,a,YS,null,null,o),du._currentValue=m),ph(n,a),jn(n,a,u,o),a.child;case 6:return n===null&&st&&((n=o=kt)&&(o=Vj(o,a.pendingProps,ks),o!==null?(a.stateNode=o,Tn=a,kt=null,n=!0):n=!1),n||Va(a)),null;case 13:return mv(n,a,o);case 4:return it(a,a.stateNode.containerInfo),u=a.pendingProps,n===null?a.child=Wi(a,null,u,o):jn(n,a,u,o),a.child;case 11:return av(n,a,a.type,a.pendingProps,o);case 7:return jn(n,a,a.pendingProps,o),a.child;case 8:return jn(n,a,a.pendingProps.children,o),a.child;case 12:return jn(n,a,a.pendingProps.children,o),a.child;case 10:return u=a.pendingProps,Pa(a,a.type,u.value),jn(n,a,u.children,o),a.child;case 9:return m=a.type._context,u=a.pendingProps.children,Qi(a),m=Sn(m),u=u(m),a.flags|=1,jn(n,a,u,o),a.child;case 14:return iv(n,a,a.type,a.pendingProps,o);case 15:return lv(n,a,a.type,a.pendingProps,o);case 19:return pv(n,a,o);case 31:return rj(n,a,o);case 22:return ov(n,a,o,a.pendingProps);case 24:return Qi(a),u=Sn(sn),n===null?(m=o0(),m===null&&(m=It,p=i0(),m.pooledCache=p,p.refCount++,p!==null&&(m.pooledCacheLanes|=o),m=p),a.memoizedState={parent:u,cache:m},u0(a),Pa(a,sn,m)):((n.lanes&o)!==0&&(d0(n,a),Gc(a,null,null,o),Hc()),m=n.memoizedState,p=a.memoizedState,m.parent!==u?(m={parent:u,cache:u},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),Pa(a,sn,u)):(u=p.cache,Pa(a,sn,u),u!==m.cache&&a0(a,[sn],o,!0))),jn(n,a,a.pendingProps.children,o),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function Yr(n){n.flags|=4}function $0(n,a,o,u,m){if((a=(n.mode&32)!==0)&&(a=!1),a){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(Hv())n.flags|=8192;else throw Ji=th,c0}else n.flags&=-16777217}function yv(n,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!D1(a))if(Hv())n.flags|=8192;else throw Ji=th,c0}function yh(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?At():536870912,n.lanes|=a,uo|=a)}function Jc(n,a){if(!st)switch(n.tailMode){case"hidden":a=n.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Dt(n){var a=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(a)for(var m=n.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=u,n.childLanes=o,a}function ij(n,a,o){var u=a.pendingProps;switch(e0(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(a),null;case 1:return Dt(a),null;case 3:return o=a.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),$r(sn),Re(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Jl(a)?Yr(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,n0())),Dt(a),null;case 26:var m=a.type,p=a.memoizedState;return n===null?(Yr(a),p!==null?(Dt(a),yv(a,p)):(Dt(a),$0(a,m,null,u,o))):p?p!==n.memoizedState?(Yr(a),Dt(a),yv(a,p)):(Dt(a),a.flags&=-16777217):(n=n.memoizedProps,n!==u&&Yr(a),Dt(a),$0(a,m,n,u,o)),null;case 27:if(gt(a),o=Me.current,m=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==u&&Yr(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return Dt(a),null}n=ee.current,Jl(a)?Jy(a):(n=T1(m,u,o),a.stateNode=n,Yr(a))}return Dt(a),null;case 5:if(gt(a),m=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==u&&Yr(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return Dt(a),null}if(p=ee.current,Jl(a))Jy(a);else{var b=Dh(Me.current);switch(p){case 1:p=b.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:p=b.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":p=b.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":p=b.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":p=b.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?b.createElement("select",{is:u.is}):b.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?b.createElement(m,{is:u.is}):b.createElement(m)}}p[en]=a,p[pn]=u;e:for(b=a.child;b!==null;){if(b.tag===5||b.tag===6)p.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===a)break e;for(;b.sibling===null;){if(b.return===null||b.return===a)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}a.stateNode=p;e:switch(An(p,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Yr(a)}}return Dt(a),$0(a,a.type,n===null?null:n.memoizedProps,a.pendingProps,o),null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==u&&Yr(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(s(166));if(n=Me.current,Jl(a)){if(n=a.stateNode,o=a.memoizedProps,u=null,m=Tn,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}n[en]=a,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||m1(n.nodeValue,o)),n||Va(a,!0)}else n=Dh(n).createTextNode(u),n[en]=a,a.stateNode=n}return Dt(a),null;case 31:if(o=a.memoizedState,n===null||n.memoizedState!==null){if(u=Jl(a),o!==null){if(n===null){if(!u)throw Error(s(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[en]=a}else $i(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dt(a),n=!1}else o=n0(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return a.flags&256?(ds(a),a):(ds(a),null);if((a.flags&128)!==0)throw Error(s(558))}return Dt(a),null;case 13:if(u=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=Jl(a),u!==null&&u.dehydrated!==null){if(n===null){if(!m)throw Error(s(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[en]=a}else $i(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dt(a),m=!1}else m=n0(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(ds(a),a):(ds(a),null)}return ds(a),(a.flags&128)!==0?(a.lanes=o,a):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=a.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==m&&(u.flags|=2048)),o!==n&&o&&(a.child.flags|=8192),yh(a,a.updateQueue),Dt(a),null);case 4:return Re(),n===null&&mg(a.stateNode.containerInfo),Dt(a),null;case 10:return $r(a.type),Dt(a),null;case 19:if(z(Yt),u=a.memoizedState,u===null)return Dt(a),null;if(m=(a.flags&128)!==0,p=u.rendering,p===null)if(m)Jc(u,!1);else{if(Gt!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(p=ah(n),p!==null){for(a.flags|=128,Jc(u,!1),n=p.updateQueue,a.updateQueue=n,yh(a,n),a.subtreeFlags=0,n=o,o=a.child;o!==null;)$y(o,n),o=o.sibling;return U(Yt,Yt.current&1|2),st&&Hr(a,u.treeForkCount),a.child}n=n.sibling}u.tail!==null&&Vt()>Nh&&(a.flags|=128,m=!0,Jc(u,!1),a.lanes=4194304)}else{if(!m)if(n=ah(p),n!==null){if(a.flags|=128,m=!0,n=n.updateQueue,a.updateQueue=n,yh(a,n),Jc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!st)return Dt(a),null}else 2*Vt()-u.renderingStartTime>Nh&&o!==536870912&&(a.flags|=128,m=!0,Jc(u,!1),a.lanes=4194304);u.isBackwards?(p.sibling=a.child,a.child=p):(n=u.last,n!==null?n.sibling=p:a.child=p,u.last=p)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Vt(),n.sibling=null,o=Yt.current,U(Yt,m?o&1|2:o&1),st&&Hr(a,u.treeForkCount),n):(Dt(a),null);case 22:case 23:return ds(a),g0(),u=a.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(o&536870912)!==0&&(a.flags&128)===0&&(Dt(a),a.subtreeFlags&6&&(a.flags|=8192)):Dt(a),o=a.updateQueue,o!==null&&yh(a,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==o&&(a.flags|=2048),n!==null&&z(Xi),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),$r(sn),Dt(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function lj(n,a){switch(e0(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return $r(sn),Re(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return gt(a),null;case 31:if(a.memoizedState!==null){if(ds(a),a.alternate===null)throw Error(s(340));$i()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 13:if(ds(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(s(340));$i()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return z(Yt),null;case 4:return Re(),null;case 10:return $r(a.type),null;case 22:case 23:return ds(a),g0(),n!==null&&z(Xi),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return $r(sn),null;case 25:return null;default:return null}}function bv(n,a){switch(e0(a),a.tag){case 3:$r(sn),Re();break;case 26:case 27:case 5:gt(a);break;case 4:Re();break;case 31:a.memoizedState!==null&&ds(a);break;case 13:ds(a);break;case 19:z(Yt);break;case 10:$r(a.type);break;case 22:case 23:ds(a),g0(),n!==null&&z(Xi);break;case 24:$r(sn)}}function Wc(n,a){try{var o=a.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&n)===n){u=void 0;var p=o.create,b=o.inst;u=p(),b.destroy=u}o=o.next}while(o!==m)}}catch(E){yt(a,a.return,E)}}function Fa(n,a,o){try{var u=a.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var p=m.next;u=p;do{if((u.tag&n)===n){var b=u.inst,E=b.destroy;if(E!==void 0){b.destroy=void 0,m=a;var D=o,Q=E;try{Q()}catch(ne){yt(m,D,ne)}}}u=u.next}while(u!==p)}}catch(ne){yt(a,a.return,ne)}}function vv(n){var a=n.updateQueue;if(a!==null){var o=n.stateNode;try{ub(a,o)}catch(u){yt(n,n.return,u)}}}function wv(n,a,o){o.props=el(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){yt(n,a,u)}}function Zc(n,a){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(m){yt(n,a,m)}}function Nr(n,a){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){yt(n,a,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){yt(n,a,m)}else o.current=null}function _v(n){var a=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){yt(n,n.return,m)}}function K0(n,a,o){try{var u=n.stateNode;Ij(u,n.type,o,a),u[pn]=a}catch(m){yt(n,n.return,m)}}function Nv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ya(n.type)||n.tag===4}function Q0(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Nv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ya(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function X0(n,a,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,a?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,a):(a=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,a.appendChild(n),o=o._reactRootContainer,o!=null||a.onclick!==null||(a.onclick=Fs));else if(u!==4&&(u===27&&Ya(n.type)&&(o=n.stateNode,a=null),n=n.child,n!==null))for(X0(n,a,o),n=n.sibling;n!==null;)X0(n,a,o),n=n.sibling}function bh(n,a,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,a?o.insertBefore(n,a):o.appendChild(n);else if(u!==4&&(u===27&&Ya(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(bh(n,a,o),n=n.sibling;n!==null;)bh(n,a,o),n=n.sibling}function Ev(n){var a=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);An(a,u,o),a[en]=n,a[pn]=o}catch(p){yt(n,n.return,p)}}var Jr=!1,ln=!1,Y0=!1,Tv=typeof WeakSet=="function"?WeakSet:Set,yn=null;function oj(n,a){if(n=n.containerInfo,xg=Uh,n=Py(n),Fm(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var b=0,E=-1,D=-1,Q=0,ne=0,ae=n,X=null;t:for(;;){for(var W;ae!==o||m!==0&&ae.nodeType!==3||(E=b+m),ae!==p||u!==0&&ae.nodeType!==3||(D=b+u),ae.nodeType===3&&(b+=ae.nodeValue.length),(W=ae.firstChild)!==null;)X=ae,ae=W;for(;;){if(ae===n)break t;if(X===o&&++Q===m&&(E=b),X===p&&++ne===u&&(D=b),(W=ae.nextSibling)!==null)break;ae=X,X=ae.parentNode}ae=W}o=E===-1||D===-1?null:{start:E,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(yg={focusedElem:n,selectionRange:o},Uh=!1,yn=a;yn!==null;)if(a=yn,n=a.child,(a.subtreeFlags&1028)!==0&&n!==null)n.return=a,yn=n;else for(;yn!==null;){switch(a=yn,p=a.alternate,n=a.flags,a.tag){case 0:if((n&4)!==0&&(n=a.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)m=n[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=a,m=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Se=el(o.type,m);n=u.getSnapshotBeforeUpdate(Se,p),u.__reactInternalSnapshotBeforeUpdate=n}catch(Oe){yt(o,o.return,Oe)}}break;case 3:if((n&1024)!==0){if(n=a.stateNode.containerInfo,o=n.nodeType,o===9)wg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":wg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=a.sibling,n!==null){n.return=a.return,yn=n;break}yn=a.return}}function Sv(n,a,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Zr(n,o),u&4&&Wc(5,o);break;case 1:if(Zr(n,o),u&4)if(n=o.stateNode,a===null)try{n.componentDidMount()}catch(b){yt(o,o.return,b)}else{var m=el(o.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(m,a,n.__reactInternalSnapshotBeforeUpdate)}catch(b){yt(o,o.return,b)}}u&64&&vv(o),u&512&&Zc(o,o.return);break;case 3:if(Zr(n,o),u&64&&(n=o.updateQueue,n!==null)){if(a=null,o.child!==null)switch(o.child.tag){case 27:case 5:a=o.child.stateNode;break;case 1:a=o.child.stateNode}try{ub(n,a)}catch(b){yt(o,o.return,b)}}break;case 27:a===null&&u&4&&Ev(o);case 26:case 5:Zr(n,o),a===null&&u&4&&_v(o),u&512&&Zc(o,o.return);break;case 12:Zr(n,o);break;case 31:Zr(n,o),u&4&&Iv(n,o);break;case 13:Zr(n,o),u&4&&Cv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=xj.bind(null,o),Pj(n,o))));break;case 22:if(u=o.memoizedState!==null||Jr,!u){a=a!==null&&a.memoizedState!==null||ln,m=Jr;var p=ln;Jr=u,(ln=a)&&!p?ea(n,o,(o.subtreeFlags&8772)!==0):Zr(n,o),Jr=m,ln=p}break;case 30:break;default:Zr(n,o)}}function jv(n){var a=n.alternate;a!==null&&(n.alternate=null,jv(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&Ml(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Lt=null,Xn=!1;function Wr(n,a,o){for(o=o.child;o!==null;)Av(n,a,o),o=o.sibling}function Av(n,a,o){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(Be,o)}catch{}switch(o.tag){case 26:ln||Nr(o,a),Wr(n,a,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ln||Nr(o,a);var u=Lt,m=Xn;Ya(o.type)&&(Lt=o.stateNode,Xn=!1),Wr(n,a,o),ou(o.stateNode),Lt=u,Xn=m;break;case 5:ln||Nr(o,a);case 6:if(u=Lt,m=Xn,Lt=null,Wr(n,a,o),Lt=u,Xn=m,Lt!==null)if(Xn)try{(Lt.nodeType===9?Lt.body:Lt.nodeName==="HTML"?Lt.ownerDocument.body:Lt).removeChild(o.stateNode)}catch(p){yt(o,a,p)}else try{Lt.removeChild(o.stateNode)}catch(p){yt(o,a,p)}break;case 18:Lt!==null&&(Xn?(n=Lt,v1(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),bo(n)):v1(Lt,o.stateNode));break;case 4:u=Lt,m=Xn,Lt=o.stateNode.containerInfo,Xn=!0,Wr(n,a,o),Lt=u,Xn=m;break;case 0:case 11:case 14:case 15:Fa(2,o,a),ln||Fa(4,o,a),Wr(n,a,o);break;case 1:ln||(Nr(o,a),u=o.stateNode,typeof u.componentWillUnmount=="function"&&wv(o,a,u)),Wr(n,a,o);break;case 21:Wr(n,a,o);break;case 22:ln=(u=ln)||o.memoizedState!==null,Wr(n,a,o),ln=u;break;default:Wr(n,a,o)}}function Iv(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{bo(n)}catch(o){yt(a,a.return,o)}}}function Cv(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{bo(n)}catch(o){yt(a,a.return,o)}}function cj(n){switch(n.tag){case 31:case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new Tv),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new Tv),a;default:throw Error(s(435,n.tag))}}function vh(n,a){var o=cj(n);a.forEach(function(u){if(!o.has(u)){o.add(u);var m=yj.bind(null,n,u);u.then(m,m)}})}function Yn(n,a){var o=a.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],p=n,b=a,E=b;e:for(;E!==null;){switch(E.tag){case 27:if(Ya(E.type)){Lt=E.stateNode,Xn=!1;break e}break;case 5:Lt=E.stateNode,Xn=!1;break e;case 3:case 4:Lt=E.stateNode.containerInfo,Xn=!0;break e}E=E.return}if(Lt===null)throw Error(s(160));Av(p,b,m),Lt=null,Xn=!1,p=m.alternate,p!==null&&(p.return=null),m.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Rv(a,n),a=a.sibling}var Xs=null;function Rv(n,a){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Yn(a,n),Jn(n),u&4&&(Fa(3,n,n.return),Wc(3,n),Fa(5,n,n.return));break;case 1:Yn(a,n),Jn(n),u&512&&(ln||o===null||Nr(o,o.return)),u&64&&Jr&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=Xs;if(Yn(a,n),Jn(n),u&512&&(ln||o===null||Nr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":p=m.getElementsByTagName("title")[0],(!p||p[cr]||p[en]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=m.createElement(u),m.head.insertBefore(p,m.querySelector("head > title"))),An(p,u,o),p[en]=n,tn(p),u=p;break e;case"link":var b=R1("link","href",m).get(u+(o.href||""));if(b){for(var E=0;E<b.length;E++)if(p=b[E],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(E,1);break t}}p=m.createElement(u),An(p,u,o),m.head.appendChild(p);break;case"meta":if(b=R1("meta","content",m).get(u+(o.content||""))){for(E=0;E<b.length;E++)if(p=b[E],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(E,1);break t}}p=m.createElement(u),An(p,u,o),m.head.appendChild(p);break;default:throw Error(s(468,u))}p[en]=n,tn(p),u=p}n.stateNode=u}else k1(m,n.type,n.stateNode);else n.stateNode=C1(m,u,n.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?k1(m,n.type,n.stateNode):C1(m,u,n.memoizedProps)):u===null&&n.stateNode!==null&&K0(n,n.memoizedProps,o.memoizedProps)}break;case 27:Yn(a,n),Jn(n),u&512&&(ln||o===null||Nr(o,o.return)),o!==null&&u&4&&K0(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Yn(a,n),Jn(n),u&512&&(ln||o===null||Nr(o,o.return)),n.flags&32){m=n.stateNode;try{Qn(m,"")}catch(Se){yt(n,n.return,Se)}}u&4&&n.stateNode!=null&&(m=n.memoizedProps,K0(n,m,o!==null?o.memoizedProps:m)),u&1024&&(Y0=!0);break;case 6:if(Yn(a,n),Jn(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(Se){yt(n,n.return,Se)}}break;case 3:if(Vh=null,m=Xs,Xs=Mh(a.containerInfo),Yn(a,n),Xs=m,Jn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{bo(a.containerInfo)}catch(Se){yt(n,n.return,Se)}Y0&&(Y0=!1,kv(n));break;case 4:u=Xs,Xs=Mh(n.stateNode.containerInfo),Yn(a,n),Jn(n),Xs=u;break;case 12:Yn(a,n),Jn(n);break;case 31:Yn(a,n),Jn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,vh(n,u)));break;case 13:Yn(a,n),Jn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(_h=Vt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,vh(n,u)));break;case 22:m=n.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,Q=Jr,ne=ln;if(Jr=Q||m,ln=ne||D,Yn(a,n),ln=ne,Jr=Q,Jn(n),u&8192)e:for(a=n.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(o===null||D||Jr||ln||tl(n)),o=null,a=n;;){if(a.tag===5||a.tag===26){if(o===null){D=o=a;try{if(p=D.stateNode,m)b=p.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{E=D.stateNode;var ae=D.memoizedProps.style,X=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;E.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Se){yt(D,D.return,Se)}}}else if(a.tag===6){if(o===null){D=a;try{D.stateNode.nodeValue=m?"":D.memoizedProps}catch(Se){yt(D,D.return,Se)}}}else if(a.tag===18){if(o===null){D=a;try{var W=D.stateNode;m?w1(W,!0):w1(D.stateNode,!1)}catch(Se){yt(D,D.return,Se)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;o===a&&(o=null),a=a.return}o===a&&(o=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,vh(n,o))));break;case 19:Yn(a,n),Jn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,vh(n,u)));break;case 30:break;case 21:break;default:Yn(a,n),Jn(n)}}function Jn(n){var a=n.flags;if(a&2){try{for(var o,u=n.return;u!==null;){if(Nv(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,p=Q0(n);bh(n,p,m);break;case 5:var b=o.stateNode;o.flags&32&&(Qn(b,""),o.flags&=-33);var E=Q0(n);bh(n,E,b);break;case 3:case 4:var D=o.stateNode.containerInfo,Q=Q0(n);X0(n,Q,D);break;default:throw Error(s(161))}}catch(ne){yt(n,n.return,ne)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function kv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;kv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function Zr(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Sv(n,a.alternate,a),a=a.sibling}function tl(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:Fa(4,a,a.return),tl(a);break;case 1:Nr(a,a.return);var o=a.stateNode;typeof o.componentWillUnmount=="function"&&wv(a,a.return,o),tl(a);break;case 27:ou(a.stateNode);case 26:case 5:Nr(a,a.return),tl(a);break;case 22:a.memoizedState===null&&tl(a);break;case 30:tl(a);break;default:tl(a)}n=n.sibling}}function ea(n,a,o){for(o=o&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,m=n,p=a,b=p.flags;switch(p.tag){case 0:case 11:case 15:ea(m,p,o),Wc(4,p);break;case 1:if(ea(m,p,o),u=p,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(Q){yt(u,u.return,Q)}if(u=p,m=u.updateQueue,m!==null){var E=u.stateNode;try{var D=m.shared.hiddenCallbacks;if(D!==null)for(m.shared.hiddenCallbacks=null,m=0;m<D.length;m++)cb(D[m],E)}catch(Q){yt(u,u.return,Q)}}o&&b&64&&vv(p),Zc(p,p.return);break;case 27:Ev(p);case 26:case 5:ea(m,p,o),o&&u===null&&b&4&&_v(p),Zc(p,p.return);break;case 12:ea(m,p,o);break;case 31:ea(m,p,o),o&&b&4&&Iv(m,p);break;case 13:ea(m,p,o),o&&b&4&&Cv(m,p);break;case 22:p.memoizedState===null&&ea(m,p,o),Zc(p,p.return);break;case 30:break;default:ea(m,p,o)}a=a.sibling}}function J0(n,a){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&zc(o))}function W0(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&zc(n))}function Ys(n,a,o,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Dv(n,a,o,u),a=a.sibling}function Dv(n,a,o,u){var m=a.flags;switch(a.tag){case 0:case 11:case 15:Ys(n,a,o,u),m&2048&&Wc(9,a);break;case 1:Ys(n,a,o,u);break;case 3:Ys(n,a,o,u),m&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&zc(n)));break;case 12:if(m&2048){Ys(n,a,o,u),n=a.stateNode;try{var p=a.memoizedProps,b=p.id,E=p.onPostCommit;typeof E=="function"&&E(b,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){yt(a,a.return,D)}}else Ys(n,a,o,u);break;case 31:Ys(n,a,o,u);break;case 13:Ys(n,a,o,u);break;case 23:break;case 22:p=a.stateNode,b=a.alternate,a.memoizedState!==null?p._visibility&2?Ys(n,a,o,u):eu(n,a):p._visibility&2?Ys(n,a,o,u):(p._visibility|=2,lo(n,a,o,u,(a.subtreeFlags&10256)!==0||!1)),m&2048&&J0(b,a);break;case 24:Ys(n,a,o,u),m&2048&&W0(a.alternate,a);break;default:Ys(n,a,o,u)}}function lo(n,a,o,u,m){for(m=m&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var p=n,b=a,E=o,D=u,Q=b.flags;switch(b.tag){case 0:case 11:case 15:lo(p,b,E,D,m),Wc(8,b);break;case 23:break;case 22:var ne=b.stateNode;b.memoizedState!==null?ne._visibility&2?lo(p,b,E,D,m):eu(p,b):(ne._visibility|=2,lo(p,b,E,D,m)),m&&Q&2048&&J0(b.alternate,b);break;case 24:lo(p,b,E,D,m),m&&Q&2048&&W0(b.alternate,b);break;default:lo(p,b,E,D,m)}a=a.sibling}}function eu(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var o=n,u=a,m=u.flags;switch(u.tag){case 22:eu(o,u),m&2048&&J0(u.alternate,u);break;case 24:eu(o,u),m&2048&&W0(u.alternate,u);break;default:eu(o,u)}a=a.sibling}}var tu=8192;function oo(n,a,o){if(n.subtreeFlags&tu)for(n=n.child;n!==null;)Mv(n,a,o),n=n.sibling}function Mv(n,a,o){switch(n.tag){case 26:oo(n,a,o),n.flags&tu&&n.memoizedState!==null&&Xj(o,Xs,n.memoizedState,n.memoizedProps);break;case 5:oo(n,a,o);break;case 3:case 4:var u=Xs;Xs=Mh(n.stateNode.containerInfo),oo(n,a,o),Xs=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=tu,tu=16777216,oo(n,a,o),tu=u):oo(n,a,o));break;default:oo(n,a,o)}}function Ov(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function nu(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];yn=u,Pv(u,n)}Ov(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Vv(n),n=n.sibling}function Vv(n){switch(n.tag){case 0:case 11:case 15:nu(n),n.flags&2048&&Fa(9,n,n.return);break;case 3:nu(n);break;case 12:nu(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,wh(n)):nu(n);break;default:nu(n)}}function wh(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];yn=u,Pv(u,n)}Ov(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:Fa(8,a,a.return),wh(a);break;case 22:o=a.stateNode,o._visibility&2&&(o._visibility&=-3,wh(a));break;default:wh(a)}n=n.sibling}}function Pv(n,a){for(;yn!==null;){var o=yn;switch(o.tag){case 0:case 11:case 15:Fa(8,o,a);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:zc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,yn=u;else e:for(o=n;yn!==null;){u=yn;var m=u.sibling,p=u.return;if(jv(u),u===o){yn=null;break e}if(m!==null){m.return=p,yn=m;break e}yn=p}}}var uj={getCacheForType:function(n){var a=Sn(sn),o=a.data.get(n);return o===void 0&&(o=n(),a.data.set(n,o)),o},cacheSignal:function(){return Sn(sn).controller.signal}},dj=typeof WeakMap=="function"?WeakMap:Map,ft=0,It=null,Ke=null,We=0,xt=0,hs=null,Ha=!1,co=!1,Z0=!1,ta=0,Gt=0,Ga=0,nl=0,eg=0,fs=0,uo=0,su=null,Wn=null,tg=!1,_h=0,Lv=0,Nh=1/0,Eh=null,$a=null,dn=0,Ka=null,ho=null,na=0,ng=0,sg=null,zv=null,ru=0,rg=null;function ms(){return(ft&2)!==0&&We!==0?We&-We:B.T!==null?ug():Td()}function Uv(){if(fs===0)if((We&536870912)===0||st){var n=he;he<<=1,(he&3932160)===0&&(he=262144),fs=n}else fs=536870912;return n=us.current,n!==null&&(n.flags|=32),fs}function Zn(n,a,o){(n===It&&(xt===2||xt===9)||n.cancelPendingCommit!==null)&&(fo(n,0),Qa(n,We,fs,!1)),dt(n,o),((ft&2)===0||n!==It)&&(n===It&&((ft&2)===0&&(nl|=o),Gt===4&&Qa(n,We,fs,!1)),Er(n))}function Bv(n,a,o){if((ft&6)!==0)throw Error(s(327));var u=!o&&(a&127)===0&&(a&n.expiredLanes)===0||Le(n,a),m=u?mj(n,a):ig(n,a,!0),p=u;do{if(m===0){co&&!u&&Qa(n,a,0,!1);break}else{if(o=n.current.alternate,p&&!hj(o)){m=ig(n,a,!1),p=!1;continue}if(m===2){if(p=a,n.errorRecoveryDisabledLanes&p)var b=0;else b=n.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){a=b;e:{var E=n;m=su;var D=E.current.memoizedState.isDehydrated;if(D&&(fo(E,b).flags|=256),b=ig(E,b,!1),b!==2){if(Z0&&!D){E.errorRecoveryDisabledLanes|=p,nl|=p,m=4;break e}p=Wn,Wn=m,p!==null&&(Wn===null?Wn=p:Wn.push.apply(Wn,p))}m=b}if(p=!1,m!==2)continue}}if(m===1){fo(n,0),Qa(n,a,0,!0);break}e:{switch(u=n,p=m,p){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:Qa(u,a,fs,!Ha);break e;case 2:Wn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(m=_h+300-Vt(),10<m)){if(Qa(u,a,fs,!Ha),ye(u,0,!0)!==0)break e;na=a,u.timeoutHandle=y1(qv.bind(null,u,o,Wn,Eh,tg,a,fs,nl,uo,Ha,p,"Throttled",-0,0),m);break e}qv(u,o,Wn,Eh,tg,a,fs,nl,uo,Ha,p,null,-0,0)}}break}while(!0);Er(n)}function qv(n,a,o,u,m,p,b,E,D,Q,ne,ae,X,W){if(n.timeoutHandle=-1,ae=a.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fs},Mv(a,p,ae);var Se=(p&62914560)===p?_h-Vt():(p&4194048)===p?Lv-Vt():0;if(Se=Yj(ae,Se),Se!==null){na=p,n.cancelPendingCommit=Se(Yv.bind(null,n,a,p,o,u,m,b,E,D,ne,ae,null,X,W)),Qa(n,p,b,!Q);return}}Yv(n,a,p,o,u,m,b,E,D)}function hj(n){for(var a=n;;){var o=a.tag;if((o===0||o===11||o===15)&&a.flags&16384&&(o=a.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],p=m.getSnapshot;m=m.value;try{if(!os(p(),m))return!1}catch{return!1}}if(o=a.child,a.subtreeFlags&16384&&o!==null)o.return=a,a=o;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Qa(n,a,o,u){a&=~eg,a&=~nl,n.suspendedLanes|=a,n.pingedLanes&=~a,u&&(n.warmLanes|=a),u=n.expirationTimes;for(var m=a;0<m;){var p=31-nt(m),b=1<<p;u[p]=-1,m&=~b}o!==0&&gn(n,o,a)}function Th(){return(ft&6)===0?(au(0),!1):!0}function ag(){if(Ke!==null){if(xt===0)var n=Ke.return;else n=Ke,Gr=Ki=null,w0(n),no=null,Bc=0,n=Ke;for(;n!==null;)bv(n.alternate,n),n=n.return;Ke=null}}function fo(n,a){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,kj(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),na=0,ag(),It=n,Ke=o=Fr(n.current,null),We=a,xt=0,hs=null,Ha=!1,co=Le(n,a),Z0=!1,uo=fs=eg=nl=Ga=Gt=0,Wn=su=null,tg=!1,(a&8)!==0&&(a|=a&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=a;0<u;){var m=31-nt(u),p=1<<m;a|=n[m],u&=~p}return ta=a,$d(),o}function Fv(n,a){He=null,B.H=Xc,a===to||a===eh?(a=ab(),xt=3):a===c0?(a=ab(),xt=4):xt=a===P0?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,hs=a,Ke===null&&(Gt=1,mh(n,Is(a,n.current)))}function Hv(){var n=us.current;return n===null?!0:(We&4194048)===We?Ds===null:(We&62914560)===We||(We&536870912)!==0?n===Ds:!1}function Gv(){var n=B.H;return B.H=Xc,n===null?Xc:n}function $v(){var n=B.A;return B.A=uj,n}function Sh(){Gt=4,Ha||(We&4194048)!==We&&us.current!==null||(co=!0),(Ga&134217727)===0&&(nl&134217727)===0||It===null||Qa(It,We,fs,!1)}function ig(n,a,o){var u=ft;ft|=2;var m=Gv(),p=$v();(It!==n||We!==a)&&(Eh=null,fo(n,a)),a=!1;var b=Gt;e:do try{if(xt!==0&&Ke!==null){var E=Ke,D=hs;switch(xt){case 8:ag(),b=6;break e;case 3:case 2:case 9:case 6:us.current===null&&(a=!0);var Q=xt;if(xt=0,hs=null,mo(n,E,D,Q),o&&co){b=0;break e}break;default:Q=xt,xt=0,hs=null,mo(n,E,D,Q)}}fj(),b=Gt;break}catch(ne){Fv(n,ne)}while(!0);return a&&n.shellSuspendCounter++,Gr=Ki=null,ft=u,B.H=m,B.A=p,Ke===null&&(It=null,We=0,$d()),b}function fj(){for(;Ke!==null;)Kv(Ke)}function mj(n,a){var o=ft;ft|=2;var u=Gv(),m=$v();It!==n||We!==a?(Eh=null,Nh=Vt()+500,fo(n,a)):co=Le(n,a);e:do try{if(xt!==0&&Ke!==null){a=Ke;var p=hs;t:switch(xt){case 1:xt=0,hs=null,mo(n,a,p,1);break;case 2:case 9:if(sb(p)){xt=0,hs=null,Qv(a);break}a=function(){xt!==2&&xt!==9||It!==n||(xt=7),Er(n)},p.then(a,a);break e;case 3:xt=7;break e;case 4:xt=5;break e;case 7:sb(p)?(xt=0,hs=null,Qv(a)):(xt=0,hs=null,mo(n,a,p,7));break;case 5:var b=null;switch(Ke.tag){case 26:b=Ke.memoizedState;case 5:case 27:var E=Ke;if(b?D1(b):E.stateNode.complete){xt=0,hs=null;var D=E.sibling;if(D!==null)Ke=D;else{var Q=E.return;Q!==null?(Ke=Q,jh(Q)):Ke=null}break t}}xt=0,hs=null,mo(n,a,p,5);break;case 6:xt=0,hs=null,mo(n,a,p,6);break;case 8:ag(),Gt=6;break e;default:throw Error(s(462))}}gj();break}catch(ne){Fv(n,ne)}while(!0);return Gr=Ki=null,B.H=u,B.A=m,ft=o,Ke!==null?0:(It=null,We=0,$d(),Gt)}function gj(){for(;Ke!==null&&!wa();)Kv(Ke)}function Kv(n){var a=xv(n.alternate,n,ta);n.memoizedProps=n.pendingProps,a===null?jh(n):Ke=a}function Qv(n){var a=n,o=a.alternate;switch(a.tag){case 15:case 0:a=dv(o,a,a.pendingProps,a.type,void 0,We);break;case 11:a=dv(o,a,a.pendingProps,a.type.render,a.ref,We);break;case 5:w0(a);default:bv(o,a),a=Ke=$y(a,ta),a=xv(o,a,ta)}n.memoizedProps=n.pendingProps,a===null?jh(n):Ke=a}function mo(n,a,o,u){Gr=Ki=null,w0(a),no=null,Bc=0;var m=a.return;try{if(sj(n,m,a,o,We)){Gt=1,mh(n,Is(o,n.current)),Ke=null;return}}catch(p){if(m!==null)throw Ke=m,p;Gt=1,mh(n,Is(o,n.current)),Ke=null;return}a.flags&32768?(st||u===1?n=!0:co||(We&536870912)!==0?n=!1:(Ha=n=!0,(u===2||u===9||u===3||u===6)&&(u=us.current,u!==null&&u.tag===13&&(u.flags|=16384))),Xv(a,n)):jh(a)}function jh(n){var a=n;do{if((a.flags&32768)!==0){Xv(a,Ha);return}n=a.return;var o=ij(a.alternate,a,ta);if(o!==null){Ke=o;return}if(a=a.sibling,a!==null){Ke=a;return}Ke=a=n}while(a!==null);Gt===0&&(Gt=5)}function Xv(n,a){do{var o=lj(n.alternate,n);if(o!==null){o.flags&=32767,Ke=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!a&&(n=n.sibling,n!==null)){Ke=n;return}Ke=n=o}while(n!==null);Gt=6,Ke=null}function Yv(n,a,o,u,m,p,b,E,D){n.cancelPendingCommit=null;do Ah();while(dn!==0);if((ft&6)!==0)throw Error(s(327));if(a!==null){if(a===n.current)throw Error(s(177));if(p=a.lanes|a.childLanes,p|=Qm,Bt(n,o,p,b,E,D),n===It&&(Ke=It=null,We=0),ho=a,Ka=n,na=o,ng=p,sg=m,zv=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,bj(Nn,function(){return t1(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=B.T,B.T=null,m=ie.p,ie.p=2,b=ft,ft|=4;try{oj(n,a,o)}finally{ft=b,ie.p=m,B.T=u}}dn=1,Jv(),Wv(),Zv()}}function Jv(){if(dn===1){dn=0;var n=Ka,a=ho,o=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||o){o=B.T,B.T=null;var u=ie.p;ie.p=2;var m=ft;ft|=4;try{Rv(a,n);var p=yg,b=Py(n.containerInfo),E=p.focusedElem,D=p.selectionRange;if(b!==E&&E&&E.ownerDocument&&Vy(E.ownerDocument.documentElement,E)){if(D!==null&&Fm(E)){var Q=D.start,ne=D.end;if(ne===void 0&&(ne=Q),"selectionStart"in E)E.selectionStart=Q,E.selectionEnd=Math.min(ne,E.value.length);else{var ae=E.ownerDocument||document,X=ae&&ae.defaultView||window;if(X.getSelection){var W=X.getSelection(),Se=E.textContent.length,Oe=Math.min(D.start,Se),jt=D.end===void 0?Oe:Math.min(D.end,Se);!W.extend&&Oe>jt&&(b=jt,jt=Oe,Oe=b);var q=Oy(E,Oe),L=Oy(E,jt);if(q&&L&&(W.rangeCount!==1||W.anchorNode!==q.node||W.anchorOffset!==q.offset||W.focusNode!==L.node||W.focusOffset!==L.offset)){var K=ae.createRange();K.setStart(q.node,q.offset),W.removeAllRanges(),Oe>jt?(W.addRange(K),W.extend(L.node,L.offset)):(K.setEnd(L.node,L.offset),W.addRange(K))}}}}for(ae=[],W=E;W=W.parentNode;)W.nodeType===1&&ae.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ae.length;E++){var re=ae[E];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Uh=!!xg,yg=xg=null}finally{ft=m,ie.p=u,B.T=o}}n.current=a,dn=2}}function Wv(){if(dn===2){dn=0;var n=Ka,a=ho,o=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||o){o=B.T,B.T=null;var u=ie.p;ie.p=2;var m=ft;ft|=4;try{Sv(n,a.alternate,a)}finally{ft=m,ie.p=u,B.T=o}}dn=3}}function Zv(){if(dn===4||dn===3){dn=0,_a();var n=Ka,a=ho,o=na,u=zv;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?dn=5:(dn=0,ho=Ka=null,e1(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&($a=null),zr(o),a=a.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(Be,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=B.T,m=ie.p,ie.p=2,B.T=null;try{for(var p=n.onRecoverableError,b=0;b<u.length;b++){var E=u[b];p(E.value,{componentStack:E.stack})}}finally{B.T=a,ie.p=m}}(na&3)!==0&&Ah(),Er(n),m=n.pendingLanes,(o&261930)!==0&&(m&42)!==0?n===rg?ru++:(ru=0,rg=n):ru=0,au(0)}}function e1(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,zc(a)))}function Ah(){return Jv(),Wv(),Zv(),t1()}function t1(){if(dn!==5)return!1;var n=Ka,a=ng;ng=0;var o=zr(na),u=B.T,m=ie.p;try{ie.p=32>o?32:o,B.T=null,o=sg,sg=null;var p=Ka,b=na;if(dn=0,ho=Ka=null,na=0,(ft&6)!==0)throw Error(s(331));var E=ft;if(ft|=4,Vv(p.current),Dv(p,p.current,b,o),ft=E,au(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(Be,p)}catch{}return!0}finally{ie.p=m,B.T=u,e1(n,a)}}function n1(n,a,o){a=Is(o,a),a=V0(n.stateNode,a,2),n=Ua(n,a,2),n!==null&&(dt(n,2),Er(n))}function yt(n,a,o){if(n.tag===3)n1(n,n,o);else for(;a!==null;){if(a.tag===3){n1(a,n,o);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&($a===null||!$a.has(u))){n=Is(o,n),o=sv(2),u=Ua(a,o,2),u!==null&&(rv(o,u,a,n),dt(u,2),Er(u));break}}a=a.return}}function lg(n,a,o){var u=n.pingCache;if(u===null){u=n.pingCache=new dj;var m=new Set;u.set(a,m)}else m=u.get(a),m===void 0&&(m=new Set,u.set(a,m));m.has(o)||(Z0=!0,m.add(o),n=pj.bind(null,n,a,o),a.then(n,n))}function pj(n,a,o){var u=n.pingCache;u!==null&&u.delete(a),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,It===n&&(We&o)===o&&(Gt===4||Gt===3&&(We&62914560)===We&&300>Vt()-_h?(ft&2)===0&&fo(n,0):eg|=o,uo===We&&(uo=0)),Er(n)}function s1(n,a){a===0&&(a=At()),n=Hi(n,a),n!==null&&(dt(n,a),Er(n))}function xj(n){var a=n.memoizedState,o=0;a!==null&&(o=a.retryLane),s1(n,o)}function yj(n,a){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,m=n.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(a),s1(n,o)}function bj(n,a){return Ot(n,a)}var Ih=null,go=null,og=!1,Ch=!1,cg=!1,Xa=0;function Er(n){n!==go&&n.next===null&&(go===null?Ih=go=n:go=go.next=n),Ch=!0,og||(og=!0,wj())}function au(n,a){if(!cg&&Ch){cg=!0;do for(var o=!1,u=Ih;u!==null;){if(n!==0){var m=u.pendingLanes;if(m===0)var p=0;else{var b=u.suspendedLanes,E=u.pingedLanes;p=(1<<31-nt(42|n)+1)-1,p&=m&~(b&~E),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,l1(u,p))}else p=We,p=ye(u,u===It?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Le(u,p)||(o=!0,l1(u,p));u=u.next}while(o);cg=!1}}function vj(){r1()}function r1(){Ch=og=!1;var n=0;Xa!==0&&Rj()&&(n=Xa);for(var a=Vt(),o=null,u=Ih;u!==null;){var m=u.next,p=a1(u,a);p===0?(u.next=null,o===null?Ih=m:o.next=m,m===null&&(go=o)):(o=u,(n!==0||(p&3)!==0)&&(Ch=!0)),u=m}dn!==0&&dn!==5||au(n),Xa!==0&&(Xa=0)}function a1(n,a){for(var o=n.suspendedLanes,u=n.pingedLanes,m=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var b=31-nt(p),E=1<<b,D=m[b];D===-1?((E&o)===0||(E&u)!==0)&&(m[b]=Je(E,a)):D<=a&&(n.expiredLanes|=E),p&=~E}if(a=It,o=We,o=ye(n,n===a?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===a&&(xt===2||xt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&mn(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Le(n,o)){if(a=o&-o,a===n.callbackPriority)return a;switch(u!==null&&mn(u),zr(o)){case 2:case 8:o=Pr;break;case 32:o=Nn;break;case 268435456:o=Ea;break;default:o=Nn}return u=i1.bind(null,n),o=Ot(o,u),n.callbackPriority=a,n.callbackNode=o,a}return u!==null&&u!==null&&mn(u),n.callbackPriority=2,n.callbackNode=null,2}function i1(n,a){if(dn!==0&&dn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Ah()&&n.callbackNode!==o)return null;var u=We;return u=ye(n,n===It?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Bv(n,u,a),a1(n,Vt()),n.callbackNode!=null&&n.callbackNode===o?i1.bind(null,n):null)}function l1(n,a){if(Ah())return null;Bv(n,a,!0)}function wj(){Dj(function(){(ft&6)!==0?Ot(ir,vj):r1()})}function ug(){if(Xa===0){var n=Zl;n===0&&(n=$n,$n<<=1,($n&261888)===0&&($n=256)),Xa=n}return Xa}function o1(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ll(""+n)}function c1(n,a){var o=a.ownerDocument.createElement("input");return o.name=a.name,o.value=a.value,n.id&&o.setAttribute("form",n.id),a.parentNode.insertBefore(o,a),n=new FormData(n),o.parentNode.removeChild(o),n}function _j(n,a,o,u,m){if(a==="submit"&&o&&o.stateNode===m){var p=o1((m[pn]||null).action),b=u.submitter;b&&(a=(a=b[pn]||null)?o1(a.formAction):b.getAttribute("formAction"),a!==null&&(p=a,b=null));var E=new xr("action","action",null,u,m);n.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Xa!==0){var D=b?c1(m,b):new FormData(m);C0(o,{pending:!0,data:D,method:m.method,action:p},null,D)}}else typeof p=="function"&&(E.preventDefault(),D=b?c1(m,b):new FormData(m),C0(o,{pending:!0,data:D,method:m.method,action:p},p,D))},currentTarget:m}]})}}for(var dg=0;dg<Km.length;dg++){var hg=Km[dg],Nj=hg.toLowerCase(),Ej=hg[0].toUpperCase()+hg.slice(1);Qs(Nj,"on"+Ej)}Qs(Uy,"onAnimationEnd"),Qs(By,"onAnimationIteration"),Qs(qy,"onAnimationStart"),Qs("dblclick","onDoubleClick"),Qs("focusin","onFocus"),Qs("focusout","onBlur"),Qs(US,"onTransitionRun"),Qs(BS,"onTransitionStart"),Qs(qS,"onTransitionCancel"),Qs(Fy,"onTransitionEnd"),fr("onMouseEnter",["mouseout","mouseover"]),fr("onMouseLeave",["mouseout","mouseover"]),fr("onPointerEnter",["pointerout","pointerover"]),fr("onPointerLeave",["pointerout","pointerover"]),hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hr("onBeforeInput",["compositionend","keypress","textInput","paste"]),hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(iu));function u1(n,a){a=(a&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],m=u.event;u=u.listeners;e:{var p=void 0;if(a)for(var b=u.length-1;0<=b;b--){var E=u[b],D=E.instance,Q=E.currentTarget;if(E=E.listener,D!==p&&m.isPropagationStopped())break e;p=E,m.currentTarget=Q;try{p(m)}catch(ne){Gd(ne)}m.currentTarget=null,p=D}else for(b=0;b<u.length;b++){if(E=u[b],D=E.instance,Q=E.currentTarget,E=E.listener,D!==p&&m.isPropagationStopped())break e;p=E,m.currentTarget=Q;try{p(m)}catch(ne){Gd(ne)}m.currentTarget=null,p=D}}}}function Qe(n,a){var o=a[Dl];o===void 0&&(o=a[Dl]=new Set);var u=n+"__bubble";o.has(u)||(d1(a,n,2,!1),o.add(u))}function fg(n,a,o){var u=0;a&&(u|=4),d1(o,n,u,a)}var Rh="_reactListening"+Math.random().toString(36).slice(2);function mg(n){if(!n[Rh]){n[Rh]=!0,yc.forEach(function(o){o!=="selectionchange"&&(Tj.has(o)||fg(o,!1,n),fg(o,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[Rh]||(a[Rh]=!0,fg("selectionchange",!1,a))}}function d1(n,a,o,u){switch(U1(a)){case 2:var m=Zj;break;case 8:m=e4;break;default:m=Ig}o=m.bind(null,a,o,n),m=void 0,!Vi||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),u?m!==void 0?n.addEventListener(a,o,{capture:!0,passive:m}):n.addEventListener(a,o,!0):m!==void 0?n.addEventListener(a,o,{passive:m}):n.addEventListener(a,o,!1)}function gg(n,a,o,u,m){var p=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var E=u.stateNode.containerInfo;if(E===m)break;if(b===4)for(b=u.return;b!==null;){var D=b.tag;if((D===3||D===4)&&b.stateNode.containerInfo===m)return;b=b.return}for(;E!==null;){if(b=ur(E),b===null)return;if(D=b.tag,D===5||D===6||D===26||D===27){u=p=b;continue e}E=E.parentNode}}u=u.return}Ca(function(){var Q=p,ne=Ts(o),ae=[];e:{var X=Hy.get(n);if(X!==void 0){var W=xr,Se=n;switch(n){case"keypress":if(Li(o)===0)break e;case"keydown":case"keyup":W=qd;break;case"focusin":Se="focus",W=Ui;break;case"focusout":Se="blur",W=Ui;break;case"beforeblur":case"afterblur":W=Ui;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Rc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=y;break;case Uy:case By:case qy:W=Od;break;case Fy:W=S;break;case"scroll":case"scrollend":W=Cc;break;case"wheel":W=J;break;case"copy":case"cut":case"paste":W=Vd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=qr;break;case"toggle":case"beforetoggle":W=Fe}var Oe=(a&4)!==0,jt=!Oe&&(n==="scroll"||n==="scrollend"),q=Oe?X!==null?X+"Capture":null:X;Oe=[];for(var L=Q,K;L!==null;){var re=L;if(K=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||K===null||q===null||(re=Hs(L,q),re!=null&&Oe.push(lu(L,re,K))),jt)break;L=L.return}0<Oe.length&&(X=new W(X,Se,null,o,ne),ae.push({event:X,listeners:Oe}))}}if((a&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",W=n==="mouseout"||n==="pointerout",X&&o!==jc&&(Se=o.relatedTarget||o.fromElement)&&(ur(Se)||Se[or]))break e;if((W||X)&&(X=ne.window===ne?ne:(X=ne.ownerDocument)?X.defaultView||X.parentWindow:window,W?(Se=o.relatedTarget||o.toElement,W=Q,Se=Se?ur(Se):null,Se!==null&&(jt=c(Se),Oe=Se.tag,Se!==jt||Oe!==5&&Oe!==27&&Oe!==6)&&(Se=null)):(W=null,Se=Q),W!==Se)){if(Oe=Rc,re="onMouseLeave",q="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(Oe=qr,re="onPointerLeave",q="onPointerEnter",L="pointer"),jt=W==null?X:is(W),K=Se==null?X:is(Se),X=new Oe(re,L+"leave",W,o,ne),X.target=jt,X.relatedTarget=K,re=null,ur(ne)===Q&&(Oe=new Oe(q,L+"enter",Se,o,ne),Oe.target=K,Oe.relatedTarget=jt,re=Oe),jt=re,W&&Se)t:{for(Oe=Sj,q=W,L=Se,K=0,re=q;re;re=Oe(re))K++;re=0;for(var ke=L;ke;ke=Oe(ke))re++;for(;0<K-re;)q=Oe(q),K--;for(;0<re-K;)L=Oe(L),re--;for(;K--;){if(q===L||L!==null&&q===L.alternate){Oe=q;break t}q=Oe(q),L=Oe(L)}Oe=null}else Oe=null;W!==null&&h1(ae,X,W,Oe,!1),Se!==null&&jt!==null&&h1(ae,jt,Se,Oe,!0)}}e:{if(X=Q?is(Q):window,W=X.nodeName&&X.nodeName.toLowerCase(),W==="select"||W==="input"&&X.type==="file")var ot=Iy;else if(jy(X))if(Cy)ot=PS;else{ot=OS;var Ae=MS}else W=X.nodeName,!W||W.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&Pl(Q.elementType)&&(ot=Iy):ot=VS;if(ot&&(ot=ot(n,Q))){Ay(ae,ot,o,ne);break e}Ae&&Ae(n,X,Q),n==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&Ec(X,"number",X.value)}switch(Ae=Q?is(Q):window,n){case"focusin":(jy(Ae)||Ae.contentEditable==="true")&&(Gl=Ae,Hm=Q,Vc=null);break;case"focusout":Vc=Hm=Gl=null;break;case"mousedown":Gm=!0;break;case"contextmenu":case"mouseup":case"dragend":Gm=!1,Ly(ae,o,ne);break;case"selectionchange":if(zS)break;case"keydown":case"keyup":Ly(ae,o,ne)}var Ge;if(ht)e:{switch(n){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else Hl?Bi(n,o)&&(Ze="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ze="onCompositionStart");Ze&&(vr&&o.locale!=="ko"&&(Hl||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&Hl&&(Ge=Ic()):(pr=ne,Ac="value"in pr?pr.value:pr.textContent,Hl=!0)),Ae=kh(Q,Ze),0<Ae.length&&(Ze=new br(Ze,n,null,o,ne),ae.push({event:Ze,listeners:Ae}),Ge?Ze.data=Ge:(Ge=Fl(o),Ge!==null&&(Ze.data=Ge)))),(Ge=js?CS(n,o):RS(n,o))&&(Ze=kh(Q,"onBeforeInput"),0<Ze.length&&(Ae=new br("onBeforeInput","beforeinput",null,o,ne),ae.push({event:Ae,listeners:Ze}),Ae.data=Ge)),_j(ae,n,Q,o,ne)}u1(ae,a)})}function lu(n,a,o){return{instance:n,listener:a,currentTarget:o}}function kh(n,a){for(var o=a+"Capture",u=[];n!==null;){var m=n,p=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||p===null||(m=Hs(n,o),m!=null&&u.unshift(lu(n,m,p)),m=Hs(n,a),m!=null&&u.push(lu(n,m,p))),n.tag===3)return u;n=n.return}return[]}function Sj(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function h1(n,a,o,u,m){for(var p=a._reactName,b=[];o!==null&&o!==u;){var E=o,D=E.alternate,Q=E.stateNode;if(E=E.tag,D!==null&&D===u)break;E!==5&&E!==26&&E!==27||Q===null||(D=Q,m?(Q=Hs(o,p),Q!=null&&b.unshift(lu(o,Q,D))):m||(Q=Hs(o,p),Q!=null&&b.push(lu(o,Q,D)))),o=o.return}b.length!==0&&n.push({event:a,listeners:b})}var jj=/\r\n?/g,Aj=/\u0000|\uFFFD/g;function f1(n){return(typeof n=="string"?n:""+n).replace(jj,`
`).replace(Aj,"")}function m1(n,a){return a=f1(a),f1(n)===a}function St(n,a,o,u,m,p){switch(o){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||Qn(n,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&Qn(n,""+u);break;case"className":ls(n,"class",u);break;case"tabIndex":ls(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ls(n,o,u);break;case"style":Sc(n,u,p);break;case"data":if(a!=="object"){ls(n,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ll(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(a!=="input"&&St(n,a,"name",m.name,m,null),St(n,a,"formEncType",m.formEncType,m,null),St(n,a,"formMethod",m.formMethod,m,null),St(n,a,"formTarget",m.formTarget,m,null)):(St(n,a,"encType",m.encType,m,null),St(n,a,"method",m.method,m,null),St(n,a,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ll(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Fs);break;case"onScroll":u!=null&&Qe("scroll",n);break;case"onScrollEnd":u!=null&&Qe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Ll(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Qe("beforetoggle",n),Qe("toggle",n),Ol(n,"popover",u);break;case"xlinkActuate":nn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":nn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":nn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":nn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":nn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":nn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":nn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":nn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":nn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ol(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=kd.get(o)||o,Ol(n,o,u))}}function pg(n,a,o,u,m,p){switch(o){case"style":Sc(n,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Qn(n,u):(typeof u=="number"||typeof u=="bigint")&&Qn(n,""+u);break;case"onScroll":u!=null&&Qe("scroll",n);break;case"onScrollEnd":u!=null&&Qe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Fs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bc.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),a=o.slice(2,m?o.length-7:void 0),p=n[pn]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(a,p,m),typeof u=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(a,u,m);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Ol(n,o,u)}}}function An(n,a,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",n),Qe("load",n);var u=!1,m=!1,p;for(p in o)if(o.hasOwnProperty(p)){var b=o[p];if(b!=null)switch(p){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:St(n,a,p,b,o,null)}}m&&St(n,a,"srcSet",o.srcSet,o,null),u&&St(n,a,"src",o.src,o,null);return;case"input":Qe("invalid",n);var E=p=b=m=null,D=null,Q=null;for(u in o)if(o.hasOwnProperty(u)){var ne=o[u];if(ne!=null)switch(u){case"name":m=ne;break;case"type":b=ne;break;case"checked":D=ne;break;case"defaultChecked":Q=ne;break;case"value":p=ne;break;case"defaultValue":E=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,a));break;default:St(n,a,u,ne,o,null)}}Id(n,p,E,D,Q,b,m,!1);return;case"select":Qe("invalid",n),u=b=p=null;for(m in o)if(o.hasOwnProperty(m)&&(E=o[m],E!=null))switch(m){case"value":p=E;break;case"defaultValue":b=E;break;case"multiple":u=E;default:St(n,a,m,E,o,null)}a=p,o=b,n.multiple=!!u,a!=null?Sa(n,!!u,a,!1):o!=null&&Sa(n,!!u,o,!0);return;case"textarea":Qe("invalid",n),p=m=u=null;for(b in o)if(o.hasOwnProperty(b)&&(E=o[b],E!=null))switch(b){case"value":u=E;break;case"defaultValue":m=E;break;case"children":p=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:St(n,a,b,E,o,null)}ja(n,u,m,p);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(u=o[D],u!=null))switch(D){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:St(n,a,D,u,o,null)}return;case"dialog":Qe("beforetoggle",n),Qe("toggle",n),Qe("cancel",n),Qe("close",n);break;case"iframe":case"object":Qe("load",n);break;case"video":case"audio":for(u=0;u<iu.length;u++)Qe(iu[u],n);break;case"image":Qe("error",n),Qe("load",n);break;case"details":Qe("toggle",n);break;case"embed":case"source":case"link":Qe("error",n),Qe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in o)if(o.hasOwnProperty(Q)&&(u=o[Q],u!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:St(n,a,Q,u,o,null)}return;default:if(Pl(a)){for(ne in o)o.hasOwnProperty(ne)&&(u=o[ne],u!==void 0&&pg(n,a,ne,u,o,void 0));return}}for(E in o)o.hasOwnProperty(E)&&(u=o[E],u!=null&&St(n,a,E,u,o,null))}function Ij(n,a,o,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,p=null,b=null,E=null,D=null,Q=null,ne=null;for(W in o){var ae=o[W];if(o.hasOwnProperty(W)&&ae!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":D=ae;default:u.hasOwnProperty(W)||St(n,a,W,null,u,ae)}}for(var X in u){var W=u[X];if(ae=o[X],u.hasOwnProperty(X)&&(W!=null||ae!=null))switch(X){case"type":p=W;break;case"name":m=W;break;case"checked":Q=W;break;case"defaultChecked":ne=W;break;case"value":b=W;break;case"defaultValue":E=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,a));break;default:W!==ae&&St(n,a,X,W,u,ae)}}Vl(n,b,E,D,Q,ne,p,m);return;case"select":W=b=E=X=null;for(p in o)if(D=o[p],o.hasOwnProperty(p)&&D!=null)switch(p){case"value":break;case"multiple":W=D;default:u.hasOwnProperty(p)||St(n,a,p,null,u,D)}for(m in u)if(p=u[m],D=o[m],u.hasOwnProperty(m)&&(p!=null||D!=null))switch(m){case"value":X=p;break;case"defaultValue":E=p;break;case"multiple":b=p;default:p!==D&&St(n,a,m,p,u,D)}a=E,o=b,u=W,X!=null?Sa(n,!!o,X,!1):!!u!=!!o&&(a!=null?Sa(n,!!o,a,!0):Sa(n,!!o,o?[]:"",!1));return;case"textarea":W=X=null;for(E in o)if(m=o[E],o.hasOwnProperty(E)&&m!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:St(n,a,E,null,u,m)}for(b in u)if(m=u[b],p=o[b],u.hasOwnProperty(b)&&(m!=null||p!=null))switch(b){case"value":X=m;break;case"defaultValue":W=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==p&&St(n,a,b,m,u,p)}Cd(n,X,W);return;case"option":for(var Se in o)if(X=o[Se],o.hasOwnProperty(Se)&&X!=null&&!u.hasOwnProperty(Se))switch(Se){case"selected":n.selected=!1;break;default:St(n,a,Se,null,u,X)}for(D in u)if(X=u[D],W=o[D],u.hasOwnProperty(D)&&X!==W&&(X!=null||W!=null))switch(D){case"selected":n.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:St(n,a,D,X,u,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in o)X=o[Oe],o.hasOwnProperty(Oe)&&X!=null&&!u.hasOwnProperty(Oe)&&St(n,a,Oe,null,u,X);for(Q in u)if(X=u[Q],W=o[Q],u.hasOwnProperty(Q)&&X!==W&&(X!=null||W!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,a));break;default:St(n,a,Q,X,u,W)}return;default:if(Pl(a)){for(var jt in o)X=o[jt],o.hasOwnProperty(jt)&&X!==void 0&&!u.hasOwnProperty(jt)&&pg(n,a,jt,void 0,u,X);for(ne in u)X=u[ne],W=o[ne],!u.hasOwnProperty(ne)||X===W||X===void 0&&W===void 0||pg(n,a,ne,X,u,W);return}}for(var q in o)X=o[q],o.hasOwnProperty(q)&&X!=null&&!u.hasOwnProperty(q)&&St(n,a,q,null,u,X);for(ae in u)X=u[ae],W=o[ae],!u.hasOwnProperty(ae)||X===W||X==null&&W==null||St(n,a,ae,X,u,W)}function g1(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Cj(){if(typeof performance.getEntriesByType=="function"){for(var n=0,a=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],p=m.transferSize,b=m.initiatorType,E=m.duration;if(p&&E&&g1(b)){for(b=0,E=m.responseEnd,u+=1;u<o.length;u++){var D=o[u],Q=D.startTime;if(Q>E)break;var ne=D.transferSize,ae=D.initiatorType;ne&&g1(ae)&&(D=D.responseEnd,b+=ne*(D<E?1:(E-Q)/(D-Q)))}if(--u,a+=8*(p+b)/(m.duration/1e3),n++,10<n)break}}if(0<n)return a/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var xg=null,yg=null;function Dh(n){return n.nodeType===9?n:n.ownerDocument}function p1(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function x1(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function bg(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var vg=null;function Rj(){var n=window.event;return n&&n.type==="popstate"?n===vg?!1:(vg=n,!0):(vg=null,!1)}var y1=typeof setTimeout=="function"?setTimeout:void 0,kj=typeof clearTimeout=="function"?clearTimeout:void 0,b1=typeof Promise=="function"?Promise:void 0,Dj=typeof queueMicrotask=="function"?queueMicrotask:typeof b1<"u"?function(n){return b1.resolve(null).then(n).catch(Mj)}:y1;function Mj(n){setTimeout(function(){throw n})}function Ya(n){return n==="head"}function v1(n,a){var o=a,u=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(m),bo(a);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")ou(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,ou(o);for(var p=o.firstChild;p;){var b=p.nextSibling,E=p.nodeName;p[cr]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=b}}else o==="body"&&ou(n.ownerDocument.body);o=m}while(o);bo(a)}function w1(n,a){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?a?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(a?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function wg(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var o=a;switch(a=a.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":wg(o),Ml(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function Oj(n,a,o,u){for(;n.nodeType===1;){var m=o;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[cr])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var p=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=Ms(n.nextSibling),n===null)break}return null}function Vj(n,a,o){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Ms(n.nextSibling),n===null))return null;return n}function _1(n,a){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Ms(n.nextSibling),n===null))return null;return n}function _g(n){return n.data==="$?"||n.data==="$~"}function Ng(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Pj(n,a){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=a;else if(n.data!=="$?"||o.readyState!=="loading")a();else{var u=function(){a(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Ms(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return n}var Eg=null;function N1(n){n=n.nextSibling;for(var a=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(a===0)return Ms(n.nextSibling);a--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||a++}n=n.nextSibling}return null}function E1(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(a===0)return n;a--}else o!=="/$"&&o!=="/&"||a++}n=n.previousSibling}return null}function T1(n,a,o){switch(a=Dh(o),n){case"html":if(n=a.documentElement,!n)throw Error(s(452));return n;case"head":if(n=a.head,!n)throw Error(s(453));return n;case"body":if(n=a.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function ou(n){for(var a=n.attributes;a.length;)n.removeAttributeNode(a[0]);Ml(n)}var Os=new Map,S1=new Set;function Mh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var sa=ie.d;ie.d={f:Lj,r:zj,D:Uj,C:Bj,L:qj,m:Fj,X:Gj,S:Hj,M:$j};function Lj(){var n=sa.f(),a=Th();return n||a}function zj(n){var a=Es(n);a!==null&&a.tag===5&&a.type==="form"?Fb(a):sa.r(n)}var po=typeof document>"u"?null:document;function j1(n,a,o){var u=po;if(u&&typeof a=="string"&&a){var m=Kn(a);m='link[rel="'+n+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),S1.has(m)||(S1.add(m),n={rel:n,crossOrigin:o,href:a},u.querySelector(m)===null&&(a=u.createElement("link"),An(a,"link",n),tn(a),u.head.appendChild(a)))}}function Uj(n){sa.D(n),j1("dns-prefetch",n,null)}function Bj(n,a){sa.C(n,a),j1("preconnect",n,a)}function qj(n,a,o){sa.L(n,a,o);var u=po;if(u&&n&&a){var m='link[rel="preload"][as="'+Kn(a)+'"]';a==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Kn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Kn(o.imageSizes)+'"]')):m+='[href="'+Kn(n)+'"]';var p=m;switch(a){case"style":p=xo(n);break;case"script":p=yo(n)}Os.has(p)||(n=v({rel:"preload",href:a==="image"&&o&&o.imageSrcSet?void 0:n,as:a},o),Os.set(p,n),u.querySelector(m)!==null||a==="style"&&u.querySelector(cu(p))||a==="script"&&u.querySelector(uu(p))||(a=u.createElement("link"),An(a,"link",n),tn(a),u.head.appendChild(a)))}}function Fj(n,a){sa.m(n,a);var o=po;if(o&&n){var u=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+Kn(u)+'"][href="'+Kn(n)+'"]',p=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=yo(n)}if(!Os.has(p)&&(n=v({rel:"modulepreload",href:n},a),Os.set(p,n),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(uu(p)))return}u=o.createElement("link"),An(u,"link",n),tn(u),o.head.appendChild(u)}}}function Hj(n,a,o){sa.S(n,a,o);var u=po;if(u&&n){var m=dr(u).hoistableStyles,p=xo(n);a=a||"default";var b=m.get(p);if(!b){var E={loading:0,preload:null};if(b=u.querySelector(cu(p)))E.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":a},o),(o=Os.get(p))&&Tg(n,o);var D=b=u.createElement("link");tn(D),An(D,"link",n),D._p=new Promise(function(Q,ne){D.onload=Q,D.onerror=ne}),D.addEventListener("load",function(){E.loading|=1}),D.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Oh(b,a,u)}b={type:"stylesheet",instance:b,count:1,state:E},m.set(p,b)}}}function Gj(n,a){sa.X(n,a);var o=po;if(o&&n){var u=dr(o).hoistableScripts,m=yo(n),p=u.get(m);p||(p=o.querySelector(uu(m)),p||(n=v({src:n,async:!0},a),(a=Os.get(m))&&Sg(n,a),p=o.createElement("script"),tn(p),An(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(m,p))}}function $j(n,a){sa.M(n,a);var o=po;if(o&&n){var u=dr(o).hoistableScripts,m=yo(n),p=u.get(m);p||(p=o.querySelector(uu(m)),p||(n=v({src:n,async:!0,type:"module"},a),(a=Os.get(m))&&Sg(n,a),p=o.createElement("script"),tn(p),An(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(m,p))}}function A1(n,a,o,u){var m=(m=Me.current)?Mh(m):null;if(!m)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(a=xo(o.href),o=dr(m).hoistableStyles,u=o.get(a),u||(u={type:"style",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=xo(o.href);var p=dr(m).hoistableStyles,b=p.get(n);if(b||(m=m.ownerDocument||m,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,b),(p=m.querySelector(cu(n)))&&!p._p&&(b.instance=p,b.state.loading=5),Os.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Os.set(n,o),p||Kj(m,n,o,b.state))),a&&u===null)throw Error(s(528,""));return b}if(a&&u!==null)throw Error(s(529,""));return null;case"script":return a=o.async,o=o.src,typeof o=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=yo(o),o=dr(m).hoistableScripts,u=o.get(a),u||(u={type:"script",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function xo(n){return'href="'+Kn(n)+'"'}function cu(n){return'link[rel="stylesheet"]['+n+"]"}function I1(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function Kj(n,a,o,u){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=n.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),An(a,"link",o),tn(a),n.head.appendChild(a))}function yo(n){return'[src="'+Kn(n)+'"]'}function uu(n){return"script[async]"+n}function C1(n,a,o){if(a.count++,a.instance===null)switch(a.type){case"style":var u=n.querySelector('style[data-href~="'+Kn(o.href)+'"]');if(u)return a.instance=u,tn(u),u;var m=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),tn(u),An(u,"style",m),Oh(u,o.precedence,n),a.instance=u;case"stylesheet":m=xo(o.href);var p=n.querySelector(cu(m));if(p)return a.state.loading|=4,a.instance=p,tn(p),p;u=I1(o),(m=Os.get(m))&&Tg(u,m),p=(n.ownerDocument||n).createElement("link"),tn(p);var b=p;return b._p=new Promise(function(E,D){b.onload=E,b.onerror=D}),An(p,"link",u),a.state.loading|=4,Oh(p,o.precedence,n),a.instance=p;case"script":return p=yo(o.src),(m=n.querySelector(uu(p)))?(a.instance=m,tn(m),m):(u=o,(m=Os.get(p))&&(u=v({},o),Sg(u,m)),n=n.ownerDocument||n,m=n.createElement("script"),tn(m),An(m,"link",u),n.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Oh(u,o.precedence,n));return a.instance}function Oh(n,a,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,p=m,b=0;b<u.length;b++){var E=u[b];if(E.dataset.precedence===a)p=E;else if(p!==m)break}p?p.parentNode.insertBefore(n,p.nextSibling):(a=o.nodeType===9?o.head:o,a.insertBefore(n,a.firstChild))}function Tg(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function Sg(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var Vh=null;function R1(n,a,o){if(Vh===null){var u=new Map,m=Vh=new Map;m.set(o,u)}else m=Vh,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),m=0;m<o.length;m++){var p=o[m];if(!(p[cr]||p[en]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var b=p.getAttribute(a)||"";b=n+b;var E=u.get(b);E?E.push(p):u.set(b,[p])}}return u}function k1(n,a,o){n=n.ownerDocument||n,n.head.insertBefore(o,a==="title"?n.querySelector("head > title"):null)}function Qj(n,a,o){if(o===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return n=a.disabled,typeof a.precedence=="string"&&n==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function D1(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Xj(n,a,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=xo(u.href),p=a.querySelector(cu(m));if(p){a=p._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(n.count++,n=Ph.bind(n),a.then(n,n)),o.state.loading|=4,o.instance=p,tn(p);return}p=a.ownerDocument||a,u=I1(u),(m=Os.get(m))&&Tg(u,m),p=p.createElement("link"),tn(p);var b=p;b._p=new Promise(function(E,D){b.onload=E,b.onerror=D}),An(p,"link",u),o.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Ph.bind(n),a.addEventListener("load",o),a.addEventListener("error",o))}}var jg=0;function Yj(n,a){return n.stylesheets&&n.count===0&&zh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&zh(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+a);0<n.imgBytes&&jg===0&&(jg=62500*Cj());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&zh(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>jg?50:800)+a);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function Ph(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Lh=null;function zh(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Lh=new Map,a.forEach(Jj,n),Lh=null,Ph.call(n))}function Jj(n,a){if(!(a.state.loading&4)){var o=Lh.get(n);if(o)var u=o.get(null);else{o=new Map,Lh.set(n,o);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<m.length;p++){var b=m[p];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),u=b)}u&&o.set(null,u)}m=a.instance,b=m.getAttribute("data-precedence"),p=o.get(b)||u,p===u&&o.set(null,m),o.set(b,m),this.count++,u=Ph.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),p?p.parentNode.insertBefore(m,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),a.state.loading|=4}}var du={$$typeof:ue,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function Wj(n,a,o,u,m,p,b,E,D){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ut(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ut(0),this.hiddenUpdates=ut(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=p,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function M1(n,a,o,u,m,p,b,E,D,Q,ne,ae){return n=new Wj(n,a,o,b,D,Q,ne,ae,E),a=1,p===!0&&(a|=24),p=cs(3,null,null,a),n.current=p,p.stateNode=n,a=i0(),a.refCount++,n.pooledCache=a,a.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:a},u0(p),n}function O1(n){return n?(n=Ql,n):Ql}function V1(n,a,o,u,m,p){m=O1(m),u.context===null?u.context=m:u.pendingContext=m,u=za(a),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Ua(n,u,a),o!==null&&(Zn(o,n,a),Fc(o,n,a))}function P1(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<a?o:a}}function Ag(n,a){P1(n,a),(n=n.alternate)&&P1(n,a)}function L1(n){if(n.tag===13||n.tag===31){var a=Hi(n,67108864);a!==null&&Zn(a,n,67108864),Ag(n,67108864)}}function z1(n){if(n.tag===13||n.tag===31){var a=ms();a=ki(a);var o=Hi(n,a);o!==null&&Zn(o,n,a),Ag(n,a)}}var Uh=!0;function Zj(n,a,o,u){var m=B.T;B.T=null;var p=ie.p;try{ie.p=2,Ig(n,a,o,u)}finally{ie.p=p,B.T=m}}function e4(n,a,o,u){var m=B.T;B.T=null;var p=ie.p;try{ie.p=8,Ig(n,a,o,u)}finally{ie.p=p,B.T=m}}function Ig(n,a,o,u){if(Uh){var m=Cg(u);if(m===null)gg(n,a,u,Bh,o),B1(n,u);else if(n4(m,n,a,o,u))u.stopPropagation();else if(B1(n,u),a&4&&-1<t4.indexOf(n)){for(;m!==null;){var p=Es(m);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var b=Ie(p.pendingLanes);if(b!==0){var E=p;for(E.pendingLanes|=2,E.entangledLanes|=2;b;){var D=1<<31-nt(b);E.entanglements[1]|=D,b&=~D}Er(p),(ft&6)===0&&(Nh=Vt()+500,au(0))}}break;case 31:case 13:E=Hi(p,2),E!==null&&Zn(E,p,2),Th(),Ag(p,2)}if(p=Cg(u),p===null&&gg(n,a,u,Bh,o),p===m)break;m=p}m!==null&&u.stopPropagation()}else gg(n,a,u,null,o)}}function Cg(n){return n=Ts(n),Rg(n)}var Bh=null;function Rg(n){if(Bh=null,n=ur(n),n!==null){var a=c(n);if(a===null)n=null;else{var o=a.tag;if(o===13){if(n=d(a),n!==null)return n;n=null}else if(o===31){if(n=f(a),n!==null)return n;n=null}else if(o===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return Bh=n,null}function U1(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ns()){case ir:return 2;case Pr:return 8;case Nn:case Na:return 32;case Ea:return 268435456;default:return 32}default:return 32}}var kg=!1,Ja=null,Wa=null,Za=null,hu=new Map,fu=new Map,ei=[],t4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function B1(n,a){switch(n){case"focusin":case"focusout":Ja=null;break;case"dragenter":case"dragleave":Wa=null;break;case"mouseover":case"mouseout":Za=null;break;case"pointerover":case"pointerout":hu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":fu.delete(a.pointerId)}}function mu(n,a,o,u,m,p){return n===null||n.nativeEvent!==p?(n={blockedOn:a,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[m]},a!==null&&(a=Es(a),a!==null&&L1(a)),n):(n.eventSystemFlags|=u,a=n.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),n)}function n4(n,a,o,u,m){switch(a){case"focusin":return Ja=mu(Ja,n,a,o,u,m),!0;case"dragenter":return Wa=mu(Wa,n,a,o,u,m),!0;case"mouseover":return Za=mu(Za,n,a,o,u,m),!0;case"pointerover":var p=m.pointerId;return hu.set(p,mu(hu.get(p)||null,n,a,o,u,m)),!0;case"gotpointercapture":return p=m.pointerId,fu.set(p,mu(fu.get(p)||null,n,a,o,u,m)),!0}return!1}function q1(n){var a=ur(n.target);if(a!==null){var o=c(a);if(o!==null){if(a=o.tag,a===13){if(a=d(o),a!==null){n.blockedOn=a,Bs(n.priority,function(){z1(o)});return}}else if(a===31){if(a=f(o),a!==null){n.blockedOn=a,Bs(n.priority,function(){z1(o)});return}}else if(a===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function qh(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var o=Cg(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);jc=u,o.target.dispatchEvent(u),jc=null}else return a=Es(o),a!==null&&L1(a),n.blockedOn=o,!1;a.shift()}return!0}function F1(n,a,o){qh(n)&&o.delete(a)}function s4(){kg=!1,Ja!==null&&qh(Ja)&&(Ja=null),Wa!==null&&qh(Wa)&&(Wa=null),Za!==null&&qh(Za)&&(Za=null),hu.forEach(F1),fu.forEach(F1)}function Fh(n,a){n.blockedOn===a&&(n.blockedOn=null,kg||(kg=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,s4)))}var Hh=null;function H1(n){Hh!==n&&(Hh=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Hh===n&&(Hh=null);for(var a=0;a<n.length;a+=3){var o=n[a],u=n[a+1],m=n[a+2];if(typeof u!="function"){if(Rg(u||o)===null)continue;break}var p=Es(o);p!==null&&(n.splice(a,3),a-=3,C0(p,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function bo(n){function a(D){return Fh(D,n)}Ja!==null&&Fh(Ja,n),Wa!==null&&Fh(Wa,n),Za!==null&&Fh(Za,n),hu.forEach(a),fu.forEach(a);for(var o=0;o<ei.length;o++){var u=ei[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ei.length&&(o=ei[0],o.blockedOn===null);)q1(o),o.blockedOn===null&&ei.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],p=o[u+1],b=m[pn]||null;if(typeof p=="function")b||H1(o);else if(b){var E=null;if(p&&p.hasAttribute("formAction")){if(m=p,b=p[pn]||null)E=b.formAction;else if(Rg(m)!==null)continue}else E=b.action;typeof E=="function"?o[u+1]=E:(o.splice(u,3),u-=3),H1(o)}}}function G1(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(b){return m=b})},focusReset:"manual",scroll:"manual"})}function a(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),m!==null&&(m(),m=null)}}}function Dg(n){this._internalRoot=n}Gh.prototype.render=Dg.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(s(409));var o=a.current,u=ms();V1(o,u,n,a,null,null)},Gh.prototype.unmount=Dg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;V1(n.current,2,null,n,null,null),Th(),a[or]=null}};function Gh(n){this._internalRoot=n}Gh.prototype.unstable_scheduleHydration=function(n){if(n){var a=Td();n={blockedOn:null,target:n,priority:a};for(var o=0;o<ei.length&&a!==0&&a<ei[o].priority;o++);ei.splice(o,0,n),o===0&&q1(n)}};var $1=e.version;if($1!=="19.2.0")throw Error(s(527,$1,"19.2.0"));ie.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=x(a),n=n!==null?w(n):null,n=n===null?null:n.stateNode,n};var r4={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$h.isDisabled&&$h.supportsFiber)try{Be=$h.inject(r4),Ye=$h}catch{}}return pu.createRoot=function(n,a){if(!l(n))throw Error(s(299));var o=!1,u="",m=Zb,p=ev,b=tv;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError)),a=M1(n,1,!1,null,null,o,u,null,m,p,b,G1),n[or]=a.current,mg(n),new Dg(a)},pu.hydrateRoot=function(n,a,o){if(!l(n))throw Error(s(299));var u=!1,m="",p=Zb,b=ev,E=tv,D=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.formState!==void 0&&(D=o.formState)),a=M1(n,1,!0,a,o??null,u,m,D,p,b,E,G1),a.context=O1(null),o=a.current,u=ms(),u=ki(u),m=za(u),m.callback=null,Ua(o,m,u),o=u,a.current.lanes=o,dt(a,o),Er(a),n[or]=a.current,mg(n),new Gh(a)},pu.version="19.2.0",pu}var nw;function m4(){if(nw)return Vg.exports;nw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Vg.exports=f4(),Vg.exports}var g4=m4();const p4=_2(g4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),y4=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),sw=r=>{const e=y4(r);return e.charAt(0).toUpperCase()+e.slice(1)},E2=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),b4=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var v4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=P.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:l="",children:c,iconNode:d,...f},g)=>P.createElement("svg",{ref:g,...v4,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:E2("lucide",l),...!c&&!b4(f)&&{"aria-hidden":"true"},...f},[...d.map(([x,w])=>P.createElement(x,w)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=(r,e)=>{const t=P.forwardRef(({className:s,...l},c)=>P.createElement(w4,{ref:c,iconNode:e,className:E2(`lucide-${x4(sw(r))}`,`lucide-${r}`,s),...l}));return t.displayName=sw(r),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],N4=pe("activity",_4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],bf=pe("arrow-left",E4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],qt=pe("arrow-right",T4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],ac=pe("award",S4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Kh=pe("bell",j4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ss=pe("book-open",A4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],qu=pe("book",I4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],T2=pe("brain",C4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],k4=pe("briefcase",R4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Fu=pe("calendar",D4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],S2=pe("chart-column",M4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],xl=pe("chevron-down",O4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ra=pe("chevron-left",V4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ug=pe("chevron-right",P4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],vf=pe("circle-alert",L4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ha=pe("circle-check-big",z4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],vn=pe("circle-check",U4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],q4=pe("circle-play",B4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],rw=pe("circle-plus",F4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],oa=pe("circle-question-mark",H4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],$4=pe("circle-user",G4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Q4=pe("circle-x",K4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],nx=pe("clock",X4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],J4=pe("cloud-download",Y4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],j2=pe("cloud-upload",W4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],ic=pe("crown",Z4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],fp=pe("download",e5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mp=pe("eye",t5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],gp=pe("facebook",n5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],r5=pe("file-check",s5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],i5=pe("file-plus",a5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],o5=pe("file-search",l5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],rs=pe("file-text",c5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],sx=pe("flag",u5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],wf=pe("flame",d5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Ro=pe("folder-open",h5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],m5=pe("globe",f5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],bi=pe("graduation-cap",g5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],_f=pe("house",p5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],y5=pe("info",x5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],sm=pe("languages",b5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],zo=pe("layers",v5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],aw=pe("layout-dashboard",w5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],N5=pe("link",_5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],T5=pe("list",E5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],bt=pe("loader-circle",S5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],pp=pe("log-in",j5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ii=pe("lock",A5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Nf=pe("log-out",I5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],jr=pe("mail",C5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],xp=pe("map-pin",R5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],D5=pe("medal",k5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],iw=pe("megaphone",M5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],V5=pe("menu",O5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Hu=pe("message-circle",P5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],rm=pe("message-square",L5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Ef=pe("monitor",z5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],A2=pe("move-right",U5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],q5=pe("octagon-alert",B5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],lw=pe("palette",F5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],G5=pe("pen-line",H5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],rx=pe("pen-tool",$5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],Q5=pe("percent",K5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ax=pe("refresh-cw",X5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],J5=pe("rocket",Y5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],I2=pe("rotate-ccw",W5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],fi=pe("save",Z5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],Tf=pe("school",eA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],zs=pe("search",tA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ca=pe("send",nA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],rA=pe("shield-alert",sA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],C2=pe("shield-check",aA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],lA=pe("smartphone",iA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],R2=pe("sparkles",oA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],yp=pe("square-pen",cA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],yl=pe("star",uA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],k2=pe("tag",dA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ix=pe("target",hA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],mA=pe("text-align-start",fA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],D2=pe("timer",gA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],vi=pe("trash-2",pA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],yA=pe("trending-up",xA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],lx=pe("triangle-alert",bA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Do=pe("trophy",vA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],_A=pe("type",wA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],es=pe("user",NA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ox=pe("users",EA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ps=pe("x",TA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],am=pe("zap",SA),jA=()=>{};var ow={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?e[t++]=l:l<2048?(e[t++]=l>>6|192,e[t++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=l>>18|240,e[t++]=l>>12&63|128,e[t++]=l>>6&63|128,e[t++]=l&63|128):(e[t++]=l>>12|224,e[t++]=l>>6&63|128,e[t++]=l&63|128)}return e},AA=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const l=r[t++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[t++];e[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[t++],d=r[t++],f=r[t++],g=((l&7)<<18|(c&63)<<12|(d&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[t++],d=r[t++];e[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return e.join("")},O2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,f=d?r[l+1]:0,g=l+2<r.length,x=g?r[l+2]:0,w=c>>2,v=(c&3)<<4|f>>4;let N=(f&15)<<2|x>>6,C=x&63;g||(C=64,d||(N=64)),s.push(t[w],t[v],t[N],t[C])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(M2(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):AA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=t[r.charAt(l++)],f=l<r.length?t[r.charAt(l)]:0;++l;const x=l<r.length?t[r.charAt(l)]:64;++l;const v=l<r.length?t[r.charAt(l)]:64;if(++l,c==null||f==null||x==null||v==null)throw new IA;const N=c<<2|f>>4;if(s.push(N),x!==64){const C=f<<4&240|x>>2;if(s.push(C),v!==64){const V=x<<6&192|v;s.push(V)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class IA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CA=function(r){const e=M2(r);return O2.encodeByteArray(e,!0)},V2=function(r){return CA(r).replace(/\./g,"")},P2=function(r){try{return O2.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=()=>L2().__FIREBASE_DEFAULTS__,kA=()=>{if(typeof process>"u"||typeof ow>"u")return;const r=ow.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},DA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&P2(r[1]);return e&&JSON.parse(e)},im=()=>{try{return jA()||RA()||kA()||DA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},MA=r=>{var e,t;return(t=(e=im())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},z2=()=>{var r;return(r=im())==null?void 0:r.config},U2=r=>{var e;return(e=im())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function B2(r){return(await fetch(r,{credentials:"include"})).ok}const Cu={};function VA(){const r={prod:[],emulator:[]};for(const e of Object.keys(Cu))Cu[e]?r.emulator.push(e):r.prod.push(e);return r}function PA(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let cw=!1;function LA(r,e){if(typeof window>"u"||typeof document>"u"||!lc(window.location.host)||Cu[r]===e||Cu[r]||cw)return;Cu[r]=e;function t(N){return`__firebase__banner__${N}`}const s="__firebase__banner",c=VA().prod.length>0;function d(){const N=document.getElementById(s);N&&N.remove()}function f(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function g(N,C){N.setAttribute("width","24"),N.setAttribute("id",C),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function x(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{cw=!0,d()},N}function w(N,C){N.setAttribute("id",C),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function v(){const N=PA(s),C=t("text"),V=document.getElementById(C)||document.createElement("span"),Z=t("learnmore"),$=document.getElementById(Z)||document.createElement("a"),me=t("preprendIcon"),de=document.getElementById(me)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const ue=N.element;f(ue),w($,Z);const ve=x();g(de,me),ue.append(de,V,$,ve),document.body.appendChild(ue)}c?(V.innerText="Preview backend disconnected.",de.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(de.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function q2(){var e;const r=(e=im())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function F2(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function BA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qA(){const r=hn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function H2(){return!q2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function G2(){return!q2()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function cx(){try{return typeof indexedDB=="object"}catch{return!1}}function $2(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{t=!1},l.onerror=()=>{var c;e(((c=l.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}function FA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="FirebaseError";class sr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=HA,Object.setPrototypeOf(this,sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cl.prototype.create)}}class Cl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},l=`${this.service}/${e}`,c=this.errors[e],d=c?GA(c,s):"Error",f=`${this.serviceName}: ${d} (${l}).`;return new sr(l,f,s)}}function GA(r,e){return r.replace($A,(t,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const $A=/\{\$([^}]+)}/g;function KA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function wi(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const l of t){if(!s.includes(l))return!1;const c=r[l],d=e[l];if(uw(c)&&uw(d)){if(!wi(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!t.includes(l))return!1;return!0}function uw(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Nu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,c]=s.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function Eu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function QA(r,e){const t=new XA(r,e);return t.subscribe.bind(t)}class XA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let l;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");YA(e,["next","error","complete"])?l=e:l={next:e,error:t,complete:s},l.next===void 0&&(l.next=Bg),l.error===void 0&&(l.error=Bg),l.complete===void 0&&(l.complete=Bg);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YA(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Bg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=1e3,WA=2,ZA=14400*1e3,eI=.5;function dw(r,e=JA,t=WA){const s=e*Math.pow(t,r),l=Math.round(eI*s*(Math.random()-.5)*2);return Math.min(ZA,s+l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(r){return r&&r._delegate?r._delegate:r}class er{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new OA;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:t});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sI(e))try{this.getOrInitializeService({instanceIdentifier:rl})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(e=rl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rl){return this.instances.has(e)}getOptions(e=rl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(c);s===f&&d.resolve(l)}return l}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),l=this.onInitCallbacks.get(s)??new Set;l.add(e),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&e(c,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const l of s)try{l(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:nI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=rl){return this.component?this.component.multipleInstances?e:rl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nI(r){return r===rl?void 0:r}function sI(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new tI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(et||(et={}));const aI={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},iI=et.INFO,lI={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},oI=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),l=lI[e];if(l)console[l](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lm{constructor(e){this.name=e,this._logLevel=iI,this._logHandler=oI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const cI=(r,e)=>e.some(t=>r instanceof t);let hw,fw;function uI(){return hw||(hw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dI(){return fw||(fw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K2=new WeakMap,bp=new WeakMap,Q2=new WeakMap,qg=new WeakMap,ux=new WeakMap;function hI(r){const e=new Promise((t,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{t(mi(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&K2.set(t,r)}).catch(()=>{}),ux.set(e,r),e}function fI(r){if(bp.has(r))return;const e=new Promise((t,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{t(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});bp.set(r,e)}let vp={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return bp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Q2.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return mi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function mI(r){vp=r(vp)}function gI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Fg(this),e,...t);return Q2.set(s,e.sort?e.sort():[e]),mi(s)}:dI().includes(r)?function(...e){return r.apply(Fg(this),e),mi(K2.get(this))}:function(...e){return mi(r.apply(Fg(this),e))}}function pI(r){return typeof r=="function"?gI(r):(r instanceof IDBTransaction&&fI(r),cI(r,uI())?new Proxy(r,vp):r)}function mi(r){if(r instanceof IDBRequest)return hI(r);if(qg.has(r))return qg.get(r);const e=pI(r);return e!==r&&(qg.set(r,e),ux.set(e,r)),e}const Fg=r=>ux.get(r);function X2(r,e,{blocked:t,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,e),f=mi(d);return s&&d.addEventListener("upgradeneeded",g=>{s(mi(d.result),g.oldVersion,g.newVersion,mi(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",x=>l(x.oldVersion,x.newVersion,x))}).catch(()=>{}),f}const xI=["get","getKey","getAll","getAllKeys","count"],yI=["put","add","delete","clear"],Hg=new Map;function mw(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Hg.get(e))return Hg.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,l=yI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(l||xI.includes(t)))return;const c=async function(d,...f){const g=this.transaction(d,l?"readwrite":"readonly");let x=g.store;return s&&(x=x.index(f.shift())),(await Promise.all([x[t](...f),l&&g.done]))[0]};return Hg.set(e,c),c}mI(r=>({...r,get:(e,t,s)=>mw(e,t)||r.get(e,t,s),has:(e,t)=>!!mw(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(vI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function vI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wp="@firebase/app",gw="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=new lm("@firebase/app"),wI="@firebase/app-compat",_I="@firebase/analytics-compat",NI="@firebase/analytics",EI="@firebase/app-check-compat",TI="@firebase/app-check",SI="@firebase/auth",jI="@firebase/auth-compat",AI="@firebase/database",II="@firebase/data-connect",CI="@firebase/database-compat",RI="@firebase/functions",kI="@firebase/functions-compat",DI="@firebase/installations",MI="@firebase/installations-compat",OI="@firebase/messaging",VI="@firebase/messaging-compat",PI="@firebase/performance",LI="@firebase/performance-compat",zI="@firebase/remote-config",UI="@firebase/remote-config-compat",BI="@firebase/storage",qI="@firebase/storage-compat",FI="@firebase/firestore",HI="@firebase/ai",GI="@firebase/firestore-compat",$I="firebase",KI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p="[DEFAULT]",QI={[wp]:"fire-core",[wI]:"fire-core-compat",[NI]:"fire-analytics",[_I]:"fire-analytics-compat",[TI]:"fire-app-check",[EI]:"fire-app-check-compat",[SI]:"fire-auth",[jI]:"fire-auth-compat",[AI]:"fire-rtdb",[II]:"fire-data-connect",[CI]:"fire-rtdb-compat",[RI]:"fire-fn",[kI]:"fire-fn-compat",[DI]:"fire-iid",[MI]:"fire-iid-compat",[OI]:"fire-fcm",[VI]:"fire-fcm-compat",[PI]:"fire-perf",[LI]:"fire-perf-compat",[zI]:"fire-rc",[UI]:"fire-rc-compat",[BI]:"fire-gcs",[qI]:"fire-gcs-compat",[FI]:"fire-fst",[GI]:"fire-fst-compat",[HI]:"fire-vertex","fire-js":"fire-js",[$I]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=new Map,XI=new Map,Np=new Map;function pw(r,e){try{r.container.addComponent(e)}catch(t){fa.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Mr(r){const e=r.name;if(Np.has(e))return fa.debug(`There were multiple attempts to register component ${e}.`),!1;Np.set(e,r);for(const t of Sf.values())pw(t,r);for(const t of XI.values())pw(t,r);return!0}function Rl(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Vs(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gi=new Cl("app","Firebase",YI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new er("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=KI;function Y2(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:_p,automaticDataCollectionEnabled:!0,...e},l=s.name;if(typeof l!="string"||!l)throw gi.create("bad-app-name",{appName:String(l)});if(t||(t=z2()),!t)throw gi.create("no-options");const c=Sf.get(l);if(c){if(wi(t,c.options)&&wi(s,c.config))return c;throw gi.create("duplicate-app",{appName:l})}const d=new rI(l);for(const g of Np.values())d.addComponent(g);const f=new JI(t,s,d);return Sf.set(l,f),f}function J2(r=_p){const e=Sf.get(r);if(!e&&r===_p&&z2())return Y2();if(!e)throw gi.create("no-app",{appName:r});return e}function Ls(r,e,t){let s=QI[r]??r;t&&(s+=`-${t}`);const l=s.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${s}" with version "${e}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fa.warn(d.join(" "));return}Mr(new er(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="firebase-heartbeat-database",ZI=1,Gu="firebase-heartbeat-store";let Gg=null;function W2(){return Gg||(Gg=X2(WI,ZI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Gu)}catch(t){console.warn(t)}}}}).catch(r=>{throw gi.create("idb-open",{originalErrorMessage:r.message})})),Gg}async function e3(r){try{const t=(await W2()).transaction(Gu),s=await t.objectStore(Gu).get(Z2(r));return await t.done,s}catch(e){if(e instanceof sr)fa.warn(e.message);else{const t=gi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fa.warn(t.message)}}}async function xw(r,e){try{const s=(await W2()).transaction(Gu,"readwrite");await s.objectStore(Gu).put(e,Z2(r)),await s.done}catch(t){if(t instanceof sr)fa.warn(t.message);else{const s=gi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});fa.warn(s.message)}}}function Z2(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3=1024,n3=30;class s3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new a3(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=yw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>n3){const d=i3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){fa.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=yw(),{heartbeatsToSend:s,unsentEntries:l}=r3(this._heartbeatsCache.heartbeats),c=V2(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return fa.warn(t),""}}}function yw(){return new Date().toISOString().substring(0,10)}function r3(r,e=t3){const t=[];let s=r.slice();for(const l of r){const c=t.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),bw(t)>e){c.dates.pop();break}}else if(t.push({agent:l.agent,dates:[l.date]}),bw(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class a3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cx()?$2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await e3(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return xw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return xw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function bw(r){return V2(JSON.stringify({version:2,heartbeats:r})).length}function i3(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(r){Mr(new er("platform-logger",e=>new bI(e),"PRIVATE")),Mr(new er("heartbeat",e=>new s3(e),"PRIVATE")),Ls(wp,gw,r),Ls(wp,gw,"esm2020"),Ls("fire-js","")}l3("");var o3="firebase",c3="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ls(o3,c3,"app");function eN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const u3=eN,tN=new Cl("auth","Firebase",eN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf=new lm("@firebase/auth");function d3(r,...e){jf.logLevel<=et.WARN&&jf.warn(`Auth (${oc}): ${r}`,...e)}function nf(r,...e){jf.logLevel<=et.ERROR&&jf.error(`Auth (${oc}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(r,...e){throw dx(r,...e)}function Cr(r,...e){return dx(r,...e)}function nN(r,e,t){const s={...u3(),[e]:t};return new Cl("auth","Firebase",s).create(e,{appName:r.name})}function ua(r){return nN(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dx(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return tN.create(r,...e)}function Ve(r,e,...t){if(!r)throw dx(e,...t)}function aa(r){const e="INTERNAL ASSERTION FAILED: "+r;throw nf(e),new Error(e)}function ma(r,e){r||aa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function h3(){return vw()==="http:"||vw()==="https:"}function vw(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(h3()||F2()||"connection"in navigator)?navigator.onLine:!0}function m3(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t){this.shortDelay=e,this.longDelay=t,ma(t>e,"Short delay should be less than long delay!"),this.isMobile=zA()||BA()}get(){return f3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(r,e){ma(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;aa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;aa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;aa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],x3=new od(3e4,6e4);function xa(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ya(r,e,t,s,l={}){return rN(r,l,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const f=ld({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const x={method:e,headers:g,...c};return UA()||(x.referrerPolicy="no-referrer"),r.emulatorConfig&&lc(r.emulatorConfig.host)&&(x.credentials="include"),sN.fetch()(await aN(r,r.config.apiHost,t,f),x)})}async function rN(r,e,t){r._canInitEmulator=!1;const s={...g3,...e};try{const l=new b3(r),c=await Promise.race([t(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Qh(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const f=c.ok?d.errorMessage:d.error.message,[g,x]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qh(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Qh(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw Qh(r,"user-disabled",d);const w=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw nN(r,w,x);tr(r,w)}}catch(l){if(l instanceof sr)throw l;tr(r,"network-request-failed",{message:String(l)})}}async function cd(r,e,t,s,l={}){const c=await ya(r,e,t,s,l);return"mfaPendingCredential"in c&&tr(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function aN(r,e,t,s){const l=`${e}${t}?${s}`,c=r,d=c.config.emulator?hx(r.config,l):`${r.config.apiScheme}://${l}`;return p3.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function y3(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class b3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Cr(this.auth,"network-request-failed")),x3.get())})}}function Qh(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const l=Cr(r,e,s);return l.customData._tokenResponse=t,l}function ww(r){return r!==void 0&&r.enterprise!==void 0}class v3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return y3(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function w3(r,e){return ya(r,"GET","/v2/recaptchaConfig",xa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _3(r,e){return ya(r,"POST","/v1/accounts:delete",e)}async function Af(r,e){return ya(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function N3(r,e=!1){const t=Qt(r),s=await t.getIdToken(e),l=fx(s);Ve(l&&l.exp&&l.auth_time&&l.iat,t.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:l,token:s,authTime:Ru($g(l.auth_time)),issuedAtTime:Ru($g(l.iat)),expirationTime:Ru($g(l.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function $g(r){return Number(r)*1e3}function fx(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return nf("JWT malformed, contained fewer than 3 sections"),null;try{const l=P2(t);return l?JSON.parse(l):(nf("Failed to decode base64 JWT payload"),null)}catch(l){return nf("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function _w(r){const e=fx(r);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $u(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof sr&&E3(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function E3({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ru(this.lastLoginAt),this.creationTime=Ru(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function If(r){var v;const e=r.auth,t=await r.getIdToken(),s=await $u(r,Af(e,{idToken:t}));Ve(s==null?void 0:s.users.length,e,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=(v=l.providerUserInfo)!=null&&v.length?iN(l.providerUserInfo):[],d=j3(r.providerData,c),f=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!(d!=null&&d.length),x=f?g:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Tp(l.createdAt,l.lastLoginAt),isAnonymous:x};Object.assign(r,w)}async function S3(r){const e=Qt(r);await If(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function j3(r,e){return[...r.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function iN(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A3(r,e){const t=await rN(r,{},async()=>{const s=ld({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await aN(r,l,"/v1/token",`key=${c}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return r.emulatorConfig&&lc(r.emulatorConfig.host)&&(g.credentials="include"),sN.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function I3(r,e){return ya(r,"POST","/v2/accounts:revokeToken",xa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_w(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const t=_w(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:l,expiresIn:c}=await A3(e,t);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:l,expirationTime:c}=t,d=new Mo;return s&&(Ve(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),l&&(Ve(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),c&&(Ve(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mo,this.toJSON())}_performRefresh(){return aa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(r,e){Ve(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Ws{constructor({uid:e,auth:t,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new T3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Tp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await $u(this,this.stsTokenManager.getToken(this.auth,e));return Ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return N3(this,e)}reload(){return S3(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ws({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await If(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vs(this.auth.app))return Promise.reject(ua(this.auth));const e=await this.getIdToken();return await $u(this,_3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,l=t.email??void 0,c=t.phoneNumber??void 0,d=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,x=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:v,emailVerified:N,isAnonymous:C,providerData:V,stsTokenManager:Z}=t;Ve(v&&Z,e,"internal-error");const $=Mo.fromJSON(this.name,Z);Ve(typeof v=="string",e,"internal-error"),ni(s,e.name),ni(l,e.name),Ve(typeof N=="boolean",e,"internal-error"),Ve(typeof C=="boolean",e,"internal-error"),ni(c,e.name),ni(d,e.name),ni(f,e.name),ni(g,e.name),ni(x,e.name),ni(w,e.name);const me=new Ws({uid:v,auth:e,email:l,emailVerified:N,displayName:s,isAnonymous:C,photoURL:d,phoneNumber:c,tenantId:f,stsTokenManager:$,createdAt:x,lastLoginAt:w});return V&&Array.isArray(V)&&(me.providerData=V.map(de=>({...de}))),g&&(me._redirectEventId=g),me}static async _fromIdTokenResponse(e,t,s=!1){const l=new Mo;l.updateFromServerResponse(t);const c=new Ws({uid:t.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await If(c),c}static async _fromGetAccountInfoResponse(e,t,s){const l=t.users[0];Ve(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?iN(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!(c!=null&&c.length),f=new Mo;f.updateFromIdToken(s);const g=new Ws({uid:l.localId,auth:e,stsTokenManager:f,isAnonymous:d}),x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new Tp(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,x),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw=new Map;function ia(r){ma(r instanceof Function,"Expected a class definition");let e=Nw.get(r);return e?(ma(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Nw.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}lN.type="NONE";const Ew=lN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(r,e,t){return`firebase:${r}:${e}:${t}`}class Oo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=sf(this.userKey,l.apiKey,c),this.fullPersistenceKey=sf("persistence",l.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Af(this.auth,{idToken:e}).catch(()=>{});return t?Ws._fromGetAccountInfoResponse(this.auth,t,e):null}return Ws._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Oo(ia(Ew),e,s);const l=(await Promise.all(t.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let c=l[0]||ia(Ew);const d=sf(s,e.config.apiKey,e.name);let f=null;for(const x of t)try{const w=await x._get(d);if(w){let v;if(typeof w=="string"){const N=await Af(e,{idToken:w}).catch(()=>{});if(!N)break;v=await Ws._fromGetAccountInfoResponse(e,N,w)}else v=Ws._fromJSON(e,w);x!==c&&(f=v),c=x;break}}catch{}const g=l.filter(x=>x._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Oo(c,e,s):(c=g[0],f&&await c._set(d,f.toJSON()),await Promise.all(t.map(async x=>{if(x!==c)try{await x._remove(d)}catch{}})),new Oo(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(oN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fN(e))return"Blackberry";if(mN(e))return"Webos";if(cN(e))return"Safari";if((e.includes("chrome/")||uN(e))&&!e.includes("edge/"))return"Chrome";if(hN(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function oN(r=hn()){return/firefox\//i.test(r)}function cN(r=hn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uN(r=hn()){return/crios\//i.test(r)}function dN(r=hn()){return/iemobile/i.test(r)}function hN(r=hn()){return/android/i.test(r)}function fN(r=hn()){return/blackberry/i.test(r)}function mN(r=hn()){return/webos/i.test(r)}function mx(r=hn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function C3(r=hn()){var e;return mx(r)&&!!((e=window.navigator)!=null&&e.standalone)}function R3(){return qA()&&document.documentMode===10}function gN(r=hn()){return mx(r)||hN(r)||mN(r)||fN(r)||/windows phone/i.test(r)||dN(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(r,e=[]){let t;switch(r){case"Browser":t=Tw(hn());break;case"Worker":t=`${Tw(hn())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${oc}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((d,f)=>{try{const g=e(c);d(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const l of t)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D3(r,e={}){return ya(r,"GET","/v2/passwordPolicy",xa(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=6;class O3{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??M3,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),l&&(t.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,t,s,l){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sw(this),this.idTokenSubscription=new Sw(this),this.beforeStateQueue=new k3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ia(t)),this._initializationPromise=this.queue(async()=>{var s,l,c;if(!this._deleted&&(this.persistenceManager=await Oo.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((l=this._popupRedirectResolver)!=null&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Af(this,{idToken:e}),s=await Ws._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(Vs(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(c=this.redirectUser)==null?void 0:c._redirectEventId,f=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===f)&&(g!=null&&g.user)&&(s=g.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(d){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await If(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=m3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vs(this.app))return Promise.reject(ua(this));const t=e?Qt(e):null;return t&&Ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vs(this.app)?Promise.reject(ua(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vs(this.app)?Promise.reject(ua(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ia(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await D3(this),t=new O3(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Cl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await I3(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ia(e)||this._popupRedirectResolver;Ve(t,this,"argument-error"),this.redirectPersistenceManager=await Oo.create(this,[ia(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,l){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(f,this,"internal-error"),f.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,l);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var l;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((l=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:l.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Vs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&d3(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Si(r){return Qt(r)}class Sw{constructor(e){this.auth=e,this.observer=null,this.addObserver=QA(t=>this.observer=t)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let om={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function P3(r){om=r}function xN(r){return om.loadJS(r)}function L3(){return om.recaptchaEnterpriseScript}function z3(){return om.gapiScript}function U3(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class B3{constructor(){this.enterprise=new q3}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class q3{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const F3="recaptcha-enterprise",yN="NO_RECAPTCHA";class H3{constructor(e){this.type=F3,this.auth=Si(e)}async verify(e="verify",t=!1){async function s(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,f)=>{w3(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const x=new v3(g);return c.tenantId==null?c._agentRecaptchaConfig=x:c._tenantRecaptchaConfigs[c.tenantId]=x,d(x.siteKey)}}).catch(g=>{f(g)})})}function l(c,d,f){const g=window.grecaptcha;ww(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(x=>{d(x)}).catch(()=>{d(yN)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new B3().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(f=>{if(!t&&ww(window.grecaptcha))l(f,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=L3();g.length!==0&&(g+=f),xN(g).then(()=>{l(f,c,d)}).catch(x=>{d(x)})}}).catch(f=>{d(f)})})}}async function jw(r,e,t,s=!1,l=!1){const c=new H3(r);let d;if(l)d=yN;else try{d=await c.verify(t)}catch{d=await c.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const g=f.phoneEnrollmentInfo.phoneNumber,x=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:x,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const g=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:d}):Object.assign(f,{captchaResponse:d}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Cf(r,e,t,s,l){var c;if((c=r._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await jw(r,e,t,t==="getOobCode");return s(r,d)}else return s(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await jw(r,e,t,t==="getOobCode");return s(r,f)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G3(r,e){const t=Rl(r,"auth");if(t.isInitialized()){const l=t.getImmediate(),c=t.getOptions();if(wi(c,e??{}))return l;tr(l,"already-initialized")}return t.initialize({options:e})}function $3(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(ia);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function K3(r,e,t){const s=Si(r);Ve(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,c=bN(e),{host:d,port:f}=Q3(e),g=f===null?"":`:${f}`,x={url:`${c}//${d}${g}/`},w=Object.freeze({host:d,port:f,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){Ve(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ve(wi(x,s.config.emulator)&&wi(w,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=x,s.emulatorConfig=w,s.settings.appVerificationDisabledForTesting=!0,lc(d)?(B2(`${c}//${d}${g}`),LA("Auth",!0)):X3()}function bN(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Q3(r){const e=bN(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:Aw(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:Aw(d)}}}function Aw(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function X3(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return aa("not implemented")}_getIdTokenResponse(e){return aa("not implemented")}_linkToIdToken(e,t){return aa("not implemented")}_getReauthenticationResolver(e){return aa("not implemented")}}async function Y3(r,e){return ya(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J3(r,e){return cd(r,"POST","/v1/accounts:signInWithPassword",xa(r,e))}async function W3(r,e){return ya(r,"POST","/v1/accounts:sendOobCode",xa(r,e))}async function Z3(r,e){return W3(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eC(r,e){return cd(r,"POST","/v1/accounts:signInWithEmailLink",xa(r,e))}async function tC(r,e){return cd(r,"POST","/v1/accounts:signInWithEmailLink",xa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku extends gx{constructor(e,t,s,l=null){super("password",s),this._email=e,this._password=t,this._tenantId=l}static _fromEmailAndPassword(e,t){return new Ku(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Ku(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cf(e,t,"signInWithPassword",J3);case"emailLink":return eC(e,{email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cf(e,s,"signUpPassword",Y3);case"emailLink":return tC(e,{idToken:t,email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(r,e){return cd(r,"POST","/v1/accounts:signInWithIdp",xa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="http://localhost";class bl extends gx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new bl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):tr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l,...c}=t;if(!s||!l)return null;const d=new bl(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Vo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Vo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Vo(e,t)}buildRequest(){const e={requestUri:nC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ld(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function rC(r){const e=Nu(Eu(r)).link,t=e?Nu(Eu(e)).deep_link_id:null,s=Nu(Eu(r)).deep_link_id;return(s?Nu(Eu(s)).link:null)||s||t||e||r}class px{constructor(e){const t=Nu(Eu(e)),s=t.apiKey??null,l=t.oobCode??null,c=sC(t.mode??null);Ve(s&&l&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=l,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=rC(e);try{return new px(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(){this.providerId=cc.PROVIDER_ID}static credential(e,t){return Ku._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=px.parseLink(t);return Ve(s,"argument-error"),Ku._fromEmailAndCode(e,s.code,s.tenantId)}}cc.PROVIDER_ID="password";cc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";cc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud extends vN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends ud{constructor(){super("facebook.com")}static credential(e){return bl._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return li.credential(e.oauthAccessToken)}catch{return null}}}li.FACEBOOK_SIGN_IN_METHOD="facebook.com";li.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends ud{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return bl._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return oi.credential(t,s)}catch{return null}}}oi.GOOGLE_SIGN_IN_METHOD="google.com";oi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends ud{constructor(){super("github.com")}static credential(e){return bl._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch{return null}}}ci.GITHUB_SIGN_IN_METHOD="github.com";ci.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends ud{constructor(){super("twitter.com")}static credential(e,t){return bl._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ui.credential(t,s)}catch{return null}}}ui.TWITTER_SIGN_IN_METHOD="twitter.com";ui.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aC(r,e){return cd(r,"POST","/v1/accounts:signUp",xa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,l=!1){const c=await Ws._fromIdTokenResponse(e,s,l),d=Iw(s);return new vl({user:c,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const l=Iw(s);return new vl({user:e,providerId:l,_tokenResponse:s,operationType:t})}}function Iw(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf extends sr{constructor(e,t,s,l){super(t.code,t.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Rf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,l){return new Rf(e,t,s,l)}}function wN(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Rf._fromErrorAndOperation(r,c,e,s):c})}async function iC(r,e,t=!1){const s=await $u(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return vl._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lC(r,e,t=!1){const{auth:s}=r;if(Vs(s.app))return Promise.reject(ua(s));const l="reauthenticate";try{const c=await $u(r,wN(s,l,e,r),t);Ve(c.idToken,s,"internal-error");const d=fx(c.idToken);Ve(d,s,"internal-error");const{sub:f}=d;return Ve(r.uid===f,s,"user-mismatch"),vl._forOperation(r,l,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&tr(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _N(r,e,t=!1){if(Vs(r.app))return Promise.reject(ua(r));const s="signIn",l=await wN(r,s,e),c=await vl._fromIdTokenResponse(r,s,l);return t||await r._updateCurrentUser(c.user),c}async function oC(r,e){return _N(Si(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NN(r){const e=Si(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function cC(r,e,t){const s=Si(r);await Cf(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Z3)}async function uC(r,e,t){if(Vs(r.app))return Promise.reject(ua(r));const s=Si(r),d=await Cf(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&NN(r),g}),f=await vl._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(f.user),f}function dC(r,e,t){return Vs(r.app)?Promise.reject(ua(r)):oC(Qt(r),cc.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&NN(r),s})}function hC(r,e,t,s){return Qt(r).onIdTokenChanged(e,t,s)}function fC(r,e,t){return Qt(r).beforeAuthStateChanged(e,t)}function mC(r,e,t,s){return Qt(r).onAuthStateChanged(e,t,s)}function gC(r){return Qt(r).signOut()}const kf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(kf,"1"),this.storage.removeItem(kf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=1e3,xC=10;class TN extends EN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),l=this.localCache[t];s!==l&&e(t,l,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,f,g)=>{this.notifyListeners(d,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);R3()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,xC):l()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},pC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}TN.type="LOCAL";const yC=TN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN extends EN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}SN.type="SESSION";const jN=SN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(l=>l.isListeningto(e));if(t)return t;const s=new cm(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:l,data:c}=t.data,d=this.handlersMap[l];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const f=Array.from(d).map(async x=>x(t.origin,c)),g=await bC(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((f,g)=>{const x=xx("",20);l.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(v){const N=v;if(N.data.eventId===x)switch(N.data.status){case"ack":clearTimeout(w),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),f(N.data.response);break;default:clearTimeout(w),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:x,data:t},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(){return window}function wC(r){Rr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(){return typeof Rr().WorkerGlobalScope<"u"&&typeof Rr().importScripts=="function"}async function _C(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NC(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function EC(){return AN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="firebaseLocalStorageDb",TC=1,Df="firebaseLocalStorage",CN="fbase_key";class dd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function um(r,e){return r.transaction([Df],e?"readwrite":"readonly").objectStore(Df)}function SC(){const r=indexedDB.deleteDatabase(IN);return new dd(r).toPromise()}function Sp(){const r=indexedDB.open(IN,TC);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Df,{keyPath:CN})}catch(l){t(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Df)?e(s):(s.close(),await SC(),e(await Sp()))})})}async function Cw(r,e,t){const s=um(r,!0).put({[CN]:e,value:t});return new dd(s).toPromise()}async function jC(r,e){const t=um(r,!1).get(e),s=await new dd(t).toPromise();return s===void 0?null:s.value}function Rw(r,e){const t=um(r,!0).delete(e);return new dd(t).toPromise()}const AC=800,IC=3;class RN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>IC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cm._getInstance(EC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await _C(),!this.activeServiceWorker)return;this.sender=new vC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sp();return await Cw(e,kf,"1"),await Rw(e,kf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Cw(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>jC(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Rw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=um(l,!1).getAll();return new dd(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),t.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),t.push(l));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RN.type="LOCAL";const CC=RN;new od(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(r,e){return e?ia(e):(Ve(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx extends gx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Vo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function kC(r){return _N(r.auth,new yx(r),r.bypassAuthState)}function DC(r){const{auth:e,user:t}=r;return Ve(t,e,"internal-error"),lC(t,new yx(r),r.bypassAuthState)}async function MC(r){const{auth:e,user:t}=r;return Ve(t,e,"internal-error"),iC(t,new yx(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,t,s,l,c=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:l,tenantId:c,error:d,type:f}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kC;case"linkViaPopup":case"linkViaRedirect":return MC;case"reauthViaPopup":case"reauthViaRedirect":return DC;default:tr(this.auth,"internal-error")}}resolve(e){ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=new od(2e3,1e4);class ko extends kN{constructor(e,t,s,l,c){super(e,t,l,c),this.provider=s,this.authWindow=null,this.pollId=null,ko.currentPopupAction&&ko.currentPopupAction.cancel(),ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){ma(this.filter.length===1,"Popup operations only handle one event");const e=xx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OC.get())};e()}}ko.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC="pendingRedirect",rf=new Map;class PC extends kN{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=rf.get(this.auth._key());if(!e){try{const s=await LC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}rf.set(this.auth._key(),e)}return this.bypassAuthState||rf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LC(r,e){const t=BC(e),s=UC(r);if(!await s._isAvailable())return!1;const l=await s._get(t)==="true";return await s._remove(t),l}function zC(r,e){rf.set(r._key(),e)}function UC(r){return ia(r._redirectPersistence)}function BC(r){return sf(VC,r.config.apiKey,r.name)}async function qC(r,e,t=!1){if(Vs(r.app))return Promise.reject(ua(r));const s=Si(r),l=RC(s,e),d=await new PC(s,l,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=600*1e3;class HC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!DN(e)){const l=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Cr(this.auth,l))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FC&&this.cachedEventUids.clear(),this.cachedEventUids.has(kw(e))}saveEventToCache(e){this.cachedEventUids.add(kw(e)),this.lastProcessedEventTime=Date.now()}}function kw(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function DN({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function GC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DN(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $C(r,e={}){return ya(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QC=/^https?/;async function XC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await $C(r);for(const t of e)try{if(YC(t))return}catch{}tr(r,"unauthorized-domain")}function YC(r){const e=Ep(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!QC.test(t))return!1;if(KC.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=new od(3e4,6e4);function Dw(){const r=Rr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function WC(r){return new Promise((e,t)=>{var l,c,d;function s(){Dw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Dw(),t(Cr(r,"network-request-failed"))},timeout:JC.get()})}if((c=(l=Rr().gapi)==null?void 0:l.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((d=Rr().gapi)!=null&&d.load)s();else{const f=U3("iframefcb");return Rr()[f]=()=>{gapi.load?s():t(Cr(r,"network-request-failed"))},xN(`${z3()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw af=null,e})}let af=null;function ZC(r){return af=af||WC(r),af}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=new od(5e3,15e3),tR="__/auth/iframe",nR="emulator/auth/iframe",sR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aR(r){const e=r.config;Ve(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?hx(e,nR):`https://${r.config.authDomain}/${tR}`,s={apiKey:e.apiKey,appName:r.name,v:oc},l=rR.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${ld(s).slice(1)}`}async function iR(r){const e=await ZC(r),t=Rr().gapi;return Ve(t,r,"internal-error"),e.open({where:document.body,url:aR(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sR,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=Cr(r,"network-request-failed"),f=Rr().setTimeout(()=>{c(d)},eR.get());function g(){Rr().clearTimeout(f),l(s)}s.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oR=500,cR=600,uR="_blank",dR="http://localhost";class Mw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hR(r,e,t,s=oR,l=cR){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...lR,width:s.toString(),height:l.toString(),top:c,left:d},x=hn().toLowerCase();t&&(f=uN(x)?uR:t),oN(x)&&(e=e||dR,g.scrollbars="yes");const w=Object.entries(g).reduce((N,[C,V])=>`${N}${C}=${V},`,"");if(C3(x)&&f!=="_self")return fR(e||"",f),new Mw(null);const v=window.open(e||"",f,w);Ve(v,r,"popup-blocked");try{v.focus()}catch{}return new Mw(v)}function fR(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="__/auth/handler",gR="emulator/auth/handler",pR=encodeURIComponent("fac");async function Ow(r,e,t,s,l,c){Ve(r.config.authDomain,r,"auth-domain-config-required"),Ve(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:oc,eventId:l};if(e instanceof vN){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",KA(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,v]of Object.entries({}))d[w]=v}if(e instanceof ud){const w=e.getScopes().filter(v=>v!=="");w.length>0&&(d.scopes=w.join(","))}r.tenantId&&(d.tid=r.tenantId);const f=d;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const g=await r._getAppCheckToken(),x=g?`#${pR}=${encodeURIComponent(g)}`:"";return`${xR(r)}?${ld(f).slice(1)}${x}`}function xR({config:r}){return r.emulator?hx(r,gR):`https://${r.authDomain}/${mR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg="webStorageSupport";class yR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jN,this._completeRedirectFn=qC,this._overrideRedirectResult=zC}async _openPopup(e,t,s,l){var d;ma((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const c=await Ow(e,t,s,Ep(),l);return hR(e,c,xx())}async _openRedirect(e,t,s,l){await this._originValidation(e);const c=await Ow(e,t,s,Ep(),l);return wC(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:l,promise:c}=this.eventManagers[t];return l?Promise.resolve(l):(ma(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await iR(e),s=new HC(e);return t.register("authEvent",l=>(Ve(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Kg,{type:Kg},l=>{var d;const c=(d=l==null?void 0:l[0])==null?void 0:d[Kg];c!==void 0&&t(!!c),tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=XC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gN()||cN()||mx()}}const bR=yR;var Vw="@firebase/auth",Pw="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _R(r){Mr(new er("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:f}=s.options;Ve(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pN(r)},x=new V3(s,l,c,g);return $3(x,t),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Mr(new er("auth-internal",e=>{const t=Si(e.getProvider("auth").getImmediate());return(s=>new vR(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ls(Vw,Pw,wR(r)),Ls(Vw,Pw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=300,ER=U2("authIdTokenMaxAge")||NR;let Lw=null;const TR=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>ER)return;const l=t==null?void 0:t.token;Lw!==l&&(Lw=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function SR(r=J2()){const e=Rl(r,"auth");if(e.isInitialized())return e.getImmediate();const t=G3(r,{popupRedirectResolver:bR,persistence:[CC,yC,jN]}),s=U2("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=TR(c.toString());fC(t,d,()=>d(t.currentUser)),hC(t,f=>d(f))}}const l=MA("auth");return l&&K3(t,`http://${l}`),t}function jR(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}P3({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=l=>{const c=Cr("internal-error");c.customData=l,t(c)},s.type="text/javascript",s.charset="UTF-8",jR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_R("Browser");var zw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pi,MN;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,j){function A(){}A.prototype=j.prototype,T.F=j.prototype,T.prototype=new A,T.prototype.constructor=T,T.D=function(O,M,k){for(var I=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)I[ce-2]=arguments[ce];return j.prototype[M].apply(O,I)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(T,j,A){A||(A=0);const O=Array(16);if(typeof j=="string")for(var M=0;M<16;++M)O[M]=j.charCodeAt(A++)|j.charCodeAt(A++)<<8|j.charCodeAt(A++)<<16|j.charCodeAt(A++)<<24;else for(M=0;M<16;++M)O[M]=j[A++]|j[A++]<<8|j[A++]<<16|j[A++]<<24;j=T.g[0],A=T.g[1],M=T.g[2];let k=T.g[3],I;I=j+(k^A&(M^k))+O[0]+3614090360&4294967295,j=A+(I<<7&4294967295|I>>>25),I=k+(M^j&(A^M))+O[1]+3905402710&4294967295,k=j+(I<<12&4294967295|I>>>20),I=M+(A^k&(j^A))+O[2]+606105819&4294967295,M=k+(I<<17&4294967295|I>>>15),I=A+(j^M&(k^j))+O[3]+3250441966&4294967295,A=M+(I<<22&4294967295|I>>>10),I=j+(k^A&(M^k))+O[4]+4118548399&4294967295,j=A+(I<<7&4294967295|I>>>25),I=k+(M^j&(A^M))+O[5]+1200080426&4294967295,k=j+(I<<12&4294967295|I>>>20),I=M+(A^k&(j^A))+O[6]+2821735955&4294967295,M=k+(I<<17&4294967295|I>>>15),I=A+(j^M&(k^j))+O[7]+4249261313&4294967295,A=M+(I<<22&4294967295|I>>>10),I=j+(k^A&(M^k))+O[8]+1770035416&4294967295,j=A+(I<<7&4294967295|I>>>25),I=k+(M^j&(A^M))+O[9]+2336552879&4294967295,k=j+(I<<12&4294967295|I>>>20),I=M+(A^k&(j^A))+O[10]+4294925233&4294967295,M=k+(I<<17&4294967295|I>>>15),I=A+(j^M&(k^j))+O[11]+2304563134&4294967295,A=M+(I<<22&4294967295|I>>>10),I=j+(k^A&(M^k))+O[12]+1804603682&4294967295,j=A+(I<<7&4294967295|I>>>25),I=k+(M^j&(A^M))+O[13]+4254626195&4294967295,k=j+(I<<12&4294967295|I>>>20),I=M+(A^k&(j^A))+O[14]+2792965006&4294967295,M=k+(I<<17&4294967295|I>>>15),I=A+(j^M&(k^j))+O[15]+1236535329&4294967295,A=M+(I<<22&4294967295|I>>>10),I=j+(M^k&(A^M))+O[1]+4129170786&4294967295,j=A+(I<<5&4294967295|I>>>27),I=k+(A^M&(j^A))+O[6]+3225465664&4294967295,k=j+(I<<9&4294967295|I>>>23),I=M+(j^A&(k^j))+O[11]+643717713&4294967295,M=k+(I<<14&4294967295|I>>>18),I=A+(k^j&(M^k))+O[0]+3921069994&4294967295,A=M+(I<<20&4294967295|I>>>12),I=j+(M^k&(A^M))+O[5]+3593408605&4294967295,j=A+(I<<5&4294967295|I>>>27),I=k+(A^M&(j^A))+O[10]+38016083&4294967295,k=j+(I<<9&4294967295|I>>>23),I=M+(j^A&(k^j))+O[15]+3634488961&4294967295,M=k+(I<<14&4294967295|I>>>18),I=A+(k^j&(M^k))+O[4]+3889429448&4294967295,A=M+(I<<20&4294967295|I>>>12),I=j+(M^k&(A^M))+O[9]+568446438&4294967295,j=A+(I<<5&4294967295|I>>>27),I=k+(A^M&(j^A))+O[14]+3275163606&4294967295,k=j+(I<<9&4294967295|I>>>23),I=M+(j^A&(k^j))+O[3]+4107603335&4294967295,M=k+(I<<14&4294967295|I>>>18),I=A+(k^j&(M^k))+O[8]+1163531501&4294967295,A=M+(I<<20&4294967295|I>>>12),I=j+(M^k&(A^M))+O[13]+2850285829&4294967295,j=A+(I<<5&4294967295|I>>>27),I=k+(A^M&(j^A))+O[2]+4243563512&4294967295,k=j+(I<<9&4294967295|I>>>23),I=M+(j^A&(k^j))+O[7]+1735328473&4294967295,M=k+(I<<14&4294967295|I>>>18),I=A+(k^j&(M^k))+O[12]+2368359562&4294967295,A=M+(I<<20&4294967295|I>>>12),I=j+(A^M^k)+O[5]+4294588738&4294967295,j=A+(I<<4&4294967295|I>>>28),I=k+(j^A^M)+O[8]+2272392833&4294967295,k=j+(I<<11&4294967295|I>>>21),I=M+(k^j^A)+O[11]+1839030562&4294967295,M=k+(I<<16&4294967295|I>>>16),I=A+(M^k^j)+O[14]+4259657740&4294967295,A=M+(I<<23&4294967295|I>>>9),I=j+(A^M^k)+O[1]+2763975236&4294967295,j=A+(I<<4&4294967295|I>>>28),I=k+(j^A^M)+O[4]+1272893353&4294967295,k=j+(I<<11&4294967295|I>>>21),I=M+(k^j^A)+O[7]+4139469664&4294967295,M=k+(I<<16&4294967295|I>>>16),I=A+(M^k^j)+O[10]+3200236656&4294967295,A=M+(I<<23&4294967295|I>>>9),I=j+(A^M^k)+O[13]+681279174&4294967295,j=A+(I<<4&4294967295|I>>>28),I=k+(j^A^M)+O[0]+3936430074&4294967295,k=j+(I<<11&4294967295|I>>>21),I=M+(k^j^A)+O[3]+3572445317&4294967295,M=k+(I<<16&4294967295|I>>>16),I=A+(M^k^j)+O[6]+76029189&4294967295,A=M+(I<<23&4294967295|I>>>9),I=j+(A^M^k)+O[9]+3654602809&4294967295,j=A+(I<<4&4294967295|I>>>28),I=k+(j^A^M)+O[12]+3873151461&4294967295,k=j+(I<<11&4294967295|I>>>21),I=M+(k^j^A)+O[15]+530742520&4294967295,M=k+(I<<16&4294967295|I>>>16),I=A+(M^k^j)+O[2]+3299628645&4294967295,A=M+(I<<23&4294967295|I>>>9),I=j+(M^(A|~k))+O[0]+4096336452&4294967295,j=A+(I<<6&4294967295|I>>>26),I=k+(A^(j|~M))+O[7]+1126891415&4294967295,k=j+(I<<10&4294967295|I>>>22),I=M+(j^(k|~A))+O[14]+2878612391&4294967295,M=k+(I<<15&4294967295|I>>>17),I=A+(k^(M|~j))+O[5]+4237533241&4294967295,A=M+(I<<21&4294967295|I>>>11),I=j+(M^(A|~k))+O[12]+1700485571&4294967295,j=A+(I<<6&4294967295|I>>>26),I=k+(A^(j|~M))+O[3]+2399980690&4294967295,k=j+(I<<10&4294967295|I>>>22),I=M+(j^(k|~A))+O[10]+4293915773&4294967295,M=k+(I<<15&4294967295|I>>>17),I=A+(k^(M|~j))+O[1]+2240044497&4294967295,A=M+(I<<21&4294967295|I>>>11),I=j+(M^(A|~k))+O[8]+1873313359&4294967295,j=A+(I<<6&4294967295|I>>>26),I=k+(A^(j|~M))+O[15]+4264355552&4294967295,k=j+(I<<10&4294967295|I>>>22),I=M+(j^(k|~A))+O[6]+2734768916&4294967295,M=k+(I<<15&4294967295|I>>>17),I=A+(k^(M|~j))+O[13]+1309151649&4294967295,A=M+(I<<21&4294967295|I>>>11),I=j+(M^(A|~k))+O[4]+4149444226&4294967295,j=A+(I<<6&4294967295|I>>>26),I=k+(A^(j|~M))+O[11]+3174756917&4294967295,k=j+(I<<10&4294967295|I>>>22),I=M+(j^(k|~A))+O[2]+718787259&4294967295,M=k+(I<<15&4294967295|I>>>17),I=A+(k^(M|~j))+O[9]+3951481745&4294967295,T.g[0]=T.g[0]+j&4294967295,T.g[1]=T.g[1]+(M+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+M&4294967295,T.g[3]=T.g[3]+k&4294967295}s.prototype.v=function(T,j){j===void 0&&(j=T.length);const A=j-this.blockSize,O=this.C;let M=this.h,k=0;for(;k<j;){if(M==0)for(;k<=A;)l(this,T,k),k+=this.blockSize;if(typeof T=="string"){for(;k<j;)if(O[M++]=T.charCodeAt(k++),M==this.blockSize){l(this,O),M=0;break}}else for(;k<j;)if(O[M++]=T[k++],M==this.blockSize){l(this,O),M=0;break}}this.h=M,this.o+=j},s.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var j=1;j<T.length-8;++j)T[j]=0;j=this.o*8;for(var A=T.length-8;A<T.length;++A)T[A]=j&255,j/=256;for(this.v(T),T=Array(16),j=0,A=0;A<4;++A)for(let O=0;O<32;O+=8)T[j++]=this.g[A]>>>O&255;return T};function c(T,j){var A=f;return Object.prototype.hasOwnProperty.call(A,T)?A[T]:A[T]=j(T)}function d(T,j){this.h=j;const A=[];let O=!0;for(let M=T.length-1;M>=0;M--){const k=T[M]|0;O&&k==j||(A[M]=k,O=!1)}this.g=A}var f={};function g(T){return-128<=T&&T<128?c(T,function(j){return new d([j|0],j<0?-1:0)}):new d([T|0],T<0?-1:0)}function x(T){if(isNaN(T)||!isFinite(T))return v;if(T<0)return $(x(-T));const j=[];let A=1;for(let O=0;T>=A;O++)j[O]=T/A|0,A*=4294967296;return new d(j,0)}function w(T,j){if(T.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(T.charAt(0)=="-")return $(w(T.substring(1),j));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=x(Math.pow(j,8));let O=v;for(let k=0;k<T.length;k+=8){var M=Math.min(8,T.length-k);const I=parseInt(T.substring(k,k+M),j);M<8?(M=x(Math.pow(j,M)),O=O.j(M).add(x(I))):(O=O.j(A),O=O.add(x(I)))}return O}var v=g(0),N=g(1),C=g(16777216);r=d.prototype,r.m=function(){if(Z(this))return-$(this).m();let T=0,j=1;for(let A=0;A<this.g.length;A++){const O=this.i(A);T+=(O>=0?O:4294967296+O)*j,j*=4294967296}return T},r.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(V(this))return"0";if(Z(this))return"-"+$(this).toString(T);const j=x(Math.pow(T,6));var A=this;let O="";for(;;){const M=ve(A,j).g;A=me(A,M.j(j));let k=((A.g.length>0?A.g[0]:A.h)>>>0).toString(T);if(A=M,V(A))return k+O;for(;k.length<6;)k="0"+k;O=k+O}},r.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function V(T){if(T.h!=0)return!1;for(let j=0;j<T.g.length;j++)if(T.g[j]!=0)return!1;return!0}function Z(T){return T.h==-1}r.l=function(T){return T=me(this,T),Z(T)?-1:V(T)?0:1};function $(T){const j=T.g.length,A=[];for(let O=0;O<j;O++)A[O]=~T.g[O];return new d(A,~T.h).add(N)}r.abs=function(){return Z(this)?$(this):this},r.add=function(T){const j=Math.max(this.g.length,T.g.length),A=[];let O=0;for(let M=0;M<=j;M++){let k=O+(this.i(M)&65535)+(T.i(M)&65535),I=(k>>>16)+(this.i(M)>>>16)+(T.i(M)>>>16);O=I>>>16,k&=65535,I&=65535,A[M]=I<<16|k}return new d(A,A[A.length-1]&-2147483648?-1:0)};function me(T,j){return T.add($(j))}r.j=function(T){if(V(this)||V(T))return v;if(Z(this))return Z(T)?$(this).j($(T)):$($(this).j(T));if(Z(T))return $(this.j($(T)));if(this.l(C)<0&&T.l(C)<0)return x(this.m()*T.m());const j=this.g.length+T.g.length,A=[];for(var O=0;O<2*j;O++)A[O]=0;for(O=0;O<this.g.length;O++)for(let M=0;M<T.g.length;M++){const k=this.i(O)>>>16,I=this.i(O)&65535,ce=T.i(M)>>>16,oe=T.i(M)&65535;A[2*O+2*M]+=I*oe,de(A,2*O+2*M),A[2*O+2*M+1]+=k*oe,de(A,2*O+2*M+1),A[2*O+2*M+1]+=I*ce,de(A,2*O+2*M+1),A[2*O+2*M+2]+=k*ce,de(A,2*O+2*M+2)}for(T=0;T<j;T++)A[T]=A[2*T+1]<<16|A[2*T];for(T=j;T<2*j;T++)A[T]=0;return new d(A,0)};function de(T,j){for(;(T[j]&65535)!=T[j];)T[j+1]+=T[j]>>>16,T[j]&=65535,j++}function ue(T,j){this.g=T,this.h=j}function ve(T,j){if(V(j))throw Error("division by zero");if(V(T))return new ue(v,v);if(Z(T))return j=ve($(T),j),new ue($(j.g),$(j.h));if(Z(j))return j=ve(T,$(j)),new ue($(j.g),j.h);if(T.g.length>30){if(Z(T)||Z(j))throw Error("slowDivide_ only works with positive integers.");for(var A=N,O=j;O.l(T)<=0;)A=ge(A),O=ge(O);var M=F(A,1),k=F(O,1);for(O=F(O,2),A=F(A,2);!V(O);){var I=k.add(O);I.l(T)<=0&&(M=M.add(A),k=I),O=F(O,1),A=F(A,1)}return j=me(T,M.j(j)),new ue(M,j)}for(M=v;T.l(j)>=0;){for(A=Math.max(1,Math.floor(T.m()/j.m())),O=Math.ceil(Math.log(A)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),k=x(A),I=k.j(j);Z(I)||I.l(T)>0;)A-=O,k=x(A),I=k.j(j);V(k)&&(k=N),M=M.add(k),T=me(T,I)}return new ue(M,T)}r.B=function(T){return ve(this,T).h},r.and=function(T){const j=Math.max(this.g.length,T.g.length),A=[];for(let O=0;O<j;O++)A[O]=this.i(O)&T.i(O);return new d(A,this.h&T.h)},r.or=function(T){const j=Math.max(this.g.length,T.g.length),A=[];for(let O=0;O<j;O++)A[O]=this.i(O)|T.i(O);return new d(A,this.h|T.h)},r.xor=function(T){const j=Math.max(this.g.length,T.g.length),A=[];for(let O=0;O<j;O++)A[O]=this.i(O)^T.i(O);return new d(A,this.h^T.h)};function ge(T){const j=T.g.length+1,A=[];for(let O=0;O<j;O++)A[O]=T.i(O)<<1|T.i(O-1)>>>31;return new d(A,T.h)}function F(T,j){const A=j>>5;j%=32;const O=T.g.length-A,M=[];for(let k=0;k<O;k++)M[k]=j>0?T.i(k+A)>>>j|T.i(k+A+1)<<32-j:T.i(k+A);return new d(M,T.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,MN=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=x,d.fromString=w,pi=d}).apply(typeof zw<"u"?zw:typeof self<"u"?self:typeof window<"u"?window:{});var Xh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ON,Tu,VN,lf,jp,PN,LN,zN;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xh=="object"&&Xh];for(var y=0;y<h.length;++y){var _=h[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function l(h,y){if(y)e:{var _=s;h=h.split(".");for(var S=0;S<h.length-1;S++){var G=h[S];if(!(G in _))break e;_=_[G]}h=h[h.length-1],S=_[h],y=y(S),y!=S&&y!=null&&e(_,h,{configurable:!0,writable:!0,value:y})}}l("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(h){return h||function(y){var _=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&_.push([S,y[S]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function f(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,_){return h.call.apply(h.bind,arguments)}function x(h,y,_){return x=g,x.apply(null,arguments)}function w(h,y){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function v(h,y){function _(){}_.prototype=y.prototype,h.Z=y.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(S,G,J){for(var be=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)be[Fe-2]=arguments[Fe];return y.prototype[G].apply(S,be)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function C(h){const y=h.length;if(y>0){const _=Array(y);for(let S=0;S<y;S++)_[S]=h[S];return _}return[]}function V(h,y){for(let S=1;S<arguments.length;S++){const G=arguments[S];var _=typeof G;if(_=_!="object"?_:G?Array.isArray(G)?"array":_:"null",_=="array"||_=="object"&&typeof G.length=="number"){_=h.length||0;const J=G.length||0;h.length=_+J;for(let be=0;be<J;be++)h[_+be]=G[be]}else h.push(G)}}class Z{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function $(h){d.setTimeout(()=>{throw h},0)}function me(){var h=T;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class de{constructor(){this.h=this.g=null}add(y,_){const S=ue.get();S.set(y,_),this.h?this.h.next=S:this.g=S,this.h=S}}var ue=new Z(()=>new ve,h=>h.reset());class ve{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,F=!1,T=new de,j=()=>{const h=Promise.resolve(void 0);ge=()=>{h.then(A)}};function A(){for(var h;h=me();){try{h.h.call(h.g)}catch(_){$(_)}var y=ue;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}F=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};d.addEventListener("test",_,y),d.removeEventListener("test",_,y)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function ce(h,y){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}v(ce,M),ce.prototype.init=function(h,y){const _=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(_=="mouseover"?y=h.fromElement:_=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ce.Z.h.call(this)},ce.prototype.h=function(){ce.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var oe="closure_listenable_"+(Math.random()*1e6|0),B=0;function ie(h,y,_,S,G){this.listener=h,this.proxy=null,this.src=y,this.type=_,this.capture=!!S,this.ha=G,this.key=++B,this.da=this.fa=!1}function Y(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function se(h,y,_){for(const S in h)y.call(_,h[S],S,h)}function Ee(h,y){for(const _ in h)y.call(void 0,h[_],_,h)}function R(h){const y={};for(const _ in h)y[_]=h[_];return y}const z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(h,y){let _,S;for(let G=1;G<arguments.length;G++){S=arguments[G];for(_ in S)h[_]=S[_];for(let J=0;J<z.length;J++)_=z[J],Object.prototype.hasOwnProperty.call(S,_)&&(h[_]=S[_])}}function ee(h){this.src=h,this.g={},this.h=0}ee.prototype.add=function(h,y,_,S,G){const J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);const be=Me(h,y,S,G);return be>-1?(y=h[be],_||(y.fa=!1)):(y=new ie(y,this.src,J,!!S,G),y.fa=_,h.push(y)),y};function we(h,y){const _=y.type;if(_ in h.g){var S=h.g[_],G=Array.prototype.indexOf.call(S,y,void 0),J;(J=G>=0)&&Array.prototype.splice.call(S,G,1),J&&(Y(y),h.g[_].length==0&&(delete h.g[_],h.h--))}}function Me(h,y,_,S){for(let G=0;G<h.length;++G){const J=h[G];if(!J.da&&J.listener==y&&J.capture==!!_&&J.ha==S)return G}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),it={};function Re(h,y,_,S,G){if(Array.isArray(y)){for(let J=0;J<y.length;J++)Re(h,y[J],_,S,G);return null}return _=Vr(_),h&&h[oe]?h.J(y,_,f(S)?!!S.capture:!1,G):Nt(h,y,_,!1,S,G)}function Nt(h,y,_,S,G,J){if(!y)throw Error("Invalid event type");const be=f(G)?!!G.capture:!!G;let Fe=_s(h);if(Fe||(h[Ue]=Fe=new ee(h)),_=Fe.add(y,_,S,be,J),_.proxy)return _;if(S=gt(),_.proxy=S,S.src=h,S.listener=_,h.addEventListener)k||(G=be),G===void 0&&(G=!1),h.addEventListener(y.toString(),S,G);else if(h.attachEvent)h.attachEvent(_n(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function gt(){function h(_){return y.call(h.src,h.listener,_)}const y=ws;return h}function Rt(h,y,_,S,G){if(Array.isArray(y))for(var J=0;J<y.length;J++)Rt(h,y[J],_,S,G);else S=f(S)?!!S.capture:!!S,_=Vr(_),h&&h[oe]?(h=h.i,J=String(y).toString(),J in h.g&&(y=h.g[J],_=Me(y,_,S,G),_>-1&&(Y(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete h.g[J],h.h--)))):h&&(h=_s(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Me(y,_,S,G)),(_=h>-1?y[h]:null)&&lt(_))}function lt(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[oe])we(y.i,h);else{var _=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(_,S,h.capture):y.detachEvent?y.detachEvent(_n(_),S):y.addListener&&y.removeListener&&y.removeListener(S),(_=_s(y))?(we(_,h),_.h==0&&(_.src=null,y[Ue]=null)):Y(h)}}}function _n(h){return h in it?it[h]:it[h]="on"+h}function ws(h,y){if(h.da)h=!0;else{y=new ce(y,this);const _=h.listener,S=h.ha||h.src;h.fa&&lt(h),h=_.call(S,y)}return h}function _s(h){return h=h[Ue],h instanceof ee?h:null}var ar="__closure_events_fn_"+(Math.random()*1e9>>>0);function Vr(h){return typeof h=="function"?h:(h[ar]||(h[ar]=function(y){return h.handleEvent(y)}),h[ar])}function Mt(){O.call(this),this.i=new ee(this),this.M=this,this.G=null}v(Mt,O),Mt.prototype[oe]=!0,Mt.prototype.removeEventListener=function(h,y,_,S){Rt(this,h,y,_,S)};function Ot(h,y){var _,S=h.G;if(S)for(_=[];S;S=S.G)_.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new M(y,h);else if(y instanceof M)y.target=y.target||h;else{var G=y;y=new M(S,h),U(y,G)}G=!0;let J,be;if(_)for(be=_.length-1;be>=0;be--)J=y.g=_[be],G=mn(J,S,!0,y)&&G;if(J=y.g=h,G=mn(J,S,!0,y)&&G,G=mn(J,S,!1,y)&&G,_)for(be=0;be<_.length;be++)J=y.g=_[be],G=mn(J,S,!1,y)&&G}Mt.prototype.N=function(){if(Mt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const _=h.g[y];for(let S=0;S<_.length;S++)Y(_[S]);delete h.g[y],h.h--}}this.G=null},Mt.prototype.J=function(h,y,_,S){return this.i.add(String(h),y,!1,_,S)},Mt.prototype.K=function(h,y,_,S){return this.i.add(String(h),y,!0,_,S)};function mn(h,y,_,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let G=!0;for(let J=0;J<y.length;++J){const be=y[J];if(be&&!be.da&&be.capture==_){const Fe=be.listener,Xt=be.ha||be.src;be.fa&&we(h.i,be),G=Fe.call(Xt,S)!==!1&&G}}return G&&!S.defaultPrevented}function wa(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:d.setTimeout(h,y||0)}function _a(h){h.g=wa(()=>{h.g=null,h.i&&(h.i=!1,_a(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Vt extends O{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:_a(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ns(h){O.call(this),this.h=h,this.g={}}v(Ns,O);var ir=[];function Pr(h){se(h.g,function(y,_){this.g.hasOwnProperty(_)&&lt(y)},h),h.g={}}Ns.prototype.N=function(){Ns.Z.N.call(this),Pr(this)},Ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nn=d.JSON.stringify,Na=d.JSON.parse,Ea=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function le(){}function Xe(){}var Be={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ye(){M.call(this,"d")}v(Ye,M);function Ut(){M.call(this,"c")}v(Ut,M);var nt={},Lr=null;function Un(){return Lr=Lr||new Mt}nt.Ia="serverreachability";function lr(h){M.call(this,nt.Ia,h)}v(lr,M);function $n(h){const y=Un();Ot(y,new lr(y))}nt.STAT_EVENT="statevent";function he(h,y){M.call(this,nt.STAT_EVENT,h),this.stat=y}v(he,M);function _e(h){const y=Un();Ot(y,new he(y,h))}nt.Ja="timingevent";function Ie(h,y){M.call(this,nt.Ja,h),this.size=y}v(Ie,M);function ye(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Le(){this.g=!0}Le.prototype.ua=function(){this.g=!1};function Je(h,y,_,S,G,J){h.info(function(){if(h.g)if(J){var be="",Fe=J.split("&");for(let ht=0;ht<Fe.length;ht++){var Xt=Fe[ht].split("=");if(Xt.length>1){const Pt=Xt[0];Xt=Xt[1];const js=Pt.split("_");be=js.length>=2&&js[1]=="type"?be+(Pt+"="+Xt+"&"):be+(Pt+"=redacted&")}}}else be=null;else be=J;return"XMLHTTP REQ ("+S+") [attempt "+G+"]: "+y+`
`+_+`
`+be})}function At(h,y,_,S,G,J,be){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+G+"]: "+y+`
`+_+`
`+J+" "+be})}function ut(h,y,_,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Bt(h,_)+(S?" "+S:"")})}function dt(h,y){h.info(function(){return"TIMEOUT: "+y})}Le.prototype.info=function(){};function Bt(h,y){if(!h.g)return y;if(!y)return null;try{const J=JSON.parse(y);if(J){for(h=0;h<J.length;h++)if(Array.isArray(J[h])){var _=J[h];if(!(_.length<2)){var S=_[1];if(Array.isArray(S)&&!(S.length<1)){var G=S[0];if(G!="noop"&&G!="stop"&&G!="close")for(let be=1;be<S.length;be++)S[be]=""}}}}return Nn(J)}catch{return y}}var gn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ri={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xc;function ki(){}v(ki,le),ki.prototype.g=function(){return new XMLHttpRequest},xc=new ki;function zr(h){return encodeURIComponent(String(h))}function Td(h){var y=1;h=h.split(":");const _=[];for(;y>0&&h.length;)_.push(h.shift()),y--;return h.length&&_.push(h.join(":")),_}function Bs(h,y,_,S){this.j=h,this.i=y,this.l=_,this.S=S||1,this.V=new Ns(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qs}function qs(){this.i=null,this.g="",this.h=!1}var en={},pn={};function or(h,y,_){h.M=1,h.A=Di(nn(y)),h.u=_,h.R=!0,Dl(h,null)}function Dl(h,y){h.F=Date.now(),cr(h),h.B=nn(h.A);var _=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),Pl(_.i,"t",S),h.C=0,_=h.j.L,h.h=new qs,h.g=Ud(h.j,_?y:null,!h.u),h.P>0&&(h.O=new Vt(x(h.Y,h,h.g),h.P)),y=h.V,_=h.g,S=h.ba;var G="readystatechange";Array.isArray(G)||(G&&(ir[0]=G.toString()),G=ir);for(let J=0;J<G.length;J++){const be=Re(_,G[J],S||y.handleEvent,!1,y.h||y);if(!be)break;y.g[be.key]=be}y=h.J?R(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),$n(),Je(h.i,h.v,h.B,h.l,h.S,h.u)}Bs.prototype.ba=function(h){h=h.target;const y=this.O;y&&Gs(h)==3?y.j():this.Y(h)},Bs.prototype.Y=function(h){try{if(h==this.g)e:{const Fe=Gs(this.g),Xt=this.g.ya(),ht=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||En(this.g)))){this.K||Fe!=4||Xt==7||(Xt==8||ht<=0?$n(3):$n(2)),ur(this);var y=this.g.ca();this.X=y;var _=Um(this);if(this.o=y==200,At(this.i,this.v,this.B,this.l,this.S,Fe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var S,G=this.g;if((S=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(S)){var J=S;break t}}J=null}if(h=J)ut(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,dr(this,h);else{this.o=!1,this.m=3,_e(12),is(this),Es(this);break e}}if(this.R){h=!0;let Pt;for(;!this.K&&this.C<_.length;)if(Pt=jd(this,_),Pt==pn){Fe==4&&(this.m=4,_e(14),h=!1),ut(this.i,this.l,null,"[Incomplete Response]");break}else if(Pt==en){this.m=4,_e(15),ut(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else ut(this.i,this.l,Pt,null),dr(this,Pt);if(Sd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||_.length!=0||this.h.h||(this.m=1,_e(16),h=!1),this.o=this.o&&h,!h)ut(this.i,this.l,_,"[Invalid Chunked Response]"),is(this),Es(this);else if(_.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),kc(be),be.P=!0,_e(11))}}else ut(this.i,this.l,_,null),dr(this,_);Fe==4&&is(this),this.o&&!this.K&&(Fe==4?Vd(this.j,this):(this.o=!1,cr(this)))}else Br(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,_e(12)):(this.m=0,_e(13)),is(this),Es(this)}}}catch{}finally{}};function Um(h){if(!Sd(h))return h.g.la();const y=En(h.g);if(y==="")return"";let _="";const S=y.length,G=Gs(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return is(h),Es(h),"";h.h.i=new d.TextDecoder}for(let J=0;J<S;J++)h.h.h=!0,_+=h.h.i.decode(y[J],{stream:!(G&&J==S-1)});return y.length=0,h.h.g+=_,h.C=0,h.h.g}function Sd(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function jd(h,y){var _=h.C,S=y.indexOf(`
`,_);return S==-1?pn:(_=Number(y.substring(_,S)),isNaN(_)?en:(S+=1,S+_>y.length?pn:(y=y.slice(S,S+_),h.C=S+_,y)))}Bs.prototype.cancel=function(){this.K=!0,is(this)};function cr(h){h.T=Date.now()+h.H,Ml(h,h.H)}function Ml(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=ye(x(h.aa,h),y)}function ur(h){h.D&&(d.clearTimeout(h.D),h.D=null)}Bs.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(dt(this.i,this.B),this.M!=2&&($n(),_e(17)),is(this),this.m=2,Es(this)):Ml(this,this.T-h)};function Es(h){h.j.I==0||h.K||Vd(h.j,h)}function is(h){ur(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Pr(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function dr(h,y){try{var _=h.j;if(_.I!=0&&(_.g==h||fr(_.h,h))){if(!h.L&&fr(_.h,h)&&_.I==3){try{var S=_.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var G=S;if(G[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)ql(_),ka(_);else break e;Ui(_),_e(18)}}else _.xa=G[1],0<_.xa-_.K&&G[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=ye(x(_.Va,_),6e3));hr(_.h)<=1&&_.ta&&(_.ta=void 0)}else br(_,11)}else if((h.L||_.g==h)&&ql(_),!I(y))for(G=_.Ba.g.parse(y),y=0;y<G.length;y++){let ht=G[y];const Pt=ht[0];if(!(Pt<=_.K))if(_.K=Pt,ht=ht[1],_.I==2)if(ht[0]=="c"){_.M=ht[1],_.ba=ht[2];const js=ht[3];js!=null&&(_.ka=js,_.j.info("VER="+_.ka));const vr=ht[4];vr!=null&&(_.za=vr,_.j.info("SVER="+_.za));const $s=ht[5];$s!=null&&typeof $s=="number"&&$s>0&&(S=1.5*$s,_.O=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const Ks=h.g;if(Ks){const Bi=Ks.g?Ks.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bi){var J=S.h;J.g||Bi.indexOf("spdy")==-1&&Bi.indexOf("quic")==-1&&Bi.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(vc(J,J.h),J.h=null))}if(S.G){const Fl=Ks.g?Ks.g.getResponseHeader("X-HTTP-Session-Id"):null;Fl&&(S.wa=Fl,pt(S.J,S.G,Fl))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),S=_;var be=h;if(S.na=zd(S,S.L?S.ba:null,S.W),be.L){wc(S.h,be);var Fe=be,Xt=S.O;Xt&&(Fe.H=Xt),Fe.D&&(ur(Fe),cr(Fe)),S.g=be}else Md(S);_.i.length>0&&yr(_)}else ht[0]!="stop"&&ht[0]!="close"||br(_,7);else _.I==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?br(_,7):Cc(_):ht[0]!="noop"&&_.l&&_.l.qa(ht),_.A=0)}}$n(4)}catch{}}var tn=class{constructor(h,y){this.g=h,this.map=y}};function yc(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function bc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function hr(h){return h.h?1:h.g?h.g.size:0}function fr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function vc(h,y){h.g?h.g.add(y):h.h=y}function wc(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}yc.prototype.cancel=function(){if(this.i=_c(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function _c(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const _ of h.g.values())y=y.concat(_.G);return y}return C(h.i)}var Ad=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ol(h,y){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const S=h[_].indexOf("=");let G,J=null;S>=0?(G=h[_].substring(0,S),J=h[_].substring(S+1)):G=h[_],y(G,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function ls(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof ls?(this.l=h.l,xn(this,h.j),this.o=h.o,this.g=h.g,Ta(this,h.u),this.h=h.h,Nc(this,kd(h.i)),this.m=h.m):h&&(y=String(h).match(Ad))?(this.l=!1,xn(this,y[1]||"",!0),this.o=mr(y[2]||""),this.g=mr(y[3]||"",!0),Ta(this,y[4]),this.h=mr(y[5]||"",!0),Nc(this,y[6]||"",!0),this.m=mr(y[7]||"")):(this.l=!1,this.i=new ja(null,this.l))}ls.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Mi(y,Vl,!0),":");var _=this.g;return(_||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Mi(y,Vl,!0),"@"),h.push(zr(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(Mi(_,_.charAt(0)=="/"?Ec:Id,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",Mi(_,Cd)),h.join("")},ls.prototype.resolve=function(h){const y=nn(this);let _=!!h.j;_?xn(y,h.j):_=!!h.o,_?y.o=h.o:_=!!h.g,_?y.g=h.g:_=h.u!=null;var S=h.h;if(_)Ta(y,h.u);else if(_=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var G=y.h.lastIndexOf("/");G!=-1&&(S=y.h.slice(0,G+1)+S)}if(G=S,G==".."||G==".")S="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){S=G.lastIndexOf("/",0)==0,G=G.split("/");const J=[];for(let be=0;be<G.length;){const Fe=G[be++];Fe=="."?S&&be==G.length&&J.push(""):Fe==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),S&&be==G.length&&J.push("")):(J.push(Fe),S=!0)}S=J.join("/")}else S=G}return _?y.h=S:_=h.i.toString()!=="",_?Nc(y,kd(h.i)):_=!!h.m,_&&(y.m=h.m),y};function nn(h){return new ls(h)}function xn(h,y,_){h.j=_?mr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ta(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Nc(h,y,_){y instanceof ja?(h.i=y,Ll(h.i,h.l)):(_||(y=Mi(y,Sa)),h.i=new ja(y,h.l))}function pt(h,y,_){h.i.set(y,_)}function Di(h){return pt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function mr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Mi(h,y,_){return typeof h=="string"?(h=encodeURI(h).replace(y,Kn),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Kn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Vl=/[#\/\?@]/g,Id=/[#\?:]/g,Ec=/[#\?]/g,Sa=/[#\?@]/g,Cd=/#/g;function ja(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Qn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ol(h.i,function(y,_){h.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}r=ja.prototype,r.add=function(h,y){Qn(this),this.i=null,h=Aa(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(y),this.h+=1,this};function Rd(h,y){Qn(h),y=Aa(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Tc(h,y){return Qn(h),y=Aa(h,y),h.g.has(y)}r.forEach=function(h,y){Qn(this),this.g.forEach(function(_,S){_.forEach(function(G){h.call(y,G,S,this)},this)},this)};function Sc(h,y){Qn(h);let _=[];if(typeof y=="string")Tc(h,y)&&(_=_.concat(h.g.get(Aa(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)_=_.concat(h[y]);return _}r.set=function(h,y){return Qn(this),this.i=null,h=Aa(this,h),Tc(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=Sc(this,h),h.length>0?String(h[0]):y):y};function Pl(h,y,_){Rd(h,y),_.length>0&&(h.i=null,h.g.set(Aa(h,y),C(_)),h.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var _=y[S];const G=zr(_);_=Sc(this,_);for(let J=0;J<_.length;J++){let be=G;_[J]!==""&&(be+="="+zr(_[J])),h.push(be)}}return this.i=h.join("&")};function kd(h){const y=new ja;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Aa(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ll(h,y){y&&!h.j&&(Qn(h),h.i=null,h.g.forEach(function(_,S){const G=S.toLowerCase();S!=G&&(Rd(this,S),Pl(this,G,_))},h)),h.j=y}function Fs(h,y){const _=new Le;if(d.Image){const S=new Image;S.onload=w(Ts,_,"TestLoadImage: loaded",!0,y,S),S.onerror=w(Ts,_,"TestLoadImage: error",!1,y,S),S.onabort=w(Ts,_,"TestLoadImage: abort",!1,y,S),S.ontimeout=w(Ts,_,"TestLoadImage: timeout",!1,y,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function jc(h,y){const _=new Le,S=new AbortController,G=setTimeout(()=>{S.abort(),Ts(_,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(J=>{clearTimeout(G),J.ok?Ts(_,"TestPingServer: ok",!0,y):Ts(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(G),Ts(_,"TestPingServer: error",!1,y)})}function Ts(h,y,_,S,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),S(_)}catch{}}function Ia(){this.g=new Ea}function gr(h){this.i=h.Sb||null,this.h=h.ab||!1}v(gr,le),gr.prototype.g=function(){return new Oi(this.i,this.h)};function Oi(h,y){Mt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Oi,Mt),r=Oi.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Hs(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||d).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ca(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Hs(this)),this.g&&(this.readyState=3,Hs(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;zl(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function zl(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Ca(this):Hs(this),this.readyState==3&&zl(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,Ca(this))},r.Na=function(h){this.g&&(this.response=h,Ca(this))},r.ga=function(){this.g&&Ca(this)};function Ca(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Hs(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=y.next();return h.join(`\r
`)};function Hs(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Oi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ss(h){let y="";return se(h,function(_,S){y+=S,y+=":",y+=_,y+=`\r
`}),y}function Vi(h,y,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=Ss(_),typeof h=="string"?_!=null&&zr(_):pt(h,y,_))}function Et(h){Mt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Et,Mt);var pr=/^https?$/i,Ac=["POST","PUT"];r=Et.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xc.g(),this.g.onreadystatechange=N(x(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(J){Pi(this,J);return}if(h=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var G in S)_.set(G,S[G]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const J of S.keys())_.set(J,S.get(J));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(J=>J.toLowerCase()=="content-type"),G=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Ac,y,void 0)>=0)||S||G||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,be]of _)this.g.setRequestHeader(J,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(J){Pi(this,J)}};function Pi(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Ic(h),Ur(h)}function Ic(h){h.A||(h.A=!0,Ot(h,"complete"),Ot(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ot(this,"complete"),Ot(this,"abort"),Ur(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ur(this,!0)),Et.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Li(this):this.Xa())},r.Xa=function(){Li(this)};function Li(h){if(h.h&&typeof c<"u"){if(h.v&&Gs(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ot(h,"readystatechange"),Gs(h)==4){h.h=!1;try{const J=h.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var S;if(S=J===0){let be=String(h.D).match(Ad)[1]||null;!be&&d.self&&d.self.location&&(be=d.self.location.protocol.slice(0,-1)),S=!pr.test(be?be.toLowerCase():"")}_=S}if(_)Ot(h,"complete"),Ot(h,"success");else{h.o=6;try{var G=Gs(h)>2?h.g.statusText:""}catch{G=""}h.l=G+" ["+h.ca()+"]",Ic(h)}}finally{Ur(h)}}}}function Ur(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,y||Ot(h,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Gs(h){return h.g?h.g.readyState:0}r.ca=function(){try{return Gs(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Na(y)}};function En(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Br(h){const y={};h=(h.g&&Gs(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(I(h[S]))continue;var _=Td(h[S]);const G=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const J=y[G]||[];y[G]=J,J.push(_)}Ee(y,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xr(h,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||y}function Ra(h){this.za=0,this.i=[],this.j=new Le,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xr("baseRetryDelayMs",5e3,h),this.Za=xr("retryDelaySeedMs",1e4,h),this.Ta=xr("forwardChannelMaxRetries",2,h),this.va=xr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new yc(h&&h.concurrentRequestLimit),this.Ba=new Ia,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ra.prototype,r.ka=8,r.I=1,r.connect=function(h,y,_,S){_e(0),this.W=h,this.H=y||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.J=zd(this,null,this.W),yr(this)};function Cc(h){if(Ul(h),h.I==3){var y=h.V++,_=nn(h.J);if(pt(_,"SID",h.M),pt(_,"RID",y),pt(_,"TYPE","terminate"),zi(h,_),y=new Bs(h,h.j,y),y.M=2,y.A=Di(nn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=y.A,_=!0),_||(y.g=Ud(y.j,null),y.g.ea(y.A)),y.F=Date.now(),cr(y)}Ld(h)}function ka(h){h.g&&(kc(h),h.g.cancel(),h.g=null)}function Ul(h){ka(h),h.v&&(d.clearTimeout(h.v),h.v=null),ql(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function yr(h){if(!bc(h.h)&&!h.m){h.m=!0;var y=h.Ea;ge||j(),F||(ge(),F=!0),T.add(y,h),h.D=0}}function Bl(h,y){return hr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=ye(x(h.Ea,h,y),Pd(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const G=new Bs(this,this.j,h);let J=this.o;if(this.U&&(J?(J=R(J),U(J,this.U)):J=this.U),this.u!==null||this.R||(G.J=J,J=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Dd(this,G,y),_=nn(this.J),pt(_,"RID",h),pt(_,"CVER",22),this.G&&pt(_,"X-HTTP-Session-Id",this.G),zi(this,_),J&&(this.R?y="headers="+zr(Ss(J))+"&"+y:this.u&&Vi(_,this.u,J)),vc(this.h,G),this.Ra&&pt(_,"TYPE","init"),this.S?(pt(_,"$req",y),pt(_,"SID","null"),G.U=!0,or(G,_,null)):or(G,_,y),this.I=2}}else this.I==3&&(h?Rc(this,h):this.i.length==0||bc(this.h)||Rc(this))};function Rc(h,y){var _;y?_=y.l:_=h.V++;const S=nn(h.J);pt(S,"SID",h.M),pt(S,"RID",_),pt(S,"AID",h.K),zi(h,S),h.u&&h.o&&Vi(S,h.u,h.o),_=new Bs(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Dd(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),vc(h.h,_),or(_,S,y)}function zi(h,y){h.H&&se(h.H,function(_,S){pt(y,S,_)}),h.l&&se({},function(_,S){pt(y,S,_)})}function Dd(h,y,_){_=Math.min(h.i.length,_);const S=h.l?x(h.l.Ka,h.l,h):null;e:{var G=h.i;let Fe=-1;for(;;){const Xt=["count="+_];Fe==-1?_>0?(Fe=G[0].g,Xt.push("ofs="+Fe)):Fe=0:Xt.push("ofs="+Fe);let ht=!0;for(let Pt=0;Pt<_;Pt++){var J=G[Pt].g;const js=G[Pt].map;if(J-=Fe,J<0)Fe=Math.max(0,G[Pt].g-100),ht=!1;else try{J="req"+J+"_"||"";try{var be=js instanceof Map?js:Object.entries(js);for(const[vr,$s]of be){let Ks=$s;f($s)&&(Ks=Nn($s)),Xt.push(J+vr+"="+encodeURIComponent(Ks))}}catch(vr){throw Xt.push(J+"type="+encodeURIComponent("_badmap")),vr}}catch{S&&S(js)}}if(ht){be=Xt.join("&");break e}}be=void 0}return h=h.i.splice(0,_),y.G=h,be}function Md(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ge||j(),F||(ge(),F=!0),T.add(y,h),h.A=0}}function Ui(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=ye(x(h.Da,h),Pd(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,Od(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=ye(x(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_e(10),ka(this),Od(this))};function kc(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Od(h){h.g=new Bs(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=nn(h.na);pt(y,"RID","rpc"),pt(y,"SID",h.M),pt(y,"AID",h.K),pt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&pt(y,"TO",h.ia),pt(y,"TYPE","xmlhttp"),zi(h,y),h.u&&h.o&&Vi(y,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=Di(nn(y)),_.u=null,_.R=!0,Dl(_,h)}r.Va=function(){this.C!=null&&(this.C=null,ka(this),Ui(this),_e(19))};function ql(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Vd(h,y){var _=null;if(h.g==y){ql(h),kc(h),h.g=null;var S=2}else if(fr(h.h,y))_=y.G,wc(h.h,y),S=1;else return;if(h.I!=0){if(y.o)if(S==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var G=h.D;S=Un(),Ot(S,new Ie(S,_)),yr(h)}else Md(h);else if(G=y.m,G==3||G==0&&y.X>0||!(S==1&&Bl(h,y)||S==2&&Ui(h)))switch(_&&_.length>0&&(y=h.h,y.i=y.i.concat(_)),G){case 1:br(h,5);break;case 4:br(h,10);break;case 3:br(h,6);break;default:br(h,2)}}}function Pd(h,y){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*y}function br(h,y){if(h.j.info("Error code "+y),y==2){var _=x(h.bb,h),S=h.Ua;const G=!S;S=new ls(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||xn(S,"https"),Di(S),G?Fs(S.toString(),_):jc(S.toString(),_)}else _e(2);h.I=0,h.l&&h.l.pa(y),Ld(h),Ul(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))};function Ld(h){if(h.I=0,h.ja=[],h.l){const y=_c(h.h);(y.length!=0||h.i.length!=0)&&(V(h.ja,y),V(h.ja,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.oa()}}function zd(h,y,_){var S=_ instanceof ls?nn(_):new ls(_);if(S.g!="")y&&(S.g=y+"."+S.g),Ta(S,S.u);else{var G=d.location;S=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;const J=new ls(null);S&&xn(J,S),y&&(J.g=y),G&&Ta(J,G),_&&(J.h=_),S=J}return _=h.G,y=h.wa,_&&y&&pt(S,_,y),pt(S,"VER",h.ka),zi(h,S),S}function Ud(h,y,_){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Et(new gr({ab:_})):new Et(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bd(){}r=Bd.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Da(){}Da.prototype.g=function(h,y){return new Bn(h,y)};function Bn(h,y){Mt.call(this),this.g=new Ra(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!I(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new qr(this)}v(Bn,Mt),Bn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Bn.prototype.close=function(){Cc(this.g)},Bn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=Nn(h),h=_);y.i.push(new tn(y.Ya++,h)),y.I==3&&yr(y)},Bn.prototype.N=function(){this.g.l=null,delete this.j,Cc(this.g),delete this.g,Bn.Z.N.call(this)};function qd(h){Ye.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const _ in y){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}v(qd,Ye);function Fd(){Ut.call(this),this.status=1}v(Fd,Ut);function qr(h){this.g=h}v(qr,Bd),qr.prototype.ra=function(){Ot(this.g,"a")},qr.prototype.qa=function(h){Ot(this.g,new qd(h))},qr.prototype.pa=function(h){Ot(this.g,new Fd)},qr.prototype.oa=function(){Ot(this.g,"b")},Da.prototype.createWebChannel=Da.prototype.g,Bn.prototype.send=Bn.prototype.o,Bn.prototype.open=Bn.prototype.m,Bn.prototype.close=Bn.prototype.close,zN=function(){return new Da},LN=function(){return Un()},PN=nt,jp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},gn.NO_ERROR=0,gn.TIMEOUT=8,gn.HTTP_ERROR=6,lf=gn,Ri.COMPLETE="complete",VN=Ri,Xe.EventType=Be,Be.OPEN="a",Be.CLOSE="b",Be.ERROR="c",Be.MESSAGE="d",Mt.prototype.listen=Mt.prototype.J,Tu=Xe,Et.prototype.listenOnce=Et.prototype.K,Et.prototype.getLastError=Et.prototype.Ha,Et.prototype.getLastErrorCode=Et.prototype.ya,Et.prototype.getStatus=Et.prototype.ca,Et.prototype.getResponseJson=Et.prototype.La,Et.prototype.getResponseText=Et.prototype.la,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Fa,ON=Et}).apply(typeof Xh<"u"?Xh:typeof self<"u"?self:typeof window<"u"?window:{});const Uw="@firebase/firestore",Bw="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mn.UNAUTHENTICATED=new Mn(null),Mn.GOOGLE_CREDENTIALS=new Mn("google-credentials-uid"),Mn.FIRST_PARTY=new Mn("first-party-uid"),Mn.MOCK_USER=new Mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl=new lm("@firebase/firestore");function So(){return wl.logLevel}function fe(r,...e){if(wl.logLevel<=et.DEBUG){const t=e.map(bx);wl.debug(`Firestore (${uc}): ${r}`,...t)}}function Wt(r,...e){if(wl.logLevel<=et.ERROR){const t=e.map(bx);wl.error(`Firestore (${uc}): ${r}`,...t)}}function Qu(r,...e){if(wl.logLevel<=et.WARN){const t=e.map(bx);wl.warn(`Firestore (${uc}): ${r}`,...t)}}function bx(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,UN(r,s,t)}function UN(r,e,t){let s=`FIRESTORE (${uc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Wt(s),new Error(s)}function Ce(r,e,t,s){let l="Unexpected state";typeof t=="string"?l=t:s=t,r||UN(e,l,s)}function je(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends sr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class IR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Mn.UNAUTHENTICATED)))}shutdown(){}}class CR{constructor(e){this.t=e,this.currentUser=Mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ce(this.o===void 0,42304);let s=this.i;const l=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let c=new Zs;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Zs,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},f=g=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Zs)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ce(typeof s.accessToken=="string",31837,{l:s}),new AR(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new Mn(e)}}class RR{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class kR{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new RR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ce(this.o===void 0,3512);const s=c=>{c.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,fe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const l=c=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new qw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ce(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new qw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=MR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<t&&(s+=e.charAt(l[c]%62))}return s}}function ze(r,e){return r<e?-1:r>e?1:0}function Ap(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const l=r.charAt(s),c=e.charAt(s);if(l!==c)return Qg(l)===Qg(c)?ze(l,c):Qg(l)?1:-1}return ze(r.length,e.length)}const OR=55296,VR=57343;function Qg(r){const e=r.charCodeAt(0);return e>=OR&&e<=VR}function Uo(r,e,t){return r.length===e.length&&r.every(((s,l)=>t(s,e[l])))}function BN(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="__name__";class Tr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Te(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Tr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Tr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let l=0;l<s;l++){const c=Tr.compareSegments(e.get(l),t.get(l));if(c!==0)return c}return ze(e.length,t.length)}static compareSegments(e,t){const s=Tr.isNumericId(e),l=Tr.isNumericId(t);return s&&!l?-1:!s&&l?1:s&&l?Tr.extractNumericId(e).compare(Tr.extractNumericId(t)):Ap(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return pi.fromString(e.substring(4,e.length-2))}}class mt extends Tr{construct(e,t,s){return new mt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new xe(te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((l=>l.length>0)))}return new mt(t)}static emptyPath(){return new mt([])}}const PR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends Tr{construct(e,t,s){return new Ft(e,t,s)}static isValidIdentifier(e){return PR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Fw}static keyField(){return new Ft([Fw])}static fromServerFormat(e){const t=[];let s="",l=0;const c=()=>{if(s.length===0)throw new xe(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;l<e.length;){const f=e[l];if(f==="\\"){if(l+1===e.length)throw new xe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new xe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,l+=2}else f==="`"?(d=!d,l++):f!=="."||d?(s+=f,l++):(c(),l++)}if(c(),d)throw new xe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(t)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(mt.fromString(e))}static fromName(e){return new Ne(mt.fromString(e).popFirst(5))}static empty(){return new Ne(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(r,e,t){if(!t)throw new xe(te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function LR(r,e,t,s){if(e===!0&&s===!0)throw new xe(te.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Hw(r){if(!Ne.isDocumentKey(r))throw new xe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Gw(r){if(Ne.isDocumentKey(r))throw new xe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function FN(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function dm(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te(12329,{type:typeof r})}function Cn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new xe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=dm(r);throw new xe(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function zR(r,e){if(e<=0)throw new xe(te.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(r,e){const t={typeString:r};return e&&(t.value=e),t}function hd(r,e){if(!FN(r))throw new xe(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const l=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){t=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){t=`Expected '${s}' field to equal '${c.value}'`;break}}if(t)throw new xe(te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w=-62135596800,Kw=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Kw);return new vt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<$w)throw new xe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Kw}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hd(e,vt._jsonSchema))return new vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$w;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vt._jsonSchemaVersion="firestore/timestamp/1.0",vt._jsonSchema={type:un("string",vt._jsonSchemaVersion),seconds:un("number"),nanoseconds:un("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new vt(0,0))}static max(){return new De(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=-1;class Mf{constructor(e,t,s,l){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=l}}function Ip(r){return r.fields.find((e=>e.kind===2))}function al(r){return r.fields.filter((e=>e.kind!==2))}Mf.UNKNOWN_ID=-1;class of{constructor(e,t){this.fieldPath=e,this.kind=t}}class Xu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Xu(0,vs.min())}}function HN(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=De.fromTimestamp(s===1e9?new vt(t+1,0):new vt(t,s));return new vs(l,Ne.empty(),e)}function GN(r){return new vs(r.readTime,r.key,Bo)}class vs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new vs(De.min(),Ne.empty(),Bo)}static max(){return new vs(De.max(),Ne.empty(),Bo)}}function wx(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ne.comparator(r.documentKey,e.documentKey),t!==0?t:ze(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ji(r){if(r.code!==te.FAILED_PRECONDITION||r.message!==$N)throw r;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new H(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,l)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof H?t:H.resolve(t)}catch(t){return H.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):H.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):H.reject(t)}static resolve(e){return new H(((t,s)=>{t(e)}))}static reject(e){return new H(((t,s)=>{s(e)}))}static waitFor(e){return new H(((t,s)=>{let l=0,c=0,d=!1;e.forEach((f=>{++l,f.next((()=>{++c,d&&c===l&&t()}),(g=>s(g)))})),d=!0,c===l&&t()}))}static or(e){let t=H.resolve(!1);for(const s of e)t=t.next((l=>l?H.resolve(l):s()));return t}static forEach(e,t){const s=[];return e.forEach(((l,c)=>{s.push(t.call(this,l,c))})),this.waitFor(s)}static mapArray(e,t){return new H(((s,l)=>{const c=e.length,d=new Array(c);let f=0;for(let g=0;g<c;g++){const x=g;t(e[x]).next((w=>{d[x]=w,++f,f===c&&s(d)}),(w=>l(w)))}}))}static doWhile(e,t){return new H(((s,l)=>{const c=()=>{e()===!0?t().next((()=>{c()}),l):s()};c()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="SimpleDb";class hm{static open(e,t,s,l){try{return new hm(t,e.transaction(l,s))}catch(c){throw new ku(t,c)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Zs,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ku(e,t.error)):this.S.resolve()},this.transaction.onerror=s=>{const l=_x(s.target.error);this.S.reject(new ku(e,l))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(fe(gs,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new BR(t)}}class xi{static delete(e){return fe(gs,"Removing database:",e),ll(L2().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!cx())return!1;if(xi.F())return!0;const e=hn(),t=xi.M(e),s=0<t&&t<10,l=QN(e),c=0<l&&l<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||c)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}constructor(e,t,s){this.name=e,this.version=t,this.N=s,this.B=null,xi.M(hn())===12.2&&Wt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(fe(gs,"Opening database:",this.name),this.db=await new Promise(((t,s)=>{const l=indexedDB.open(this.name,this.version);l.onsuccess=c=>{const d=c.target.result;t(d)},l.onblocked=()=>{s(new ku(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=c=>{const d=c.target.error;d.name==="VersionError"?s(new xe(te.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):d.name==="InvalidStateError"?s(new xe(te.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d)):s(new ku(e,d))},l.onupgradeneeded=c=>{fe(gs,'Database "'+this.name+'" requires upgrade from version:',c.oldVersion);const d=c.target.result;this.N.k(d,l.transaction,c.oldVersion,this.version).next((()=>{fe(gs,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,s,l){const c=t==="readonly";let d=0;for(;;){++d;try{this.db=await this.L(e);const f=hm.open(this.db,e,c?"readonly":"readwrite",s),g=l(f).next((x=>(f.C(),x))).catch((x=>(f.abort(x),H.reject(x)))).toPromise();return g.catch((()=>{})),await f.D,g}catch(f){const g=f,x=g.name!=="FirebaseError"&&d<3;if(fe(gs,"Transaction failed with error:",g.message,"Retrying:",x),this.close(),!x)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function QN(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class UR{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ll(this.U.delete())}}class ku extends xe{constructor(e,t){super(te.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ai(r){return r.name==="IndexedDbTransactionError"}class BR{constructor(e){this.store=e}put(e,t){let s;return t!==void 0?(fe(gs,"PUT",this.store.name,e,t),s=this.store.put(t,e)):(fe(gs,"PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),ll(s)}add(e){return fe(gs,"ADD",this.store.name,e,e),ll(this.store.add(e))}get(e){return ll(this.store.get(e)).next((t=>(t===void 0&&(t=null),fe(gs,"GET",this.store.name,e,t),t)))}delete(e){return fe(gs,"DELETE",this.store.name,e),ll(this.store.delete(e))}count(){return fe(gs,"COUNT",this.store.name),ll(this.store.count())}J(e,t){const s=this.options(e,t),l=s.index?this.store.index(s.index):this.store;if(typeof l.getAll=="function"){const c=l.getAll(s.range);return new H(((d,f)=>{c.onerror=g=>{f(g.target.error)},c.onsuccess=g=>{d(g.target.result)}}))}{const c=this.cursor(s),d=[];return this.H(c,((f,g)=>{d.push(g)})).next((()=>d))}}Y(e,t){const s=this.store.getAll(e,t===null?void 0:t);return new H(((l,c)=>{s.onerror=d=>{c(d.target.error)},s.onsuccess=d=>{l(d.target.result)}}))}Z(e,t){fe(gs,"DELETE ALL",this.store.name);const s=this.options(e,t);s.X=!1;const l=this.cursor(s);return this.H(l,((c,d,f)=>f.delete()))}ee(e,t){let s;t?s=e:(s={},t=e);const l=this.cursor(s);return this.H(l,t)}te(e){const t=this.cursor({});return new H(((s,l)=>{t.onerror=c=>{const d=_x(c.target.error);l(d)},t.onsuccess=c=>{const d=c.target.result;d?e(d.primaryKey,d.value).next((f=>{f?d.continue():s()})):s()}}))}H(e,t){const s=[];return new H(((l,c)=>{e.onerror=d=>{c(d.target.error)},e.onsuccess=d=>{const f=d.target.result;if(!f)return void l();const g=new UR(f),x=t(f.primaryKey,f.value,g);if(x instanceof H){const w=x.catch((v=>(g.done(),H.reject(v))));s.push(w)}g.isDone?l():g.G===null?f.continue():f.continue(g.G)}})).next((()=>H.waitFor(s)))}options(e,t){let s;return e!==void 0&&(typeof e=="string"?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.X?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ll(r){return new H(((e,t)=>{r.onsuccess=s=>{const l=s.target.result;e(l)},r.onerror=s=>{const l=_x(s.target.error);t(l)}}))}let Qw=!1;function _x(r){const e=xi.M(hn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Qw||(Qw=!0,setTimeout((()=>{throw s}),0)),s}}return r}const Du="IndexBackfiller";class qR{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){fe(Du,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();fe(Du,`Documents written: ${t}`)}catch(t){Ai(t)?fe(Du,"Ignoring IndexedDB error during index backfill: ",t):await ji(t)}await this.re(6e4)}))}}class FR{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const s=new Set;let l=t,c=!0;return H.doWhile((()=>c===!0&&l>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((d=>{if(d!==null&&!s.has(d))return fe(Du,`Processing collection: ${d}`),this.oe(e,d,l).next((f=>{l-=f,s.add(d)}));c=!1})))).next((()=>t-l))}oe(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((l=>this.localStore.localDocuments.getNextDocuments(e,t,l,s).next((c=>{const d=c.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next((()=>this._e(l,c))).next((f=>(fe(Du,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f)))).next((()=>d.size))}))))}_e(e,t){let s=e;return t.changes.forEach(((l,c)=>{const d=GN(c);wx(d,s)>0&&(s=d)})),new vs(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ts.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl=-1;function fm(r){return r==null}function Yu(r){return r===0&&1/r==-1/0}function XN(r){return typeof r=="number"&&Number.isInteger(r)&&!Yu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of="";function Ln(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Xw(e)),e=HR(r.get(t),e);return Xw(e)}function HR(r,e){let t=e;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":t+="";break;case Of:t+="";break;default:t+=c}}return t}function Xw(r){return r+Of+""}function Ar(r){const e=r.length;if(Ce(e>=2,64408,{path:r}),e===2)return Ce(r.charAt(0)===Of&&r.charAt(1)==="",56145,{path:r}),mt.emptyPath();const t=e-2,s=[];let l="";for(let c=0;c<e;){const d=r.indexOf(Of,c);switch((d<0||d>t)&&Te(50515,{path:r}),r.charAt(d+1)){case"":const f=r.substring(c,d);let g;l.length===0?g=f:(l+=f,g=l,l=""),s.push(g);break;case"":l+=r.substring(c,d),l+="\0";break;case"":l+=r.substring(c,d+1);break;default:Te(61167,{path:r})}c=d+2}return new mt(s)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il="remoteDocuments",fd="owner",vo="owner",Ju="mutationQueues",GR="userId",Js="mutations",Yw="batchId",dl="userMutationsIndex",Jw=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(r,e){return[r,Ln(e)]}function YN(r,e,t){return[r,Ln(e),t]}const $R={},qo="documentMutations",Vf="remoteDocumentsV14",KR=["prefixPath","collectionGroup","readTime","documentId"],uf="documentKeyIndex",QR=["prefixPath","collectionGroup","documentId"],JN="collectionGroupIndex",XR=["collectionGroup","readTime","prefixPath","documentId"],Wu="remoteDocumentGlobal",Cp="remoteDocumentGlobalKey",Fo="targets",WN="queryTargetsIndex",YR=["canonicalId","targetId"],Ho="targetDocuments",JR=["targetId","path"],Nx="documentTargetsIndex",WR=["path","targetId"],Pf="targetGlobalKey",ml="targetGlobal",Zu="collectionParents",ZR=["collectionId","parent"],Go="clientMetadata",e6="clientId",mm="bundles",t6="bundleId",gm="namedQueries",n6="name",Ex="indexConfiguration",s6="indexId",Rp="collectionGroupIndex",r6="collectionGroup",Mu="indexState",a6=["indexId","uid"],ZN="sequenceNumberIndex",i6=["uid","sequenceNumber"],Ou="indexEntries",l6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],eE="documentKeyIndex",o6=["indexId","uid","orderedDocumentKey"],pm="documentOverlays",c6=["userId","collectionPath","documentId"],kp="collectionPathOverlayIndex",u6=["userId","collectionPath","largestBatchId"],tE="collectionGroupOverlayIndex",d6=["userId","collectionGroup","largestBatchId"],Tx="globals",h6="name",nE=[Ju,Js,qo,il,Fo,fd,ml,Ho,Go,Wu,Zu,mm,gm],f6=[...nE,pm],sE=[Ju,Js,qo,Vf,Fo,fd,ml,Ho,Go,Wu,Zu,mm,gm,pm],rE=sE,Sx=[...rE,Ex,Mu,Ou],m6=Sx,aE=[...Sx,Tx],g6=aE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp extends KN{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function fn(r,e){const t=je(r);return xi.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ii(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function iE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,t){this.comparator=e,this.root=t||In.EMPTY}insert(e,t){return new Ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,In.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,In.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return t+s.left.size;l<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yh(this.root,e,this.comparator,!0)}}class Yh{constructor(e,t,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class In{constructor(e,t,s,l,c){this.key=e,this.value=t,this.color=s??In.RED,this.left=l??In.EMPTY,this.right=c??In.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,l,c){return new In(e??this.key,t??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let l=this;const c=s(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,t,s),null):c===0?l.copy(null,t,null,null,null):l.copy(null,null,null,null,l.right.insert(e,t,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return In.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,l=this;if(t(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,t),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),t(e,l.key)===0){if(l.right.isEmpty())return In.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,t))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,In.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,In.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}In.EMPTY=null,In.RED=!0,In.BLACK=!1;In.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,s,l,c){return this}insert(e,t,s){return new In(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;t(l.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Zw(this.data.getIterator())}getIteratorFrom(e){return new Zw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const l=t.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new _t(this.comparator);return t.data=e,t}}class Zw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wo(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new ns([])}unionWith(e){let t=new _t(Ft.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ns(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new lE("Invalid base64 string: "+c):c}})(e);return new Zt(t)}static fromUint8Array(e){const t=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(e);return new Zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const p6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ga(r){if(Ce(!!r,39018),typeof r=="string"){let e=0;const t=p6.exec(r);if(Ce(!!t,46558,{timestamp:r}),t[1]){let l=t[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:zt(r.seconds),nanos:zt(r.nanos)}}function zt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function pa(r){return typeof r=="string"?Zt.fromBase64String(r):Zt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="server_timestamp",cE="__type__",uE="__previous_value__",dE="__local_write_time__";function jx(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[cE])==null?void 0:s.stringValue)===oE}function xm(r){const e=r.mapValue.fields[uE];return jx(e)?xm(e):e}function ed(r){const e=ga(r.mapValue.fields[dE].timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e,t,s,l,c,d,f,g,x,w){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=x,this.isUsingEmulator=w}}const Lf="(default)";class _l{constructor(e,t){this.projectId=e,this.database=t||Lf}static empty(){return new _l("","")}get isDefaultDatabase(){return this.database===Lf}isEqual(e){return e instanceof _l&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="__type__",hE="__max__",hi={mapValue:{fields:{__type__:{stringValue:hE}}}},Ix="__vector__",$o="value",df={nullValue:"NULL_VALUE"};function _i(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?jx(r)?4:fE(r)?9007199254740991:ym(r)?10:11:Te(28295,{value:r})}function Or(r,e){if(r===e)return!0;const t=_i(r);if(t!==_i(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ed(r).isEqual(ed(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=ga(l.timestampValue),f=ga(c.timestampValue);return d.seconds===f.seconds&&d.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(l,c){return pa(l.bytesValue).isEqual(pa(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(l,c){return zt(l.geoPointValue.latitude)===zt(c.geoPointValue.latitude)&&zt(l.geoPointValue.longitude)===zt(c.geoPointValue.longitude)})(r,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return zt(l.integerValue)===zt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=zt(l.doubleValue),f=zt(c.doubleValue);return d===f?Yu(d)===Yu(f):isNaN(d)&&isNaN(f)}return!1})(r,e);case 9:return Uo(r.arrayValue.values||[],e.arrayValue.values||[],Or);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},f=c.mapValue.fields||{};if(Ww(d)!==Ww(f))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(f[g]===void 0||!Or(d[g],f[g])))return!1;return!0})(r,e);default:return Te(52216,{left:r})}}function td(r,e){return(r.values||[]).find((t=>Or(t,e)))!==void 0}function Ni(r,e){if(r===e)return 0;const t=_i(r),s=_i(e);if(t!==s)return ze(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const f=zt(c.integerValue||c.doubleValue),g=zt(d.integerValue||d.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return e_(r.timestampValue,e.timestampValue);case 4:return e_(ed(r),ed(e));case 5:return Ap(r.stringValue,e.stringValue);case 6:return(function(c,d){const f=pa(c),g=pa(d);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const f=c.split("/"),g=d.split("/");for(let x=0;x<f.length&&x<g.length;x++){const w=ze(f[x],g[x]);if(w!==0)return w}return ze(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const f=ze(zt(c.latitude),zt(d.latitude));return f!==0?f:ze(zt(c.longitude),zt(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return t_(r.arrayValue,e.arrayValue);case 10:return(function(c,d){var N,C,V,Z;const f=c.fields||{},g=d.fields||{},x=(N=f[$o])==null?void 0:N.arrayValue,w=(C=g[$o])==null?void 0:C.arrayValue,v=ze(((V=x==null?void 0:x.values)==null?void 0:V.length)||0,((Z=w==null?void 0:w.values)==null?void 0:Z.length)||0);return v!==0?v:t_(x,w)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===hi.mapValue&&d===hi.mapValue)return 0;if(c===hi.mapValue)return 1;if(d===hi.mapValue)return-1;const f=c.fields||{},g=Object.keys(f),x=d.fields||{},w=Object.keys(x);g.sort(),w.sort();for(let v=0;v<g.length&&v<w.length;++v){const N=Ap(g[v],w[v]);if(N!==0)return N;const C=Ni(f[g[v]],x[w[v]]);if(C!==0)return C}return ze(g.length,w.length)})(r.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function e_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ze(r,e);const t=ga(r),s=ga(e),l=ze(t.seconds,s.seconds);return l!==0?l:ze(t.nanos,s.nanos)}function t_(r,e){const t=r.values||[],s=e.values||[];for(let l=0;l<t.length&&l<s.length;++l){const c=Ni(t[l],s[l]);if(c)return c}return ze(t.length,s.length)}function Ko(r){return Mp(r)}function Mp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=ga(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return pa(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ne.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",l=!0;for(const c of t.values||[])l?l=!1:s+=",",s+=Mp(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${Mp(t.fields[d])}`;return l+"}"})(r.mapValue):Te(61005,{value:r})}function hf(r){switch(_i(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xm(r);return e?16+hf(e):16;case 5:return 2*r.stringValue.length;case 6:return pa(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+hf(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return Ii(s.fields,((c,d)=>{l+=c.length+hf(d)})),l})(r.mapValue);default:throw Te(13486,{value:r})}}function nd(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Op(r){return!!r&&"integerValue"in r}function sd(r){return!!r&&"arrayValue"in r}function n_(r){return!!r&&"nullValue"in r}function s_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ff(r){return!!r&&"mapValue"in r}function ym(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Ax])==null?void 0:s.stringValue)===Ix}function Vu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ii(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Vu(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vu(r.arrayValue.values[t]);return e}return{...r}}function fE(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===hE}const mE={mapValue:{fields:{[Ax]:{stringValue:Ix},[$o]:{arrayValue:{}}}}};function y6(r){return"nullValue"in r?df:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?nd(_l.empty(),Ne.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?ym(r)?mE:{mapValue:{}}:Te(35942,{value:r})}function b6(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?nd(_l.empty(),Ne.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?mE:"mapValue"in r?ym(r)?{mapValue:{}}:hi:Te(61959,{value:r})}function r_(r,e){const t=Ni(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function a_(r,e){const t=Ni(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ff(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vu(t)}setAll(e){let t=Ft.emptyPath(),s={},l=[];e.forEach(((d,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,l),s={},l=[],t=f.popLast()}d?s[f.lastSegment()]=Vu(d):l.push(f.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,s,l)}delete(e){const t=this.field(e.popLast());ff(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Or(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=t.mapValue.fields[e.get(s)];ff(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=l),t=l}return t.mapValue.fields}applyChanges(e,t,s){Ii(t,((l,c)=>e[l]=c));for(const l of s)delete e[l]}clone(){return new Vn(Vu(this.value))}}function gE(r){const e=[];return Ii(r.fields,((t,s)=>{const l=new Ft([t]);if(ff(s)){const c=gE(s.mapValue).fields;if(c.length===0)e.push(l);else for(const d of c)e.push(l.child(d))}else e.push(l)})),new ns(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,s,l,c,d,f){this.key=e,this.documentType=t,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=f}static newInvalidDocument(e){return new $t(e,0,De.min(),De.min(),De.min(),Vn.empty(),0)}static newFoundDocument(e,t,s,l){return new $t(e,1,t,De.min(),s,l,0)}static newNoDocument(e,t){return new $t(e,2,t,De.min(),De.min(),Vn.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,De.min(),De.min(),Vn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,t){this.position=e,this.inclusive=t}}function i_(r,e,t){let s=0;for(let l=0;l<r.position.length;l++){const c=e[l],d=r.position[l];if(c.field.isKeyField()?s=Ne.comparator(Ne.fromName(d.referenceValue),t.key):s=Ni(d,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function l_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Or(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t="asc"){this.field=e,this.dir=t}}function v6(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{}class tt extends pE{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new w6(e,t,s):t==="array-contains"?new E6(e,s):t==="in"?new _E(e,s):t==="not-in"?new T6(e,s):t==="array-contains-any"?new S6(e,s):new tt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new _6(e,s):new N6(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ni(t,this.value)):t!==null&&_i(this.value)===_i(t)&&this.matchesComparison(Ni(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wt extends pE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new wt(e,t)}matches(e){return Xo(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Xo(r){return r.op==="and"}function Vp(r){return r.op==="or"}function Cx(r){return xE(r)&&Xo(r)}function xE(r){for(const e of r.filters)if(e instanceof wt)return!1;return!0}function Pp(r){if(r instanceof tt)return r.field.canonicalString()+r.op.toString()+Ko(r.value);if(Cx(r))return r.filters.map((e=>Pp(e))).join(",");{const e=r.filters.map((t=>Pp(t))).join(",");return`${r.op}(${e})`}}function yE(r,e){return r instanceof tt?(function(s,l){return l instanceof tt&&s.op===l.op&&s.field.isEqual(l.field)&&Or(s.value,l.value)})(r,e):r instanceof wt?(function(s,l){return l instanceof wt&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,d,f)=>c&&yE(d,l.filters[f])),!0):!1})(r,e):void Te(19439)}function bE(r,e){const t=r.filters.concat(e);return wt.create(t,r.op)}function vE(r){return r instanceof tt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ko(t.value)}`})(r):r instanceof wt?(function(t){return t.op.toString()+" {"+t.getFilters().map(vE).join(" ,")+"}"})(r):"Filter"}class w6 extends tt{constructor(e,t,s){super(e,t,s),this.key=Ne.fromName(s.referenceValue)}matches(e){const t=Ne.comparator(e.key,this.key);return this.matchesComparison(t)}}class _6 extends tt{constructor(e,t){super(e,"in",t),this.keys=wE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class N6 extends tt{constructor(e,t){super(e,"not-in",t),this.keys=wE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function wE(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Ne.fromName(s.referenceValue)))}class E6 extends tt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sd(t)&&td(t.arrayValue,this.value)}}class _E extends tt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&td(this.value.arrayValue,t)}}class T6 extends tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(td(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!td(this.value.arrayValue,t)}}class S6 extends tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>td(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,t=null,s=[],l=[],c=null,d=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=f,this.Te=null}}function Lp(r,e=null,t=[],s=[],l=null,c=null,d=null){return new j6(r,e,t,s,l,c,d)}function Nl(r){const e=je(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Pp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),fm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Ko(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Ko(s))).join(",")),e.Te=t}return e.Te}function md(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!v6(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!yE(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!l_(r.startAt,e.startAt)&&l_(r.endAt,e.endAt)}function zf(r){return Ne.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Uf(r,e){return r.filters.filter((t=>t instanceof tt&&t.field.isEqual(e)))}function o_(r,e,t){let s=df,l=!0;for(const c of Uf(r,e)){let d=df,f=!0;switch(c.op){case"<":case"<=":d=y6(c.value);break;case"==":case"in":case">=":d=c.value;break;case">":d=c.value,f=!1;break;case"!=":case"not-in":d=df}r_({value:s,inclusive:l},{value:d,inclusive:f})<0&&(s=d,l=f)}if(t!==null){for(let c=0;c<r.orderBy.length;++c)if(r.orderBy[c].field.isEqual(e)){const d=t.position[c];r_({value:s,inclusive:l},{value:d,inclusive:t.inclusive})<0&&(s=d,l=t.inclusive);break}}return{value:s,inclusive:l}}function c_(r,e,t){let s=hi,l=!0;for(const c of Uf(r,e)){let d=hi,f=!0;switch(c.op){case">=":case">":d=b6(c.value),f=!1;break;case"==":case"in":case"<=":d=c.value;break;case"<":d=c.value,f=!1;break;case"!=":case"not-in":d=hi}a_({value:s,inclusive:l},{value:d,inclusive:f})>0&&(s=d,l=f)}if(t!==null){for(let c=0;c<r.orderBy.length;++c)if(r.orderBy[c].field.isEqual(e)){const d=t.position[c];a_({value:s,inclusive:l},{value:d,inclusive:t.inclusive})>0&&(s=d,l=t.inclusive);break}}return{value:s,inclusive:l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t=null,s=[],l=[],c=null,d="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function NE(r,e,t,s,l,c,d,f){return new dc(r,e,t,s,l,c,d,f)}function gd(r){return new dc(r)}function u_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function EE(r){return r.collectionGroup!==null}function Pu(r){const e=je(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let f=new _t(Ft.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((x=>{x.isInequality()&&(f=f.add(x.field))}))})),f})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new rd(c,s))})),t.has(Ft.keyField().canonicalString())||e.Ie.push(new rd(Ft.keyField(),s))}return e.Ie}function ys(r){const e=je(r);return e.Ee||(e.Ee=A6(e,Pu(r))),e.Ee}function A6(r,e){if(r.limitType==="F")return Lp(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new rd(l.field,c)}));const t=r.endAt?new Qo(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Qo(r.startAt.position,r.startAt.inclusive):null;return Lp(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function zp(r,e){const t=r.filters.concat([e]);return new dc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Bf(r,e,t){return new dc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function bm(r,e){return md(ys(r),ys(e))&&r.limitType===e.limitType}function TE(r){return`${Nl(ys(r))}|lt:${r.limitType}`}function jo(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((l=>vE(l))).join(", ")}]`),fm(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((l=>Ko(l))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((l=>Ko(l))).join(",")),`Target(${s})`})(ys(r))}; limitType=${r.limitType})`}function pd(r,e){return e.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ne.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,l){for(const c of Pu(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,e)&&(function(s,l){return!(s.startAt&&!(function(d,f,g){const x=i_(d,f,g);return d.inclusive?x<=0:x<0})(s.startAt,Pu(s),l)||s.endAt&&!(function(d,f,g){const x=i_(d,f,g);return d.inclusive?x>=0:x>0})(s.endAt,Pu(s),l))})(r,e)}function SE(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function jE(r){return(e,t)=>{let s=!1;for(const l of Pu(r)){const c=I6(l,e,t);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function I6(r,e,t){const s=r.field.isKeyField()?Ne.comparator(e.key,t.key):(function(c,d,f){const g=d.data.field(c),x=f.data.field(c);return g!==null&&x!==null?Ni(g,x):Te(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Te(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,t]);l.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[t]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Ii(this.inner,((t,s)=>{for(const[l,c]of s)e(l,c)}))}isEmpty(){return iE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6=new Ct(Ne.comparator);function xs(){return C6}const AE=new Ct(Ne.comparator);function Su(...r){let e=AE;for(const t of r)e=e.insert(t.key,t);return e}function IE(r){let e=AE;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Ir(){return Lu()}function CE(){return Lu()}function Lu(){return new ba((r=>r.toString()),((r,e)=>r.isEqual(e)))}const R6=new Ct(Ne.comparator),k6=new _t(Ne.comparator);function $e(...r){let e=k6;for(const t of r)e=e.add(t);return e}const D6=new _t(ze);function Rx(){return D6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yu(e)?"-0":e}}function RE(r){return{integerValue:""+r}}function kE(r,e){return XN(e)?RE(e):kx(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(){this._=void 0}}function M6(r,e,t){return r instanceof Yo?(function(l,c){const d={fields:{[cE]:{stringValue:oE},[dE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&jx(c)&&(c=xm(c)),c&&(d.fields[uE]=c),{mapValue:d}})(t,e):r instanceof Jo?ME(r,e):r instanceof Wo?OE(r,e):(function(l,c){const d=DE(l,c),f=d_(d)+d_(l.Ae);return Op(d)&&Op(l.Ae)?RE(f):kx(l.serializer,f)})(r,e)}function O6(r,e,t){return r instanceof Jo?ME(r,e):r instanceof Wo?OE(r,e):t}function DE(r,e){return r instanceof Zo?(function(s){return Op(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Yo extends vm{}class Jo extends vm{constructor(e){super(),this.elements=e}}function ME(r,e){const t=VE(e);for(const s of r.elements)t.some((l=>Or(l,s)))||t.push(s);return{arrayValue:{values:t}}}class Wo extends vm{constructor(e){super(),this.elements=e}}function OE(r,e){let t=VE(e);for(const s of r.elements)t=t.filter((l=>!Or(l,s)));return{arrayValue:{values:t}}}class Zo extends vm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function d_(r){return zt(r.integerValue||r.doubleValue)}function VE(r){return sd(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,t){this.field=e,this.transform=t}}function V6(r,e){return r.field.isEqual(e.field)&&(function(s,l){return s instanceof Jo&&l instanceof Jo||s instanceof Wo&&l instanceof Wo?Uo(s.elements,l.elements,Or):s instanceof Zo&&l instanceof Zo?Or(s.Ae,l.Ae):s instanceof Yo&&l instanceof Yo})(r.transform,e.transform)}class P6{constructor(e,t){this.version=e,this.transformResults=t}}class Pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class wm{}function PE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new _m(r.key,Pn.none()):new hc(r.key,r.data,Pn.none());{const t=r.data,s=Vn.empty();let l=new _t(Ft.comparator);for(let c of e.fields)if(!l.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new va(r.key,s,new ns(l.toArray()),Pn.none())}}function L6(r,e,t){r instanceof hc?(function(l,c,d){const f=l.value.clone(),g=f_(l.fieldTransforms,c,d.transformResults);f.setAll(g),c.convertToFoundDocument(d.version,f).setHasCommittedMutations()})(r,e,t):r instanceof va?(function(l,c,d){if(!mf(l.precondition,c))return void c.convertToUnknownDocument(d.version);const f=f_(l.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(LE(l)),g.setAll(f),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,t):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function zu(r,e,t,s){return r instanceof hc?(function(c,d,f,g){if(!mf(c.precondition,d))return f;const x=c.value.clone(),w=m_(c.fieldTransforms,g,d);return x.setAll(w),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),null})(r,e,t,s):r instanceof va?(function(c,d,f,g){if(!mf(c.precondition,d))return f;const x=m_(c.fieldTransforms,g,d),w=d.data;return w.setAll(LE(c)),w.setAll(x),d.convertToFoundDocument(d.version,w).setHasLocalMutations(),f===null?null:f.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((v=>v.field)))})(r,e,t,s):(function(c,d,f){return mf(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):f})(r,e,t)}function z6(r,e){let t=null;for(const s of r.fieldTransforms){const l=e.data.field(s.field),c=DE(s.transform,l||null);c!=null&&(t===null&&(t=Vn.empty()),t.set(s.field,c))}return t||null}function h_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Uo(s,l,((c,d)=>V6(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class hc extends wm{constructor(e,t,s,l=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class va extends wm{constructor(e,t,s,l,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function LE(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function f_(r,e,t){const s=new Map;Ce(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let l=0;l<t.length;l++){const c=r[l],d=c.transform,f=e.data.field(c.field);s.set(c.field,O6(d,f,t[l]))}return s}function m_(r,e,t){const s=new Map;for(const l of r){const c=l.transform,d=t.data.field(l.field);s.set(l.field,M6(c,d,e))}return s}class _m extends wm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zE extends wm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,t,s,l){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&L6(c,e,s[l])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=zu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=zu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=CE();return this.mutations.forEach((l=>{const c=e.get(l.key),d=c.overlayedDocument;let f=this.applyToLocalView(d,c.mutatedFields);f=t.has(l.key)?null:f;const g=PE(d,f);g!==null&&s.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(De.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),$e())}isEqual(e){return this.batchId===e.batchId&&Uo(this.mutations,e.mutations,((t,s)=>h_(t,s)))&&Uo(this.baseMutations,e.baseMutations,((t,s)=>h_(t,s)))}}class Ox{constructor(e,t,s,l){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=l}static from(e,t,s){Ce(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let l=(function(){return R6})();const c=e.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new Ox(e,t,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var on,rt;function B6(r){switch(r){case te.OK:return Te(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Te(15467,{code:r})}}function UE(r){if(r===void 0)return Wt("GRPC error has no .code"),te.UNKNOWN;switch(r){case on.OK:return te.OK;case on.CANCELLED:return te.CANCELLED;case on.UNKNOWN:return te.UNKNOWN;case on.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case on.INTERNAL:return te.INTERNAL;case on.UNAVAILABLE:return te.UNAVAILABLE;case on.UNAUTHENTICATED:return te.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case on.NOT_FOUND:return te.NOT_FOUND;case on.ALREADY_EXISTS:return te.ALREADY_EXISTS;case on.PERMISSION_DENIED:return te.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case on.ABORTED:return te.ABORTED;case on.OUT_OF_RANGE:return te.OUT_OF_RANGE;case on.UNIMPLEMENTED:return te.UNIMPLEMENTED;case on.DATA_LOSS:return te.DATA_LOSS;default:return Te(39323,{code:r})}}(rt=on||(on={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6=new pi([4294967295,4294967295],0);function g_(r){const e=q6().encode(r),t=new MN;return t.update(e),new Uint8Array(t.digest())}function p_(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new pi([t,s],0),new pi([l,c],0)]}class Px{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new ju(`Invalid padding: ${t}`);if(s<0)throw new ju(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ju(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new ju(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=pi.fromNumber(this.ge)}ye(e,t,s){let l=e.add(t.multiply(pi.fromNumber(s)));return l.compare(F6)===1&&(l=new pi([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=g_(e),[s,l]=p_(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);if(!this.we(d))return!1}return!0}static create(e,t,s){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Px(c,l,t);return s.forEach((f=>d.insert(f))),d}insert(e){if(this.ge===0)return;const t=g_(e),[s,l]=p_(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);this.Se(d)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class ju extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t,s,l,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const l=new Map;return l.set(e,yd.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new xd(De.min(),l,new Ct(ze),xs(),$e())}}class yd{constructor(e,t,s,l,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new yd(s,t,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,t,s,l){this.be=e,this.removedTargetIds=t,this.key=s,this.De=l}}class BE{constructor(e,t){this.targetId=e,this.Ce=t}}class qE{constructor(e,t,s=Zt.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=l}}class x_{constructor(){this.ve=0,this.Fe=y_(),this.Me=Zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=$e(),t=$e(),s=$e();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:t=t.add(l);break;case 1:s=s.add(l);break;default:Te(38017,{changeType:c})}})),new yd(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=y_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class H6{constructor(e){this.Ge=e,this.ze=new Map,this.je=xs(),this.Je=Jh(),this.He=Jh(),this.Ye=new Ct(ze)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,l)=>{this.rt(l)&&t(l)}))}st(e){const t=e.targetId,s=e.Ce.count,l=this.ot(t);if(l){const c=l.target;if(zf(c))if(s===0){const d=new Ne(c.path);this.et(t,d,$t.newNoDocument(d,De.min()))}else Ce(s===1,20013,{expectedCount:s});else{const d=this._t(t);if(d!==s){const f=this.ut(e),g=f?this.ct(f,e,d):1;if(g!==0){this.it(t);const x=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,x)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=t;let d,f;try{d=pa(s).toUint8Array()}catch(g){if(g instanceof lE)return Qu("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Px(d,l,c)}catch(g){return Qu(g instanceof ju?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let l=0;return s.forEach((c=>{const d=this.Ge.ht(),f=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(f)||(this.et(t,c,null),l++)})),l}Tt(e){const t=new Map;this.ze.forEach(((c,d)=>{const f=this.ot(d);if(f){if(c.current&&zf(f.target)){const g=new Ne(f.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,$t.newNoDocument(g,e))}c.Be&&(t.set(d,c.ke()),c.qe())}}));let s=$e();this.He.forEach(((c,d)=>{let f=!0;d.forEachWhile((g=>{const x=this.ot(g);return!x||x.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const l=new xd(e,t,this.Ye,this.je,s);return this.je=xs(),this.Je=Jh(),this.He=Jh(),this.Ye=new Ct(ze),l}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,t)?l.Qe(t,1):l.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new x_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new _t(ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new _t(ze),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new x_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Jh(){return new Ct(Ne.comparator)}function y_(){return new Ct(Ne.comparator)}const G6={asc:"ASCENDING",desc:"DESCENDING"},$6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},K6={and:"AND",or:"OR"};class Q6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Up(r,e){return r.useProto3Json||fm(e)?e:{value:e}}function ec(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function X6(r,e){return ec(r,e.toTimestamp())}function Fn(r){return Ce(!!r,49232),De.fromTimestamp((function(t){const s=ga(t);return new vt(s.seconds,s.nanos)})(r))}function Lx(r,e){return Bp(r,e).canonicalString()}function Bp(r,e){const t=(function(l){return new mt(["projects",l.projectId,"databases",l.database])})(r).child("documents");return e===void 0?t:t.child(e)}function HE(r){const e=mt.fromString(r);return Ce(ZE(e),10190,{key:e.toString()}),e}function qf(r,e){return Lx(r.databaseId,e.path)}function gl(r,e){const t=HE(e);if(t.get(1)!==r.databaseId.projectId)throw new xe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new xe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ne(KE(t))}function GE(r,e){return Lx(r.databaseId,e)}function $E(r){const e=HE(r);return e.length===4?mt.emptyPath():KE(e)}function qp(r){return new mt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function KE(r){return Ce(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function b_(r,e,t){return{name:qf(r,e),fields:t.value.mapValue.fields}}function Y6(r,e,t){const s=gl(r,e.name),l=Fn(e.updateTime),c=e.createTime?Fn(e.createTime):De.min(),d=new Vn({mapValue:{fields:e.fields}}),f=$t.newFoundDocument(s,l,c,d);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function J6(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:Te(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(x,w){return x.useProto3Json?(Ce(w===void 0||typeof w=="string",58123),Zt.fromBase64String(w||"")):(Ce(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Zt.fromUint8Array(w||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,f=d&&(function(x){const w=x.code===void 0?te.UNKNOWN:UE(x.code);return new xe(w,x.message||"")})(d);t=new qE(s,l,c,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=gl(r,s.document.name),c=Fn(s.document.updateTime),d=s.document.createTime?Fn(s.document.createTime):De.min(),f=new Vn({mapValue:{fields:s.document.fields}}),g=$t.newFoundDocument(l,c,d,f),x=s.targetIds||[],w=s.removedTargetIds||[];t=new gf(x,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=gl(r,s.document),c=s.readTime?Fn(s.readTime):De.min(),d=$t.newNoDocument(l,c),f=s.removedTargetIds||[];t=new gf([],f,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=gl(r,s.document),c=s.removedTargetIds||[];t=new gf([],c,l,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new U6(l,c),f=s.targetId;t=new BE(f,d)}}return t}function Ff(r,e){let t;if(e instanceof hc)t={update:b_(r,e.key,e.value)};else if(e instanceof _m)t={delete:qf(r,e.key)};else if(e instanceof va)t={update:b_(r,e.key,e.data),updateMask:sk(e.fieldMask)};else{if(!(e instanceof zE))return Te(16599,{Vt:e.type});t={verify:qf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const f=d.transform;if(f instanceof Yo)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Jo)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Wo)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Zo)return{fieldPath:d.field.canonicalString(),increment:f.Ae};throw Te(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:X6(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Te(27497)})(r,e.precondition)),t}function Fp(r,e){const t=e.currentDocument?(function(c){return c.updateTime!==void 0?Pn.updateTime(Fn(c.updateTime)):c.exists!==void 0?Pn.exists(c.exists):Pn.none()})(e.currentDocument):Pn.none(),s=e.updateTransforms?e.updateTransforms.map((l=>(function(d,f){let g=null;if("setToServerValue"in f)Ce(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),g=new Yo;else if("appendMissingElements"in f){const w=f.appendMissingElements.values||[];g=new Jo(w)}else if("removeAllFromArray"in f){const w=f.removeAllFromArray.values||[];g=new Wo(w)}else"increment"in f?g=new Zo(d,f.increment):Te(16584,{proto:f});const x=Ft.fromServerFormat(f.fieldPath);return new Dx(x,g)})(r,l))):[];if(e.update){e.update.name;const l=gl(r,e.update.name),c=new Vn({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=(function(g){const x=g.fieldPaths||[];return new ns(x.map((w=>Ft.fromServerFormat(w))))})(e.updateMask);return new va(l,c,d,t,s)}return new hc(l,c,t,s)}if(e.delete){const l=gl(r,e.delete);return new _m(l,t)}if(e.verify){const l=gl(r,e.verify);return new zE(l,t)}return Te(1463,{proto:e})}function W6(r,e){return r&&r.length>0?(Ce(e!==void 0,14353),r.map((t=>(function(l,c){let d=l.updateTime?Fn(l.updateTime):Fn(c);return d.isEqual(De.min())&&(d=Fn(c)),new P6(d,l.transformResults||[])})(t,e)))):[]}function QE(r,e){return{documents:[GE(r,e.path)]}}function XE(r,e){const t={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=GE(r,l);const c=(function(x){if(x.length!==0)return WE(wt.create(x,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const d=(function(x){if(x.length!==0)return x.map((w=>(function(N){return{field:Ao(N.field),direction:ek(N.dir)}})(w)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const f=Up(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:t,parent:l}}function YE(r){let e=$E(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let l=null;if(s>0){Ce(s===1,65062);const w=t.from[0];w.allDescendants?l=w.collectionId:e=e.child(w.collectionId)}let c=[];t.where&&(c=(function(v){const N=JE(v);return N instanceof wt&&Cx(N)?N.getFilters():[N]})(t.where));let d=[];t.orderBy&&(d=(function(v){return v.map((N=>(function(V){return new rd(Io(V.field),(function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(N)))})(t.orderBy));let f=null;t.limit&&(f=(function(v){let N;return N=typeof v=="object"?v.value:v,fm(N)?null:N})(t.limit));let g=null;t.startAt&&(g=(function(v){const N=!!v.before,C=v.values||[];return new Qo(C,N)})(t.startAt));let x=null;return t.endAt&&(x=(function(v){const N=!v.before,C=v.values||[];return new Qo(C,N)})(t.endAt)),NE(e,l,d,c,f,"F",g,x)}function Z6(r,e){const t=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:l})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function JE(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Io(t.unaryFilter.field);return tt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Io(t.unaryFilter.field);return tt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Io(t.unaryFilter.field);return tt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Io(t.unaryFilter.field);return tt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(r):r.fieldFilter!==void 0?(function(t){return tt.create(Io(t.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return wt.create(t.compositeFilter.filters.map((s=>JE(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(r):Te(30097,{filter:r})}function ek(r){return G6[r]}function tk(r){return $6[r]}function nk(r){return K6[r]}function Ao(r){return{fieldPath:r.canonicalString()}}function Io(r){return Ft.fromServerFormat(r.fieldPath)}function WE(r){return r instanceof tt?(function(t){if(t.op==="=="){if(s_(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NAN"}};if(n_(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(s_(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NOT_NAN"}};if(n_(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ao(t.field),op:tk(t.op),value:t.value}}})(r):r instanceof wt?(function(t){const s=t.getFilters().map((l=>WE(l)));return s.length===1?s[0]:{compositeFilter:{op:nk(t.op),filters:s}}})(r):Te(54877,{filter:r})}function sk(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function ZE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,t,s,l,c=De.min(),d=De.min(),f=Zt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new la(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e){this.yt=e}}function rk(r,e){let t;if(e.document)t=Y6(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Ne.fromSegments(e.noDocument.path),l=Tl(e.noDocument.readTime);t=$t.newNoDocument(s,l),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Te(56709);{const s=Ne.fromSegments(e.unknownDocument.path),l=Tl(e.unknownDocument.version);t=$t.newUnknownDocument(s,l)}}return e.readTime&&t.setReadTime((function(l){const c=new vt(l[0],l[1]);return De.fromTimestamp(c)})(e.readTime)),t}function v_(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Hf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document=(function(c,d){return{name:qf(c,d.key),fields:d.data.value.mapValue.fields,updateTime:ec(c,d.version.toTimestamp()),createTime:ec(c,d.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:El(e.version)};else{if(!e.isUnknownDocument())return Te(57904,{document:e});s.unknownDocument={path:t.path.toArray(),version:El(e.version)}}return s}function Hf(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function El(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Tl(r){const e=new vt(r.seconds,r.nanoseconds);return De.fromTimestamp(e)}function ol(r,e){const t=(e.baseMutations||[]).map((c=>Fp(r.yt,c)));for(let c=0;c<e.mutations.length-1;++c){const d=e.mutations[c];if(c+1<e.mutations.length&&e.mutations[c+1].transform!==void 0){const f=e.mutations[c+1];d.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(c+1,1),++c}}const s=e.mutations.map((c=>Fp(r.yt,c))),l=vt.fromMillis(e.localWriteTimeMs);return new Mx(e.batchId,l,t,s)}function Au(r){const e=Tl(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Tl(r.lastLimboFreeSnapshotVersion):De.min();let s;return s=(function(c){return c.documents!==void 0})(r.query)?(function(c){const d=c.documents.length;return Ce(d===1,1966,{count:d}),ys(gd($E(c.documents[0])))})(r.query):(function(c){return ys(YE(c))})(r.query),new la(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Zt.fromBase64String(r.resumeToken))}function tT(r,e){const t=El(e.snapshotVersion),s=El(e.lastLimboFreeSnapshotVersion);let l;l=zf(e.target)?QE(r.yt,e.target):XE(r.yt,e.target).ft;const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Nl(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:l}}function nT(r){const e=YE({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Bf(e,e.limit,"L"):e}function Xg(r,e){return new Vx(e.largestBatchId,Fp(r.yt,e.overlayMutation))}function w_(r,e){const t=e.path.lastSegment();return[r,Ln(e.path.popLast()),t]}function __(r,e,t,s){return{indexId:r,uid:e,sequenceNumber:t,readTime:El(s.readTime),documentKey:Ln(s.documentKey.path),largestBatchId:s.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{getBundleMetadata(e,t){return N_(e).get(t).next((s=>{if(s)return(function(c){return{id:c.bundleId,createTime:Tl(c.createTime),version:c.version}})(s)}))}saveBundleMetadata(e,t){return N_(e).put((function(l){return{bundleId:l.id,createTime:El(Fn(l.createTime)),version:l.version}})(t))}getNamedQuery(e,t){return E_(e).get(t).next((s=>{if(s)return(function(c){return{name:c.name,query:nT(c.bundledQuery),readTime:Tl(c.readTime)}})(s)}))}saveNamedQuery(e,t){return E_(e).put((function(l){return{name:l.name,readTime:El(Fn(l.readTime)),bundledQuery:l.bundledQuery}})(t))}}function N_(r){return fn(r,mm)}function E_(r){return fn(r,gm)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const s=t.uid||"";return new Nm(e,s)}getOverlay(e,t){return xu(e).get(w_(this.userId,t)).next((s=>s?Xg(this.serializer,s):null))}getOverlays(e,t){const s=Ir();return H.forEach(t,(l=>this.getOverlay(e,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(e,t,s){const l=[];return s.forEach(((c,d)=>{const f=new Vx(t,d);l.push(this.St(e,f))})),H.waitFor(l)}removeOverlaysForBatchId(e,t,s){const l=new Set;t.forEach((d=>l.add(Ln(d.getCollectionPath()))));const c=[];return l.forEach((d=>{const f=IDBKeyRange.bound([this.userId,d,s],[this.userId,d,s+1],!1,!0);c.push(xu(e).Z(kp,f))})),H.waitFor(c)}getOverlaysForCollection(e,t,s){const l=Ir(),c=Ln(t),d=IDBKeyRange.bound([this.userId,c,s],[this.userId,c,Number.POSITIVE_INFINITY],!0);return xu(e).J(kp,d).next((f=>{for(const g of f){const x=Xg(this.serializer,g);l.set(x.getKey(),x)}return l}))}getOverlaysForCollectionGroup(e,t,s,l){const c=Ir();let d;const f=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return xu(e).ee({index:tE,range:f},((g,x,w)=>{const v=Xg(this.serializer,x);c.size()<l||v.largestBatchId===d?(c.set(v.getKey(),v),d=v.largestBatchId):w.done()})).next((()=>c))}St(e,t){return xu(e).put((function(l,c,d){const[f,g,x]=w_(c,d.mutation.key);return{userId:c,collectionPath:g,documentId:x,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:Ff(l.yt,d.mutation)}})(this.serializer,this.userId,t))}}function xu(r){return fn(r,pm)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{bt(e){return fn(e,Tx)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const s=t==null?void 0:t.value;return s?Zt.fromUint8Array(s):Zt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(zt(e.integerValue));else if("doubleValue"in e){const s=zt(e.doubleValue);isNaN(s)?this.Ft(t,13):(this.Ft(t,15),Yu(s)?t.Mt(0):t.Mt(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Ft(t,20),typeof s=="string"&&(s=ga(s)),t.xt(`${s.seconds||""}`),t.Mt(s.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(pa(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.Ft(t,45),t.Mt(s.latitude||0),t.Mt(s.longitude||0)}else"mapValue"in e?fE(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):ym(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Te(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const s=e.fields||{};this.Ft(t,55);for(const l of Object.keys(s))this.Ot(l,t),this.Ct(s[l],t)}kt(e,t){var d,f;const s=e.fields||{};this.Ft(t,53);const l=$o,c=((f=(d=s[l].arrayValue)==null?void 0:d.values)==null?void 0:f.length)||0;this.Ft(t,15),t.Mt(zt(c)),this.Ot(l,t),this.Ct(s[l],t)}Qt(e,t){const s=e.values||[];this.Ft(t,50);for(const l of s)this.Ct(l,t)}Lt(e,t){this.Ft(t,37),Ne.fromName(e).path.forEach((s=>{this.Ft(t,60),this.Ut(s,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}cl.Kt=new cl;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=255;function lk(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function T_(r){const e=64-(function(s){let l=0;for(let c=0;c<8;++c){const d=lk(255&s[c]);if(l+=d,d!==8)break}return l})(r);return Math.ceil(e/8)}class ok{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Gt(s.value),s=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Jt(s.value),s=t.next();this.Ht()}Yt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Gt(s);else if(s<2048)this.Gt(960|s>>>6),this.Gt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s);else{const l=t.codePointAt(0);this.Gt(240|l>>>18),this.Gt(128|63&l>>>12),this.Gt(128|63&l>>>6),this.Gt(128|63&l)}}this.zt()}Zt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Jt(s);else if(s<2048)this.Jt(960|s>>>6),this.Jt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s);else{const l=t.codePointAt(0);this.Jt(240|l>>>18),this.Jt(128|63&l>>>12),this.Jt(128|63&l>>>6),this.Jt(128|63&l)}}this.Ht()}Xt(e){const t=this.en(e),s=T_(t);this.tn(1+s),this.buffer[this.position++]=255&s;for(let l=t.length-s;l<t.length;++l)this.buffer[this.position++]=255&t[l]}nn(e){const t=this.en(e),s=T_(t);this.tn(1+s),this.buffer[this.position++]=~(255&s);for(let l=t.length-s;l<t.length;++l)this.buffer[this.position++]=~(255&t[l])}rn(){this.sn(_o),this.sn(255)}_n(){this.an(_o),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(c){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,c,!1),new Uint8Array(d.buffer)})(e),s=!!(128&t[0]);t[0]^=s?255:128;for(let l=1;l<t.length;++l)t[l]^=s?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===_o?(this.sn(_o),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===_o?(this.an(_o),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const l=new Uint8Array(s);l.set(this.buffer),this.buffer=l}}class ck{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class uk{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class yu{constructor(){this.cn=new ok,this.ln=new ck(this.cn),this.hn=new uk(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,t,s,l){this.Tn=e,this.In=t,this.En=s,this.dn=l}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,s=new Uint8Array(t);return s.set(this.dn,0),t!==e?s.set([0],this.dn.length):++s[s.length-1],new ul(this.Tn,this.In,this.En,s)}Rn(e,t,s){return{indexId:this.Tn,uid:e,arrayValue:pf(this.En),directionalValue:pf(this.dn),orderedDocumentKey:pf(t),documentKey:s.path.toArray()}}Vn(e,t,s){const l=this.Rn(e,t,s);return[l.indexId,l.uid,l.arrayValue,l.directionalValue,l.orderedDocumentKey,l.documentKey]}}function si(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=S_(r.En,e.En),t!==0?t:(t=S_(r.dn,e.dn),t!==0?t:Ne.comparator(r.In,e.In)))}function S_(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(s!==0)return s}return r.length-e.length}function pf(r){return G2()?(function(t){let s="";for(let l=0;l<t.length;l++)s+=String.fromCharCode(t[l]);return s})(r):r}function j_(r){return typeof r!="string"?r:(function(t){const s=new Uint8Array(t.length);for(let l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s})(r)}class A_{constructor(e){this.mn=new _t(((t,s)=>Ft.comparator(t.field,s.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const s=t;s.isInequality()?this.mn=this.mn.add(s):this.gn.push(s)}}get pn(){return this.mn.size>1}yn(e){if(Ce(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Ip(e);if(t!==void 0&&!this.wn(t))return!1;const s=al(e);let l=new Set,c=0,d=0;for(;c<s.length&&this.wn(s[c]);++c)l=l.add(s[c].fieldPath.canonicalString());if(c===s.length)return!0;if(this.mn.size>0){const f=this.mn.getIterator().getNext();if(!l.has(f.field.canonicalString())){const g=s[c];if(!this.Sn(f,g)||!this.bn(this.fn[d++],g))return!1}++c}for(;c<s.length;++c){const f=s[c];if(d>=this.fn.length||!this.bn(this.fn[d++],f))return!1}return!0}Dn(){if(this.pn)return null;let e=new _t(Ft.comparator);const t=[];for(const s of this.gn)if(!s.field.isKeyField())if(s.op==="array-contains"||s.op==="array-contains-any")t.push(new of(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),t.push(new of(s.field,0))}for(const s of this.fn)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),t.push(new of(s.field,s.dir==="asc"?0:1)));return new Mf(Mf.UNKNOWN_ID,this.collectionId,t,Xu.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const s=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===s}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(r){var t,s;if(Ce(r instanceof tt||r instanceof wt,20012),r instanceof tt){if(r instanceof _E){const l=((s=(t=r.value.arrayValue)==null?void 0:t.values)==null?void 0:s.map((c=>tt.create(r.field,"==",c))))||[];return wt.create(l,"or")}return r}const e=r.filters.map((l=>sT(l)));return wt.create(e,r.op)}function dk(r){if(r.getFilters().length===0)return[];const e=$p(sT(r));return Ce(rT(e),7391),Hp(e)||Gp(e)?[e]:e.getFilters()}function Hp(r){return r instanceof tt}function Gp(r){return r instanceof wt&&Cx(r)}function rT(r){return Hp(r)||Gp(r)||(function(t){if(t instanceof wt&&Vp(t)){for(const s of t.getFilters())if(!Hp(s)&&!Gp(s))return!1;return!0}return!1})(r)}function $p(r){if(Ce(r instanceof tt||r instanceof wt,34018),r instanceof tt)return r;if(r.filters.length===1)return $p(r.filters[0]);const e=r.filters.map((s=>$p(s)));let t=wt.create(e,r.op);return t=Gf(t),rT(t)?t:(Ce(t instanceof wt,64498),Ce(Xo(t),40251),Ce(t.filters.length>1,57927),t.filters.reduce(((s,l)=>zx(s,l))))}function zx(r,e){let t;return Ce(r instanceof tt||r instanceof wt,38388),Ce(e instanceof tt||e instanceof wt,25473),t=r instanceof tt?e instanceof tt?(function(l,c){return wt.create([l,c],"and")})(r,e):I_(r,e):e instanceof tt?I_(e,r):(function(l,c){if(Ce(l.filters.length>0&&c.filters.length>0,48005),Xo(l)&&Xo(c))return bE(l,c.getFilters());const d=Vp(l)?l:c,f=Vp(l)?c:l,g=d.filters.map((x=>zx(x,f)));return wt.create(g,"or")})(r,e),Gf(t)}function I_(r,e){if(Xo(e))return bE(e,r.getFilters());{const t=e.filters.map((s=>zx(r,s)));return wt.create(t,"or")}}function Gf(r){if(Ce(r instanceof tt||r instanceof wt,11850),r instanceof tt)return r;const e=r.getFilters();if(e.length===1)return Gf(e[0]);if(xE(r))return r;const t=e.map((l=>Gf(l))),s=[];return t.forEach((l=>{l instanceof tt?s.push(l):l instanceof wt&&(l.op===r.op?s.push(...l.filters):s.push(l))})),s.length===1?s[0]:wt.create(s,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(){this.Cn=new Ux}addToCollectionParentIndex(e,t){return this.Cn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(vs.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(vs.min())}updateCollectionGroup(e,t,s){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}}class Ux{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),l=this.index[t]||new _t(mt.comparator),c=!l.has(s);return this.index[t]=l.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),l=this.index[t];return l&&l.has(s)}getEntries(e){return(this.index[e]||new _t(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="IndexedDbIndexManager",Wh=new Uint8Array(0);class fk{constructor(e,t){this.databaseId=t,this.vn=new Ux,this.Fn=new ba((s=>Nl(s)),((s,l)=>md(s,l))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const s=t.lastSegment(),l=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const c={collectionId:s,parent:Ln(l)};return R_(e).put(c)}return H.resolve()}getCollectionParents(e,t){const s=[],l=IDBKeyRange.bound([t,""],[BN(t),""],!1,!0);return R_(e).J(l).next((c=>{for(const d of c){if(d.collectionId!==t)break;s.push(Ar(d.parent))}return s}))}addFieldIndex(e,t){const s=bu(e),l=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(t);delete l.indexId;const c=s.add(l);if(t.indexState){const d=Eo(e);return c.next((f=>{d.put(__(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return c.next()}deleteFieldIndex(e,t){const s=bu(e),l=Eo(e),c=No(e);return s.delete(t.indexId).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=bu(e),s=No(e),l=Eo(e);return t.Z().next((()=>s.Z())).next((()=>l.Z()))}createTargetIndexes(e,t){return H.forEach(this.Mn(t),(s=>this.getIndexType(e,s).next((l=>{if(l===0||l===1){const c=new A_(s).Dn();if(c!=null)return this.addFieldIndex(e,c)}}))))}getDocumentsMatchingTarget(e,t){const s=No(e);let l=!0;const c=new Map;return H.forEach(this.Mn(t),(d=>this.xn(e,d).next((f=>{l&&(l=!!f),c.set(d,f)})))).next((()=>{if(l){let d=$e();const f=[];return H.forEach(c,((g,x)=>{fe(C_,`Using index ${(function(ue){return`id=${ue.indexId}|cg=${ue.collectionGroup}|f=${ue.fields.map((ve=>`${ve.fieldPath}:${ve.kind}`)).join(",")}`})(g)} to execute ${Nl(t)}`);const w=(function(ue,ve){const ge=Ip(ve);if(ge===void 0)return null;for(const F of Uf(ue,ge.fieldPath))switch(F.op){case"array-contains-any":return F.value.arrayValue.values||[];case"array-contains":return[F.value]}return null})(x,g),v=(function(ue,ve){const ge=new Map;for(const F of al(ve))for(const T of Uf(ue,F.fieldPath))switch(T.op){case"==":case"in":ge.set(F.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return ge.set(F.fieldPath.canonicalString(),T.value),Array.from(ge.values())}return null})(x,g),N=(function(ue,ve){const ge=[];let F=!0;for(const T of al(ve)){const j=T.kind===0?o_(ue,T.fieldPath,ue.startAt):c_(ue,T.fieldPath,ue.startAt);ge.push(j.value),F&&(F=j.inclusive)}return new Qo(ge,F)})(x,g),C=(function(ue,ve){const ge=[];let F=!0;for(const T of al(ve)){const j=T.kind===0?c_(ue,T.fieldPath,ue.endAt):o_(ue,T.fieldPath,ue.endAt);ge.push(j.value),F&&(F=j.inclusive)}return new Qo(ge,F)})(x,g),V=this.On(g,x,N),Z=this.On(g,x,C),$=this.Nn(g,x,v),me=this.Bn(g.indexId,w,V,N.inclusive,Z,C.inclusive,$);return H.forEach(me,(de=>s.Y(de,t.limit).next((ue=>{ue.forEach((ve=>{const ge=Ne.fromSegments(ve.documentKey);d.has(ge)||(d=d.add(ge),f.push(ge))}))}))))})).next((()=>f))}return H.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=dk(wt.create(e.filters,"and")).map((s=>Lp(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,s,l,c,d,f){const g=(t!=null?t.length:1)*Math.max(s.length,c.length),x=g/(t!=null?t.length:1),w=[];for(let v=0;v<g;++v){const N=t?this.Ln(t[v/x]):Wh,C=this.kn(e,N,s[v%x],l),V=this.qn(e,N,c[v%x],d),Z=f.map(($=>this.kn(e,N,$,!0)));w.push(...this.createRange(C,V,Z))}return w}kn(e,t,s,l){const c=new ul(e,Ne.empty(),t,s);return l?c:c.An()}qn(e,t,s,l){const c=new ul(e,Ne.empty(),t,s);return l?c.An():c}xn(e,t){const s=new A_(t),l=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,l).next((c=>{let d=null;for(const f of c)s.yn(f)&&(!d||f.fields.length>d.fields.length)&&(d=f);return d}))}getIndexType(e,t){let s=2;const l=this.Mn(t);return H.forEach(l,(c=>this.xn(e,c).next((d=>{d?s!==0&&d.fields.length<(function(g){let x=new _t(Ft.comparator),w=!1;for(const v of g.filters)for(const N of v.getFlattenedFilters())N.field.isKeyField()||(N.op==="array-contains"||N.op==="array-contains-any"?w=!0:x=x.add(N.field));for(const v of g.orderBy)v.field.isKeyField()||(x=x.add(v.field));return x.size+(w?1:0)})(c)&&(s=1):s=0})))).next((()=>(function(d){return d.limit!==null})(t)&&l.length>1&&s===2?1:s))}Qn(e,t){const s=new yu;for(const l of al(e)){const c=t.data.field(l.fieldPath);if(c==null)return null;const d=s.Pn(l.kind);cl.Kt.Dt(c,d)}return s.un()}Ln(e){const t=new yu;return cl.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const s=new yu;return cl.Kt.Dt(nd(this.databaseId,t),s.Pn((function(c){const d=al(c);return d.length===0?0:d[d.length-1].kind})(e))),s.un()}Nn(e,t,s){if(s===null)return[];let l=[];l.push(new yu);let c=0;for(const d of al(e)){const f=s[c++];for(const g of l)if(this.Un(t,d.fieldPath)&&sd(f))l=this.Kn(l,d,f);else{const x=g.Pn(d.kind);cl.Kt.Dt(f,x)}}return this.Wn(l)}On(e,t,s){return this.Nn(e,t,s.position)}Wn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].un();return t}Kn(e,t,s){const l=[...e],c=[];for(const d of s.arrayValue.values||[])for(const f of l){const g=new yu;g.seed(f.un()),cl.Kt.Dt(d,g.Pn(t.kind)),c.push(g)}return c}Un(e,t){return!!e.filters.find((s=>s instanceof tt&&s.field.isEqual(t)&&(s.op==="in"||s.op==="not-in")))}getFieldIndexes(e,t){const s=bu(e),l=Eo(e);return(t?s.J(Rp,IDBKeyRange.bound(t,t)):s.J()).next((c=>{const d=[];return H.forEach(c,(f=>l.get([f.indexId,this.uid]).next((g=>{d.push((function(w,v){const N=v?new Xu(v.sequenceNumber,new vs(Tl(v.readTime),new Ne(Ar(v.documentKey)),v.largestBatchId)):Xu.empty(),C=w.fields.map((([V,Z])=>new of(Ft.fromServerFormat(V),Z)));return new Mf(w.indexId,w.collectionGroup,C,N)})(f,g))})))).next((()=>d))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((s,l)=>{const c=s.indexState.sequenceNumber-l.indexState.sequenceNumber;return c!==0?c:ze(s.collectionGroup,l.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,s){const l=bu(e),c=Eo(e);return this.Gn(e).next((d=>l.J(Rp,IDBKeyRange.bound(t,t)).next((f=>H.forEach(f,(g=>c.put(__(g.indexId,this.uid,d,s))))))))}updateIndexEntries(e,t){const s=new Map;return H.forEach(t,((l,c)=>{const d=s.get(l.collectionGroup);return(d?H.resolve(d):this.getFieldIndexes(e,l.collectionGroup)).next((f=>(s.set(l.collectionGroup,f),H.forEach(f,(g=>this.zn(e,l,g).next((x=>{const w=this.jn(c,g);return x.isEqual(w)?H.resolve():this.Jn(e,c,g,x,w)})))))))}))}Hn(e,t,s,l){return No(e).put(l.Rn(this.uid,this.$n(s,t.key),t.key))}Yn(e,t,s,l){return No(e).delete(l.Vn(this.uid,this.$n(s,t.key),t.key))}zn(e,t,s){const l=No(e);let c=new _t(si);return l.ee({index:eE,range:IDBKeyRange.only([s.indexId,this.uid,pf(this.$n(s,t))])},((d,f)=>{c=c.add(new ul(s.indexId,t,j_(f.arrayValue),j_(f.directionalValue)))})).next((()=>c))}jn(e,t){let s=new _t(si);const l=this.Qn(t,e);if(l==null)return s;const c=Ip(t);if(c!=null){const d=e.data.field(c.fieldPath);if(sd(d))for(const f of d.arrayValue.values||[])s=s.add(new ul(t.indexId,e.key,this.Ln(f),l))}else s=s.add(new ul(t.indexId,e.key,Wh,l));return s}Jn(e,t,s,l,c){fe(C_,"Updating index entries for document '%s'",t.key);const d=[];return(function(g,x,w,v,N){const C=g.getIterator(),V=x.getIterator();let Z=wo(C),$=wo(V);for(;Z||$;){let me=!1,de=!1;if(Z&&$){const ue=w(Z,$);ue<0?de=!0:ue>0&&(me=!0)}else Z!=null?de=!0:me=!0;me?(v($),$=wo(V)):de?(N(Z),Z=wo(C)):(Z=wo(C),$=wo(V))}})(l,c,si,(f=>{d.push(this.Hn(e,t,s,f))}),(f=>{d.push(this.Yn(e,t,s,f))})),H.waitFor(d)}Gn(e){let t=1;return Eo(e).ee({index:ZN,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((s,l,c)=>{c.done(),t=l.sequenceNumber+1})).next((()=>t))}createRange(e,t,s){s=s.sort(((d,f)=>si(d,f))).filter(((d,f,g)=>!f||si(d,g[f-1])!==0));const l=[];l.push(e);for(const d of s){const f=si(d,e),g=si(d,t);if(f===0)l[0]=e.An();else if(f>0&&g<0)l.push(d),l.push(d.An());else if(g>0)break}l.push(t);const c=[];for(let d=0;d<l.length;d+=2){if(this.Zn(l[d],l[d+1]))return[];const f=l[d].Vn(this.uid,Wh,Ne.empty()),g=l[d+1].Vn(this.uid,Wh,Ne.empty());c.push(IDBKeyRange.bound(f,g))}return c}Zn(e,t){return si(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(k_)}getMinOffset(e,t){return H.mapArray(this.Mn(t),(s=>this.xn(e,s).next((l=>l||Te(44426))))).next(k_)}}function R_(r){return fn(r,Zu)}function No(r){return fn(r,Ou)}function bu(r){return fn(r,Ex)}function Eo(r){return fn(r,Mu)}function k_(r){Ce(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const l=r[s].indexState.offset;wx(l,e)<0&&(e=l),t<l.largestBatchId&&(t=l.largestBatchId)}return new vs(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aT=41943040;class On{static withCacheSize(e){return new On(e,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(r,e,t){const s=r.store(Js),l=r.store(qo),c=[],d=IDBKeyRange.only(t.batchId);let f=0;const g=s.ee({range:d},((w,v,N)=>(f++,N.delete())));c.push(g.next((()=>{Ce(f===1,47070,{batchId:t.batchId})})));const x=[];for(const w of t.mutations){const v=YN(e,w.key.path,t.batchId);c.push(l.delete(v)),x.push(w.key)}return H.waitFor(c).next((()=>x))}function $f(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Te(14731);e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On.DEFAULT_COLLECTION_PERCENTILE=10,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,On.DEFAULT=new On(aT,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),On.DISABLED=new On(-1,0,0);class Em{constructor(e,t,s,l){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=l,this.Xn={}}static wt(e,t,s,l){Ce(e.uid!=="",64387);const c=e.isAuthenticated()?e.uid:"";return new Em(c,t,s,l)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ri(e).ee({index:dl,range:s},((l,c,d)=>{t=!1,d.done()})).next((()=>t))}addMutationBatch(e,t,s,l){const c=Co(e),d=ri(e);return d.add({}).next((f=>{Ce(typeof f=="number",49019);const g=new Mx(f,t,s,l),x=(function(C,V,Z){const $=Z.baseMutations.map((de=>Ff(C.yt,de))),me=Z.mutations.map((de=>Ff(C.yt,de)));return{userId:V,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:$,mutations:me}})(this.serializer,this.userId,g),w=[];let v=new _t(((N,C)=>ze(N.canonicalString(),C.canonicalString())));for(const N of l){const C=YN(this.userId,N.key.path,f);v=v.add(N.key.path.popLast()),w.push(d.put(x)),w.push(c.put(C,$R))}return v.forEach((N=>{w.push(this.indexManager.addToCollectionParentIndex(e,N))})),e.addOnCommittedListener((()=>{this.Xn[f]=g.keys()})),H.waitFor(w).next((()=>g))}))}lookupMutationBatch(e,t){return ri(e).get(t).next((s=>s?(Ce(s.userId===this.userId,48,"Unexpected user for mutation batch",{userId:s.userId,batchId:t}),ol(this.serializer,s)):null))}er(e,t){return this.Xn[t]?H.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((s=>{if(s){const l=s.keys();return this.Xn[t]=l,l}return null}))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,l=IDBKeyRange.lowerBound([this.userId,s]);let c=null;return ri(e).ee({index:dl,range:l},((d,f,g)=>{f.userId===this.userId&&(Ce(f.batchId>=s,47524,{tr:s}),c=ol(this.serializer,f)),g.done()})).next((()=>c))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=fl;return ri(e).ee({index:dl,range:t,reverse:!0},((l,c,d)=>{s=c.batchId,d.done()})).next((()=>s))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,fl],[this.userId,Number.POSITIVE_INFINITY]);return ri(e).J(dl,t).next((s=>s.map((l=>ol(this.serializer,l)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=cf(this.userId,t.path),l=IDBKeyRange.lowerBound(s),c=[];return Co(e).ee({range:l},((d,f,g)=>{const[x,w,v]=d,N=Ar(w);if(x===this.userId&&t.path.isEqual(N))return ri(e).get(v).next((C=>{if(!C)throw Te(61480,{nr:d,batchId:v});Ce(C.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:C.userId,batchId:v}),c.push(ol(this.serializer,C))}));g.done()})).next((()=>c))}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new _t(ze);const l=[];return t.forEach((c=>{const d=cf(this.userId,c.path),f=IDBKeyRange.lowerBound(d),g=Co(e).ee({range:f},((x,w,v)=>{const[N,C,V]=x,Z=Ar(C);N===this.userId&&c.path.isEqual(Z)?s=s.add(V):v.done()}));l.push(g)})),H.waitFor(l).next((()=>this.rr(e,s)))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,l=s.length+1,c=cf(this.userId,s),d=IDBKeyRange.lowerBound(c);let f=new _t(ze);return Co(e).ee({range:d},((g,x,w)=>{const[v,N,C]=g,V=Ar(N);v===this.userId&&s.isPrefixOf(V)?V.length===l&&(f=f.add(C)):w.done()})).next((()=>this.rr(e,f)))}rr(e,t){const s=[],l=[];return t.forEach((c=>{l.push(ri(e).get(c).next((d=>{if(d===null)throw Te(35274,{batchId:c});Ce(d.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:d.userId,batchId:c}),s.push(ol(this.serializer,d))})))})),H.waitFor(l).next((()=>s))}removeMutationBatch(e,t){return iT(e.le,this.userId,t).next((s=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),H.forEach(s,(l=>this.referenceDelegate.markPotentiallyOrphaned(e,l))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return H.resolve();const s=IDBKeyRange.lowerBound((function(d){return[d]})(this.userId)),l=[];return Co(e).ee({range:s},((c,d,f)=>{if(c[0]===this.userId){const g=Ar(c[1]);l.push(g)}else f.done()})).next((()=>{Ce(l.length===0,56720,{sr:l.map((c=>c.canonicalString()))})}))}))}containsKey(e,t){return lT(e,this.userId,t)}_r(e){return oT(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:fl,lastStreamToken:""}))}}function lT(r,e,t){const s=cf(e,t.path),l=s[1],c=IDBKeyRange.lowerBound(s);let d=!1;return Co(r).ee({range:c,X:!0},((f,g,x)=>{const[w,v,N]=f;w===e&&v===l&&(d=!0),x.done()})).next((()=>d))}function ri(r){return fn(r,Js)}function Co(r){return fn(r,qo)}function oT(r){return fn(r,Ju)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Sl(0)}static cr(){return new Sl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const s=new Sl(t.highestTargetId);return t.highestTargetId=s.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>De.fromTimestamp(new vt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,s){return this.lr(e).next((l=>(l.highestListenSequenceNumber=t,s&&(l.lastRemoteSnapshotVersion=s.toTimestamp()),t>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=t),this.hr(e,l))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((s=>(s.targetCount+=1,this.Tr(t,s),this.hr(e,s))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>To(e).delete(t.targetId))).next((()=>this.lr(e))).next((s=>(Ce(s.targetCount>0,8065),s.targetCount-=1,this.hr(e,s))))}removeTargets(e,t,s){let l=0;const c=[];return To(e).ee(((d,f)=>{const g=Au(f);g.sequenceNumber<=t&&s.get(g.targetId)===null&&(l++,c.push(this.removeTargetData(e,g)))})).next((()=>H.waitFor(c))).next((()=>l))}forEachTarget(e,t){return To(e).ee(((s,l)=>{const c=Au(l);t(c)}))}lr(e){return M_(e).get(Pf).next((t=>(Ce(t!==null,2888),t)))}hr(e,t){return M_(e).put(Pf,t)}Pr(e,t){return To(e).put(tT(this.serializer,t))}Tr(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const s=Nl(t),l=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let c=null;return To(e).ee({range:l,index:WN},((d,f,g)=>{const x=Au(f);md(t,x.target)&&(c=x,g.done())})).next((()=>c))}addMatchingKeys(e,t,s){const l=[],c=di(e);return t.forEach((d=>{const f=Ln(d.path);l.push(c.put({targetId:s,path:f})),l.push(this.referenceDelegate.addReference(e,s,d))})),H.waitFor(l)}removeMatchingKeys(e,t,s){const l=di(e);return H.forEach(t,(c=>{const d=Ln(c.path);return H.waitFor([l.delete([s,d]),this.referenceDelegate.removeReference(e,s,c)])}))}removeMatchingKeysForTargetId(e,t){const s=di(e),l=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(l)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),l=di(e);let c=$e();return l.ee({range:s,X:!0},((d,f,g)=>{const x=Ar(d[1]),w=new Ne(x);c=c.add(w)})).next((()=>c))}containsKey(e,t){const s=Ln(t.path),l=IDBKeyRange.bound([s],[BN(s)],!1,!0);let c=0;return di(e).ee({index:Nx,X:!0,range:l},(([d,f],g,x)=>{d!==0&&(c++,x.done())})).next((()=>c>0))}At(e,t){return To(e).get(t).next((s=>s?Au(s):null))}}function To(r){return fn(r,Fo)}function M_(r){return fn(r,ml)}function di(r){return fn(r,Ho)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="LruGarbageCollector",cT=1048576;function V_([r,e],[t,s]){const l=ze(r,t);return l===0?ze(e,s):l}class gk{constructor(e){this.Ir=e,this.buffer=new _t(V_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();V_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class uT{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(O_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ai(t)?fe(O_,"Ignoring IndexedDB error during garbage collection: ",t):await ji(t)}await this.Vr(3e5)}))}}class pk{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return H.resolve(ts.ce);const s=new gk(t);return this.mr.forEachTarget(e,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(D_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),D_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,l,c,d,f,g,x;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),l=this.params.maximumSequenceNumbersToCollect):l=v,d=Date.now(),this.nthSequenceNumber(e,l)))).next((v=>(s=v,f=Date.now(),this.removeTargets(e,s,t)))).next((v=>(c=v,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((v=>(x=Date.now(),So()<=et.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-w}ms
	Determined least recently used ${l} in `+(f-d)+`ms
	Removed ${c} targets in `+(g-f)+`ms
	Removed ${v} documents in `+(x-g)+`ms
Total Duration: ${x-w}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:v}))))}}function dT(r,e){return new pk(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,t){this.db=e,this.garbageCollector=dT(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((s=>t.next((l=>s+l))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((s,l)=>t(l)))}addReference(e,t,s){return Zh(e,s)}removeReference(e,t,s){return Zh(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Zh(e,t)}br(e,t){return(function(l,c){let d=!1;return oT(l).te((f=>lT(l,f,c).next((g=>(g&&(d=!0),H.resolve(!g)))))).next((()=>d))})(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[];let c=0;return this.Sr(e,((d,f)=>{if(f<=t){const g=this.br(e,d).next((x=>{if(!x)return c++,s.getEntry(e,d).next((()=>(s.removeEntry(d,De.min()),di(e).delete((function(v){return[0,Ln(v.path)]})(d)))))}));l.push(g)}})).next((()=>H.waitFor(l))).next((()=>s.apply(e))).next((()=>c))}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Zh(e,t)}Sr(e,t){const s=di(e);let l,c=ts.ce;return s.ee({index:Nx},(([d,f],{path:g,sequenceNumber:x})=>{d===0?(c!==ts.ce&&t(new Ne(Ar(l)),c),c=x,l=g):c=ts.ce})).next((()=>{c!==ts.ce&&t(new Ne(Ar(l)),c)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Zh(r,e){return di(r).put((function(s,l){return{targetId:0,path:Ln(s.path),sequenceNumber:l}})(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.changes=new ba((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?H.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return sl(e).put(s)}removeEntry(e,t,s){return sl(e).delete((function(c,d){const f=c.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],Hf(d),f[f.length-1]]})(t,s))}updateMetadata(e,t){return this.getMetadata(e).next((s=>(s.byteSize+=t,this.Dr(e,s))))}getEntry(e,t){let s=$t.newInvalidDocument(t);return sl(e).ee({index:uf,range:IDBKeyRange.only(vu(t))},((l,c)=>{s=this.Cr(t,c)})).next((()=>s))}vr(e,t){let s={size:0,document:$t.newInvalidDocument(t)};return sl(e).ee({index:uf,range:IDBKeyRange.only(vu(t))},((l,c)=>{s={document:this.Cr(t,c),size:$f(c)}})).next((()=>s))}getEntries(e,t){let s=xs();return this.Fr(e,t,((l,c)=>{const d=this.Cr(l,c);s=s.insert(l,d)})).next((()=>s))}Mr(e,t){let s=xs(),l=new Ct(Ne.comparator);return this.Fr(e,t,((c,d)=>{const f=this.Cr(c,d);s=s.insert(c,f),l=l.insert(c,$f(d))})).next((()=>({documents:s,Or:l})))}Fr(e,t,s){if(t.isEmpty())return H.resolve();let l=new _t(z_);t.forEach((g=>l=l.add(g)));const c=IDBKeyRange.bound(vu(l.first()),vu(l.last())),d=l.getIterator();let f=d.getNext();return sl(e).ee({index:uf,range:c},((g,x,w)=>{const v=Ne.fromSegments([...x.prefixPath,x.collectionGroup,x.documentId]);for(;f&&z_(f,v)<0;)s(f,null),f=d.getNext();f&&f.isEqual(v)&&(s(f,x),f=d.hasNext()?d.getNext():null),f?w.j(vu(f)):w.done()})).next((()=>{for(;f;)s(f,null),f=d.hasNext()?d.getNext():null}))}getDocumentsMatchingQuery(e,t,s,l,c){const d=t.path,f=[d.popLast().toArray(),d.lastSegment(),Hf(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],g=[d.popLast().toArray(),d.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sl(e).J(IDBKeyRange.bound(f,g,!0)).next((x=>{c==null||c.incrementDocumentReadCount(x.length);let w=xs();for(const v of x){const N=this.Cr(Ne.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);N.isFoundDocument()&&(pd(t,N)||l.has(N.key))&&(w=w.insert(N.key,N))}return w}))}getAllFromCollectionGroup(e,t,s,l){let c=xs();const d=L_(t,s),f=L_(t,vs.max());return sl(e).ee({index:JN,range:IDBKeyRange.bound(d,f,!0)},((g,x,w)=>{const v=this.Cr(Ne.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);c=c.insert(v.key,v),c.size===l&&w.done()})).next((()=>c))}newChangeBuffer(e){return new bk(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return P_(e).get(Cp).next((t=>(Ce(!!t,20021),t)))}Dr(e,t){return P_(e).put(Cp,t)}Cr(e,t){if(t){const s=rk(this.serializer,t);if(!(s.isNoDocument()&&s.version.isEqual(De.min())))return s}return $t.newInvalidDocument(e)}}function fT(r){return new yk(r)}class bk extends hT{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new ba((s=>s.toString()),((s,l)=>s.isEqual(l)))}applyChanges(e){const t=[];let s=0,l=new _t(((c,d)=>ze(c.canonicalString(),d.canonicalString())));return this.changes.forEach(((c,d)=>{const f=this.Br.get(c);if(t.push(this.Nr.removeEntry(e,c,f.readTime)),d.isValidDocument()){const g=v_(this.Nr.serializer,d);l=l.add(c.path.popLast());const x=$f(g);s+=x-f.size,t.push(this.Nr.addEntry(e,c,g))}else if(s-=f.size,this.trackRemovals){const g=v_(this.Nr.serializer,d.convertToNoDocument(De.min()));t.push(this.Nr.addEntry(e,c,g))}})),l.forEach((c=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,c))})),t.push(this.Nr.updateMetadata(e,s)),H.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((s=>(this.Br.set(t,{size:s.size,readTime:s.document.readTime}),s.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:s,Or:l})=>(l.forEach(((c,d)=>{this.Br.set(c,{size:d,readTime:s.get(c).readTime})})),s)))}}function P_(r){return fn(r,Wu)}function sl(r){return fn(r,Vf)}function vu(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function L_(r,e){const t=e.documentKey.path.toArray();return[r,Hf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function z_(r,e){const t=r.path.toArray(),s=e.path.toArray();let l=0;for(let c=0;c<t.length-2&&c<s.length-2;++c)if(l=ze(t[c],s[c]),l)return l;return l=ze(t.length,s.length),l||(l=ze(t[t.length-2],s[s.length-2]),l||ze(t[t.length-1],s[s.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,t,s,l){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((l=>(s=l,this.remoteDocumentCache.getEntry(e,t)))).next((l=>(s!==null&&zu(s.mutation,l,ns.empty(),vt.now()),l)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,$e()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=$e()){const l=Ir();return this.populateOverlays(e,l,t).next((()=>this.computeViews(e,t,l,s).next((c=>{let d=Su();return c.forEach(((f,g)=>{d=d.insert(f,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const s=Ir();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,$e())))}populateOverlays(e,t,s){const l=[];return s.forEach((c=>{t.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((d,f)=>{t.set(d,f)}))}))}computeViews(e,t,s,l){let c=xs();const d=Lu(),f=(function(){return Lu()})();return t.forEach(((g,x)=>{const w=s.get(x.key);l.has(x.key)&&(w===void 0||w.mutation instanceof va)?c=c.insert(x.key,x):w!==void 0?(d.set(x.key,w.mutation.getFieldMask()),zu(w.mutation,x,w.mutation.getFieldMask(),vt.now())):d.set(x.key,ns.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((x,w)=>d.set(x,w))),t.forEach(((x,w)=>f.set(x,new vk(w,d.get(x)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Lu();let l=new Ct(((d,f)=>d-f)),c=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const f of d)f.keys().forEach((g=>{const x=t.get(g);if(x===null)return;let w=s.get(g)||ns.empty();w=f.applyToLocalView(x,w),s.set(g,w);const v=(l.get(f.batchId)||$e()).add(g);l=l.insert(f.batchId,v)}))})).next((()=>{const d=[],f=l.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),x=g.key,w=g.value,v=CE();w.forEach((N=>{if(!c.has(N)){const C=PE(t.get(N),s.get(N));C!==null&&v.set(N,C),c=c.add(N)}})),d.push(this.documentOverlayCache.saveOverlays(e,x,v))}return H.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,l){return(function(d){return Ne.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):EE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,l):this.getDocumentsMatchingCollectionQuery(e,t,s,l)}getNextDocuments(e,t,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,l-c.size):H.resolve(Ir());let f=Bo,g=c;return d.next((x=>H.forEach(x,((w,v)=>(f<v.largestBatchId&&(f=v.largestBatchId),c.get(w)?H.resolve():this.remoteDocumentCache.getEntry(e,w).next((N=>{g=g.insert(w,N)}))))).next((()=>this.populateOverlays(e,x,c))).next((()=>this.computeViews(e,g,x,$e()))).next((w=>({batchId:f,changes:IE(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ne(t)).next((s=>{let l=Su();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,l){const c=t.collectionGroup;let d=Su();return this.indexManager.getCollectionParents(e,c).next((f=>H.forEach(f,(g=>{const x=(function(v,N){return new dc(N,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,x,s,l).next((w=>{w.forEach(((v,N)=>{d=d.insert(v,N)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,l)))).next((d=>{c.forEach(((g,x)=>{const w=x.getKey();d.get(w)===null&&(d=d.insert(w,$t.newInvalidDocument(w)))}));let f=Su();return d.forEach(((g,x)=>{const w=c.get(g);w!==void 0&&zu(w.mutation,x,ns.empty(),vt.now()),pd(t,x)&&(f=f.insert(g,x))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return H.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(l){return{id:l.id,version:l.version,createTime:Fn(l.createTime)}})(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(l){return{name:l.name,query:nT(l.bundledQuery),readTime:Fn(l.readTime)}})(t)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(){this.overlays=new Ct(Ne.comparator),this.qr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ir();return H.forEach(t,(l=>this.getOverlay(e,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((l,c)=>{this.St(e,t,c)})),H.resolve()}removeOverlaysForBatchId(e,t,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),H.resolve()}getOverlaysForCollection(e,t,s){const l=Ir(),c=t.length+1,d=new Ne(t.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const g=f.getNext().value,x=g.getKey();if(!t.isPrefixOf(x.path))break;x.path.length===c&&g.largestBatchId>s&&l.set(g.getKey(),g)}return H.resolve(l)}getOverlaysForCollectionGroup(e,t,s,l){let c=new Ct(((x,w)=>x-w));const d=this.overlays.getIterator();for(;d.hasNext();){const x=d.getNext().value;if(x.getKey().getCollectionGroup()===t&&x.largestBatchId>s){let w=c.get(x.largestBatchId);w===null&&(w=Ir(),c=c.insert(x.largestBatchId,w)),w.set(x.getKey(),x)}}const f=Ir(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((x,w)=>f.set(x,w))),!(f.size()>=l)););return H.resolve(f)}St(e,t,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new Vx(t,s));let c=this.qr.get(t);c===void 0&&(c=$e(),this.qr.set(t,c)),this.qr.set(t,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(){this.Qr=new _t(bn.$r),this.Ur=new _t(bn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new bn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new bn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ne(new mt([])),s=new bn(t,e),l=new bn(t,e+1),c=[];return this.Ur.forEachInRange([s,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ne(new mt([])),s=new bn(t,e),l=new bn(t,e+1);let c=$e();return this.Ur.forEachInRange([s,l],(d=>{c=c.add(d.key)})),c}containsKey(e){const t=new bn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class bn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ne.comparator(e.key,t.key)||ze(e.Yr,t.Yr)}static Kr(e,t){return ze(e.Yr,t.Yr)||Ne.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new _t(bn.$r)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Mx(c,t,s,l);this.mutationQueue.push(d);for(const f of l)this.Zr=this.Zr.add(new bn(f.key,c)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return H.resolve(d)}lookupMutationBatch(e,t){return H.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,l=this.ei(s),c=l<0?0:l;return H.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?fl:this.tr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new bn(t,0),l=new bn(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(d=>{const f=this.Xr(d.Yr);c.push(f)})),H.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new _t(ze);return t.forEach((l=>{const c=new bn(l,0),d=new bn(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(f=>{s=s.add(f.Yr)}))})),H.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,l=s.length+1;let c=s;Ne.isDocumentKey(c)||(c=c.child(""));const d=new bn(new Ne(c),0);let f=new _t(ze);return this.Zr.forEachWhile((g=>{const x=g.key.path;return!!s.isPrefixOf(x)&&(x.length===l&&(f=f.add(g.Yr)),!0)}),d),H.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const l=this.Xr(s);l!==null&&t.push(l)})),t}removeMutationBatch(e,t){Ce(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return H.forEach(t.mutations,(l=>{const c=new bn(l.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new bn(t,0),l=this.Zr.firstAfterOrEqual(s);return H.resolve(t.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.ri=e,this.docs=(function(){return new Ct(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,l=this.docs.get(s),c=l?l.size:0,d=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return H.resolve(s?s.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let s=xs();return t.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():$t.newInvalidDocument(l))})),H.resolve(s)}getDocumentsMatchingQuery(e,t,s,l){let c=xs();const d=t.path,f=new Ne(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:x,value:{document:w}}=g.getNext();if(!d.isPrefixOf(x.path))break;x.path.length>d.length+1||wx(GN(w),s)<=0||(l.has(w.key)||pd(t,w))&&(c=c.insert(w.key,w.mutableCopy()))}return H.resolve(c)}getAllFromCollectionGroup(e,t,s,l){Te(9500)}ii(e,t){return H.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new Sk(this)}getSize(e){return H.resolve(this.size)}}class Sk extends hT{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?t.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(s)})),H.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.persistence=e,this.si=new ba((t=>Nl(t)),md),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new Bx,this.targetCount=0,this.ai=Sl.ur()}forEachTarget(e,t){return this.si.forEach(((s,l)=>t(l))),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),H.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Sl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.Pr(t),H.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,s){let l=0;const c=[];return this.si.forEach(((d,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,f.targetId)),l++)})),H.waitFor(c).next((()=>l))}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return H.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),H.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const l=this.persistence.referenceDelegate,c=[];return l&&t.forEach((d=>{c.push(l.markPotentiallyOrphaned(e,d))})),H.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),H.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return H.resolve(s)}containsKey(e,t){return H.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,t){this.ui={},this.overlays={},this.ci=new ts(0),this.li=!1,this.li=!0,this.hi=new Nk,this.referenceDelegate=e(this),this.Pi=new jk(this),this.indexManager=new hk,this.remoteDocumentCache=(function(l){return new Tk(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new eT(t),this.Ii=new wk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _k,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new Ek(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){fe("MemoryPersistence","Starting transaction:",e);const l=new Ak(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,t){return H.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class Ak extends KN{constructor(e){super(),this.currentSequenceNumber=e}}class Tm{constructor(e){this.persistence=e,this.Ri=new Bx,this.Vi=null}static mi(e){return new Tm(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),H.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),H.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.fi,(s=>{const l=Ne.fromPath(s);return this.gi(e,l).next((c=>{c||t.removeEntry(l,De.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return H.or([()=>H.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Kf{constructor(e,t){this.persistence=e,this.pi=new ba((s=>Ln(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=dT(this,t)}static mi(e,t){return new Kf(e,t)}Ei(){}di(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((l=>s+l))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return H.forEach(this.pi,((s,l)=>this.br(e,s,l).next((c=>c?H.resolve():t(l)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(d=>this.br(e,d,t).next((f=>{f||(s++,c.removeEntry(d,De.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),H.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=hf(e.data.value)),t}br(e,t,s){return H.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const l=this.pi.get(t);return H.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e){this.serializer=e}k(e,t,s,l){const c=new hm("createOrUpgrade",t);s<1&&l>=1&&((function(g){g.createObjectStore(fd)})(e),(function(g){g.createObjectStore(Ju,{keyPath:GR}),g.createObjectStore(Js,{keyPath:Yw,autoIncrement:!0}).createIndex(dl,Jw,{unique:!0}),g.createObjectStore(qo)})(e),U_(e),(function(g){g.createObjectStore(il)})(e));let d=H.resolve();return s<3&&l>=3&&(s!==0&&((function(g){g.deleteObjectStore(Ho),g.deleteObjectStore(Fo),g.deleteObjectStore(ml)})(e),U_(e)),d=d.next((()=>(function(g){const x=g.store(ml),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:De.min().toTimestamp(),targetCount:0};return x.put(Pf,w)})(c)))),s<4&&l>=4&&(s!==0&&(d=d.next((()=>(function(g,x){return x.store(Js).J().next((v=>{g.deleteObjectStore(Js),g.createObjectStore(Js,{keyPath:Yw,autoIncrement:!0}).createIndex(dl,Jw,{unique:!0});const N=x.store(Js),C=v.map((V=>N.put(V)));return H.waitFor(C)}))})(e,c)))),d=d.next((()=>{(function(g){g.createObjectStore(Go,{keyPath:e6})})(e)}))),s<5&&l>=5&&(d=d.next((()=>this.yi(c)))),s<6&&l>=6&&(d=d.next((()=>((function(g){g.createObjectStore(Wu)})(e),this.wi(c))))),s<7&&l>=7&&(d=d.next((()=>this.Si(c)))),s<8&&l>=8&&(d=d.next((()=>this.bi(e,c)))),s<9&&l>=9&&(d=d.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e)}))),s<10&&l>=10&&(d=d.next((()=>this.Di(c)))),s<11&&l>=11&&(d=d.next((()=>{(function(g){g.createObjectStore(mm,{keyPath:t6})})(e),(function(g){g.createObjectStore(gm,{keyPath:n6})})(e)}))),s<12&&l>=12&&(d=d.next((()=>{(function(g){const x=g.createObjectStore(pm,{keyPath:c6});x.createIndex(kp,u6,{unique:!1}),x.createIndex(tE,d6,{unique:!1})})(e)}))),s<13&&l>=13&&(d=d.next((()=>(function(g){const x=g.createObjectStore(Vf,{keyPath:KR});x.createIndex(uf,QR),x.createIndex(JN,XR)})(e))).next((()=>this.Ci(e,c))).next((()=>e.deleteObjectStore(il)))),s<14&&l>=14&&(d=d.next((()=>this.Fi(e,c)))),s<15&&l>=15&&(d=d.next((()=>(function(g){g.createObjectStore(Ex,{keyPath:s6,autoIncrement:!0}).createIndex(Rp,r6,{unique:!1}),g.createObjectStore(Mu,{keyPath:a6}).createIndex(ZN,i6,{unique:!1}),g.createObjectStore(Ou,{keyPath:l6}).createIndex(eE,o6,{unique:!1})})(e)))),s<16&&l>=16&&(d=d.next((()=>{t.objectStore(Mu).clear()})).next((()=>{t.objectStore(Ou).clear()}))),s<17&&l>=17&&(d=d.next((()=>{(function(g){g.createObjectStore(Tx,{keyPath:h6})})(e)}))),s<18&&l>=18&&G2()&&(d=d.next((()=>{t.objectStore(Mu).clear()})).next((()=>{t.objectStore(Ou).clear()}))),d}wi(e){let t=0;return e.store(il).ee(((s,l)=>{t+=$f(l)})).next((()=>{const s={byteSize:t};return e.store(Wu).put(Cp,s)}))}yi(e){const t=e.store(Ju),s=e.store(Js);return t.J().next((l=>H.forEach(l,(c=>{const d=IDBKeyRange.bound([c.userId,fl],[c.userId,c.lastAcknowledgedBatchId]);return s.J(dl,d).next((f=>H.forEach(f,(g=>{Ce(g.userId===c.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const x=ol(this.serializer,g);return iT(e,c.userId,x).next((()=>{}))}))))}))))}Si(e){const t=e.store(Ho),s=e.store(il);return e.store(ml).get(Pf).next((l=>{const c=[];return s.ee(((d,f)=>{const g=new mt(d),x=(function(v){return[0,Ln(v)]})(g);c.push(t.get(x).next((w=>w?H.resolve():(v=>t.put({targetId:0,path:Ln(v),sequenceNumber:l.highestListenSequenceNumber}))(g))))})).next((()=>H.waitFor(c)))}))}bi(e,t){e.createObjectStore(Zu,{keyPath:ZR});const s=t.store(Zu),l=new Ux,c=d=>{if(l.add(d)){const f=d.lastSegment(),g=d.popLast();return s.put({collectionId:f,parent:Ln(g)})}};return t.store(il).ee({X:!0},((d,f)=>{const g=new mt(d);return c(g.popLast())})).next((()=>t.store(qo).ee({X:!0},(([d,f,g],x)=>{const w=Ar(f);return c(w.popLast())}))))}Di(e){const t=e.store(Fo);return t.ee(((s,l)=>{const c=Au(l),d=tT(this.serializer,c);return t.put(d)}))}Ci(e,t){const s=t.store(il),l=[];return s.ee(((c,d)=>{const f=t.store(Vf),g=(function(v){return v.document?new Ne(mt.fromString(v.document.name).popFirst(5)):v.noDocument?Ne.fromSegments(v.noDocument.path):v.unknownDocument?Ne.fromSegments(v.unknownDocument.path):Te(36783)})(d).path.toArray(),x={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};l.push(f.put(x))})).next((()=>H.waitFor(l)))}Fi(e,t){const s=t.store(Js),l=fT(this.serializer),c=new qx(Tm.mi,this.serializer.yt);return s.J().next((d=>{const f=new Map;return d.forEach((g=>{let x=f.get(g.userId)??$e();ol(this.serializer,g).keys().forEach((w=>x=x.add(w))),f.set(g.userId,x)})),H.forEach(f,((g,x)=>{const w=new Mn(x),v=Nm.wt(this.serializer,w),N=c.getIndexManager(w),C=Em.wt(w,this.serializer,N,c.referenceDelegate);return new mT(l,C,v,N).recalculateAndSaveOverlaysForDocumentKeys(new Dp(t,ts.ce),g).next()}))}))}}function U_(r){r.createObjectStore(Ho,{keyPath:JR}).createIndex(Nx,WR,{unique:!0}),r.createObjectStore(Fo,{keyPath:"targetId"}).createIndex(WN,YR,{unique:!0}),r.createObjectStore(ml)}const ai="IndexedDbPersistence",Yg=18e5,Jg=5e3,Wg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ck="main";class Fx{constructor(e,t,s,l,c,d,f,g,x,w,v=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Mi=c,this.window=d,this.document=f,this.xi=x,this.Oi=w,this.Ni=v,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=N=>Promise.resolve(),!Fx.v())throw new xe(te.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xk(this,l),this.$i=t+Ck,this.serializer=new eT(g),this.Ui=new xi(this.$i,this.Ni,new Ik(this.serializer)),this.hi=new ik,this.Pi=new mk(this.referenceDelegate,this.serializer),this.remoteDocumentCache=fT(this.serializer),this.Ii=new ak,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,w===!1&&Wt(ai,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(te.FAILED_PRECONDITION,Wg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new ts(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>ef(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Ai(e))return fe(ai,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return fe(ai,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return wu(e).get(vo).next((t=>H.resolve(this.es(t))))}ts(e){return ef(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Yg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const s=fn(t,Go);return s.J().next((l=>{const c=this.ss(l,Yg),d=l.filter((f=>c.indexOf(f)===-1));return H.forEach(d,(f=>s.delete(f.clientId))).next((()=>d))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?H.resolve(!0):wu(e).get(vo).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Jg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new xe(te.FAILED_PRECONDITION,Wg);return!1}}return!(!this.networkEnabled||!this.inForeground)||ef(e).J().next((s=>this.ss(s,Jg).find((l=>{if(this.clientId!==l.clientId){const c=!this.networkEnabled&&l.networkEnabled,d=!this.inForeground&&l.inForeground,f=this.networkEnabled===l.networkEnabled;if(c||d&&f)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&fe(ai,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[fd,Go],(e=>{const t=new Dp(e,ts.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((s=>this.rs(s.updateTimeMs,t)&&!this.us(s.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>ef(e).J().next((t=>this.ss(t,Yg).map((s=>s.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Em.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new fk(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Nm.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,s){fe(ai,"Starting transaction:",e);const l=t==="readonly"?"readonly":"readwrite",c=(function(g){return g===18?g6:g===17?aE:g===16?m6:g===15?Sx:g===14?rE:g===13?sE:g===12?f6:g===11?nE:void Te(60245)})(this.Ni);let d;return this.Ui.runTransaction(e,l,c,(f=>(d=new Dp(f,this.ci?this.ci.next():ts.ce),t==="readwrite-primary"?this.Hi(d).next((g=>!!g||this.Yi(d))).next((g=>{if(!g)throw Wt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new xe(te.FAILED_PRECONDITION,$N);return s(d)})).next((g=>this.Xi(d).next((()=>g)))):this.Is(d).next((()=>s(d)))))).then((f=>(d.raiseOnCommittedEvent(),f)))}Is(e){return wu(e).get(vo).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Jg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(te.FAILED_PRECONDITION,Wg)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wu(e).put(vo,t)}static v(){return xi.v()}Zi(e){const t=wu(e);return t.get(vo).next((s=>this.es(s)?(fe(ai,"Releasing primary lease."),t.delete(vo)):H.resolve()))}rs(e,t){const s=Date.now();return!(e<s-t)&&(!(e>s)||(Wt(`Detected an update time that is in the future: ${e} > ${s}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;H2()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const s=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return fe(ai,`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Wt(ai,"Failed to get zombied client id.",s),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Wt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wu(r){return fn(r,fd)}function ef(r){return fn(r,Go)}function gT(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,t,s,l){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=l}static As(e,t){let s=$e(),l=$e();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Hx(e,t.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return H2()?8:QN(hn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,l){const c={result:null};return this.ys(e,t).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,t,l,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new Rk;return this.Ss(e,t,d).next((f=>{if(c.result=f,this.Vs)return this.bs(e,t,d,f.size)}))})).next((()=>c.result))}bs(e,t,s,l){return s.documentReadCount<this.fs?(So()<=et.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",jo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),H.resolve()):(So()<=et.DEBUG&&fe("QueryEngine","Query:",jo(t),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(So()<=et.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",jo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ys(t))):H.resolve())}ys(e,t){if(u_(t))return H.resolve(null);let s=ys(t);return this.indexManager.getIndexType(e,s).next((l=>l===0?null:(t.limit!==null&&l===1&&(t=Bf(t,null,"F"),s=ys(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=$e(...c);return this.ps.getDocuments(e,d).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const x=this.Ds(t,f);return this.Cs(t,x,d,g.readTime)?this.ys(e,Bf(t,null,"F")):this.vs(e,x,t,g)}))))})))))}ws(e,t,s,l){return u_(t)||l.isEqual(De.min())?H.resolve(null):this.ps.getDocuments(e,s).next((c=>{const d=this.Ds(t,c);return this.Cs(t,d,s,l)?H.resolve(null):(So()<=et.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),jo(t)),this.vs(e,d,t,HN(l,Bo)).next((f=>f)))}))}Ds(e,t){let s=new _t(jE(e));return t.forEach(((l,c)=>{pd(e,c)&&(s=s.add(c))})),s}Cs(e,t,s,l){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,t,s){return So()<=et.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",jo(t)),this.ps.getDocumentsMatchingQuery(e,t,vs.min(),s)}vs(e,t,s,l){return this.ps.getDocumentsMatchingQuery(e,s,l).next((c=>(t.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="LocalStore",kk=3e8;class Dk{constructor(e,t,s,l){this.persistence=e,this.Fs=t,this.serializer=l,this.Ms=new Ct(ze),this.xs=new ba((c=>Nl(c)),md),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mT(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function xT(r,e,t,s){return new Dk(r,e,t,s)}async function yT(r,e){const t=je(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return t.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],f=[];let g=$e();for(const x of l){d.push(x.batchId);for(const w of x.mutations)g=g.add(w.key)}for(const x of c){f.push(x.batchId);for(const w of x.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(s,g).next((x=>({Ls:x,removedBatchIds:d,addedBatchIds:f})))}))}))}function Mk(r,e){const t=je(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,x,w){const v=x.batch,N=v.keys();let C=H.resolve();return N.forEach((V=>{C=C.next((()=>w.getEntry(g,V))).next((Z=>{const $=x.docVersions.get(V);Ce($!==null,48541),Z.version.compareTo($)<0&&(v.applyToRemoteDocument(Z,x),Z.isValidDocument()&&(Z.setReadTime(x.commitVersion),w.addEntry(Z)))}))})),C.next((()=>f.mutationQueue.removeMutationBatch(g,v)))})(t,s,e,c).next((()=>c.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=$e();for(let x=0;x<f.mutationResults.length;++x)f.mutationResults[x].transformResults.length>0&&(g=g.add(f.batch.mutations[x].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,l)))}))}function bT(r){const e=je(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Ok(r,e){const t=je(r),s=e.snapshotVersion;let l=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});l=t.Ms;const f=[];e.targetChanges.forEach(((w,v)=>{const N=l.get(v);if(!N)return;f.push(t.Pi.removeMatchingKeys(c,w.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(c,w.addedDocuments,v))));let C=N.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(v)!==null?C=C.withResumeToken(Zt.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):w.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(w.resumeToken,s)),l=l.insert(v,C),(function(Z,$,me){return Z.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=kk?!0:me.addedDocuments.size+me.modifiedDocuments.size+me.removedDocuments.size>0})(N,C,w)&&f.push(t.Pi.updateTargetData(c,C))}));let g=xs(),x=$e();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(c,w))})),f.push(Vk(c,d,e.documentUpdates).next((w=>{g=w.ks,x=w.qs}))),!s.isEqual(De.min())){const w=t.Pi.getLastRemoteSnapshotVersion(c).next((v=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));f.push(w)}return H.waitFor(f).next((()=>d.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,g,x))).next((()=>g))})).then((c=>(t.Ms=l,c)))}function Vk(r,e,t){let s=$e(),l=$e();return t.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let d=xs();return t.forEach(((f,g)=>{const x=c.get(f);g.isFoundDocument()!==x.isFoundDocument()&&(l=l.add(f)),g.isNoDocument()&&g.version.isEqual(De.min())?(e.removeEntry(f,g.readTime),d=d.insert(f,g)):!x.isValidDocument()||g.version.compareTo(x.version)>0||g.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(g),d=d.insert(f,g)):fe(Gx,"Ignoring outdated watch update for ",f,". Current version:",x.version," Watch version:",g.version)})),{ks:d,qs:l}}))}function Pk(r,e){const t=je(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=fl),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Qf(r,e){const t=je(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return t.Pi.getTargetData(s,e).next((c=>c?(l=c,H.resolve(l)):t.Pi.allocateTargetId(s).next((d=>(l=new la(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=t.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function tc(r,e,t){const s=je(r),l=s.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!Ai(d))throw d;fe(Gx,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(l.target)}function Xf(r,e,t){const s=je(r);let l=De.min(),c=$e();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,x,w){const v=je(g),N=v.xs.get(w);return N!==void 0?H.resolve(v.Ms.get(N)):v.Pi.getTargetData(x,w)})(s,d,ys(e)).next((f=>{if(f)return l=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,f.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,t?l:De.min(),t?c:$e()))).next((f=>(_T(s,SE(e),f),{documents:f,Qs:c})))))}function vT(r,e){const t=je(r),s=je(t.Pi),l=t.Ms.get(e);return l?Promise.resolve(l.target):t.persistence.runTransaction("Get target data","readonly",(c=>s.At(c,e).next((d=>d?d.target:null))))}function wT(r,e){const t=je(r),s=t.Os.get(e)||De.min();return t.persistence.runTransaction("Get new document changes","readonly",(l=>t.Ns.getAllFromCollectionGroup(l,e,HN(s,Bo),Number.MAX_SAFE_INTEGER))).then((l=>(_T(t,e,l),l)))}function _T(r,e,t){let s=r.Os.get(e)||De.min();t.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(e,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="firestore_clients";function B_(r,e){return`${NT}_${r}_${e}`}const ET="firestore_mutations";function q_(r,e,t){let s=`${ET}_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}const TT="firestore_targets";function Zg(r,e){return`${TT}_${r}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr="SharedClientState";class Yf{constructor(e,t,s,l){this.user=e,this.batchId=t,this.state=s,this.error=l}static Ws(e,t,s){const l=JSON.parse(s);let c,d=typeof l=="object"&&["pending","acknowledged","rejected"].indexOf(l.state)!==-1&&(l.error===void 0||typeof l.error=="object");return d&&l.error&&(d=typeof l.error.message=="string"&&typeof l.error.code=="string",d&&(c=new xe(l.error.code,l.error.message))),d?new Yf(e,t,l.state,c):(Wt(Sr,`Failed to parse mutation state for ID '${t}': ${s}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Uu{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Ws(e,t){const s=JSON.parse(t);let l,c=typeof s=="object"&&["not-current","current","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return c&&s.error&&(c=typeof s.error.message=="string"&&typeof s.error.code=="string",c&&(l=new xe(s.error.code,s.error.message))),c?new Uu(e,s.state,l):(Wt(Sr,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const s=JSON.parse(t);let l=typeof s=="object"&&s.activeTargetIds instanceof Array,c=Rx();for(let d=0;l&&d<s.activeTargetIds.length;++d)l=XN(s.activeTargetIds[d]),c=c.add(s.activeTargetIds[d]);return l?new Jf(e,c):(Wt(Sr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class $x{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new $x(t.clientId,t.onlineState):(Wt(Sr,`Failed to parse online state: ${e}`),null)}}class Kp{constructor(){this.activeTargetIds=Rx()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ep{constructor(e,t,s,l,c){this.window=e,this.Mi=t,this.persistenceKey=s,this.Js=l,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ct(ze),this.started=!1,this.Xs=[];const d=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.eo=B_(this.persistenceKey,this.Js),this.no=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Kp),this.ro=new RegExp(`^${NT}_${d}_([^_]*)$`),this.io=new RegExp(`^${ET}_${d}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${TT}_${d}_(\\d+)$`),this.oo=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this._o=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const s of e){if(s===this.Js)continue;const l=this.getItem(B_(this.persistenceKey,s));if(l){const c=Jf.Ws(s,l);c&&(this.Zs=this.Zs.insert(c.clientId,c))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const s=this.uo(t);s&&this.co(s)}for(const s of this.Xs)this.Ys(s);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((s,l)=>{l.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,s){this.ho(e,t,s),this.Po(e)}addLocalQueryTarget(e,t=!0){let s="not-current";if(this.isActiveQueryTarget(e)){const l=this.storage.getItem(Zg(this.persistenceKey,e));if(l){const c=Uu.Ws(e,l);c&&(s=c.state)}}return t&&this.To.zs(e),this.ao(),s}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Zg(this.persistenceKey,e))}updateQueryState(e,t,s){this.Io(e,t,s)}handleUserChange(e,t,s){t.forEach((l=>{this.Po(l)})),this.currentUser=e,s.forEach((l=>{this.addPendingMutation(l)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return fe(Sr,"READ",e,t),t}setItem(e,t){fe(Sr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){fe(Sr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(fe(Sr,"EVENT",t.key,t.newValue),t.key===this.eo)return void Wt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const s=this.Ro(t.key);return this.Vo(s,null)}{const s=this.mo(t.key,t.newValue);if(s)return this.Vo(s.clientId,s)}}else if(this.io.test(t.key)){if(t.newValue!==null){const s=this.fo(t.key,t.newValue);if(s)return this.po(s)}}else if(this.so.test(t.key)){if(t.newValue!==null){const s=this.yo(t.key,t.newValue);if(s)return this.wo(s)}}else if(t.key===this.oo){if(t.newValue!==null){const s=this.uo(t.newValue);if(s)return this.co(s)}}else if(t.key===this.no){const s=(function(c){let d=ts.ce;if(c!=null)try{const f=JSON.parse(c);Ce(typeof f=="number",30636,{So:c}),d=f}catch(f){Wt(Sr,"Failed to read sequence number from WebStorage",f)}return d})(t.newValue);s!==ts.ce&&this.sequenceNumberHandler(s)}else if(t.key===this._o){const s=this.bo(t.newValue);await Promise.all(s.map((l=>this.syncEngine.Do(l))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,s){const l=new Yf(this.currentUser,e,t,s),c=q_(this.persistenceKey,this.currentUser,e);this.setItem(c,l.Gs())}Po(e){const t=q_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,s){const l=Zg(this.persistenceKey,e),c=new Uu(e,t,s);this.setItem(l,c.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const s=this.Ro(e);return Jf.Ws(s,t)}fo(e,t){const s=this.io.exec(e),l=Number(s[1]),c=s[2]!==void 0?s[2]:null;return Yf.Ws(new Mn(c),l,t)}yo(e,t){const s=this.so.exec(e),l=Number(s[1]);return Uu.Ws(l,t)}uo(e){return $x.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);fe(Sr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const s=t?this.Zs.insert(e,t):this.Zs.remove(e),l=this.lo(this.Zs),c=this.lo(s),d=[],f=[];return c.forEach((g=>{l.has(g)||d.push(g)})),l.forEach((g=>{c.has(g)||f.push(g)})),this.syncEngine.Fo(d,f).then((()=>{this.Zs=s}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=Rx();return e.forEach(((s,l)=>{t=t.unionWith(l.activeTargetIds)})),t}}class ST{constructor(){this.Mo=new Kp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Kp,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="ConnectivityMonitor";class H_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(F_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(F_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tf=null;function Qp(){return tf===null?tf=(function(){return 268435456+Math.round(2147483648*Math.random())})():tf++,"0x"+tf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="RestConnection",zk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Uk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Lf?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(e,t,s,l,c){const d=Qp(),f=this.zo(e,t.toUriEncodedString());fe(tp,`Sending RPC '${e}' ${d}:`,f,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,c);const{host:x}=new URL(f),w=lc(x);return this.Jo(e,f,g,s,w).then((v=>(fe(tp,`Received RPC '${e}' ${d}: `,v),v)),(v=>{throw Qu(tp,`RPC '${e}' ${d} failed with error: `,v,"url: ",f,"request:",s),v}))}Ho(e,t,s,l,c,d){return this.Go(e,t,s,l,c)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+uc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((l,c)=>e[c]=l)),s&&s.headers.forEach(((l,c)=>e[c]=l))}zo(e,t){const s=zk[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="WebChannelConnection";class qk extends Uk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,l,c){const d=Qp();return new Promise(((f,g)=>{const x=new ON;x.setWithCredentials(!0),x.listenOnce(VN.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case lf.NO_ERROR:const v=x.getResponseJson();fe(Dn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(v)),f(v);break;case lf.TIMEOUT:fe(Dn,`RPC '${e}' ${d} timed out`),g(new xe(te.DEADLINE_EXCEEDED,"Request time out"));break;case lf.HTTP_ERROR:const N=x.getStatus();if(fe(Dn,`RPC '${e}' ${d} failed with status:`,N,"response text:",x.getResponseText()),N>0){let C=x.getResponseJson();Array.isArray(C)&&(C=C[0]);const V=C==null?void 0:C.error;if(V&&V.status&&V.message){const Z=(function(me){const de=me.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(de)>=0?de:te.UNKNOWN})(V.status);g(new xe(Z,V.message))}else g(new xe(te.UNKNOWN,"Server responded with status "+x.getStatus()))}else g(new xe(te.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:d,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{fe(Dn,`RPC '${e}' ${d} completed.`)}}));const w=JSON.stringify(l);fe(Dn,`RPC '${e}' ${d} sending request:`,l),x.send(t,"POST",w,s,15)}))}T_(e,t,s){const l=Qp(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=zN(),f=LN(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(g.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const w=c.join("");fe(Dn,`Creating RPC '${e}' stream ${l}: ${w}`,g);const v=d.createWebChannel(w,g);this.I_(v);let N=!1,C=!1;const V=new Bk({Yo:$=>{C?fe(Dn,`Not sending because RPC '${e}' stream ${l} is closed:`,$):(N||(fe(Dn,`Opening RPC '${e}' stream ${l} transport.`),v.open(),N=!0),fe(Dn,`RPC '${e}' stream ${l} sending:`,$),v.send($))},Zo:()=>v.close()}),Z=($,me,de)=>{$.listen(me,(ue=>{try{de(ue)}catch(ve){setTimeout((()=>{throw ve}),0)}}))};return Z(v,Tu.EventType.OPEN,(()=>{C||(fe(Dn,`RPC '${e}' stream ${l} transport opened.`),V.o_())})),Z(v,Tu.EventType.CLOSE,(()=>{C||(C=!0,fe(Dn,`RPC '${e}' stream ${l} transport closed`),V.a_(),this.E_(v))})),Z(v,Tu.EventType.ERROR,($=>{C||(C=!0,Qu(Dn,`RPC '${e}' stream ${l} transport errored. Name:`,$.name,"Message:",$.message),V.a_(new xe(te.UNAVAILABLE,"The operation could not be completed")))})),Z(v,Tu.EventType.MESSAGE,($=>{var me;if(!C){const de=$.data[0];Ce(!!de,16349);const ue=de,ve=(ue==null?void 0:ue.error)||((me=ue[0])==null?void 0:me.error);if(ve){fe(Dn,`RPC '${e}' stream ${l} received error:`,ve);const ge=ve.status;let F=(function(A){const O=on[A];if(O!==void 0)return UE(O)})(ge),T=ve.message;F===void 0&&(F=te.INTERNAL,T="Unknown error status: "+ge+" with message "+ve.message),C=!0,V.a_(new xe(F,T)),v.close()}else fe(Dn,`RPC '${e}' stream ${l} received:`,de),V.u_(de)}})),Z(f,PN.STAT_EVENT,($=>{$.stat===jp.PROXY?fe(Dn,`RPC '${e}' stream ${l} detected buffering proxy`):$.stat===jp.NOPROXY&&fe(Dn,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(){return typeof window<"u"?window:null}function xf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(r){return new Q6(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,t,s=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,t-s);l>0&&fe("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="PersistentStream";class IT{constructor(e,t,s,l,c,d,f,g){this.Mi=e,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new AT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Wt(t.toString()),Wt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===t&&this.G_(s,l)}),(s=>{e((()=>{const l=new xe(te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(G_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(fe(G_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Fk extends IT{constructor(e,t,s,l,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,l,d),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=J6(this.serializer,e),s=(function(c){if(!("targetChange"in c))return De.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?De.min():d.readTime?Fn(d.readTime):De.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=qp(this.serializer),t.addTarget=(function(c,d){let f;const g=d.target;if(f=zf(g)?{documents:QE(c,g)}:{query:XE(c,g).ft},f.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){f.resumeToken=FE(c,d.resumeToken);const x=Up(c,d.expectedCount);x!==null&&(f.expectedCount=x)}else if(d.snapshotVersion.compareTo(De.min())>0){f.readTime=ec(c,d.snapshotVersion.toTimestamp());const x=Up(c,d.expectedCount);x!==null&&(f.expectedCount=x)}return f})(this.serializer,e);const s=Z6(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=qp(this.serializer),t.removeTarget=e,this.q_(t)}}class Hk extends IT{constructor(e,t,s,l,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=W6(e.writeResults,e.commitTime),s=Fn(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=qp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>Ff(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{}class $k extends Gk{constructor(e,t,s,l){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new xe(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,Bp(t,s),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xe(te.UNKNOWN,c.toString())}))}Ho(e,t,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,f])=>this.connection.Ho(e,Bp(t,s),l,d,f,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new xe(te.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Kk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wt(t),this.aa=!1):fe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl="RemoteStore";class Qk{constructor(e,t,s,l,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{kl(this)&&(fe(jl,"Restarting streams for network reachability change."),await(async function(g){const x=je(g);x.Ea.add(4),await bd(x),x.Ra.set("Unknown"),x.Ea.delete(4),await jm(x)})(this))}))})),this.Ra=new Kk(s,l)}}async function jm(r){if(kl(r))for(const e of r.da)await e(!0)}async function bd(r){for(const e of r.da)await e(!1)}function Am(r,e){const t=je(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Xx(t)?Qx(t):mc(t).O_()&&Kx(t,e))}function nc(r,e){const t=je(r),s=mc(t);t.Ia.delete(e),s.O_()&&CT(t,e),t.Ia.size===0&&(s.O_()?s.L_():kl(t)&&t.Ra.set("Unknown"))}function Kx(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}mc(r).Y_(e)}function CT(r,e){r.Va.Ue(e),mc(r).Z_(e)}function Qx(r){r.Va=new H6({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),mc(r).start(),r.Ra.ua()}function Xx(r){return kl(r)&&!mc(r).x_()&&r.Ia.size>0}function kl(r){return je(r).Ea.size===0}function RT(r){r.Va=void 0}async function Xk(r){r.Ra.set("Online")}async function Yk(r){r.Ia.forEach(((e,t)=>{Kx(r,e)}))}async function Jk(r,e){RT(r),Xx(r)?(r.Ra.ha(e),Qx(r)):r.Ra.set("Unknown")}async function Wk(r,e,t){if(r.Ra.set("Online"),e instanceof qE&&e.state===2&&e.cause)try{await(async function(l,c){const d=c.cause;for(const f of c.targetIds)l.Ia.has(f)&&(await l.remoteSyncer.rejectListen(f,d),l.Ia.delete(f),l.Va.removeTarget(f))})(r,e)}catch(s){fe(jl,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Wf(r,s)}else if(e instanceof gf?r.Va.Ze(e):e instanceof BE?r.Va.st(e):r.Va.tt(e),!t.isEqual(De.min()))try{const s=await bT(r.localStore);t.compareTo(s)>=0&&await(function(c,d){const f=c.Va.Tt(d);return f.targetChanges.forEach(((g,x)=>{if(g.resumeToken.approximateByteSize()>0){const w=c.Ia.get(x);w&&c.Ia.set(x,w.withResumeToken(g.resumeToken,d))}})),f.targetMismatches.forEach(((g,x)=>{const w=c.Ia.get(g);if(!w)return;c.Ia.set(g,w.withResumeToken(Zt.EMPTY_BYTE_STRING,w.snapshotVersion)),CT(c,g);const v=new la(w.target,g,x,w.sequenceNumber);Kx(c,v)})),c.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){fe(jl,"Failed to raise snapshot:",s),await Wf(r,s)}}async function Wf(r,e,t){if(!Ai(e))throw e;r.Ea.add(1),await bd(r),r.Ra.set("Offline"),t||(t=()=>bT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{fe(jl,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await jm(r)}))}function kT(r,e){return e().catch((t=>Wf(r,t,e)))}async function fc(r){const e=je(r),t=Ei(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fl;for(;Zk(e);)try{const l=await Pk(e.localStore,s);if(l===null){e.Ta.length===0&&t.L_();break}s=l.batchId,e9(e,l)}catch(l){await Wf(e,l)}DT(e)&&MT(e)}function Zk(r){return kl(r)&&r.Ta.length<10}function e9(r,e){r.Ta.push(e);const t=Ei(r);t.O_()&&t.X_&&t.ea(e.mutations)}function DT(r){return kl(r)&&!Ei(r).x_()&&r.Ta.length>0}function MT(r){Ei(r).start()}async function t9(r){Ei(r).ra()}async function n9(r){const e=Ei(r);for(const t of r.Ta)e.ea(t.mutations)}async function s9(r,e,t){const s=r.Ta.shift(),l=Ox.from(s,e,t);await kT(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await fc(r)}async function r9(r,e){e&&Ei(r).X_&&await(async function(s,l){if((function(d){return B6(d)&&d!==te.ABORTED})(l.code)){const c=s.Ta.shift();Ei(s).B_(),await kT(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await fc(s)}})(r,e),DT(r)&&MT(r)}async function $_(r,e){const t=je(r);t.asyncQueue.verifyOperationInProgress(),fe(jl,"RemoteStore received new credentials");const s=kl(t);t.Ea.add(3),await bd(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await jm(t)}async function Xp(r,e){const t=je(r);e?(t.Ea.delete(2),await jm(t)):e||(t.Ea.add(2),await bd(t),t.Ra.set("Unknown"))}function mc(r){return r.ma||(r.ma=(function(t,s,l){const c=je(t);return c.sa(),new Fk(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:Xk.bind(null,r),t_:Yk.bind(null,r),r_:Jk.bind(null,r),H_:Wk.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Xx(r)?Qx(r):r.Ra.set("Unknown")):(await r.ma.stop(),RT(r))}))),r.ma}function Ei(r){return r.fa||(r.fa=(function(t,s,l){const c=je(t);return c.sa(),new Hk(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:t9.bind(null,r),r_:r9.bind(null,r),ta:n9.bind(null,r),na:s9.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await fc(r)):(await r.fa.stop(),r.Ta.length>0&&(fe(jl,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,t,s,l,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Zs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,l,c){const d=Date.now()+s,f=new Yx(e,t,d,l,c);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Im(r,e){if(Wt("AsyncQueue",`${e}: ${r}`),Ai(r))return new xe(te.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{static emptySet(e){return new Po(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ne.comparator(t.key,s.key):(t,s)=>Ne.comparator(t.key,s.key),this.keyedMap=Su(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Po)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const l=t.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Po;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(){this.ga=new Ct(Ne.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class sc{constructor(e,t,s,l,c,d,f,g,x){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=x}static fromInitialDocuments(e,t,s,l,c){const d=[];return t.forEach((f=>{d.push({type:0,doc:f})})),new sc(e,t,Po.emptySet(t),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let l=0;l<t.length;l++)if(t[l].type!==s[l].type||!t[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class i9{constructor(){this.queries=Q_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const l=je(t),c=l.queries;l.queries=Q_(),c.forEach(((d,f)=>{for(const g of f.Sa)g.onError(s)}))})(this,new xe(te.ABORTED,"Firestore shutting down"))}}function Q_(){return new ba((r=>TE(r)),bm)}async function Jx(r,e){const t=je(r);let s=3;const l=e.query;let c=t.queries.get(l);c?!c.ba()&&e.Da()&&(s=2):(c=new a9,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await t.onListen(l,!0);break;case 1:c.wa=await t.onListen(l,!1);break;case 2:await t.onFirstRemoteStoreListen(l)}}catch(d){const f=Im(d,`Initialization of query '${jo(e.query)}' failed`);return void e.onError(f)}t.queries.set(l,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Zx(t)}async function Wx(r,e){const t=je(r),s=e.query;let l=3;const c=t.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function l9(r,e){const t=je(r);let s=!1;for(const l of e){const c=l.query,d=t.queries.get(c);if(d){for(const f of d.Sa)f.Fa(l)&&(s=!0);d.wa=l}}s&&Zx(t)}function o9(r,e,t){const s=je(r),l=s.queries.get(e);if(l)for(const c of l.Sa)c.onError(t);s.queries.delete(e)}function Zx(r){r.Ca.forEach((e=>{e.next()}))}var Yp,X_;(X_=Yp||(Yp={})).Ma="default",X_.Cache="cache";class ey{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new sc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=sc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Yp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e){this.key=e}}class VT{constructor(e){this.key=e}}class PT{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=$e(),this.mutatedKeys=$e(),this.eu=jE(e),this.tu=new Po(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new K_,l=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,d=l,f=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,x=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((w,v)=>{const N=l.get(w),C=pd(this.query,v)?v:null,V=!!N&&this.mutatedKeys.has(N.key),Z=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let $=!1;N&&C?N.data.isEqual(C.data)?V!==Z&&(s.track({type:3,doc:C}),$=!0):this.su(N,C)||(s.track({type:2,doc:C}),$=!0,(g&&this.eu(C,g)>0||x&&this.eu(C,x)<0)&&(f=!0)):!N&&C?(s.track({type:0,doc:C}),$=!0):N&&!C&&(s.track({type:1,doc:N}),$=!0,(g||x)&&(f=!0)),$&&(C?(d=d.add(C),c=Z?c.add(w):c.delete(w)):(d=d.delete(w),c=c.delete(w)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const w=this.query.limitType==="F"?d.last():d.first();d=d.delete(w.key),c=c.delete(w.key),s.track({type:1,doc:w})}return{tu:d,iu:s,Cs:f,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((w,v)=>(function(C,V){const Z=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:$})}};return Z(C)-Z(V)})(w.type,v.type)||this.eu(w.doc,v.doc))),this.ou(s),l=l??!1;const f=t&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,x=g!==this.Za;return this.Za=g,d.length!==0||x?{snapshot:new sc(this.query,e.tu,c,d,e.mutatedKeys,g===0,x,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new K_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=$e(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new VT(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new OT(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=$e();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return sc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const gc="SyncEngine";class c9{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class u9{constructor(e){this.key=e,this.hu=!1}}class d9{constructor(e,t,s,l,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new ba((f=>TE(f)),bm),this.Iu=new Map,this.Eu=new Set,this.du=new Ct(Ne.comparator),this.Au=new Map,this.Ru=new Bx,this.Vu={},this.mu=new Map,this.fu=Sl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function h9(r,e,t=!0){const s=Cm(r);let l;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await LT(s,e,t,!0),l}async function f9(r,e){const t=Cm(r);await LT(t,e,!0,!1)}async function LT(r,e,t,s){const l=await Qf(r.localStore,ys(e)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,t);let f;return s&&(f=await ty(r,e,c,d==="current",l.resumeToken)),r.isPrimaryClient&&t&&Am(r.remoteStore,l),f}async function ty(r,e,t,s,l){r.pu=(v,N,C)=>(async function(Z,$,me,de){let ue=$.view.ru(me);ue.Cs&&(ue=await Xf(Z.localStore,$.query,!1).then((({documents:T})=>$.view.ru(T,ue))));const ve=de&&de.targetChanges.get($.targetId),ge=de&&de.targetMismatches.get($.targetId)!=null,F=$.view.applyChanges(ue,Z.isPrimaryClient,ve,ge);return Jp(Z,$.targetId,F.au),F.snapshot})(r,v,N,C);const c=await Xf(r.localStore,e,!0),d=new PT(e,c.Qs),f=d.ru(c.documents),g=yd.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",l),x=d.applyChanges(f,r.isPrimaryClient,g);Jp(r,t,x.au);const w=new c9(e,t,d);return r.Tu.set(e,w),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),x.snapshot}async function m9(r,e,t){const s=je(r),l=s.Tu.get(e),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((d=>!bm(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await tc(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),t&&nc(s.remoteStore,l.targetId),rc(s,l.targetId)})).catch(ji)):(rc(s,l.targetId),await tc(s.localStore,l.targetId,!0))}async function g9(r,e){const t=je(r),s=t.Tu.get(e),l=t.Iu.get(s.targetId);t.isPrimaryClient&&l.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),nc(t.remoteStore,s.targetId))}async function p9(r,e,t){const s=ay(r);try{const l=await(function(d,f){const g=je(d),x=vt.now(),w=f.reduce(((C,V)=>C.add(V.key)),$e());let v,N;return g.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let V=xs(),Z=$e();return g.Ns.getEntries(C,w).next(($=>{V=$,V.forEach(((me,de)=>{de.isValidDocument()||(Z=Z.add(me))}))})).next((()=>g.localDocuments.getOverlayedDocuments(C,V))).next(($=>{v=$;const me=[];for(const de of f){const ue=z6(de,v.get(de.key).overlayedDocument);ue!=null&&me.push(new va(de.key,ue,gE(ue.value.mapValue),Pn.exists(!0)))}return g.mutationQueue.addMutationBatch(C,x,me,f)})).next(($=>{N=$;const me=$.applyToLocalDocumentSet(v,Z);return g.documentOverlayCache.saveOverlays(C,$.batchId,me)}))})).then((()=>({batchId:N.batchId,changes:IE(v)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),(function(d,f,g){let x=d.Vu[d.currentUser.toKey()];x||(x=new Ct(ze)),x=x.insert(f,g),d.Vu[d.currentUser.toKey()]=x})(s,l.batchId,t),await Ci(s,l.changes),await fc(s.remoteStore)}catch(l){const c=Im(l,"Failed to persist write");t.reject(c)}}async function zT(r,e){const t=je(r);try{const s=await Ok(t.localStore,e);e.targetChanges.forEach(((l,c)=>{const d=t.Au.get(c);d&&(Ce(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?Ce(d.hu,14607):l.removedDocuments.size>0&&(Ce(d.hu,42227),d.hu=!1))})),await Ci(t,s,e)}catch(s){await ji(s)}}function Y_(r,e,t){const s=je(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const l=[];s.Tu.forEach(((c,d)=>{const f=d.view.va(e);f.snapshot&&l.push(f.snapshot)})),(function(d,f){const g=je(d);g.onlineState=f;let x=!1;g.queries.forEach(((w,v)=>{for(const N of v.Sa)N.va(f)&&(x=!0)})),x&&Zx(g)})(s.eventManager,e),l.length&&s.Pu.H_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function x9(r,e,t){const s=je(r);s.sharedClientState.updateQueryState(e,"rejected",t);const l=s.Au.get(e),c=l&&l.key;if(c){let d=new Ct(Ne.comparator);d=d.insert(c,$t.newNoDocument(c,De.min()));const f=$e().add(c),g=new xd(De.min(),new Map,new Ct(ze),d,f);await zT(s,g),s.du=s.du.remove(c),s.Au.delete(e),ry(s)}else await tc(s.localStore,e,!1).then((()=>rc(s,e,t))).catch(ji)}async function y9(r,e){const t=je(r),s=e.batch.batchId;try{const l=await Mk(t.localStore,e);sy(t,s,null),ny(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ci(t,l)}catch(l){await ji(l)}}async function b9(r,e,t){const s=je(r);try{const l=await(function(d,f){const g=je(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let w;return g.mutationQueue.lookupMutationBatch(x,f).next((v=>(Ce(v!==null,37113),w=v.keys(),g.mutationQueue.removeMutationBatch(x,v)))).next((()=>g.mutationQueue.performConsistencyCheck(x))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(x,w,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,w))).next((()=>g.localDocuments.getDocuments(x,w)))}))})(s.localStore,e);sy(s,e,t),ny(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ci(s,l)}catch(l){await ji(l)}}function ny(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function sy(r,e,t){const s=je(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(e);c&&(t?c.reject(t):c.resolve(),l=l.remove(e)),s.Vu[s.currentUser.toKey()]=l}}function rc(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||UT(r,s)}))}function UT(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(nc(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),ry(r))}function Jp(r,e,t){for(const s of t)s instanceof OT?(r.Ru.addReference(s.key,e),v9(r,s)):s instanceof VT?(fe(gc,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||UT(r,s.key)):Te(19791,{wu:s})}function v9(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(fe(gc,"New document in limbo: "+t),r.Eu.add(s),ry(r))}function ry(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Ne(mt.fromString(e)),s=r.fu.next();r.Au.set(s,new u9(t)),r.du=r.du.insert(t,s),Am(r.remoteStore,new la(ys(gd(t.path)),s,"TargetPurposeLimboResolution",ts.ce))}}async function Ci(r,e,t){const s=je(r),l=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{d.push(s.pu(g,e,t).then((x=>{var w;if((x||t)&&s.isPrimaryClient){const v=x?!x.fromCache:(w=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:w.current;s.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(x){l.push(x);const v=Hx.As(g.targetId,x);c.push(v)}})))})),await Promise.all(d),s.Pu.H_(l),await(async function(g,x){const w=je(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>H.forEach(x,(N=>H.forEach(N.Es,(C=>w.persistence.referenceDelegate.addReference(v,N.targetId,C))).next((()=>H.forEach(N.ds,(C=>w.persistence.referenceDelegate.removeReference(v,N.targetId,C)))))))))}catch(v){if(!Ai(v))throw v;fe(Gx,"Failed to update sequence numbers: "+v)}for(const v of x){const N=v.targetId;if(!v.fromCache){const C=w.Ms.get(N),V=C.snapshotVersion,Z=C.withLastLimboFreeSnapshotVersion(V);w.Ms=w.Ms.insert(N,Z)}}})(s.localStore,c))}async function w9(r,e){const t=je(r);if(!t.currentUser.isEqual(e)){fe(gc,"User change. New user:",e.toKey());const s=await yT(t.localStore,e);t.currentUser=e,(function(c,d){c.mu.forEach((f=>{f.forEach((g=>{g.reject(new xe(te.CANCELLED,d))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ci(t,s.Ls)}}function _9(r,e){const t=je(r),s=t.Au.get(e);if(s&&s.hu)return $e().add(s.key);{let l=$e();const c=t.Iu.get(e);if(!c)return l;for(const d of c){const f=t.Tu.get(d);l=l.unionWith(f.view.nu)}return l}}async function N9(r,e){const t=je(r),s=await Xf(t.localStore,e.query,!0),l=e.view.cu(s);return t.isPrimaryClient&&Jp(t,e.targetId,l.au),l}async function E9(r,e){const t=je(r);return wT(t.localStore,e).then((s=>Ci(t,s)))}async function T9(r,e,t,s){const l=je(r),c=await(function(f,g){const x=je(f),w=je(x.mutationQueue);return x.persistence.runTransaction("Lookup mutation documents","readonly",(v=>w.er(v,g).next((N=>N?x.localDocuments.getDocuments(v,N):H.resolve(null)))))})(l.localStore,e);c!==null?(t==="pending"?await fc(l.remoteStore):t==="acknowledged"||t==="rejected"?(sy(l,e,s||null),ny(l,e),(function(f,g){je(je(f).mutationQueue).ir(g)})(l.localStore,e)):Te(6720,"Unknown batchState",{Su:t}),await Ci(l,c)):fe(gc,"Cannot apply mutation batch with id: "+e)}async function S9(r,e){const t=je(r);if(Cm(t),ay(t),e===!0&&t.gu!==!0){const s=t.sharedClientState.getAllActiveQueryTargets(),l=await J_(t,s.toArray());t.gu=!0,await Xp(t.remoteStore,!0);for(const c of l)Am(t.remoteStore,c)}else if(e===!1&&t.gu!==!1){const s=[];let l=Promise.resolve();t.Iu.forEach(((c,d)=>{t.sharedClientState.isLocalQueryTarget(d)?s.push(d):l=l.then((()=>(rc(t,d),tc(t.localStore,d,!0)))),nc(t.remoteStore,d)})),await l,await J_(t,s),(function(d){const f=je(d);f.Au.forEach(((g,x)=>{nc(f.remoteStore,x)})),f.Ru.Jr(),f.Au=new Map,f.du=new Ct(Ne.comparator)})(t),t.gu=!1,await Xp(t.remoteStore,!1)}}async function J_(r,e,t){const s=je(r),l=[],c=[];for(const d of e){let f;const g=s.Iu.get(d);if(g&&g.length!==0){f=await Qf(s.localStore,ys(g[0]));for(const x of g){const w=s.Tu.get(x),v=await N9(s,w);v.snapshot&&c.push(v.snapshot)}}else{const x=await vT(s.localStore,d);f=await Qf(s.localStore,x),await ty(s,BT(x),d,!1,f.resumeToken)}l.push(f)}return s.Pu.H_(c),l}function BT(r){return NE(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function j9(r){return(function(t){return je(je(t).persistence).Ts()})(je(r).localStore)}async function A9(r,e,t,s){const l=je(r);if(l.gu)return void fe(gc,"Ignoring unexpected query state notification.");const c=l.Iu.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const d=await wT(l.localStore,SE(c[0])),f=xd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Zt.EMPTY_BYTE_STRING);await Ci(l,d,f);break}case"rejected":await tc(l.localStore,e,!0),rc(l,e,s);break;default:Te(64155,t)}}async function I9(r,e,t){const s=Cm(r);if(s.gu){for(const l of e){if(s.Iu.has(l)&&s.sharedClientState.isActiveQueryTarget(l)){fe(gc,"Adding an already active target "+l);continue}const c=await vT(s.localStore,l),d=await Qf(s.localStore,c);await ty(s,BT(c),d.targetId,!1,d.resumeToken),Am(s.remoteStore,d)}for(const l of t)s.Iu.has(l)&&await tc(s.localStore,l,!1).then((()=>{nc(s.remoteStore,l),rc(s,l)})).catch(ji)}}function Cm(r){const e=je(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=zT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=x9.bind(null,e),e.Pu.H_=l9.bind(null,e.eventManager),e.Pu.yu=o9.bind(null,e.eventManager),e}function ay(r){const e=je(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=y9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=b9.bind(null,e),e}class ad{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return xT(this.persistence,new pT,e.initialUser,this.serializer)}Cu(e){return new qx(Tm.mi,this.serializer)}Du(e){return new ST}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ad.provider={build:()=>new ad};class C9 extends ad{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ce(this.persistence.referenceDelegate instanceof Kf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new uT(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new qx((s=>Kf.mi(s,t)),this.serializer)}}class qT extends ad{constructor(e,t,s){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await ay(this.xu.syncEngine),await fc(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return xT(this.persistence,new pT,e.initialUser,this.serializer)}Fu(e,t){const s=this.persistence.referenceDelegate.garbageCollector;return new uT(s,e.asyncQueue,t)}Mu(e,t){const s=new FR(t,this.persistence);return new qR(e.asyncQueue,s)}Cu(e){const t=gT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new Fx(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,jT(),xf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new ST}}class R9 extends qT{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof ep&&(this.sharedClientState.syncEngine={Co:T9.bind(null,t),vo:A9.bind(null,t),Fo:I9.bind(null,t),Ts:j9.bind(null,t),Do:E9.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async s=>{await S9(this.xu.syncEngine,s),this.gcScheduler&&(s&&!this.gcScheduler.started?this.gcScheduler.start():s||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(s&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():s||this.indexBackfillerScheduler.stop())}))}Du(e){const t=jT();if(!ep.v(t))throw new xe(te.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=gT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ep(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class id{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Y_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=w9.bind(null,this.syncEngine),await Xp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new i9})()}createDatastore(e){const t=Sm(e.databaseInfo.databaseId),s=(function(c){return new qk(c)})(e.databaseInfo);return(function(c,d,f,g){return new $k(c,d,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,l,c,d,f){return new Qk(s,l,c,d,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>Y_(this.syncEngine,t,0)),(function(){return H_.v()?new H_:new Lk})())}createSyncEngine(e,t){return(function(l,c,d,f,g,x,w){const v=new d9(l,c,d,f,g,x);return w&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(l){const c=je(l);fe(jl,"RemoteStore shutting down."),c.Ea.add(5),await bd(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}id.provider={build:()=>new id};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Wt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti="FirestoreClient";class k9{constructor(e,t,s,l,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=l,this.user=Mn.UNAUTHENTICATED,this.clientId=vx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{fe(Ti,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(fe(Ti,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Im(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function np(r,e){r.asyncQueue.verifyOperationInProgress(),fe(Ti,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await yT(e.localStore,l),s=l)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function W_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await FT(r);fe(Ti,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>$_(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>$_(e.remoteStore,l))),r._onlineComponents=e}async function FT(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){fe(Ti,"Using user provided OfflineComponentProvider");try{await np(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(l){return l.name==="FirebaseError"?l.code===te.FAILED_PRECONDITION||l.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(t))throw t;Qu("Error using user provided cache. Falling back to memory cache: "+t),await np(r,new ad)}}else fe(Ti,"Using default OfflineComponentProvider"),await np(r,new C9(void 0));return r._offlineComponents}async function HT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(fe(Ti,"Using user provided OnlineComponentProvider"),await W_(r,r._uninitializedComponentsProvider._online)):(fe(Ti,"Using default OnlineComponentProvider"),await W_(r,new id))),r._onlineComponents}function D9(r){return FT(r).then((e=>e.localStore))}function M9(r){return HT(r).then((e=>e.syncEngine))}async function Zf(r){const e=await HT(r),t=e.eventManager;return t.onListen=h9.bind(null,e.syncEngine),t.onUnlisten=m9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=f9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=g9.bind(null,e.syncEngine),t}function O9(r,e,t={}){const s=new Zs;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,f,g,x){const w=new iy({next:N=>{w.Nu(),d.enqueueAndForget((()=>Wx(c,v)));const C=N.docs.has(f);!C&&N.fromCache?x.reject(new xe(te.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&N.fromCache&&g&&g.source==="server"?x.reject(new xe(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(N)},error:N=>x.reject(N)}),v=new ey(gd(f.path),w,{includeMetadataChanges:!0,qa:!0});return Jx(c,v)})(await Zf(r),r.asyncQueue,e,t,s))),s.promise}function V9(r,e){const t=new Zs;return r.asyncQueue.enqueueAndForget((async()=>(async function(l,c,d){try{const f=await Xf(l,c,!0),g=new PT(c,f.Qs),x=g.ru(f.documents),w=g.applyChanges(x,!1);d.resolve(w.snapshot)}catch(f){const g=Im(f,`Failed to execute query '${c} against cache`);d.reject(g)}})(await D9(r),e,t))),t.promise}function GT(r,e,t={}){const s=new Zs;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,f,g,x){const w=new iy({next:N=>{w.Nu(),d.enqueueAndForget((()=>Wx(c,v))),N.fromCache&&g.source==="server"?x.reject(new xe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(N)},error:N=>x.reject(N)}),v=new ey(f,w,{includeMetadataChanges:!0,qa:!0});return Jx(c,v)})(await Zf(r),r.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9="firestore.googleapis.com",e2=!0;class t2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new xe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=P9,this.ssl=e2}else this.host=e.host,this.ssl=e.ssl??e2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=aT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cT)throw new xe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$T(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new xe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new xe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new xe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ly{constructor(e,t,s,l){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new t2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new t2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new IR;switch(s.type){case"firstParty":return new kR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new xe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Z_.get(t);s&&(fe("ComponentProvider","Removing Datastore"),Z_.delete(t),s.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new rr(this.firestore,e,this._query)}}class Kt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(hd(t,Kt._jsonSchema))return new Kt(e,s||null,new Ne(mt.fromString(t.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:un("string",Kt._jsonSchemaVersion),referencePath:un("string")};class yi extends rr{constructor(e,t,s){super(e,t,gd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new Ne(e))}withConverter(e){return new yi(this.firestore,e,this._path)}}function at(r,e,...t){if(r=Qt(r),qN("collection","path",e),r instanceof ly){const s=mt.fromString(e,...t);return Gw(s),new yi(r,null,s)}{if(!(r instanceof Kt||r instanceof yi))throw new xe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(mt.fromString(e,...t));return Gw(s),new yi(r.firestore,null,s)}}function Gn(r,e,...t){if(r=Qt(r),arguments.length===1&&(e=vx.newId()),qN("doc","path",e),r instanceof ly){const s=mt.fromString(e,...t);return Hw(s),new Kt(r,null,new Ne(s))}{if(!(r instanceof Kt||r instanceof yi))throw new xe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(mt.fromString(e,...t));return Hw(s),new Kt(r.firestore,r instanceof yi?r.converter:null,new Ne(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="AsyncQueue";class s2{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new AT(this,"async_queue_retry"),this._c=()=>{const s=xf();s&&fe(n2,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=xf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=xf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Zs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ai(e))throw e;fe(n2,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Wt("INTERNAL UNHANDLED ERROR: ",r2(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const l=Yx.createAndSchedule(this,e,t,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&Te(47125,{Pc:r2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function r2(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(r){return(function(t,s){if(typeof t!="object"||t===null)return!1;const l=t;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1})(r,["next","error","complete"])}class nr extends ly{constructor(e,t,s,l){super(e,t,s,l),this.type="firestore",this._queue=new s2,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new s2(e),this._firestoreClient=void 0,await e}}}function L9(r,e,t){t||(t=Lf);const s=Rl(r,"firestore");if(s.isInitialized(t)){const l=s.getImmediate({identifier:t}),c=s.getOptions(t);if(wi(c,e))return l;throw new xe(te.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new xe(te.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cT)throw new xe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&lc(e.host)&&B2(e.host),s.initialize({options:e,instanceIdentifier:t})}function pc(r){if(r._terminated)throw new xe(te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||z9(r),r._firestoreClient}function z9(r){var s,l,c;const e=r._freezeSettings(),t=(function(f,g,x,w){return new x6(f,g,x,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,$T(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new k9(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ps(Zt.fromBase64String(e))}catch(t){throw new xe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ps(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ps._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hd(e,Ps._jsonSchema))return Ps.fromBase64String(e.bytes)}}Ps._jsonSchemaVersion="firestore/bytes/1.0",Ps._jsonSchema={type:un("string",Ps._jsonSchemaVersion),bytes:un("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new xe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:kr._jsonSchemaVersion}}static fromJSON(e){if(hd(e,kr._jsonSchema))return new kr(e.latitude,e.longitude)}}kr._jsonSchemaVersion="firestore/geoPoint/1.0",kr._jsonSchema={type:un("string",kr._jsonSchemaVersion),latitude:un("number"),longitude:un("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Dr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hd(e,Dr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Dr(e.vectorValues);throw new xe(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Dr._jsonSchemaVersion="firestore/vectorValue/1.0",Dr._jsonSchema={type:un("string",Dr._jsonSchemaVersion),vectorValues:un("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9=/^__.*__$/;class B9{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new va(e,this.data,this.fieldMask,t,this.fieldTransforms):new hc(e,this.data,t,this.fieldTransforms)}}class KT{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new va(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function QT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:r})}}class oy{constructor(e,t,s,l,c,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new oy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var l;const t=(l=this.path)==null?void 0:l.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var l;const t=(l=this.path)==null?void 0:l.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return em(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(QT(this.Ac)&&U9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class q9{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Sm(e)}Cc(e,t,s,l=!1){return new oy({Ac:e,methodName:t,Dc:s,path:Ft.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function km(r){const e=r._freezeSettings(),t=Sm(r._databaseId);return new q9(r._databaseId,!!e.ignoreUndefinedProperties,t)}function XT(r,e,t,s,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,e,t,l);dy("Data must be an object, but it was:",d,s);const f=YT(s,d);let g,x;if(c.merge)g=new ns(d.fieldMask),x=d.fieldTransforms;else if(c.mergeFields){const w=[];for(const v of c.mergeFields){const N=Wp(e,v,t);if(!d.contains(N))throw new xe(te.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);WT(w,N)||w.push(N)}g=new ns(w),x=d.fieldTransforms.filter((v=>g.covers(v.field)))}else g=null,x=d.fieldTransforms;return new B9(new Vn(f),g,x)}class Dm extends vd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dm}}class cy extends vd{_toFieldTransform(e){return new Dx(e.path,new Yo)}isEqual(e){return e instanceof cy}}class uy extends vd{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Zo(e.serializer,kE(e.serializer,this.Fc));return new Dx(e.path,t)}isEqual(e){return e instanceof uy&&this.Fc===e.Fc}}function F9(r,e,t,s){const l=r.Cc(1,e,t);dy("Data must be an object, but it was:",l,s);const c=[],d=Vn.empty();Ii(s,((g,x)=>{const w=hy(e,g,t);x=Qt(x);const v=l.yc(w);if(x instanceof Dm)c.push(w);else{const N=wd(x,v);N!=null&&(c.push(w),d.set(w,N))}}));const f=new ns(c);return new KT(d,f,l.fieldTransforms)}function H9(r,e,t,s,l,c){const d=r.Cc(1,e,t),f=[Wp(e,s,t)],g=[l];if(c.length%2!=0)throw new xe(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<c.length;N+=2)f.push(Wp(e,c[N])),g.push(c[N+1]);const x=[],w=Vn.empty();for(let N=f.length-1;N>=0;--N)if(!WT(x,f[N])){const C=f[N];let V=g[N];V=Qt(V);const Z=d.yc(C);if(V instanceof Dm)x.push(C);else{const $=wd(V,Z);$!=null&&(x.push(C),w.set(C,$))}}const v=new ns(x);return new KT(w,v,d.fieldTransforms)}function G9(r,e,t,s=!1){return wd(t,r.Cc(s?4:3,e))}function wd(r,e){if(JT(r=Qt(r)))return dy("Unsupported field value:",e,r),YT(r,e);if(r instanceof vd)return(function(s,l){if(!QT(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let d=0;for(const f of s){let g=wd(f,l.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,e)}return(function(s,l){if((s=Qt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return kE(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=vt.fromDate(s);return{timestampValue:ec(l.serializer,c)}}if(s instanceof vt){const c=new vt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ec(l.serializer,c)}}if(s instanceof kr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ps)return{bytesValue:FE(l.serializer,s._byteString)};if(s instanceof Kt){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Lx(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Dr)return(function(d,f){return{mapValue:{fields:{[Ax]:{stringValue:Ix},[$o]:{arrayValue:{values:d.toArray().map((x=>{if(typeof x!="number")throw f.Sc("VectorValues must only contain numeric values.");return kx(f.serializer,x)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${dm(s)}`)})(r,e)}function YT(r,e){const t={};return iE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ii(r,((s,l)=>{const c=wd(l,e.mc(s));c!=null&&(t[s]=c)})),{mapValue:{fields:t}}}function JT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof vt||r instanceof kr||r instanceof Ps||r instanceof Kt||r instanceof vd||r instanceof Dr)}function dy(r,e,t){if(!JT(t)||!FN(t)){const s=dm(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function Wp(r,e,t){if((e=Qt(e))instanceof Rm)return e._internalPath;if(typeof e=="string")return hy(r,e);throw em("Field path arguments must be of type string or ",r,!1,void 0,t)}const $9=new RegExp("[~\\*/\\[\\]]");function hy(r,e,t){if(e.search($9)>=0)throw em(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Rm(...e.split("."))._internalPath}catch{throw em(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function em(r,e,t,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${l}`),g+=")"),new xe(te.INVALID_ARGUMENT,f+r+g)}function WT(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,t,s,l,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new K9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Mm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class K9 extends ZT{data(){return super.data()}}function Mm(r,e){return typeof e=="string"?hy(r,e):e instanceof Rm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new xe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fy{}class my extends fy{}function cn(r,e,...t){let s=[];e instanceof fy&&s.push(e),s=s.concat(t),(function(c){const d=c.filter((g=>g instanceof gy)).length,f=c.filter((g=>g instanceof Om)).length;if(d>1||d>0&&f>0)throw new xe(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class Om extends my{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Om(e,t,s)}_apply(e){const t=this._parse(e);return nS(e._query,t),new rr(e.firestore,e.converter,zp(e._query,t))}_parse(e){const t=km(e.firestore);return(function(c,d,f,g,x,w,v){let N;if(x.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new xe(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){l2(v,w);const V=[];for(const Z of v)V.push(i2(g,c,Z));N={arrayValue:{values:V}}}else N=i2(g,c,v)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||l2(v,w),N=G9(f,d,v,w==="in"||w==="not-in");return tt.create(x,w,N)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Rn(r,e,t){const s=e,l=Mm("where",r);return Om._create(l,s,t)}class gy extends fy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new gy(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:wt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(l,c){let d=l;const f=c.getFlattenedFilters();for(const g of f)nS(d,g),d=zp(d,g)})(e._query,t),new rr(e.firestore,e.converter,zp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class py extends my{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new py(e,t)}_apply(e){const t=(function(l,c,d){if(l.startAt!==null)throw new xe(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new xe(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rd(c,d)})(e._query,this._field,this._direction);return new rr(e.firestore,e.converter,(function(l,c){const d=l.explicitOrderBy.concat([c]);return new dc(l.path,l.collectionGroup,d,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,t))}}function _d(r,e="asc"){const t=e,s=Mm("orderBy",r);return py._create(s,t)}class xy extends my{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new xy(e,t,s)}_apply(e){return new rr(e.firestore,e.converter,Bf(e._query,this._limit,this._limitType))}}function tS(r){return zR("limit",r),xy._create("limit",r,"F")}function i2(r,e,t){if(typeof(t=Qt(t))=="string"){if(t==="")throw new xe(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!EE(e)&&t.indexOf("/")!==-1)throw new xe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(mt.fromString(t));if(!Ne.isDocumentKey(s))throw new xe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return nd(r,new Ne(s))}if(t instanceof Kt)return nd(r,t._key);throw new xe(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dm(t)}.`)}function l2(r,e){if(!Array.isArray(r)||r.length===0)throw new xe(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nS(r,e){const t=(function(l,c){for(const d of l)for(const f of d.getFlattenedFilters())if(c.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new xe(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Q9{convertValue(e,t="none"){switch(_i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ii(e,((l,c)=>{s[l]=this.convertValue(c,t)})),s}convertVectorValue(e){var s,l,c;const t=(c=(l=(s=e.fields)==null?void 0:s[$o].arrayValue)==null?void 0:l.values)==null?void 0:c.map((d=>zt(d.doubleValue)));return new Dr(t)}convertGeoPoint(e){return new kr(zt(e.latitude),zt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=xm(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ed(e));default:return null}}convertTimestamp(e){const t=ga(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=mt.fromString(e);Ce(ZE(s),9688,{name:e});const l=new _l(s.get(1),s.get(3)),c=new Ne(s.popFirst(5));return l.isEqual(t)||Wt(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class Iu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pl extends ZT{constructor(e,t,s,l,c,d){super(e,t,s,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new yf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Mm("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=pl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}pl._jsonSchemaVersion="firestore/documentSnapshot/1.0",pl._jsonSchema={type:un("string",pl._jsonSchemaVersion),bundleSource:un("string","DocumentSnapshot"),bundleName:un("string"),bundle:un("string")};class yf extends pl{data(e={}){return super.data(e)}}class da{constructor(e,t,s,l){this._firestore=e,this._userDataWriter=t,this._snapshot=l,this.metadata=new Iu(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new yf(this._firestore,this._userDataWriter,s.key,s,new Iu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((f=>{const g=new yf(l._firestore,l._userDataWriter,f.doc.key,f.doc,new Iu(l._snapshot.mutatedKeys.has(f.doc.key),l._snapshot.fromCache),l.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((f=>c||f.type!==3)).map((f=>{const g=new yf(l._firestore,l._userDataWriter,f.doc.key,f.doc,new Iu(l._snapshot.mutatedKeys.has(f.doc.key),l._snapshot.fromCache),l.query.converter);let x=-1,w=-1;return f.type!==0&&(x=d.indexOf(f.doc.key),d=d.delete(f.doc.key)),f.type!==1&&(d=d.add(f.doc),w=d.indexOf(f.doc.key)),{type:X9(f.type),doc:g,oldIndex:x,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=da._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function X9(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(r){r=Cn(r,Kt);const e=Cn(r.firestore,nr);return O9(pc(e),r._key).then((t=>iS(e,r,t)))}da._jsonSchemaVersion="firestore/querySnapshot/1.0",da._jsonSchema={type:un("string",da._jsonSchemaVersion),bundleSource:un("string","QuerySnapshot"),bundleName:un("string"),bundle:un("string")};class Nd extends Q9{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ps(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,t)}}function wn(r){r=Cn(r,rr);const e=Cn(r.firestore,nr),t=pc(e),s=new Nd(e);return eS(r._query),GT(t,r._query).then((l=>new da(e,s,r,l)))}function Y9(r){r=Cn(r,rr);const e=Cn(r.firestore,nr),t=pc(e),s=new Nd(e);return V9(t,r._query).then((l=>new da(e,s,r,l)))}function J9(r){r=Cn(r,rr);const e=Cn(r.firestore,nr),t=pc(e),s=new Nd(e);return GT(t,r._query,{source:"server"}).then((l=>new da(e,s,r,l)))}function yy(r,e,t){r=Cn(r,Kt);const s=Cn(r.firestore,nr),l=sS(r.converter,e,t);return Pm(s,[XT(km(s),"setDoc",r._key,l,r.converter!==null,t).toMutation(r._key,Pn.none())])}function Ed(r,e,t,...s){r=Cn(r,Kt);const l=Cn(r.firestore,nr),c=km(l);let d;return d=typeof(e=Qt(e))=="string"||e instanceof Rm?H9(c,"updateDoc",r._key,e,t,s):F9(c,"updateDoc",r._key,e),Pm(l,[d.toMutation(r._key,Pn.exists(!0))])}function Vm(r){return Pm(Cn(r.firestore,nr),[new _m(r._key,Pn.none())])}function as(r,e){const t=Cn(r.firestore,nr),s=Gn(r),l=sS(r.converter,e);return Pm(t,[XT(km(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,Pn.exists(!1))]).then((()=>s))}function aS(r,...e){var g,x,w;r=Qt(r);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||a2(e[s])||(t=e[s++]);const l={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(a2(e[s])){const v=e[s];e[s]=(g=v.next)==null?void 0:g.bind(v),e[s+1]=(x=v.error)==null?void 0:x.bind(v),e[s+2]=(w=v.complete)==null?void 0:w.bind(v)}let c,d,f;if(r instanceof Kt)d=Cn(r.firestore,nr),f=gd(r._key.path),c={next:v=>{e[s]&&e[s](iS(d,r,v))},error:e[s+1],complete:e[s+2]};else{const v=Cn(r,rr);d=Cn(v.firestore,nr),f=v._query;const N=new Nd(d);c={next:C=>{e[s]&&e[s](new da(d,N,v,C))},error:e[s+1],complete:e[s+2]},eS(r._query)}return(function(N,C,V,Z){const $=new iy(Z),me=new ey(C,$,V);return N.asyncQueue.enqueueAndForget((async()=>Jx(await Zf(N),me))),()=>{$.Nu(),N.asyncQueue.enqueueAndForget((async()=>Wx(await Zf(N),me)))}})(pc(d),f,l,c)}function Pm(r,e){return(function(s,l){const c=new Zs;return s.asyncQueue.enqueueAndForget((async()=>p9(await M9(s),l,c))),c.promise})(pc(r),e)}function iS(r,e,t){const s=t.docs.get(e._key),l=new Nd(r);return new pl(r,l,e._key,s,new Iu(t.hasPendingWrites,t.fromCache),e.converter)}class W9{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=n8(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function Z9(r){return new W9(r)}class e8{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=id.provider,this._offlineComponentProvider={build:t=>new qT(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class t8{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=id.provider,this._offlineComponentProvider={build:t=>new R9(t,e==null?void 0:e.cacheSizeBytes)}}}function n8(r){return new e8(r==null?void 0:r.forceOwnership)}function s8(){return new t8}function zn(){return new cy("serverTimestamp")}function Zp(r){return new uy("increment",r)}(function(e,t=!0){(function(l){uc=l})(oc),Mr(new er("firestore",((s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),f=new nr(new CR(s.getProvider("auth-internal")),new DR(d,s.getProvider("app-check-internal")),(function(x,w){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new xe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _l(x.options.projectId,w)})(d,l),d);return c={useFetchStreams:t,...c},f._setSettings(c),f}),"PUBLIC").setMultipleInstances(!0)),Ls(Uw,Bw,e),Ls(Uw,Bw,"esm2020")})();const lS="@firebase/installations",by="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=1e4,cS=`w:${by}`,uS="FIS_v2",r8="https://firebaseinstallations.googleapis.com/v1",a8=3600*1e3,i8="installations",l8="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Al=new Cl(i8,l8,o8);function dS(r){return r instanceof sr&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS({projectId:r}){return`${r8}/projects/${r}/installations`}function fS(r){return{token:r.token,requestStatus:2,expiresIn:u8(r.expiresIn),creationTime:Date.now()}}async function mS(r,e){const s=(await e.json()).error;return Al.create("request-failed",{requestName:r,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function gS({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function c8(r,{refreshToken:e}){const t=gS(r);return t.append("Authorization",d8(e)),t}async function pS(r){const e=await r();return e.status>=500&&e.status<600?r():e}function u8(r){return Number(r.replace("s","000"))}function d8(r){return`${uS} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h8({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const s=hS(r),l=gS(r),c=e.getImmediate({optional:!0});if(c){const x=await c.getHeartbeatsHeader();x&&l.append("x-firebase-client",x)}const d={fid:t,authVersion:uS,appId:r.appId,sdkVersion:cS},f={method:"POST",headers:l,body:JSON.stringify(d)},g=await pS(()=>fetch(s,f));if(g.ok){const x=await g.json();return{fid:x.fid||t,registrationStatus:2,refreshToken:x.refreshToken,authToken:fS(x.authToken)}}else throw await mS("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f8(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m8=/^[cdef][\w-]{21}$/,ex="";function g8(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=p8(r);return m8.test(t)?t:ex}catch{return ex}}function p8(r){return f8(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=new Map;function bS(r,e){const t=Lm(r);vS(t,e),x8(t,e)}function vS(r,e){const t=yS.get(r);if(t)for(const s of t)s(e)}function x8(r,e){const t=y8();t&&t.postMessage({key:r,fid:e}),b8()}let hl=null;function y8(){return!hl&&"BroadcastChannel"in self&&(hl=new BroadcastChannel("[Firebase] FID Change"),hl.onmessage=r=>{vS(r.data.key,r.data.fid)}),hl}function b8(){yS.size===0&&hl&&(hl.close(),hl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v8="firebase-installations-database",w8=1,Il="firebase-installations-store";let sp=null;function vy(){return sp||(sp=X2(v8,w8,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Il)}}})),sp}async function tm(r,e){const t=Lm(r),l=(await vy()).transaction(Il,"readwrite"),c=l.objectStore(Il),d=await c.get(t);return await c.put(e,t),await l.done,(!d||d.fid!==e.fid)&&bS(r,e.fid),e}async function wS(r){const e=Lm(r),s=(await vy()).transaction(Il,"readwrite");await s.objectStore(Il).delete(e),await s.done}async function zm(r,e){const t=Lm(r),l=(await vy()).transaction(Il,"readwrite"),c=l.objectStore(Il),d=await c.get(t),f=e(d);return f===void 0?await c.delete(t):await c.put(f,t),await l.done,f&&(!d||d.fid!==f.fid)&&bS(r,f.fid),f}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wy(r){let e;const t=await zm(r.appConfig,s=>{const l=_8(s),c=N8(r,l);return e=c.registrationPromise,c.installationEntry});return t.fid===ex?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function _8(r){const e=r||{fid:g8(),registrationStatus:0};return _S(e)}function N8(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const l=Promise.reject(Al.create("app-offline"));return{installationEntry:e,registrationPromise:l}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=E8(r,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:T8(r)}:{installationEntry:e}}async function E8(r,e){try{const t=await h8(r,e);return tm(r.appConfig,t)}catch(t){throw dS(t)&&t.customData.serverCode===409?await wS(r.appConfig):await tm(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function T8(r){let e=await o2(r.appConfig);for(;e.registrationStatus===1;)await xS(100),e=await o2(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await wy(r);return s||t}return e}function o2(r){return zm(r,e=>{if(!e)throw Al.create("installation-not-found");return _S(e)})}function _S(r){return S8(r)?{fid:r.fid,registrationStatus:0}:r}function S8(r){return r.registrationStatus===1&&r.registrationTime+oS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j8({appConfig:r,heartbeatServiceProvider:e},t){const s=A8(r,t),l=c8(r,t),c=e.getImmediate({optional:!0});if(c){const x=await c.getHeartbeatsHeader();x&&l.append("x-firebase-client",x)}const d={installation:{sdkVersion:cS,appId:r.appId}},f={method:"POST",headers:l,body:JSON.stringify(d)},g=await pS(()=>fetch(s,f));if(g.ok){const x=await g.json();return fS(x)}else throw await mS("Generate Auth Token",g)}function A8(r,{fid:e}){return`${hS(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _y(r,e=!1){let t;const s=await zm(r.appConfig,c=>{if(!NS(c))throw Al.create("not-registered");const d=c.authToken;if(!e&&R8(d))return c;if(d.requestStatus===1)return t=I8(r,e),c;{if(!navigator.onLine)throw Al.create("app-offline");const f=D8(c);return t=C8(r,f),f}});return t?await t:s.authToken}async function I8(r,e){let t=await c2(r.appConfig);for(;t.authToken.requestStatus===1;)await xS(100),t=await c2(r.appConfig);const s=t.authToken;return s.requestStatus===0?_y(r,e):s}function c2(r){return zm(r,e=>{if(!NS(e))throw Al.create("not-registered");const t=e.authToken;return M8(t)?{...e,authToken:{requestStatus:0}}:e})}async function C8(r,e){try{const t=await j8(r,e),s={...e,authToken:t};return await tm(r.appConfig,s),t}catch(t){if(dS(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await wS(r.appConfig);else{const s={...e,authToken:{requestStatus:0}};await tm(r.appConfig,s)}throw t}}function NS(r){return r!==void 0&&r.registrationStatus===2}function R8(r){return r.requestStatus===2&&!k8(r)}function k8(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+a8}function D8(r){const e={requestStatus:1,requestTime:Date.now()};return{...r,authToken:e}}function M8(r){return r.requestStatus===1&&r.requestTime+oS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O8(r){const e=r,{installationEntry:t,registrationPromise:s}=await wy(e);return s?s.catch(console.error):_y(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V8(r,e=!1){const t=r;return await P8(t),(await _y(t,e)).token}async function P8(r){const{registrationPromise:e}=await wy(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L8(r){if(!r||!r.options)throw rp("App Configuration");if(!r.name)throw rp("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw rp(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function rp(r){return Al.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="installations",z8="installations-internal",U8=r=>{const e=r.getProvider("app").getImmediate(),t=L8(e),s=Rl(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},B8=r=>{const e=r.getProvider("app").getImmediate(),t=Rl(e,ES).getImmediate();return{getId:()=>O8(t),getToken:l=>V8(t,l)}};function q8(){Mr(new er(ES,U8,"PUBLIC")),Mr(new er(z8,B8,"PRIVATE"))}q8();Ls(lS,by);Ls(lS,by,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="analytics",F8="firebase_id",H8="origin",G8=60*1e3,$8="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ny="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new lm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K8={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},bs=new Cl("analytics","Analytics",K8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q8(r){if(!r.startsWith(Ny)){const e=bs.create("invalid-gtag-resource",{gtagURL:r});return Hn.warn(e.message),""}return r}function TS(r){return Promise.all(r.map(e=>e.catch(t=>t)))}function X8(r,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(r,e)),t}function Y8(r,e){const t=X8("firebase-js-sdk-policy",{createScriptURL:Q8}),s=document.createElement("script"),l=`${Ny}?l=${r}&id=${e}`;s.src=t?t==null?void 0:t.createScriptURL(l):l,s.async=!0,document.head.appendChild(s)}function J8(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function W8(r,e,t,s,l,c){const d=s[l];try{if(d)await e[d];else{const g=(await TS(t)).find(x=>x.measurementId===l);g&&await e[g.appId]}}catch(f){Hn.error(f)}r("config",l,c)}async function Z8(r,e,t,s,l){try{let c=[];if(l&&l.send_to){let d=l.send_to;Array.isArray(d)||(d=[d]);const f=await TS(t);for(const g of d){const x=f.find(v=>v.measurementId===g),w=x&&e[x.appId];if(w)c.push(w);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),r("event",s,l||{})}catch(c){Hn.error(c)}}function eD(r,e,t,s){async function l(c,...d){try{if(c==="event"){const[f,g]=d;await Z8(r,e,t,f,g)}else if(c==="config"){const[f,g]=d;await W8(r,e,t,s,f,g)}else if(c==="consent"){const[f,g]=d;r("consent",f,g)}else if(c==="get"){const[f,g,x]=d;r("get",f,g,x)}else if(c==="set"){const[f]=d;r("set",f)}else r(c,...d)}catch(f){Hn.error(f)}}return l}function tD(r,e,t,s,l){let c=function(...d){window[s].push(arguments)};return window[l]&&typeof window[l]=="function"&&(c=window[l]),window[l]=eD(c,r,e,t),{gtagCore:c,wrappedGtag:window[l]}}function nD(r){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Ny)&&t.src.includes(r))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD=30,rD=1e3;class aD{constructor(e={},t=rD){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const SS=new aD;function iD(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function lD(r){var d;const{appId:e,apiKey:t}=r,s={method:"GET",headers:iD(t)},l=$8.replace("{app-id}",e),c=await fetch(l,s);if(c.status!==200&&c.status!==304){let f="";try{const g=await c.json();(d=g.error)!=null&&d.message&&(f=g.error.message)}catch{}throw bs.create("config-fetch-failed",{httpStatus:c.status,responseMessage:f})}return c.json()}async function oD(r,e=SS,t){const{appId:s,apiKey:l,measurementId:c}=r.options;if(!s)throw bs.create("no-app-id");if(!l){if(c)return{measurementId:c,appId:s};throw bs.create("no-api-key")}const d=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new dD;return setTimeout(async()=>{f.abort()},G8),jS({appId:s,apiKey:l,measurementId:c},d,f,e)}async function jS(r,{throttleEndTimeMillis:e,backoffCount:t},s,l=SS){var f;const{appId:c,measurementId:d}=r;try{await cD(s,e)}catch(g){if(d)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:c,measurementId:d};throw g}try{const g=await lD(r);return l.deleteThrottleMetadata(c),g}catch(g){const x=g;if(!uD(x)){if(l.deleteThrottleMetadata(c),d)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${x==null?void 0:x.message}]`),{appId:c,measurementId:d};throw g}const w=Number((f=x==null?void 0:x.customData)==null?void 0:f.httpStatus)===503?dw(t,l.intervalMillis,sD):dw(t,l.intervalMillis),v={throttleEndTimeMillis:Date.now()+w,backoffCount:t+1};return l.setThrottleMetadata(c,v),Hn.debug(`Calling attemptFetch again in ${w} millis`),jS(r,v,s,l)}}function cD(r,e){return new Promise((t,s)=>{const l=Math.max(e-Date.now(),0),c=setTimeout(t,l);r.addEventListener(()=>{clearTimeout(c),s(bs.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function uD(r){if(!(r instanceof sr)||!r.customData)return!1;const e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}class dD{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function hD(r,e,t,s,l){if(l&&l.global){r("event",t,s);return}else{const c=await e,d={...s,send_to:c};r("event",t,d)}}async function fD(r,e,t,s){if(s&&s.global){const l={};for(const c of Object.keys(t))l[`user_properties.${c}`]=t[c];return r("set",l),Promise.resolve()}else{const l=await e;r("config",l,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mD(){if(cx())try{await $2()}catch(r){return Hn.warn(bs.create("indexeddb-unavailable",{errorInfo:r==null?void 0:r.toString()}).message),!1}else return Hn.warn(bs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function gD(r,e,t,s,l,c,d){const f=oD(r);f.then(N=>{t[N.measurementId]=N.appId,r.options.measurementId&&N.measurementId!==r.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>Hn.error(N)),e.push(f);const g=mD().then(N=>{if(N)return s.getId()}),[x,w]=await Promise.all([f,g]);nD(c)||Y8(c,x.measurementId),l("js",new Date);const v=(d==null?void 0:d.config)??{};return v[H8]="firebase",v.update=!0,w!=null&&(v[F8]=w),l("config",x.measurementId,v),x.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e){this.app=e}_delete(){return delete Lo[this.app.options.appId],Promise.resolve()}}let Lo={},u2=[];const d2={};let ap="dataLayer",xD="gtag",h2,Ey,f2=!1;function yD(){const r=[];if(F2()&&r.push("This is a browser extension environment."),FA()||r.push("Cookies are not available."),r.length>0){const e=r.map((s,l)=>`(${l+1}) ${s}`).join(" "),t=bs.create("invalid-analytics-context",{errorInfo:e});Hn.warn(t.message)}}function bD(r,e,t){yD();const s=r.options.appId;if(!s)throw bs.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw bs.create("no-api-key");if(Lo[s]!=null)throw bs.create("already-exists",{id:s});if(!f2){J8(ap);const{wrappedGtag:c,gtagCore:d}=tD(Lo,u2,d2,ap,xD);Ey=c,h2=d,f2=!0}return Lo[s]=gD(r,u2,d2,e,h2,ap,t),new pD(r)}function vD(r=J2()){r=Qt(r);const e=Rl(r,nm);return e.isInitialized()?e.getImmediate():wD(r)}function wD(r,e={}){const t=Rl(r,nm);if(t.isInitialized()){const l=t.getImmediate();if(wi(e,t.getOptions()))return l;throw bs.create("already-initialized")}return t.initialize({options:e})}function _D(r,e,t){r=Qt(r),fD(Ey,Lo[r.app.options.appId],e,t).catch(s=>Hn.error(s))}function ND(r,e,t,s){r=Qt(r),hD(Ey,Lo[r.app.options.appId],e,t,s).catch(l=>Hn.error(l))}const m2="@firebase/analytics",g2="0.10.19";function ED(){Mr(new er(nm,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("installations-internal").getImmediate();return bD(s,l,t)},"PUBLIC")),Mr(new er("analytics-internal",r,"PRIVATE")),Ls(m2,g2),Ls(m2,g2,"esm2020");function r(e){try{const t=e.getProvider(nm).getImmediate();return{logEvent:(s,l,c)=>ND(t,s,l,c),setUserProperties:(s,l)=>_D(t,s,l)}}catch(t){throw bs.create("interop-component-reg-failed",{reason:t})}}}ED();const TD={apiKey:"AIzaSyBFr--na-wJGHMdev7vUhPufAJHlyP3GNQ",authDomain:"school-9d3db.firebaseapp.com",projectId:"school-9d3db",storageBucket:"school-9d3db.firebasestorage.app",messagingSenderId:"429673694272",appId:"1:429673694272:web:43390c4fdfa5bce4744ba5",measurementId:"G-8YSDYV9VBN"},Ty=Y2(TD),Bu=SR(Ty),Pe=L9(Ty,{localCache:Z9({tabManager:s8()})});vD(Ty);const AS=P.createContext(void 0),SD=({children:r})=>{const[e,t]=P.useState(null),[s,l]=P.useState(!0),c=(g,x)=>{const w=`teacher-${x.split("@")[0]}`;let v="https://img.freepik.com/free-vector/teacher-standing-near-blackboard_23-2147517173.jpg";g.includes("")?v="https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P":g.includes("")&&(v="https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj"),t({uid:w,email:x,displayName:g,role:"teacher",avatar:v,gender:"male"}),localStorage.setItem("isTeacher","true"),localStorage.setItem("teacherName",g),localStorage.setItem("teacherEmail",x)},d=async()=>{try{(e==null?void 0:e.role)==="teacher"?(localStorage.removeItem("isTeacher"),localStorage.removeItem("teacherName"),localStorage.removeItem("teacherEmail"),t(null)):await gC(Bu)}catch(g){console.error("Logout error",g)}},f=async g=>{if(e)try{let x={...g};if(g.firstName!==void 0||g.lastName!==void 0){const w=g.firstName!==void 0?g.firstName:e.firstName||"",v=g.lastName!==void 0?g.lastName:e.lastName||"";x.displayName=`${w} ${v}`.trim()}if(t(w=>w?{...w,...x}:null),e.role!=="teacher"){const w=Gn(Pe,"users",e.uid);await yy(w,x,{merge:!0})}}catch(x){throw console.error("Error updating profile:",x),x}};return P.useEffect(()=>{const g=localStorage.getItem("isTeacher")==="true";if(g){const w=localStorage.getItem("teacherName")||"",v=localStorage.getItem("teacherEmail")||"teacher@etqan.edu";c(w,v),l(!1);return}const x=mC(Bu,async w=>{if(w)try{const v=Gn(Pe,"users",w.uid),N=await rS(v);if(N.exists()){const C=N.data();(w.email==="q@gmail.com"||w.email==="yazan22@gmail.com")&&(C.totalXP=25e3,C.quizzesCompleted=500),t({uid:w.uid,email:w.email||"",displayName:C.displayName||`${C.firstName||""} ${C.lastName||""}`.trim()||"Student",firstName:C.firstName,lastName:C.lastName,age:C.age,role:C.role,grade:C.grade,phone:C.phone,address:C.address,school:C.school,gender:C.gender,avatar:C.avatar,profileBackground:C.profileBackground,genderChanged:C.genderChanged})}else t({uid:w.uid,email:w.email||"",displayName:"User",role:"student"})}catch(v){console.error("Error fetching user profile:",v)}else g||t(null);l(!1)});return()=>x()},[]),i.jsx(AS.Provider,{value:{user:e,loading:s,logout:d,setTeacherSession:c,updateUserProfile:f},children:!s&&r})},Us=()=>{const r=P.useContext(AS);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},ip=[{id:"teacher-yazan",name:".   "},{id:"teacher-majd",name:".   "}],jD=({onLoginClick:r,onNavigate:e,onLogoutClick:t})=>{var ce;const[s,l]=P.useState(!1),[c,d]=P.useState(!1),{user:f}=Us(),[g,x]=P.useState(!1),[w,v]=P.useState([]),[N,C]=P.useState(0),V=P.useRef(null),[Z,$]=P.useState(!1),[me,de]=P.useState(""),[ue,ve]=P.useState("teacher-yazan"),[ge,F]=P.useState(!1),[T,j]=P.useState(!1);P.useEffect(()=>{const oe=()=>{d(window.scrollY>10)};return window.addEventListener("scroll",oe),()=>window.removeEventListener("scroll",oe)},[]),P.useEffect(()=>{const oe=B=>{V.current&&!V.current.contains(B.target)&&x(!1)};return document.addEventListener("mousedown",oe),()=>document.removeEventListener("mousedown",oe)},[]),P.useEffect(()=>{if(!f){v([]);return}const oe=cn(at(Pe,"notifications"),_d("createdAt","desc"),tS(50)),B=aS(oe,ie=>{const Y=[];let se=0,Ee=[];try{Ee=JSON.parse(localStorage.getItem(`viewed_notifs_${f.uid}`)||"[]")}catch(R){console.error("Error parsing viewed notifications",R)}ie.forEach(R=>{const z=R.data();if(z.recipientId==="all"||z.recipientId===f.uid){let U=!1;z.recipientId==="all"?U=Ee.includes(R.id):U=z.read===!0,U||se++,Y.push({id:R.id,...z,read:U,createdAt:z.createdAt})}}),v(Y),C(se)});return()=>B()},[f]);const A=async()=>{if(x(!g),!g&&N>0){const oe=w,B=oe.filter(Y=>Y.recipientId==="all").map(Y=>Y.id);if(B.length>0)try{const Y=JSON.parse(localStorage.getItem(`viewed_notifs_${f==null?void 0:f.uid}`)||"[]"),se=[...new Set([...Y,...B])];localStorage.setItem(`viewed_notifs_${f==null?void 0:f.uid}`,JSON.stringify(se))}catch(Y){console.error("Error updating local storage for notifications",Y)}oe.filter(Y=>Y.recipientId!=="all"&&!Y.read).forEach(async Y=>{try{const se=Gn(Pe,"notifications",Y.id);await Ed(se,{read:!0})}catch(se){console.error("Error marking personal notification read:",se)}}),C(0),v(Y=>Y.map(se=>({...se,read:!0})))}},O=async()=>{if(me.trim()){F(!0);try{const oe=ip.find(B=>B.id===ue);await as(at(Pe,"contact_messages"),{studentId:f==null?void 0:f.uid,studentName:(f==null?void 0:f.displayName)||"",studentEmail:f==null?void 0:f.email,message:me,teacherId:ue,teacherName:oe==null?void 0:oe.name,createdAt:zn(),read:!1}),await as(at(Pe,"notifications"),{recipientId:ue,title:`   ${(f==null?void 0:f.displayName)||""}`,message:me.substring(0,100)+(me.length>100?"...":""),type:"message",senderName:f==null?void 0:f.displayName,senderId:f==null?void 0:f.uid,createdAt:zn(),read:!1}),alert("    !"),de(""),$(!1),j(!1)}catch(oe){console.error(oe),alert("   ")}finally{F(!1)}}},M=oe=>{switch(oe){case"quiz":return i.jsx(ss,{className:"w-4 h-4 text-yellow-400"});case"file":return i.jsx(rs,{className:"w-4 h-4 text-blue-400"});case"explanation":return i.jsx(Ef,{className:"w-4 h-4 text-purple-400"});case"message":return i.jsx(jr,{className:"w-4 h-4 text-emerald-400"});default:return i.jsx(Kh,{className:"w-4 h-4 text-gray-400"})}},k=oe=>{if(!oe)return"";const B=oe.toDate?oe.toDate():new Date(oe.seconds*1e3);return isNaN(B.getTime())?"":B.toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(",","")},I=oe=>"cursor-pointer px-4 py-2 rounded-xl transition-all font-bold text-sm flex items-center gap-2 text-gray-300 hover:text-white hover:bg-gray-800";return i.jsxs(i.Fragment,{children:[i.jsxs("nav",{className:`fixed w-full z-50 transition-all duration-300 ${c?"bg-gray-950/90 backdrop-blur-md border-b border-white/5 py-3 shadow-xl":"bg-transparent py-5"}`,children:[i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e("HOME"),children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/13x8Gorb7y4H2qcQ1LVJtHY9-RoUhxg2z",alt:"Logo",className:"w-10 h-10 rounded-full object-cover border-2 border-emerald-500/50"}),i.jsx("span",{className:"text-2xl font-black text-white tracking-tight",children:""})]}),i.jsxs("div",{className:"hidden md:flex items-center bg-gray-900/50 backdrop-blur-sm p-1.5 rounded-2xl border border-white/5",children:[i.jsxs("button",{onClick:()=>e("HOME"),className:I(),children:[i.jsx(_f,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("QUIZZES"),className:I(),children:[i.jsx(ss,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("LESSONS"),className:I(),children:[i.jsx(rs,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("LESSONS_EXPLANATIONS"),className:I(),children:[i.jsx(qu,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>e("CONTACT_TEACHER"),className:I(),children:[i.jsx(Hu,{className:"w-4 h-4"}),"  "]})]}),i.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[f&&i.jsxs("div",{className:"relative",ref:V,children:[i.jsxs("button",{onClick:A,className:"p-2.5 rounded-xl bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white transition-all relative border border-gray-700 flex items-center justify-center group","aria-label":"Notifications",children:[i.jsx(Kh,{className:`w-5 h-5 ${N>0?"animate-swing":""}`}),N>0&&i.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[9px] font-bold flex items-center justify-center rounded-full border-2 border-gray-900 animate-pulse",children:N>9?"+9":N})]}),g&&i.jsxs("div",{className:"absolute top-full left-0 md:left-auto md:right-0 mt-3 w-80 bg-gray-900 border border-gray-700 rounded-2xl shadow-2xl overflow-hidden animate-fade-in-up origin-top-right z-[60]",children:[i.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-gray-900/50 backdrop-blur-sm",children:[i.jsxs("h3",{className:"font-bold text-white text-sm flex items-center gap-2",children:[i.jsx(Kh,{className:"w-4 h-4 text-emerald-400"}),""]}),f.role==="student"&&i.jsxs("button",{onClick:()=>{x(!1),$(!0)},className:"text-xs bg-emerald-900/30 text-emerald-400 px-3 py-1.5 rounded-lg hover:bg-emerald-900/50 transition-colors font-bold border border-emerald-500/30 flex items-center gap-1",children:[i.jsx(jr,{className:"w-3 h-3"})," "]})]}),i.jsx("div",{className:"max-h-80 overflow-y-auto custom-scrollbar",children:w.length===0?i.jsxs("div",{className:"p-12 text-center text-gray-500 text-sm flex flex-col items-center",children:[i.jsx(Kh,{className:"w-10 h-10 mb-3 opacity-20"}),i.jsx("p",{children:"   "})]}):i.jsx("div",{className:"divide-y divide-gray-800",children:w.map(oe=>i.jsxs("div",{className:`p-4 hover:bg-gray-800/50 transition-colors relative ${oe.read?"":"bg-emerald-900/10"}`,children:[!oe.read&&i.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-emerald-500 rounded-full"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"mt-1 shrink-0 bg-gray-800 p-1.5 w-8 h-8 flex items-center justify-center rounded-full border border-gray-700",children:M(oe.type)}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:`text-sm font-bold mb-1 ${oe.read?"text-gray-400":"text-white"}`,children:oe.title}),i.jsx("p",{className:"text-xs text-gray-500 leading-relaxed line-clamp-2",children:oe.message}),i.jsx("span",{className:"text-[10px] text-gray-600 mt-2 block flex items-center gap-1",children:k(oe.createdAt)})]})]})]},oe.id))})})]})]}),f?i.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[i.jsxs("div",{className:"relative group",children:[i.jsxs("button",{onClick:()=>e("PROFILE"),className:"flex items-center gap-2 bg-gray-800 hover:bg-gray-700 text-white pr-1 pl-4 py-1 rounded-full transition-all border border-gray-700 hover:border-gray-600",children:[f.avatar?i.jsx("img",{src:f.avatar,alt:"Avatar",className:"w-8 h-8 rounded-full object-cover border border-gray-600"}):i.jsx("div",{className:"w-8 h-8 bg-emerald-600 rounded-full flex items-center justify-center text-xs font-bold",children:f.displayName.charAt(0)}),i.jsx("span",{className:"text-sm font-bold max-w-[100px] truncate",children:f.displayName})]}),i.jsxs("div",{className:"absolute top-full mt-2 left-1/2 -translate-x-1/2 w-max bg-gray-900 text-emerald-400 text-[10px] font-bold px-3 py-1.5 rounded-lg border border-gray-700 opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none shadow-xl z-50",children:["   ",i.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 border-4 border-transparent border-b-gray-900"})]})]}),i.jsx("button",{onClick:t,className:"p-2 bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white rounded-full transition-all border border-red-500/20",title:" ",children:i.jsx(Nf,{className:"w-5 h-5"})})]}):i.jsxs("button",{onClick:r,className:"hidden md:flex bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-2.5 rounded-xl font-bold transition-all shadow-lg shadow-emerald-900/20 items-center gap-2",children:[i.jsx(pp,{className:"w-4 h-4"}),""]}),i.jsx("button",{onClick:()=>l(!s),className:"md:hidden p-2.5 text-gray-300 hover:text-white bg-gray-800 rounded-xl hover:bg-gray-700 transition-colors border border-gray-700",children:s?i.jsx(ps,{className:"w-6 h-6"}):i.jsx(V5,{className:"w-6 h-6"})})]})]})}),s&&i.jsx("div",{className:"md:hidden absolute top-full left-0 w-full bg-gray-950 border-b border-white/5 shadow-2xl animate-fade-in-up h-[calc(100vh-70px)] overflow-y-auto",children:i.jsxs("div",{className:"px-4 py-6 space-y-3",children:[f&&i.jsxs("div",{className:"mb-2",children:[i.jsx("p",{className:"text-[10px] text-emerald-500 font-bold px-4 mb-1",children:"   "}),i.jsxs("button",{onClick:()=>{e("PROFILE"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-emerald-400 hover:bg-emerald-900/20 font-bold transition-colors border border-emerald-900/30",children:[i.jsx($4,{className:"w-5 h-5"})," ",f.displayName]})]}),i.jsxs("button",{onClick:()=>{e("HOME"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(_f,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("TEACHER_CV"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(ox,{className:"w-5 h-5"}),"   "]}),i.jsxs("button",{onClick:()=>{e("QUIZZES"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(ss,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("LESSONS"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(rs,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("LESSONS_EXPLANATIONS"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(qu,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>{e("CONTACT_TEACHER"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(Hu,{className:"w-5 h-5"}),"  "]}),i.jsxs("button",{onClick:()=>{e("PLATFORM_DEFINITION"),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-300 hover:bg-gray-800 hover:text-white font-bold transition-colors",children:[i.jsx(y5,{className:"w-5 h-5"}),"  "]}),i.jsx("div",{className:"border-t border-gray-800 my-2 pt-2",children:f?i.jsxs("button",{onClick:()=>{t(),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-400 hover:bg-red-900/20 font-bold transition-colors",children:[i.jsx(Nf,{className:"w-5 h-5"}),"  "]}):i.jsxs("button",{onClick:()=>{r(),l(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl bg-emerald-600 text-white font-bold justify-center shadow-lg",children:[i.jsx(pp,{className:"w-5 h-5"}),"  "]})})]})})]}),Z&&i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>{$(!1),j(!1)}}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-md relative shadow-2xl p-6 animate-fade-in-up border border-white/10",children:[i.jsx("button",{onClick:()=>{$(!1),j(!1)},className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-white",children:i.jsx(ps,{className:"w-5 h-5"})}),T?i.jsxs("div",{className:"text-center py-6 animate-fade-in",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-400 border border-emerald-500/20",children:i.jsx(oa,{className:"w-8 h-8"})}),i.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),i.jsxs("p",{className:"text-gray-400 text-sm mb-8",children:["        ",i.jsx("span",{className:"text-emerald-400 font-bold",children:(ce=ip.find(oe=>oe.id===ue))==null?void 0:ce.name}),""]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:O,disabled:ge,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all shadow-lg shadow-emerald-900/20",children:ge?i.jsx(bt,{className:"w-5 h-5 animate-spin"}):" "}),i.jsx("button",{onClick:()=>j(!1),disabled:ge,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-all border border-gray-700",children:""})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-400 border border-emerald-500/20",children:i.jsx(jr,{className:"w-8 h-8"})}),i.jsx("h3",{className:"text-xl font-black text-white",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"     "})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-2",children:" "}),i.jsx("div",{className:"space-y-2",children:ip.map(oe=>i.jsxs("div",{onClick:()=>ve(oe.id),className:`p-3 rounded-xl border-2 cursor-pointer transition-all flex items-center justify-between ${ue===oe.id?"border-emerald-500 bg-emerald-900/20":"border-gray-700 bg-gray-800 hover:bg-gray-750"}`,children:[i.jsx("span",{className:`text-sm font-bold ${ue===oe.id?"text-emerald-400":"text-gray-300"}`,children:oe.name}),ue===oe.id&&i.jsx(ha,{className:"w-4 h-4 text-emerald-500"})]},oe.id))})]}),i.jsx("textarea",{value:me,onChange:oe=>de(oe.target.value),placeholder:"",className:"w-full h-32 bg-gray-800 border border-gray-700 rounded-xl p-4 text-white outline-none focus:border-emerald-500 mb-4 resize-none focus:ring-2 focus:ring-emerald-500/20 transition-all"}),i.jsxs("button",{onClick:()=>{me.trim()&&j(!0)},disabled:!me.trim(),className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-emerald-900/30",children:[i.jsx(ca,{className:"w-5 h-5"})," "]})]})]})]})]})},AD=({onStartQuiz:r,onLoginClick:e,onNavigate:t})=>{const{user:s}=Us(),[l,c]=P.useState(!1),d=()=>{c(!0),setTimeout(()=>c(!1),3e3)},f=()=>{s?t("QUIZZES"):d()},g=()=>{s?t("LESSONS"):d()},x=()=>{t("LESSONS_EXPLANATIONS")},w=()=>{t("CONTACT_TEACHER")};return i.jsxs("section",{className:"relative w-full min-h-screen flex flex-col items-center bg-transparent overflow-hidden animate-fade-in transition-colors duration-300 pt-32 md:pt-48",children:[l&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center pointer-events-none px-4",children:i.jsxs("div",{className:"bg-red-900/90 border border-red-800 shadow-xl rounded-xl p-4 flex items-center gap-3 relative w-full max-w-md animate-fade-in-up pointer-events-auto backdrop-blur-md",children:[i.jsx("div",{className:"bg-red-800 p-2 rounded-full shrink-0",children:i.jsx(vf,{className:"w-6 h-6 text-red-200"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-bold text-white text-sm",children:"  "}),i.jsx("p",{className:"text-gray-300 text-xs mt-1",children:"        ."})]}),i.jsx("button",{onClick:()=>c(!1),className:"absolute top-2 left-2 text-gray-300 hover:text-white",children:i.jsx(ps,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>{c(!1),e()},className:"mr-auto bg-red-600 text-white text-xs font-bold px-3 py-1.5 rounded-lg hover:bg-red-700 transition-colors shrink-0",children:""})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 w-full relative z-10 flex flex-col items-center text-center",children:[i.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-black text-white leading-[1.2] lg:leading-[1.15] mb-6 drop-shadow-lg",children:["  ",i.jsx("br",{}),i.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300 inline-block relative pb-2",children:[" ",i.jsx("svg",{className:"absolute w-full h-3 -bottom-1 right-0 text-emerald-900/50 -z-10",viewBox:"0 0 100 10",preserveAspectRatio:"none",children:i.jsx("path",{d:"M0 5 Q 50 10 100 5",stroke:"currentColor",strokeWidth:"8",fill:"none"})})]}),i.jsx("br",{}),"  "]}),i.jsxs("p",{className:"text-lg md:text-xl text-gray-300 leading-relaxed max-w-2xl mx-auto mb-10",children:["      ",i.jsx("span",{className:"text-emerald-400 font-black text-2xl px-1 relative inline-block",children:"   "}),"."]}),i.jsxs("div",{className:"flex flex-col w-full max-w-md gap-3 justify-center",children:[i.jsxs("button",{onClick:f,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(ss,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:" "})]}),i.jsx(ra,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsxs("button",{onClick:x,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(qu,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:" "})]}),i.jsx(ra,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsxs("button",{onClick:g,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(rs,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:" "})]}),i.jsx(ra,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsxs("button",{onClick:w,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-emerald-900/50 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(Hu,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:"  "})]}),i.jsx(ra,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]}),i.jsx("div",{className:"w-full mt-2",children:s?i.jsxs("button",{onClick:()=>t("PROFILE"),className:"w-full bg-gray-800/80 backdrop-blur-sm border-2 border-emerald-900 text-emerald-400 hover:bg-emerald-900/20 text-base font-bold py-3 px-5 rounded-xl transition-all flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:[i.jsx(es,{className:"w-5 h-5"})," "]}):i.jsxs("button",{onClick:e,className:"w-full bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white text-base font-bold py-3 px-5 rounded-xl shadow-lg hover:shadow-orange-500/40 transition-all flex items-center justify-between group transform hover:-translate-y-1 border border-orange-400/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:i.jsx(pp,{className:"w-5 h-5 text-white"})}),i.jsx("span",{children:"  "})]}),i.jsx(ra,{className:"w-5 h-5 opacity-70 group-hover:opacity-100 group-hover:-translate-x-1 transition-all"})]})})]})]})]})},lp=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),op=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),ID=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M12 2C6.48 2 2 6.03 2 11c0 2.87 1.56 5.47 4 7.1V22l3.57-1.96c.78.22 1.6.34 2.43.34 5.52 0 10-4.03 10-9s-4.48-9-10-9zm1.06 12.07l-2.6-2.78-5.07 2.78 5.58-5.93 2.62 2.78 5.05-2.78-5.58 5.93z"})}),_u=[{id:1,name:" ",text:"      . ",platform:"whatsapp",time:"10:30 "},{id:2,name:" ",text:"     . ",platform:"messenger",time:"11:15 "},{id:3,name:" ",text:"    .",platform:"telegram",time:"09:45 "},{id:4,name:" ",text:"      .",platform:"whatsapp",time:"02:20 "},{id:5,name:" ",text:"        .",platform:"messenger",time:"04:10 "},{id:6,name:" ",text:"       . ",platform:"telegram",time:"08:00 "},{id:7,name:"  ",text:"        . ",platform:"whatsapp",time:"01:30 "},{id:8,name:" ",text:"       .",platform:"messenger",time:"06:45 "},{id:9,name:" ",text:"      .",platform:"telegram",time:"03:15 "},{id:10,name:" ",text:"      ! ",platform:"whatsapp",time:"12:00 "},{id:11,name:" ",text:"   .  . ",platform:"messenger",time:"07:30 "},{id:12,name:"  ",text:"       .",platform:"telegram",time:"10:10 "},{id:13,name:" ",text:"     .",platform:"whatsapp",time:"05:50 "},{id:14,name:" ",text:"     . ",platform:"messenger",time:"09:20 "},{id:15,name:" ",text:"      . ",platform:"telegram",time:"08:45 "}],CD=({onNavigate:r})=>{const[e,t]=P.useState(0),[s,l]=P.useState(!0);P.useEffect(()=>{const g=setInterval(()=>{l(!1),setTimeout(()=>{t(x=>(x+1)%_u.length),l(!0)},500)},7e3);return()=>clearInterval(g)},[]);const c=g=>{switch(g){case"whatsapp":return i.jsx(lp,{className:"w-5 h-5 text-white"});case"messenger":return i.jsx(ID,{className:"w-5 h-5 text-white"});case"telegram":return i.jsx(op,{className:"w-5 h-5 text-white"});default:return null}},d=g=>{switch(g){case"whatsapp":return"bg-green-500";case"messenger":return"bg-blue-600";case"telegram":return"bg-sky-500";default:return"bg-gray-500"}},f=g=>i.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-3xl p-6 shadow-lg border border-white/5 relative h-full flex flex-col hover:border-white/20 hover:bg-white/10 transition-all",children:[i.jsx("div",{className:"absolute -bottom-2 right-8 w-4 h-4 bg-white/5 border-b border-r border-white/5 transform rotate-45"}),i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-900/50 flex items-center justify-center text-emerald-300 font-bold text-lg border border-emerald-500/20",children:g.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-white",children:g.name}),i.jsx("span",{className:"text-xs text-gray-500 font-medium",children:g.time})]})]}),i.jsx("div",{className:`w-8 h-8 rounded-full ${d(g.platform)} flex items-center justify-center shadow-md ring-2 ring-black/20`,children:c(g.platform)})]}),i.jsxs("p",{className:"text-gray-300 text-base leading-relaxed font-medium",children:['"',g.text,'"']})]});return i.jsx("section",{className:"py-20 relative overflow-hidden",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl font-black text-white mb-4 drop-shadow-md",children:" "}),i.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full shadow-[0_0_10px_rgba(16,185,129,0.5)]"}),i.jsx("p",{className:"mt-6 text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"                       ."}),i.jsx("div",{className:"mt-8 flex justify-center animate-fade-in-up delay-200",children:i.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-900/20 border border-emerald-500/30 px-5 py-2.5 rounded-full shadow-lg backdrop-blur-sm",children:[i.jsx(yl,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),i.jsx("span",{className:"text-emerald-300 font-bold text-sm",children:"   "})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl p-6 rounded-[2.5rem] border border-white/10 hover:border-emerald-500/50 transition-all group flex flex-col h-full shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[i.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-white/10 group-hover:border-emerald-500/30 group-hover:scale-105 transition-all",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",alt:".   ",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"text-center sm:text-right flex-1",children:[i.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),i.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),i.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[i.jsx(xp,{className:"w-3.5 h-3.5 text-emerald-500"}),"   - "]})]})]}),i.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[i.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),i.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[i.jsx("a",{href:"https://www.facebook.com/yazanabokaheal2?locale=ms_MY",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(gp,{className:"w-6 h-6"})}),i.jsx("a",{href:"https://wa.me/972568401548",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(lp,{className:"w-6 h-6"})}),i.jsx("a",{href:"https://t.me/yazan1342",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(op,{className:"w-6 h-6"})})]})]})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl p-6 rounded-[2.5rem] border border-white/10 hover:border-blue-500/50 transition-all group flex flex-col h-full shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-4",children:[i.jsx("div",{className:"w-64 h-64 rounded-3xl shadow-2xl overflow-hidden shrink-0 border-4 border-white/10 group-hover:border-blue-500/30 group-hover:scale-105 transition-all",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",alt:".   ",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"text-center sm:text-right flex-1",children:[i.jsx("h3",{className:"text-2xl font-black text-emerald-400 mb-2 inline-block border-b-2 border-emerald-500/30 pb-1 shadow-[0_2px_10px_-2px_rgba(16,185,129,0.2)]",children:".   "}),i.jsx("p",{className:"text-gray-200 font-bold text-base mb-3 drop-shadow-sm",children:"  "}),i.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-gray-400 text-xs font-medium bg-black/30 px-3 py-1.5 rounded-full inline-flex shadow-inner border border-white/5",children:[i.jsx(xp,{className:"w-3.5 h-3.5 text-blue-500"}),"   - "]})]})]}),i.jsxs("div",{className:"mt-auto pt-4 border-t border-white/10",children:[i.jsx("p",{className:"text-xs font-bold text-gray-500 mb-3 text-center sm:text-right",children:" "}),i.jsxs("div",{className:"flex gap-3 justify-center sm:justify-start",children:[i.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(gp,{className:"w-6 h-6"})}),i.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(lp,{className:"w-6 h-6"})}),i.jsx("a",{href:"#",className:"w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center shadow-lg hover:scale-110 transition-transform border border-white/10",children:i.jsx(op,{className:"w-6 h-6"})})]})]})]})]}),i.jsx("div",{className:"text-center mb-12",children:i.jsxs("button",{onClick:()=>r("TEACHER_CV"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white text-xl font-bold px-10 py-5 rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(16,185,129,0.4)] transition-all transform hover:-translate-y-1 border border-emerald-500/50",children:[i.jsx(ac,{className:"w-6 h-6"}),"  ",i.jsx(bf,{className:"w-6 h-6"})]})}),i.jsxs("div",{className:"mb-0 pt-10 border-t border-white/10",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"  "}),i.jsx("p",{className:"text-gray-400",children:"          "})]}),i.jsxs("div",{className:`transform transition-all duration-700 ease-out ${s?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[i.jsx("div",{className:"block md:hidden",children:f(_u[e])}),i.jsx("div",{className:"hidden md:grid md:grid-cols-3 gap-6",children:[0,1,2].map(g=>{const x=(e+g)%_u.length;return i.jsx("div",{children:f(_u[x])},_u[x].id)})})]})]})]})})},p2=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=P.useState(!1),f=P.useRef(null);P.useEffect(()=>{const x=w=>{f.current&&!f.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-[100]":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-3 py-2.5 rounded-lg border flex justify-between items-center outline-none transition-all font-bold text-sm
            ${l?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-500 cursor-not-allowed":c?"bg-white dark:bg-gray-800 border-emerald-500 ring-1 ring-emerald-500/20 text-gray-800 dark:text-white shadow-sm":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-emerald-500 text-gray-800 dark:text-white"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),i.jsx(xl,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar animate-fade-in p-1 z-[100]",children:r.map((x,w)=>{if(x.isHeader)return i.jsx("div",{className:"px-3 py-1.5 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-1 first:mt-0 bg-gray-100 dark:bg-gray-800 rounded-md mb-1",children:x.label},w);const v=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-3 py-2 rounded-md font-bold text-xs cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${v?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}
                   `,children:[x.label,v&&i.jsx(ha,{className:"w-3 h-3"})]},w)})})]})},RD=({isOpen:r,onClose:e})=>{const[t,s]=P.useState("ROLE_SELECTION"),[l,c]=P.useState(!1),[d,f]=P.useState(null),[g,x]=P.useState(null),{setTeacherSession:w}=Us(),[v,N]=P.useState(""),[C,V]=P.useState(""),[Z,$]=P.useState(""),[me,de]=P.useState(""),[ue,ve]=P.useState(""),[ge,F]=P.useState(""),[T,j]=P.useState(""),[A,O]=P.useState(""),[M,k]=P.useState(""),[I,ce]=P.useState("male"),[oe,B]=P.useState(""),[ie,Y]=P.useState("");if(!r)return null;const se=()=>{s("ROLE_SELECTION"),f(null),x(null),N(""),V(""),$(""),de(""),ve(""),F(""),j(""),O(""),k(""),ce("male"),Y(""),B(""),c(!1)},Ee=()=>{se(),e()},R=gt=>{gt.preventDefault(),f(null),c(!0),setTimeout(()=>{v==="2001"?(w(".   ","yazan@etqan.edu"),x("   !"),setTimeout(()=>Ee(),1500)):v==="2003"?(w(".   ","majd@etqan.edu"),x("    !"),setTimeout(()=>Ee(),1500)):(f("   "),c(!1))},800)},z=async gt=>{gt.preventDefault(),f(null),c(!0);try{await dC(Bu,C.trim(),Z),x("   !"),setTimeout(()=>{Ee(),window.location.reload()},1500)}catch(Rt){console.error(Rt),f("      "),c(!1)}},U=async gt=>{gt.preventDefault(),f(null),c(!0);try{const lt=(await uC(Bu,A.trim(),M)).user,_n="",ws=T==="university"&&oe?oe:"";await yy(Gn(Pe,"users",lt.uid),{firstName:me,lastName:ue,age:ge,grade:T,gender:I,school:ws,avatar:_n,profileBackground:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",email:A.trim(),role:"student",totalXP:0,quizzesCompleted:0,createdAt:new Date}),x("   !"),setTimeout(()=>{Ee(),window.location.reload()},1500)}catch(Rt){console.error(Rt),Rt.code==="auth/email-already-in-use"?f("   "):Rt.code==="auth/weak-password"?f("   "):f("    .    ."),c(!1)}},ee=async gt=>{gt.preventDefault(),f(null),c(!0);try{await cC(Bu,ie.trim()),x("   !")}catch(Rt){console.error(Rt),Rt.code==="auth/user-not-found"?f("    "):Rt.code==="auth/invalid-email"?f("    "):Rt.code==="auth/too-many-requests"?f("           ."):f("          .")}finally{c(!1)}},we=()=>{switch(t){case"TEACHER_LOGIN":return"    ...";case"STUDENT_LOGIN":return"  ...";case"STUDENT_SIGNUP":return"   ...";case"FORGOT_PASSWORD":return"   ...";default:return" ..."}},Me=()=>i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsx("h3",{className:"text-xl font-bold text-center mb-6 text-gray-800 dark:text-white",children:"   "}),i.jsxs("button",{onClick:()=>s("STUDENT_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-all",children:[i.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900 p-3 rounded-full ml-4 group-hover:bg-emerald-200 dark:group-hover:bg-emerald-800 transition-colors",children:i.jsx(es,{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),i.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"    "})]}),i.jsx(Ug,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500"})]}),i.jsxs("button",{onClick:()=>s("TEACHER_LOGIN"),className:"group flex items-center p-4 border-2 border-gray-100 dark:border-gray-700 rounded-2xl hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-3 rounded-full ml-4 group-hover:bg-blue-200 dark:group-hover:bg-blue-800 transition-colors",children:i.jsx(bi,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:" "}),i.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"   "})]}),i.jsx(Ug,{className:"w-5 h-5 text-gray-300 group-hover:text-blue-500"})]})]}),Ue=()=>i.jsxs("form",{onSubmit:R,className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(ii,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:" "}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"     "})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsx("input",{type:"password",value:v,onChange:gt=>N(gt.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 dark:focus:ring-blue-900 outline-none transition-all text-center text-lg tracking-widest bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0})]}),i.jsx("button",{type:"submit",className:"mt-4 w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 dark:shadow-none",children:""})]}),it=()=>i.jsxs("form",{onSubmit:z,className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:" !   "})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"email",value:C,onChange:gt=>V(gt.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),i.jsx(jr,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"password",value:Z,onChange:gt=>$(gt.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"",required:!0}),i.jsx(ii,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]}),i.jsx("div",{className:"text-left",children:i.jsx("button",{type:"button",onClick:()=>s("FORGOT_PASSWORD"),className:"text-xs text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})})]}),i.jsx("button",{type:"submit",disabled:l,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:" "}),i.jsx("div",{className:"mt-4 text-center",children:i.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:["   "," ",i.jsx("button",{type:"button",onClick:()=>s("STUDENT_SIGNUP"),className:"text-emerald-600 dark:text-emerald-400 font-bold hover:underline",children:"  "})]})})]}),Re=()=>{const gt=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(lt=>({label:` ${lt}`,value:lt.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"  ",value:"English Major - QOU"},{label:" ",value:"university"}],Rt=[{label:"",value:"male"},{label:"",value:"female"}];return i.jsxs("form",{onSubmit:U,className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"   "}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"   "})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"text",value:me,onChange:lt=>de(lt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"text",value:ue,onChange:lt=>ve(lt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),i.jsx("input",{type:"number",value:ge,onChange:lt=>F(lt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:""}),i.jsx(p2,{options:Rt,value:I,onChange:lt=>ce(lt),placeholder:" "})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 block mb-1",children:" "}),i.jsx(p2,{options:gt,value:T,onChange:lt=>j(lt),placeholder:"  / "})]}),T==="university"&&i.jsxs("div",{className:"space-y-1 animate-fade-in",children:[i.jsx("label",{className:"text-xs font-bold text-blue-400 block mb-1",children:"  / "}),i.jsx("input",{type:"text",value:oe,onChange:lt=>B(lt.target.value),placeholder:":   - ",className:"w-full px-3 py-2 rounded-lg border border-blue-500/50 focus:border-blue-500 outline-none bg-blue-50 dark:bg-blue-900/10 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"email",value:A,onChange:lt=>O(lt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400",children:" "}),i.jsx("input",{type:"password",value:M,onChange:lt=>k(lt.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 focus:border-emerald-500 outline-none bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500 text-sm",required:!0,minLength:6})]}),i.jsx("button",{type:"submit",disabled:l,className:"mt-2 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:" "}),i.jsx("div",{className:"text-center mt-2",children:i.jsx("button",{type:"button",onClick:()=>s("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors",children:"    "})})]})},Nt=()=>i.jsxs("form",{onSubmit:ee,className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"  "}),i.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:["     ",i.jsx("strong",{children:""}),"  "]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"email",value:ie,onChange:gt=>Y(gt.target.value),className:"w-full px-4 py-3 pr-10 rounded-xl border border-gray-200 dark:border-gray-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 outline-none transition-all bg-white dark:bg-gray-800 text-black dark:text-white placeholder-gray-500",placeholder:"student@example.com",required:!0}),i.jsx(jr,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-3"})]})]}),i.jsx("button",{type:"submit",disabled:l,className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:"  "}),i.jsx("div",{className:"text-center mt-4",children:i.jsxs("button",{type:"button",onClick:()=>s("STUDENT_LOGIN"),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-emerald-600 transition-colors flex items-center justify-center gap-1 mx-auto",children:[i.jsx(bf,{className:"w-4 h-4"}),"  "]})})]});return i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300",onClick:Ee}),i.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl w-full max-w-md relative shadow-2xl overflow-visible animate-fade-in-up p-6 min-h-[400px] flex flex-col border border-gray-100 dark:border-gray-800",children:[l&&!g&&i.jsxs("div",{className:"absolute inset-0 bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm z-50 flex flex-col items-center justify-center animate-fade-in rounded-3xl",children:[i.jsxs("div",{className:"relative mb-6",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-200 dark:bg-emerald-900 rounded-full animate-ping opacity-30 duration-1000"}),i.jsx("div",{className:"relative w-20 h-20 bg-emerald-50 dark:bg-emerald-900/50 rounded-full flex items-center justify-center border border-emerald-100 dark:border-emerald-800 shadow-inner",children:i.jsx(bt,{className:"w-10 h-10 text-emerald-600 dark:text-emerald-400 animate-spin"})})]}),i.jsx("h4",{className:"text-lg font-black text-gray-800 dark:text-white mb-2 tracking-tight animate-pulse",children:we()}),i.jsx("p",{className:"text-gray-400 text-xs font-medium",children:"   "})]}),i.jsx("button",{onClick:Ee,disabled:l,className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 disabled:opacity-50",children:i.jsx(ps,{className:"w-5 h-5"})}),t!=="ROLE_SELECTION"&&!g&&t!=="FORGOT_PASSWORD"&&i.jsxs("button",{onClick:()=>s("ROLE_SELECTION"),disabled:l,className:"absolute top-4 right-4 p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors z-10 flex items-center gap-1 disabled:opacity-50",children:[i.jsx(Ug,{className:"w-5 h-5"}),i.jsx("span",{className:"text-xs font-bold",children:""})]}),i.jsx("div",{className:"mt-6 flex-1 flex flex-col justify-center",children:g?i.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mb-2 animate-[bounce_1s_infinite]",children:i.jsx(ha,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),i.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white leading-relaxed px-4 whitespace-pre-line",children:g}),t==="FORGOT_PASSWORD"&&i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-900 rounded-xl p-4 mx-4 text-sm text-yellow-800 dark:text-yellow-200 text-right shadow-sm mt-4",children:[i.jsxs("p",{className:"font-bold flex items-center gap-2 mb-2 text-yellow-900 dark:text-yellow-100",children:[i.jsx(vf,{className:"w-5 h-5"}),"  :"]}),i.jsxs("p",{className:"leading-relaxed",children:["         ",i.jsx("strong",{children:"    (Spam)"}),"  (Junk)."]})]}),i.jsx("button",{onClick:()=>{t==="FORGOT_PASSWORD"?(s("STUDENT_LOGIN"),x(null)):Ee()},className:"mt-8 bg-emerald-600 text-white px-10 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 dark:shadow-none transform hover:scale-105 duration-200",children:t==="FORGOT_PASSWORD"?"  ":""})]}):i.jsxs(i.Fragment,{children:[t==="ROLE_SELECTION"&&Me(),t==="TEACHER_LOGIN"&&Ue(),t==="STUDENT_LOGIN"&&it(),t==="STUDENT_SIGNUP"&&Re(),t==="FORGOT_PASSWORD"&&Nt(),d&&i.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 rounded-lg flex items-start gap-2 text-red-600 dark:text-red-400 text-sm animate-fade-in",children:[i.jsx(vf,{className:"w-5 h-5 shrink-0 mt-0.5"}),i.jsx("span",{className:"font-medium",children:d})]})]})})]})]})},kD=()=>{const{user:r}=Us(),[e,t]=P.useState(!1),[s,l]=P.useState(null),[c,d]=P.useState("MCQ"),[f,g]=P.useState({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),[x,w]=P.useState([]),[v,N]=P.useState(null),[C,V]=P.useState({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:"",generalInstruction:"",passageFontSize:"md"}),[Z,$]=P.useState(""),[me,de]=P.useState(!1),[ue,ve]=P.useState([]),[ge,F]=P.useState(!1),[T,j]=P.useState(""),A=(U,ee)=>{V(we=>({...we,[U]:ee}))},O=(U,ee)=>{const we=[...C.options];we[U]=ee,V(Me=>({...Me,options:we}))},M=()=>{if(!C.question.trim()){alert("   ");return}if((c==="MCQ"||c==="READING")&&C.options.some(we=>!we.trim())){alert("   ");return}if(c==="READING"&&!C.passageContent.trim()){alert("   ");return}if(c==="REORDER"&&!Z.trim()){alert("    ");return}let U=[];if(c==="TF")U=["",""];else if(c==="REORDER"){if(U=Z.split(" ").filter(we=>we.trim().length>0),U.length<2){alert("       ");return}}else U=C.options;const ee={id:v||Date.now(),question:C.question,options:U,correctAnswer:C.correctAnswer,explanation:C.explanation||"",type:c};c==="READING"&&(ee.passageContent=C.passageContent,ee.generalInstruction=C.generalInstruction,ee.passageFontSize=C.passageFontSize),v?(w(x.map(we=>we.id===v?ee:we)),N(null)):w([...x,ee]),k()},k=()=>{V({question:"",options:["","","",""],correctAnswer:0,explanation:"",passageContent:"",generalInstruction:"",passageFontSize:"md"}),$(""),N(null),d("MCQ")},I=U=>{const ee=x.find(we=>we.id===U);ee&&(N(U),d(ee.type||"MCQ"),ee.type==="REORDER"?($(ee.options.join(" ")),V({question:ee.question,options:["","","",""],correctAnswer:ee.correctAnswer,explanation:ee.explanation||"",passageContent:ee.passageContent||"",generalInstruction:ee.generalInstruction||"",passageFontSize:ee.passageFontSize||"md"})):(V({question:ee.question,options:ee.type==="TF"?["","","",""]:ee.options.length>=4?ee.options:[...ee.options,...Array(4-ee.options.length).fill("")],correctAnswer:ee.correctAnswer,explanation:ee.explanation||"",passageContent:ee.passageContent||"",generalInstruction:ee.generalInstruction||"",passageFontSize:ee.passageFontSize||"md"}),$("")),window.scrollTo({top:0,behavior:"smooth"}))},ce=()=>{k()},oe=U=>{window.confirm("      ")&&(w(x.filter(ee=>ee.id!==U)),v===U&&k())},B=async()=>{if(!f.title||!f.grade){alert("     ");return}if(x.length===0){alert("     ");return}t(!0);try{const U={title:f.title,subject:f.subject,grade:f.grade,category:f.category,questions:x,createdBy:(r==null?void 0:r.uid)||"teacher",teacherName:(r==null?void 0:r.displayName)||"",description:f.description||"",duration:parseInt(f.duration)||30,questionDuration:f.questionDuration?parseInt(f.questionDuration):void 0};if(s){const ee=Gn(Pe,"quizzes",s);await Ed(ee,{...U,updatedAt:zn()}),alert("    !")}else await as(at(Pe,"quizzes"),{...U,createdAt:zn()}),await as(at(Pe,"notifications"),{recipientId:"all",title:" ",message:`   : ${f.title}  ${f.grade}`,type:"quiz",createdAt:zn(),read:!1}),alert("    !");g({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),w([]),l(null),k()}catch(U){console.error("Error saving quiz:",U),alert("   ")}finally{t(!1)}},ie=()=>{window.confirm("        .")&&(g({title:"",subject:"English",grade:"",category:"Language",description:"",duration:"30",questionDuration:""}),w([]),l(null),k())},Y=async()=>{F(!0);try{const U=cn(at(Pe,"quizzes"),_d("createdAt","desc")),ee=await wn(U);ve(ee.docs.map(we=>({id:we.id,...we.data()})))}catch(U){console.error(U)}F(!1)},se=()=>{Y(),de(!0)},Ee=U=>{x.length>0&&!window.confirm("         .")||(l(U.id||null),g({title:U.title,subject:U.subject,grade:U.grade,category:U.category||"Language",description:U.description||"",duration:U.duration?U.duration.toString():"30",questionDuration:U.questionDuration?U.questionDuration.toString():""}),w(U.questions),de(!1),k(),window.scrollTo({top:0,behavior:"smooth"}))},R=ue.filter(U=>(U.title?U.title.toLowerCase().includes(T.toLowerCase()):!1)||(U.grade?U.grade.includes(T):!1)),z=[{value:"sm",label:""},{value:"md",label:""},{value:"lg",label:""},{value:"xl",label:" "}];return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 pt-10 pb-28 px-4 border-b border-white/5 shadow-sm relative overflow-hidden",children:i.jsx("div",{className:"max-w-6xl mx-auto relative z-10",children:i.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsx("div",{className:"p-4 bg-blue-900/30 rounded-3xl shadow-inner border border-blue-800",children:i.jsx(aw,{className:"w-10 h-10 text-blue-400"})}),i.jsxs("div",{className:"text-center md:text-right",children:[i.jsx("h1",{className:"text-3xl md:text-5xl font-black tracking-tight text-white mb-2",children:" "}),i.jsxs("p",{className:"text-blue-400 font-bold text-lg",children:["  ",r==null?void 0:r.displayName]})]})]}),i.jsx("div",{className:"flex gap-3",children:i.jsxs("button",{onClick:se,className:"bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-emerald-700 transition-colors shadow-lg",children:[i.jsx(fp,{className:"w-5 h-5"})," "]})})]})})}),i.jsx("div",{className:"max-w-6xl mx-auto px-4 -mt-16 relative z-20",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[i.jsxs("div",{className:`bg-gray-900 rounded-[2rem] shadow-xl border p-6 md:p-8 transition-all ${s?"border-blue-500 ring-2 ring-blue-900":"border-gray-700"}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-8 border-b border-gray-700 pb-4",children:[i.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[i.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:i.jsx(ss,{className:"w-5 h-5 text-blue-400"})}),s?"  ":"  "]}),s&&i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"bg-blue-900 text-blue-300 px-3 py-1 rounded-full text-xs font-bold animate-pulse",children:" "}),i.jsx("button",{onClick:ie,className:"text-red-500 hover:bg-red-900/20 px-2 rounded",children:i.jsx(ps,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("input",{type:"text",value:f.title,onChange:U=>g({...f,title:U.target.value}),placeholder:":    - ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white placeholder-gray-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx(rx,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),i.jsxs("select",{value:f.subject,onChange:U=>g({...f,subject:U.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"English",children:"English"}),i.jsx("option",{value:"Science",children:""}),i.jsx("option",{value:"Math",children:""})]})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"    "}),i.jsxs("div",{className:"relative",children:[i.jsx(bi,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),i.jsxs("select",{value:f.grade,onChange:U=>g({...f,grade:U.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"",className:"text-gray-400",children:" "}),i.jsx("optgroup",{label:" ",children:[5,6,7,8,9,10,11,12].map(U=>i.jsxs("option",{value:U.toString(),children:[" ",U]},U))}),i.jsx("optgroup",{label:" ",children:i.jsx("option",{value:"English Major - QOU",children:"   -   "})})]}),i.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:i.jsx(xl,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"col-span-2 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  /  (Category)"}),i.jsxs("div",{className:"relative",children:[i.jsx(k2,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4 pointer-events-none"}),i.jsxs("select",{value:f.category,onChange:U=>g({...f,category:U.target.value}),className:"w-full px-5 py-4 pr-12 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"Language",children:"Language ()"}),i.jsx("option",{value:"Reading",children:"Reading ()"}),i.jsx("option",{value:"Writing",children:"Writing ()"}),i.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"}),i.jsx("option",{value:"General",children:"  (General Quiz)"})]}),i.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:i.jsx(xl,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[i.jsx(nx,{className:"w-4 h-4 text-blue-600"}),"  ()"]}),i.jsx("input",{type:"number",min:"1",value:f.duration,onChange:U=>g({...f,duration:U.target.value}),placeholder:": 30",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[i.jsx(D2,{className:"w-4 h-4 text-blue-600"}),"   ()"]}),i.jsx("input",{type:"number",min:"5",value:f.questionDuration,onChange:U=>g({...f,questionDuration:U.target.value}),placeholder:"   ",className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 transition-all outline-none font-bold text-white"}),i.jsx("p",{className:"text-[10px] text-gray-500 mt-1 mr-1",children:":         ."})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  ()"}),i.jsx("textarea",{value:f.description,onChange:U=>g({...f,description:U.target.value}),className:"w-full px-5 py-4 rounded-2xl bg-gray-800 border border-gray-700 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none transition-all font-medium text-white h-24 resize-none placeholder-gray-500",placeholder:"    ..."})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 md:p-8",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8 border-b border-gray-700 pb-4",children:[i.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-3",children:[i.jsx("div",{className:"bg-blue-900/30 p-2 rounded-lg",children:i.jsx(rw,{className:"w-5 h-5 text-blue-400"})}),v?" ":" "]}),i.jsxs("div",{className:"flex flex-wrap gap-2 bg-gray-800 p-1.5 rounded-xl self-start",children:[i.jsx("button",{onClick:()=>d("MCQ"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${c==="MCQ"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:"  "}),i.jsx("button",{onClick:()=>d("TF"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${c==="TF"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:"  "}),i.jsxs("button",{onClick:()=>d("READING"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${c==="READING"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[i.jsx(rs,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>d("REORDER"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${c==="REORDER"?"bg-gray-700 text-blue-400 shadow-sm":"text-gray-400 hover:text-white"}`,children:[i.jsx(A2,{className:"w-4 h-4"})," "]})]})]}),i.jsxs("div",{className:"space-y-6",children:[c==="READING"&&i.jsxs("div",{className:"space-y-4 bg-blue-900/20 p-5 rounded-2xl border border-blue-800 mb-6",children:[i.jsxs("h4",{className:"font-bold text-blue-300 flex items-center gap-2 mb-2",children:[i.jsx(mA,{className:"w-5 h-5"})," "]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (General Instruction)"}),i.jsx("input",{type:"text",value:C.generalInstruction,onChange:U=>A("generalInstruction",U.target.value),placeholder:": Read the following text then answer the question",className:"w-full px-4 py-3 rounded-xl border border-blue-700 focus:border-blue-500 outline-none bg-gray-800 text-sm font-medium"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-blue-300 mb-1",children:"  (Passage)"}),i.jsx("textarea",{value:C.passageContent,onChange:U=>A("passageContent",U.target.value),placeholder:"   ... ( Enter   )",className:"w-full px-4 py-3 rounded-xl border border-blue-700 focus:border-blue-500 outline-none bg-gray-800 text-sm font-medium h-40 resize-y whitespace-pre-wrap",style:{direction:"ltr",textAlign:"left"}}),i.jsx("p",{className:"text-[10px] text-blue-500 mt-1",children:"* :        ."})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-xs font-bold text-blue-300 mb-2 flex items-center gap-2",children:[i.jsx(_A,{className:"w-4 h-4"}),"   (  )"]}),i.jsx("div",{className:"flex gap-3",children:z.map(U=>i.jsx("button",{onClick:()=>A("passageFontSize",U.value),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all border ${C.passageFontSize===U.value?"bg-blue-600 text-white border-blue-600":"bg-gray-800 text-gray-300 border-gray-600 hover:border-blue-400"}`,children:U.label},U.value))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:c==="READING"?"  ":c==="REORDER"?"/ ":" "}),i.jsxs("div",{className:"relative",children:[i.jsx(oa,{className:"w-5 h-5 text-gray-400 absolute top-4 right-4"}),i.jsx("input",{type:"text",value:C.question,onChange:U=>A("question",U.target.value),placeholder:c==="REORDER"?": Rearrange the following sentence":"   ...",className:"w-full px-5 py-4 pr-12 rounded-2xl border-2 border-gray-600 focus:border-blue-500 focus:ring-4 focus:ring-blue-900/30 outline-none font-bold text-lg text-white bg-gray-800 placeholder-gray-400 transition-all"})]})]}),c==="MCQ"||c==="READING"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.options.map((U,ee)=>i.jsxs("div",{className:`relative group transition-all duration-300 ${C.correctAnswer===ee?"scale-[1.02]":""}`,children:[i.jsxs("label",{className:"flex items-center justify-between mb-2 px-1",children:[i.jsxs("span",{className:`text-xs font-bold ${C.correctAnswer===ee?"text-blue-400":"text-gray-400"}`,children:[" ",ee+1]}),i.jsx("button",{onClick:()=>A("correctAnswer",ee),className:`text-[10px] px-2 py-1 rounded-md transition-colors font-bold ${C.correctAnswer===ee?"bg-blue-900/30 text-blue-300":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:C.correctAnswer===ee?" ":" "})]}),i.jsx("input",{type:"text",value:U,onChange:we=>O(ee,we.target.value),placeholder:`  ${ee+1}`,className:`w-full px-4 py-3 rounded-xl border-2 outline-none transition-all font-medium ${ee===C.correctAnswer?"border-blue-500 bg-blue-900/20 text-white shadow-sm ring-2 ring-blue-900/30":"border-gray-600 bg-gray-700 focus:border-blue-400 text-gray-200"}`})]},ee))}):c==="REORDER"?i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-1",children:"  (   )"}),i.jsx("input",{type:"text",dir:"ltr",value:Z,onChange:U=>$(U.target.value),placeholder:"e.g. The sun rises in the east",className:"w-full px-5 py-4 rounded-2xl border-2 border-emerald-800 focus:border-emerald-500 outline-none text-lg font-medium text-white bg-emerald-900/10 text-left"}),Z&&i.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:Z.split(" ").filter(U=>U.trim()).map((U,ee)=>i.jsx("span",{className:"bg-gray-700 px-3 py-1 rounded-lg text-sm font-bold text-gray-300",children:U},ee))}),i.jsx("p",{className:"text-xs text-gray-500",children:"      ."})]}):i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("button",{onClick:()=>A("correctAnswer",0),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${C.correctAnswer===0?"border-blue-500 bg-blue-900/30 text-blue-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[C.correctAnswer===0&&i.jsx(vn,{className:"w-6 h-6"})," (True)"]}),i.jsxs("button",{onClick:()=>A("correctAnswer",1),className:`flex-1 py-4 rounded-2xl border-2 transition-all font-black text-lg flex items-center justify-center gap-2 ${C.correctAnswer===1?"border-red-500 bg-red-900/30 text-red-400 shadow-md":"border-gray-600 bg-gray-700 text-gray-400 hover:border-gray-300"}`,children:[C.correctAnswer===1&&i.jsx(vn,{className:"w-6 h-6"})," (False)"]})]}),i.jsxs("div",{className:"bg-yellow-900/10 p-4 rounded-2xl border border-yellow-900/30",children:[i.jsxs("label",{className:"block text-sm font-bold text-yellow-500 mb-2 flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),"  ()"]}),i.jsx("textarea",{value:C.explanation,onChange:U=>A("explanation",U.target.value),placeholder:"        ...",className:"w-full px-4 py-3 rounded-xl border border-yellow-800/50 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-900/30 outline-none text-gray-200 bg-gray-800 h-20 resize-none placeholder-gray-400 text-sm"})]}),i.jsxs("div",{className:"flex gap-3",children:[v&&i.jsxs("button",{onClick:ce,className:"flex-1 bg-gray-700 text-gray-300 py-4 rounded-2xl font-bold hover:bg-gray-600 transition-all flex items-center justify-center gap-2",children:[i.jsx(I2,{className:"w-5 h-5"})," "]}),i.jsx("button",{onClick:M,className:`flex-1 bg-gray-800 text-white py-4 rounded-2xl font-bold hover:bg-gray-900 transition-all shadow-none flex items-center justify-center gap-2 transform hover:-translate-y-1 border border-gray-700 ${v?"bg-blue-600 hover:bg-blue-700 border-blue-600":""}`,children:v?i.jsxs(i.Fragment,{children:[i.jsx(fi,{className:"w-5 h-5"})," "]}):i.jsxs(i.Fragment,{children:[i.jsx(rw,{className:"w-5 h-5"}),"  "]})})]})]})]})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"sticky top-24 space-y-6",children:[i.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6",children:[i.jsxs("h3",{className:"text-lg font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(fi,{className:"w-5 h-5 text-blue-400"})," "]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-5 bg-gray-800 rounded-2xl border border-gray-600 flex flex-col gap-3",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),i.jsx("span",{className:"font-black text-white bg-gray-600 px-3 py-0.5 rounded-md shadow-sm",children:x.length})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),i.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:f.category})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),i.jsxs("span",{className:"font-bold text-white",children:[f.duration," "]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400 font-medium",children:" "}),s?i.jsx("span",{className:"text-emerald-400 font-bold bg-emerald-900/30 px-2 py-0.5 rounded-md",children:""}):i.jsx("span",{className:"text-blue-400 font-bold bg-blue-900/30 px-2 py-0.5 rounded-md",children:""})]})]}),i.jsxs("button",{onClick:B,disabled:e||x.length===0,className:`w-full py-4 rounded-2xl font-black text-white shadow-lg transition-all flex items-center justify-center gap-2 transform ${e||x.length===0?"bg-gray-600 cursor-not-allowed shadow-none":"bg-blue-600 hover:bg-blue-700 shadow-none hover:-translate-y-1"}`,children:[e?i.jsx(bt,{className:"w-5 h-5 animate-spin"}):s?i.jsx(ax,{className:"w-5 h-5"}):i.jsx(vn,{className:"w-5 h-5"}),e?" ...":s?" ":"  "]})]})]}),x.length>0&&i.jsxs("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 animate-fade-in-up",children:[i.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"bg-blue-900/30 p-1.5 rounded-lg",children:i.jsx(aw,{className:"w-4 h-4 text-blue-400"})}),"  (",x.length,")"]}),i.jsx("div",{className:"space-y-3 max-h-[calc(100vh-400px)] overflow-y-auto pr-2 custom-scrollbar",children:x.map((U,ee)=>i.jsxs("div",{className:`p-3 rounded-xl border transition-all group relative ${v===U.id?"bg-blue-900/20 border-blue-500 ring-1 ring-blue-500":"bg-gray-700/50 border-gray-600 hover:border-blue-300"}`,children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"bg-gray-600 text-gray-300 font-bold w-6 h-6 flex items-center justify-center rounded-lg text-xs shrink-0 shadow-sm",children:ee+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-bold text-gray-200 text-sm line-clamp-2 mb-1.5",children:U.question}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{className:"text-[10px] bg-gray-600 text-gray-300 px-2 py-0.5 rounded border border-gray-500",children:U.type==="REORDER"?"":U.options.length===2?"/":U.passageContent?"":""})})]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-600/50 justify-end",children:[i.jsxs("button",{onClick:()=>I(U.id),className:"flex items-center gap-1 text-xs font-bold text-blue-400 hover:bg-blue-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[i.jsx(yp,{className:"w-3.5 h-3.5"}),""]}),i.jsx("div",{className:"w-px h-3 bg-gray-600"}),i.jsxs("button",{onClick:()=>oe(U.id),className:"flex items-center gap-1 text-xs font-bold text-red-500 hover:bg-red-900/30 px-2 py-1.5 rounded-lg transition-colors",children:[i.jsx(vi,{className:"w-3.5 h-3.5"}),""]})]})]},U.id))})]})]})})]})}),me&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-3xl max-h-[85vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden",children:[i.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:i.jsx(fp,{className:"w-6 h-6 text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-black text-white",children:" "}),i.jsx("p",{className:"text-sm text-gray-400",children:"    "})]})]}),i.jsx("button",{onClick:()=>de(!1),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:i.jsx(ps,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"p-4 bg-gray-800 border-b border-gray-700",children:i.jsxs("div",{className:"relative",children:[i.jsx(zs,{className:"w-5 h-5 text-gray-400 absolute top-3.5 right-4 pointer-events-none"}),i.jsx("input",{type:"text",placeholder:"   ...",value:T,onChange:U=>j(U.target.value),className:"w-full px-12 py-3 rounded-xl border border-gray-700 focus:border-emerald-500 outline-none bg-gray-700 font-bold text-white transition-all"})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-900 custom-scrollbar",children:ge?i.jsx("div",{className:"flex justify-center py-10",children:i.jsx(bt,{className:"w-8 h-8 animate-spin text-emerald-600"})}):R.length===0?i.jsx("div",{className:"text-center py-10 text-gray-400",children:"   "}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:R.map(U=>i.jsxs("div",{onClick:()=>Ee(U),className:"bg-gray-800 p-4 rounded-2xl border border-gray-700 cursor-pointer hover:border-emerald-500 hover:shadow-lg transition-all group",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("span",{className:"bg-blue-900/30 text-blue-300 text-[10px] font-bold px-2 py-0.5 rounded-md",children:U.subject}),i.jsx("span",{className:"text-xs text-gray-400",children:U.grade})]}),i.jsx("h4",{className:"font-bold text-white mb-2 line-clamp-1 group-hover:text-emerald-400 transition-colors",children:U.title}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[i.jsx(oa,{className:"w-3 h-3"}),U.questions.length," "]})]},U.id))})})]})})]})},cp=[{minLevel:1,title:" ",color:"bg-gray-100 text-gray-600 border-gray-200",icon:sx},{minLevel:5,title:" ",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:ss},{minLevel:10,title:" ",color:"bg-blue-100 text-blue-700 border-blue-200",icon:zs},{minLevel:15,title:" ",color:"bg-indigo-100 text-indigo-700 border-indigo-200",icon:ac},{minLevel:20,title:" ",color:"bg-purple-100 text-purple-700 border-purple-200",icon:am},{minLevel:30,title:" ",color:"bg-amber-100 text-amber-700 border-amber-200",icon:ic}],DD=[{id:"first_step",title:" ",desc:"   ",icon:sx,color:"text-emerald-500",bg:"bg-emerald-500/10",condition:r=>r.quizzesCompleted>=1},{id:"perfect_score",title:" ",desc:"  100%   ",icon:yl,color:"text-yellow-500",bg:"bg-yellow-500/10",condition:r=>r.hasPerfectScore},{id:"dedicated",title:" ",desc:" 5  ",icon:ss,color:"text-blue-500",bg:"bg-blue-500/10",condition:r=>r.quizzesCompleted>=5},{id:"high_level",title:" ",desc:"  5",icon:am,color:"text-orange-500",bg:"bg-orange-500/10",condition:r=>r.level>=5},{id:"expert",title:" ",desc:" 10 ",icon:Do,color:"text-purple-500",bg:"bg-purple-500/10",condition:r=>r.quizzesCompleted>=10},{id:"scholar",title:" ",desc:" 1000   (XP)",icon:zs,color:"text-cyan-500",bg:"bg-cyan-500/10",condition:r=>r.totalXP>=1e3},{id:"sharpshooter",title:"",desc:"    3 ",icon:ix,color:"text-red-500",bg:"bg-red-500/10",condition:r=>r.perfectScoresCount>=3},{id:"veteran",title:"",desc:" 20 ",icon:C2,color:"text-indigo-500",bg:"bg-indigo-500/10",condition:r=>r.quizzesCompleted>=20},{id:"rocket",title:"",desc:"  15",icon:J5,color:"text-pink-500",bg:"bg-pink-500/10",condition:r=>r.level>=15},{id:"master",title:"",desc:"  30",icon:ic,color:"text-amber-500",bg:"bg-amber-500/10",condition:r=>r.level>=30}],MD=[{url:"https://lh3.googleusercontent.com/d/1ufUwP7M3wdxWBW60s2xdpZC6W7jfpXv4",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1AqS4xhkK53MwCO-LFRdmtYBQsYSH6vz1",minLevel:1},{url:"https://lh3.googleusercontent.com/d/198SBde0OI07puyVx53mi9MpZ7F-iKltI",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1E--pczIn4ZCSWpWYhKZutLX8lfhtmCrp",minLevel:5},{url:"https://lh3.googleusercontent.com/d/1ep_ggXFs0rCkGJ212WkY5DuRbLNkyLyr",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1siamCZMGjbXH6L9bop_dN1UPSSwfyIwc",minLevel:15},{url:"https://lh3.googleusercontent.com/d/1seg3JDYcNsDBtTY4gU9N5empajSAT_-E",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1QnacjkYXRr-N4yhmt44LubRxbRnzNgqH",minLevel:1},{url:"https://lh3.googleusercontent.com/d/1h5uzg3mZaeaozqEkzwItA14xqDq7kbMb",minLevel:10},{url:"https://lh3.googleusercontent.com/d/1qKn7YfQr7VaDPXB8EjUvlCW-qt3v5E0u",minLevel:15}],up=[{id:"nature_1",url:"https://lh3.googleusercontent.com/d/16IHotAb2_MEMsfpUxEIx8CBx94kLVYCs",name:" ",minLevel:1},{id:"nature_2",url:"https://lh3.googleusercontent.com/d/1tBjHedpcXQiEjXro--zG3iWDokgrDbgZ",name:" ",minLevel:5},{id:"nature_3",url:"https://lh3.googleusercontent.com/d/1Chp7z63_XfLlt4ZC0MRmKwNsSTlCWwOa",name:" ",minLevel:10},{id:"nature_4",url:"https://lh3.googleusercontent.com/d/12RHK_FCMJt8D24AB3UV7nHxbD50EF4MX",name:" ",minLevel:15},{id:"nature_5",url:"https://lh3.googleusercontent.com/d/1We4c8009ObQB9ZDrpQ8ssUuos4V_4b9w",name:" ",minLevel:20}],x2=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=P.useState(!1),f=P.useRef(null);P.useEffect(()=>{const x=w=>{f.current&&!f.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-[100]":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-4 py-3 rounded-xl border flex justify-between items-center outline-none transition-all font-bold text-sm
            ${l?"bg-gray-950 border-gray-800 text-gray-600 cursor-not-allowed":c?"bg-gray-950 border-blue-500 ring-2 ring-blue-900 text-white shadow-lg":"bg-gray-950 border-gray-800 hover:border-blue-900 text-white shadow-inner"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-600"}`,children:g?g.label:s}),i.jsx(xl,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-blue-500":""}`})]}),c&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-900 border border-gray-700 rounded-xl shadow-xl max-h-60 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-[100]",children:r.map((x,w)=>{if(x.isHeader)return i.jsx("div",{className:"px-4 py-2 text-[10px] font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-800/50 rounded-lg mb-1",children:x.label},w);const v=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-4 py-2.5 rounded-lg font-bold text-xs cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${v?"bg-blue-900/30 text-blue-400":"text-gray-300 hover:bg-gray-800"}
                   `,children:[x.label,v&&i.jsx(ha,{className:"w-3 h-3"})]},w)})})]})},OD=({onNavigate:r})=>{const{user:e,updateUserProfile:t}=Us(),[s,l]=P.useState(!1),[c,d]=P.useState(null),[f,g]=P.useState(!1),[x,w]=P.useState(!1),[v,N]=P.useState(null),[C,V]=P.useState((e==null?void 0:e.avatar)||""),[Z,$]=P.useState((e==null?void 0:e.profileBackground)||up[0].url),[me,de]=P.useState([]),[ue,ve]=P.useState(!0),[ge,F]=P.useState(0),[T,j]=P.useState(1),[A,O]=P.useState(cp[0]),[M,k]=P.useState({quizzesCompleted:0,hasPerfectScore:!1,level:1,totalXP:0,perfectScoresCount:0}),[I,ce]=P.useState([]),[oe,B]=P.useState(""),[ie,Y]=P.useState(!1),[se,Ee]=P.useState("50"),[R,z]=P.useState(null),[U,ee]=P.useState(!1),[we,Me]=P.useState(""),[Ue,it]=P.useState(!1),[Re,Nt]=P.useState({firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",age:(e==null?void 0:e.age)||"",grade:(e==null?void 0:e.grade)||"",phone:(e==null?void 0:e.phone)||"",address:(e==null?void 0:e.address)||"",school:(e==null?void 0:e.school)||"",gender:(e==null?void 0:e.gender)||"male",universityName:""});P.useEffect(()=>{e&&(Nt(le=>({...le,firstName:e.firstName||le.firstName,lastName:e.lastName||le.lastName,gender:e.gender||le.gender,grade:e.grade||le.grade,school:e.school||le.school})),e.avatar&&V(e.avatar),e.profileBackground&&$(e.profileBackground))},[e]),P.useEffect(()=>{(async()=>{if(e){if(e.role==="teacher"){ve(!1),Y(!0);try{const Xe=cn(at(Pe,"users"),Rn("role","==","student")),Ye=(await wn(Xe)).docs.map(Ut=>({id:Ut.id,...Ut.data()}));ce(Ye)}catch(Xe){console.error("Error fetching students:",Xe)}finally{Y(!1)}return}try{const Xe=cn(at(Pe,"quiz_results"),Rn("userId","==",e.uid)),Be=await wn(Xe),Ye=[];let Ut=0,nt=!1,Lr=0;Be.forEach(he=>{const _e=he.data();Ye.push({id:he.id,...he.data()});let Ie=10+_e.percentage*2;_e.passed&&(Ie+=50),_e.percentage===100&&(Ie+=100,nt=!0,Lr++),Ut+=Math.round(Ie)}),Ye.sort((he,_e)=>{var Le,Je;const Ie=((Le=he.createdAt)==null?void 0:Le.seconds)||0,ye=((Je=_e.createdAt)==null?void 0:Je.seconds)||0;return Ie-ye}),de(Ye);let Un=Ut;try{const he=Gn(Pe,"users",e.uid),_e=await rS(he);_e.exists()&&_e.data().totalXP!==void 0?Un=_e.data().totalXP:e.totalXP!==void 0&&(Un=e.totalXP)}catch{e.totalXP!==void 0&&(Un=e.totalXP)}F(Un);const lr=Math.floor(Un/500)+1;j(lr);const $n=[...cp].reverse().find(he=>lr>=he.minLevel)||cp[0];O($n),k({quizzesCompleted:Ye.length,hasPerfectScore:nt,level:lr,totalXP:Un,perfectScoresCount:Lr})}catch(Xe){console.error(Xe)}finally{ve(!1)}}})()},[e]);const gt=async le=>{le.preventDefault(),l(!0),d(null);try{let Xe={...Re};Re.grade==="university"&&Re.universityName&&(Xe.school=Re.universityName),delete Xe.universityName,await t(Xe),d("   !"),setTimeout(()=>d(null),3e3)}catch(Xe){console.error(Xe),alert("   ")}finally{l(!1)}},Rt=async()=>{l(!0);try{await t({avatar:C}),g(!1)}catch(le){console.error(le)}finally{l(!1)}},lt=async()=>{l(!0);try{await t({profileBackground:Z}),w(!1)}catch(le){console.error(le)}finally{l(!1)}},_n=async(le,Xe)=>{if(!le)return;const Be=parseInt(se);if(isNaN(Be)||Be<=0){alert("    ");return}if(window.confirm(`     ${Be} XP  ${Xe}`)){l(!0),z(null);try{const Ye=Gn(Pe,"users",le);await Ed(Ye,{totalXP:Zp(Be)}),ce(Ut=>Ut.map(nt=>nt.id===le?{...nt,totalXP:(nt.totalXP||0)+Be}:nt)),z(`  ${Be} XP  ${Xe} !`),setTimeout(()=>z(null),3e3)}catch(Ye){console.error(Ye),alert("    ")}finally{l(!1)}}},ws=async()=>{if(!we.trim()){alert("   ");return}it(!0);try{await as(at(Pe,"announcements"),{title:we,teacherName:(e==null?void 0:e.displayName)||"",teacherId:e==null?void 0:e.uid,createdAt:zn()}),await as(at(Pe,"notifications"),{recipientId:"all",title:"  ",message:we,type:"info",createdAt:zn(),read:!1}),alert("   "),Me(""),ee(!1)}catch(le){console.error(le),alert("   ")}finally{it(!1)}},_s=I.filter(le=>{const Xe=(le.displayName||"").toLowerCase(),Be=(le.email||"").toLowerCase(),Ye=oe.toLowerCase();return Xe.includes(Ye)||Be.includes(Ye)}),ar=le=>le?le.startsWith("http")?{backgroundImage:`url(${le})`,backgroundSize:"cover",backgroundPosition:"center"}:{}:{backgroundImage:`url(${up[0].url})`,backgroundSize:"cover",backgroundPosition:"center"},Vr=le=>!le||le.startsWith("http")?"bg-no-repeat bg-center":le,Mt=le=>le<=3?"border-gray-800":le<=6?"border-emerald-500 shadow-[0_0_20px_rgba(16,185,129,0.5)]":le<=9?"border-blue-500 shadow-[0_0_25px_rgba(59,130,246,0.6)]":le<=12?"border-cyan-400 shadow-[0_0_30px_rgba(34,211,238,0.7)]":le<=15?"border-indigo-500 shadow-[0_0_35px_rgba(99,102,241,0.7)]":le<=18?"border-purple-500 shadow-[0_0_40px_rgba(168,85,247,0.7)]":le<=21?"border-pink-500 shadow-[0_0_45px_rgba(236,72,153,0.8)]":le<=24?"border-red-500 shadow-[0_0_50px_rgba(239,68,68,0.8)]":le<=27?"border-amber-500 shadow-[0_0_55px_rgba(245,158,11,0.9)]":le<=29?"border-white shadow-[0_0_60px_rgba(255,255,255,0.8)] ring-2 ring-white":"border-rose-500 shadow-[0_0_70px_rgba(244,63,94,1)] animate-pulse ring-4 ring-rose-500/30",Ot=le=>le<=3?"text-gray-400":le<=6?"text-emerald-400 font-bold":le<=9?"text-blue-400 font-bold":le<=12?"text-cyan-400 font-black":le<=15?"text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400 font-black":le<=20?"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500 font-black drop-shadow-sm":le<=25?"text-transparent bg-clip-text bg-gradient-to-r from-amber-300 to-orange-500 font-black drop-shadow-md":"text-transparent bg-clip-text bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 font-black animate-pulse drop-shadow-lg",mn=me.slice(-10).map(le=>le.percentage),wa=mn.length>0?Math.max(...mn):0,_a=mn.length>0?Math.min(...mn):0,Vt=mn.length>0?Math.round(mn.reduce((le,Xe)=>le+Xe,0)/mn.length):0,Ns=me.length,ir=(T-1)*500,Pr=Math.min(100,Math.max(0,(ge-ir)/500*100)),Nn="w-full px-4 py-3 rounded-xl bg-gray-950 border border-gray-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-900 outline-none font-bold text-white transition-all placeholder-gray-600 shadow-inner text-sm",Na=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(le=>({label:` ${le}`,value:le.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"  ",value:"English Major - QOU"},{label:" ",value:"university"}],Ea=[{label:"",value:"male"},{label:"",value:"female"}];return(e==null?void 0:e.role)==="teacher"?i.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up",children:[i.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 mb-12 p-2",children:[i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden border-4 border-gray-800 shadow-2xl bg-gray-700",children:e.avatar?i.jsx("img",{src:e.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx(es,{className:"w-full h-full p-4 text-gray-400"})}),i.jsx("div",{className:"absolute bottom-0 right-0 bg-emerald-500 text-white p-1.5 rounded-full border-4 border-gray-900 shadow-sm",children:i.jsx(vn,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"text-center md:text-right space-y-2",children:[i.jsxs("h1",{className:"text-3xl md:text-4xl font-black text-white",children:[" ",e.displayName]}),i.jsxs("p",{className:"text-gray-400 font-medium text-lg flex items-center justify-center md:justify-start gap-2",children:[i.jsx(jr,{className:"w-4 h-4 text-blue-500"}),e.email]}),i.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-blue-900/30 text-blue-300 text-xs font-bold border border-blue-800",children:[i.jsx(bi,{className:"w-3.5 h-3.5"})," "]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4 mb-12",children:[i.jsxs("button",{onClick:()=>r&&r("TEACHER_DASHBOARD"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-blue-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-900/20 text-blue-400 flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-colors",children:i.jsx(i5,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("QUESTION_BANK"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-purple-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-900/20 text-purple-400 flex items-center justify-center group-hover:bg-purple-600 group-hover:text-white transition-colors",children:i.jsx(zo,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_UPLOAD_FILES"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-emerald-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-emerald-900/20 text-emerald-400 flex items-center justify-center group-hover:bg-emerald-600 group-hover:text-white transition-colors",children:i.jsx(j2,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_EXPLANATIONS"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-orange-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-orange-900/20 text-orange-400 flex items-center justify-center group-hover:bg-orange-600 group-hover:text-white transition-colors",children:i.jsx(Ef,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>ee(!0),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-red-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-red-900/20 text-red-400 flex items-center justify-center group-hover:bg-red-600 group-hover:text-white transition-colors",children:i.jsx(iw,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:" "})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_REVIEWS"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-yellow-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-yellow-900/20 text-yellow-400 flex items-center justify-center group-hover:bg-yellow-600 group-hover:text-white transition-colors",children:i.jsx(rm,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:""})]}),i.jsxs("button",{onClick:()=>r&&r("TEACHER_CORRESPONDENCE"),className:"group bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 hover:border-cyan-500 transition-all hover:-translate-y-1 flex flex-col items-center text-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-cyan-900/20 text-cyan-400 flex items-center justify-center group-hover:bg-cyan-600 group-hover:text-white transition-colors",children:i.jsx(ca,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-gray-200 text-sm",children:""})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-sm border border-gray-700 overflow-hidden",children:[i.jsxs("div",{className:"p-8 border-b border-gray-700 bg-gray-800/50 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-black text-white flex items-center gap-2",children:[i.jsx(Do,{className:"w-6 h-6 text-yellow-500"}),"   (XP)"]}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"      "})]}),R&&i.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 text-green-400 px-4 py-2 rounded-xl text-sm font-bold animate-fade-in flex items-center gap-2",children:[i.jsx(vn,{className:"w-4 h-4"})," ",R]})]}),i.jsxs("div",{className:"p-8",children:[i.jsxs("div",{className:"relative mb-6",children:[i.jsx(zs,{className:"absolute top-3.5 right-4 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"   ...",value:oe,onChange:le=>B(le.target.value),className:"w-full px-12 py-3 rounded-xl bg-gray-900 border border-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none font-bold text-white transition-all"})]}),i.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar p-1",children:ie?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(bt,{className:"w-8 h-8 animate-spin text-blue-500"})}):oe===""?i.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"    ..."}):_s.length===0?i.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"    "}):_s.map(le=>i.jsxs("div",{className:"flex items-center justify-between bg-gray-900/50 p-4 rounded-2xl border border-gray-700 hover:border-blue-700 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center overflow-hidden",children:le.avatar?i.jsx("img",{src:le.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx(es,{className:"w-5 h-5 text-gray-400"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-white text-sm",children:le.displayName}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[i.jsxs("span",{className:"bg-yellow-500/10 text-yellow-400 px-1.5 rounded font-bold flex items-center gap-0.5",children:[i.jsx(wf,{className:"w-3 h-3"})," ",le.totalXP||0]}),i.jsxs("span",{children:[" ",le.email]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("select",{className:"bg-gray-800 border border-gray-700 text-gray-300 text-xs font-bold rounded-lg px-2 py-2 outline-none",value:se,onChange:Xe=>Ee(Xe.target.value),children:[i.jsx("option",{value:"10",children:"+10 XP"}),i.jsx("option",{value:"50",children:"+50 XP"}),i.jsx("option",{value:"100",children:"+100 XP"}),i.jsx("option",{value:"200",children:"+200 XP"}),i.jsx("option",{value:"500",children:"+500 XP"})]}),i.jsx("button",{onClick:()=>_n(le.id,le.displayName),className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg transition-colors shadow-lg shadow-blue-500/30",title:" ",children:i.jsx(ca,{className:"w-4 h-4"})})]})]},le.id))})]})]}),U&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-md shadow-2xl animate-fade-in-up overflow-hidden border border-gray-700",children:[i.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-orange-900/30 p-2 rounded-xl",children:i.jsx(iw,{className:"w-6 h-6 text-orange-400"})}),i.jsx("h2",{className:"text-xl font-black text-white",children:"  "})]}),i.jsx("button",{onClick:()=>ee(!1),className:"p-2 hover:bg-gray-700 rounded-full text-gray-400",children:i.jsx(ps,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-6",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("input",{type:"text",value:we,onChange:le=>Me(le.target.value),placeholder:":      ",className:"w-full px-4 py-3 rounded-xl border border-gray-600 bg-gray-800 text-white focus:border-orange-500 outline-none mb-6"}),i.jsxs("button",{onClick:ws,disabled:Ue,className:"w-full bg-orange-600 hover:bg-orange-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors",children:[Ue?i.jsx(bt,{className:"w-5 h-5 animate-spin"}):i.jsx(fi,{className:"w-5 h-5"}),"   "]})]})]})})]}):i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 md:py-12 animate-fade-in-up",children:[f&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-start justify-center p-4 pt-10 md:pt-16 bg-black/80 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-sm max-h-[85vh] flex flex-col shadow-2xl border border-gray-700 overflow-hidden relative",children:[i.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center shrink-0",children:[i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[i.jsx(es,{className:"w-5 h-5 text-purple-500"}),"  "]}),i.jsx("button",{onClick:()=>g(!1),className:"p-1.5 hover:bg-gray-800 rounded-full transition-colors",children:i.jsx(ps,{className:"w-5 h-5 text-gray-500"})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:i.jsx("div",{className:"grid grid-cols-3 gap-3",children:MD.map((le,Xe)=>{const Be=T<le.minLevel;return i.jsxs("button",{onClick:()=>!Be&&V(le.url),disabled:Be,className:`relative aspect-square rounded-xl overflow-hidden border-2 transition-all bg-gray-800 ${C===le.url?"border-emerald-500 shadow-md ring-2 ring-emerald-900/30":"border-transparent hover:border-gray-600"} ${Be?"opacity-60 grayscale":"hover:scale-105 active:scale-95"}`,children:[i.jsx("img",{src:le.url,alt:`Avatar ${Xe}`,className:"w-full h-full object-cover"}),Be&&i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/50 text-white backdrop-blur-[1px]",children:[i.jsx(ii,{className:"w-4 h-4 mb-0.5"}),i.jsxs("span",{className:"text-[10px] font-bold",children:[" ",le.minLevel]})]}),!Be&&C===le.url&&i.jsx("div",{className:"absolute top-1 right-1 bg-emerald-500 text-white rounded-full p-0.5 shadow-sm",children:i.jsx(vn,{className:"w-3 h-3"})})]},Xe)})})}),i.jsx("div",{className:"p-4 border-t border-gray-800 shrink-0",children:i.jsxs("button",{onClick:Rt,disabled:s,className:"w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 dark:shadow-none flex items-center justify-center gap-2",children:[s?i.jsx(bt,{className:"w-5 h-5 animate-spin"}):i.jsx(fi,{className:"w-5 h-5"}),"  "]})})]})}),x&&i.jsx("div",{className:"fixed inset-0 z-[200] flex items-start justify-center p-4 pt-10 md:pt-16 bg-black/80 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl border border-gray-700 overflow-hidden relative",children:[i.jsxs("div",{className:"p-5 border-b border-gray-800 flex justify-between items-center shrink-0",children:[i.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(lw,{className:"w-6 h-6 text-emerald-500"}),"  "]}),i.jsx("button",{onClick:()=>w(!1),className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:i.jsx(ps,{className:"w-6 h-6 text-gray-500"})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-5 custom-scrollbar",children:i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:up.map((le,Xe)=>{const Be=T<le.minLevel,Ye=Z===le.url;return i.jsxs("button",{onClick:()=>!Be&&$(le.url),disabled:Be,className:`relative h-28 rounded-2xl overflow-hidden border-4 transition-all duration-300 group ${Ye?"border-emerald-500 scale-[1.02] shadow-md":"border-transparent"} ${Be?"opacity-60 cursor-not-allowed grayscale":"hover:scale-[1.02] cursor-pointer"}`,children:[i.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${le.url})`}}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Be?i.jsxs("div",{className:"bg-black/60 px-3 py-1.5 rounded-lg backdrop-blur-sm flex items-center gap-1.5",children:[i.jsx(ii,{className:"w-4 h-4 text-white"}),i.jsxs("span",{className:"text-xs text-white font-bold",children:[" ",le.minLevel]})]}):Ye&&i.jsx(vn,{className:"w-8 h-8 text-white drop-shadow-md"})}),i.jsx("div",{className:"absolute bottom-0 w-full bg-gradient-to-t from-black/80 to-transparent p-2 text-center",children:i.jsx("span",{className:"text-xs font-bold text-white drop-shadow-md",children:le.name})})]},Xe)})})}),i.jsxs("div",{className:"p-5 border-t border-gray-800 shrink-0 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>w(!1),className:"px-6 py-2.5 rounded-xl font-bold text-gray-500 hover:bg-gray-800 transition-colors",children:""}),i.jsx("button",{onClick:lt,disabled:s,className:"bg-emerald-600 text-white px-8 py-2.5 rounded-xl font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 dark:shadow-none flex items-center gap-2",children:s?i.jsx(bt,{className:"w-5 h-5 animate-spin"}):" "})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[i.jsx("div",{className:"lg:col-span-7 lg:order-1 space-y-8",children:i.jsxs("div",{className:"bg-gray-900 rounded-[3rem] shadow-xl border border-gray-700 relative group",children:[i.jsxs("div",{className:`relative w-full h-48 md:h-64 transition-all duration-500 rounded-t-[3rem] overflow-hidden ${Vr(e==null?void 0:e.profileBackground)}`,style:ar(e==null?void 0:e.profileBackground),children:[i.jsxs("button",{onClick:()=>w(!0),className:"absolute top-4 left-4 bg-black/30 hover:bg-black/50 text-white backdrop-blur-md px-4 py-2 rounded-full text-xs md:text-sm font-bold flex items-center gap-2 transition-all border border-white/20 z-20",children:[i.jsx(lw,{className:"w-4 h-4"}),"  "]}),i.jsxs("div",{className:`absolute top-4 right-4 px-4 py-1.5 rounded-full text-xs font-black flex items-center gap-2 backdrop-blur-md shadow-lg border-2 z-10 ${A.color}`,children:[i.jsx(A.icon,{className:"w-4 h-4"})," ",A.title]})]}),i.jsx("div",{className:"absolute top-32 md:top-44 right-8 md:right-12 z-20",children:i.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>g(!0),children:[i.jsx("div",{className:`w-28 h-28 md:w-36 md:h-36 rounded-full border-[6px] shadow-2xl overflow-hidden bg-gray-700 relative z-10 transition-transform transform group-hover:scale-105 flex items-center justify-center ${Mt(T)}`,children:e!=null&&e.avatar?i.jsx("img",{src:e.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):i.jsx(es,{className:"w-16 h-16 text-gray-500"})}),i.jsx("div",{className:"absolute bottom-1 right-1 bg-emerald-500 text-white p-2 rounded-full border-4 border-gray-800 shadow-sm z-20 hover:bg-emerald-600 transition-colors",children:i.jsx(G5,{className:"w-4 h-4"})})]})}),i.jsxs("div",{className:"pt-16 md:pt-20 px-8 pb-8",children:[i.jsxs("div",{className:"flex flex-col items-start",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-1",children:e==null?void 0:e.displayName}),i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium mb-6",children:[i.jsx("span",{className:"text-gray-400",children:e==null?void 0:e.email}),i.jsx("span",{className:"text-gray-300",children:""}),i.jsxs("span",{className:`flex items-center gap-1 ${Ot(T)}`,children:[i.jsx(Do,{className:"w-3 h-3"}),"  ",T]})]})]}),i.jsxs("form",{onSubmit:gt,className:"space-y-6 border-t border-gray-700 pt-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[i.jsx("div",{className:"md:col-span-2",children:i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4",children:[i.jsx(es,{className:"w-5 h-5 text-blue-500"}),"  "]})}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx("input",{type:"text",value:Re.firstName,onChange:le=>Nt({...Re,firstName:le.target.value}),className:Nn})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx("input",{type:"text",value:Re.lastName,onChange:le=>Nt({...Re,lastName:le.target.value}),className:Nn})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),i.jsx(x2,{options:Ea,value:Re.gender,onChange:le=>!(e!=null&&e.genderChanged)&&Nt({...Re,gender:le}),placeholder:" ",disabled:e==null?void 0:e.genderChanged}),(e==null?void 0:e.genderChanged)&&i.jsxs("p",{className:"text-[10px] text-red-400 mt-1 mr-1 flex items-center gap-1",children:[i.jsx(ii,{className:"w-3 h-3"}),"        "]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx("input",{type:"text",value:Re.phone,onChange:le=>Nt({...Re,phone:le.target.value}),className:Nn})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),i.jsx("input",{type:"text",value:Re.address,onChange:le=>Nt({...Re,address:le.target.value}),className:Nn})]}),i.jsx("div",{className:"md:col-span-2 mt-2",children:i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4",children:[i.jsx(bi,{className:"w-5 h-5 text-emerald-500"}),"  "]})}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),i.jsx("input",{type:"text",value:Re.school,onChange:le=>Nt({...Re,school:le.target.value}),className:Nn})]}),i.jsxs("div",{className:"relative",children:[i.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:" "}),i.jsx(x2,{options:Na,value:Re.grade,onChange:le=>Nt({...Re,grade:le}),placeholder:" "})]}),Re.grade==="university"&&i.jsxs("div",{className:"md:col-span-2 animate-fade-in",children:[i.jsx("label",{className:"text-xs font-bold text-blue-400 mb-1 block",children:"  / "}),i.jsx("input",{type:"text",value:Re.universityName||Re.school,onChange:le=>Nt({...Re,universityName:le.target.value}),placeholder:"   ...",className:`${Nn} border-blue-500 bg-blue-900/10`})]})]}),i.jsxs("div",{className:"flex items-center justify-end pt-4 gap-4",children:[c&&i.jsxs("span",{className:"text-green-600 font-bold text-sm animate-fade-in flex items-center gap-1",children:[i.jsx(vn,{className:"w-4 h-4"})," ",c]}),i.jsxs("button",{type:"submit",disabled:s,className:"bg-emerald-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-900/20 flex items-center gap-2",children:[s?i.jsx(bt,{className:"w-5 h-5 animate-spin"}):i.jsx(fi,{className:"w-5 h-5"}),"  "]})]})]})]})]})}),i.jsxs("div",{className:"lg:col-span-5 lg:order-2 space-y-6 mt-8 lg:mt-0",children:[i.jsxs("div",{className:"bg-gradient-to-br from-indigo-700 via-purple-700 to-fuchsia-700 rounded-[2.5rem] shadow-2xl p-6 text-white relative overflow-hidden border-4 border-gray-800 ring-4 ring-gray-900",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white opacity-10 rounded-full -translate-y-1/2 translate-x-1/2 blur-3xl"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-indigo-500 opacity-20 rounded-full translate-y-1/2 -translate-x-1/2 blur-3xl"}),i.jsx("div",{className:"flex items-center justify-between mb-6 relative z-10",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 bg-yellow-400 blur-md opacity-50 rounded-full"}),i.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-300 to-orange-500 rounded-2xl shadow-lg relative border border-white/30",children:i.jsx(A.icon,{className:"w-8 h-8 text-white"})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-3xl font-black tracking-tight",children:[" ",T]}),i.jsxs("p",{className:"text-indigo-100 text-sm font-medium flex items-center gap-1.5 mt-0.5 bg-black/20 px-3 py-1 rounded-full w-fit",children:[i.jsx(wf,{className:"w-3.5 h-3.5 text-orange-400 fill-orange-400"})," ",ge,"   (XP)"]})]})]})}),i.jsxs("div",{className:"relative mb-8",children:[i.jsxs("div",{className:"flex justify-between text-xs font-bold text-indigo-200 mb-1 px-1",children:[i.jsx("span",{children:A.title}),i.jsxs("span",{children:["  ",T+1]})]}),i.jsx("div",{className:"w-full bg-black/30 h-3.5 rounded-full relative overflow-hidden backdrop-blur-sm border border-white/10",children:i.jsx("div",{className:"bg-gradient-to-r from-yellow-400 via-orange-400 to-pink-500 h-full rounded-full transition-all duration-1000 ease-out relative shadow-[0_0_10px_rgba(251,191,36,0.5)]",style:{width:`${Pr}%`},children:i.jsx("div",{className:"absolute inset-0 bg-white/30 w-full h-full animate-[pulse_2s_cubic-bezier(0.4,0,0.6,1)_infinite]"})})})]}),i.jsxs("div",{className:"bg-black/20 rounded-2xl p-5 backdrop-blur-md border border-white/10",children:[i.jsxs("h4",{className:"text-sm font-bold text-indigo-100 mb-2 flex items-center gap-2",children:[i.jsx(ic,{className:"w-4 h-4 text-yellow-300"}),"  "]}),i.jsx("div",{className:"text-xl font-black text-white tracking-wide mb-1",children:A.title}),i.jsx("div",{className:"text-xs text-indigo-200",children:"     !"})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 p-4 md:p-5",children:[i.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2 border-b border-gray-700 pb-3",children:[i.jsx("div",{className:"p-2 bg-yellow-900/30 rounded-lg",children:i.jsx(D5,{className:"w-5 h-5 text-yellow-400"})})," "]}),i.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2",children:DD.map((le,Xe)=>{const Be=le.condition(M);return i.jsxs("button",{onClick:()=>N({badge:le,isUnlocked:Be}),className:`relative p-2 rounded-xl border flex flex-col items-center text-center transition-all hover:scale-105 active:scale-95 ${Be?"bg-gray-700/50 border-gray-600 shadow-sm hover:shadow-md cursor-pointer":"bg-gray-800/50 border-gray-700 opacity-60 grayscale hover:opacity-100 cursor-pointer"}`,children:[i.jsx("div",{className:`w-8 h-8 md:w-9 md:h-9 rounded-full flex items-center justify-center mb-1 ${Be?le.bg:"bg-gray-700"}`,children:i.jsx(le.icon,{className:`w-4 h-4 md:w-5 md:h-5 ${Be?le.color:"text-gray-400"}`})}),i.jsx("h4",{className:"font-bold text-[9px] text-gray-300 leading-tight line-clamp-1",children:le.title}),!Be&&i.jsx("div",{className:"absolute top-1 right-1",children:i.jsx(ii,{className:"w-2.5 h-2.5 text-gray-500"})})]},Xe)})}),v&&i.jsxs("div",{className:"mt-4 bg-gray-800/80 rounded-2xl p-4 border border-gray-700 animate-fade-in flex items-start gap-4 relative",children:[i.jsx("button",{onClick:()=>N(null),className:"absolute top-3 left-3 text-gray-500 hover:text-white transition-colors",children:i.jsx(ps,{className:"w-4 h-4"})}),i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center shrink-0 ${v.isUnlocked?v.badge.bg:"bg-gray-700"}`,children:i.jsx(v.badge.icon,{className:`w-6 h-6 ${v.isUnlocked?v.badge.color:"text-gray-400"}`})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-sm font-bold text-white mb-1",children:v.badge.title}),i.jsxs("div",{className:"text-xs mb-1",children:[i.jsx("span",{className:`font-bold ${v.isUnlocked?"text-emerald-400":"text-gray-400"}`,children:v.isUnlocked?" : ":": "}),i.jsx("span",{className:"text-gray-300",children:v.badge.desc})]}),!v.isUnlocked&&i.jsxs("div",{className:"mt-2 flex items-center gap-1 text-[10px] text-gray-500",children:[i.jsx(ii,{className:"w-3 h-3"}),i.jsx("span",{children:"    "})]}),v.isUnlocked&&i.jsxs("div",{className:"mt-2 flex items-center gap-1 text-[10px] text-emerald-500",children:[i.jsx(vn,{className:"w-3 h-3"}),i.jsx("span",{children:" "})]})]})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 p-6 hover:shadow-md transition-shadow",children:[i.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(yA,{className:"w-5 h-5 text-emerald-400"})}),"   "]}),ue?i.jsx("div",{className:"h-48 flex items-center justify-center",children:i.jsx(bt,{className:"w-6 h-6 animate-spin text-emerald-500"})}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center bg-gray-700/50 p-4 rounded-xl border border-gray-700",children:[i.jsx("span",{className:"text-gray-300 text-sm font-bold",children:" "}),i.jsxs("span",{className:`font-black text-xl ${Vt>=90?"text-emerald-400":"text-blue-400"}`,children:[Vt,"%"]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-emerald-900/30 text-emerald-400",children:i.jsx(Do,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),i.jsxs("div",{className:"font-black text-lg text-emerald-400",children:[wa,"%"]})]})]}),i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-red-900/30 text-red-400",children:i.jsx(S2,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),i.jsxs("div",{className:"font-black text-lg text-red-400",children:[_a,"%"]})]})]}),i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-blue-900/30 text-blue-400",children:i.jsx(r5,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" "}),i.jsx("div",{className:"font-black text-lg text-blue-400",children:Ns})]})]}),i.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-xl border border-gray-700 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-purple-900/30 text-purple-400",children:i.jsx(Q5,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:""}),i.jsxs("div",{className:"font-black text-lg text-purple-400",children:[Vt,"%"]})]})]})]})]})]})]})]})]})},VD=[{id:"All",label:" (All)"},{id:"Language",label:"Language ()"},{id:"Reading",label:"Reading ()"},{id:"Writing",label:"Writing ()"},{id:"Vocabulary",label:"Vocabulary ()"},{id:"General",label:"  (General Quiz)"}],dp=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=P.useState(!1),f=P.useRef(null);P.useEffect(()=>{const x=w=>{f.current&&!f.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-50":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-5 py-4 rounded-2xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all
            ${l?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":c?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-800 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),i.jsx(xl,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&i.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[r.map((x,w)=>{if(x.isHeader)return i.jsx("div",{className:"px-4 py-2 text-xs font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:x.label},w);const v=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${v?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[x.label,v&&i.jsx(ha,{className:"w-4 h-4"})]},w)}),r.length===0&&i.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},PD=({onBack:r})=>{const{user:e}=Us(),[t,s]=P.useState("SELECTION"),[l,c]=P.useState(""),[d,f]=P.useState(""),[g,x]=P.useState("All"),[w,v]=P.useState([]),[N,C]=P.useState(!1),[V,Z]=P.useState(null),[$,me]=P.useState(0),[de,ue]=P.useState({}),[ve,ge]=P.useState(1800),[F,T]=P.useState(null),[j,A]=P.useState(!1),[O,M]=P.useState(0),[k,I]=P.useState({}),[ce,oe]=P.useState(!1),[B,ie]=P.useState(null),[Y,se]=P.useState(!1),[Ee,R]=P.useState(!1),[z,U]=P.useState(!1),[ee,we]=P.useState(0),[Me,Ue]=P.useState(!1),[it,Re]=P.useState(null),[Nt,gt]=P.useState(0),[Rt,lt]=P.useState(""),[_n,ws]=P.useState(!1),[_s,ar]=P.useState(!1);P.useEffect(()=>{window.scrollTo(0,0)},[t]),P.useEffect(()=>{d?Vr():v([])},[d]),P.useEffect(()=>{let he;return t==="ACTIVE"&&ve>0&&(he=setInterval(()=>{ge(_e=>_e<=1?(ir(),0):_e-1)},1e3)),()=>clearInterval(he)},[t,ve]),P.useEffect(()=>{let he;return t==="ACTIVE"&&(V!=null&&V.questionDuration)&&F!==null&&(F>0?he=setInterval(()=>{T(_e=>_e!==null&&_e>0?_e-1:0)},1e3):F===0&&Ns()),()=>clearInterval(he)},[t,V,F]),P.useEffect(()=>{V!=null&&V.questionDuration?T(V.questionDuration):T(null)},[$,V]),P.useEffect(()=>{if(t!=="ACTIVE")return;const he=()=>{we(Le=>{const Je=Le+1;return Je===1?R(!0):Je>=2&&(R(!1),U(!0)),Je})},_e=()=>{document.hidden&&he()},Ie=Le=>{(Le.key==="PrintScreen"||Le.ctrlKey&&Le.key==="p"||Le.metaKey&&Le.shiftKey)&&(Le.preventDefault(),he())},ye=Le=>Le.preventDefault();return document.addEventListener("visibilitychange",_e),document.addEventListener("keydown",Ie),document.addEventListener("contextmenu",ye),document.addEventListener("copy",ye),document.addEventListener("paste",ye),document.addEventListener("cut",ye),document.addEventListener("selectstart",ye),()=>{document.removeEventListener("visibilitychange",_e),document.removeEventListener("keydown",Ie),document.removeEventListener("contextmenu",ye),document.removeEventListener("copy",ye),document.removeEventListener("paste",ye),document.removeEventListener("cut",ye),document.removeEventListener("selectstart",ye)}},[t]);const Vr=async()=>{C(!0);try{const he=cn(at(Pe,"quizzes"),Rn("grade","==",d));let _e;try{_e=await Y9(he),_e.empty&&(_e=await J9(he))}catch{_e=await wn(he)}const Ie=[];_e.forEach(ye=>{Ie.push({id:ye.id,...ye.data()})}),v(Ie)}catch(he){console.error("Error fetching quizzes:",he)}finally{C(!1)}},Mt=Array.from(new Set(w.map(he=>he.subject))),Ot=w.filter(he=>{const _e=l?he.subject===l:!0,Ie=g&&g!=="All"?he.category===g:!0;return _e&&Ie}),mn=he=>{ie(he),oe(!0)},wa=he=>{if(!he.questions||he.questions.length===0){alert("      ");return}const Ie=[...he.questions].sort(()=>Math.random()-.5).map(At=>{if(At.type==="MCQ"||At.type==="TF"){const ut=At.options.map((gn,Ri)=>({opt:gn,originalIndex:Ri}));ut.sort(()=>Math.random()-.5);const dt=ut.map(gn=>gn.opt),Bt=ut.findIndex(gn=>gn.originalIndex===At.correctAnswer);return{...At,options:dt,correctAnswer:Bt}}return At}),ye={...he,questions:Ie},Le={};Ie.forEach((At,ut)=>{if(At.type==="REORDER"){const dt=At.options.map((Bt,gn)=>gn);for(let Bt=dt.length-1;Bt>0;Bt--){const gn=Math.floor(Math.random()*(Bt+1));[dt[Bt],dt[gn]]=[dt[gn],dt[Bt]]}Le[ut]=dt}}),I(Le),Z(ye),me(0),ue({});const Je=he.duration?he.duration*60:1800;ge(Je),M(0),we(0),U(!1),gt(0),lt(""),ar(!1),oe(!1),ie(null),s("ACTIVE")},_a=()=>{B&&wa(B)},Vt=he=>{ue(_e=>({..._e,[$]:he}))},Ns=()=>{V&&(T(null),$<V.questions.length-1?me(he=>he+1):ir())},ir=async()=>{if(!V||!e){s("RESULT");return}A(!0);const he=Na(),_e=Math.round(he/V.questions.length*100);let Ie=0;try{const ye=cn(at(Pe,"quiz_results"),Rn("userId","==",e.uid),Rn("quizId","==",V.id));(await wn(ye)).empty?Ie=he*30:Ie=he*5}catch(ye){console.error("Error checking previous attempts:",ye),Ie=he*1}M(Ie);try{await as(at(Pe,"quiz_results"),{userId:e.uid,userName:e.displayName,quizId:V.id||"unknown",quizTitle:V.title,subject:V.subject,score:he,totalQuestions:V.questions.length,percentage:_e,passed:_e>=50,earnedXP:Ie,createdAt:zn()});const ye=Gn(Pe,"users",e.uid);await yy(ye,{totalXP:Zp(Ie),quizzesCompleted:Zp(1),lastQuizDate:zn(),role:"student",email:e.email,displayName:e.displayName},{merge:!0})}catch(ye){console.error("Error saving quiz result:",ye)}finally{A(!1),s("RESULT")}},Pr=async()=>{if(Nt!==0&&!(!V||!e)){ws(!0);try{await as(at(Pe,"reviews"),{type:"quiz",targetId:V.id,targetTitle:V.title,teacherId:V.createdBy||"teacher",teacherName:V.teacherName||"",rating:Nt,comment:Rt,studentId:e.uid,studentName:e.displayName,createdAt:zn()}),ar(!0)}catch(he){console.error("Error saving review:",he),alert("    ")}finally{ws(!1)}}},Nn=he=>{const _e=Math.floor(he/60),Ie=he%60;return`${_e}:${Ie<10?"0":""}${Ie}`},Na=()=>{if(!V)return 0;let he=0;return V.questions.forEach((_e,Ie)=>{if(_e.type==="REORDER"){const ye=de[Ie];if(ye&&ye.length===_e.options.length){let Le=!0;for(let Je=0;Je<_e.options.length;Je++)if(ye[Je]!==Je){Le=!1;break}Le&&he++}}else de[Ie]===_e.correctAnswer&&he++}),he},Ea=()=>{se(!0)},le=()=>{se(!1),s("SELECTION")},Xe=()=>{U(!1),s("SELECTION")},Be=he=>{Re(he),Ue(!0)},Ye=()=>{if(Ue(!1),it==="REVIEW")s("REVIEW");else if(it==="RETAKE"){const he=w.find(_e=>_e.id===(V==null?void 0:V.id));he?wa(he):s("SELECTION")}else it==="LIST"?s("SELECTION"):it==="HOME"&&r();Re(null)},Ut=(he,_e)=>{const Ie=de[$]||[];Vt(_e?[...Ie,he]:Ie.filter(ye=>ye!==he))},nt=({title:he,message:_e,onConfirm:Ie,onCancel:ye,icon:Le=oa,confirmText:Je="",cancelText:At="",confirmColor:ut="emerald"})=>i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-md transition-opacity",onClick:ye}),i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] p-8 max-w-sm w-full relative z-10 animate-fade-in-up text-center border border-white/10 shadow-2xl shadow-black/50",children:[i.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg border-4 border-gray-800 ${ut==="red"?"bg-red-500/20":"bg-emerald-500/20"}`,children:i.jsx(Le,{className:`w-10 h-10 ${ut==="red"?"text-red-500":"text-emerald-500"}`})}),i.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:he}),i.jsx("p",{className:"text-gray-400 mb-8 text-base font-medium leading-relaxed",children:_e}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:Ie,className:`flex-1 py-3.5 rounded-xl font-bold text-white transition-all transform hover:scale-105 active:scale-95 shadow-lg ${ut==="red"?"bg-gradient-to-r from-red-600 to-pink-600 shadow-red-900/30":"bg-gradient-to-r from-emerald-500 to-teal-600 shadow-emerald-900/30"}`,children:Je}),i.jsx("button",{onClick:ye,className:"flex-1 bg-gray-800 text-gray-300 py-3.5 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-gray-700",children:At})]})]})]}),Lr=()=>{const he=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(ye=>({label:` ${ye}`,value:ye.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"   -   ",value:"English Major - QOU"}],_e=[{label:"  ",value:""},...Mt.map(ye=>({label:String(ye),value:String(ye)}))],Ie=VD.map(ye=>({label:ye.label,value:ye.id}));return i.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8 animate-fade-in relative z-10",children:[i.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(156, 163, 175, 0.5);
          border-radius: 20px;
        }
      `}),i.jsxs("div",{className:"mb-8 text-center",children:[i.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 text-sm md:text-base",children:"       "})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-6",children:[i.jsxs("div",{className:"lg:col-span-7 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-30",children:[i.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(bi,{className:"w-5 h-5 text-emerald-400"})}),"     "]}),i.jsx(dp,{options:he,value:d,onChange:ye=>{f(ye),c(""),x("All")},placeholder:"--    --"})]}),i.jsxs("div",{className:"lg:col-span-5 bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700 relative z-20",children:[i.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(ss,{className:"w-5 h-5 text-emerald-400"})})," "]}),i.jsx(dp,{options:_e,value:l,onChange:c,placeholder:d?" ":"   ",disabled:!d})]})]}),d&&i.jsx("div",{className:"mb-10 animate-fade-in relative z-10",children:i.jsxs("div",{className:"bg-gray-900 p-5 rounded-3xl shadow-sm border border-gray-700",children:[i.jsxs("label",{className:"block text-base font-bold text-gray-200 mb-4 flex items-center gap-2",children:[i.jsx("div",{className:"p-2 bg-emerald-900/30 rounded-lg",children:i.jsx(k2,{className:"w-5 h-5 text-emerald-400"})}),"  ()"]}),i.jsx(dp,{options:Ie,value:g,onChange:x,placeholder:"  "})]})}),d&&i.jsxs("div",{className:"space-y-6 animate-fade-in-up relative z-0",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-100 border-r-4 border-emerald-500 pr-3 flex items-center gap-2",children:[i.jsx(T5,{className:"w-5 h-5"})," "]}),N?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(bt,{className:"w-8 h-8 animate-spin text-emerald-400"})}):w.length===0?i.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(zs,{className:"w-8 h-8 text-gray-500"})}),i.jsx("p",{className:"text-gray-400 font-medium",children:"      "})]}):Ot.length===0?i.jsxs("div",{className:"bg-gray-900 p-8 rounded-2xl shadow-sm text-center border border-dashed border-gray-700",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(zs,{className:"w-8 h-8 text-gray-500"})}),i.jsx("p",{className:"text-gray-400 font-medium",children:"     "})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ot.map(ye=>i.jsxs("div",{className:"bg-gray-900 rounded-2xl shadow-sm border border-gray-700 p-5 hover:shadow-md hover:border-emerald-600 transition-all group",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("span",{className:"bg-emerald-900/50 text-emerald-300 text-[10px] font-bold px-2 py-1 rounded-md w-fit",children:ye.subject}),ye.category&&i.jsx("span",{className:"bg-blue-900/50 text-blue-300 text-[10px] font-bold px-2 py-1 rounded-md w-fit border border-blue-800",children:ye.category==="General"?"General Quiz":ye.category})]}),i.jsxs("div",{className:"flex flex-col items-end gap-1",children:[i.jsxs("span",{className:"text-gray-500 text-xs",children:[ye.questions.length," "]}),i.jsx("span",{className:"text-gray-500 text-xs bg-gray-800 px-1.5 py-0.5 rounded",children:ye.duration?`${ye.duration} `:"30 "})]})]}),i.jsx("h4",{className:"text-base font-bold text-white mb-2 line-clamp-2",children:ye.title}),i.jsxs("div",{className:"flex items-center gap-1 text-gray-400 text-xs mb-5",children:[i.jsx(Tf,{className:"w-3 h-3"}),i.jsx("span",{children:ye.grade==="English Major - QOU"?"  ":` ${ye.grade}`})]}),i.jsxs("button",{onClick:()=>mn(ye),className:"w-full bg-emerald-900/30 text-emerald-400 border border-emerald-800 py-2.5 rounded-xl font-bold text-sm group-hover:bg-emerald-600 group-hover:text-white transition-all flex items-center justify-center gap-2",children:[" ",i.jsx(bf,{className:"w-4 h-4"})]})]},ye.id))})]}),ce&&i.jsx(nt,{title:"  ",message:`   ${B==null?void 0:B.title} `,onConfirm:_a,onCancel:()=>oe(!1),confirmText:" ",cancelText:"",icon:oa})]})},Un=()=>{if(!V||!V.questions||!V.questions[$])return i.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-900 gap-4",children:[i.jsx("div",{className:"text-red-500 font-bold text-lg",children:"    "}),i.jsx("button",{onClick:()=>s("SELECTION"),className:"text-blue-400 underline",children:" "})]});const he=V.questions[$],_e=he.type==="REORDER";let Ie=!1;if(_e){const dt=de[$];Ie=dt!==void 0&&dt.length===he.options.length}else Ie=de[$]!==void 0;const ye=$===V.questions.length-1,Le=V.subject.toLowerCase().includes("english")||V.subject.includes("")||V.subject.includes(""),Je=Le?"ltr":"rtl",At=Le?"text-left":"text-right",ut={sm:"text-sm leading-relaxed",md:"text-base leading-relaxed",lg:"text-xl leading-loose",xl:"text-2xl leading-loose"}[he.passageFontSize||"md"];return i.jsxs("div",{className:"fixed inset-0 z-[9999] bg-gray-950 overflow-y-auto select-none",onContextMenu:dt=>dt.preventDefault(),style:{WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none",WebkitTouchCallout:"none"},children:[i.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1e-JYkv-JKpi3PBXLAB5qy2E5UG4klP6j",alt:"Active Quiz Background",className:"w-full h-full object-cover opacity-20"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/90 via-gray-900/40 to-gray-950/90"}),i.jsx("div",{className:"absolute inset-0 shadow-[inset_0_0_150px_rgba(0,0,0,0.9)]"})]}),z&&i.jsx(nt,{title:"   ",message:"      .   .",onConfirm:Xe,onCancel:()=>{},confirmText:"",cancelText:"",icon:rA,confirmColor:"red"}),Ee&&!z&&i.jsx(nt,{title:" !",message:"     .   .",onConfirm:()=>R(!1),onCancel:()=>{},confirmText:"",cancelText:"",icon:lx,confirmColor:"red"}),Y&&i.jsx(nt,{title:" ",message:"       .",onConfirm:le,onCancel:()=>se(!1),confirmText:" ",cancelText:"",icon:Nf,confirmColor:"red"}),i.jsxs("div",{className:"bg-gray-950/80 backdrop-blur-md border-b border-gray-700 sticky top-0 z-50 shadow-sm relative",children:[i.jsxs("div",{className:"max-w-4xl mx-auto px-3 h-16 flex justify-between items-center",children:[i.jsxs("button",{onClick:Ea,className:"flex items-center gap-2 text-red-500 hover:bg-red-900/20 px-3 py-1.5 rounded-lg transition-colors font-bold text-sm",children:[i.jsx(Nf,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:""})]}),i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center gap-1",children:i.jsxs("div",{className:`flex items-center gap-2 px-4 py-1.5 rounded-full font-mono font-bold text-base shadow-inner border border-gray-600 ${ve<300?"bg-red-900/50 text-red-200 animate-pulse":"bg-gray-700 text-emerald-400"}`,children:[i.jsx(nx,{className:"w-4 h-4"}),Nn(ve)]})}),i.jsxs("div",{className:"text-xs font-bold text-gray-400",children:[$+1," / ",V.questions.length]})]}),i.jsx("div",{className:"w-full bg-gray-700 h-1",children:i.jsx("div",{className:"bg-emerald-500 h-full transition-all duration-500 ease-out",style:{width:`${($+1)/V.questions.length*100}%`}})})]}),F!==null&&V.questionDuration&&i.jsxs("div",{className:"max-w-3xl mx-auto px-4 mt-4 relative z-10",children:[i.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full transition-all duration-1000 linear ${F<10?"bg-red-500":"bg-blue-500"}`,style:{width:`${F/V.questionDuration*100}%`}})}),i.jsxs("div",{className:"text-center mt-1 text-xs font-bold text-gray-500",children:[" : ",F," "]})]}),i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 relative z-10",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden animate-fade-in-up",dir:Je,children:[i.jsxs("div",{className:"bg-gray-800/50 border-b border-gray-700 p-4 flex items-center justify-between",children:[i.jsx("h2",{className:"font-bold text-gray-200 text-sm md:text-base",children:V.title}),i.jsx("div",{className:"bg-gray-700 p-1.5 rounded-lg shadow-sm",children:_e?i.jsx(A2,{className:"w-4 h-4 text-emerald-500"}):i.jsx(ii,{className:"w-4 h-4 text-gray-300"})})]}),i.jsxs("div",{className:"p-6 md:p-8",children:[he.passageContent&&i.jsxs("div",{className:"mb-8",children:[he.generalInstruction&&i.jsx("div",{className:`text-gray-400 font-bold mb-3 text-sm bg-gray-800/50 px-4 py-2.5 rounded-xl border-l-4 border-emerald-500 ${At}`,children:he.generalInstruction}),i.jsx("div",{className:`bg-blue-900/20 p-5 rounded-2xl border border-blue-800 ${At}`,children:i.jsx("div",{className:`text-gray-200 whitespace-pre-wrap font-medium ${ut}`,children:he.passageContent})})]}),i.jsx("h3",{className:`text-lg md:text-2xl font-black text-white leading-relaxed mb-8 ${At}`,children:he.question}),_e?i.jsxs("div",{className:"space-y-6",dir:"ltr",children:[i.jsxs("div",{className:"min-h-[120px] p-4 bg-gray-950/50 rounded-2xl border-2 border-dashed border-gray-600 flex flex-wrap gap-2 items-start content-start transition-all",children:[(de[$]||[]).map((dt,Bt)=>i.jsx("button",{onClick:()=>Ut(dt,!1),className:"bg-emerald-600 text-white px-4 py-2 rounded-xl font-bold shadow-md hover:bg-red-500 transition-colors animate-fade-in",children:he.options[dt]},`ans-${Bt}`)),(!de[$]||de[$].length===0)&&i.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm font-medium italic",children:"      "})]}),i.jsx("div",{className:"flex flex-wrap gap-3 justify-center bg-gray-900 p-4 rounded-2xl border border-gray-700",children:(k[$]||[]).filter(dt=>!(de[$]||[]).includes(dt)).map((dt,Bt)=>i.jsx("button",{onClick:()=>Ut(dt,!0),className:"bg-gray-800 border-2 border-gray-700 text-gray-200 px-4 py-2 rounded-xl font-bold shadow-sm hover:border-emerald-500 hover:text-emerald-400 transition-all transform hover:scale-105 active:scale-95",children:he.options[dt]},`bank-${Bt}`))}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:()=>Vt([]),className:"text-xs font-bold text-gray-400 hover:text-red-500 flex items-center gap-1",children:[i.jsx(I2,{className:"w-3 h-3"})," "]})})]}):i.jsx("div",{className:"space-y-3",children:he.options.map((dt,Bt)=>i.jsxs("button",{onClick:()=>Vt(Bt),className:`w-full ${At} p-4 rounded-xl border-2 transition-all flex items-center justify-between group hover:scale-[1.01] active:scale-[0.99] duration-200 ${de[$]===Bt?"border-emerald-500 bg-emerald-900/30 shadow-md ring-2 ring-emerald-900":"border-gray-700 bg-gray-900 hover:bg-gray-800 hover:border-gray-600 shadow-sm"}`,children:[i.jsx("span",{className:`text-base font-bold ${de[$]===Bt?"text-emerald-300":"text-gray-300"}`,children:dt}),i.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center shrink-0 ml-2 transition-colors ${de[$]===Bt?"border-emerald-600 bg-emerald-600":"border-gray-600 group-hover:border-emerald-400"}`,children:de[$]===Bt&&i.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})})]},Bt))})]})]}),i.jsx("div",{className:"mt-8 flex justify-end",children:i.jsx("button",{onClick:Ns,disabled:!Ie||j,className:`w-full sm:w-auto px-10 py-4 rounded-2xl font-bold text-lg flex items-center justify-center gap-2 shadow-xl transition-all ${!Ie||j?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-emerald-600 text-white hover:bg-emerald-700 hover:shadow-emerald-500/20 active:scale-95"}`,children:j?i.jsxs(i.Fragment,{children:["  ",i.jsx(bt,{className:"w-5 h-5 animate-spin"})]}):i.jsxs(i.Fragment,{children:[ye?" ":" ",Je==="rtl"?i.jsx(bf,{className:"w-5 h-5"}):i.jsx(qt,{className:"w-5 h-5"})]})})})]})]})},lr=()=>{if(!V)return null;const he=Na(),_e=V.questions.length,Ie=Math.round(he/_e*100);let ye="text-red-500",Le=Q4,Je=" ";Ie>=90?(ye="text-emerald-500",Le=ic,Je="!"):Ie>=75?(ye="text-blue-500",Le=ac,Je="!"):Ie>=50&&(ye="text-yellow-500",Le=ha,Je=" ");const At=Le;return i.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center p-4 animate-fade-in overflow-y-auto",children:[i.jsxs("div",{className:"w-full max-w-xs bg-gray-900 rounded-[2rem] border border-gray-800 p-5 relative overflow-hidden text-center",children:[i.jsxs("div",{className:"flex flex-col items-center mb-4",children:[i.jsx(At,{className:`w-14 h-14 ${ye} mb-2 drop-shadow-md`}),i.jsx("h2",{className:"text-xl font-black text-white mb-1",children:Je}),i.jsx("p",{className:"text-gray-400 font-medium text-xs mb-2",children:V.title}),i.jsxs("div",{className:"inline-flex items-center gap-1 bg-gray-800 px-2 py-0.5 rounded-full border border-gray-700",children:[i.jsx(wf,{className:"w-3 h-3 text-yellow-400 fill-yellow-400"}),i.jsxs("span",{className:"font-bold text-white text-xs",children:["+",O," XP"]})]})]}),i.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-4 text-center mb-5 border border-gray-800",children:[i.jsx("div",{className:"text-xs text-gray-500 font-bold uppercase tracking-wider mb-1",children:" "}),i.jsxs("span",{className:`text-5xl font-black ${ye}`,children:[Ie,"%"]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:()=>Be("REVIEW"),className:"w-full py-3 bg-white text-gray-900 font-black text-sm rounded-xl hover:bg-gray-100 transition-all flex items-center justify-center gap-2 active:scale-95 shadow-md",children:[i.jsx(mp,{className:"w-4 h-4"}),"  "]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("button",{onClick:()=>Be("HOME"),className:"py-3 bg-emerald-600 text-white font-bold rounded-xl hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 text-xs shadow-lg shadow-emerald-900/20",children:[i.jsx(_f,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>Be("RETAKE"),className:"py-3 bg-emerald-600 text-white font-bold rounded-xl hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 text-xs shadow-lg shadow-emerald-900/20",children:[i.jsx(ax,{className:"w-4 h-4"}),"  "]})]})]})]}),i.jsx("div",{className:"w-full max-w-xs bg-gray-900 rounded-[2rem] border border-gray-800 p-6 text-center relative mt-4",children:_s?i.jsxs("div",{className:"py-4",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-400 mb-1",children:[i.jsx(ha,{className:"w-5 h-5"}),i.jsx("h3",{className:"font-bold text-sm",children:" !"})]}),i.jsx("p",{className:"text-gray-500 text-xs",children:"   ."})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3 text-white",children:[i.jsx(rm,{className:"w-4 h-4 text-yellow-400"}),i.jsx("h3",{className:"font-bold text-sm",children:"  "})]}),i.jsx("div",{className:"flex justify-center gap-1.5 mb-3 flex-wrap",children:[1,2,3,4,5,6,7,8,9,10].map(ut=>i.jsx("button",{onClick:()=>gt(ut),className:`w-8 h-8 rounded-lg text-sm font-bold transition-all ${Nt===ut?"bg-yellow-500 text-gray-900 scale-110":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:ut},ut))}),i.jsx("textarea",{value:Rt,onChange:ut=>lt(ut.target.value),placeholder:"  ()...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl p-3 text-xs text-white outline-none focus:border-yellow-500 mb-3 min-h-[60px] resize-none"}),i.jsxs("button",{onClick:Pr,disabled:_n||Nt===0,className:`w-full py-2.5 rounded-xl font-bold text-xs flex items-center justify-center gap-2 transition-all ${Nt===0?"bg-gray-800 text-gray-600 cursor-not-allowed":"bg-yellow-600 text-white hover:bg-yellow-700"}`,children:[_n?i.jsx(bt,{className:"w-3 h-3 animate-spin"}):i.jsx(ca,{className:"w-3 h-3"}),""]})]})})]})},$n=()=>i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 animate-fade-in text-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(mp,{className:"w-5 h-5 text-emerald-400"})," "]}),i.jsxs("button",{onClick:()=>s("RESULT"),className:"text-gray-400 hover:text-white font-medium flex items-center gap-1 text-sm",children:[i.jsx(qt,{className:"w-4 h-4"})," "]})]}),i.jsx("div",{className:"space-y-6",children:V==null?void 0:V.questions.map((he,_e)=>{const Ie=he.type==="REORDER";let ye=!1,Le=null;if(Ie){const Je=de[_e];Je?(Le=Je.map(At=>he.options[At]).join(" "),ye=Je.length===he.options.length&&Je.every((At,ut)=>At===ut)):(Le="  ",ye=!1)}else{const Je=de[_e];ye=Je===he.correctAnswer,Le=Je!==void 0?he.options[Je]:"  "}return i.jsxs("div",{className:`bg-gray-900 rounded-2xl shadow-sm border p-5 ${ye?"border-gray-700":"border-red-900/50"}`,children:[i.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[i.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0 mt-0.5 ${ye?"bg-emerald-900 text-emerald-300":"bg-red-900 text-red-300"}`,children:_e+1}),i.jsx("h3",{className:"text-base font-bold text-white leading-relaxed",children:he.question})]}),i.jsxs("div",{className:`p-3 rounded-xl border text-sm ${ye?"bg-emerald-900/20 border-emerald-500":"bg-red-900/20 border-red-500"}`,children:[i.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:":"}),i.jsx("span",{className:"font-bold",children:Le})]}),!ye&&i.jsxs("div",{className:"mt-2 p-3 rounded-xl border bg-gray-800 border-gray-700 text-sm",children:[i.jsx("span",{className:"block text-xs font-bold opacity-70 mb-1",children:" :"}),i.jsx("span",{className:"font-bold text-emerald-400",children:Ie?he.options.join(" "):he.options[he.correctAnswer]})]}),he.explanation&&i.jsxs("div",{className:"mt-3 p-3 bg-yellow-900/20 border border-yellow-800 rounded-xl text-sm text-yellow-200 animate-fade-in",children:[i.jsxs("span",{className:"font-bold block mb-1 flex items-center gap-1",children:[i.jsx(oa,{className:"w-3 h-3"}),":"]}),i.jsx("p",{className:"leading-relaxed opacity-90",children:he.explanation})]})]},he.id)})})]});return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 text-gray-100",children:[t==="SELECTION"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1NKy8h05zQTNaEJ9C35Rzwys5QXFUxFHD",alt:"Background",className:"w-full h-full object-cover opacity-25"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/80 via-gray-900/20 to-gray-950"}),i.jsx("div",{className:"absolute inset-0 shadow-[inset_0_0_150px_rgba(0,0,0,0.9)]"})]}),i.jsx("div",{className:"bg-gray-950/80 backdrop-blur-md border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm relative",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),Lr()]}),t==="ACTIVE"&&Un(),t==="RESULT"&&lr(),t==="REVIEW"&&$n(),Me&&i.jsx(nt,{title:"  ",message:it==="REVIEW"?"   ":it==="RETAKE"?"     ":it==="LIST"?"    ":"    ",onConfirm:Ye,onCancel:()=>Ue(!1),confirmText:"",cancelText:"",icon:q5})]})},LD=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),zD=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.694 0zM4.98 14.41c6.009-2.607 10.015-4.335 12.019-5.168 2.656-.867 3.084-.386 2.84 1.712-.366 3.157-1.408 8.873-1.93 10.364-.22.628-.648.676-1.308.244-1.68-1.044-3.896-2.532-4.812-3.132-.956-.628-1.144-1.24-.208-2.212 2.168-2.248 4.068-4.064 3.724-4.376-.428-.388-2.648.82-7.008 3.776-.784.532-1.496.524-2.192.316-1.04-.312-2.052-.648-2.828-.904-1.056-.348-1.06-1.056.172-1.576z"})}),UD=({onBack:r})=>{const e=[{name:".   ",image:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",title:"  ",school:"  ",location:" ",color:"emerald",bio:"         .              .",skills:["  ","  "],social:{facebook:"https://www.facebook.com/yazanabokaheal2?locale=ms_MY",whatsapp:"https://wa.me/972568401548",telegram:"https://t.me/yazan1342"}},{name:".   ",image:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",title:"  ",school:"  ",location:" ",color:"blue",bio:"       .                .",skills:[" "],social:{facebook:"#",whatsapp:"#",telegram:"#"}}];return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h1",{className:"text-4xl font-black text-white mb-4",children:"  "}),i.jsx("p",{className:"text-xl text-gray-400",children:"       "})]}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:e.map((t,s)=>i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-lg border border-white/5 flex flex-col hover:shadow-2xl transition-all duration-300 p-8 hover:border-emerald-500/20",children:[i.jsx("div",{className:"flex justify-center mb-8",children:i.jsx("div",{className:"w-48 h-48 rounded-full p-1 bg-gray-800 shadow-md border border-white/5",children:i.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full rounded-full object-cover"})})}),i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-2",children:t.name}),i.jsx("p",{className:`text-${t.color}-400 font-bold text-lg mb-4`,children:t.title}),i.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-gray-400 text-sm font-medium",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(k4,{className:"w-4 h-4"}),t.school]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(xp,{className:"w-4 h-4"}),t.location]})]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"mb-8 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[i.jsx(yl,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),i.jsx("h3",{className:"font-bold text-white",children:" "})]}),i.jsx("p",{className:"text-gray-300 leading-relaxed text-sm",children:t.bio})]}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center justify-center gap-2",children:[i.jsx(ac,{className:`w-5 h-5 text-${t.color}-400`})," "]}),i.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:t.skills.map((l,c)=>i.jsx("span",{className:`bg-${t.color}-900/20 text-${t.color}-300 px-4 py-2 rounded-xl text-sm font-bold border border-${t.color}-900/30`,children:l},c))})]})]}),i.jsx("div",{className:"pt-6 border-t border-white/5",children:i.jsxs("div",{className:"flex justify-center gap-4",children:[i.jsx("a",{href:t.social.facebook,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-blue-900/20 text-blue-400 flex items-center justify-center hover:bg-blue-600 hover:text-white transition-all border border-blue-900/30",children:i.jsx(gp,{className:"w-5 h-5"})}),i.jsx("a",{href:t.social.whatsapp,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-green-900/20 text-green-400 flex items-center justify-center hover:bg-green-600 hover:text-white transition-all border border-green-900/30",children:i.jsx(LD,{className:"w-5 h-5"})}),i.jsx("a",{href:t.social.telegram,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-sky-900/20 text-sky-400 flex items-center justify-center hover:bg-sky-600 hover:text-white transition-all border border-sky-900/30",children:i.jsx(zD,{className:"w-5 h-5"})})]})})]},s))})]})]})},BD=({onBack:r})=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"relative bg-emerald-900/20 py-20 overflow-hidden border-b border-white/5",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 relative z-10 text-center",children:[i.jsx("span",{className:"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30 px-4 py-1 rounded-full text-sm font-medium mb-6 inline-block backdrop-blur-sm",children:"    "}),i.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-6 leading-tight",children:["   ",i.jsx("br",{}),"   "]}),i.jsx("p",{className:"text-gray-300 text-xl max-w-2xl mx-auto leading-relaxed",children:"                    ."})]})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-20",children:[i.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-900/30 rounded-2xl flex items-center justify-center mb-6 border border-blue-500/20",children:i.jsx(mp,{className:"w-8 h-8 text-blue-400"})}),i.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),i.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                   ."})]}),i.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-white/5 hover:shadow-lg transition-all hover:bg-gray-800",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-900/30 rounded-2xl flex items-center justify-center mb-6 border border-emerald-500/20",children:i.jsx(ix,{className:"w-8 h-8 text-emerald-400"})}),i.jsx("h2",{className:"text-2xl font-black text-white mb-4",children:""}),i.jsx("p",{className:"text-gray-400 leading-relaxed text-lg",children:"                  ."})]})]}),i.jsxs("div",{className:"mb-20",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"   "}),i.jsx("div",{className:"w-24 h-1.5 bg-emerald-500 mx-auto rounded-full"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{icon:C2,title:" ",desc:"       ."},{icon:m5,title:" ",desc:"           ."},{icon:S2,title:" ",desc:"         ."},{icon:ox,title:" ",desc:"          ."}].map((e,t)=>i.jsxs("div",{className:"bg-gray-900 p-6 rounded-2xl border border-white/5 text-center hover:border-emerald-500/30 transition-all group hover:-translate-y-1",children:[i.jsx("div",{className:"w-14 h-14 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-emerald-900/30 transition-colors border border-white/5",children:i.jsx(e.icon,{className:"w-7 h-7 text-gray-300 group-hover:text-emerald-400"})}),i.jsx("h3",{className:"font-bold text-white text-lg mb-2",children:e.title}),i.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:e.desc})]},t))})]})]})]}),y2=({options:r,value:e,onChange:t,placeholder:s,disabled:l})=>{const[c,d]=P.useState(!1),f=P.useRef(null);P.useEffect(()=>{const x=w=>{f.current&&!f.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=r.find(x=>x.value===e&&!x.isHeader);return i.jsxs("div",{className:`relative ${c?"z-50":"z-0"}`,ref:f,children:[i.jsxs("button",{type:"button",onClick:()=>!l&&d(!c),className:`w-full px-5 py-4 rounded-2xl font-bold text-right border-2 flex justify-between items-center outline-none transition-all
            ${l?"bg-gray-800 border-gray-700 text-gray-400 cursor-not-allowed":c?"bg-gray-800 border-emerald-500 ring-4 ring-emerald-900/20 text-white shadow-lg":"bg-gray-700 border-transparent hover:border-emerald-700 text-white shadow-sm"}
         `,children:[i.jsx("span",{className:`truncate ${g?"":"text-gray-500"}`,children:g?g.label:s}),i.jsx(xl,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${c?"rotate-180 text-emerald-500":""}`})]}),c&&i.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-xl max-h-72 overflow-y-auto custom-scrollbar animate-fade-in p-2 z-50",children:[r.map((x,w)=>{if(x.isHeader)return i.jsx("div",{className:"px-4 py-2 text-xs font-black text-gray-500 uppercase tracking-wider mt-2 first:mt-0 bg-gray-700/50 rounded-lg mb-1",children:x.label},w);const v=x.value===e;return i.jsxs("div",{onClick:()=>{t(x.value),d(!1)},className:`px-4 py-3 rounded-xl font-bold text-sm cursor-pointer transition-colors flex justify-between items-center mb-1 group
                      ${v?"bg-emerald-900/30 text-emerald-400":"text-gray-300 hover:bg-gray-700"}
                   `,children:[x.label,v&&i.jsx(ha,{className:"w-4 h-4"})]},w)}),r.length===0&&i.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"   "})]})]})},qD=({onBack:r})=>{const[e,t]=P.useState(""),[s,l]=P.useState(""),[c,d]=P.useState("SELECTION"),[f,g]=P.useState(["handouts"]),[x,w]=P.useState([]),[v,N]=P.useState(!1);P.useEffect(()=>{c==="CONTENT"&&s&&e&&C()},[c,s,e]);const C=async()=>{N(!0);try{const ge=cn(at(Pe,"study_materials"),Rn("grade","==",s),Rn("subject","==",e)),F=await wn(ge),T=[];F.forEach(j=>{T.push({id:j.id,...j.data()})}),T.sort((j,A)=>{var k,I;const O=((k=j.createdAt)==null?void 0:k.seconds)||0;return(((I=A.createdAt)==null?void 0:I.seconds)||0)-O}),w(T)}catch(ge){console.error("Error fetching materials:",ge)}finally{N(!1)}},V=()=>{e&&s&&d("CONTENT")},Z=ge=>{g(F=>F.includes(ge)?F.filter(T=>T!==ge):[...F,ge])},$=()=>{const ge=x.filter(j=>j.category==="handouts"),F=x.filter(j=>j.category==="worksheets"),T=x.filter(j=>j.category==="exams");return[{id:"handouts",title:" ",files:ge},{id:"worksheets",title:" ",files:F},{id:"exams",title:" ",files:T}]},me=ge=>ge?(ge.toDate?ge.toDate():new Date(ge.seconds*1e3)).toLocaleDateString("ar-EG"):"",de=$(),ue=()=>{const ge=[{label:" ",value:"school_header",isHeader:!0},...[5,6,7,8,9,10,11,12].map(T=>({label:` ${T}`,value:T.toString()})),{label:" ",value:"uni_header",isHeader:!0},{label:"   -   ",value:"English Major - QOU"}],F=[{label:"  (English)",value:"English"},{label:"",value:"Math"},{label:"",value:"Science"}];return i.jsxs("div",{className:"w-full animate-fade-in pb-20 bg-gray-950 min-h-screen text-gray-100",children:[i.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(156, 163, 175, 0.5);
          border-radius: 20px;
        }
      `}),i.jsxs("div",{className:"relative pt-32 pb-56 px-4 overflow-hidden rounded-b-[3.5rem] shadow-2xl shadow-gray-900/50 mb-20 border-b border-white/5",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1gSDH-0a3cWa8m8APr5qXGkKxINXZcSid",alt:"Background",className:"w-full h-full object-cover object-center scale-105 opacity-50"}),i.jsx("div",{className:"absolute inset-0 bg-emerald-900/80 mix-blend-multiply"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/90"})]}),i.jsxs("div",{className:"max-w-4xl mx-auto text-center relative z-10",children:[i.jsx("div",{className:"inline-flex items-center justify-center p-5 bg-white/10 backdrop-blur-md rounded-3xl mb-6 border border-white/20 shadow-inner ring-1 ring-white/30 animate-fade-in-up",children:i.jsx(Ro,{className:"w-10 h-10 text-white drop-shadow-md"})}),i.jsx("h2",{className:"text-5xl md:text-7xl font-black text-white mb-6 tracking-tight drop-shadow-2xl animate-fade-in-up delay-100",children:"  "}),i.jsx("p",{className:"text-white/95 text-xl md:text-2xl max-w-3xl mx-auto font-medium leading-relaxed drop-shadow-lg mb-8 animate-fade-in-up delay-200",children:"         PDF.      ."})]})]}),i.jsx("div",{className:"max-w-4xl mx-auto px-6 -mt-40 relative z-20 animate-fade-in-up delay-300",children:i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] shadow-2xl border border-white/5 p-8 md:p-12 backdrop-blur-xl",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-10",children:[i.jsxs("div",{className:"group relative z-20",children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2 group-hover:text-emerald-400 transition-colors",children:[i.jsx("div",{className:"p-2 bg-emerald-900/20 rounded-lg group-hover:bg-emerald-900/40 transition-colors",children:i.jsx(ss,{className:"w-5 h-5 text-emerald-400"})})," "]}),i.jsx(y2,{options:F,value:e,onChange:t,placeholder:" "})]}),i.jsxs("div",{className:"group relative z-10",children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2 group-hover:text-teal-400 transition-colors",children:[i.jsx("div",{className:"p-2 bg-teal-900/20 rounded-lg group-hover:bg-teal-900/40 transition-colors",children:i.jsx(bi,{className:"w-5 h-5 text-teal-400"})})," "]}),i.jsx(y2,{options:ge,value:s,onChange:l,placeholder:" "})]})]}),i.jsxs("button",{onClick:V,disabled:!e||!s,className:`w-full py-5 rounded-2xl font-bold text-xl flex items-center justify-center gap-3 transition-all shadow-lg ${!e||!s?"bg-gray-700 text-gray-500 cursor-not-allowed shadow-none":"bg-gradient-to-r from-emerald-600 to-teal-600 text-white hover:from-emerald-700 hover:to-teal-700 hover:shadow-emerald-900/50 hover:-translate-y-1"}`,children:[i.jsx(zs,{className:"w-6 h-6"})," "]})]})})]})},ve=()=>i.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8 animate-fade-in-up min-h-screen",children:[i.jsxs("div",{className:"text-center mb-8 bg-gray-900 p-6 rounded-3xl shadow-sm border border-white/5 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 to-teal-500"}),i.jsx("div",{className:"w-16 h-16 bg-emerald-900/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx(rs,{className:"w-8 h-8 text-emerald-400"})}),i.jsxs("h2",{className:"text-2xl font-black text-white mb-2",children:[" ",e]}),i.jsxs("p",{className:"text-gray-400 font-medium text-sm md:text-base",children:["        ",i.jsx("span",{className:"font-bold text-emerald-400",children:s==="English Major - QOU"?"  ":s})]})]}),i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("button",{onClick:()=>d("SELECTION"),className:"flex items-center gap-2 bg-gray-800 text-gray-200 px-5 py-3 rounded-xl font-bold shadow-sm border border-gray-700 hover:border-emerald-600 hover:text-emerald-400 transition-all hover:-translate-y-0.5",children:[i.jsx(qt,{className:"w-5 h-5"})," "]}),i.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-xs font-bold text-gray-400 bg-gray-800 px-3 py-1.5 rounded-lg border border-gray-700",children:[i.jsx(Ro,{className:"w-3.5 h-3.5"}),de.reduce((ge,F)=>ge+F.files.length,0)," "]})]}),v?i.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[i.jsx(bt,{className:"w-10 h-10 animate-spin text-emerald-400"}),i.jsx("p",{className:"text-gray-400 font-bold",children:"  ..."})]}):i.jsx("div",{className:"space-y-4",children:de.map(ge=>{const F=f.includes(ge.id);return i.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700 overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("button",{onClick:()=>Z(ge.id),className:`w-full flex items-center justify-between p-5 transition-colors ${F?"bg-gray-700/30":"hover:bg-gray-700/30"}`,children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`p-2.5 rounded-xl ${F?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-400"}`,children:i.jsx(Ro,{className:"w-6 h-6"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"font-bold text-base text-white block",children:ge.title}),i.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:[ge.files.length," "]})]})]}),i.jsx("div",{className:`transition-transform duration-300 ${F?"rotate-180":""}`,children:i.jsx(xl,{className:"w-5 h-5 text-gray-400"})})]}),F&&i.jsx("div",{className:"bg-gray-900 border-t border-gray-700",children:ge.files.length===0?i.jsxs("div",{className:"p-8 text-center flex flex-col items-center justify-center text-gray-400",children:[i.jsx(Ro,{className:"w-10 h-10 mb-2 opacity-20"}),i.jsx("p",{className:"text-sm font-medium",children:"       "})]}):i.jsx("div",{className:"divide-y divide-gray-700/50",children:ge.files.map((T,j)=>i.jsxs("div",{onClick:()=>T.url&&window.open(T.url,"_blank"),className:"flex items-center justify-between p-4 hover:bg-emerald-900/10 transition-colors group cursor-pointer",children:[i.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-900/20 flex items-center justify-center shrink-0 text-red-500",children:i.jsx(rs,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[i.jsx("span",{className:"text-sm font-bold text-gray-200 group-hover:text-emerald-300 transition-colors whitespace-normal break-words",children:T.title}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-0.5",children:[i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:T.size}),i.jsx("span",{children:""}),i.jsx("span",{children:me(T.createdAt)})]})]})]}),i.jsx("button",{className:"p-2.5 rounded-full bg-gray-700 text-gray-400 group-hover:bg-emerald-900/30 group-hover:text-emerald-400 transition-all shrink-0 ml-3",children:i.jsx(fp,{className:"w-5 h-5"})})]},j))})})]},ge.id)})}),i.jsxs("div",{className:"mt-8 flex items-center gap-3 justify-center text-xs text-gray-400 bg-gray-800 p-4 rounded-2xl border border-dashed border-gray-700",children:[i.jsx(vf,{className:"w-4 h-4 text-emerald-500 shrink-0"}),i.jsx("span",{children:"      PDF  "})]})]});return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 transition-colors duration-300",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-700 rounded-full transition-colors group text-gray-400 hover:text-emerald-400",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-emerald-400 cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),c==="SELECTION"?ue():ve()]})},FD=({className:r})=>i.jsx("svg",{viewBox:"0 0 24 24",className:r,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),HD=[{id:"yazan",name:".   ",image:"https://lh3.googleusercontent.com/d/1tbzVNKO3FGH46Pa6MZ58OWD4BXVKdK5P",role:"English Teacher",phone:"972568401548",color:"emerald"},{id:"majd",name:".   ",image:"https://lh3.googleusercontent.com/d/1xPDpcaUPz3IH-pqv-Jgplroi6U27BVVj",role:"English Teacher",phone:"972568401548",color:"blue"}],GD=[{id:"inquiry",label:" ",icon:Tf,message:"",color:"text-orange-400",bg:"bg-orange-900/20"},{id:"question",label:"  ",icon:oa,message:"",color:"text-blue-400",bg:"bg-blue-900/20"},{id:"review",label:" ",icon:o5,message:"",color:"text-purple-400",bg:"bg-purple-900/20"},{id:"message",label:" ",icon:Hu,message:"",color:"text-emerald-400",bg:"bg-emerald-900/20"}],$D=({onBack:r})=>{const[e,t]=P.useState(null),s=l=>{if(!e)return;const c=l||" ",d=`https://wa.me/${e.phone}?text=${encodeURIComponent(c)}`;window.open(d,"_blank"),t(null)};return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in pb-20 transition-colors duration-300 text-gray-100",children:[i.jsxs("div",{className:"relative pt-32 pb-48 px-4 overflow-hidden rounded-b-[3.5rem] shadow-2xl shadow-gray-900/50 mb-16 bg-gray-900 border-b border-white/5",children:[i.jsxs("div",{className:"absolute top-6 left-6 z-30 md:top-10 md:left-10 flex items-center gap-2 md:gap-4",children:[i.jsxs("button",{onClick:r,className:"flex items-center gap-2 bg-white/10 backdrop-blur-md text-white px-4 md:px-5 py-2.5 rounded-full font-bold hover:bg-white/20 transition-all border border-white/20 shadow-lg group",children:[i.jsx(qt,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),i.jsx("span",{className:"hidden sm:inline",children:""})]}),i.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-black/40 backdrop-blur-md text-white px-4 py-2 rounded-full font-bold border border-white/10 shadow-md",children:[i.jsx("span",{className:"text-gray-300",children:""}),i.jsx("span",{className:"text-gray-500",children:"/"}),i.jsx("span",{className:"text-emerald-400",children:"  "})]})]}),i.jsxs("div",{className:"absolute inset-0 z-0 bg-gray-900",children:[i.jsxs("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover opacity-80",poster:"https://images.unsplash.com/photo-1524178232363-1fb2b075b655?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",children:[i.jsx("source",{src:"https://drive.google.com/uc?export=download&id=1gfQre4TEqHyomoSblHjn-abxK_cduc8t",type:"video/mp4"}),i.jsx("source",{src:"https://assets.mixkit.co/videos/preview/mixkit-online-learning-man-student-on-laptop-4612-large.mp4",type:"video/mp4"})]}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-900/70 via-emerald-900/40 to-gray-900/90"})]}),i.jsxs("div",{className:"relative z-10 text-center max-w-4xl mx-auto text-white",children:[i.jsx("h1",{className:"text-4xl md:text-6xl font-black mb-6 leading-tight animate-fade-in-up delay-100 drop-shadow-2xl text-emerald-400",children:"  "}),i.jsx("p",{className:"text-xl md:text-2xl text-emerald-200 font-bold max-w-2xl mx-auto leading-relaxed animate-fade-in-up delay-200 drop-shadow-lg",children:"         "})]})]}),i.jsx("div",{className:"max-w-5xl mx-auto px-4 -mt-32 relative z-20",children:i.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-xl rounded-[3rem] border border-white/10 p-8 md:p-12 shadow-2xl",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("span",{className:"bg-emerald-900/30 text-emerald-400 px-4 py-1.5 rounded-full text-sm font-bold border border-emerald-500/20 mb-4 inline-block",children:"English Department"}),i.jsx("h2",{className:"text-3xl font-black text-white",children:"  "})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-3xl mx-auto",children:HD.map(l=>i.jsxs("div",{className:"bg-gray-800/50 rounded-[2rem] p-6 border border-gray-700 hover:border-emerald-500/50 transition-all hover:bg-gray-800 group flex flex-col items-center text-center shadow-lg hover:shadow-emerald-900/20 hover:-translate-y-1",children:[i.jsx("div",{className:"w-40 h-40 rounded-full p-1 bg-gradient-to-br from-gray-700 to-gray-800 shadow-xl mb-5 group-hover:from-emerald-500 group-hover:to-teal-500 transition-all",children:i.jsx("img",{src:l.image,alt:l.name,className:"w-full h-full rounded-full object-cover border-4 border-gray-900"})}),i.jsx("h3",{className:"text-2xl font-black text-white mb-1",children:l.name}),i.jsx("p",{className:"text-gray-400 font-medium text-sm mb-6",children:"English Language Teacher"}),i.jsxs("button",{onClick:()=>t(l),className:"w-full bg-gradient-to-r from-emerald-600 to-teal-600 text-white py-3.5 rounded-xl font-bold flex items-center justify-center gap-2 hover:shadow-lg hover:shadow-emerald-900/40 transition-all active:scale-95",children:[i.jsx(ca,{className:"w-4 h-4"})," "]})]},l.id))})]})}),e&&i.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm transition-opacity",onClick:()=>t(null)}),i.jsxs("div",{className:"bg-gray-900 rounded-[2.5rem] w-full max-w-md relative z-10 animate-fade-in-up shadow-2xl border border-white/10 overflow-hidden",children:[i.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 p-6 border-b border-white/5 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-emerald-500/30",children:i.jsx("img",{src:e.image,alt:"",className:"w-full h-full object-cover"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 font-bold",children:" "}),i.jsx("h3",{className:"text-lg font-black text-white",children:e.name})]})]}),i.jsx("button",{onClick:()=>t(null),className:"p-2 bg-white/5 hover:bg-white/10 rounded-full text-gray-400 hover:text-white transition-colors",children:i.jsx(ps,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-6 space-y-3",children:[i.jsx("p",{className:"text-center text-gray-400 text-sm mb-4 font-medium",children:"     :"}),GD.map(l=>i.jsxs("button",{onClick:()=>s(l.message),className:"w-full flex items-center gap-4 p-4 rounded-2xl bg-gray-800/50 border border-gray-700 hover:border-emerald-500/50 hover:bg-gray-800 transition-all group",children:[i.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${l.bg} ${l.color} group-hover:scale-110 transition-transform`,children:i.jsx(l.icon,{className:"w-6 h-6"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("h4",{className:"font-bold text-white group-hover:text-emerald-400 transition-colors",children:l.label}),l.message&&i.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5 truncate max-w-[200px]",children:l.message})]}),i.jsx(ra,{className:"w-5 h-5 text-gray-600 group-hover:text-emerald-500 group-hover:-translate-x-1 transition-all"})]},l.id))]}),i.jsx("div",{className:"p-4 bg-black/20 text-center",children:i.jsxs("p",{className:"text-[10px] text-gray-500 flex items-center justify-center gap-1",children:[i.jsx(FD,{className:"w-3 h-3 text-green-500"}),"    "]})})]})]})]})},b2=[{minLevel:1,title:" ",icon:sx},{minLevel:5,title:" ",icon:ss},{minLevel:10,title:"",icon:zs},{minLevel:15,title:" ",icon:ac},{minLevel:20,title:"",icon:am},{minLevel:30,title:"",icon:ic}],KD=({onLoginClick:r})=>{const[e,t]=P.useState([]),[s,l]=P.useState(!0),{user:c}=Us(),[d,f]=P.useState(0),[g,x]=P.useState(0),[w,v]=P.useState(0),[N,C]=P.useState(0),[V,Z]=P.useState(null),[$,me]=P.useState(null),[de,ue]=P.useState(!1);P.useEffect(()=>{const k=cn(at(Pe,"users"),_d("totalXP","desc"),tS(30)),I=aS(k,oe=>{const B=[];oe.forEach(ie=>{const Y=ie.data();Y.role==="student"&&B.push({uid:ie.id,...Y})}),t(B.slice(0,10)),l(!1)},oe=>{console.error("Error fetching leaderboard:",oe),l(!1)});return(async()=>{try{const oe=cn(at(Pe,"quizzes")),B=cn(at(Pe,"study_materials")),ie=cn(at(Pe,"explanations")),Y=cn(at(Pe,"contact_messages")),[se,Ee,R,z]=await Promise.all([wn(oe),wn(B),wn(ie),wn(Y)]);f(se.size),x(Ee.size),v(R.size),C(z.size)}catch(oe){console.error("Error fetching stats count:",oe)}})(),()=>I()},[]);const ve=async k=>{Z(k),ue(!0),me(null);try{const I=cn(at(Pe,"quiz_results"),Rn("userId","==",k.uid)),ce=await wn(I);let oe=0,B=0;ce.forEach(Y=>{const se=Y.data();se.percentage!==void 0&&(oe+=se.percentage,B++)});const ie=B>0?Math.round(oe/B):0;me({average:ie,totalQuizzes:B})}catch(I){console.error("Error fetching student stats",I)}finally{ue(!1)}},ge=k=>{switch(k){case 0:return"bg-gradient-to-b from-yellow-400 to-yellow-600 text-white shadow-sm border border-yellow-300/50";case 1:return"bg-gradient-to-b from-slate-300 to-slate-500 text-white shadow-sm border border-slate-300/50";case 2:return"bg-gradient-to-b from-orange-400 to-orange-600 text-white shadow-sm border border-orange-300/50";default:return"bg-gray-700 text-gray-200 border border-gray-600"}},F=k=>i.jsx("span",{className:"font-black text-xs md:text-sm font-mono",children:k+1}),T=k=>{const I=Math.floor(k/500)+1,ce=[...b2].reverse().find(oe=>I>=oe.minLevel)||b2[0];return{level:I,rank:ce}},j=k=>{const I=Math.floor(k/500)+1;return I<=3?"border-gray-700":I<=6?"border-emerald-500/30":I<=9?"border-blue-500/30":I<=12?"border-cyan-400/30":I<=15?"border-indigo-500/30 shadow-[0_0_5px_rgba(99,102,241,0.1)]":I<=18?"border-purple-500/30 shadow-[0_0_5px_rgba(168,85,247,0.1)]":I<=21?"border-pink-500/30 shadow-[0_0_5px_rgba(236,72,153,0.1)]":I<=24?"border-red-500/30 shadow-[0_0_5px_rgba(239,68,68,0.1)]":I<=27?"border-amber-500/30 shadow-[0_0_5px_rgba(245,158,11,0.1)]":I<=29?"border-white/30 shadow-[0_0_5px_rgba(255,255,255,0.1)]":"border-rose-500/40 shadow-[0_0_10px_rgba(244,63,94,0.2)] ring-1 ring-rose-500/10"},A=k=>{switch(k){case 0:return"text-yellow-400 font-bold";case 1:return"text-gray-300 font-bold";case 2:return"text-orange-400 font-bold";default:return"text-gray-200 font-bold"}},O=e.reduce((k,I)=>k+(I.quizzesCompleted||0),0),M=O*8;return i.jsxs("section",{className:"py-12 md:py-16 relative overflow-hidden",children:[V&&i.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center px-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/95 backdrop-blur-sm",onClick:()=>Z(null)}),i.jsxs("div",{className:"bg-[#0B1120] rounded-[2.5rem] w-full max-w-md relative shadow-2xl animate-fade-in-up overflow-hidden border border-blue-900/20 ring-1 ring-white/5",children:[i.jsx("button",{onClick:()=>Z(null),className:"absolute top-4 right-4 p-2 bg-black/20 hover:bg-black/40 rounded-full text-white/70 hover:text-white z-20 transition-colors",children:i.jsx(ps,{className:"w-5 h-5"})}),i.jsxs("div",{className:"h-32 bg-[#0f172a] relative border-b border-white/5",children:[V.profileBackground&&i.jsx("div",{className:"absolute inset-0 opacity-40 bg-cover bg-center",style:{backgroundImage:`url(${V.profileBackground})`}}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-[#0B1120]"})]}),i.jsx("div",{className:"px-6 pb-8 -mt-16 relative z-10",children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-28 h-28 rounded-full p-1.5 bg-[#0B1120] shadow-xl mb-3",children:i.jsx("div",{className:`w-full h-full rounded-full overflow-hidden bg-[#0B1120] ${j(V.totalXP||0)}`,children:V.avatar?i.jsx("img",{src:V.avatar,alt:V.displayName,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-[#0B1120] flex items-center justify-center",children:i.jsx(es,{className:"w-10 h-10 text-slate-600"})})})}),i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsxs("span",{className:"px-3 py-1 rounded-full bg-blue-950/50 border border-blue-900/30 text-blue-400 text-xs font-bold flex items-center gap-1.5",children:[N2.createElement(T(V.totalXP||0).rank.icon,{className:"w-3.5 h-3.5"}),T(V.totalXP||0).rank.title]}),i.jsxs("span",{className:"px-3 py-1 rounded-full bg-slate-900 border border-slate-800 text-slate-400 text-xs font-bold flex items-center gap-1.5",children:[i.jsx(Tf,{className:"w-3.5 h-3.5"}),V.school||" "]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-6 w-full",children:[i.jsxs("div",{className:"bg-[#111827] p-3 rounded-xl border border-slate-800 flex flex-col items-center",children:[i.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1",children:""}),i.jsx("span",{className:"font-black text-white text-lg",children:T(V.totalXP||0).level})]}),i.jsxs("div",{className:"bg-[#111827] p-3 rounded-xl border border-slate-800 flex flex-col items-center",children:[i.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1",children:""}),i.jsx("span",{className:"font-black text-yellow-500 text-lg",children:V.totalXP||0})]}),i.jsxs("div",{className:"bg-[#111827] p-3 rounded-xl border border-slate-800 flex flex-col items-center",children:[i.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1",children:""}),de?i.jsx(bt,{className:"w-5 h-5 animate-spin text-emerald-500"}):i.jsxs("span",{className:"font-black text-emerald-500 text-lg",children:[($==null?void 0:$.average)||0,"%"]})]})]}),i.jsxs("div",{className:"w-full bg-[#0F172A] border border-slate-800 rounded-2xl p-6 relative overflow-hidden text-center",children:[i.jsxs("div",{className:"text-sm font-medium text-slate-300 leading-loose relative z-10 font-sans",children:["     ",i.jsxs("div",{className:"my-4 relative",children:[i.jsx("h3",{className:"text-2xl md:text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 via-teal-300 to-emerald-400 drop-shadow-[0_0_10px_rgba(16,185,129,0.3)] animate-fade-in-up",children:V.displayName}),i.jsx("div",{className:"h-px w-24 bg-gradient-to-r from-transparent via-emerald-500/30 to-transparent mx-auto mt-2"})]}),"            ."]}),i.jsxs("div",{className:"flex justify-around items-center pt-6 mt-2 border-t border-slate-800/50 relative z-10",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-['Great_Vibes'] text-lg text-yellow-600/80 transform -rotate-6 select-none",children:"Yazan A.K"}),i.jsx("div",{className:"text-[8px] text-slate-500 uppercase tracking-widest font-bold mt-1",children:".   "})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-['Great_Vibes'] text-lg text-yellow-600/80 transform -rotate-3 select-none",children:"Majd Al-Hajj"}),i.jsx("div",{className:"text-[8px] text-slate-500 uppercase tracking-widest font-bold mt-1",children:".   "})]})]})]})]})})]})]}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 mb-16 relative z-10",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white/5 backdrop-blur-md rounded-3xl shadow-lg border border-white/10 mb-5 transform -rotate-3 hover:rotate-0 transition-transform duration-300",children:i.jsx(Do,{className:"w-8 h-8 text-indigo-400"})}),i.jsx("h2",{className:"text-4xl font-black text-white mb-3 tracking-tight drop-shadow-lg",children:" "}),i.jsx("p",{className:"text-gray-400 text-base font-medium max-w-md mx-auto",children:"  10     "})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-[2.5rem] border border-white/10 shadow-2xl p-4 md:p-8 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-2/3 h-1 bg-gradient-to-r from-transparent via-indigo-500 to-transparent opacity-50 blur-sm"}),s?i.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 bg-indigo-900 rounded-full blur-xl opacity-50 animate-pulse"}),i.jsx(bt,{className:"w-12 h-12 animate-spin text-indigo-400 relative z-10"})]}),i.jsx("p",{className:"text-gray-400 font-bold mt-6 text-sm animate-pulse",children:"  ..."})]}):e.length===0?i.jsxs("div",{className:"text-center py-20",children:[i.jsx("div",{className:"w-24 h-24 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6 border-4 border-gray-700 shadow-xl",children:i.jsx(ac,{className:"w-10 h-10 text-gray-500"})}),i.jsx("h3",{className:"text-2xl font-black text-gray-300 mb-3",children:"  "}),i.jsx("p",{className:"text-gray-500 font-medium mb-8 text-sm",children:"       !"}),!c&&i.jsxs("button",{onClick:r,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-8 py-3.5 rounded-2xl font-bold text-sm hover:bg-indigo-700 transition-all hover:shadow-[0_0_20px_rgba(99,102,241,0.4)] transform hover:-translate-y-1",children:[i.jsx(R2,{className:"w-4 h-4"}),"  "]})]}):i.jsx("div",{className:"space-y-3",children:e.map((k,I)=>i.jsxs("div",{onClick:()=>ve(k),className:`flex items-center p-3 rounded-2xl transition-all duration-300 cursor-pointer group border ${(c==null?void 0:c.uid)===k.uid?"bg-indigo-900/30 border-indigo-500/50 shadow-[0_0_15px_rgba(99,102,241,0.2)] z-10 relative":"bg-white/5 border-white/5 hover:bg-white/10 hover:border-white/20"}`,children:[i.jsx("div",{className:"w-8 flex justify-center shrink-0",children:i.jsx("div",{className:`w-6 h-6 md:w-8 md:h-8 rounded-lg flex items-center justify-center shadow-sm transition-transform group-hover:scale-110 ${ge(I)}`,children:F(I)})}),i.jsxs("div",{className:`w-12 h-12 md:w-14 md:h-14 rounded-full overflow-hidden border-2 shadow-sm shrink-0 mx-3 transition-colors bg-gray-800 relative ${j(k.totalXP||0)}`,children:[k.avatar?i.jsx("img",{src:k.avatar,alt:k.displayName,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsx(es,{className:"w-5 h-5 text-gray-500"})}),I===0&&i.jsx("div",{className:"absolute -top-1.5 -right-1.5 text-yellow-500 drop-shadow-sm",children:i.jsx(ic,{className:"w-3.5 h-3.5 fill-yellow-500"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:`text-base md:text-lg truncate group-hover:brightness-110 transition-colors ${A(I)}`,children:k.displayName}),i.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500 mt-0.5",children:[i.jsx(Tf,{className:"w-3 h-3 shrink-0"}),i.jsx("span",{className:"truncate max-w-[120px] md:max-w-xs",children:k.school||" "})]})]}),i.jsx("div",{className:"shrink-0 pl-2",children:i.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg border shrink-0 transition-all ${I===0?"bg-yellow-500/10 border-yellow-500/20":"bg-black/20 border-white/5 group-hover:bg-indigo-900/20"}`,children:[i.jsx("span",{className:`font-black text-xs md:text-sm ${I===0?"text-yellow-200":"text-white"}`,children:k.totalXP||0}),i.jsx(wf,{className:`w-3 h-3 md:w-3.5 md:h-3.5 ${I===0?"text-yellow-400 fill-yellow-400":I<3?"text-orange-500 fill-orange-500":"text-gray-600"}`})]})})]},k.uid))})]})]}),i.jsx("div",{className:"max-w-6xl mx-auto px-4 mb-24 relative z-10",children:i.jsxs("div",{className:"relative overflow-hidden rounded-[3rem] bg-[#0B1120] border border-white/10 shadow-2xl group",children:[i.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-20"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900/80 to-slate-950/90"}),i.jsx("div",{className:"relative z-10 p-6 md:p-10",children:i.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-8",children:[i.jsxs("div",{className:"text-center lg:text-right max-w-md",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-emerald-900/30 border border-emerald-500/30 text-emerald-400 text-xs font-bold mb-4 shadow-sm",children:[i.jsx(N4,{className:"w-3 h-3"}),i.jsx("span",{children:" "})]}),i.jsxs("h2",{className:"text-3xl md:text-4xl font-black text-white mb-4 leading-tight",children:[" ",i.jsx("span",{className:"text-emerald-400",children:""})," !"]}),i.jsx("p",{className:"text-emerald-100/80 text-sm leading-relaxed font-medium",children:"        ."})]}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3 w-full lg:w-auto",children:[i.jsxs("div",{className:"bg-[#111827] border border-blue-900/30 p-4 rounded-2xl text-center transition-all group/stat",children:[i.jsx("div",{className:"inline-flex p-2 bg-blue-900/20 rounded-xl mb-2 text-blue-400",children:i.jsx(zo,{className:"w-5 h-5"})}),i.jsx("div",{className:"text-xl font-black text-white mb-0.5 tracking-tight",children:d.toLocaleString()}),i.jsx("div",{className:"text-[10px] font-bold text-blue-300/60 uppercase tracking-wider",children:" "})]}),i.jsxs("div",{className:"bg-[#111827] border border-purple-900/30 p-4 rounded-2xl text-center transition-all group/stat",children:[i.jsx("div",{className:"inline-flex p-2 bg-purple-900/20 rounded-xl mb-2 text-purple-400",children:i.jsx(rs,{className:"w-5 h-5"})}),i.jsx("div",{className:"text-xl font-black text-white mb-0.5 tracking-tight",children:g.toLocaleString()}),i.jsx("div",{className:"text-[10px] font-bold text-purple-300/60 uppercase tracking-wider",children:" "})]}),i.jsxs("div",{className:"bg-[#111827] border border-orange-900/30 p-4 rounded-2xl text-center transition-all group/stat",children:[i.jsx("div",{className:"inline-flex p-2 bg-orange-900/20 rounded-xl mb-2 text-orange-400",children:i.jsx(Hu,{className:"w-5 h-5"})}),i.jsx("div",{className:"text-xl font-black text-white mb-0.5 tracking-tight",children:N.toLocaleString()}),i.jsx("div",{className:"text-[10px] font-bold text-orange-300/60 uppercase tracking-wider",children:" "})]}),i.jsxs("div",{className:"bg-[#111827] border border-emerald-900/30 p-4 rounded-2xl text-center transition-all group/stat",children:[i.jsx("div",{className:"inline-flex p-2 bg-emerald-900/20 rounded-xl mb-2 text-emerald-400",children:i.jsx(Do,{className:"w-5 h-5"})}),i.jsx("div",{className:"text-xl font-black text-white mb-0.5 tracking-tight",children:O.toLocaleString()}),i.jsx("div",{className:"text-[10px] font-bold text-emerald-300/60 uppercase tracking-wider",children:" "})]}),i.jsxs("div",{className:"bg-[#111827] border border-rose-900/30 p-4 rounded-2xl text-center transition-all group/stat col-span-2 lg:col-span-1",children:[i.jsx("div",{className:"inline-flex p-2 bg-rose-900/20 rounded-xl mb-2 text-rose-400",children:i.jsx(D2,{className:"w-5 h-5"})}),i.jsx("div",{className:"text-xl font-black text-white mb-0.5 tracking-tight",children:M.toLocaleString()}),i.jsx("div",{className:"text-[10px] font-bold text-rose-300/60 uppercase tracking-wider",children:" "})]})]})]})})]})})]})},QD=({onBack:r})=>{const[e,t]=P.useState([]),[s,l]=P.useState(!0),[c,d]=P.useState(""),[f,g]=P.useState(null),[x,w]=P.useState(!1);P.useEffect(()=>{v()},[]);const v=async()=>{l(!0);try{const F=cn(at(Pe,"quizzes"),_d("createdAt","desc")),j=(await wn(F)).docs.map(A=>({id:A.id,...A.data()}));t(j)}catch(F){console.error("Error fetching quizzes:",F)}finally{l(!1)}},N=F=>{g({category:"Language",...F})},C=async(F,T)=>{if(F.stopPropagation(),!T){alert(":   ");return}if(window.confirm("  "))try{await Vm(Gn(Pe,"quizzes",T)),t(j=>j.filter(A=>A.id!==T))}catch(j){console.error("Error deleting quiz:",j),alert("   : "+j.message)}},V=(F,T)=>{f&&g({...f,[F]:T})},Z=(F,T,j)=>{if(!f)return;const A=[...f.questions];A[F]={...A[F],[T]:j},g({...f,questions:A})},$=(F,T,j)=>{if(!f)return;const A=[...f.questions],O=[...A[F].options];O[T]=j,A[F]={...A[F],options:O},g({...f,questions:A})},me=F=>{if(f&&window.confirm("      ")){const T=f.questions.filter((j,A)=>A!==F);g({...f,questions:T})}},de=async()=>{if(!(!f||!f.id)){if(f.questions.length===0){alert("     !");return}w(!0);try{const F=Gn(Pe,"quizzes",f.id);await Ed(F,{title:f.title,subject:f.subject,grade:f.grade,category:f.category,questions:f.questions}),t(T=>T.map(j=>j.id===f.id?f:j)),g(null),alert("   ")}catch(F){console.error("Error updating quiz:",F),alert("   ")}finally{w(!1)}}},ue=e.filter(F=>(F.title?F.title.toLowerCase().includes(c.toLowerCase()):!1)||F.teacherName&&F.teacherName.toLowerCase().includes(c.toLowerCase())),ve=F=>F?(F.toDate?F.toDate():new Date(F.seconds*1e3)).toLocaleDateString("ar-EG"):"",ge="w-full p-3 rounded-xl border-2 border-gray-600 focus:border-blue-400 outline-none font-bold text-white bg-gray-700 shadow-sm transition-colors placeholder-gray-400";return i.jsxs("div",{className:"min-h-screen bg-gray-950 pb-20 animate-fade-in relative transition-colors duration-300 text-gray-100",children:[i.jsx("style",{children:`
        .custom-scrollbar {
          scrollbar-width: thin;
          scrollbar-color: #475569 transparent;
        }
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
          height: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #475569;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #94a3b8;
        }
      `}),i.jsx("div",{className:"bg-gray-950 border-b border-white/5 pt-8 pb-20 px-4 shadow-sm relative overflow-hidden",children:i.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-3 text-sm md:text-base mb-6",children:[i.jsx("button",{onClick:r,className:"bg-gray-800 hover:bg-gray-700 p-2 rounded-full transition-colors text-gray-300",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]}),i.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end justify-between gap-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-4xl font-black text-white mb-2 tracking-tight",children:"  "}),i.jsx("p",{className:"text-gray-400 font-medium",children:"      "})]}),i.jsxs("div",{className:"w-full md:w-auto bg-gray-800 p-2 rounded-2xl shadow-lg border border-gray-600 flex items-center gap-2",children:[i.jsx(zs,{className:"w-5 h-5 text-gray-300 mr-2"}),i.jsx("input",{type:"text",placeholder:"    ...",value:c,onChange:F=>d(F.target.value),className:"w-full md:w-64 outline-none text-sm font-bold text-gray-200 placeholder-gray-500 bg-transparent"})]})]})]})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 -mt-12 relative z-20",children:s?i.jsx("div",{className:"flex justify-center items-center py-20",children:i.jsx(bt,{className:"w-10 h-10 animate-spin text-blue-400"})}):ue.length===0?i.jsxs("div",{className:"bg-gray-800 rounded-3xl shadow-sm border border-white/5 p-12 text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(zo,{className:"w-8 h-8 text-gray-500"})}),i.jsx("h3",{className:"text-xl font-bold text-white",children:"  "}),i.jsx("p",{className:"text-gray-400 mt-1",children:"       ."})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ue.map(F=>i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm hover:shadow-xl transition-all duration-300 border border-white/5 overflow-hidden group flex flex-col",children:[i.jsxs("div",{className:"p-6 flex-1",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("span",{className:"bg-blue-900/30 text-blue-300 px-3 py-1 rounded-lg text-xs font-bold",children:F.subject}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>N(F),className:"bg-emerald-900/20 text-emerald-400 p-1.5 rounded-lg hover:bg-emerald-900/40 transition-colors",title:" ",children:i.jsx(yp,{className:"w-4 h-4"})}),i.jsx("button",{onClick:T=>C(T,F.id),className:"bg-red-900/20 text-red-400 p-1.5 rounded-lg hover:bg-red-900/40 transition-colors",title:" ",children:i.jsx(vi,{className:"w-4 h-4"})})]})]}),i.jsx("h3",{className:"text-xl font-black text-white mb-2 line-clamp-2 group-hover:text-blue-400 transition-colors",children:F.title}),F.category&&i.jsx("span",{className:"inline-block mb-4 bg-amber-900/20 text-amber-400 text-[10px] font-bold px-2 py-1 rounded-md border border-amber-800/50",children:F.category}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-6",children:[i.jsxs("span",{className:"bg-gray-700 px-2 py-0.5 rounded border border-gray-600 font-bold",children:[" ",F.grade]}),i.jsx("span",{className:"text-gray-600",children:"|"}),i.jsxs("span",{className:"bg-gray-700/50 text-gray-400 px-2 py-0.5 rounded-lg text-xs font-bold flex items-center gap-1",children:[i.jsx(Fu,{className:"w-3 h-3"}),ve(F.createdAt)]})]})]}),i.jsxs("div",{className:"bg-gray-900/50 p-4 border-t border-white/5 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full border border-gray-600 flex items-center justify-center shadow-sm text-gray-300",children:i.jsx(es,{className:"w-4 h-4"})}),i.jsx("p",{className:"text-sm font-bold text-gray-300",children:F.teacherName||""})]}),i.jsxs("span",{className:"flex items-center gap-1 text-xs font-bold text-gray-400 bg-gray-700 px-2 py-1 rounded-md border border-gray-600",children:[i.jsx(oa,{className:"w-3 h-3"}),F.questions.length," "]})]})]},F.id))})}),f&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl animate-fade-in-up overflow-hidden border border-gray-700",children:[i.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 p-6 flex justify-between items-center shrink-0 sticky top-0 z-10",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-emerald-900/30 p-2 rounded-xl",children:i.jsx(yp,{className:"w-6 h-6 text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-black text-white",children:" "}),i.jsx("p",{className:"text-sm text-gray-400",children:"     "})]})]}),i.jsx("button",{onClick:()=>g(null),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-gray-400",children:i.jsx(ps,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-900 custom-scrollbar",children:[i.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 mb-8",children:[i.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx(zo,{className:"w-5 h-5 text-blue-400"})," "]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:" "}),i.jsx("input",{type:"text",value:f.title,onChange:F=>V("title",F.target.value),className:ge})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:""}),i.jsx("input",{type:"text",value:f.subject,onChange:F=>V("subject",F.target.value),className:ge})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:""}),i.jsx("select",{value:f.grade,onChange:F=>V("grade",F.target.value),className:ge,children:[5,6,7,8,9,10,11,12].map(F=>i.jsxs("option",{value:F,children:[" ",F]},F))})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:"  (Category)"}),i.jsxs("select",{value:f.category||"Language",onChange:F=>V("category",F.target.value),className:ge,children:[i.jsx("option",{value:"Language",children:"Language ()"}),i.jsx("option",{value:"Reading",children:"Reading ()"}),i.jsx("option",{value:"Writing",children:"Writing ()"}),i.jsx("option",{value:"Vocabulary",children:"Vocabulary ()"})]})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("h3",{className:"font-bold text-white flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(oa,{className:"w-5 h-5 text-blue-400"})," (",f.questions.length,")"]}),i.jsx("span",{className:"text-xs bg-yellow-900/30 text-yellow-300 px-2 py-1 rounded-lg",children:"*        "})]}),f.questions.map((F,T)=>i.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-700 relative group",children:[i.jsx("button",{onClick:()=>me(T),className:"absolute top-4 left-4 p-2 text-gray-400 hover:bg-red-900/20 hover:text-red-400 rounded-lg transition-colors",title:" ",children:i.jsx(vi,{className:"w-5 h-5"})}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("label",{className:"block text-xs font-bold text-gray-400 mb-1.5",children:["  ",T+1]}),i.jsx("input",{type:"text",dir:"ltr",value:F.question,onChange:j=>Z(T,"question",j.target.value),className:"w-full p-3 rounded-xl border-2 border-gray-600 focus:border-emerald-500 outline-none font-bold text-white bg-gray-700 shadow-sm text-lg transition-colors placeholder-gray-400 text-left"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:F.options.map((j,A)=>i.jsxs("div",{className:"relative",children:[i.jsxs("label",{className:"flex items-center justify-between text-xs font-bold text-gray-400 mb-1 px-1",children:[i.jsxs("span",{children:[" ",A+1]}),i.jsxs("button",{onClick:()=>Z(T,"correctAnswer",A),className:`flex items-center gap-1 px-2 py-0.5 rounded cursor-pointer transition-colors ${F.correctAnswer===A?"bg-emerald-900/30 text-emerald-400":"bg-gray-700 text-gray-500 hover:bg-gray-600"}`,children:[F.correctAnswer===A?i.jsx(vn,{className:"w-3 h-3"}):i.jsx("div",{className:"w-3 h-3 border border-gray-400 rounded-full"}),F.correctAnswer===A?" ":" "]})]}),i.jsx("input",{type:"text",dir:"ltr",value:j,onChange:O=>$(T,A,O.target.value),className:`w-full p-3 rounded-xl border-2 outline-none font-bold transition-colors shadow-sm text-left ${F.correctAnswer===A?"border-emerald-500 bg-emerald-900/20 text-emerald-300":"border-gray-600 focus:border-blue-400 text-white bg-gray-700"}`})]},A))}),i.jsxs("div",{className:"bg-yellow-900/20 p-4 rounded-xl border border-yellow-800",children:[i.jsx("label",{className:"block text-xs font-bold text-yellow-200 mb-1",children:" "}),i.jsx("textarea",{value:F.explanation||"",onChange:j=>Z(T,"explanation",j.target.value),className:"w-full p-3 rounded-lg border border-yellow-700 focus:border-yellow-500 outline-none text-gray-200 bg-gray-800 text-sm h-20 resize-none shadow-sm custom-scrollbar text-left",placeholder:"  ...",dir:"ltr"})]})]},T))]})]}),i.jsxs("div",{className:"p-6 bg-gray-800 border-t border-gray-700 flex justify-end gap-3 shrink-0 sticky bottom-0 z-10",children:[i.jsx("button",{onClick:()=>g(null),className:"px-6 py-3 rounded-xl font-bold text-gray-300 bg-gray-700 hover:bg-gray-600 transition-colors",children:""}),i.jsxs("button",{onClick:de,disabled:x,className:"px-8 py-3 rounded-xl font-bold text-white bg-emerald-600 hover:bg-emerald-700 transition-colors flex items-center gap-2 shadow-lg shadow-none",children:[x?i.jsx(bt,{className:"w-5 h-5 animate-spin"}):i.jsx(fi,{className:"w-5 h-5"})," "]})]})]})})]})},XD=[{id:"grammar",title:" (Grammar)",icon:zo,desc:"   ",color:"bg-blue-900/20 text-blue-400"},{id:"reading",title:" (Reading)",icon:ss,desc:"    ",color:"bg-emerald-900/20 text-emerald-400"},{id:"vocabulary",title:" (Vocabulary)",icon:sm,desc:"   ",color:"bg-purple-900/20 text-purple-400"},{id:"writing",title:" (Writing)",icon:rx,desc:"   ",color:"bg-orange-900/20 text-orange-400"}],YD=[{id:"English",title:" ",icon:sm,color:"text-purple-400",bg:"bg-purple-900/20"}],JD=({onBack:r})=>{const{user:e}=Us(),[t,s]=P.useState("INTRO"),[l,c]=P.useState(""),[d,f]=P.useState(""),[g,x]=P.useState(null),[w,v]=P.useState([]),[N,C]=P.useState(!1),[V,Z]=P.useState(null),[$,me]=P.useState(0),[de,ue]=P.useState(""),[ve,ge]=P.useState(!1),[F,T]=P.useState(!1);P.useEffect(()=>{window.scrollTo(0,0)},[t]);const j=()=>s("SUBJECTS"),A=z=>{c(z),s("GRADES")},O=z=>{f(z),s("CATEGORIES")},M=z=>{x(z),s("TOPICS")},k=z=>{Z(z),me(0),ue(""),T(!1),s("DETAILS")};P.useEffect(()=>{t==="TOPICS"&&d&&g&&l&&I()},[t,d,g,l]);const I=async()=>{C(!0);try{const z=cn(at(Pe,"explanations"),Rn("subject","==",l),Rn("grade","==",d),Rn("category","==",g==null?void 0:g.id)),U=await wn(z),ee=[];U.forEach(we=>{ee.push({id:we.id,...we.data()})}),ee.sort((we,Me)=>{var Re,Nt;const Ue=((Re=we.createdAt)==null?void 0:Re.seconds)||0;return(((Nt=Me.createdAt)==null?void 0:Nt.seconds)||0)-Ue}),v(ee)}catch(z){console.error("Error fetching explanations:",z)}finally{C(!1)}},ce=async()=>{if($!==0&&!(!V||!e)){ge(!0);try{await as(at(Pe,"reviews"),{type:"explanation",targetId:V.id,targetTitle:V.title,teacherId:V.teacherName||"",teacherName:V.teacherName||"",rating:$,comment:de,studentId:e.uid,studentName:e.displayName,createdAt:zn()}),T(!0)}catch(z){console.error("Error saving review:",z),alert("    ")}finally{ge(!1)}}},oe=z=>z?(z.toDate?z.toDate():new Date(z.seconds*1e3)).toLocaleDateString("ar-EG"):"",B=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in flex flex-col relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",poster:"https://images.unsplash.com/photo-1497633762265-9d179a990aa6?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",className:"w-full h-full object-cover",children:i.jsx("source",{src:"https://drive.google.com/uc?export=download&id=1wHw0wEWltdWfMqblwZLRgLKZ_ah3lCKm",type:"video/mp4"})}),i.jsx("div",{className:"absolute inset-0 bg-gray-950/70"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-transparent to-gray-950/80"})]}),i.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center flex-1 px-6 text-center pt-10",children:[i.jsx("span",{className:"inline-block px-6 py-2 rounded-full bg-white/10 backdrop-blur-md text-emerald-300 font-bold text-sm mb-6 border border-white/20 shadow-lg animate-fade-in-up",children:"  "}),i.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-white mb-6 leading-tight drop-shadow-2xl animate-fade-in-up delay-100",children:[" ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-400",children:" "})]}),i.jsx("p",{className:"text-gray-200 text-lg md:text-2xl max-w-2xl mx-auto mb-12 leading-relaxed font-medium drop-shadow-md animate-fade-in-up delay-200",children:"         ."}),i.jsxs("button",{onClick:j,className:"w-full md:w-auto bg-white text-gray-900 text-xl font-black px-12 py-5 rounded-2xl hover:scale-105 hover:bg-emerald-50 transition-all shadow-[0_0_30px_rgba(255,255,255,0.3)] flex items-center justify-center gap-3 animate-fade-in-up delay-300",children:[" ",i.jsx(qt,{className:"w-6 h-6"})]})]}),i.jsx("div",{className:"p-6 text-center relative z-10",children:i.jsxs("button",{onClick:r,className:"text-white/70 font-bold hover:text-white transition-colors flex items-center justify-center gap-2 mx-auto",children:[i.jsx(_f,{className:"w-4 h-4"})," "]})})]}),ie=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("INTRO"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("INTRO"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:YD.map(z=>i.jsxs("button",{onClick:()=>A(z.id),className:"bg-gray-900 p-8 rounded-[2.5rem] shadow-sm border border-gray-700 hover:border-emerald-500 hover:shadow-xl hover:-translate-y-2 transition-all group flex flex-col items-center gap-4",children:[i.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center ${z.bg} ${z.color} group-hover:scale-110 transition-transform`,children:i.jsx(z.icon,{className:"w-10 h-10"})}),i.jsx("span",{className:"font-black text-xl text-gray-200 group-hover:text-white",children:z.title})]},z.id))})})]}),Y=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("SUBJECTS"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("SUBJECTS"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4",children:[[5,6,7,8,9,10,11,12].map(z=>i.jsxs("button",{onClick:()=>O(z.toString()),className:"bg-gray-900 p-4 rounded-2xl shadow-sm border border-gray-700 hover:border-emerald-500 hover:shadow-none hover:-translate-y-1 transition-all group flex flex-col items-center gap-2",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 flex items-center justify-center group-hover:bg-emerald-500 transition-colors",children:i.jsx("span",{className:"font-black text-xl text-gray-300 group-hover:text-white",children:z})}),i.jsxs("span",{className:"font-bold text-gray-300 group-hover:text-emerald-400 text-sm md:text-base",children:[" ",z]})]},z)),i.jsxs("button",{onClick:()=>O("English Major - QOU"),className:"col-span-2 md:col-span-3 lg:col-span-4 bg-gradient-to-r from-emerald-600 to-teal-600 p-4 rounded-2xl shadow-lg text-white hover:shadow-xl hover:-translate-y-1 transition-all flex items-center justify-center gap-4",children:[i.jsx("div",{className:"bg-white/20 p-2 rounded-xl",children:i.jsx(bi,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"block font-black text-base md:text-lg",children:"  "}),i.jsx("span",{className:"text-emerald-100 text-xs md:text-sm",children:"  "})]})]})]})})]}),se=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("GRADES"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("GRADES"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:XD.map(z=>i.jsx("button",{onClick:()=>M(z),className:"bg-gray-900 rounded-3xl p-5 shadow-sm border border-gray-700 hover:shadow-xl hover:border-emerald-800 transition-all group text-right relative overflow-hidden",children:i.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[i.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center shrink-0 ${z.color} group-hover:scale-110 transition-transform`,children:i.jsx(z.icon,{className:"w-7 h-7"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-black text-white mb-1",children:z.title}),i.jsx("p",{className:"text-gray-400 text-xs font-medium",children:z.desc})]}),i.jsx("div",{className:"absolute top-1/2 -left-4 -translate-y-1/2 bg-gray-700 p-2 rounded-full opacity-0 group-hover:opacity-100 group-hover:translate-x-2 transition-all",children:i.jsx(ra,{className:"w-5 h-5 text-gray-400"})})]})},z.id))})})]}),Ee=()=>i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("CATEGORIES"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("CATEGORIES"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:g==null?void 0:g.title})]})}),i.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:N?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(bt,{className:"w-8 h-8 animate-spin text-emerald-400"})}):w.length===0?i.jsx("div",{className:"flex flex-col items-center justify-center text-center",children:i.jsxs("div",{className:"bg-gray-900 p-8 rounded-3xl shadow-sm border border-gray-700 max-w-md w-full",children:[i.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:"   "}),i.jsxs("p",{className:"text-gray-400 font-medium leading-relaxed mb-6",children:["      ",i.jsx("span",{className:"text-emerald-600 font-bold",children:g==null?void 0:g.title}),"    ."]}),i.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs font-bold text-gray-400 bg-gray-700 py-2 px-4 rounded-full",children:[i.jsx(qu,{className:"w-4 h-4"}),"     "]})]})}):i.jsx("div",{className:"grid grid-cols-1 gap-4",children:w.map(z=>i.jsxs("button",{onClick:()=>k(z),className:"bg-gray-900 p-5 rounded-2xl shadow-sm border border-gray-700 hover:border-emerald-700 hover:shadow-md transition-all group text-right flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 rounded-xl bg-gray-700 group-hover:bg-emerald-900/20 transition-colors",children:i.jsx(rs,{className:"w-6 h-6 text-gray-500 group-hover:text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-white mb-1 group-hover:text-emerald-400 transition-colors",children:z.title}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 font-medium",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Fu,{className:"w-3 h-3"}),oe(z.createdAt)]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(es,{className:"w-3 h-3"}),z.teacherName]})]})]})]}),i.jsx(ra,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-500 group-hover:-translate-x-1 transition-all"})]},z.id))})})]}),R=()=>V?i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in-up text-gray-100 pb-20",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-4 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>s("TOPICS"),className:"p-2 hover:bg-gray-800 rounded-full transition-colors text-gray-400 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>s("TOPICS"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:g==null?void 0:g.title}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white truncate",children:V.title})]})}),i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-gray-700 overflow-hidden mb-8",children:[i.jsxs("div",{className:"p-6 md:p-8",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6 text-sm text-gray-400 border-b border-gray-700 pb-4",children:[i.jsx("span",{className:"bg-gray-700 px-2 py-1 rounded font-bold",children:d==="English Major - QOU"?"":` ${d}`}),i.jsx(ra,{className:"w-4 h-4"}),i.jsx("span",{className:"bg-gray-700 px-2 py-1 rounded font-bold",children:g==null?void 0:g.title})]}),i.jsx("h1",{className:"text-2xl md:text-3xl font-black text-white mb-6 leading-relaxed",children:V.title}),i.jsx("div",{className:"prose dark:prose-invert max-w-none text-gray-200 whitespace-pre-wrap leading-loose text-lg",children:V.content})]}),i.jsxs("div",{className:"bg-gray-900/50 p-4 border-t border-gray-700 flex justify-between items-center text-sm text-gray-400",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(es,{className:"w-4 h-4"}),i.jsxs("span",{children:[": ",i.jsx("span",{className:"font-bold",children:V.teacherName})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Fu,{className:"w-4 h-4"}),i.jsx("span",{children:oe(V.createdAt)})]})]})]}),e&&i.jsx("div",{className:"bg-gray-900 rounded-[2rem] shadow-xl border border-gray-700 p-6 text-center relative",children:F?i.jsxs("div",{className:"py-6",children:[i.jsx("div",{className:"w-12 h-12 bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-2 text-green-400 border border-green-900",children:i.jsx(ha,{className:"w-6 h-6"})}),i.jsx("h3",{className:"text-white font-bold",children:" !"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"   ."})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3 text-white",children:[i.jsx(rm,{className:"w-5 h-5 text-blue-400"}),i.jsx("h3",{className:"font-bold text-lg",children:"    "})]}),i.jsx("p",{className:"text-gray-400 text-xs mb-4",children:"   10 ()"}),i.jsx("div",{className:"flex justify-center gap-1 mb-4 flex-wrap",children:[1,2,3,4,5,6,7,8,9,10].map(z=>i.jsx("button",{onClick:()=>me(z),className:`w-8 h-8 rounded-lg text-xs font-bold transition-all ${$===z?"bg-blue-500 text-white scale-110":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:z},z))}),i.jsx("textarea",{value:de,onChange:z=>ue(z.target.value),placeholder:"   ()...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl p-3 text-sm text-white outline-none focus:border-blue-500 mb-4 min-h-[80px] resize-none"}),i.jsxs("button",{onClick:ce,disabled:ve||$===0,className:`w-full py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all ${$===0?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[ve?i.jsx(bt,{className:"w-4 h-4 animate-spin"}):i.jsx(ca,{className:"w-4 h-4"})," "]})]})})]})]}):null;return i.jsxs(i.Fragment,{children:[t==="INTRO"&&B(),t==="SUBJECTS"&&ie(),t==="GRADES"&&Y(),t==="CATEGORIES"&&se(),t==="TOPICS"&&Ee(),t==="DETAILS"&&R()]})},v2=[{id:"grammar",title:" (Grammar)",icon:zo},{id:"reading",title:" (Reading)",icon:ss},{id:"vocabulary",title:" (Vocabulary)",icon:sm},{id:"writing",title:" (Writing)",icon:rx}],w2=[{id:"English",title:"  (English)",icon:sm}],WD=({onBack:r,onNavigate:e})=>{const{user:t}=Us(),[s,l]=P.useState(""),[c,d]=P.useState(""),[f,g]=P.useState(""),[x,w]=P.useState(""),[v,N]=P.useState(""),[C,V]=P.useState(!1),[Z,$]=P.useState(!1),[me,de]=P.useState(""),[ue,ve]=P.useState([]),[ge,F]=P.useState(!1),[T,j]=P.useState(!1),[A,O]=P.useState(null),[M,k]=P.useState(!1),I=async()=>{var se;if(!s||!c||!f||!x||!v){alert("    ");return}V(!0);try{await as(at(Pe,"explanations"),{subject:s,grade:c,category:f,title:x,content:v,teacherName:(t==null?void 0:t.displayName)||"",teacherId:t==null?void 0:t.uid,createdAt:zn()}),await as(at(Pe,"notifications"),{recipientId:"all",title:" ",message:`    : ${x}  ${(se=w2.find(Ee=>Ee.id===s))==null?void 0:se.title}`,type:"explanation",createdAt:zn(),read:!1}),$(!0),setTimeout(()=>{$(!1),w(""),N("")},2e3)}catch(Ee){console.error("Error saving explanation:",Ee),alert("   ")}finally{V(!1)}},ce=async()=>{if(me.trim()&&t!=null&&t.uid){F(!0),j(!0),ve([]);try{const se=cn(at(Pe,"explanations"),Rn("title",">=",me),Rn("title","<=",me+"")),Ee=await wn(se),R=[];Ee.forEach(z=>{const U=z.data();U.teacherId===t.uid&&R.push({id:z.id,...U})}),ve(R)}catch(se){console.error("Error searching explanations:",se)}finally{F(!1)}}},oe=async()=>{if(A){k(!0);try{await Vm(Gn(Pe,"explanations",A)),ve(se=>se.filter(Ee=>Ee.id!==A)),O(null)}catch(se){console.error(se),alert("   ")}finally{k(!1)}}},B=()=>{r?r():e("HOME")},ie=se=>se?(se.toDate?se.toDate():new Date(se.seconds*1e3)).toLocaleDateString("ar-EG"):"",Y=se=>{const Ee=v2.find(R=>R.id===se);return Ee?Ee.title:se};return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:B,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:B,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:"  "})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8 mb-12",children:[i.jsxs("h2",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(Ef,{className:"w-6 h-6 text-purple-500"}),"  "]}),Z?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[i.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:i.jsx(vn,{className:"w-10 h-10 text-green-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"      ."}),i.jsx("button",{onClick:()=>$(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"1.   "}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:w2.map(se=>i.jsxs("button",{onClick:()=>l(se.id),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all ${s===se.id?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:[i.jsx(se.icon,{className:"w-6 h-6"}),i.jsx("span",{children:se.title})]},se.id))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"2.   "}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[[5,6,7,8,9,10,11,12].map(se=>i.jsxs("button",{onClick:()=>d(se.toString()),className:`py-3 rounded-xl font-bold transition-all border-2 ${c===se.toString()?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:[" ",se]},se)),i.jsx("button",{onClick:()=>d("English Major - QOU"),className:`col-span-2 sm:col-span-4 py-3 rounded-xl font-bold transition-all border-2 ${c==="English Major - QOU"?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-gray-800 text-gray-300 border-gray-700 hover:border-purple-500/50"}`,children:"  "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"3.   ()"}),i.jsx("div",{className:"grid grid-cols-2 gap-4",children:v2.map(se=>i.jsxs("button",{onClick:()=>g(se.id),className:`flex items-center gap-3 p-4 rounded-xl border-2 transition-all text-right ${f===se.id?"bg-purple-900/20 border-purple-500 text-purple-300":"bg-gray-800 border-gray-700 text-gray-300 hover:border-purple-500/50"}`,children:[i.jsx("div",{className:`p-2 rounded-lg ${f===se.id?"bg-purple-800":"bg-gray-700"}`,children:i.jsx(se.icon,{className:"w-5 h-5"})}),i.jsx("span",{className:"font-bold",children:se.title})]},se.id))})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"  / "}),i.jsx("input",{type:"text",value:x,onChange:se=>w(se.target.value),placeholder:":   Present Simple",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-purple-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("textarea",{value:v,onChange:se=>N(se.target.value),placeholder:"  ...",className:"w-full h-64 px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-purple-500 outline-none font-medium text-white bg-gray-800 transition-all resize-none leading-relaxed"}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"          ."})]})]}),i.jsx("div",{className:"pt-4 border-t border-white/5 flex justify-end",children:i.jsxs("button",{onClick:I,disabled:C,className:"bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center gap-2 transform hover:-translate-y-1",children:[C?i.jsx(bt,{className:"w-5 h-5 animate-spin"}):i.jsx(fi,{className:"w-5 h-5"}),"  "]})})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:[i.jsxs("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(vi,{className:"w-6 h-6 text-red-500"}),"  ()"]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"    ...",value:me,onChange:se=>de(se.target.value),onKeyDown:se=>se.key==="Enter"&&ce(),className:"w-full px-5 py-3 pl-12 rounded-xl bg-gray-800 border border-gray-700 focus:border-red-500 outline-none text-white font-bold"}),i.jsx("button",{onClick:ce,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-700 hover:bg-gray-600 p-2 rounded-lg text-gray-300 transition-colors",children:ge?i.jsx(bt,{className:"w-4 h-4 animate-spin"}):i.jsx(zs,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2 mr-1",children:"      .        ."})]}),ue.length>0?i.jsx("div",{className:"space-y-3 animate-fade-in",children:ue.map(se=>i.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl border border-gray-700 flex items-center justify-between group hover:border-red-500/50 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-900/20 flex items-center justify-center text-purple-400 shrink-0",children:i.jsx(rs,{className:"w-5 h-5"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("h4",{className:"font-bold text-white truncate mb-1",children:se.title}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:se.subject||"English"}),i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:Y(se.category)}),i.jsx("span",{children:se.grade==="English Major - QOU"?"":` ${se.grade}`}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Fu,{className:"w-3 h-3"})," ",ie(se.createdAt)]})]})]})]}),i.jsx("button",{onClick:()=>se.id&&O(se.id),className:"p-2 bg-red-900/20 text-red-400 rounded-lg hover:bg-red-600 hover:text-white transition-colors",title:" ",children:i.jsx(vi,{className:"w-4 h-4"})})]},se.id))}):T&&!ge&&i.jsxs("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:[i.jsx(Ef,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),i.jsx("p",{children:"      "})]})]})]}),A&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl p-8 max-w-sm w-full border border-gray-700 shadow-2xl text-center transform scale-100",children:[i.jsx("div",{className:"w-16 h-16 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-red-500/20",children:i.jsx(lx,{className:"w-8 h-8 text-red-500"})}),i.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 mb-8 text-sm",children:"            ."}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:oe,disabled:M,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:M?i.jsx(bt,{className:"w-4 h-4 animate-spin"}):" "}),i.jsx("button",{onClick:()=>O(null),disabled:M,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-colors",children:""})]})]})})]})},ZD=[{id:"handouts",title:" ",icon:rs,color:"text-blue-400",bg:"bg-blue-900/20"},{id:"worksheets",title:" ",icon:Ro,color:"text-emerald-400",bg:"bg-emerald-900/20"},{id:"exams",title:"  ",icon:ss,color:"text-purple-400",bg:"bg-purple-900/20"}],eM=[{id:"English",title:"  (English)"},{id:"Math",title:""},{id:"Science",title:""}],tM=({onBack:r,onNavigate:e})=>{const{user:t}=Us(),[s,l]=P.useState(""),[c,d]=P.useState(""),[f,g]=P.useState(""),[x,w]=P.useState(""),[v,N]=P.useState(""),[C,V]=P.useState(!1),[Z,$]=P.useState(!1),[me,de]=P.useState(""),[ue,ve]=P.useState([]),[ge,F]=P.useState(!1),[T,j]=P.useState(!1),[A,O]=P.useState(null),[M,k]=P.useState(!1),I=async()=>{if(!s||!c||!f||!x||!v){alert("    ");return}if(!v.startsWith("http")){alert("        http  https");return}V(!0);try{await as(at(Pe,"study_materials"),{grade:s,subject:c,category:f,title:x,url:v,size:"Drive Link",teacherName:(t==null?void 0:t.displayName)||"",teacherId:t==null?void 0:t.uid,createdAt:zn()}),await as(at(Pe,"notifications"),{recipientId:"all",title:"  ",message:`   : ${x}  ${s}`,type:"file",createdAt:zn(),read:!1}),$(!0),setTimeout(()=>{$(!1),w(""),N("")},2e3)}catch(Y){console.error("Error saving file:",Y),alert("   ")}finally{V(!1)}},ce=async()=>{if(me.trim()&&t!=null&&t.uid){F(!0),j(!0),ve([]);try{const Y=cn(at(Pe,"study_materials"),Rn("title",">=",me),Rn("title","<=",me+"")),se=await wn(Y),Ee=[];se.forEach(R=>{const z=R.data();z.teacherId===t.uid&&Ee.push({id:R.id,...z})}),ve(Ee)}catch(Y){console.error("Error searching files:",Y)}finally{F(!1)}}},oe=async()=>{if(A){k(!0);try{await Vm(Gn(Pe,"study_materials",A)),ve(Y=>Y.filter(se=>se.id!==A)),O(null)}catch(Y){console.error(Y),alert("   ")}finally{k(!1)}}},B=()=>{r?r():e("PROFILE")},ie=Y=>Y?(Y.toDate?Y.toDate():new Date(Y.seconds*1e3)).toLocaleDateString("ar-EG"):"";return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:B,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:B,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:"  "})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8 mb-12",children:[i.jsxs("h2",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(j2,{className:"w-6 h-6 text-blue-500"}),"  "]}),Z?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-fade-in",children:[i.jsx("div",{className:"w-20 h-20 bg-green-900 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:i.jsx(vn,{className:"w-10 h-10 text-green-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"  !"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"       ."}),i.jsx("button",{onClick:()=>$(!1),className:"bg-gray-800 text-gray-300 px-6 py-2 rounded-xl font-bold hover:bg-gray-700 transition-colors border border-white/5",children:"  "})]}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[i.jsx(bi,{className:"w-4 h-4 text-blue-500"})," "]}),i.jsxs("select",{value:s,onChange:Y=>l(Y.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"",children:" "}),[5,6,7,8,9,10,11,12].map(Y=>i.jsxs("option",{value:Y.toString(),children:[" ",Y]},Y)),i.jsx("option",{value:"English Major - QOU",children:"  "})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[i.jsx(ss,{className:"w-4 h-4 text-blue-500"}),""]}),i.jsxs("select",{value:c,onChange:Y=>d(Y.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 bg-gray-800 focus:border-blue-500 outline-none font-bold text-white appearance-none cursor-pointer",children:[i.jsx("option",{value:"",children:" "}),eM.map(Y=>i.jsx("option",{value:Y.id,children:Y.title},Y.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-3",children:"  ()"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:ZD.map(Y=>i.jsxs("button",{onClick:()=>g(Y.id),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all text-center h-full ${f===Y.id?"bg-blue-900/30 border-blue-500 text-blue-300 ring-1 ring-blue-500":"bg-gray-800 border-gray-700 text-gray-300 hover:border-blue-500/50"}`,children:[i.jsx("div",{className:`p-2 rounded-lg ${Y.bg}`,children:i.jsx(Y.icon,{className:`w-6 h-6 ${Y.color}`})}),i.jsx("span",{className:"font-bold text-sm",children:Y.title})]},Y.id))})]}),i.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:" "}),i.jsx("input",{type:"text",value:x,onChange:Y=>w(Y.target.value),placeholder:":    -  ",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-bold text-white bg-gray-800 transition-all"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[i.jsx(N5,{className:"w-4 h-4 text-blue-500"}),"  (Google Drive Link)"]}),i.jsx("input",{type:"url",value:v,onChange:Y=>N(Y.target.value),placeholder:"https://drive.google.com/file/d/...",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-700 focus:border-blue-500 outline-none font-medium text-blue-400 bg-gray-800 transition-all text-left",dir:"ltr"}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:'    " " (Anyone with the link)    .'})]})]}),i.jsx("div",{className:"pt-4 flex justify-end",children:i.jsxs("button",{onClick:I,disabled:C,className:"w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white px-10 py-3 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2 transform hover:-translate-y-1",children:[C?i.jsx(bt,{className:"w-5 h-5 animate-spin"}):i.jsx(fi,{className:"w-5 h-5"}),"  "]})})]})]}),i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-sm border border-white/5 p-6 md:p-8",children:[i.jsxs("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(vi,{className:"w-6 h-6 text-red-500"}),"  ()"]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"    ...",value:me,onChange:Y=>de(Y.target.value),onKeyDown:Y=>Y.key==="Enter"&&ce(),className:"w-full px-5 py-3 pl-12 rounded-xl bg-gray-800 border border-gray-700 focus:border-red-500 outline-none text-white font-bold"}),i.jsx("button",{onClick:ce,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-700 hover:bg-gray-600 p-2 rounded-lg text-gray-300 transition-colors",children:ge?i.jsx(bt,{className:"w-4 h-4 animate-spin"}):i.jsx(zs,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2 mr-1",children:"      .        ."})]}),ue.length>0?i.jsx("div",{className:"space-y-3 animate-fade-in",children:ue.map(Y=>i.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl border border-gray-700 flex items-center justify-between group hover:border-red-500/50 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-900/20 flex items-center justify-center text-blue-400 shrink-0",children:i.jsx(rs,{className:"w-5 h-5"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("h4",{className:"font-bold text-white truncate mb-1",children:Y.title}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[i.jsx("span",{className:"bg-gray-700 px-1.5 py-0.5 rounded",children:Y.subject}),i.jsx("span",{children:Y.grade==="English Major - QOU"?"":` ${Y.grade}`}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Fu,{className:"w-3 h-3"})," ",ie(Y.createdAt)]})]})]})]}),i.jsx("button",{onClick:()=>Y.id&&O(Y.id),className:"p-2 bg-red-900/20 text-red-400 rounded-lg hover:bg-red-600 hover:text-white transition-colors",title:" ",children:i.jsx(vi,{className:"w-4 h-4"})})]},Y.id))}):T&&!ge&&i.jsxs("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:[i.jsx(rs,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),i.jsx("p",{children:"      "})]})]})]}),A&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl p-8 max-w-sm w-full border border-gray-700 shadow-2xl text-center transform scale-100",children:[i.jsx("div",{className:"w-16 h-16 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-red-500/20",children:i.jsx(lx,{className:"w-8 h-8 text-red-500"})}),i.jsx("h3",{className:"text-xl font-black text-white mb-2",children:" "}),i.jsx("p",{className:"text-gray-400 mb-8 text-sm",children:"            ."}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:oe,disabled:M,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:M?i.jsx(bt,{className:"w-4 h-4 animate-spin"}):" "}),i.jsx("button",{onClick:()=>O(null),disabled:M,className:"flex-1 bg-gray-800 hover:bg-gray-700 text-gray-300 py-3 rounded-xl font-bold transition-colors",children:""})]})]})})]})},hp=({title:r,subtitle:e,description:t,icon:s,secondaryIcon:l,buttonText:c,onClick:d,theme:f,direction:g,isLast:x=!1})=>{const v={emerald:{gradient:"from-emerald-500/20 to-teal-500/20",border:"border-emerald-500/20",text:"text-emerald-400",bgIcon:"bg-emerald-500/10",button:"bg-gradient-to-r from-emerald-600 to-teal-600 shadow-emerald-500/20",glow:"bg-emerald-500/30",divider:"from-transparent via-emerald-500 to-transparent"},violet:{gradient:"from-violet-500/20 to-purple-500/20",border:"border-violet-500/20",text:"text-violet-400",bgIcon:"bg-violet-500/10",button:"bg-gradient-to-r from-violet-600 to-purple-600 shadow-violet-500/20",glow:"bg-violet-500/30",divider:"from-transparent via-violet-500 to-transparent"},sky:{gradient:"from-sky-500/20 to-blue-500/20",border:"border-sky-500/20",text:"text-sky-400",bgIcon:"bg-sky-500/10",button:"bg-gradient-to-r from-sky-600 to-blue-600 shadow-sky-500/20",glow:"bg-sky-500/30",divider:"from-transparent via-sky-500 to-transparent"}}[f],N=g==="rtl"?"md:flex-row":"md:flex-row-reverse",C=g==="rtl"?"md:text-right":"md:text-left";return i.jsxs("div",{className:"relative py-16 md:py-28 overflow-hidden group",children:[i.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-12 relative z-10",children:i.jsxs("div",{className:`flex flex-col items-center gap-10 md:gap-20 ${N}`,children:[i.jsxs("div",{className:"w-full md:w-1/2 flex justify-center relative",children:[i.jsx("div",{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 md:w-96 md:h-96 rounded-full blur-[60px] md:blur-[100px] opacity-40 animate-pulse ${v.glow}`}),i.jsxs("div",{className:`relative w-72 h-72 md:w-full md:max-w-md md:aspect-square rounded-[2.5rem] md:rounded-[3rem] border ${v.border} bg-gray-900/60 backdrop-blur-xl shadow-2xl flex items-center justify-center overflow-hidden group-hover:scale-[1.02] transition-transform duration-700`,children:[i.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"}),i.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-6",children:[i.jsx("div",{className:`p-6 md:p-8 rounded-3xl ${v.bgIcon} border ${v.border} shadow-[0_0_50px_rgba(0,0,0,0.5)] backdrop-blur-sm transform rotate-3 group-hover:rotate-0 transition-all duration-500`,children:i.jsx(s,{className:`w-20 h-20 md:w-32 md:h-32 ${v.text} drop-shadow-lg`,strokeWidth:1.5})}),i.jsx("div",{className:`absolute -bottom-10 -right-10 md:-bottom-12 md:-right-12 p-4 md:p-5 rounded-2xl bg-gray-800/80 border ${v.border} shadow-xl backdrop-blur-md transform -rotate-6 group-hover:rotate-0 transition-all duration-700 delay-100`,children:i.jsx(l,{className:`w-8 h-8 md:w-10 md:h-10 ${v.text}`})})]})]})]}),i.jsxs("div",{className:`w-full md:w-1/2 text-center ${C} space-y-6 md:space-y-8`,children:[i.jsxs("div",{className:"space-y-3 md:space-y-4",children:[i.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 md:px-4 md:py-1.5 rounded-full bg-gray-900/50 border ${v.border} ${v.text} text-xs md:text-sm font-bold shadow-sm backdrop-blur-md`,children:[i.jsx(l,{className:"w-3.5 h-3.5 md:w-4 md:h-4"}),i.jsx("span",{children:e})]}),i.jsx("h2",{className:"text-3xl md:text-5xl lg:text-6xl font-black text-white leading-tight drop-shadow-xl",children:r})]}),i.jsx("p",{className:"text-base md:text-xl text-gray-300 leading-relaxed md:leading-loose font-medium opacity-90 max-w-xl mx-auto md:mx-0",children:t}),i.jsx("div",{className:"pt-2 md:pt-4",children:i.jsxs("button",{onClick:d,className:`w-full md:w-auto inline-flex justify-center items-center gap-3 ${v.button} text-white text-base md:text-lg font-bold px-8 py-4 rounded-2xl shadow-lg hover:shadow-2xl transition-all transform hover:-translate-y-1 active:scale-95 border-t border-white/10`,children:[c,i.jsx(qt,{className:`w-5 h-5 ${g==="rtl"?"rotate-180":""}`})]})})]})]})}),!x&&i.jsxs("div",{className:"absolute bottom-0 left-0 w-full flex justify-center items-center",children:[i.jsx("div",{className:`w-full h-px bg-gradient-to-r ${v.divider} opacity-30`}),i.jsx("div",{className:`absolute w-3/4 h-1 bg-gradient-to-r ${v.divider} blur-sm opacity-50`}),i.jsx("div",{className:"absolute w-1/2 h-0.5 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_20px_rgba(16,185,129,0.8)] opacity-80"})]})]})},nM=({onNavigate:r})=>i.jsxs("div",{className:"bg-gray-950 relative z-10",children:[i.jsx(hp,{theme:"emerald",direction:"rtl",title:" ..  ",subtitle:"  ",description:"       !              .           .",icon:T2,secondaryIcon:vn,buttonText:"  ",onClick:()=>r("QUIZZES")}),i.jsx(hp,{theme:"violet",direction:"ltr",title:"   ",subtitle:" ",description:"         .                     .",icon:qu,secondaryIcon:q4,buttonText:" ",onClick:()=>r("LESSONS_EXPLANATIONS")}),i.jsx(hp,{theme:"sky",direction:"rtl",title:"  ",subtitle:"   ",description:"    .               .            .",icon:Ro,secondaryIcon:J4,buttonText:" ",onClick:()=>r("LESSONS"),isLast:!0})]}),sM=()=>i.jsx("section",{className:"relative w-full overflow-hidden bg-gray-950",children:i.jsxs("div",{className:"w-full h-[650px] md:h-[900px] relative group",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/11PvY6sdTvurXqkNuWjoEpYTcM8FUHOB0",alt:".    -  ",className:"w-full h-full object-cover object-top transition-transform duration-1000 group-hover:scale-105"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-950 via-gray-900/40 to-transparent"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/90 via-transparent to-gray-950/90"})]}),i.jsx("div",{className:"absolute bottom-0 left-0 w-full p-8 md:p-24 flex flex-col items-center text-center z-20",children:i.jsxs("div",{className:"max-w-5xl mx-auto transform translate-y-0 transition-all duration-700",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-5xl md:text-8xl font-black text-white mb-6 drop-shadow-2xl tracking-tight",children:".   "}),i.jsx("div",{className:"h-2 w-40 bg-emerald-500 rounded-full mx-auto mb-8 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),i.jsx("p",{className:"text-2xl md:text-4xl text-emerald-400 font-bold drop-shadow-lg tracking-wide",children:"   "})]}),i.jsx("div",{className:"relative",children:i.jsx("p",{className:"text-gray-200 text-xl md:text-3xl leading-loose font-medium relative z-10 px-4 max-w-4xl mx-auto drop-shadow-md",children:"          .              ."})})]})})]})}),rM=({onLoginClick:r})=>i.jsxs("section",{className:"py-32 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950 via-emerald-950/40 to-gray-950"}),i.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"}),i.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-emerald-500/50 to-transparent"}),i.jsxs("div",{className:"max-w-5xl mx-auto px-6 relative z-10 text-center",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-sm font-bold mb-8 animate-pulse",children:[i.jsx(R2,{className:"w-4 h-4"}),i.jsx("span",{children:"  "})]}),i.jsxs("h2",{className:"text-5xl md:text-7xl font-black text-white mb-8 leading-tight tracking-tight drop-shadow-2xl",children:["  ",i.jsx("br",{}),i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400",children:" "})]}),i.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto mb-12 leading-relaxed font-medium",children:"      .         ."}),i.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:i.jsxs("button",{onClick:r,className:"w-full sm:w-auto bg-white text-emerald-950 px-10 py-5 rounded-2xl font-black text-xl hover:bg-emerald-50 transition-all shadow-[0_0_40px_rgba(255,255,255,0.2)] hover:shadow-[0_0_60px_rgba(16,185,129,0.4)] transform hover:-translate-y-1 flex items-center justify-center gap-3",children:["  ",i.jsx(qt,{className:"w-6 h-6"})]})})]})]}),aM=()=>i.jsxs("section",{className:"relative w-full min-h-[800px] flex items-center bg-gray-950 overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("img",{src:"https://lh3.googleusercontent.com/d/1ZcMqKedYcXUq7RPYqUGCRr2RsEA6F6JN",alt:"  ",className:"w-full h-full object-cover object-center opacity-30"}),i.jsx("div",{className:"absolute top-0 left-0 w-full h-64 bg-gradient-to-b from-gray-950 via-gray-950/80 to-transparent"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-full h-64 bg-gradient-to-t from-gray-950 via-gray-950/80 to-transparent"}),i.jsx("div",{className:"absolute inset-0 bg-gray-950/50"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950/80 via-transparent to-gray-950/80"})]}),i.jsx("div",{className:"relative z-10 w-full py-24 px-6 md:px-12 flex flex-col justify-center h-full",children:i.jsxs("div",{className:"max-w-4xl mx-auto text-center transform translate-y-0 transition-all duration-700 animate-fade-in-up",children:[i.jsx("h2",{className:"text-4xl md:text-7xl font-black text-white mb-8 drop-shadow-2xl tracking-tight",children:" "}),i.jsx("div",{className:"h-1.5 w-32 bg-emerald-500 rounded-full mx-auto mb-12 shadow-[0_0_20px_rgba(16,185,129,0.6)]"}),i.jsxs("div",{className:"space-y-8 text-gray-100 font-medium leading-relaxed drop-shadow-lg",children:[i.jsx("p",{className:"text-2xl md:text-4xl font-black text-emerald-400 mb-6",children:" :   "}),i.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"            .                    ."}),i.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                         .        ."}),i.jsx("p",{className:"text-lg md:text-2xl opacity-95 leading-loose",children:"                                      ."})]})]})})]}),Sy=()=>{const r=P.useRef(null);return P.useEffect(()=>{const e=r.current;if(!e)return;const t=e.getContext("2d");if(!t)return;let s,l=window.innerWidth,c=window.innerHeight;const d=l<768?150:400,f=.1,g=["255, 255, 255","50, 150, 255","255, 80, 80","80, 255, 120","255, 215, 0"];e.width=l,e.height=c;const x=[];for(let N=0;N<d;N++)x.push({x:Math.random()*l,y:Math.random()*c,z:Math.random()*l,size:Math.random()*2,color:g[Math.floor(Math.random()*g.length)],alpha:Math.random()});const w=()=>{l=window.innerWidth,c=window.innerHeight,e.width=l,e.height=c};window.addEventListener("resize",w);const v=()=>{t.clearRect(0,0,l,c),x.forEach(N=>{Math.random()>.99&&(N.alpha=Math.random()),N.y-=f*(N.size*.5),N.y<0&&(N.y=c,N.x=Math.random()*l),t.beginPath(),t.fillStyle=`rgba(${N.color}, ${N.alpha})`,t.arc(N.x,N.y,N.size,0,Math.PI*2),t.fill()}),s=requestAnimationFrame(v)};return v(),()=>{window.removeEventListener("resize",w),cancelAnimationFrame(s)}},[]),i.jsx("canvas",{ref:r,className:"fixed inset-0 pointer-events-none z-0",style:{opacity:1}})},iM=({onBack:r})=>{const e=[{icon:T2,title:" ",desc:"              ."},{icon:lA,title:" 24/7",desc:"                 ."},{icon:am,title:"  (XP)",desc:"  !    (XP)         ."},{icon:rs,title:" ",desc:"           ."}];return i.jsxs("div",{className:"min-h-screen bg-gray-950 relative overflow-hidden text-gray-100",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx(Sy,{}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/90 via-gray-900/60 to-gray-950 pointer-events-none"}),i.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-20"})]}),i.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[i.jsx("div",{className:"border-b border-white/10 py-6 px-4 sticky top-0 z-30 backdrop-blur-md bg-gray-950/30",children:i.jsxs("div",{className:"max-w-3xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:r,className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-12 pb-20",children:[i.jsxs("div",{className:"text-center mb-16 animate-fade-in-up",children:[i.jsxs("div",{className:"inline-flex items-center justify-center p-5 bg-emerald-500/10 backdrop-blur-xl rounded-full mb-8 border border-emerald-500/30 shadow-[0_0_40px_rgba(16,185,129,0.3)] relative group",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 rounded-full blur-xl group-hover:blur-2xl transition-all"}),i.jsx(yl,{className:"w-12 h-12 text-emerald-400 fill-emerald-400 animate-pulse relative z-10"})]}),i.jsxs("h1",{className:"text-5xl md:text-6xl font-black text-white mb-6 leading-tight drop-shadow-2xl",children:["   ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-300",children:""}),""]}),i.jsx("p",{className:"text-xl text-gray-200 leading-relaxed max-w-2xl mx-auto font-medium drop-shadow-md",children:"                     ."})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 shadow-2xl border border-white/10 mb-16 relative overflow-hidden group hover:bg-white/10 transition-all duration-500",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-600/20 rounded-full blur-[80px] -mr-16 -mt-16 pointer-events-none"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-purple-600/20 rounded-full blur-[80px] -ml-16 -mb-16 pointer-events-none"}),i.jsxs("h2",{className:"text-3xl font-black text-white mb-8 flex items-center gap-3 relative z-10",children:[i.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl border border-blue-500/30",children:i.jsx(ix,{className:"w-8 h-8 text-blue-400"})})," "]}),i.jsxs("div",{className:"space-y-6 text-gray-200 font-medium leading-loose text-lg relative z-10",children:[i.jsx("p",{children:'  ""         .                    .'}),i.jsxs("p",{children:["       ",i.jsx("span",{className:"text-white font-bold border-b-2 border-emerald-500 shadow-[0_4px_20px_-5px_rgba(16,185,129,0.5)]",children:"  "}),".                ."]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-16",children:e.map((t,s)=>i.jsxs("div",{className:"bg-gray-900/40 backdrop-blur-md p-6 rounded-3xl border border-white/10 flex flex-col gap-4 hover:border-emerald-500/40 hover:bg-gray-900/60 transition-all group hover:-translate-y-2 shadow-lg",children:[i.jsx("div",{className:"bg-gray-800/50 p-4 rounded-2xl w-fit group-hover:bg-emerald-900/30 transition-colors border border-white/5 group-hover:border-emerald-500/20",children:i.jsx(t.icon,{className:"w-8 h-8 text-gray-300 group-hover:text-emerald-400 transition-colors"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-emerald-300 transition-colors",children:t.title}),i.jsx("p",{className:"text-gray-400 text-sm leading-relaxed group-hover:text-gray-300",children:t.desc})]})]},s))}),i.jsxs("div",{className:"bg-gradient-to-br from-emerald-900/40 to-gray-900/40 backdrop-blur-md rounded-[2.5rem] p-8 md:p-10 border border-emerald-500/20 text-center shadow-2xl relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"}),i.jsx("h2",{className:"text-3xl font-black text-white mb-8 relative z-10",children:"  "}),i.jsxs("div",{className:"flex flex-col gap-4 relative z-10",children:[i.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[i.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:i.jsx(vn,{className:"w-6 h-6 text-emerald-400"})}),i.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"      ."})]}),i.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[i.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:i.jsx(vn,{className:"w-6 h-6 text-emerald-400"})}),i.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:" ."})]}),i.jsxs("div",{className:"bg-gray-950/40 p-5 rounded-2xl flex items-center gap-4 border border-white/10 hover:border-emerald-500/30 transition-colors",children:[i.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full shrink-0",children:i.jsx(vn,{className:"w-6 h-6 text-emerald-400"})}),i.jsx("span",{className:"text-gray-200 font-bold text-right text-lg",children:"       ."})]})]})]}),i.jsx("div",{className:"mt-16 text-center",children:i.jsxs("p",{className:"text-gray-400 text-sm font-medium bg-gray-900/50 inline-block px-6 py-3 rounded-full border border-white/5 backdrop-blur-sm",children:["  ",i.jsx("span",{className:"text-emerald-400 font-black",children:"   "})]})})]})]})]})},lM=({onNavigate:r})=>i.jsxs("div",{className:"relative w-full py-20 overflow-hidden bg-gray-950 border-t border-white/5 border-b border-white/5",children:[i.jsx("div",{className:"absolute inset-0 z-0 opacity-100",children:i.jsx(Sy,{})}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-950 via-transparent to-gray-950 z-0 pointer-events-none"}),i.jsxs("div",{className:"relative z-10 max-w-5xl mx-auto px-6 text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-white/5 rounded-full mb-6 shadow-[0_0_30px_rgba(255,255,255,0.1)] border border-white/10 animate-pulse",children:i.jsx(yl,{className:"w-8 h-8 text-emerald-400 fill-emerald-400"})}),i.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-white mb-6 drop-shadow-2xl leading-tight",children:["   ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300",children:""}),""]}),i.jsx("p",{className:"text-gray-300 text-xl md:text-2xl max-w-3xl mx-auto mb-10 leading-relaxed font-medium drop-shadow-md",children:"                ."}),i.jsxs("button",{onClick:r,className:"inline-flex items-center gap-3 bg-emerald-600 hover:bg-emerald-500 text-white text-lg font-bold px-10 py-4 rounded-2xl shadow-lg hover:shadow-[0_0_25px_rgba(16,185,129,0.5)] transition-all transform hover:-translate-y-1 border-b-4 border-emerald-800 hover:border-emerald-700 active:border-b-0 active:translate-y-1",children:[i.jsx("span",{children:" "}),i.jsx(qt,{className:"w-5 h-5"})]})]})]}),oM=({onBack:r,onNavigate:e})=>{const{user:t}=Us(),[s,l]=P.useState("INBOX"),[c,d]=P.useState([]),[f,g]=P.useState(""),[x,w]=P.useState(""),[v,N]=P.useState(""),[C,V]=P.useState(!1),[Z,$]=P.useState(!1),[me,de]=P.useState(""),[ue,ve]=P.useState([]),[ge,F]=P.useState(!1);P.useEffect(()=>{s==="COMPOSE"?T():j()},[s,t]);const T=async()=>{$(!0);try{const ce=cn(at(Pe,"users"),Rn("role","==","student")),B=(await wn(ce)).docs.map(ie=>({id:ie.id,...ie.data()}));d(B)}catch(ce){console.error("Error fetching students",ce)}finally{$(!1)}},j=async()=>{if(t){F(!0);try{const ce=cn(at(Pe,"contact_messages"),Rn("teacherId","==",t.uid)),B=(await wn(ce)).docs.map(ie=>({id:ie.id,...ie.data()}));B.sort((ie,Y)=>{var R,z;const se=((R=ie.createdAt)==null?void 0:R.seconds)||0;return(((z=Y.createdAt)==null?void 0:z.seconds)||0)-se}),ve(B)}catch(ce){console.error("Error fetching inbox",ce)}finally{F(!1)}}},A=async()=>{if(!x||!v){alert("    ");return}if(!f){alert("  ");return}V(!0);try{await as(at(Pe,"notifications"),{recipientId:f,title:x,message:v,type:"message",senderName:(t==null?void 0:t.displayName)||"",senderId:t==null?void 0:t.uid,createdAt:zn(),read:!1}),alert("   !"),w(""),N(""),g(""),de("")}catch(ce){console.error("Error sending message",ce),alert("   ")}finally{V(!1)}},O=async ce=>{if(window.confirm("      "))try{await Vm(Gn(Pe,"contact_messages",ce)),ve(oe=>oe.filter(B=>B.id!==ce))}catch(oe){console.error(oe)}},M=async ce=>{try{await Ed(Gn(Pe,"contact_messages",ce),{read:!0}),ve(oe=>oe.map(B=>B.id===ce?{...B,read:!0}:B))}catch(oe){console.error(oe)}},k=c.filter(ce=>{const oe=ce.displayName?ce.displayName.toLowerCase():"",B=ce.email?ce.email.toLowerCase():"",ie=me.toLowerCase();return oe.includes(ie)||B.includes(ie)}),I=ce=>ce?(ce.toDate?ce.toDate():new Date(ce.seconds*1e3)).toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(",",""):"";return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-5xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>e("PROFILE"),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>e("PROFILE"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:""})]})}),i.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-xl border border-gray-700 overflow-hidden min-h-[600px] flex flex-col md:flex-row",children:[i.jsxs("div",{className:"w-full md:w-64 bg-gray-800/50 border-l border-gray-700 p-4 flex flex-col gap-2",children:[i.jsxs("button",{onClick:()=>l("INBOX"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${s==="INBOX"?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:[i.jsx(jr,{className:"w-5 h-5"})," ",ue.some(ce=>!ce.read)&&i.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"})]}),i.jsxs("button",{onClick:()=>l("COMPOSE"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${s==="COMPOSE"?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:[i.jsx(ca,{className:"w-5 h-5"})," "]})]}),i.jsx("div",{className:"flex-1 p-6 md:p-8 overflow-y-auto",children:s==="COMPOSE"?i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("h2",{className:"text-2xl font-black text-white mb-6 flex items-center gap-2",children:[i.jsx(ca,{className:"w-6 h-6 text-emerald-400"}),"  "]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:":"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"flex gap-4",children:i.jsxs("label",{className:`flex items-center gap-2 cursor-pointer bg-gray-800 px-4 py-3 rounded-xl border transition-colors flex-1 ${f==="all"?"border-emerald-500 bg-emerald-900/20":"border-gray-700 hover:border-emerald-500"}`,children:[i.jsx("input",{type:"radio",name:"recipient",checked:f==="all",onChange:()=>g("all"),className:"w-4 h-4 accent-emerald-500"}),i.jsx("span",{className:"font-bold text-sm text-white",children:" "}),i.jsx(ox,{className:"w-4 h-4 text-emerald-400 mr-auto"})]})}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:i.jsx(zs,{className:"h-4 w-4 text-gray-500"})}),i.jsx("input",{type:"text",placeholder:"    ...",value:me,onChange:ce=>{de(ce.target.value),f==="all"&&g("")},className:"block w-full pr-10 pl-3 py-3 border border-gray-700 rounded-xl leading-5 bg-gray-800 text-gray-300 placeholder-gray-500 focus:outline-none focus:bg-gray-900 focus:border-emerald-500 transition duration-150 ease-in-out sm:text-sm font-bold"})]}),me&&i.jsx("div",{className:"max-h-40 overflow-y-auto bg-gray-800 border border-gray-700 rounded-xl custom-scrollbar",children:k.map(ce=>i.jsxs("div",{onClick:()=>{g(ce.id),de(ce.displayName)},className:`p-3 cursor-pointer flex items-center gap-3 hover:bg-gray-700 transition-colors ${f===ce.id?"bg-emerald-900/20":""}`,children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center",children:ce.avatar?i.jsx("img",{src:ce.avatar,className:"w-full h-full rounded-full object-cover"}):i.jsx(es,{className:"w-4 h-4"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-bold text-white",children:ce.displayName}),i.jsx("div",{className:"text-xs text-gray-400",children:ce.email})]}),f===ce.id&&i.jsx(vn,{className:"w-4 h-4 text-emerald-500 mr-auto"})]},ce.id))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:" "}),i.jsx("input",{type:"text",value:x,onChange:ce=>w(ce.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-700 bg-gray-800 text-white focus:border-emerald-500 outline-none font-bold",placeholder:":    "})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:" "}),i.jsx("textarea",{value:v,onChange:ce=>N(ce.target.value),className:"w-full h-32 px-4 py-3 rounded-xl border border-gray-700 bg-gray-800 text-white focus:border-emerald-500 outline-none resize-none leading-relaxed",placeholder:"  ..."})]}),i.jsxs("button",{onClick:A,disabled:C,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2",children:[C?i.jsx(bt,{className:"w-5 h-5 animate-spin"}):i.jsx(ca,{className:"w-5 h-5"})," "]})]})]}):i.jsxs("div",{className:"h-full flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-2",children:[i.jsx(jr,{className:"w-6 h-6 text-emerald-400"})," "]}),i.jsx("button",{onClick:j,className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:i.jsx(ax,{className:"w-5 h-5 text-gray-400"})})]}),ge?i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsx(bt,{className:"w-8 h-8 animate-spin text-emerald-500"})}):ue.length===0?i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-500",children:[i.jsx(jr,{className:"w-16 h-16 mb-4 opacity-20"}),i.jsx("p",{children:"   "})]}):i.jsx("div",{className:"space-y-4 flex-1 overflow-y-auto custom-scrollbar pr-2",children:ue.map(ce=>i.jsxs("div",{className:`bg-gray-800 p-5 rounded-2xl border transition-all hover:border-emerald-500/30 relative overflow-hidden ${ce.read?"border-gray-700":"border-emerald-500/50 bg-emerald-900/5"}`,children:[i.jsxs("div",{className:"flex flex-row items-start gap-4 relative z-10",children:[i.jsx("div",{className:`w-10 h-10 rounded-full shrink-0 flex items-center justify-center text-base font-bold shadow-md border-2 ${ce.read?"bg-gray-700 border-gray-600 text-gray-400":"bg-emerald-600 border-emerald-500 text-white"}`,children:ce.studentName?ce.studentName.charAt(0).toUpperCase():i.jsx(es,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("div",{children:[i.jsx("h4",{className:`font-bold text-base leading-tight ${ce.read?"text-gray-300":"text-white"}`,children:ce.studentName||""}),i.jsx("p",{className:"text-xs text-gray-500 font-mono mt-0.5",children:ce.studentEmail})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-gray-900/50 px-3 py-1 rounded-full border border-gray-700/50",children:[i.jsx(nx,{className:"w-3 h-3 text-gray-500"}),i.jsx("span",{className:"text-[10px] font-bold text-gray-400 dir-ltr",children:I(ce.createdAt)})]})]}),i.jsx("div",{className:"p-3 bg-gray-900/50 rounded-xl border border-gray-700/30 text-sm text-gray-300 leading-relaxed whitespace-pre-wrap",children:ce.message}),i.jsxs("div",{className:"flex justify-end gap-3 mt-3",children:[!ce.read&&i.jsxs("button",{onClick:()=>M(ce.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20 text-xs font-bold transition-colors",children:[i.jsx(vn,{className:"w-3.5 h-3.5"})," "]}),i.jsxs("button",{onClick:()=>O(ce.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-red-500/10 text-red-400 hover:bg-red-500/20 text-xs font-bold transition-colors",children:[i.jsx(vi,{className:"w-3.5 h-3.5"}),""]})]})]}),i.jsx("div",{className:"flex flex-col items-center justify-center gap-1 self-center opacity-30",children:i.jsx("div",{className:"w-8 h-10 border-2 border-gray-500 rounded-lg flex items-center justify-center",children:i.jsx(jr,{className:"w-4 h-4 text-gray-500"})})})]}),!ce.read&&i.jsx("div",{className:"absolute top-0 right-0 w-1.5 h-full bg-emerald-500"})]},ce.id))})]})})]})})]})},cM=({onBack:r,onNavigate:e})=>{const[t,s]=P.useState([]),[l,c]=P.useState(!0),[d,f]=P.useState("ALL");P.useEffect(()=>{g()},[]);const g=async()=>{c(!0);try{const N=cn(at(Pe,"reviews"),_d("createdAt","desc")),V=(await wn(N)).docs.map(Z=>({id:Z.id,...Z.data()}));s(V)}catch(N){console.error("Error fetching reviews:",N)}finally{c(!1)}},x=t.filter(N=>d==="ALL"?!0:d==="QUIZ"?N.type==="quiz":d==="EXPLANATION"?N.type==="explanation":!0),w=N=>N?(N.toDate?N.toDate():new Date(N.seconds*1e3)).toLocaleDateString("ar-EG"):"",v=t.length>0?(t.reduce((N,C)=>N+C.rating,0)/t.length).toFixed(1):"0.0";return i.jsxs("div",{className:"min-h-screen bg-gray-950 animate-fade-in transition-colors duration-300 text-gray-100",children:[i.jsx("div",{className:"bg-gray-950 border-b border-white/5 py-6 px-4 sticky top-0 z-30 shadow-sm",children:i.jsxs("div",{className:"max-w-5xl mx-auto flex items-center gap-3 text-sm md:text-base",children:[i.jsx("button",{onClick:()=>e("PROFILE"),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-300 hover:text-white",children:i.jsx(qt,{className:"w-5 h-5"})}),i.jsx("span",{onClick:()=>e("PROFILE"),className:"font-bold text-gray-400 hover:text-white cursor-pointer transition-colors",children:""}),i.jsx("span",{className:"text-gray-600",children:"/"}),i.jsx("span",{className:"font-bold text-white",children:" "})]})}),i.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-xl border border-gray-700 p-8 mb-8 flex flex-col md:flex-row items-center justify-between gap-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-yellow-900/20 rounded-2xl flex items-center justify-center border border-yellow-500/20 text-yellow-400",children:i.jsx(yl,{className:"w-8 h-8 fill-yellow-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-black text-white",children:v}),i.jsx("p",{className:"text-gray-400 text-sm font-bold",children:"  "})]})]}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"text-center px-6 py-3 bg-gray-800 rounded-xl border border-gray-700",children:[i.jsx("span",{className:"block text-2xl font-bold text-white",children:t.length}),i.jsx("span",{className:"text-xs text-gray-400",children:" "})]})})]}),i.jsxs("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[i.jsx("button",{onClick:()=>f("ALL"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="ALL"?"bg-white text-gray-900":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:""}),i.jsx("button",{onClick:()=>f("QUIZ"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="QUIZ"?"bg-blue-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:" "}),i.jsx("button",{onClick:()=>f("EXPLANATION"),className:`px-4 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap ${d==="EXPLANATION"?"bg-purple-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:" "})]}),i.jsx("div",{className:"bg-gray-900 rounded-3xl border border-gray-700 min-h-[400px] p-6 relative",children:l?i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(bt,{className:"w-10 h-10 animate-spin text-emerald-500"})}):x.length===0?i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-500",children:[i.jsx(rm,{className:"w-16 h-16 mb-4 opacity-20"}),i.jsx("p",{className:"text-lg font-bold",children:"     "})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(N=>i.jsxs("div",{className:"bg-gray-800 p-5 rounded-2xl border border-gray-700 hover:border-gray-600 transition-all",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-bold text-white text-lg flex items-center gap-2",children:[N.studentName,i.jsx("span",{className:"text-xs font-normal text-gray-500 bg-gray-900 px-2 py-0.5 rounded-md border border-gray-700",children:w(N.createdAt)})]}),i.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[[...Array(5)].map((C,V)=>i.jsx(yl,{className:`w-3 h-3 ${V<Math.round(N.rating/2)?"text-yellow-400 fill-yellow-400":"text-gray-600"}`},V)),i.jsxs("span",{className:"text-xs text-yellow-500 font-bold mr-1",children:["(",N.rating,"/10)"]})]})]}),i.jsx("span",{className:`px-2 py-1 rounded-lg text-[10px] font-bold ${N.type==="quiz"?"bg-blue-900/30 text-blue-300 border border-blue-900":"bg-purple-900/30 text-purple-300 border border-purple-900"}`,children:N.type==="quiz"?"":""})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:" :"}),i.jsx("p",{className:"text-emerald-400 font-bold text-sm line-clamp-1",children:N.targetTitle})]}),N.comment?i.jsx("div",{className:"bg-gray-900/50 p-3 rounded-xl border border-gray-700/50",children:i.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:['"',N.comment,'"']})}):i.jsx("p",{className:"text-gray-600 text-xs italic",children:"   "})]},N.id))})})]})]})};function uM(){const[r,e]=P.useState("HOME"),[t,s]=P.useState(!1),[l,c]=P.useState(!1),d=P.useRef({}),f=P.useRef(!1),{logout:g}=Us();P.useEffect(()=>{"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.scrollTo(0,0),window.history.replaceState({view:"HOME"},"","");const v=N=>{N.state&&N.state.view?(f.current=!0,e(N.state.view)):(f.current=!0,e("HOME"))};return window.addEventListener("popstate",v),()=>window.removeEventListener("popstate",v)},[]),P.useEffect(()=>{if(f.current){const v=d.current[r]||0;setTimeout(()=>window.scrollTo(0,v),10)}else window.scrollTo(0,0)},[r]);const x=(v,N=!1)=>{if(v===r){v==="HOME"&&window.scrollTo({top:0,behavior:"smooth"});return}d.current[r]=window.scrollY,f.current=N,window.history.pushState({view:v},"",""),e(v)},w=async()=>{c(!0),setTimeout(async()=>{await g(),c(!1),x("HOME")},1e3)};return i.jsxs("div",{className:"min-h-screen flex flex-col relative transition-colors duration-500 bg-gray-950 text-gray-100 selection:bg-emerald-500/30",children:[r==="HOME"&&i.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden bg-gray-950",children:[i.jsx(Sy,{}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-950/20 via-transparent to-gray-950/40"}),i.jsx("div",{className:"absolute inset-0 opacity-[0.03] bg-[url('https://www.transparenttextures.com/patterns/noise.png')]"})]}),l&&i.jsx("div",{className:"fixed inset-0 z-[200] bg-emerald-900/90 backdrop-blur-sm flex items-center justify-center animate-fade-in",children:i.jsx("div",{className:"text-white text-2xl font-bold animate-bounce",children:"  ..."})}),i.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[i.jsx(jD,{onLoginClick:()=>s(!0),onNavigate:v=>x(v),onLogoutClick:w}),i.jsxs("main",{className:`flex-grow ${r!=="HOME"?"pt-24":""}`,children:[r==="HOME"&&i.jsxs(i.Fragment,{children:[i.jsx(AD,{onStartQuiz:()=>x("QUIZZES"),onLoginClick:()=>s(!0),onNavigate:v=>x(v)}),i.jsx(CD,{onNavigate:v=>x(v)}),i.jsx(KD,{onLoginClick:()=>s(!0)}),i.jsx(lM,{onNavigate:()=>x("PLATFORM_DEFINITION")}),i.jsxs("div",{className:"relative w-full h-px bg-gray-800/50 my-0 overflow-visible z-20",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-emerald-500 to-transparent h-[1px] opacity-60"}),i.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-1/2 h-[3px] bg-gradient-to-r from-transparent via-emerald-400 to-transparent blur-[2px] opacity-80"})]}),i.jsx(sM,{}),i.jsx(rM,{onLoginClick:()=>s(!0)}),i.jsx("div",{className:"w-full h-1 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_35px_rgba(16,185,129,1)] relative z-20 opacity-100"}),i.jsx(aM,{}),i.jsx("div",{className:"w-full h-0.5 bg-gradient-to-r from-transparent via-emerald-500 to-transparent shadow-[0_0_30px_rgba(16,185,129,1)] relative z-20 opacity-80"}),i.jsx(nM,{onNavigate:v=>x(v)})]}),r==="ABOUT_PLATFORM"&&i.jsx(BD,{onBack:()=>x("HOME",!0)}),r==="PLATFORM_DEFINITION"&&i.jsx(iM,{onBack:()=>x("HOME",!0)}),r==="TEACHER_CV"&&i.jsx(UD,{onBack:()=>x("HOME",!0)}),r==="PROFILE"&&i.jsx(OD,{onNavigate:v=>x(v)}),r==="TEACHER_DASHBOARD"&&i.jsx(kD,{}),r==="QUESTION_BANK"&&i.jsx(QD,{onBack:()=>x("HOME",!0)}),r==="TEACHER_EXPLANATIONS"&&i.jsx(WD,{onNavigate:v=>x(v),onBack:()=>x("PROFILE",!0)}),r==="TEACHER_UPLOAD_FILES"&&i.jsx(tM,{onNavigate:v=>x(v),onBack:()=>x("PROFILE",!0)}),r==="QUIZZES"&&i.jsx(PD,{onBack:()=>x("HOME",!0)}),r==="LESSONS"&&i.jsx(qD,{onBack:()=>x("HOME",!0)}),r==="LESSONS_EXPLANATIONS"&&i.jsx(JD,{onBack:()=>x("HOME",!0)}),r==="CONTACT_TEACHER"&&i.jsx($D,{onBack:()=>x("HOME",!0)}),r==="TEACHER_CORRESPONDENCE"&&i.jsx(oM,{onNavigate:v=>x(v)}),r==="TEACHER_REVIEWS"&&i.jsx(cM,{onNavigate:v=>x(v)})]}),i.jsx(RD,{isOpen:t,onClose:()=>s(!1)}),i.jsx("footer",{className:"bg-gray-950 border-t border-white/5 py-12 relative z-20",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 bg-white/5 rounded-full flex items-center justify-center border border-white/10",children:i.jsx("img",{src:"https://lh3.googleusercontent.com/d/13x8Gorb7y4H2qcQ1LVJtHY9-RoUhxg2z",alt:"Logo",className:"w-6 h-6 rounded-full"})}),i.jsx("span",{className:"text-xl font-black text-white",children:" "})]}),i.jsxs("p",{className:"text-gray-500 text-sm",children:[" ",new Date().getFullYear(),"   .     ."]})]})})]})]})}const IS=document.getElementById("root");if(!IS)throw new Error("Could not find root element to mount to");const dM=p4.createRoot(IS);dM.render(i.jsx(N2.StrictMode,{children:i.jsx(SD,{children:i.jsx(uM,{})})}));
